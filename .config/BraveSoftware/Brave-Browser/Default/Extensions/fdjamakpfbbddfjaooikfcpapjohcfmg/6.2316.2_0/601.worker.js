/*! For license information please see 601.worker.js.LICENSE.txt */
(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[601],{27931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInternetExplorer=t.isChromiumEdge=t.isOpera=t.isSafari=t.isEdge=t.isFirefox=t.isChrome=t.getBrowserCountry=t.getBrowserLanguage=t.getBrowserVersion=t.getBrowserName=void 0;const n=r(57101),o=r(5301);var a;function i(){var e;return null!==(e=o.getParsedUserAgent().browser.name)&&void 0!==e?e:""}function s(){var e;return null!==(e=o.getParsedUserAgent().browser.version)&&void 0!==e?e:""}function c(){return i()===a.EDGE}!function(e){e.CHROME="Chrome",e.FIREFOX="Firefox",e.EDGE="Edge",e.SAFARI="Safari",e.OPERA="Opera"}(a||(a={})),t.getBrowserName=i,t.getBrowserVersion=s,t.getBrowserLanguage=function(){var e;const t=n.getNavigator();return null!==(e=null==t?void 0:t.language)&&void 0!==e?e:""},t.getBrowserCountry=function(){var e;const t=n.getNavigator(),r=null!==(e=null==t?void 0:t.language)&&void 0!==e?e:"";let o="";return r.length>=5&&(o=r.substr(3,2)),o},t.isChrome=function(){return i()===a.CHROME},t.isFirefox=function(){return i()===a.FIREFOX},t.isEdge=c,t.isSafari=function(){return i()===a.SAFARI},t.isOpera=function(){return i()===a.OPERA},t.isChromiumEdge=function(){var e;const t=null!==(e=s())&&void 0!==e?e:"";return c()&&parseInt(t.split(".")[0],10)>=76},t.isInternetExplorer=function(){var e;const t=i();return null!==(e="Internet Explorer"===t)&&void 0!==e?e:"IE"===t}},92327:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.websiteTrackingId=t.desktopAnonymousComputerId=void 0;const n=r(75077);t.desktopAnonymousComputerId=function(){return n.parse(document.cookie).anonid},t.websiteTrackingId=function(){try{const e=n.parse(document.cookie);return JSON.parse(e.userFunnelCookie).trackingId}catch(e){return null}}},28186:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultDeviceName=void 0;const n=r(27931),o=r(80693);t.getDefaultDeviceName=function(){return`${n.getBrowserName()} - ${o.getOSName()}`}},95764:(e,t,r)=>{"use strict";var n=r(73656);function o(){return"object"==typeof window}function a(){return"object"==typeof self&&"function"==typeof importScripts}Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeEnvironment=t.isWorkerEnvironment=t.isBrowserEnvironment=void 0,t.isBrowserEnvironment=o,t.isWorkerEnvironment=a,t.isNodeEnvironment=function(){return"object"==typeof n&&!o()&&!a()}},57101:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNavigator=void 0;const n=r(95764);t.getNavigator=function(){return n.isBrowserEnvironment()?window.navigator:n.isWorkerEnvironment()?self.navigator:void 0}},16885:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserAgent=void 0;const n=r(57101);t.getUserAgent=function(){const e=n.getNavigator();return null==e?void 0:e.userAgent}},11814:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userAgent=t.url=t.storage=t.os=t.navigator=t.env=t.device=t.cookie=t.browser=void 0;const n=r(27931);t.browser=n;const o=r(92327);t.cookie=o;const a=r(28186);t.device=a;const i=r(95764);t.env=i;const s=r(57101);t.navigator=s;const c=r(80693);t.os=c;const u=r(94901);t.storage=u;const l=r(46323);t.url=l;const d=r(16885);t.userAgent=d},80693:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOSVersion=t.getOSName=void 0;const n=r(5301);function o(){return"Chromium OS"===n.getParsedUserAgent().os.name?"Chrome OS":n.getParsedUserAgent().os.name}t.getOSName=o,t.getOSVersion=function(){const{version:e=""}=n.getParsedUserAgent().os;return"Mac OS"===o()?`OS_X_${e.replace(/\./g,"_")}`:e}},94901:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeBrowserStorage=void 0;var n=r(94768);Object.defineProperty(t,"makeBrowserStorage",{enumerable:!0,get:function(){return n.makeBrowserStorage}})},40632:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.itemExists=t.writeItem=t.removeItem=t.readItem=t.isSupported=void 0;const n=r(27931),o=r(95764),a=1,i="dashlane",s="user-data";function c(){return new Promise(((e,t)=>{const r=o.isBrowserEnvironment()?window.indexedDB:o.isWorkerEnvironment()?self.indexedDB:null;if(!r)return t(new Error("indexedDB is not supported in this environment"));const n=r.open(i,a);n.onerror=function(){t(n.error)},n.onupgradeneeded=()=>{n.result.objectStoreNames.contains(s)||n.result.createObjectStore(s)},n.onsuccess=function(){n.onsuccess=null,e(n.result)}}))}async function u(e="readwrite"){return(await c()).transaction([s],e).objectStore(s)}async function l(){if(!o.isBrowserEnvironment()&&!o.isWorkerEnvironment())return!1;if(n.isInternetExplorer())return!1;if(o.isBrowserEnvironment()&&!window.indexedDB)return!1;if(o.isWorkerEnvironment()&&!self.indexedDB)return!1;try{return await c(),!0}catch(e){return!1}}async function d(e){const t=await u("readonly");return new Promise((r=>{const n=t.get(e);n.onsuccess=()=>{n.onsuccess=null,r(n.result)}}))}async function p(e){const t=await u("readwrite");return new Promise((r=>{const n=t.delete(e);n.onsuccess=()=>{n.onsuccess=null,r()}}))}async function f(e,t){const r=await u("readwrite");return new Promise((n=>{const o=r.put(t,e);o.onsuccess=()=>{o.onsuccess=null,n()}}))}async function g(e){return null!=await d(e)}t.isSupported=l,t.readItem=d,t.removeItem=p,t.writeItem=f,t.itemExists=g;const m={isSupported:l,readItem:d,writeItem:f,removeItem:p,itemExists:g};t.default=m},79967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={isSupported:()=>Promise.resolve(void 0!==typeof window&&!!window.localStorage),readItem:e=>Promise.resolve(window.localStorage.getItem(e)),writeItem:(e,t)=>Promise.resolve(window.localStorage.setItem(e,t)),removeItem:e=>Promise.resolve(window.localStorage.removeItem(e)),itemExists:e=>{const t=window.localStorage.getItem(e);return Promise.resolve(null!=t)}};t.default=r},94768:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeBrowserStorage=void 0;const n=r(40632),o=r(79967),a=r(45437);t.makeBrowserStorage=async()=>{try{if(await n.default.isSupported())return n.default;if(await o.default.isSupported())return o.default}catch(e){}return a.default}},45437:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={},n={isSupported:()=>Promise.resolve(!0),readItem:e=>{const t=e in r;return Promise.resolve(t?r[e]:null)},writeItem:(e,t)=>(r[e]=t,Promise.resolve()),removeItem:e=>(delete r[e],Promise.resolve()),itemExists:e=>Promise.resolve(e in r)};t.default=n},46323:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAuthorityForUrl=t.getDomainForUrl=t.getSafeDomainForUrl=void 0;const n=r(17509);t.getSafeDomainForUrl=e=>n.extractRootDomain(e),t.getDomainForUrl=e=>{if(!e)return null;const t=e.trim(),r=["http://","https://","ftp://","ftps://","file://","afp://","smb://"].filter((e=>t.startsWith(e)))[0],n=r?t.substr(r.length):t,o=n.indexOf("/"),a=o>-1?n.slice(0,o):n,i=a.split(""),s=i.filter((e=>"."===e)),c=i.filter((e=>":"===e)),u=i.filter((e=>!Number.isNaN(Number(e))));if(3===s.length&&(u.length===a.length-3||u.length===a.length-4&&1===c.length))return a;if(!s.length||1===s.length)return a;const l=a.lastIndexOf("."),d=a.slice(0,l),p=a.substr(l),f=d.lastIndexOf("."),g=d.substr(f+1),m=d.slice(0,f);if(-1===["co","com","fr","ac","gov","org","edu","net"].indexOf(g)&&-1===["judiciary.uk","ltd.uk","me.uk","mod.uk","nhs.uk","nic.uk","parliament.uk","plc.uk","sch.uk","bl.uk","jet.uk","british-library.uk","nls.uk","qc.ca"].indexOf(g+p))return g+p;const h=m.lastIndexOf(".");return h>-1?m.substr(h+1)+"."+g+p:a},t.getAuthorityForUrl=e=>{const t=(null!=e?e:"").trim();if(!t)return null;const r=["afp://","file://","ftp://","ftps://","http://","https://","smb://"].find((e=>t.startsWith(e))),n=r?t.substr(r.length):t,o=n.indexOf("/");return o>-1?n.slice(0,o):n}},5301:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getParsedUserAgent=void 0;const n=r(52056),o=r(16885);t.getParsedUserAgent=function(){return new n(o.getUserAgent(),{browser:[[/(AVG|Avast)\/([\w\.]+)/i],[[n.BROWSER.NAME,"Avast"],n.BROWSER.VERSION],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[n.BROWSER.NAME,"Edge"],n.BROWSER.VERSION]]}).getResult()}},44015:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseXml=t.atom=t.toXml=t.isKWXMLElement=void 0;var n=r(61465),o=r(42541),a={ROOT:"root",DATAITEM:"KWDataItem",DATACOLLECTION:"KWDataCollection",DATALIST:"KWDataList",SIMPLECHOICE:"KWAnalyzeSimpleChoice",CONDITIONALCHOICE:"KWAnalyzeConditionalChoice",NAMECONDITION:"KWNameCondition"},i=/^-?\d+(\.\d+)?$/i;function s(e){return 0===e.indexOf("__")}function c(e){return e instanceof Object}function u(e){return e instanceof Array}function l(e,t){if(null==e)throw new Error("Undefined input data");if("string"==typeof e)return t(a.DATAITEM).cdata(e);if("boolean"==typeof e||"number"==typeof e)return t(a.DATAITEM).cdata(e.toString());if(u(e)){var r=t(a.DATALIST);return e.forEach((function(e){return l(e,r.ele.bind(r))})),r}if(c(e)&&e.__type__===a.NAMECONDITION)return t(a.NAMECONDITION).cdata(e.__text__);if(c(e)&&function(e){return e.__type__===a.CONDITIONALCHOICE}(e)){var n=t(a.CONDITIONALCHOICE);if(n.att("conditional",e.conditional),n.att("score",e.score),e.lang&&n.att("lang",e.lang),!e.__children__)throw new Error("ConditionalChoice has no chidlren");return e.__children__.forEach((function(e){return l(e,n.ele.bind(n))})),n}if(c(e)&&e.__type__===a.SIMPLECHOICE){var o=t(a.SIMPLECHOICE);for(var i in e)s(i)||o.att(i,e[i]);return o}if(c(e)){var d=t(e.__type__||a.DATACOLLECTION);for(var i in e)s(i)||(null==e[i]&&console.error("Undefined value for key %s",i),l(e[i],d.ele.bind(d)).att("key",i));if(e.__children__&&e.__children__.forEach((function(e){return l(e,d.ele.bind(d))})),e.__attributes__)for(var p in e.__attributes__)Object.prototype.hasOwnProperty.call(e.__attributes__,p)&&d.att(p,e.__attributes__[p]);return d}}function d(e){if(i.test(e)){var t=parseFloat(e);if(isNaN(t))throw new Error("Number format string could not be parsed as float!");return t}switch(e.toLowerCase()){case"true":return!0;case"false":return!1;default:return e}}t.isKWXMLElement=c,t.toXml=function(e,t){try{var r=o.create("root",{version:"1.0",encoding:"UTF-8"}),n=l(e,r.ele.bind(r)),a={pretty:!t||void 0===t.pretty||t.pretty,indent:" ",newline:"\r\n",allowEmpty:!(!t||void 0===t.allowEmpty)&&t.allowEmpty};return(t&&t.omitRoot?n.toString(a):r.end(a)).replace(/[\s\n]+<!\[CDATA\[/g,"<![CDATA[").replace(/\]\]>[\s\n]+/g,"]]>")}catch(e){throw new Error("[kwXml] - toXml: something went wrong.")}},t.atom=d,t.parseXml=function(e,t,r){void 0===r&&(r={fixType:!0});var o=n.parser(!0,{}),i=[],s=!1;o.onerror=function(t){var r=new Error("[kwXml] - parseXml: something went wrong.");e(r,null)},o.onopentag=function(e){if(e.name!==a.ROOT){var t={};i.length||(t.__first__=!0);var r=e.attributes.key;if(r&&"string"==typeof r&&(t.__key__=r,delete e.attributes.key),(e.name!==a.DATACOLLECTION||Object.keys(e.attributes).length>0)&&(t.__type__=e.name),e.name===a.SIMPLECHOICE||e.name===a.CONDITIONALCHOICE)for(var n in e.attributes)if("score"===n)t[n]=parseFloat(e.attributes[n]);else{var o=e.attributes[n];"string"==typeof o&&(t[n]=o)}else Object.keys(e.attributes).length&&(t.__attributes__=e.attributes);e.name!==a.DATAITEM&&e.name!==a.NAMECONDITION?t.__children__=[]:t.__text__="",i.push(t)}},o.oncdata=function(e){if(!i.length)throw new Error("Invalid stack length "+i.length);var t=i[i.length-1];if(!c(t))throw new Error("Invalid top type, expected KWXMLElement: "+t);if(!t||t.__type__!==a.DATAITEM&&t.__type__!==a.NAMECONDITION)throw new Error("Invalid stack top ("+(t?t.__type__:"EMPTY")+")");t.__text__+=e},o.ontext=function(e){if(""!==e&&e.replace(/\s/g,"").length&&i.length){var t=i[i.length-1];if(!c(t))throw new Error("[onText] : Invalid open tag type expecting KWXMLElement");t.__value__=e}},o.onclosetag=function(t){if(t!==a.ROOT){var n=i.pop(),o=null;if(i.length)o=i[i.length-1];else if(c(n)){if(!n.__first__)throw new Error("Invalid first node");delete n.__first__}var l=c(n)&&n.__key__;if(c(n)&&l&&delete n.__key__,c(n)&&n.__type__===a.DATAITEM?n=r.fixType?d(n.__text__):n.__text__:c(n)&&n.__type__===a.DATALIST&&!n.__attributes__&&(n=n.__children__),c(n)&&n.__children__&&!n.__children__.length&&"KWDataList"!==n.__type__&&(n.__type__===a.CONDITIONALCHOICE?console.error("Empty ConditionalChoice"):delete n.__children__),null===o){if(s)throw new Error("Callback was called once already. Document malformed?");e(null,n),s=!0}else if(c(o)&&o.__type__===a.DATALIST){if(l)throw new Error("Item in KWDataList has a key");u(n)||o.__children__.push(n)}else l?o[l]=n:c(o)&&!u(n)&&o.__children__.push(n)}},o.onend=function(){if(0!==i.length)throw new Error("Invalid stack depth");if(!s)throw new Error("Callback was never called")},o.write(t).close()}},71554:(e,t,r)=>{"use strict";var n,o=r(15313).Buffer;function a(e){return Object.keys(e).map((t=>e[t]))}Object.defineProperty(t,"__esModule",{value:!0}),(n=t.HashAlgorithms||(t.HashAlgorithms={})).SHA1="sha1",n.SHA256="sha256",n.SHA512="sha512";const i=a(t.HashAlgorithms);var s;(s=t.KeyEncodings||(t.KeyEncodings={})).ASCII="ascii",s.BASE64="base64",s.HEX="hex",s.LATIN1="latin1",s.UTF8="utf8";const c=a(t.KeyEncodings);var u;(u=t.Strategy||(t.Strategy={})).HOTP="hotp",u.TOTP="totp";const l=a(t.Strategy),d=()=>{throw new Error("Please provide an options.createDigest implementation.")};function p(e){return/^(\d+)$/.test(e)}function f(e,t,r){return e.length>=t?e:`${Array(t+1).join(r)}${e}`.slice(-1*t)}function g(e){const t=`otpauth://${e.type}/{labelPrefix}:{accountName}?secret={secret}{query}`,r=[];if(l.indexOf(e.type)<0)throw new Error(`Expecting options.type to be one of ${l.join(", ")}. Received ${e.type}.`);if("hotp"===e.type){if(null==e.counter||"number"!=typeof e.counter)throw new Error('Expecting options.counter to be a number when options.type is "hotp".');r.push(`&counter=${e.counter}`)}return"totp"===e.type&&e.step&&r.push(`&period=${e.step}`),e.digits&&r.push(`&digits=${e.digits}`),e.algorithm&&r.push(`&algorithm=${e.algorithm.toUpperCase()}`),e.issuer&&r.push(`&issuer=${encodeURIComponent(e.issuer)}`),t.replace("{labelPrefix}",encodeURIComponent(e.issuer||e.accountName)).replace("{accountName}",encodeURIComponent(e.accountName)).replace("{secret}",e.secret).replace("{query}",r.join(""))}class m{constructor(e={}){this._defaultOptions=Object.freeze({...e}),this._options=Object.freeze({})}create(e={}){return new m(e)}clone(e={}){const t=this.create({...this._defaultOptions,...e});return t.options=this._options,t}get options(){return Object.freeze({...this._defaultOptions,...this._options})}set options(e){this._options=Object.freeze({...this._options,...e})}allOptions(){return this.options}resetOptions(){this._options=Object.freeze({})}}function h(e){if("function"!=typeof e.createDigest)throw new Error("Expecting options.createDigest to be a function.");if("function"!=typeof e.createHmacKey)throw new Error("Expecting options.createHmacKey to be a function.");if("number"!=typeof e.digits)throw new Error("Expecting options.digits to be a number.");if(!e.algorithm||i.indexOf(e.algorithm)<0)throw new Error(`Expecting options.algorithm to be one of ${i.join(", ")}. Received ${e.algorithm}.`);if(!e.encoding||c.indexOf(e.encoding)<0)throw new Error(`Expecting options.encoding to be one of ${c.join(", ")}. Received ${e.encoding}.`)}const y=(e,t,r)=>o.from(t,r).toString("hex");function S(){return{algorithm:t.HashAlgorithms.SHA1,createHmacKey:y,createDigest:d,digits:6,encoding:t.KeyEncodings.ASCII}}function v(e){const t={...S(),...e};return h(t),Object.freeze(t)}function E(e){return f(e.toString(16),16,"0")}function A(e,t){const r=o.from(e,"hex"),n=15&r[r.length-1],a=((127&r[n])<<24|(255&r[n+1])<<16|(255&r[n+2])<<8|255&r[n+3])%Math.pow(10,t);return f(String(a),t,"0")}function _(e,t,r){const n=r.digest||function(e,t,r){const n=E(t),o=r.createHmacKey(r.algorithm,e,r.encoding);return r.createDigest(r.algorithm,o,n)}(e,t,r);return A(n,r.digits)}function b(e,t,r,n){return!!p(e)&&e===_(t,r,n)}function T(e,r,n,o,a){return g({algorithm:a.algorithm,digits:a.digits,type:t.Strategy.HOTP,accountName:e,counter:o,issuer:r,secret:n})}class I extends m{create(e={}){return new I(e)}allOptions(){return v(this.options)}generate(e,t){return _(e,t,this.allOptions())}check(e,t,r){return b(e,t,r,this.allOptions())}verify(e){if("object"!=typeof e)throw new Error("Expecting argument 0 of verify to be an object");return this.check(e.token,e.secret,e.counter)}keyuri(e,t,r,n){return T(e,t,r,n,this.allOptions())}}function w(e){if("number"==typeof e)return[Math.abs(e),Math.abs(e)];if(Array.isArray(e)){const[t,r]=e;if("number"==typeof t&&"number"==typeof r)return[Math.abs(t),Math.abs(r)]}throw new Error("Expecting options.window to be an number or [number, number].")}function C(e){if(h(e),w(e.window),"number"!=typeof e.epoch)throw new Error("Expecting options.epoch to be a number.");if("number"!=typeof e.step)throw new Error("Expecting options.step to be a number.")}const O=(e,t,r)=>{const n=e.length,a=o.from(e,t).toString("hex");if(n<r){const e=new Array(r-n+1).join(a);return o.from(e,"hex").slice(0,r).toString("hex")}return a},D=(e,r,n)=>{switch(e){case t.HashAlgorithms.SHA1:return O(r,n,20);case t.HashAlgorithms.SHA256:return O(r,n,32);case t.HashAlgorithms.SHA512:return O(r,n,64);default:throw new Error(`Expecting algorithm to be one of ${i.join(", ")}. Received ${e}.`)}};function P(){return{algorithm:t.HashAlgorithms.SHA1,createDigest:d,createHmacKey:D,digits:6,encoding:t.KeyEncodings.ASCII,epoch:Date.now(),step:30,window:0}}function N(e){const t={...P(),...e};return C(t),Object.freeze(t)}function R(e,t){return Math.floor(e/t/1e3)}function U(e,t){return _(e,R(t.epoch,t.step),t)}function L(e,t,r,n){const o=[];if(0===n)return o;for(let a=1;a<=n;a++){const n=t*a*r;o.push(e+n)}return o}function M(e,t,r){const n=w(r),o=1e3*t;return{current:e,past:L(e,-1,o,n[0]),future:L(e,1,o,n[1])}}function k(e,t,r){return!!p(e)&&e===U(t,r)}function B(e,t,r,n){let o=null;return e.some(((e,a)=>!!k(t,r,{...n,epoch:e})&&(o=a+1,!0))),o}function F(e,t,r){if(k(e,t,r))return 0;const n=M(r.epoch,r.step,r.window),o=B(n.past,e,t,r);return null!==o?-1*o:B(n.future,e,t,r)}function x(e,t){return Math.floor(e/1e3)%t}function G(e,t){return t-x(e,t)}function j(e,r,n,o){return g({algorithm:o.algorithm,digits:o.digits,step:o.step,type:t.Strategy.TOTP,accountName:e,issuer:r,secret:n})}class K extends I{create(e={}){return new K(e)}allOptions(){return N(this.options)}generate(e){return U(e,this.allOptions())}checkDelta(e,t){return F(e,t,this.allOptions())}check(e,t){return"number"==typeof this.checkDelta(e,t)}verify(e){if("object"!=typeof e)throw new Error("Expecting argument 0 of verify to be an object");return this.check(e.token,e.secret)}timeRemaining(){const e=this.allOptions();return G(e.epoch,e.step)}timeUsed(){const e=this.allOptions();return x(e.epoch,e.step)}keyuri(e,t,r){return j(e,t,r,this.allOptions())}}function $(e){if(C(e),"function"!=typeof e.keyDecoder)throw new Error("Expecting options.keyDecoder to be a function.");if(e.keyEncoder&&"function"!=typeof e.keyEncoder)throw new Error("Expecting options.keyEncoder to be a function.")}function V(){return{algorithm:t.HashAlgorithms.SHA1,createDigest:d,createHmacKey:D,digits:6,encoding:t.KeyEncodings.HEX,epoch:Date.now(),step:30,window:0}}function H(e){const t={...V(),...e};return $(t),Object.freeze(t)}function W(e,t){return t.keyEncoder(e,t.encoding)}function z(e,t){return t.keyDecoder(e,t.encoding)}function q(e,t){return W(t.createRandomBytes(e,t.encoding),t)}function Y(e,t){return U(z(e,t),t)}function Q(e,t,r){return F(e,z(t,r),r)}class Z extends K{create(e={}){return new Z(e)}allOptions(){return H(this.options)}generate(e){return Y(e,this.allOptions())}checkDelta(e,t){return Q(e,t,this.allOptions())}encode(e){return W(e,this.allOptions())}decode(e){return z(e,this.allOptions())}generateSecret(e=10){return q(e,this.allOptions())}}t.Authenticator=Z,t.HASH_ALGORITHMS=i,t.HOTP=I,t.KEY_ENCODINGS=c,t.OTP=m,t.STRATEGY=l,t.TOTP=K,t.authenticatorCheckWithWindow=Q,t.authenticatorDecoder=z,t.authenticatorDefaultOptions=V,t.authenticatorEncoder=W,t.authenticatorGenerateSecret=q,t.authenticatorOptionValidator=$,t.authenticatorOptions=H,t.authenticatorToken=Y,t.createDigestPlaceholder=d,t.hotpCheck=b,t.hotpCounter=E,t.hotpCreateHmacKey=y,t.hotpDefaultOptions=S,t.hotpDigestToToken=A,t.hotpKeyuri=T,t.hotpOptions=v,t.hotpOptionsValidator=h,t.hotpToken=_,t.isTokenValid=p,t.keyuri=g,t.objectValues=a,t.padStart=f,t.totpCheck=k,t.totpCheckByEpoch=B,t.totpCheckWithWindow=F,t.totpCounter=R,t.totpCreateHmacKey=D,t.totpDefaultOptions=P,t.totpEpochAvailable=M,t.totpKeyuri=j,t.totpOptions=N,t.totpOptionsValidator=C,t.totpPadSecret=O,t.totpTimeRemaining=G,t.totpTimeUsed=x,t.totpToken=U},31030:(e,t,r)=>{"use strict";var n=r(15313).Buffer;Object.defineProperty(t,"__esModule",{value:!0});var o,a=(o=r(69678))&&"object"==typeof o&&"default"in o?o.default:o;t.createDigest=(e,t,r)=>a.createHmac(e,n.from(t,"hex")).update(n.from(r,"hex")).digest().toString("hex"),t.createRandomBytes=(e,t)=>a.randomBytes(e).toString(t)},25740:(e,t,r)=>{"use strict";var n=r(15313).Buffer;Object.defineProperty(t,"__esModule",{value:!0});var o,a=(o=r(74155))&&"object"==typeof o&&"default"in o?o.default:o;t.keyDecoder=(e,t)=>a.decode(e).toString(t),t.keyEncoder=(e,t)=>a.encode(n.from(e,t).toString("ascii")).toString().replace(/=/g,"")},65756:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31030),o=r(25740),a=r(71554);const i=new a.HOTP({createDigest:n.createDigest}),s=new a.TOTP({createDigest:n.createDigest}),c=new a.Authenticator({createDigest:n.createDigest,createRandomBytes:n.createRandomBytes,keyDecoder:o.keyDecoder,keyEncoder:o.keyEncoder});t.authenticator=c,t.hotp=i,t.totp=s},57579:(e,t,r)=>{"use strict";var n=r(73656);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a,i,s=r(79171).codes,c=s.ERR_AMBIGUOUS_ARGUMENT,u=s.ERR_INVALID_ARG_TYPE,l=s.ERR_INVALID_ARG_VALUE,d=s.ERR_INVALID_RETURN_VALUE,p=s.ERR_MISSING_ARGS,f=r(2839),g=r(80911).inspect,m=r(80911).types,h=m.isPromise,y=m.isRegExp,S=Object.assign?Object.assign:r(69626).assign,v=Object.is?Object.is:r(42641);function E(){var e=r(38603);a=e.isDeepEqual,i=e.isDeepStrictEqual}new Map;var A=!1,_=e.exports=w,b={};function T(e){if(e.message instanceof Error)throw e.message;throw new f(e)}function I(e,t,r,n){if(!r){var o=!1;if(0===t)o=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var a=new f({actual:r,expected:!0,message:n,operator:"==",stackStartFn:e});throw a.generatedMessage=o,a}}function w(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];I.apply(void 0,[w,t.length].concat(t))}_.fail=function e(t,r,o,a,i){var s,c=arguments.length;if(0===c?s="Failed":1===c?(o=t,t=void 0):(!1===A&&(A=!0,(n.emitWarning?n.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===c&&(a="!=")),o instanceof Error)throw o;var u={actual:t,expected:r,operator:void 0===a?"fail":a,stackStartFn:i||e};void 0!==o&&(u.message=o);var l=new f(u);throw s&&(l.message=s,l.generatedMessage=!0),l},_.AssertionError=f,_.ok=w,_.equal=function e(t,r,n){if(arguments.length<2)throw new p("actual","expected");t!=r&&T({actual:t,expected:r,message:n,operator:"==",stackStartFn:e})},_.notEqual=function e(t,r,n){if(arguments.length<2)throw new p("actual","expected");t==r&&T({actual:t,expected:r,message:n,operator:"!=",stackStartFn:e})},_.deepEqual=function e(t,r,n){if(arguments.length<2)throw new p("actual","expected");void 0===a&&E(),a(t,r)||T({actual:t,expected:r,message:n,operator:"deepEqual",stackStartFn:e})},_.notDeepEqual=function e(t,r,n){if(arguments.length<2)throw new p("actual","expected");void 0===a&&E(),a(t,r)&&T({actual:t,expected:r,message:n,operator:"notDeepEqual",stackStartFn:e})},_.deepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new p("actual","expected");void 0===a&&E(),i(t,r)||T({actual:t,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:e})},_.notDeepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new p("actual","expected");void 0===a&&E(),i(t,r)&&T({actual:t,expected:r,message:n,operator:"notDeepStrictEqual",stackStartFn:e})},_.strictEqual=function e(t,r,n){if(arguments.length<2)throw new p("actual","expected");v(t,r)||T({actual:t,expected:r,message:n,operator:"strictEqual",stackStartFn:e})},_.notStrictEqual=function e(t,r,n){if(arguments.length<2)throw new p("actual","expected");v(t,r)&&T({actual:t,expected:r,message:n,operator:"notStrictEqual",stackStartFn:e})};var C=function e(t,r,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.forEach((function(e){e in t&&(void 0!==n&&"string"==typeof n[e]&&y(t[e])&&t[e].test(n[e])?o[e]=n[e]:o[e]=t[e])}))};function O(e,t,r,n){if("function"!=typeof t){if(y(t))return t.test(e);if(2===arguments.length)throw new u("expected",["Function","RegExp"],t);if("object"!==o(e)||null===e){var s=new f({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:n});throw s.operator=n.name,s}var c=Object.keys(t);if(t instanceof Error)c.push("name","message");else if(0===c.length)throw new l("error",t,"may not be an empty object");return void 0===a&&E(),c.forEach((function(o){"string"==typeof e[o]&&y(t[o])&&t[o].test(e[o])||function(e,t,r,n,o,a){if(!(r in e)||!i(e[r],t[r])){if(!n){var s=new C(e,o),c=new C(t,o,e),u=new f({actual:s,expected:c,operator:"deepStrictEqual",stackStartFn:a});throw u.actual=e,u.expected=t,u.operator=a.name,u}T({actual:e,expected:t,message:n,operator:a.name,stackStartFn:a})}}(e,t,o,r,c,n)})),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function D(e){if("function"!=typeof e)throw new u("fn","Function",e);try{e()}catch(e){return e}return b}function P(e){return h(e)||null!==e&&"object"===o(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function N(e){return Promise.resolve().then((function(){var t;if("function"==typeof e){if(!P(t=e()))throw new d("instance of Promise","promiseFn",t)}else{if(!P(e))throw new u("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then((function(){return t})).then((function(){return b})).catch((function(e){return e}))}))}function R(e,t,r,n){if("string"==typeof r){if(4===arguments.length)throw new u("error",["Object","Error","Function","RegExp"],r);if("object"===o(t)&&null!==t){if(t.message===r)throw new c("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===r)throw new c("error/message",'The error "'.concat(t,'" is identical to the message.'));n=r,r=void 0}else if(null!=r&&"object"!==o(r)&&"function"!=typeof r)throw new u("error",["Object","Error","Function","RegExp"],r);if(t===b){var a="";r&&r.name&&(a+=" (".concat(r.name,")")),a+=n?": ".concat(n):".";var i="rejects"===e.name?"rejection":"exception";T({actual:void 0,expected:r,operator:e.name,message:"Missing expected ".concat(i).concat(a),stackStartFn:e})}if(r&&!O(t,r,n,e))throw t}function U(e,t,r,n){if(t!==b){if("string"==typeof r&&(n=r,r=void 0),!r||O(t,r)){var o=n?": ".concat(n):".",a="doesNotReject"===e.name?"rejection":"exception";T({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(a).concat(o,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function L(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];I.apply(void 0,[L,t.length].concat(t))}_.throws=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];R.apply(void 0,[e,D(t)].concat(n))},_.rejects=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return N(t).then((function(t){return R.apply(void 0,[e,t].concat(n))}))},_.doesNotThrow=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];U.apply(void 0,[e,D(t)].concat(n))},_.doesNotReject=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return N(t).then((function(t){return U.apply(void 0,[e,t].concat(n))}))},_.ifError=function e(t){if(null!=t){var r="ifError got unwanted exception: ";"object"===o(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?r+=t.constructor.name:r+=t.message:r+=g(t);var n=new f({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),a=t.stack;if("string"==typeof a){var i=a.split("\n");i.shift();for(var s=n.stack.split("\n"),c=0;c<i.length;c++){var u=s.indexOf(i[c]);if(-1!==u){s=s.slice(0,u);break}}n.stack="".concat(s.join("\n"),"\n").concat(i.join("\n"))}throw n}},_.strict=S(L,_,{equal:_.strictEqual,deepEqual:_.deepStrictEqual,notEqual:_.notStrictEqual,notDeepEqual:_.notDeepStrictEqual}),_.strict.strict=_.strict},2839:(e,t,r)=>{"use strict";var n=r(73656);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){var t="function"==typeof Map?new Map:void 0;return c=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return u(e,arguments,d(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)},c(e)}function u(e,t,r){return u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&l(o,r.prototype),o},u.apply(null,arguments)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var f=r(80911).inspect,g=r(79171).codes.ERR_INVALID_ARG_TYPE;function m(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}var h="",y="",S="",v="",E={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},A=10;function _(e){var t=Object.keys(e),r=Object.create(Object.getPrototypeOf(e));return t.forEach((function(t){r[t]=e[t]})),Object.defineProperty(r,"message",{value:e.message}),r}function b(e){return f(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function T(e,t,r){var o="",a="",i=0,s="",c=!1,u=b(e),l=u.split("\n"),d=b(t).split("\n"),f=0,g="";if("strictEqual"===r&&"object"===p(e)&&"object"===p(t)&&null!==e&&null!==t&&(r="strictEqualObject"),1===l.length&&1===d.length&&l[0]!==d[0]){var _=l[0].length+d[0].length;if(_<=A){if(!("object"===p(e)&&null!==e||"object"===p(t)&&null!==t||0===e&&0===t))return"".concat(E[r],"\n\n")+"".concat(l[0]," !== ").concat(d[0],"\n")}else if("strictEqualObject"!==r&&_<(n.stderr&&n.stderr.isTTY?n.stderr.columns:80)){for(;l[0][f]===d[0][f];)f++;f>2&&(g="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var r=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,r-e.length)}(" ",f),"^"),f=0)}}for(var T=l[l.length-1],I=d[d.length-1];T===I&&(f++<2?s="\n  ".concat(T).concat(s):o=T,l.pop(),d.pop(),0!==l.length&&0!==d.length);)T=l[l.length-1],I=d[d.length-1];var w=Math.max(l.length,d.length);if(0===w){var C=u.split("\n");if(C.length>30)for(C[26]="".concat(h,"...").concat(v);C.length>27;)C.pop();return"".concat(E.notIdentical,"\n\n").concat(C.join("\n"),"\n")}f>3&&(s="\n".concat(h,"...").concat(v).concat(s),c=!0),""!==o&&(s="\n  ".concat(o).concat(s),o="");var O=0,D=E[r]+"\n".concat(y,"+ actual").concat(v," ").concat(S,"- expected").concat(v),P=" ".concat(h,"...").concat(v," Lines skipped");for(f=0;f<w;f++){var N=f-i;if(l.length<f+1)N>1&&f>2&&(N>4?(a+="\n".concat(h,"...").concat(v),c=!0):N>3&&(a+="\n  ".concat(d[f-2]),O++),a+="\n  ".concat(d[f-1]),O++),i=f,o+="\n".concat(S,"-").concat(v," ").concat(d[f]),O++;else if(d.length<f+1)N>1&&f>2&&(N>4?(a+="\n".concat(h,"...").concat(v),c=!0):N>3&&(a+="\n  ".concat(l[f-2]),O++),a+="\n  ".concat(l[f-1]),O++),i=f,a+="\n".concat(y,"+").concat(v," ").concat(l[f]),O++;else{var R=d[f],U=l[f],L=U!==R&&(!m(U,",")||U.slice(0,-1)!==R);L&&m(R,",")&&R.slice(0,-1)===U&&(L=!1,U+=","),L?(N>1&&f>2&&(N>4?(a+="\n".concat(h,"...").concat(v),c=!0):N>3&&(a+="\n  ".concat(l[f-2]),O++),a+="\n  ".concat(l[f-1]),O++),i=f,a+="\n".concat(y,"+").concat(v," ").concat(U),o+="\n".concat(S,"-").concat(v," ").concat(R),O+=2):(a+=o,o="",1!==N&&0!==f||(a+="\n  ".concat(U),O++))}if(O>20&&f<w-2)return"".concat(D).concat(P,"\n").concat(a,"\n").concat(h,"...").concat(v).concat(o,"\n")+"".concat(h,"...").concat(v)}return"".concat(D).concat(c?P:"","\n").concat(a).concat(o).concat(s).concat(g)}var I=function(e){function t(e){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"object"!==p(e)||null===e)throw new g("options","Object",e);var o=e.message,a=e.operator,c=e.stackStartFn,u=e.actual,l=e.expected,f=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=o)r=i(this,d(t).call(this,String(o)));else if(n.stderr&&n.stderr.isTTY&&(n.stderr&&n.stderr.getColorDepth&&1!==n.stderr.getColorDepth()?(h="[34m",y="[32m",v="[39m",S="[31m"):(h="",y="",v="",S="")),"object"===p(u)&&null!==u&&"object"===p(l)&&null!==l&&"stack"in u&&u instanceof Error&&"stack"in l&&l instanceof Error&&(u=_(u),l=_(l)),"deepStrictEqual"===a||"strictEqual"===a)r=i(this,d(t).call(this,T(u,l,a)));else if("notDeepStrictEqual"===a||"notStrictEqual"===a){var m=E[a],A=b(u).split("\n");if("notStrictEqual"===a&&"object"===p(u)&&null!==u&&(m=E.notStrictEqualObject),A.length>30)for(A[26]="".concat(h,"...").concat(v);A.length>27;)A.pop();r=1===A.length?i(this,d(t).call(this,"".concat(m," ").concat(A[0]))):i(this,d(t).call(this,"".concat(m,"\n\n").concat(A.join("\n"),"\n")))}else{var I=b(u),w="",C=E[a];"notDeepEqual"===a||"notEqual"===a?(I="".concat(E[a],"\n\n").concat(I)).length>1024&&(I="".concat(I.slice(0,1021),"...")):(w="".concat(b(l)),I.length>512&&(I="".concat(I.slice(0,509),"...")),w.length>512&&(w="".concat(w.slice(0,509),"...")),"deepEqual"===a||"equal"===a?I="".concat(C,"\n\n").concat(I,"\n\nshould equal\n\n"):w=" ".concat(a," ").concat(w)),r=i(this,d(t).call(this,"".concat(I).concat(w)))}return Error.stackTraceLimit=f,r.generatedMessage=!o,Object.defineProperty(s(r),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),r.code="ERR_ASSERTION",r.actual=u,r.expected=l,r.operator=a,Error.captureStackTrace&&Error.captureStackTrace(s(r),c),r.stack,r.name="AssertionError",i(r)}var r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),r=t,c=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:f.custom,value:function(e,t){return f(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){o(e,t,r[t])}))}return e}({},t,{customInspect:!1,depth:0}))}}],c&&a(r.prototype,c),t}(c(Error));e.exports=I},79171:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}var s,c,u={};function l(e,t,r){r||(r=Error);var n=function(r){function n(r,i,s){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),c=o(this,a(n).call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,i,s))),c.code=e,c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,r),n}(r);u[e]=n}function d(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}l("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),l("ERR_INVALID_ARG_TYPE",(function(e,t,o){var a,i,c;if(void 0===s&&(s=r(57579)),s("string"==typeof e,"'name' must be a string"),"string"==typeof t&&(i="not ",t.substr(0,i.length)===i)?(a="must not be",t=t.replace(/^not /,"")):a="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))c="The ".concat(e," ").concat(a," ").concat(d(t,"type"));else{var u=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+".".length>e.length)&&-1!==e.indexOf(".",r)}(e)?"property":"argument";c='The "'.concat(e,'" ').concat(u," ").concat(a," ").concat(d(t,"type"))}return c+". Received type ".concat(n(o))}),TypeError),l("ERR_INVALID_ARG_VALUE",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===c&&(c=r(80911));var o=c.inspect(t);return o.length>128&&(o="".concat(o.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(n,". Received ").concat(o)}),TypeError,RangeError),l("ERR_INVALID_RETURN_VALUE",(function(e,t,r){var o;return o=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(n(r)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(o,".")}),TypeError),l("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];void 0===s&&(s=r(57579)),s(t.length>0,"At least one arg needs to be specified");var o="The ",a=t.length;switch(t=t.map((function(e){return'"'.concat(e,'"')})),a){case 1:o+="".concat(t[0]," argument");break;case 2:o+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:o+=t.slice(0,a-1).join(", "),o+=", and ".concat(t[a-1]," arguments")}return"".concat(o," must be specified")}),TypeError),e.exports.codes=u},38603:(e,t,r)=>{"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a=void 0!==/a/g.flags,i=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},s=function(e){var t=[];return e.forEach((function(e,r){return t.push([r,e])})),t},c=Object.is?Object.is:r(42641),u=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},l=Number.isNaN?Number.isNaN:r(29736);function d(e){return e.call.bind(e)}var p=d(Object.prototype.hasOwnProperty),f=d(Object.prototype.propertyIsEnumerable),g=d(Object.prototype.toString),m=r(80911).types,h=m.isAnyArrayBuffer,y=m.isArrayBufferView,S=m.isDate,v=m.isMap,E=m.isRegExp,A=m.isSet,_=m.isNativeError,b=m.isBoxedPrimitive,T=m.isNumberObject,I=m.isStringObject,w=m.isBooleanObject,C=m.isBigIntObject,O=m.isSymbolObject,D=m.isFloat32Array,P=m.isFloat64Array;function N(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return!0}return 10===e.length&&e>=Math.pow(2,32)}function R(e){return Object.keys(e).filter(N).concat(u(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function U(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,o=0,a=Math.min(r,n);o<a;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0}var L=0,M=1,k=2,B=3;function F(e,t,r,n){if(e===t)return 0!==e||!r||c(e,t);if(r){if("object"!==o(e))return"number"==typeof e&&l(e)&&l(t);if("object"!==o(t)||null===e||null===t)return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==o(e))return(null===t||"object"!==o(t))&&e==t;if(null===t||"object"!==o(t))return!1}var i,s,u,d,p=g(e);if(p!==g(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var f=R(e),m=R(t);return f.length===m.length&&G(e,t,r,n,M,f)}if("[object Object]"===p&&(!v(e)&&v(t)||!A(e)&&A(t)))return!1;if(S(e)){if(!S(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(E(e)){if(!E(t)||(u=e,d=t,!(a?u.source===d.source&&u.flags===d.flags:RegExp.prototype.toString.call(u)===RegExp.prototype.toString.call(d))))return!1}else if(_(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(y(e)){if(r||!D(e)&&!P(e)){if(!function(e,t){return e.byteLength===t.byteLength&&0===U(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e,t))return!1;var N=R(e),F=R(t);return N.length===F.length&&G(e,t,r,n,L,N)}if(A(e))return!(!A(t)||e.size!==t.size)&&G(e,t,r,n,k);if(v(e))return!(!v(t)||e.size!==t.size)&&G(e,t,r,n,B);if(h(e)){if(s=t,(i=e).byteLength!==s.byteLength||0!==U(new Uint8Array(i),new Uint8Array(s)))return!1}else if(b(e)&&!function(e,t){return T(e)?T(t)&&c(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):I(e)?I(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):w(e)?w(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):C(e)?C(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):O(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}(e,t))return!1}return G(e,t,r,n,L)}function x(e,t){return t.filter((function(t){return f(e,t)}))}function G(e,t,r,a,c,l){if(5===arguments.length){l=Object.keys(e);var d=Object.keys(t);if(l.length!==d.length)return!1}for(var g=0;g<l.length;g++)if(!p(t,l[g]))return!1;if(r&&5===arguments.length){var m=u(e);if(0!==m.length){var h=0;for(g=0;g<m.length;g++){var y=m[g];if(f(e,y)){if(!f(t,y))return!1;l.push(y),h++}else if(f(t,y))return!1}var S=u(t);if(m.length!==S.length&&x(t,S).length!==h)return!1}else{var v=u(t);if(0!==v.length&&0!==x(t,v).length)return!1}}if(0===l.length&&(c===L||c===M&&0===e.length||0===e.size))return!0;if(void 0===a)a={val1:new Map,val2:new Map,position:0};else{var E=a.val1.get(e);if(void 0!==E){var A=a.val2.get(t);if(void 0!==A)return E===A}a.position++}a.val1.set(e,a.position),a.val2.set(t,a.position);var _=function(e,t,r,a,c,u){var l=0;if(u===k){if(!function(e,t,r,n){for(var a=null,s=i(e),c=0;c<s.length;c++){var u=s[c];if("object"===o(u)&&null!==u)null===a&&(a=new Set),a.add(u);else if(!t.has(u)){if(r)return!1;if(!$(e,t,u))return!1;null===a&&(a=new Set),a.add(u)}}if(null!==a){for(var l=i(t),d=0;d<l.length;d++){var p=l[d];if("object"===o(p)&&null!==p){if(!j(a,p,r,n))return!1}else if(!r&&!e.has(p)&&!j(a,p,r,n))return!1}return 0===a.size}return!0}(e,t,r,c))return!1}else if(u===B){if(!function(e,t,r,a){for(var i=null,c=s(e),u=0;u<c.length;u++){var l=n(c[u],2),d=l[0],p=l[1];if("object"===o(d)&&null!==d)null===i&&(i=new Set),i.add(d);else{var f=t.get(d);if(void 0===f&&!t.has(d)||!F(p,f,r,a)){if(r)return!1;if(!V(e,t,d,p,a))return!1;null===i&&(i=new Set),i.add(d)}}}if(null!==i){for(var g=s(t),m=0;m<g.length;m++){var h=n(g[m],2),y=(d=h[0],h[1]);if("object"===o(d)&&null!==d){if(!H(i,e,d,y,r,a))return!1}else if(!(r||e.has(d)&&F(e.get(d),y,!1,a)||H(i,e,d,y,!1,a)))return!1}return 0===i.size}return!0}(e,t,r,c))return!1}else if(u===M)for(;l<e.length;l++){if(!p(e,l)){if(p(t,l))return!1;for(var d=Object.keys(e);l<d.length;l++){var f=d[l];if(!p(t,f)||!F(e[f],t[f],r,c))return!1}return d.length===Object.keys(t).length}if(!p(t,l)||!F(e[l],t[l],r,c))return!1}for(l=0;l<a.length;l++){var g=a[l];if(!F(e[g],t[g],r,c))return!1}return!0}(e,t,r,l,a,c);return a.val1.delete(e),a.val2.delete(t),_}function j(e,t,r,n){for(var o=i(e),a=0;a<o.length;a++){var s=o[a];if(F(t,s,r,n))return e.delete(s),!0}return!1}function K(e){switch(o(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(l(e))return!1}return!0}function $(e,t,r){var n=K(r);return null!=n?n:t.has(n)&&!e.has(n)}function V(e,t,r,n,o){var a=K(r);if(null!=a)return a;var i=t.get(a);return!(void 0===i&&!t.has(a)||!F(n,i,!1,o))&&!e.has(a)&&F(n,i,!1,o)}function H(e,t,r,n,o,a){for(var s=i(e),c=0;c<s.length;c++){var u=s[c];if(F(r,u,o,a)&&F(n,t.get(u),o,a))return e.delete(u),!0}return!1}e.exports={isDeepEqual:function(e,t){return F(e,t,false)},isDeepStrictEqual:function(e,t){return F(e,t,true)}}},93513:function(e,t,r){var n;e=r.nmd(e),function(o){var a=(e&&e.exports,"object"==typeof r.g&&r.g);a.global!==a&&a.window;var i=function(e){this.message=e};(i.prototype=new Error).name="InvalidCharacterError";var s=function(e){throw new i(e)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=/[\t\n\f\r ]/g,l={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var t,r,n,o,a=e.length%3,i="",u=-1,l=e.length-a;++u<l;)t=e.charCodeAt(u)<<16,r=e.charCodeAt(++u)<<8,n=e.charCodeAt(++u),i+=c.charAt((o=t+r+n)>>18&63)+c.charAt(o>>12&63)+c.charAt(o>>6&63)+c.charAt(63&o);return 2==a?(t=e.charCodeAt(u)<<8,r=e.charCodeAt(++u),i+=c.charAt((o=t+r)>>10)+c.charAt(o>>4&63)+c.charAt(o<<2&63)+"="):1==a&&(o=e.charCodeAt(u),i+=c.charAt(o>>2)+c.charAt(o<<4&63)+"=="),i},decode:function(e){var t=(e=String(e).replace(u,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var r,n,o=0,a="",i=-1;++i<t;)n=c.indexOf(e.charAt(i)),r=o%4?64*r+n:n,o++%4&&(a+=String.fromCharCode(255&r>>(-2*o&6)));return a},version:"0.1.0"};void 0===(n=function(){return l}.call(t,r,t,e))||(e.exports=n)}()},40229:(e,t,r)=>{"use strict";var n=r(15313).Buffer,o=r(73656),a=r(57579),i=r(24104),s=r(63172),c=r(86919),u=r(6857);for(var l in u)t[l]=u[l];function d(e){if("number"!=typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7,d.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,a(this.init_done,"close before init"),a(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?s.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||c.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null)},d.prototype.write=function(e,t,r,n,o,a,i){return this._write(!0,e,t,r,n,o,a,i)},d.prototype.writeSync=function(e,t,r,n,o,a,i){return this._write(!1,e,t,r,n,o,a,i)},d.prototype._write=function(e,r,i,s,c,u,l,d){if(a.equal(arguments.length,8),a(this.init_done,"write before init"),a(this.mode!==t.NONE,"already finalized"),a.equal(!1,this.write_in_progress,"write already in progress"),a.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,a.equal(!1,void 0===r,"must provide flush value"),this.write_in_progress=!0,r!==t.Z_NO_FLUSH&&r!==t.Z_PARTIAL_FLUSH&&r!==t.Z_SYNC_FLUSH&&r!==t.Z_FULL_FLUSH&&r!==t.Z_FINISH&&r!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==i&&(i=n.alloc(0),c=0,s=0),this.strm.avail_in=c,this.strm.input=i,this.strm.next_in=s,this.strm.avail_out=d,this.strm.output=u,this.strm.next_out=l,this.flush=r,!e)return this._process(),this._checkError()?this._afterSync():void 0;var p=this;return o.nextTick((function(){p._process(),p._after()})),this},d.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},d.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=c.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=c.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=c.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=c.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},d.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},d.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},d.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},d.prototype.init=function(e,r,n,o,i){a(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),a(e>=8&&e<=15,"invalid windowBits"),a(r>=-1&&r<=9,"invalid compression level"),a(n>=1&&n<=9,"invalid memlevel"),a(o===t.Z_FILTERED||o===t.Z_HUFFMAN_ONLY||o===t.Z_RLE||o===t.Z_FIXED||o===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(r,e,n,o,i),this._setDictionary()},d.prototype.params=function(){throw new Error("deflateParams Not supported")},d.prototype.reset=function(){this._reset(),this._setDictionary()},d.prototype._init=function(e,r,n,o,a){switch(this.level=e,this.windowBits=r,this.memLevel=n,this.strategy=o,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new i,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=c.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=a,this.write_in_progress=!1,this.init_done=!0},d.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=s.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},d.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=s.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=c.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=d},62802:(e,t,r)=>{"use strict";var n=r(73656),o=r(15313).Buffer,a=r(96704).Transform,i=r(40229),s=r(80911),c=r(57579).ok,u=r(15313).kMaxLength,l="Cannot create final Buffer. It would be larger than 0x"+u.toString(16)+" bytes";i.Z_MIN_WINDOWBITS=8,i.Z_MAX_WINDOWBITS=15,i.Z_DEFAULT_WINDOWBITS=15,i.Z_MIN_CHUNK=64,i.Z_MAX_CHUNK=1/0,i.Z_DEFAULT_CHUNK=16384,i.Z_MIN_MEMLEVEL=1,i.Z_MAX_MEMLEVEL=9,i.Z_DEFAULT_MEMLEVEL=8,i.Z_MIN_LEVEL=-1,i.Z_MAX_LEVEL=9,i.Z_DEFAULT_LEVEL=i.Z_DEFAULT_COMPRESSION;for(var d=Object.keys(i),p=0;p<d.length;p++){var f=d[p];f.match(/^Z/)&&Object.defineProperty(t,f,{enumerable:!0,value:i[f],writable:!1})}for(var g={Z_OK:i.Z_OK,Z_STREAM_END:i.Z_STREAM_END,Z_NEED_DICT:i.Z_NEED_DICT,Z_ERRNO:i.Z_ERRNO,Z_STREAM_ERROR:i.Z_STREAM_ERROR,Z_DATA_ERROR:i.Z_DATA_ERROR,Z_MEM_ERROR:i.Z_MEM_ERROR,Z_BUF_ERROR:i.Z_BUF_ERROR,Z_VERSION_ERROR:i.Z_VERSION_ERROR},m=Object.keys(g),h=0;h<m.length;h++){var y=m[h];g[g[y]]=y}function S(e,t,r){var n=[],a=0;function i(){for(var t;null!==(t=e.read());)n.push(t),a+=t.length;e.once("readable",i)}function s(){var t,i=null;a>=u?i=new RangeError(l):t=o.concat(n,a),n=[],e.close(),r(i,t)}e.on("error",(function(t){e.removeListener("end",s),e.removeListener("readable",i),r(t)})),e.on("end",s),e.end(t),i()}function v(e,t){if("string"==typeof t&&(t=o.from(t)),!o.isBuffer(t))throw new TypeError("Not a string or buffer");var r=e._finishFlushFlag;return e._processChunk(t,r)}function E(e){if(!(this instanceof E))return new E(e);O.call(this,e,i.DEFLATE)}function A(e){if(!(this instanceof A))return new A(e);O.call(this,e,i.INFLATE)}function _(e){if(!(this instanceof _))return new _(e);O.call(this,e,i.GZIP)}function b(e){if(!(this instanceof b))return new b(e);O.call(this,e,i.GUNZIP)}function T(e){if(!(this instanceof T))return new T(e);O.call(this,e,i.DEFLATERAW)}function I(e){if(!(this instanceof I))return new I(e);O.call(this,e,i.INFLATERAW)}function w(e){if(!(this instanceof w))return new w(e);O.call(this,e,i.UNZIP)}function C(e){return e===i.Z_NO_FLUSH||e===i.Z_PARTIAL_FLUSH||e===i.Z_SYNC_FLUSH||e===i.Z_FULL_FLUSH||e===i.Z_FINISH||e===i.Z_BLOCK}function O(e,r){var n=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,a.call(this,e),e.flush&&!C(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!C(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||i.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:i.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!o.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new i.Zlib(r);var s=this;this._hadError=!1,this._handle.onerror=function(e,r){D(s),s._hadError=!0;var n=new Error(e);n.errno=r,n.code=t.codes[r],s.emit("error",n)};var c=t.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(c=e.level);var u=t.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(u=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,c,e.memLevel||t.Z_DEFAULT_MEMLEVEL,u,e.dictionary),this._buffer=o.allocUnsafe(this._chunkSize),this._offset=0,this._level=c,this._strategy=u,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!n._handle},configurable:!0,enumerable:!0})}function D(e,t){t&&n.nextTick(t),e._handle&&(e._handle.close(),e._handle=null)}function P(e){e.emit("close")}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(g),writable:!1}),t.Deflate=E,t.Inflate=A,t.Gzip=_,t.Gunzip=b,t.DeflateRaw=T,t.InflateRaw=I,t.Unzip=w,t.createDeflate=function(e){return new E(e)},t.createInflate=function(e){return new A(e)},t.createDeflateRaw=function(e){return new T(e)},t.createInflateRaw=function(e){return new I(e)},t.createGzip=function(e){return new _(e)},t.createGunzip=function(e){return new b(e)},t.createUnzip=function(e){return new w(e)},t.deflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),S(new E(t),e,r)},t.deflateSync=function(e,t){return v(new E(t),e)},t.gzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),S(new _(t),e,r)},t.gzipSync=function(e,t){return v(new _(t),e)},t.deflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),S(new T(t),e,r)},t.deflateRawSync=function(e,t){return v(new T(t),e)},t.unzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),S(new w(t),e,r)},t.unzipSync=function(e,t){return v(new w(t),e)},t.inflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),S(new A(t),e,r)},t.inflateSync=function(e,t){return v(new A(t),e)},t.gunzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),S(new b(t),e,r)},t.gunzipSync=function(e,t){return v(new b(t),e)},t.inflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),S(new I(t),e,r)},t.inflateRawSync=function(e,t){return v(new I(t),e)},s.inherits(O,a),O.prototype.params=function(e,r,o){if(e<t.Z_MIN_LEVEL||e>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(r!=t.Z_FILTERED&&r!=t.Z_HUFFMAN_ONLY&&r!=t.Z_RLE&&r!=t.Z_FIXED&&r!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==e||this._strategy!==r){var a=this;this.flush(i.Z_SYNC_FLUSH,(function(){c(a._handle,"zlib binding closed"),a._handle.params(e,r),a._hadError||(a._level=e,a._strategy=r,o&&o())}))}else n.nextTick(o)},O.prototype.reset=function(){return c(this._handle,"zlib binding closed"),this._handle.reset()},O.prototype._flush=function(e){this._transform(o.alloc(0),"",e)},O.prototype.flush=function(e,t){var r=this,a=this._writableState;("function"==typeof e||void 0===e&&!t)&&(t=e,e=i.Z_FULL_FLUSH),a.ended?t&&n.nextTick(t):a.ending?t&&this.once("end",t):a.needDrain?t&&this.once("drain",(function(){return r.flush(e,t)})):(this._flushFlag=e,this.write(o.alloc(0),"",t))},O.prototype.close=function(e){D(this,e),n.nextTick(P,this)},O.prototype._transform=function(e,t,r){var n,a=this._writableState,s=(a.ending||a.ended)&&(!e||a.length===e.length);return null===e||o.isBuffer(e)?this._handle?(s?n=this._finishFlushFlag:(n=this._flushFlag,e.length>=a.length&&(this._flushFlag=this._opts.flush||i.Z_NO_FLUSH)),void this._processChunk(e,n,r)):r(new Error("zlib binding closed")):r(new Error("invalid input"))},O.prototype._processChunk=function(e,t,r){var n=e&&e.length,a=this._chunkSize-this._offset,i=0,s=this,d="function"==typeof r;if(!d){var p,f=[],g=0;this.on("error",(function(e){p=e})),c(this._handle,"zlib binding closed");do{var m=this._handle.writeSync(t,e,i,n,this._buffer,this._offset,a)}while(!this._hadError&&S(m[0],m[1]));if(this._hadError)throw p;if(g>=u)throw D(this),new RangeError(l);var h=o.concat(f,g);return D(this),h}c(this._handle,"zlib binding closed");var y=this._handle.write(t,e,i,n,this._buffer,this._offset,a);function S(u,l){if(this&&(this.buffer=null,this.callback=null),!s._hadError){var p=a-l;if(c(p>=0,"have should not go down"),p>0){var m=s._buffer.slice(s._offset,s._offset+p);s._offset+=p,d?s.push(m):(f.push(m),g+=m.length)}if((0===l||s._offset>=s._chunkSize)&&(a=s._chunkSize,s._offset=0,s._buffer=o.allocUnsafe(s._chunkSize)),0===l){if(i+=n-u,n=u,!d)return!0;var h=s._handle.write(t,e,i,n,s._buffer,s._offset,s._chunkSize);return h.callback=S,void(h.buffer=e)}if(!d)return!1;r()}}y.buffer=e,y.callback=S},s.inherits(E,O),s.inherits(A,O),s.inherits(_,O),s.inherits(b,O),s.inherits(T,O),s.inherits(I,O),s.inherits(w,O)},25424:(e,t,r)=>{"use strict";function n(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function o(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function a(e){o(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function i(e,t){o(2,arguments);var r=a(e),i=n(t);return isNaN(i)?new Date(NaN):i?(r.setDate(r.getDate()+i),r):r}function s(e,t){o(2,arguments);var r=a(e),i=n(t);if(isNaN(i))return new Date(NaN);if(!i)return r;var s=r.getDate(),c=new Date(r.getTime());return c.setMonth(r.getMonth()+i+1,0),s>=c.getDate()?c:(r.setFullYear(c.getFullYear(),c.getMonth(),s),r)}function c(e,t){if(o(2,arguments),!t||"object"!=typeof t)return new Date(NaN);var r=t.years?n(t.years):0,c=t.months?n(t.months):0,u=t.weeks?n(t.weeks):0,l=t.days?n(t.days):0,d=t.hours?n(t.hours):0,p=t.minutes?n(t.minutes):0,f=t.seconds?n(t.seconds):0,g=a(e),m=c||r?s(g,c+12*r):g,h=l||u?i(m,l+7*u):m,y=1e3*(f+60*(p+60*d));return new Date(h.getTime()+y)}function u(e){o(1,arguments);var t=a(e).getDay();return 0===t||6===t}function l(e){return o(1,arguments),0===a(e).getDay()}function d(e){return o(1,arguments),6===a(e).getDay()}function p(e,t){o(2,arguments);var r=a(e),i=u(r),s=n(t);if(isNaN(s))return new Date(NaN);var c=r.getHours(),p=s<0?-1:1,f=n(s/5);r.setDate(r.getDate()+7*f);for(var g=Math.abs(s%5);g>0;)r.setDate(r.getDate()+p),u(r)||(g-=1);return i&&u(r)&&0!==s&&(d(r)&&r.setDate(r.getDate()+(p<0?2:-1)),l(r)&&r.setDate(r.getDate()+(p<0?1:-2))),r.setHours(c),r}function f(e,t){o(2,arguments);var r=a(e).getTime(),i=n(t);return new Date(r+i)}r.r(t),r.d(t,{add:()=>c,addBusinessDays:()=>p,addDays:()=>i,addHours:()=>m,addISOWeekYears:()=>I,addMilliseconds:()=>f,addMinutes:()=>C,addMonths:()=>s,addQuarters:()=>O,addSeconds:()=>D,addWeeks:()=>P,addYears:()=>N,areIntervalsOverlapping:()=>R,clamp:()=>M,closestIndexTo:()=>k,closestTo:()=>B,compareAsc:()=>F,compareDesc:()=>x,daysInWeek:()=>G,daysToWeeks:()=>X,differenceInBusinessDays:()=>re,differenceInCalendarDays:()=>b,differenceInCalendarISOWeekYears:()=>ne,differenceInCalendarISOWeeks:()=>ae,differenceInCalendarMonths:()=>ie,differenceInCalendarQuarters:()=>ce,differenceInCalendarWeeks:()=>le,differenceInCalendarYears:()=>de,differenceInDays:()=>fe,differenceInHours:()=>Se,differenceInISOWeekYears:()=>Ee,differenceInMilliseconds:()=>ge,differenceInMinutes:()=>Ae,differenceInMonths:()=>Ie,differenceInQuarters:()=>we,differenceInSeconds:()=>Ce,differenceInWeeks:()=>Oe,differenceInYears:()=>De,eachDayOfInterval:()=>Pe,eachHourOfInterval:()=>Ne,eachMinuteOfInterval:()=>Ue,eachMonthOfInterval:()=>Le,eachQuarterOfInterval:()=>ke,eachWeekOfInterval:()=>Be,eachWeekendOfInterval:()=>Fe,eachWeekendOfMonth:()=>Ge,eachWeekendOfYear:()=>$e,eachYearOfInterval:()=>Ve,endOfDay:()=>_e,endOfDecade:()=>He,endOfHour:()=>We,endOfISOWeek:()=>qe,endOfISOWeekYear:()=>Ye,endOfMinute:()=>Qe,endOfMonth:()=>be,endOfQuarter:()=>Ze,endOfSecond:()=>Xe,endOfToday:()=>Je,endOfTomorrow:()=>et,endOfWeek:()=>ze,endOfYear:()=>Ke,endOfYesterday:()=>tt,format:()=>jt,formatDistance:()=>qt,formatDistanceStrict:()=>Jt,formatDistanceToNow:()=>er,formatDistanceToNowStrict:()=>tr,formatDuration:()=>nr,formatISO:()=>or,formatISO9075:()=>ar,formatISODuration:()=>ir,formatRFC3339:()=>sr,formatRFC7231:()=>lr,formatRelative:()=>dr,fromUnixTime:()=>pr,getDate:()=>fr,getDay:()=>gr,getDayOfYear:()=>mr,getDaysInMonth:()=>hr,getDaysInYear:()=>Sr,getDecade:()=>vr,getHours:()=>Er,getISODay:()=>Ar,getISOWeek:()=>br,getISOWeekYear:()=>S,getISOWeeksInYear:()=>Ir,getMilliseconds:()=>wr,getMinutes:()=>Cr,getMonth:()=>Or,getOverlappingDaysInIntervals:()=>Pr,getQuarter:()=>se,getSeconds:()=>Nr,getTime:()=>Rr,getUnixTime:()=>Ur,getWeek:()=>Br,getWeekOfMonth:()=>Fr,getWeekYear:()=>Lr,getWeeksInMonth:()=>Gr,getYear:()=>jr,hoursToMilliseconds:()=>Kr,hoursToMinutes:()=>$r,hoursToSeconds:()=>Vr,intervalToDuration:()=>qr,intlFormat:()=>Yr,isAfter:()=>Qr,isBefore:()=>Zr,isDate:()=>J,isEqual:()=>Xr,isExists:()=>Jr,isFirstDayOfMonth:()=>en,isFriday:()=>tn,isFuture:()=>rn,isLastDayOfMonth:()=>Te,isLeapYear:()=>yr,isMatch:()=>Mn,isMonday:()=>kn,isPast:()=>Bn,isSameDay:()=>te,isSameHour:()=>xn,isSameISOWeek:()=>jn,isSameISOWeekYear:()=>Kn,isSameMinute:()=>$n,isSameMonth:()=>Vn,isSameQuarter:()=>Hn,isSameSecond:()=>zn,isSameWeek:()=>Gn,isSameYear:()=>qn,isSaturday:()=>d,isSunday:()=>l,isThisHour:()=>Yn,isThisISOWeek:()=>Qn,isThisMinute:()=>Zn,isThisMonth:()=>Xn,isThisQuarter:()=>Jn,isThisSecond:()=>eo,isThisWeek:()=>to,isThisYear:()=>ro,isThursday:()=>no,isToday:()=>oo,isTomorrow:()=>ao,isTuesday:()=>io,isValid:()=>ee,isWednesday:()=>so,isWeekend:()=>u,isWithinInterval:()=>co,isYesterday:()=>uo,lastDayOfDecade:()=>lo,lastDayOfISOWeek:()=>fo,lastDayOfISOWeekYear:()=>go,lastDayOfMonth:()=>xr,lastDayOfQuarter:()=>mo,lastDayOfWeek:()=>po,lastDayOfYear:()=>ho,lightFormat:()=>Ao,max:()=>U,maxTime:()=>j,milliseconds:()=>bo,millisecondsInHour:()=>$,millisecondsInMinute:()=>K,millisecondsInSecond:()=>V,millisecondsToHours:()=>To,millisecondsToMinutes:()=>Io,millisecondsToSeconds:()=>wo,min:()=>L,minTime:()=>H,minutesInHour:()=>W,minutesToHours:()=>Co,minutesToMilliseconds:()=>Oo,minutesToSeconds:()=>Do,monthsInQuarter:()=>z,monthsInYear:()=>q,monthsToQuarters:()=>Po,monthsToYears:()=>No,nextDay:()=>Ro,nextFriday:()=>Uo,nextMonday:()=>Lo,nextSaturday:()=>Mo,nextSunday:()=>ko,nextThursday:()=>Bo,nextTuesday:()=>Fo,nextWednesday:()=>xo,parse:()=>Un,parseISO:()=>zo,parseJSON:()=>Xo,previousDay:()=>Jo,previousFriday:()=>ea,previousMonday:()=>ta,previousSaturday:()=>ra,previousSunday:()=>na,previousThursday:()=>oa,previousTuesday:()=>aa,previousWednesday:()=>ia,quartersInYear:()=>Y,quartersToMonths:()=>sa,quartersToYears:()=>ca,roundToNearestMinutes:()=>ua,secondsInHour:()=>Q,secondsInMinute:()=>Z,secondsToHours:()=>la,secondsToMilliseconds:()=>da,secondsToMinutes:()=>pa,set:()=>ga,setDate:()=>ma,setDay:()=>ha,setDayOfYear:()=>ya,setHours:()=>Sa,setISODay:()=>va,setISOWeek:()=>Ea,setISOWeekYear:()=>T,setMilliseconds:()=>Aa,setMinutes:()=>_a,setMonth:()=>fa,setQuarter:()=>ba,setSeconds:()=>Ta,setWeek:()=>Ia,setWeekYear:()=>wa,setYear:()=>Ca,startOfDay:()=>A,startOfDecade:()=>Oa,startOfHour:()=>Fn,startOfISOWeek:()=>y,startOfISOWeekYear:()=>v,startOfMinute:()=>Re,startOfMonth:()=>xe,startOfQuarter:()=>Me,startOfSecond:()=>Wn,startOfToday:()=>Da,startOfTomorrow:()=>Pa,startOfWeek:()=>h,startOfWeekYear:()=>Mr,startOfYear:()=>je,startOfYesterday:()=>Na,sub:()=>zr,subBusinessDays:()=>Ra,subDays:()=>Hr,subHours:()=>Ua,subISOWeekYears:()=>ve,subMilliseconds:()=>lt,subMinutes:()=>La,subMonths:()=>Wr,subQuarters:()=>Ma,subSeconds:()=>ka,subWeeks:()=>Ba,subYears:()=>Fa,toDate:()=>a,weeksToDays:()=>xa,yearsToMonths:()=>Ga,yearsToQuarters:()=>ja});var g=36e5;function m(e,t){return o(2,arguments),f(e,n(t)*g)}function h(e,t){o(1,arguments);var r=t||{},i=r.locale,s=i&&i.options&&i.options.weekStartsOn,c=null==s?0:n(s),u=null==r.weekStartsOn?c:n(r.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=a(e),d=l.getDay(),p=(d<u?7:0)+d-u;return l.setDate(l.getDate()-p),l.setHours(0,0,0,0),l}function y(e){return o(1,arguments),h(e,{weekStartsOn:1})}function S(e){o(1,arguments);var t=a(e),r=t.getFullYear(),n=new Date(0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);var i=y(n),s=new Date(0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);var c=y(s);return t.getTime()>=i.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}function v(e){o(1,arguments);var t=S(e),r=new Date(0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),y(r)}function E(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function A(e){o(1,arguments);var t=a(e);return t.setHours(0,0,0,0),t}var _=864e5;function b(e,t){o(2,arguments);var r=A(e),n=A(t),a=r.getTime()-E(r),i=n.getTime()-E(n);return Math.round((a-i)/_)}function T(e,t){o(2,arguments);var r=a(e),i=n(t),s=b(r,v(r)),c=new Date(0);return c.setFullYear(i,0,4),c.setHours(0,0,0,0),(r=v(c)).setDate(r.getDate()+s),r}function I(e,t){o(2,arguments);var r=n(t);return T(e,S(e)+r)}var w=6e4;function C(e,t){return o(2,arguments),f(e,n(t)*w)}function O(e,t){return o(2,arguments),s(e,3*n(t))}function D(e,t){return o(2,arguments),f(e,1e3*n(t))}function P(e,t){return o(2,arguments),i(e,7*n(t))}function N(e,t){return o(2,arguments),s(e,12*n(t))}function R(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{inclusive:!1};o(2,arguments);var n=e||{},i=t||{},s=a(n.start).getTime(),c=a(n.end).getTime(),u=a(i.start).getTime(),l=a(i.end).getTime();if(!(s<=c&&u<=l))throw new RangeError("Invalid interval");return r.inclusive?s<=l&&u<=c:s<l&&u<c}function U(e){var t,r;if(o(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!=typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=a(e);(void 0===r||r<t||isNaN(Number(t)))&&(r=t)})),r||new Date(NaN)}function L(e){var t,r;if(o(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!=typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=a(e);(void 0===r||r>t||isNaN(t.getDate()))&&(r=t)})),r||new Date(NaN)}function M(e,t){var r=t.start,n=t.end;return o(2,arguments),L([U([e,r]),n])}function k(e,t){o(2,arguments);var r=a(e);if(isNaN(r))return NaN;var n,i,s=r.getTime();return(null==t?[]:"function"==typeof t.forEach?t:Array.prototype.slice.call(t)).forEach((function(e,t){var r=a(e);if(isNaN(r))return n=NaN,void(i=NaN);var o=Math.abs(s-r.getTime());(null==n||o<i)&&(n=t,i=o)})),n}function B(e,t){o(2,arguments);var r=a(e);if(isNaN(r))return new Date(NaN);var n,i,s=r.getTime();return(null==t?[]:"function"==typeof t.forEach?t:Array.prototype.slice.call(t)).forEach((function(e){var t=a(e);if(isNaN(t))return n=new Date(NaN),void(i=NaN);var r=Math.abs(s-t.getTime());(null==n||r<i)&&(n=t,i=r)})),n}function F(e,t){o(2,arguments);var r=a(e),n=a(t),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function x(e,t){o(2,arguments);var r=a(e),n=a(t),i=r.getTime()-n.getTime();return i>0?-1:i<0?1:i}var G=7,j=24*Math.pow(10,8)*60*60*1e3,K=6e4,$=36e5,V=1e3,H=-j,W=60,z=3,q=12,Y=4,Q=3600,Z=60;function X(e){o(1,arguments);var t=e/G;return Math.floor(t)}function J(e){return o(1,arguments),e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function ee(e){if(o(1,arguments),!J(e)&&"number"!=typeof e)return!1;var t=a(e);return!isNaN(Number(t))}function te(e,t){o(2,arguments);var r=A(e),n=A(t);return r.getTime()===n.getTime()}function re(e,t){o(2,arguments);var r=a(e),s=a(t);if(!ee(r)||!ee(s))return NaN;var c=b(r,s),l=c<0?-1:1,d=n(c/7),p=5*d;for(s=i(s,7*d);!te(r,s);)p+=u(s)?0:l,s=i(s,l);return 0===p?0:p}function ne(e,t){return o(2,arguments),S(e)-S(t)}var oe=6048e5;function ae(e,t){o(2,arguments);var r=y(e),n=y(t),a=r.getTime()-E(r),i=n.getTime()-E(n);return Math.round((a-i)/oe)}function ie(e,t){o(2,arguments);var r=a(e),n=a(t);return 12*(r.getFullYear()-n.getFullYear())+(r.getMonth()-n.getMonth())}function se(e){o(1,arguments);var t=a(e);return Math.floor(t.getMonth()/3)+1}function ce(e,t){o(2,arguments);var r=a(e),n=a(t);return 4*(r.getFullYear()-n.getFullYear())+(se(r)-se(n))}var ue=6048e5;function le(e,t,r){o(2,arguments);var n=h(e,r),a=h(t,r),i=n.getTime()-E(n),s=a.getTime()-E(a);return Math.round((i-s)/ue)}function de(e,t){o(2,arguments);var r=a(e),n=a(t);return r.getFullYear()-n.getFullYear()}function pe(e,t){var r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function fe(e,t){o(2,arguments);var r=a(e),n=a(t),i=pe(r,n),s=Math.abs(b(r,n));r.setDate(r.getDate()-i*s);var c=i*(s-Number(pe(r,n)===-i));return 0===c?0:c}function ge(e,t){return o(2,arguments),a(e).getTime()-a(t).getTime()}var me={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},he="trunc";function ye(e){return e?me[e]:me[he]}function Se(e,t,r){o(2,arguments);var n=ge(e,t)/$;return ye(null==r?void 0:r.roundingMethod)(n)}function ve(e,t){return o(2,arguments),I(e,-n(t))}function Ee(e,t){o(2,arguments);var r=a(e),n=a(t),i=F(r,n),s=Math.abs(ne(r,n));r=ve(r,i*s);var c=i*(s-Number(F(r,n)===-i));return 0===c?0:c}function Ae(e,t,r){o(2,arguments);var n=ge(e,t)/K;return ye(null==r?void 0:r.roundingMethod)(n)}function _e(e){o(1,arguments);var t=a(e);return t.setHours(23,59,59,999),t}function be(e){o(1,arguments);var t=a(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Te(e){o(1,arguments);var t=a(e);return _e(t).getTime()===be(t).getTime()}function Ie(e,t){o(2,arguments);var r,n=a(e),i=a(t),s=F(n,i),c=Math.abs(ie(n,i));if(c<1)r=0;else{1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*c);var u=F(n,i)===-s;Te(a(e))&&1===c&&1===F(e,i)&&(u=!1),r=s*(c-Number(u))}return 0===r?0:r}function we(e,t,r){o(2,arguments);var n=Ie(e,t)/3;return ye(null==r?void 0:r.roundingMethod)(n)}function Ce(e,t,r){o(2,arguments);var n=ge(e,t)/1e3;return ye(null==r?void 0:r.roundingMethod)(n)}function Oe(e,t,r){o(2,arguments);var n=fe(e,t)/7;return ye(null==r?void 0:r.roundingMethod)(n)}function De(e,t){o(2,arguments);var r=a(e),n=a(t),i=F(r,n),s=Math.abs(de(r,n));r.setFullYear(1584),n.setFullYear(1584);var c=F(r,n)===-i,u=i*(s-Number(c));return 0===u?0:u}function Pe(e,t){o(1,arguments);var r=e||{},n=a(r.start),i=a(r.end).getTime();if(!(n.getTime()<=i))throw new RangeError("Invalid interval");var s=[],c=n;c.setHours(0,0,0,0);var u=t&&"step"in t?Number(t.step):1;if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=i;)s.push(a(c)),c.setDate(c.getDate()+u),c.setHours(0,0,0,0);return s}function Ne(e,t){o(1,arguments);var r=e||{},n=a(r.start),i=a(r.end),s=n.getTime(),c=i.getTime();if(!(s<=c))throw new RangeError("Invalid interval");var u=[],l=n;l.setMinutes(0,0,0);var d=t&&"step"in t?Number(t.step):1;if(d<1||isNaN(d))throw new RangeError("`options.step` must be a number greater than 1");for(;l.getTime()<=c;)u.push(a(l)),l=m(l,d);return u}function Re(e){o(1,arguments);var t=a(e);return t.setSeconds(0,0),t}function Ue(e,t){o(1,arguments);var r=Re(a(e.start)),n=Re(a(e.end)),i=r.getTime(),s=n.getTime();if(i>=s)throw new RangeError("Invalid interval");var c=[],u=r,l=t&&"step"in t?Number(t.step):1;if(l<1||isNaN(l))throw new RangeError("`options.step` must be a number equal or greater than 1");for(;u.getTime()<=s;)c.push(a(u)),u=C(u,l);return c}function Le(e){o(1,arguments);var t=e||{},r=a(t.start),n=a(t.end).getTime(),i=[];if(!(r.getTime()<=n))throw new RangeError("Invalid interval");var s=r;for(s.setHours(0,0,0,0),s.setDate(1);s.getTime()<=n;)i.push(a(s)),s.setMonth(s.getMonth()+1);return i}function Me(e){o(1,arguments);var t=a(e),r=t.getMonth(),n=r-r%3;return t.setMonth(n,1),t.setHours(0,0,0,0),t}function ke(e){o(1,arguments);var t=e||{},r=a(t.start),n=a(t.end),i=n.getTime();if(!(r.getTime()<=i))throw new RangeError("Invalid interval");var s=Me(r);i=Me(n).getTime();for(var c=[],u=s;u.getTime()<=i;)c.push(a(u)),u=O(u,1);return c}function Be(e,t){o(1,arguments);var r=e||{},n=a(r.start),i=a(r.end),s=i.getTime();if(!(n.getTime()<=s))throw new RangeError("Invalid interval");var c=h(n,t),u=h(i,t);c.setHours(15),u.setHours(15),s=u.getTime();for(var l=[],d=c;d.getTime()<=s;)d.setHours(0),l.push(a(d)),(d=P(d,1)).setHours(15);return l}function Fe(e){o(1,arguments);for(var t=Pe(e),r=[],n=0;n<t.length;){var a=t[n++];u(a)&&(r.push(a),l(a)&&(n+=5))}return r}function xe(e){o(1,arguments);var t=a(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Ge(e){o(1,arguments);var t=xe(e);if(isNaN(t.getTime()))throw new RangeError("The passed date is invalid");return Fe({start:t,end:be(e)})}function je(e){o(1,arguments);var t=a(e),r=new Date(0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Ke(e){o(1,arguments);var t=a(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function $e(e){o(1,arguments);var t=je(e);if(isNaN(t))throw new RangeError("The passed date is invalid");return Fe({start:t,end:Ke(e)})}function Ve(e){o(1,arguments);var t=e||{},r=a(t.start),n=a(t.end).getTime();if(!(r.getTime()<=n))throw new RangeError("Invalid interval");var i=[],s=r;for(s.setHours(0,0,0,0),s.setMonth(0,1);s.getTime()<=n;)i.push(a(s)),s.setFullYear(s.getFullYear()+1);return i}function He(e){o(1,arguments);var t=a(e),r=t.getFullYear(),n=9+10*Math.floor(r/10);return t.setFullYear(n,11,31),t.setHours(23,59,59,999),t}function We(e){o(1,arguments);var t=a(e);return t.setMinutes(59,59,999),t}function ze(e,t){o(1,arguments);var r=t||{},i=r.locale,s=i&&i.options&&i.options.weekStartsOn,c=null==s?0:n(s),u=null==r.weekStartsOn?c:n(r.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=a(e),d=l.getDay(),p=6+(d<u?-7:0)-(d-u);return l.setDate(l.getDate()+p),l.setHours(23,59,59,999),l}function qe(e){return o(1,arguments),ze(e,{weekStartsOn:1})}function Ye(e){o(1,arguments);var t=S(e),r=new Date(0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);var n=y(r);return n.setMilliseconds(n.getMilliseconds()-1),n}function Qe(e){o(1,arguments);var t=a(e);return t.setSeconds(59,999),t}function Ze(e){o(1,arguments);var t=a(e),r=t.getMonth(),n=r-r%3+3;return t.setMonth(n,0),t.setHours(23,59,59,999),t}function Xe(e){o(1,arguments);var t=a(e);return t.setMilliseconds(999),t}function Je(){return _e(Date.now())}function et(){var e=new Date,t=e.getFullYear(),r=e.getMonth(),n=e.getDate(),o=new Date(0);return o.setFullYear(t,r,n+1),o.setHours(23,59,59,999),o}function tt(){var e=new Date,t=e.getFullYear(),r=e.getMonth(),n=e.getDate(),o=new Date(0);return o.setFullYear(t,r,n-1),o.setHours(23,59,59,999),o}var rt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function nt(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var ot,at={date:nt({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:nt({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:nt({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},it={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function st(e){return function(t,r){var n,o=r||{};if("formatting"===(o.context?String(o.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,i=o.width?String(o.width):a;n=e.formattingValues[i]||e.formattingValues[a]}else{var s=e.defaultWidth,c=o.width?String(o.width):e.defaultWidth;n=e.values[c]||e.values[s]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function ct(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.width,o=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(o);if(!a)return null;var i,s=a[0],c=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(c)?function(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}(c,(function(e){return e.test(s)})):function(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}(c,(function(e){return e.test(s)}));return i=e.valueCallback?e.valueCallback(u):u,{value:i=r.valueCallback?r.valueCallback(i):i,rest:t.slice(s.length)}}}const ut={code:"en-US",formatDistance:function(e,t,r){var n,o=rt[e];return n="string"==typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!=r&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n},formatLong:at,formatRelative:function(e,t,r,n){return it[e]},localize:{ordinalNumber:function(e,t){var r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:st({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:st({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:st({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:st({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:st({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(ot={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.match(ot.matchPattern);if(!r)return null;var n=r[0],o=e.match(ot.parsePattern);if(!o)return null;var a=ot.valueCallback?ot.valueCallback(o[0]):o[0];return{value:a=t.valueCallback?t.valueCallback(a):a,rest:e.slice(n.length)}}),era:ct({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:ct({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:ct({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:ct({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:ct({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function lt(e,t){return o(2,arguments),f(e,-n(t))}function dt(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}var pt={y:function(e,t){var r=e.getUTCFullYear(),n=r>0?r:1-r;return dt("yy"===t?n%100:n,t.length)},M:function(e,t){var r=e.getUTCMonth();return"M"===t?String(r+1):dt(r+1,2)},d:function(e,t){return dt(e.getUTCDate(),t.length)},a:function(e,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:function(e,t){return dt(e.getUTCHours()%12||12,t.length)},H:function(e,t){return dt(e.getUTCHours(),t.length)},m:function(e,t){return dt(e.getUTCMinutes(),t.length)},s:function(e,t){return dt(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length,n=e.getUTCMilliseconds();return dt(Math.floor(n*Math.pow(10,r-3)),t.length)}};const ft=pt;function gt(e){o(1,arguments);var t=a(e),r=t.getUTCDay(),n=(r<1?7:0)+r-1;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}function mt(e){o(1,arguments);var t=a(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var i=gt(n),s=new Date(0);s.setUTCFullYear(r,0,4),s.setUTCHours(0,0,0,0);var c=gt(s);return t.getTime()>=i.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}var ht=6048e5;function yt(e){o(1,arguments);var t=a(e),r=gt(t).getTime()-function(e){o(1,arguments);var t=mt(e),r=new Date(0);return r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0),gt(r)}(t).getTime();return Math.round(r/ht)+1}function St(e,t){o(1,arguments);var r=t||{},i=r.locale,s=i&&i.options&&i.options.weekStartsOn,c=null==s?0:n(s),u=null==r.weekStartsOn?c:n(r.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=a(e),d=l.getUTCDay(),p=(d<u?7:0)+d-u;return l.setUTCDate(l.getUTCDate()-p),l.setUTCHours(0,0,0,0),l}function vt(e,t){o(1,arguments);var r=a(e,t),i=r.getUTCFullYear(),s=t||{},c=s.locale,u=c&&c.options&&c.options.firstWeekContainsDate,l=null==u?1:n(u),d=null==s.firstWeekContainsDate?l:n(s.firstWeekContainsDate);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(i+1,0,d),p.setUTCHours(0,0,0,0);var f=St(p,t),g=new Date(0);g.setUTCFullYear(i,0,d),g.setUTCHours(0,0,0,0);var m=St(g,t);return r.getTime()>=f.getTime()?i+1:r.getTime()>=m.getTime()?i:i-1}var Et=6048e5;function At(e,t){o(1,arguments);var r=a(e),i=St(r,t).getTime()-function(e,t){o(1,arguments);var r=t||{},a=r.locale,i=a&&a.options&&a.options.firstWeekContainsDate,s=null==i?1:n(i),c=null==r.firstWeekContainsDate?s:n(r.firstWeekContainsDate),u=vt(e,t),l=new Date(0);return l.setUTCFullYear(u,0,c),l.setUTCHours(0,0,0,0),St(l,t)}(r,t).getTime();return Math.round(i/Et)+1}var _t={G:function(e,t,r){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){var n=e.getUTCFullYear(),o=n>0?n:1-n;return r.ordinalNumber(o,{unit:"year"})}return ft.y(e,t)},Y:function(e,t,r,n){var o=vt(e,n),a=o>0?o:1-o;return"YY"===t?dt(a%100,2):"Yo"===t?r.ordinalNumber(a,{unit:"year"}):dt(a,t.length)},R:function(e,t){return dt(mt(e),t.length)},u:function(e,t){return dt(e.getUTCFullYear(),t.length)},Q:function(e,t,r){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return dt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return dt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){var n=e.getUTCMonth();switch(t){case"M":case"MM":return ft.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return dt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){var o=At(e,n);return"wo"===t?r.ordinalNumber(o,{unit:"week"}):dt(o,t.length)},I:function(e,t,r){var n=yt(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):dt(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):ft.d(e,t)},D:function(e,t,r){var n=function(e){o(1,arguments);var t=a(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=r-t.getTime();return Math.floor(n/864e5)+1}(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):dt(n,t.length)},E:function(e,t,r){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){var o=e.getUTCDay(),a=(o-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return dt(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});default:return r.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){var o=e.getUTCDay(),a=(o-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return dt(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});default:return r.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,r){var n=e.getUTCDay(),o=0===n?7:n;switch(t){case"i":return String(o);case"ii":return dt(o,t.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){var n,o=e.getUTCHours();switch(n=12===o?"noon":0===o?"midnight":o/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,r){var n,o=e.getUTCHours();switch(n=o>=17?"evening":o>=12?"afternoon":o>=4?"morning":"night",t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){var n=e.getUTCHours()%12;return 0===n&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return ft.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):ft.H(e,t)},K:function(e,t,r){var n=e.getUTCHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):dt(n,t.length)},k:function(e,t,r){var n=e.getUTCHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):dt(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ft.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):ft.s(e,t)},S:function(e,t){return ft.S(e,t)},X:function(e,t,r,n){var o=(n._originalDate||e).getTimezoneOffset();if(0===o)return"Z";switch(t){case"X":return Tt(o);case"XXXX":case"XX":return It(o);default:return It(o,":")}},x:function(e,t,r,n){var o=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return Tt(o);case"xxxx":case"xx":return It(o);default:return It(o,":")}},O:function(e,t,r,n){var o=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+bt(o,":");default:return"GMT"+It(o,":")}},z:function(e,t,r,n){var o=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+bt(o,":");default:return"GMT"+It(o,":")}},t:function(e,t,r,n){var o=n._originalDate||e;return dt(Math.floor(o.getTime()/1e3),t.length)},T:function(e,t,r,n){return dt((n._originalDate||e).getTime(),t.length)}};function bt(e,t){var r=e>0?"-":"+",n=Math.abs(e),o=Math.floor(n/60),a=n%60;if(0===a)return r+String(o);var i=t||"";return r+String(o)+i+dt(a,2)}function Tt(e,t){return e%60==0?(e>0?"-":"+")+dt(Math.abs(e)/60,2):It(e,t)}function It(e,t){var r=t||"",n=e>0?"-":"+",o=Math.abs(e);return n+dt(Math.floor(o/60),2)+r+dt(o%60,2)}const wt=_t;function Ct(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function Ot(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}var Dt={p:Ot,P:function(e,t){var r,n=e.match(/(P+)(p+)?/),o=n[1],a=n[2];if(!a)return Ct(e,t);switch(o){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",Ct(o,t)).replace("{{time}}",Ot(a,t))}};const Pt=Dt;var Nt=["D","DD"],Rt=["YY","YYYY"];function Ut(e){return-1!==Nt.indexOf(e)}function Lt(e){return-1!==Rt.indexOf(e)}function Mt(e,t,r){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://git.io/fxCyr"))}var kt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Bt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ft=/^'([^]*?)'?$/,xt=/''/g,Gt=/[a-zA-Z]/;function jt(e,t,r){o(2,arguments);var i=String(t),s=r||{},c=s.locale||ut,u=c.options&&c.options.firstWeekContainsDate,l=null==u?1:n(u),d=null==s.firstWeekContainsDate?l:n(s.firstWeekContainsDate);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=c.options&&c.options.weekStartsOn,f=null==p?0:n(p),g=null==s.weekStartsOn?f:n(s.weekStartsOn);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!c.localize)throw new RangeError("locale must contain localize property");if(!c.formatLong)throw new RangeError("locale must contain formatLong property");var m=a(e);if(!ee(m))throw new RangeError("Invalid time value");var h=lt(m,E(m)),y={firstWeekContainsDate:d,weekStartsOn:g,locale:c,_originalDate:m};return i.match(Bt).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,Pt[t])(e,c.formatLong,y):e})).join("").match(kt).map((function(r){if("''"===r)return"'";var n=r[0];if("'"===n)return r.match(Ft)[1].replace(xt,"'");var o=wt[n];if(o)return!s.useAdditionalWeekYearTokens&&Lt(r)&&Mt(r,t,e),!s.useAdditionalDayOfYearTokens&&Ut(r)&&Mt(r,t,e),o(h,r,c.localize,y);if(n.match(Gt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");return r})).join("")}function Kt(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t=t||{})Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function $t(e){return Kt({},e)}var Vt=1440,Ht=2520,Wt=43200,zt=86400;function qt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(2,arguments);var n=r.locale||ut;if(!n.formatDistance)throw new RangeError("locale must contain formatDistance property");var i=F(e,t);if(isNaN(i))throw new RangeError("Invalid time value");var s,c,u=$t(r);u.addSuffix=Boolean(r.addSuffix),u.comparison=i,i>0?(s=a(t),c=a(e)):(s=a(e),c=a(t));var l,d=Ce(c,s),p=(E(c)-E(s))/1e3,f=Math.round((d-p)/60);if(f<2)return r.includeSeconds?d<5?n.formatDistance("lessThanXSeconds",5,u):d<10?n.formatDistance("lessThanXSeconds",10,u):d<20?n.formatDistance("lessThanXSeconds",20,u):d<40?n.formatDistance("halfAMinute",null,u):d<60?n.formatDistance("lessThanXMinutes",1,u):n.formatDistance("xMinutes",1,u):0===f?n.formatDistance("lessThanXMinutes",1,u):n.formatDistance("xMinutes",f,u);if(f<45)return n.formatDistance("xMinutes",f,u);if(f<90)return n.formatDistance("aboutXHours",1,u);if(f<Vt){var g=Math.round(f/60);return n.formatDistance("aboutXHours",g,u)}if(f<Ht)return n.formatDistance("xDays",1,u);if(f<Wt){var m=Math.round(f/Vt);return n.formatDistance("xDays",m,u)}if(f<zt)return l=Math.round(f/Wt),n.formatDistance("aboutXMonths",l,u);if((l=Ie(c,s))<12){var h=Math.round(f/Wt);return n.formatDistance("xMonths",h,u)}var y=l%12,S=Math.floor(l/12);return y<3?n.formatDistance("aboutXYears",S,u):y<9?n.formatDistance("overXYears",S,u):n.formatDistance("almostXYears",S+1,u)}var Yt=6e4,Qt=1440,Zt=30*Qt,Xt=365*Qt;function Jt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(2,arguments);var n=r.locale||ut;if(!n.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var i=F(e,t);if(isNaN(i))throw new RangeError("Invalid time value");var s,c,u=$t(r);u.addSuffix=Boolean(r.addSuffix),u.comparison=i,i>0?(s=a(t),c=a(e)):(s=a(e),c=a(t));var l,d=null==r.roundingMethod?"round":String(r.roundingMethod);if("floor"===d)l=Math.floor;else if("ceil"===d)l=Math.ceil;else{if("round"!==d)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");l=Math.round}var p,f=c.getTime()-s.getTime(),g=f/Yt,m=(f-(E(c)-E(s)))/Yt;if("second"===(p=null==r.unit?g<1?"second":g<60?"minute":g<Qt?"hour":m<Zt?"day":m<Xt?"month":"year":String(r.unit))){var h=l(f/1e3);return n.formatDistance("xSeconds",h,u)}if("minute"===p){var y=l(g);return n.formatDistance("xMinutes",y,u)}if("hour"===p){var S=l(g/60);return n.formatDistance("xHours",S,u)}if("day"===p){var v=l(m/Qt);return n.formatDistance("xDays",v,u)}if("month"===p){var A=l(m/Zt);return 12===A&&"month"!==r.unit?n.formatDistance("xYears",1,u):n.formatDistance("xMonths",A,u)}if("year"===p){var _=l(m/Xt);return n.formatDistance("xYears",_,u)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function er(e,t){return o(1,arguments),qt(e,Date.now(),t)}function tr(e,t){return o(1,arguments),Jt(e,Date.now(),t)}var rr=["years","months","weeks","days","hours","minutes","seconds"];function nr(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var r=(null==t?void 0:t.format)||rr,n=(null==t?void 0:t.locale)||ut,o=(null==t?void 0:t.zero)||!1,a=(null==t?void 0:t.delimiter)||" ";return r.reduce((function(t,r){var a="x".concat(r.replace(/(^.)/,(function(e){return e.toUpperCase()})));return"number"==typeof e[r]&&(o||e[r])?t.concat(n.formatDistance(a,e[r])):t}),[]).join(a)}function or(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var r=a(e);if(!ee(r))throw new RangeError("Invalid time value");var n=t||{},o=null==n.format?"extended":String(n.format),i=null==n.representation?"complete":String(n.representation);if("extended"!==o&&"basic"!==o)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==i&&"time"!==i&&"complete"!==i)throw new RangeError("representation must be 'date', 'time', or 'complete'");var s="",c="",u="extended"===o?"-":"",l="extended"===o?":":"";if("time"!==i){var d=dt(r.getDate(),2),p=dt(r.getMonth()+1,2),f=dt(r.getFullYear(),4);s="".concat(f).concat(u).concat(p).concat(u).concat(d)}if("date"!==i){var g=r.getTimezoneOffset();if(0!==g){var m=Math.abs(g),h=dt(Math.floor(m/60),2),y=dt(m%60,2);c="".concat(g<0?"+":"-").concat(h,":").concat(y)}else c="Z";var S=""===s?"":"T",v=[dt(r.getHours(),2),dt(r.getMinutes(),2),dt(r.getSeconds(),2)].join(l);s="".concat(s).concat(S).concat(v).concat(c)}return s}function ar(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var r=a(e);if(!ee(r))throw new RangeError("Invalid time value");var n=t||{},o=null==n.format?"extended":String(n.format),i=null==n.representation?"complete":String(n.representation);if("extended"!==o&&"basic"!==o)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==i&&"time"!==i&&"complete"!==i)throw new RangeError("representation must be 'date', 'time', or 'complete'");var s="",c="extended"===o?"-":"",u="extended"===o?":":"";if("time"!==i){var l=dt(r.getDate(),2),d=dt(r.getMonth()+1,2),p=dt(r.getFullYear(),4);s="".concat(p).concat(c).concat(d).concat(c).concat(l)}if("date"!==i){var f=dt(r.getHours(),2),g=dt(r.getMinutes(),2),m=dt(r.getSeconds(),2),h=""===s?"":" ";s="".concat(s).concat(h).concat(f).concat(u).concat(g).concat(u).concat(m)}return s}function ir(e){if(o(1,arguments),"object"!=typeof e)throw new Error("Duration must be an object");var t=e.years,r=void 0===t?0:t,n=e.months,a=void 0===n?0:n,i=e.days,s=void 0===i?0:i,c=e.hours,u=void 0===c?0:c,l=e.minutes,d=void 0===l?0:l,p=e.seconds,f=void 0===p?0:p;return"P".concat(r,"Y").concat(a,"M").concat(s,"DT").concat(u,"H").concat(d,"M").concat(f,"S")}function sr(e,t){if(arguments.length<1)throw new TypeError("1 arguments required, but only ".concat(arguments.length," present"));var r=a(e);if(!ee(r))throw new RangeError("Invalid time value");var o=(t||{}).fractionDigits,i=void 0===o?0:o;if(!(i>=0&&i<=3))throw new RangeError("fractionDigits must be between 0 and 3 inclusively");var s=dt(r.getDate(),2),c=dt(r.getMonth()+1,2),u=r.getFullYear(),l=dt(r.getHours(),2),d=dt(r.getMinutes(),2),p=dt(r.getSeconds(),2),f="";if(i>0){var g=r.getMilliseconds();f="."+dt(Math.floor(g*Math.pow(10,i-3)),i)}var m="",h=r.getTimezoneOffset();if(0!==h){var y=Math.abs(h),S=dt(n(y/60),2),v=dt(y%60,2);m="".concat(h<0?"+":"-").concat(S,":").concat(v)}else m="Z";return"".concat(u,"-").concat(c,"-").concat(s,"T").concat(l,":").concat(d,":").concat(p).concat(f).concat(m)}var cr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ur=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function lr(e){if(arguments.length<1)throw new TypeError("1 arguments required, but only ".concat(arguments.length," present"));var t=a(e);if(!ee(t))throw new RangeError("Invalid time value");var r=cr[t.getUTCDay()],n=dt(t.getUTCDate(),2),o=ur[t.getUTCMonth()],i=t.getUTCFullYear(),s=dt(t.getUTCHours(),2),c=dt(t.getUTCMinutes(),2),u=dt(t.getUTCSeconds(),2);return"".concat(r,", ").concat(n," ").concat(o," ").concat(i," ").concat(s,":").concat(c,":").concat(u," GMT")}function dr(e,t,r){o(2,arguments);var n=a(e),i=a(t),s=r||{},c=s.locale,u=void 0===c?ut:c,l=s.weekStartsOn,d=void 0===l?0:l;if(!u.localize)throw new RangeError("locale must contain localize property");if(!u.formatLong)throw new RangeError("locale must contain formatLong property");if(!u.formatRelative)throw new RangeError("locale must contain formatRelative property");var p,f=b(n,i);if(isNaN(f))throw new RangeError("Invalid time value");p=f<-6?"other":f<-1?"lastWeek":f<0?"yesterday":f<1?"today":f<2?"tomorrow":f<7?"nextWeek":"other";var g=lt(n,E(n)),m=lt(i,E(i));return jt(n,u.formatRelative(p,g,m,{locale:u,weekStartsOn:d}),{locale:u,weekStartsOn:d})}function pr(e){return o(1,arguments),a(1e3*n(e))}function fr(e){return o(1,arguments),a(e).getDate()}function gr(e){return o(1,arguments),a(e).getDay()}function mr(e){o(1,arguments);var t=a(e);return b(t,je(t))+1}function hr(e){o(1,arguments);var t=a(e),r=t.getFullYear(),n=t.getMonth(),i=new Date(0);return i.setFullYear(r,n+1,0),i.setHours(0,0,0,0),i.getDate()}function yr(e){o(1,arguments);var t=a(e).getFullYear();return t%400==0||t%4==0&&t%100!=0}function Sr(e){o(1,arguments);var t=a(e);return"Invalid Date"===String(new Date(t))?NaN:yr(t)?366:365}function vr(e){o(1,arguments);var t=a(e).getFullYear();return 10*Math.floor(t/10)}function Er(e){return o(1,arguments),a(e).getHours()}function Ar(e){o(1,arguments);var t=a(e).getDay();return 0===t&&(t=7),t}var _r=6048e5;function br(e){o(1,arguments);var t=a(e),r=y(t).getTime()-v(t).getTime();return Math.round(r/_r)+1}var Tr=6048e5;function Ir(e){o(1,arguments);var t=v(e),r=v(P(t,60)).valueOf()-t.valueOf();return Math.round(r/Tr)}function wr(e){return o(1,arguments),a(e).getMilliseconds()}function Cr(e){return o(1,arguments),a(e).getMinutes()}function Or(e){return o(1,arguments),a(e).getMonth()}var Dr=864e5;function Pr(e,t){o(2,arguments);var r=e||{},n=t||{},i=a(r.start).getTime(),s=a(r.end).getTime(),c=a(n.start).getTime(),u=a(n.end).getTime();if(!(i<=s&&c<=u))throw new RangeError("Invalid interval");if(!(i<u&&c<s))return 0;var l=(u>s?s:u)-(c<i?i:c);return Math.ceil(l/Dr)}function Nr(e){return o(1,arguments),a(e).getSeconds()}function Rr(e){return o(1,arguments),a(e).getTime()}function Ur(e){return o(1,arguments),Math.floor(Rr(e)/1e3)}function Lr(e,t){var r,i;o(1,arguments);var s=a(e),c=s.getFullYear(),u=null==t||null===(r=t.locale)||void 0===r||null===(i=r.options)||void 0===i?void 0:i.firstWeekContainsDate,l=null==u?1:n(u),d=null==(null==t?void 0:t.firstWeekContainsDate)?l:n(t.firstWeekContainsDate);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setFullYear(c+1,0,d),p.setHours(0,0,0,0);var f=h(p,t),g=new Date(0);g.setFullYear(c,0,d),g.setHours(0,0,0,0);var m=h(g,t);return s.getTime()>=f.getTime()?c+1:s.getTime()>=m.getTime()?c:c-1}function Mr(e,t){o(1,arguments);var r=t||{},a=r.locale,i=a&&a.options&&a.options.firstWeekContainsDate,s=null==i?1:n(i),c=null==r.firstWeekContainsDate?s:n(r.firstWeekContainsDate),u=Lr(e,t),l=new Date(0);return l.setFullYear(u,0,c),l.setHours(0,0,0,0),h(l,t)}var kr=6048e5;function Br(e,t){o(1,arguments);var r=a(e),n=h(r,t).getTime()-Mr(r,t).getTime();return Math.round(n/kr)+1}function Fr(e,t){o(1,arguments);var r=t||{},a=r.locale,i=a&&a.options&&a.options.weekStartsOn,s=null==i?0:n(i),c=null==r.weekStartsOn?s:n(r.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=fr(e);if(isNaN(u))return u;var l,d=gr(xe(e)),p=1;if(u>(l=d>=c?c+7-d:c-d)){var f=u-l;p+=Math.ceil(f/7)}return p}function xr(e){o(1,arguments);var t=a(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function Gr(e,t){return o(1,arguments),le(xr(e),xe(e),t)+1}function jr(e){return o(1,arguments),a(e).getFullYear()}function Kr(e){return o(1,arguments),Math.floor(e*$)}function $r(e){return o(1,arguments),Math.floor(e*W)}function Vr(e){return o(1,arguments),Math.floor(e*Q)}function Hr(e,t){return o(2,arguments),i(e,-n(t))}function Wr(e,t){return o(2,arguments),s(e,-n(t))}function zr(e,t){if(o(2,arguments),!t||"object"!=typeof t)return new Date(NaN);var r=t.years?n(t.years):0,a=t.months?n(t.months):0,i=t.weeks?n(t.weeks):0,s=t.days?n(t.days):0,c=t.hours?n(t.hours):0,u=t.minutes?n(t.minutes):0,l=t.seconds?n(t.seconds):0,d=Hr(Wr(e,a+12*r),s+7*i),p=1e3*(l+60*(u+60*c));return new Date(d.getTime()-p)}function qr(e){var t=e.start,r=e.end;o(1,arguments);var n=a(t),i=a(r);if(!ee(n))throw new RangeError("Start Date is invalid");if(!ee(i))throw new RangeError("End Date is invalid");var s={years:0,months:0,days:0,hours:0,minutes:0,seconds:0},c=F(n,i);s.years=Math.abs(De(n,i));var u=zr(n,{years:c*s.years});s.months=Math.abs(Ie(u,i));var l=zr(u,{months:c*s.months});s.days=Math.abs(fe(l,i));var d=zr(l,{days:c*s.days});s.hours=Math.abs(Se(d,i));var p=zr(d,{hours:c*s.hours});s.minutes=Math.abs(Ae(p,i));var f=zr(p,{minutes:c*s.minutes});return s.seconds=Math.abs(Ce(f,i)),s}function Yr(e,t,r){var n,a,i;return o(1,arguments),void 0===(i=t)||"locale"in i?r=t:a=t,new Intl.DateTimeFormat(null===(n=r)||void 0===n?void 0:n.locale,a).format(e)}function Qr(e,t){o(2,arguments);var r=a(e),n=a(t);return r.getTime()>n.getTime()}function Zr(e,t){o(2,arguments);var r=a(e),n=a(t);return r.getTime()<n.getTime()}function Xr(e,t){o(2,arguments);var r=a(e),n=a(t);return r.getTime()===n.getTime()}function Jr(e,t,r){if(arguments.length<3)throw new TypeError("3 argument required, but only "+arguments.length+" present");var n=new Date(e,t,r);return n.getFullYear()===e&&n.getMonth()===t&&n.getDate()===r}function en(e){return o(1,arguments),1===a(e).getDate()}function tn(e){return o(1,arguments),5===a(e).getDay()}function rn(e){return o(1,arguments),a(e).getTime()>Date.now()}function nn(e,t,r){o(2,arguments);var i=r||{},s=i.locale,c=s&&s.options&&s.options.weekStartsOn,u=null==c?0:n(c),l=null==i.weekStartsOn?u:n(i.weekStartsOn);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=a(e),p=n(t),f=((p%7+7)%7<l?7:0)+p-d.getUTCDay();return d.setUTCDate(d.getUTCDate()+f),d}var on=36e5,an=6e4,sn=1e3,cn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},un=/^([+-])(\d{2})(\d{2})?|Z/,ln=/^([+-])(\d{2})(\d{2})|Z/,dn=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,pn=/^([+-])(\d{2}):(\d{2})|Z/,fn=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function gn(e,t,r){var n=t.match(e);if(!n)return null;var o=parseInt(n[0],10);return{value:r?r(o):o,rest:t.slice(n[0].length)}}function mn(e,t){var r=t.match(e);if(!r)return null;if("Z"===r[0])return{value:0,rest:t.slice(1)};var n="+"===r[1]?1:-1,o=r[2]?parseInt(r[2],10):0,a=r[3]?parseInt(r[3],10):0,i=r[5]?parseInt(r[5],10):0;return{value:n*(o*on+a*an+i*sn),rest:t.slice(r[0].length)}}function hn(e,t){return gn(cn.anyDigitsSigned,e,t)}function yn(e,t,r){switch(e){case 1:return gn(cn.singleDigit,t,r);case 2:return gn(cn.twoDigits,t,r);case 3:return gn(cn.threeDigits,t,r);case 4:return gn(cn.fourDigits,t,r);default:return gn(new RegExp("^\\d{1,"+e+"}"),t,r)}}function Sn(e,t,r){switch(e){case 1:return gn(cn.singleDigitSigned,t,r);case 2:return gn(cn.twoDigitsSigned,t,r);case 3:return gn(cn.threeDigitsSigned,t,r);case 4:return gn(cn.fourDigitsSigned,t,r);default:return gn(new RegExp("^-?\\d{1,"+e+"}"),t,r)}}function vn(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function En(e,t){var r,n=t>0,o=n?t:1-t;if(o<=50)r=e||100;else{var a=o+50;r=e+100*Math.floor(a/100)-(e>=a%100?100:0)}return n?r:1-r}var An=[31,28,31,30,31,30,31,31,30,31,30,31],_n=[31,29,31,30,31,30,31,31,30,31,30,31];function bn(e){return e%400==0||e%4==0&&e%100!=0}var Tn={G:{priority:140,parse:function(e,t,r,n){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}},set:function(e,t,r,n){return t.era=r,e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(e,t,r,n){var o=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return yn(4,e,o);case"yo":return r.ordinalNumber(e,{unit:"year",valueCallback:o});default:return yn(t.length,e,o)}},validate:function(e,t,r){return t.isTwoDigitYear||t.year>0},set:function(e,t,r,n){var o=e.getUTCFullYear();if(r.isTwoDigitYear){var a=En(r.year,o);return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}var i="era"in t&&1!==t.era?1-r.year:r.year;return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(e,t,r,n){var o=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return yn(4,e,o);case"Yo":return r.ordinalNumber(e,{unit:"year",valueCallback:o});default:return yn(t.length,e,o)}},validate:function(e,t,r){return t.isTwoDigitYear||t.year>0},set:function(e,t,r,n){var o=vt(e,n);if(r.isTwoDigitYear){var a=En(r.year,o);return e.setUTCFullYear(a,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),St(e,n)}var i="era"in t&&1!==t.era?1-r.year:r.year;return e.setUTCFullYear(i,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),St(e,n)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(e,t,r,n){return Sn("R"===t?4:t.length,e)},set:function(e,t,r,n){var o=new Date(0);return o.setUTCFullYear(r,0,4),o.setUTCHours(0,0,0,0),gt(o)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(e,t,r,n){return Sn("u"===t?4:t.length,e)},set:function(e,t,r,n){return e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(e,t,r,n){switch(t){case"Q":case"QQ":return yn(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,r){return t>=1&&t<=4},set:function(e,t,r,n){return e.setUTCMonth(3*(r-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(e,t,r,n){switch(t){case"q":case"qq":return yn(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,r){return t>=1&&t<=4},set:function(e,t,r,n){return e.setUTCMonth(3*(r-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(e,t,r,n){var o=function(e){return e-1};switch(t){case"M":return gn(cn.month,e,o);case"MM":return yn(2,e,o);case"Mo":return r.ordinalNumber(e,{unit:"month",valueCallback:o});case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,r){return t>=0&&t<=11},set:function(e,t,r,n){return e.setUTCMonth(r,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(e,t,r,n){var o=function(e){return e-1};switch(t){case"L":return gn(cn.month,e,o);case"LL":return yn(2,e,o);case"Lo":return r.ordinalNumber(e,{unit:"month",valueCallback:o});case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,r){return t>=0&&t<=11},set:function(e,t,r,n){return e.setUTCMonth(r,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(e,t,r,n){switch(t){case"w":return gn(cn.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return yn(t.length,e)}},validate:function(e,t,r){return t>=1&&t<=53},set:function(e,t,r,i){return St(function(e,t,r){o(2,arguments);var i=a(e),s=n(t),c=At(i,r)-s;return i.setUTCDate(i.getUTCDate()-7*c),i}(e,r,i),i)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(e,t,r,n){switch(t){case"I":return gn(cn.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return yn(t.length,e)}},validate:function(e,t,r){return t>=1&&t<=53},set:function(e,t,r,i){return gt(function(e,t){o(2,arguments);var r=a(e),i=n(t),s=yt(r)-i;return r.setUTCDate(r.getUTCDate()-7*s),r}(e,r,i),i)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(e,t,r,n){switch(t){case"d":return gn(cn.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return yn(t.length,e)}},validate:function(e,t,r){var n=bn(e.getUTCFullYear()),o=e.getUTCMonth();return n?t>=1&&t<=_n[o]:t>=1&&t<=An[o]},set:function(e,t,r,n){return e.setUTCDate(r),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(e,t,r,n){switch(t){case"D":case"DD":return gn(cn.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return yn(t.length,e)}},validate:function(e,t,r){return bn(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365},set:function(e,t,r,n){return e.setUTCMonth(0,r),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(e,t,r,n){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,r){return t>=0&&t<=6},set:function(e,t,r,n){return(e=nn(e,r,n)).setUTCHours(0,0,0,0),e},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(e,t,r,n){var o=function(e){var t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return yn(t.length,e,o);case"eo":return r.ordinalNumber(e,{unit:"day",valueCallback:o});case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,r){return t>=0&&t<=6},set:function(e,t,r,n){return(e=nn(e,r,n)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(e,t,r,n){var o=function(e){var t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return yn(t.length,e,o);case"co":return r.ordinalNumber(e,{unit:"day",valueCallback:o});case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,r){return t>=0&&t<=6},set:function(e,t,r,n){return(e=nn(e,r,n)).setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(e,t,r,n){var o=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return yn(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return r.day(e,{width:"abbreviated",context:"formatting",valueCallback:o})||r.day(e,{width:"short",context:"formatting",valueCallback:o})||r.day(e,{width:"narrow",context:"formatting",valueCallback:o});case"iiiii":return r.day(e,{width:"narrow",context:"formatting",valueCallback:o});case"iiiiii":return r.day(e,{width:"short",context:"formatting",valueCallback:o})||r.day(e,{width:"narrow",context:"formatting",valueCallback:o});default:return r.day(e,{width:"wide",context:"formatting",valueCallback:o})||r.day(e,{width:"abbreviated",context:"formatting",valueCallback:o})||r.day(e,{width:"short",context:"formatting",valueCallback:o})||r.day(e,{width:"narrow",context:"formatting",valueCallback:o})}},validate:function(e,t,r){return t>=1&&t<=7},set:function(e,t,r,i){return e=function(e,t){o(2,arguments);var r=n(t);r%7==0&&(r-=7);var i=a(e),s=((r%7+7)%7<1?7:0)+r-i.getUTCDay();return i.setUTCDate(i.getUTCDate()+s),i}(e,r,i),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(e,t,r,n){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,r,n){return e.setUTCHours(vn(r),0,0,0),e},incompatibleTokens:["b","B","H","K","k","t","T"]},b:{priority:80,parse:function(e,t,r,n){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,r,n){return e.setUTCHours(vn(r),0,0,0),e},incompatibleTokens:["a","B","H","K","k","t","T"]},B:{priority:80,parse:function(e,t,r,n){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,r,n){return e.setUTCHours(vn(r),0,0,0),e},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(e,t,r,n){switch(t){case"h":return gn(cn.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return yn(t.length,e)}},validate:function(e,t,r){return t>=1&&t<=12},set:function(e,t,r,n){var o=e.getUTCHours()>=12;return o&&r<12?e.setUTCHours(r+12,0,0,0):o||12!==r?e.setUTCHours(r,0,0,0):e.setUTCHours(0,0,0,0),e},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(e,t,r,n){switch(t){case"H":return gn(cn.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return yn(t.length,e)}},validate:function(e,t,r){return t>=0&&t<=23},set:function(e,t,r,n){return e.setUTCHours(r,0,0,0),e},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(e,t,r,n){switch(t){case"K":return gn(cn.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return yn(t.length,e)}},validate:function(e,t,r){return t>=0&&t<=11},set:function(e,t,r,n){return e.getUTCHours()>=12&&r<12?e.setUTCHours(r+12,0,0,0):e.setUTCHours(r,0,0,0),e},incompatibleTokens:["a","b","h","H","k","t","T"]},k:{priority:70,parse:function(e,t,r,n){switch(t){case"k":return gn(cn.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return yn(t.length,e)}},validate:function(e,t,r){return t>=1&&t<=24},set:function(e,t,r,n){var o=r<=24?r%24:r;return e.setUTCHours(o,0,0,0),e},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(e,t,r,n){switch(t){case"m":return gn(cn.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return yn(t.length,e)}},validate:function(e,t,r){return t>=0&&t<=59},set:function(e,t,r,n){return e.setUTCMinutes(r,0,0),e},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(e,t,r,n){switch(t){case"s":return gn(cn.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return yn(t.length,e)}},validate:function(e,t,r){return t>=0&&t<=59},set:function(e,t,r,n){return e.setUTCSeconds(r,0),e},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(e,t,r,n){return yn(t.length,e,(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))},set:function(e,t,r,n){return e.setUTCMilliseconds(r),e},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(e,t,r,n){switch(t){case"X":return mn(un,e);case"XX":return mn(ln,e);case"XXXX":return mn(dn,e);case"XXXXX":return mn(fn,e);default:return mn(pn,e)}},set:function(e,t,r,n){return t.timestampIsSet?e:new Date(e.getTime()-r)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(e,t,r,n){switch(t){case"x":return mn(un,e);case"xx":return mn(ln,e);case"xxxx":return mn(dn,e);case"xxxxx":return mn(fn,e);default:return mn(pn,e)}},set:function(e,t,r,n){return t.timestampIsSet?e:new Date(e.getTime()-r)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(e,t,r,n){return hn(e)},set:function(e,t,r,n){return[new Date(1e3*r),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(e,t,r,n){return hn(e)},set:function(e,t,r,n){return[new Date(r),{timestampIsSet:!0}]},incompatibleTokens:"*"}};const In=Tn;var wn=10,Cn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,On=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Dn=/^'([^]*?)'?$/,Pn=/''/g,Nn=/\S/,Rn=/[a-zA-Z]/;function Un(e,t,r,i){o(3,arguments);var s=String(e),c=String(t),u=i||{},l=u.locale||ut;if(!l.match)throw new RangeError("locale must contain match property");var d=l.options&&l.options.firstWeekContainsDate,p=null==d?1:n(d),f=null==u.firstWeekContainsDate?p:n(u.firstWeekContainsDate);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=l.options&&l.options.weekStartsOn,m=null==g?0:n(g),h=null==u.weekStartsOn?m:n(u.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===c)return""===s?a(r):new Date(NaN);var y,S={firstWeekContainsDate:f,weekStartsOn:h,locale:l},v=[{priority:wn,subPriority:-1,set:Ln,index:0}],A=c.match(On).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,Pt[t])(e,l.formatLong,S):e})).join("").match(Cn),_=[];for(y=0;y<A.length;y++){var b=A[y];!u.useAdditionalWeekYearTokens&&Lt(b)&&Mt(b,c,e),!u.useAdditionalDayOfYearTokens&&Ut(b)&&Mt(b,c,e);var T=b[0],I=In[T];if(I){var w=I.incompatibleTokens;if(Array.isArray(w)){for(var C=void 0,O=0;O<_.length;O++){var D=_[O].token;if(-1!==w.indexOf(D)||D===T){C=_[O];break}}if(C)throw new RangeError("The format string mustn't contain `".concat(C.fullToken,"` and `").concat(b,"` at the same time"))}else if("*"===I.incompatibleTokens&&_.length)throw new RangeError("The format string mustn't contain `".concat(b,"` and any other token at the same time"));_.push({token:T,fullToken:b});var P=I.parse(s,b,l.match,S);if(!P)return new Date(NaN);v.push({priority:I.priority,subPriority:I.subPriority||0,set:I.set,validate:I.validate,value:P.value,index:v.length}),s=P.rest}else{if(T.match(Rn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");if("''"===b?b="'":"'"===T&&(b=b.match(Dn)[1].replace(Pn,"'")),0!==s.indexOf(b))return new Date(NaN);s=s.slice(b.length)}}if(s.length>0&&Nn.test(s))return new Date(NaN);var N=v.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,r){return r.indexOf(e)===t})).map((function(e){return v.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),R=a(r);if(isNaN(R))return new Date(NaN);var U=lt(R,E(R)),L={};for(y=0;y<N.length;y++){var M=N[y];if(M.validate&&!M.validate(U,M.value,S))return new Date(NaN);var k=M.set(U,L,M.value,S);k[0]?(U=k[0],Kt(L,k[1])):U=k}return U}function Ln(e,t){if(t.timestampIsSet)return e;var r=new Date(0);return r.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),r.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),r}function Mn(e,t,r){return o(2,arguments),ee(Un(e,t,new Date,r))}function kn(e){return o(1,arguments),1===a(e).getDay()}function Bn(e){return o(1,arguments),a(e).getTime()<Date.now()}function Fn(e){o(1,arguments);var t=a(e);return t.setMinutes(0,0,0),t}function xn(e,t){o(2,arguments);var r=Fn(e),n=Fn(t);return r.getTime()===n.getTime()}function Gn(e,t,r){o(2,arguments);var n=h(e,r),a=h(t,r);return n.getTime()===a.getTime()}function jn(e,t){return o(2,arguments),Gn(e,t,{weekStartsOn:1})}function Kn(e,t){o(2,arguments);var r=v(e),n=v(t);return r.getTime()===n.getTime()}function $n(e,t){o(2,arguments);var r=Re(e),n=Re(t);return r.getTime()===n.getTime()}function Vn(e,t){o(2,arguments);var r=a(e),n=a(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Hn(e,t){o(2,arguments);var r=Me(e),n=Me(t);return r.getTime()===n.getTime()}function Wn(e){o(1,arguments);var t=a(e);return t.setMilliseconds(0),t}function zn(e,t){o(2,arguments);var r=Wn(e),n=Wn(t);return r.getTime()===n.getTime()}function qn(e,t){o(2,arguments);var r=a(e),n=a(t);return r.getFullYear()===n.getFullYear()}function Yn(e){return o(1,arguments),xn(Date.now(),e)}function Qn(e){return o(1,arguments),jn(e,Date.now())}function Zn(e){return o(1,arguments),$n(Date.now(),e)}function Xn(e){return o(1,arguments),Vn(Date.now(),e)}function Jn(e){return o(1,arguments),Hn(Date.now(),e)}function eo(e){return o(1,arguments),zn(Date.now(),e)}function to(e,t){return o(1,arguments),Gn(e,Date.now(),t)}function ro(e){return o(1,arguments),qn(e,Date.now())}function no(e){return o(1,arguments),4===a(e).getDay()}function oo(e){return o(1,arguments),te(e,Date.now())}function ao(e){return o(1,arguments),te(e,i(Date.now(),1))}function io(e){return o(1,arguments),2===a(e).getDay()}function so(e){return o(1,arguments),3===a(e).getDay()}function co(e,t){o(2,arguments);var r=a(e).getTime(),n=a(t.start).getTime(),i=a(t.end).getTime();if(!(n<=i))throw new RangeError("Invalid interval");return r>=n&&r<=i}function uo(e){return o(1,arguments),te(e,Hr(Date.now(),1))}function lo(e){o(1,arguments);var t=a(e),r=t.getFullYear(),n=9+10*Math.floor(r/10);return t.setFullYear(n+1,0,0),t.setHours(0,0,0,0),t}function po(e,t){o(1,arguments);var r=t||{},i=r.locale,s=i&&i.options&&i.options.weekStartsOn,c=null==s?0:n(s),u=null==r.weekStartsOn?c:n(r.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var l=a(e),d=l.getDay(),p=6+(d<u?-7:0)-(d-u);return l.setHours(0,0,0,0),l.setDate(l.getDate()+p),l}function fo(e){return o(1,arguments),po(e,{weekStartsOn:1})}function go(e){o(1,arguments);var t=S(e),r=new Date(0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);var n=y(r);return n.setDate(n.getDate()-1),n}function mo(e){o(1,arguments);var t=a(e),r=t.getMonth(),n=r-r%3+3;return t.setMonth(n,0),t.setHours(0,0,0,0),t}function ho(e){o(1,arguments);var t=a(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(0,0,0,0),t}var yo=/(\w)\1*|''|'(''|[^'])+('|$)|./g,So=/^'([^]*?)'?$/,vo=/''/g,Eo=/[a-zA-Z]/;function Ao(e,t){o(2,arguments);var r=a(e);if(!ee(r))throw new RangeError("Invalid time value");var n=lt(r,E(r)),i=t.match(yo);return i?i.map((function(e){if("''"===e)return"'";var t=e[0];if("'"===t)return function(e){var t=e.match(So);return t?t[1].replace(vo,"'"):e}(e);var r=ft[t];if(r)return r(n,e);if(t.match(Eo))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return e})).join(""):""}var _o=365.2425;function bo(e){var t=e.years,r=e.months,n=e.weeks,a=e.days,i=e.hours,s=e.minutes,c=e.seconds;o(1,arguments);var u=0;t&&(u+=t*_o),r&&(u+=r*(_o/12)),n&&(u+=7*n),a&&(u+=a);var l=24*u*60*60;return i&&(l+=60*i*60),s&&(l+=60*s),c&&(l+=c),Math.round(1e3*l)}function To(e){o(1,arguments);var t=e/$;return Math.floor(t)}function Io(e){o(1,arguments);var t=e/K;return Math.floor(t)}function wo(e){o(1,arguments);var t=e/V;return Math.floor(t)}function Co(e){o(1,arguments);var t=e/W;return Math.floor(t)}function Oo(e){return o(1,arguments),Math.floor(e*K)}function Do(e){return o(1,arguments),Math.floor(e*Z)}function Po(e){o(1,arguments);var t=e/z;return Math.floor(t)}function No(e){o(1,arguments);var t=e/q;return Math.floor(t)}function Ro(e,t){o(2,arguments);var r=t-gr(e);return r<=0&&(r+=7),i(e,r)}function Uo(e){return o(1,arguments),Ro(a(e),5)}function Lo(e){return o(1,arguments),Ro(a(e),1)}function Mo(e){return o(1,arguments),Ro(a(e),6)}function ko(e){return o(1,arguments),Ro(a(e),0)}function Bo(e){return o(1,arguments),Ro(a(e),4)}function Fo(e){return o(1,arguments),Ro(a(e),2)}function xo(e){return o(1,arguments),Ro(a(e),3)}var Go=36e5,jo=6e4,Ko=2,$o={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Vo=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ho=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Wo=/^([+-])(\d{2})(?::?(\d{2}))?$/;function zo(e,t){o(1,arguments);var r=t||{},a=null==r.additionalDigits?Ko:n(r.additionalDigits);if(2!==a&&1!==a&&0!==a)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i,s=function(e){var t,r={},n=e.split($o.dateTimeDelimiter);if(n.length>2)return r;if(/:/.test(n[0])?(r.date=null,t=n[0]):(r.date=n[0],t=n[1],$o.timeZoneDelimiter.test(r.date)&&(r.date=e.split($o.timeZoneDelimiter)[0],t=e.substr(r.date.length,e.length))),t){var o=$o.timezone.exec(t);o?(r.time=t.replace(o[1],""),r.timezone=o[1]):r.time=t}return r}(e);if(s.date){var c=function(e,t){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:null};var o=n[1]&&parseInt(n[1]),a=n[2]&&parseInt(n[2]);return{year:null==a?o:100*a,restDateString:e.slice((n[1]||n[2]).length)}}(s.date,a);i=function(e,t){if(null===t)return null;var r=e.match(Vo);if(!r)return null;var n=!!r[4],o=qo(r[1]),a=qo(r[2])-1,i=qo(r[3]),s=qo(r[4]),c=qo(r[5])-1;if(n)return function(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}(0,s,c)?function(e,t,r){var n=new Date(0);n.setUTCFullYear(e,0,4);var o=7*(t-1)+r+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+o),n}(t,s,c):new Date(NaN);var u=new Date(0);return function(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(Qo[t]||(Zo(e)?29:28))}(t,a,i)&&function(e,t){return t>=1&&t<=(Zo(e)?366:365)}(t,o)?(u.setUTCFullYear(t,a,Math.max(o,i)),u):new Date(NaN)}(c.restDateString,c.year)}if(isNaN(i)||!i)return new Date(NaN);var u,l=i.getTime(),d=0;if(s.time&&(d=function(e){var t=e.match(Ho);if(!t)return null;var r=Yo(t[1]),n=Yo(t[2]),o=Yo(t[3]);return function(e,t,r){return 24===e?0===t&&0===r:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}(r,n,o)?r*Go+n*jo+1e3*o:NaN}(s.time),isNaN(d)||null===d))return new Date(NaN);if(!s.timezone){var p=new Date(l+d),f=new Date(0);return f.setFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()),f.setHours(p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()),f}return u=function(e){if("Z"===e)return 0;var t=e.match(Wo);if(!t)return 0;var r="+"===t[1]?-1:1,n=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,o)?r*(n*Go+o*jo):NaN}(s.timezone),isNaN(u)?new Date(NaN):new Date(l+d+u)}function qo(e){return e?parseInt(e):1}function Yo(e){return e&&parseFloat(e.replace(",","."))||0}var Qo=[31,null,31,30,31,30,31,31,30,31,30,31];function Zo(e){return e%400==0||e%4==0&&e%100}function Xo(e){if(o(1,arguments),"string"==typeof e){var t=e.match(/(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2})(?:\.(\d{0,7}))?(?:Z|(.)(\d{2}):?(\d{2})?)?/);return t?new Date(Date.UTC(+t[1],+t[2]-1,+t[3],+t[4]-(+t[9]||0)*("-"==t[8]?-1:1),+t[5]-(+t[10]||0)*("-"==t[8]?-1:1),+t[6],+((t[7]||"0")+"00").substring(0,3))):new Date(NaN)}return a(e)}function Jo(e,t){o(2,arguments);var r=gr(e)-t;return r<=0&&(r+=7),Hr(e,r)}function ea(e){return o(1,arguments),Jo(e,5)}function ta(e){return o(1,arguments),Jo(e,1)}function ra(e){return o(1,arguments),Jo(e,6)}function na(e){return o(1,arguments),Jo(e,0)}function oa(e){return o(1,arguments),Jo(e,4)}function aa(e){return o(1,arguments),Jo(e,2)}function ia(e){return o(1,arguments),Jo(e,3)}function sa(e){return o(1,arguments),Math.floor(e*z)}function ca(e){o(1,arguments);var t=e/Y;return Math.floor(t)}function ua(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only none provided present");var r=t&&"nearestTo"in t?n(t.nearestTo):1;if(r<1||r>30)throw new RangeError("`options.nearestTo` must be between 1 and 30");var o=a(e),i=o.getSeconds(),s=o.getMinutes()+i/60,c=Math.floor(s/r)*r,u=s%r,l=Math.round(u/r)*r;return new Date(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),c+l)}function la(e){o(1,arguments);var t=e/Q;return Math.floor(t)}function da(e){return o(1,arguments),e*V}function pa(e){o(1,arguments);var t=e/Z;return Math.floor(t)}function fa(e,t){o(2,arguments);var r=a(e),i=n(t),s=r.getFullYear(),c=r.getDate(),u=new Date(0);u.setFullYear(s,i,15),u.setHours(0,0,0,0);var l=hr(u);return r.setMonth(i,Math.min(c,l)),r}function ga(e,t){if(o(2,arguments),"object"!=typeof t||null===t)throw new RangeError("values parameter must be an object");var r=a(e);return isNaN(r.getTime())?new Date(NaN):(null!=t.year&&r.setFullYear(t.year),null!=t.month&&(r=fa(r,t.month)),null!=t.date&&r.setDate(n(t.date)),null!=t.hours&&r.setHours(n(t.hours)),null!=t.minutes&&r.setMinutes(n(t.minutes)),null!=t.seconds&&r.setSeconds(n(t.seconds)),null!=t.milliseconds&&r.setMilliseconds(n(t.milliseconds)),r)}function ma(e,t){o(2,arguments);var r=a(e),i=n(t);return r.setDate(i),r}function ha(e,t,r){o(2,arguments);var s=r||{},c=s.locale,u=c&&c.options&&c.options.weekStartsOn,l=null==u?0:n(u),d=null==s.weekStartsOn?l:n(s.weekStartsOn);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=a(e),f=n(t),g=p.getDay(),m=7-d;return i(p,f<0||f>6?f-(g+m)%7:((f%7+7)%7+m)%7-(g+m)%7)}function ya(e,t){o(2,arguments);var r=a(e),i=n(t);return r.setMonth(0),r.setDate(i),r}function Sa(e,t){o(2,arguments);var r=a(e),i=n(t);return r.setHours(i),r}function va(e,t){o(2,arguments);var r=a(e);return i(r,n(t)-Ar(r))}function Ea(e,t){o(2,arguments);var r=a(e),i=n(t),s=br(r)-i;return r.setDate(r.getDate()-7*s),r}function Aa(e,t){o(2,arguments);var r=a(e),i=n(t);return r.setMilliseconds(i),r}function _a(e,t){o(2,arguments);var r=a(e),i=n(t);return r.setMinutes(i),r}function ba(e,t){o(2,arguments);var r=a(e),i=n(t)-(Math.floor(r.getMonth()/3)+1);return fa(r,r.getMonth()+3*i)}function Ta(e,t){o(2,arguments);var r=a(e),i=n(t);return r.setSeconds(i),r}function Ia(e,t,r){o(2,arguments);var i=a(e),s=n(t),c=Br(i,r)-s;return i.setDate(i.getDate()-7*c),i}function wa(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(2,arguments);var i=r.locale,s=i&&i.options&&i.options.firstWeekContainsDate,c=null==s?1:n(s),u=null==r.firstWeekContainsDate?c:n(r.firstWeekContainsDate),l=a(e),d=n(t),p=b(l,Mr(l,r)),f=new Date(0);return f.setFullYear(d,0,u),f.setHours(0,0,0,0),(l=Mr(f,r)).setDate(l.getDate()+p),l}function Ca(e,t){o(2,arguments);var r=a(e),i=n(t);return isNaN(r.getTime())?new Date(NaN):(r.setFullYear(i),r)}function Oa(e){o(1,arguments);var t=a(e),r=t.getFullYear(),n=10*Math.floor(r/10);return t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}function Da(){return A(Date.now())}function Pa(){var e=new Date,t=e.getFullYear(),r=e.getMonth(),n=e.getDate(),o=new Date(0);return o.setFullYear(t,r,n+1),o.setHours(0,0,0,0),o}function Na(){var e=new Date,t=e.getFullYear(),r=e.getMonth(),n=e.getDate(),o=new Date(0);return o.setFullYear(t,r,n-1),o.setHours(0,0,0,0),o}function Ra(e,t){return o(2,arguments),p(e,-n(t))}function Ua(e,t){return o(2,arguments),m(e,-n(t))}function La(e,t){return o(2,arguments),C(e,-n(t))}function Ma(e,t){return o(2,arguments),O(e,-n(t))}function ka(e,t){return o(2,arguments),D(e,-n(t))}function Ba(e,t){return o(2,arguments),P(e,-n(t))}function Fa(e,t){return o(2,arguments),N(e,-n(t))}function xa(e){return o(1,arguments),Math.floor(e*G)}function Ga(e){return o(1,arguments),Math.floor(e*q)}function ja(e){return o(1,arguments),Math.floor(e*Y)}},49048:e=>{"use strict";var t="%[a-f0-9]{2}",r=new RegExp(t,"gi"),n=new RegExp("("+t+")+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],o(r),o(n))}function a(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=n.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var o=a(r[0]);o!==r[0]&&(t[r[0]]=o)}r=n.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),s=0;s<i.length;s++){var c=i[s];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},6648:(e,t,r)=>{"use strict";var n=r(53571),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),a=Object.prototype.toString,i=Array.prototype.concat,s=Object.defineProperty,c=r(70138)(),u=s&&c,l=function(e,t,r,n){if(t in e)if(!0===n){if(e[t]===r)return}else if("function"!=typeof(o=n)||"[object Function]"!==a.call(o)||!n())return;var o;u?s(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},d=function(e,t){var r=arguments.length>2?arguments[2]:{},a=n(t);o&&(a=i.call(a,Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;s+=1)l(e,a[s],t[a[s]],r[a[s]])};d.supportsDescriptors=!!u,e.exports=d},69626:e=>{"use strict";function t(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var a=Object.keys(Object(o)),i=0,s=a.length;i<s;i++){var c=a[i],u=Object.getOwnPropertyDescriptor(o,c);void 0!==u&&u.enumerable&&(r[c]=o[c])}}return r}e.exports={assign:t,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})}}},70138:(e,t,r)=>{"use strict";var n=r(71013)("%Object.defineProperty%",!0),o=function(){if(n)try{return n({},"a",{value:1}),!0}catch(e){return!1}return!1};o.hasArrayLengthDefineBug=function(){if(!o())return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=o},49029:e=>{"use strict";e.exports=function(e){return e!=e}},29736:(e,t,r)=>{"use strict";var n=r(25592),o=r(6648),a=r(49029),i=r(46240),s=r(24645),c=n(i(),Number);o(c,{getPolyfill:i,implementation:a,shim:s}),e.exports=c},46240:(e,t,r)=>{"use strict";var n=r(49029);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:n}},24645:(e,t,r)=>{"use strict";var n=r(6648),o=r(46240);e.exports=function(){var e=o();return n(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},33321:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AsYouType:()=>$r,AsYouTypeCustom:()=>Kr,DIGITS:()=>V,DIGIT_PLACEHOLDER:()=>Ar,Metadata:()=>Yr,ParseError:()=>p,PhoneNumberMatcher:()=>Sr,PhoneNumberSearch:()=>Cn,PhoneNumberSearchCustom:()=>_n,default:()=>Ve,findNumbers:()=>ir,findPhoneNumbers:()=>In,findPhoneNumbersCustom:()=>bn,findPhoneNumbersInText:()=>mr,format:()=>an,formatCustom:()=>nn,formatIncompletePhoneNumber:()=>Jr,formatNumber:()=>an,formatRFC3966:()=>te,getCountries:()=>Wr,getCountryCallingCode:()=>zr,getCountryCallingCodeCustom:()=>N,getExampleNumber:()=>Zr,getExtPrefix:()=>qr,getNumberType:()=>dn,getNumberTypeCustom:()=>cn,getPhoneCode:()=>zr,getPhoneCodeCustom:()=>N,isPossibleNumber:()=>fn,isPossiblePhoneNumber:()=>Qe,isSupportedCountry:()=>Vr,isValidNumber:()=>mn,isValidNumberCustom:()=>gn,isValidNumberForRegion:()=>yn,isValidPhoneNumber:()=>ze,parse:()=>tn,parseCustom:()=>en,parseDigits:()=>W,parseIncompletePhoneNumber:()=>z,parseNumber:()=>tn,parsePhoneNumber:()=>Ge,parsePhoneNumberCharacter:()=>q,parsePhoneNumberFromString:()=>Ve,parsePhoneNumberWithError:()=>Ge,parseRFC3966:()=>ee,searchNumbers:()=>cr,searchPhoneNumbers:()=>wn,searchPhoneNumbersCustom:()=>Tn,searchPhoneNumbersInText:()=>yr,validatePhoneNumberLength:()=>Je});const n={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([457]\\d{6})$","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2457]\\d{6})$","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"1|([267]\\d{6})$","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7,8}|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"0|(183[12])",0,0,0,[["(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|3(?:[0-3589]\\d|4[0-578]|6[1-9]|7[0-35-9])|7(?:[013-57-9]\\d|2[0-8]))\\d{3}|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4]))|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:83[0-38]|93[0-4])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{3}|45[0-4])\\d{3}|13\\d{4}",[6,8,10]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365|46","1[28]|2|365(?:[0-46-9]|5[0-35-9])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","246$1",0,"246"],BD:["880","00","1\\d{9}|2\\d{7,8}|88\\d{4,6}|(?:8[0-79]|9\\d)\\d{4,8}|(?:[346]\\d|[57])\\d{5,8}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:28|4[14]|5)|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[047]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","[25689]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[25689]"]]]],BL:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-8]\\d{6})$","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","(?:[2-467]\\d\\d|8001)\\d{5}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[23]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-24679]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([3-8]\\d{6})$","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-79]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}",[10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50)|3(?:06|43|6[578])|4(?:03|1[68]|3[178]|50|74)|5(?:06|1[49]|48|79|8[17])|6(?:04|13|39|47|72)|7(?:0[59]|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[12]|33|44|66|77|88)|622)[2-9]\\d{6}"],0,0,0,["600[2-9]\\d{6}"]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d|8[0-24-9])\\d{7}|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10],0,"0",0,"0|([59]\\d{7})$","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:83[0-38]|93[0-4])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{3}|45[0-4])\\d{3}|13\\d{4}",[6,8,10]]],"0011"],CD:["243","00","[189]\\d{8}|[1-68]\\d{6}",[7,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","(?:0\\d\\d|222|800)\\d{6}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-3]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","1[127]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-689]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","(?:10|2[0-57-9])(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"0|(1(?:[12]\\d|79)\\d\\d)",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:(?:1\\d|[36])\\d{3}|9101)\\d{6}|[124-8]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1 $2",["[146][2-9]|[2578]"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["6"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["[39]"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","[27]\\d{6,7}|[34]\\d{5,7}|(?:5|8\\d\\d)\\d{7}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["5"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d|8[0-24-9])\\d{7}|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10],0,"0",0,"0|([59]\\d{7})$","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:83[0-38]|93[0-4])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{3}|45[0-4])\\d{3}|13\\d{4}",[6,8,10]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:[12]\\d|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[05]\\d|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[0568]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[189]"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-59]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-59]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d)(\\d{4,9})","$1 $2",["[2568][1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["[12]00|[368]|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[1245]|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]]],0,0,"0(11\\d{6}|6[256]\\d{6}|7[47]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0235])|4(?:[0-5]\\d\\d|69[7-9]|70[0359])|(?:5[0-26-9]|[78][0-49])\\d\\d|6(?:[0-4]\\d\\d|50[02459]))|2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d\\d|1(?:[0-7]\\d\\d|8(?:[02]\\d|1[0-278])))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|81|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","(?:[56]94|80\\d|976)\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"0|([25-9]\\d{5})$","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|81|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d\\d|606)\\d{5}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|1[0-2]|2[0-68]|3[1289]|4[0-24-9]|5[3-579]|6[0189]|7[08]|8[0-689]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"1|([3-9]\\d{6})$","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","(?:862\\d|9008)\\d{3}|(?:[2-46]\\d|77)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-46-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4}(?:\\d(?:\\d(?:\\d{4})?)?)?|(?:[235-79]\\d|46)\\d{6}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-5]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","[2-489]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-489]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","(?:(?:00[1-9]|8\\d)\\d{4}|[1-36])\\d{6}|00\\d{10}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"0|([25-8]\\d{5})$","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[245])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1[4679]|[38]"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}"],["3[1-9]\\d{8}|3[2-9]\\d{7}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d\\d|89(?:2|4[5-9]\\d))\\d{3}|89[45][0-4]\\d\\d|(?:1(?:44|6[346])|89(?:5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],0,0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"0|([0-24-8]\\d{5})$","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97[7-9]))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|81|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51|63)|9(?:49|80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9]|636)|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9]|636[457-9])|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[27-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9])|5(?:2|3[045]|4[0-369]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|49|51|6(?:[0-24]|36|5[0-3589]|72|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:49|55|83)[29]|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|7[015-9]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17|3[015-9]))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9(?:[019]|4[1-3]|6(?:[0-47-9]|5[01346-9])))|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|829(?:2|66)|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|(?:[235-8]\\d|99)\\d{7}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","(?:18|[2569]\\d\\d)\\d{5}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[25]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[013-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"1|([2-8]\\d{6})$","758$1",0,"758"],LI:["423","00","90\\d{5}|(?:[2378]|6\\d\\d)\\d{6}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[237-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"0|(1001)"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:2|33|5\\d|77|88)\\d{7}|[4-6]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[4-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(8-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"8 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(8-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(8-$1)",1]],"8",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{5})(\\d{4})","$1-$2",["5(?:29|38)","5(?:29|38)[89]","5(?:29|38)[89]0"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9]|9)|892","5(?:2(?:[2-49]|8[235-9])|3[5-9]|9)|892"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:29(?:[189][05]|2[29]|3[01])|38[89][05])\\d{4}|5(?:2(?:[0-25-7]\\d|3[1-578]|4[02-46-8]|8[0235-7]|90)|3(?:[0-47]\\d|5[02-9]|6[02-8]|80|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:0\\d|1[0-3]|6[1267]|7[0-57]))\\d{6}"],["80\\d{7}"],["89\\d{7}"],0,0,0,0,["592(?:4[0-2]|93)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|30|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"0|([24-9]\\d{6})$","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[57-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[57-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","670$1",0,"670"],MQ:["596","00","(?:69|80)\\d{7}|(?:59|97)6\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"1|([34]\\d{6})$","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:5|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["5"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[3467]|9[13-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[19]\\d|[23]1|77|88)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","1(?:65[0-689]|99[1-9])\\d{7}|(?:1(?:[0147]\\d|[235][1-9]|6[0-46-9]|8[1-79]|9[1-8])|[2-9]\\d)\\d{8}",[10,11],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],0,1],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],0,1],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],0,1]],"01",0,"0(?:[12]|4[45])|1",0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9])|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1[36-8]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","[2-57-9]\\d{5}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[2-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[04]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","(?:[124-7]|9\\d{3})\\d{6}|[1-9]\\d{7}|[78]\\d{9,13}",[7,8,10,11,12,13,14],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-7]|8[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|[89]\\d{6,9}|1\\d{4,5}",[5,6,7,8,9,10],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-57-9]"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[489]|59"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-7]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-579]|6[2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[47]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[29]\\d{7,9}|50\\d{5}(?:\\d{2,3})?|6[0-35-9]\\d{6}|7\\d{7,8}|8\\d{4,9}|(?:11\\d|[34])\\d{7}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-579]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|[89]0","50(?:[0367]|88)|[89]0"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[59]|80"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7|86"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,0," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","6\\d{5}(?:\\d{2})?|8\\d{9}|[1-9]\\d{6}(?:\\d{2})?",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","(?:[45]|80\\d\\d)\\d{5}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-6])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","[2-7]\\d{7}|800\\d{4}(?:\\d{2})?|2\\d{6}",[7,8,9],[["(\\d{3})(\\d{4})","$1 $2",["2[126]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]]]],RE:["262","00","9769\\d{5}|(?:26|[68]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,"26[23]|69|[89]"],RO:["40","00","(?:[237]\\d|[89]0)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[237-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-6]2|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-6]2|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","(?:[1-6]|[7-9]\\d\\d)\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","8000\\d{3}|(?:[249]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-4]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|[57]9)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["24|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3478]|64|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6(?:0[5-7]|[1-35-9])|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|[89]00\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|(5\\d{6})$","721$1",0,"721"],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"1|([2-479]\\d{6})$","649$1",0,"649"],TD:["235","00|16","(?:22|[69]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2679]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","(?:00|11|[2-57-9]\\d)\\d{7}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"],0,1],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[34]7|91[78]"],0,1],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3[1-5]"],0,1],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02-57-9]|11"],0,1]],"8",0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","[1-6]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["6"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|616)","5(?:[0-59]|6161)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-46-8]\\d{6})$","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[26-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["4[45][0-5]|5(?:0|6[37])|6(?:[12][018]|[36-8])|7|89|9[1-9]|(?:48|57)[0137-9]","4[45][0-5]|5(?:0|6(?:3[14-7]|7))|6(?:[12][018]|[36-8])|7|89|9[1-9]|(?:48|57)[0137-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["[3-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}",[10],[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["5(?:05(?:[2-57-9]\\d\\d|6(?:[0-35-9]\\d|44))|82(?:2(?:0[0-2]|[28]2)|3(?:0[02]|33)|4(?:00|4[24]|65|82)|5(?:00|29|83)|6(?:00|66|82)|777|8(?:00|88)|9(?:00|9[89])))\\d{4}|(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[01356]|3[0-24679]|4[167]|5[12]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[39]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[0-5]|8[056])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[0179]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[08]|3[0-289]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01579]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}"]]],UY:["598","0(?:0|1[3-9]\\d)","4\\d{9}|[249]\\d{7}|(?:[49]\\d|80)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["405|8|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[24]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["4"],"0$1"]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","810","(?:33|55|[679]\\d|88)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[35-9]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-578]\\d{6})$","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[69]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3578]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","[23]\\d{7,8}|(?:4\\d\\d|[89]00)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[23]"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7[24-68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","80\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,"269|63"],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","(?:63|80)0\\d{6}|(?:21|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:005|[1-9]\\d\\d)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:005|[1-9]\\d\\d)\\d{5}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[35-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"[0-36-9]\\d{8}",[9],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-36-9]"]]],0,0,0,0,0,0,[0,["[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|285\\d{9}|(?:[19]\\d|49)\\d{6}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["4"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[19]"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["34[57]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-3]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|3(?:2|47|7\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,0,0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:(?:285\\d\\d|3(?:45|[69]\\d{3}))\\d|9[89])\\d{6}"]]],883:["883",0,"210\\d{7}|51\\d{7}(?:\\d{3})?",[9,10,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["510"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["5"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:210|51[013]0\\d)\\d{7}|5100\\d{5}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}},o=n;function a(e,t){var r=Array.prototype.slice.call(t);return r.push(n),e.apply(this,r)}var i=2,s=17,c=3,u="0-9０-９٠-٩۰-۹",l="  ­​⁠　",d="".concat("-‐-―−ー－").concat("／/").concat("．.").concat(l).concat("()（）［］\\[\\]").concat("~⁓∼～"),p=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=this.constructor.name,this.message=t,this.stack=new Error(t).stack};function f(e,t){e=e.split("-"),t=t.split("-");for(var r=e[0].split("."),n=t[0].split("."),o=0;o<3;o++){var a=Number(r[o]),i=Number(n[o]);if(a>i)return 1;if(i>a)return-1;if(!isNaN(a)&&isNaN(i))return 1;if(isNaN(a)&&!isNaN(i))return-1}return e[1]&&t[1]?e[1]>t[1]?1:e[1]<t[1]?-1:0:!e[1]&&t[1]?1:e[1]&&!t[1]?-1:0}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e}p.prototype=Object.create(Error.prototype),p.prototype.constructor=p;var S="1.2.0",v="1.7.35",E=" ext. ",A=/^\d+$/,_=function(){function e(t){m(this,e),function(e){if(!e)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!O(e)||!O(e.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(O(e)?"an object of shape: { "+Object.keys(e).join(", ")+" }":"a "+D(e)+": "+e,"."))}(t),this.metadata=t,U.call(this,t)}return y(e,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter((function(e){return"001"!==e}))}},{key:"getCountryMetadata",value:function(e){return this.metadata.countries[e]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(e){return void 0!==this.getCountryMetadata(e)}},{key:"hasCallingCode",value:function(e){if(this.getCountryCodesForCallingCode(e))return!0;if(this.nonGeographic()){if(this.nonGeographic()[e])return!0}else{var t=this.countryCallingCodes()[e];if(t&&1===t.length&&"001"===t[0])return!0}}},{key:"isNonGeographicCallingCode",value:function(e){return this.nonGeographic()?!!this.nonGeographic()[e]:!this.getCountryCodesForCallingCode(e)}},{key:"country",value:function(e){return this.selectNumberingPlan(e)}},{key:"selectNumberingPlan",value:function(e,t){if(e&&A.test(e)&&(t=e,e=null),e&&"001"!==e){if(!this.hasCountry(e))throw new Error("Unknown country: ".concat(e));this.numberingPlan=new b(this.getCountryMetadata(e),this)}else if(t){if(!this.hasCallingCode(t))throw new Error("Unknown calling code: ".concat(t));this.numberingPlan=new b(this.getNumberingPlanMetadata(t),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(e){var t=this.countryCallingCodes()[e];if(t){if(1===t.length&&3===t[0].length)return;return t}}},{key:"getCountryCodeForCallingCode",value:function(e){var t=this.getCountryCodesForCallingCode(e);if(t)return t[0]}},{key:"getNumberingPlanMetadata",value:function(e){var t=this.getCountryCodeForCallingCode(e);if(t)return this.getCountryMetadata(t);if(this.nonGeographic()){var r=this.nonGeographic()[e];if(r)return r}else{var n=this.countryCallingCodes()[e];if(n&&1===n.length&&"001"===n[0])return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(e){return this.numberingPlan.type(e)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(e){return this.selectNumberingPlan(e)}},{key:"hasSelectedNumberingPlan",value:function(){return void 0!==this.numberingPlan}}]),e}(),b=function(){function e(t,r){m(this,e),this.globalMetadataObject=r,this.metadata=t,U.call(this,r.metadata)}return y(e,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(e){return e[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var e=this;return(this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[]).map((function(t){return new T(t,e)}))}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(e){return e[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return!(this.types()&&0===this.types().length||!this.types())}},{key:"type",value:function(e){if(this.hasTypes()&&C(this.types(),e))return new w(C(this.types(),e),this)}},{key:"ext",value:function(){return this.v1||this.v2?E:this.metadata[13]||E}}]),e}(),T=function(){function e(t,r){m(this,e),this._format=t,this.metadata=r}return y(e,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!(!this.nationalPrefixFormattingRule()||I.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),e}(),I=/^\(?\$1\)?$/,w=function(){function e(t,r){m(this,e),this.type=t,this.metadata=r}return y(e,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),e}();function C(e,t){switch(t){case"FIXED_LINE":return e[0];case"MOBILE":return e[1];case"TOLL_FREE":return e[2];case"PREMIUM_RATE":return e[3];case"PERSONAL_NUMBER":return e[4];case"VOICEMAIL":return e[5];case"UAN":return e[6];case"PAGER":return e[7];case"VOIP":return e[8];case"SHARED_COST":return e[9]}}var O=function(e){return"object"===g(e)},D=function(e){return g(e)};function P(e,t){return(t=new _(t)).hasCountry(e)?t.country(e).ext():E}function N(e,t){if((t=new _(t)).hasCountry(e))return t.country(e).countryCallingCode();throw new Error("Unknown country: ".concat(e))}function R(e,t){return void 0!==t.countries[e]}function U(e){var t=e.version;"number"==typeof t?(this.v1=1===t,this.v2=2===t,this.v3=3===t,this.v4=4===t):t?-1===f(t,S)?this.v2=!0:-1===f(t,v)?this.v3=!0:this.v4=!0:this.v1=!0}var L=";ext=",M=function(e){return"([".concat(u,"]{1,").concat(e,"})")};function k(e){var t="[  \\t,]*",r="[:\\.．]?[  \\t,-]*",n="#?",o="[  \\t]*";return L+M("20")+"|"+t+"(?:e?xt(?:ensi(?:ó?|ó))?n?|ｅ?ｘｔｎ?|доб|anexo)"+r+M("20")+"#?|"+t+"(?:[xｘ#＃~～]|int|ｉｎｔ)"+r+M("9")+"#?|[- ]+"+M("6")+"#|"+o+"(?:,{2}|;)"+r+M("15")+"#?|"+o+"(?:,)+"+r+M("9")+n}var B="["+u+"]{"+i+"}",F="[+＋]{0,1}(?:["+d+"]*["+u+"]){3,}["+d+u+"]*",x=new RegExp("^[+＋]{0,1}(?:["+d+"]*["+u+"]){1,2}$","i"),G=F+"(?:"+k()+")?",j=new RegExp("^"+B+"$|^"+G+"$","i");function K(e){return e.length>=i&&j.test(e)}var $=new RegExp("(?:"+k()+")$","i"),V={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"};function H(e){return V[e]}function W(e){var t="",r=e.split(""),n=Array.isArray(r),o=0;for(r=n?r:r[Symbol.iterator]();;){var a;if(n){if(o>=r.length)break;a=r[o++]}else{if((o=r.next()).done)break;a=o.value}var i=H(a);i&&(t+=i)}return t}function z(e){var t="",r=e.split(""),n=Array.isArray(r),o=0;for(r=n?r:r[Symbol.iterator]();;){var a;if(n){if(o>=r.length)break;a=r[o++]}else{if((o=r.next()).done)break;a=o.value}t+=q(a,t)||""}return t}function q(e,t){if("+"===e){if(t)return;return"+"}return H(e)}function Y(e,t){return Q(e,void 0,t)}function Q(e,t,r){var n=r.type(t),o=n&&n.possibleLengths()||r.possibleLengths();if(!o)return"IS_POSSIBLE";if("FIXED_LINE_OR_MOBILE"===t){if(!r.type("FIXED_LINE"))return Q(e,"MOBILE",r);var a=r.type("MOBILE");a&&(o=function(e,t){var r=e.slice(),n=t,o=Array.isArray(n),a=0;for(n=o?n:n[Symbol.iterator]();;){var i;if(o){if(a>=n.length)break;i=n[a++]}else{if((a=n.next()).done)break;i=a.value}var s=i;e.indexOf(s)<0&&r.push(s)}return r.sort((function(e,t){return e-t}))}(o,a.possibleLengths()))}else if(t&&!n)return"INVALID_LENGTH";var i=e.length,s=o[0];return s===i?"IS_POSSIBLE":s>i?"TOO_SHORT":o[o.length-1]<i?"TOO_LONG":o.indexOf(i,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function Z(e,t,r){if(void 0===t&&(t={}),r=new _(r),t.v2){if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");r.selectNumberingPlan(e.countryCallingCode)}else{if(!e.phone)return!1;if(e.country){if(!r.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));r.country(e.country)}else{if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");r.selectNumberingPlan(e.countryCallingCode)}}if(r.possibleLengths())return X(e.phone||e.nationalNumber,r);if(e.countryCallingCode&&r.isNonGeographicCallingCode(e.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function X(e,t){return"IS_POSSIBLE"===Y(e,t)}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ee(e){var t,r,n=(e=e.replace(/^tel:/,"tel=")).split(";"),o=Array.isArray(n),a=0;for(n=o?n:n[Symbol.iterator]();;){var i;if(o){if(a>=n.length)break;i=n[a++]}else{if((a=n.next()).done)break;i=a.value}var s=J(i.split("="),2),c=s[0],u=s[1];switch(c){case"tel":t=u;break;case"ext":r=u;break;case"phone-context":"+"===u[0]&&(t=u+t)}}if(!K(t))return{};var l={number:t};return r&&(l.ext=r),l}function te(e){var t=e.number,r=e.ext;if(!t)return"";if("+"!==t[0])throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(t).concat(r?";ext="+r:"")}function re(e,t){return e=e||"",new RegExp("^(?:"+t+")$").test(e)}var ne=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function oe(e,t,r){if(t=t||{},e.country){(r=new _(r)).selectNumberingPlan(e.country,e.countryCallingCode);var n=t.v2?e.nationalNumber:e.phone;if(re(n,r.nationalNumberPattern())){if(ae(n,"FIXED_LINE",r))return r.type("MOBILE")&&""===r.type("MOBILE").pattern()?"FIXED_LINE_OR_MOBILE":r.type("MOBILE")?ae(n,"MOBILE",r)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE":"FIXED_LINE_OR_MOBILE";for(var o=0,a=ne;o<a.length;o++){var i=a[o];if(ae(n,i,r))return i}}}}function ae(e,t,r){return!(!(t=r.type(t))||!t.pattern())&&!(t.possibleLengths()&&t.possibleLengths().indexOf(e.length)<0)&&re(e,t.pattern())}function ie(e,t,r){return t=t||{},r=new _(r),!!e.country&&(r.selectNumberingPlan(e.country,e.countryCallingCode),r.hasTypes()?void 0!==oe(e,t,r.metadata):re(t.v2?e.nationalNumber:e.phone,r.nationalNumberPattern()))}function se(e){return e.replace(new RegExp("[".concat(d,"]+"),"g")," ").trim()}var ce=/(\$\d)/;function ue(e,t,r){var n=r.useInternationalFormat,o=r.withNationalPrefix,a=(r.carrierCode,r.metadata,e.replace(new RegExp(t.pattern()),n?t.internationalFormat():o&&t.nationalPrefixFormattingRule()?t.format().replace(ce,t.nationalPrefixFormattingRule()):t.format()));return n?se(a):a}var le=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pe={formatExtension:function(e,t,r){return"".concat(e).concat(r.ext()).concat(t)}};function fe(e,t,r,n){if(r=r?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){de(e,t,r[t])}))}return e}({},pe,r):pe,n=new _(n),e.country&&"001"!==e.country){if(!n.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));n.country(e.country)}else{if(!e.countryCallingCode)return e.phone||"";n.selectNumberingPlan(e.countryCallingCode)}var o,a=n.countryCallingCode(),i=r.v2?e.nationalNumber:e.phone;switch(t){case"NATIONAL":return i?me(o=ge(i,e.carrierCode,"NATIONAL",n,r),e.ext,n,r.formatExtension):"";case"INTERNATIONAL":return i?(o=ge(i,null,"INTERNATIONAL",n,r),me(o="+".concat(a," ").concat(o),e.ext,n,r.formatExtension)):"+".concat(a);case"E.164":return"+".concat(a).concat(i);case"RFC3966":return te({number:"+".concat(a).concat(i),ext:e.ext});case"IDD":if(!r.fromCountry)return;var s=function(e,t,r,n,o){if(N(n,o.metadata)===r){var a=ge(e,t,"NATIONAL",o);return"1"===r?r+" "+a:a}var i=function(e,t,r){var n=new _(r);return n.selectNumberingPlan(e,void 0),n.defaultIDDPrefix()?n.defaultIDDPrefix():le.test(n.IDDPrefix())?n.IDDPrefix():void 0}(n,0,o.metadata);if(i)return"".concat(i," ").concat(r," ").concat(ge(e,null,"INTERNATIONAL",o))}(i,e.carrierCode,a,r.fromCountry,n);return me(s,e.ext,n,r.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(t,'"'))}}function ge(e,t,r,n,o){var a=function(e,t){var r=e,n=Array.isArray(r),o=0;for(r=n?r:r[Symbol.iterator]();;){var a;if(n){if(o>=r.length)break;a=r[o++]}else{if((o=r.next()).done)break;a=o.value}var i=a;if(i.leadingDigitsPatterns().length>0){var s=i.leadingDigitsPatterns()[i.leadingDigitsPatterns().length-1];if(0!==t.search(s))continue}if(re(t,i.pattern()))return i}}(n.formats(),e);return a?ue(e,a,{useInternationalFormat:"INTERNATIONAL"===r,withNationalPrefix:!a.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!o||!1!==o.nationalPrefix,carrierCode:t,metadata:n}):e}function me(e,t,r,n){return t?n(e,t,r):e}function he(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Se=function(){function e(t,r,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new TypeError("`country` or `countryCallingCode` not passed");if(!r)throw new TypeError("`nationalNumber` not passed");if(!n)throw new TypeError("`metadata` not passed");var o=new _(n);ve(t)&&(this.country=t,o.country(t),t=o.countryCallingCode()),this.countryCallingCode=t,this.nationalNumber=r,this.number="+"+this.countryCallingCode+this.nationalNumber,this.metadata=n}var t,r;return t=e,r=[{key:"setExt",value:function(e){this.ext=e}},{key:"isPossible",value:function(){return Z(this,{v2:!0},this.metadata)}},{key:"isValid",value:function(){return ie(this,{v2:!0},this.metadata)}},{key:"isNonGeographic",value:function(){return new _(this.metadata).isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(e){return this.number===e.number&&this.ext===e.ext}},{key:"getType",value:function(){return oe(this,{v2:!0},this.metadata)}},{key:"format",value:function(e,t){return fe(this,e,t?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){he(e,t,r[t])}))}return e}({},t,{v2:!0}):{v2:!0},this.metadata)}},{key:"formatNational",value:function(e){return this.format("NATIONAL",e)}},{key:"formatInternational",value:function(e){return this.format("INTERNATIONAL",e)}},{key:"getURI",value:function(e){return this.format("RFC3966",e)}}],r&&ye(t.prototype,r),e}(),ve=function(e){return/^[A-Z]{2}$/.test(e)},Ee=new RegExp("(["+u+"])");function Ae(e,t,r,n){if(t){var o=new _(n);o.selectNumberingPlan(t,r);var a=new RegExp(o.IDDPrefix());if(0===e.search(a)){var i=(e=e.slice(e.match(a)[0].length)).match(Ee);if(!(i&&null!=i[1]&&i[1].length>0&&"0"===i[1]))return e}}}function _e(e,t){if(e&&t.numberingPlan.nationalPrefixForParsing()){var r=new RegExp("^(?:"+t.numberingPlan.nationalPrefixForParsing()+")"),n=r.exec(e);if(n){var o,a,i,s=n.length-1,c=s>0&&n[s];if(t.nationalPrefixTransformRule()&&c)o=e.replace(r,t.nationalPrefixTransformRule()),s>1&&(a=n[1]);else{var u=n[0];o=e.slice(u.length),c&&(a=n[1])}if(c){var l=e.indexOf(n[1]);e.slice(0,l)===t.numberingPlan.nationalPrefix()&&(i=t.numberingPlan.nationalPrefix())}else i=n[0];return{nationalNumber:o,nationalPrefix:i,carrierCode:a}}}return{nationalNumber:e}}function be(e,t){var r=_e(e,t),n=r.nationalNumber,o=r.carrierCode;if(!function(e,t,r){return!(re(e,r.nationalNumberPattern())&&!re(t,r.nationalNumberPattern()))}(e,n,t))return{nationalNumber:e};if(e.length!==n.length+(o?o.length:0)&&t.possibleLengths())switch(Y(n,t)){case"TOO_SHORT":case"INVALID_LENGTH":return{nationalNumber:e}}return{nationalNumber:n,carrierCode:o}}function Te(e,t,r,n){var o=t?N(t,n):r;if(0===e.indexOf(o)){(n=new _(n)).selectNumberingPlan(t,r);var a=e.slice(o.length),i=be(a,n).nationalNumber,s=be(e,n).nationalNumber;if(!re(s,n.nationalNumberPattern())&&re(i,n.nationalNumberPattern())||"TOO_LONG"===Y(s,n))return{countryCallingCode:o,number:a}}return{number:e}}function Ie(e,t,r,n){if(!e)return{};if("+"!==e[0]){var o=Ae(e,t,r,n);if(!o||o===e){if(t||r){var a=Te(e,t,r,n),i=a.countryCallingCode,s=a.number;if(i)return{countryCallingCode:i,number:s}}return{number:e}}e="+"+o}if("0"===e[1])return{};n=new _(n);for(var u=2;u-1<=c&&u<=e.length;){var l=e.slice(1,u);if(n.hasCallingCode(l))return n.selectNumberingPlan(l),{countryCallingCode:l,number:e.slice(u)};u++}return{}}var we=!1;function Ce(e,t,r){if(we&&r.isNonGeographicCallingCode(e))return"001";var n=r.getCountryCodesForCallingCode(e);return n?1===n.length?n[0]:function(e,t,r){r=new _(r);var n=e,o=Array.isArray(n),a=0;for(n=o?n:n[Symbol.iterator]();;){var i;if(o){if(a>=n.length)break;i=n[a++]}else{if((a=n.next()).done)break;i=a.value}var s=i;if(r.country(s),r.leadingDigits()){if(t&&0===t.search(r.leadingDigits()))return s}else if(oe({phone:t,country:s},void 0,r.metadata))return s}}(n,t,r.metadata):void 0}var Oe=250,De=new RegExp("[+＋"+u+"]"),Pe=new RegExp("[^"+u+"#]+$"),Ne=!1;function Re(e,t,r){if(t=t||{},r=new _(r),t.defaultCountry&&!r.hasCountry(t.defaultCountry)){if(t.v2)throw new p("INVALID_COUNTRY");throw new Error("Unknown country: ".concat(t.defaultCountry))}var n=function(e,t,r){if(e&&0===e.indexOf("tel:"))return ee(e);var n=function(e,t,r){if(e)if(e.length>Oe){if(r)throw new p("TOO_LONG")}else{if(!1===t)return e;var n=e.search(De);if(!(n<0))return e.slice(n).replace(Pe,"")}}(e,r,t);if(!n)return{};if(!K(n))return function(e){return x.test(e)}(n)?{error:"TOO_SHORT"}:{};var o=function(e){var t=e.search($);if(t<0)return{};for(var r=e.slice(0,t),n=e.match($),o=1;o<n.length;){if(n[o])return{number:r,ext:n[o]};o++}}(n);return o.ext?o:{number:n}}(e,t.v2,t.extract),o=n.number,a=n.ext,c=n.error;if(!o){if(t.v2){if("TOO_SHORT"===c)throw new p("TOO_SHORT");throw new p("NOT_A_NUMBER")}return{}}var u=function(e,t,r,n){var o,a=Ie(z(e),t,r,n.metadata),i=a.countryCallingCode,s=a.number;if(i)n.selectNumberingPlan(i);else{if(!s||!t&&!r)return{};n.selectNumberingPlan(t,r),t?o=t:Ne&&n.isNonGeographicCallingCode(r)&&(o="001"),i=r||N(t,n.metadata)}if(!s)return{countryCallingCode:i};var c=be(z(s),n),u=c.nationalNumber,l=c.carrierCode,d=Ce(i,u,n);return d&&(o=d,"001"===d||n.country(o)),{country:o,countryCallingCode:i,nationalNumber:u,carrierCode:l}}(o,t.defaultCountry,t.defaultCallingCode,r),l=u.country,d=u.nationalNumber,f=u.countryCallingCode,g=u.carrierCode;if(!r.hasSelectedNumberingPlan()){if(t.v2)throw new p("INVALID_COUNTRY");return{}}if(!d||d.length<i){if(t.v2)throw new p("TOO_SHORT");return{}}if(d.length>s){if(t.v2)throw new p("TOO_LONG");return{}}if(t.v2){var m=new Se(f,d,r.metadata);return l&&(m.country=l),g&&(m.carrierCode=g),a&&(m.ext=a),m}var h=!!(t.extended?r.hasSelectedNumberingPlan():l)&&re(d,r.nationalNumberPattern());return t.extended?{country:l,countryCallingCode:f,carrierCode:g,valid:h,possible:!!h||!(!0!==t.extended||!r.possibleLengths()||!X(d,r)),phone:d,ext:a}:h?function(e,t,r){var n={country:e,phone:t};return r&&(n.ext=r),n}(l,d,a):{}}function Ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Le(e,t,r){return Re(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ue(e,t,r[t])}))}return e}({},t,{v2:!0}),r)}function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Be(){var e=Fe(arguments);return Le(e.text,e.options,e.metadata)}function Fe(e){var t,r,n,o=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(Array.prototype.slice.call(e),4),a=o[0],i=o[1],s=o[2],c=o[3];if("string"!=typeof a)throw new TypeError("A text for parsing must be a string.");if(t=a,i&&"string"!=typeof i){if(!xe(i))throw new Error("Invalid second argument: ".concat(i));s?(r=i,n=s):n=i}else c?(r=s,n=c):(r=void 0,n=s),i&&(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ke(e,t,r[t])}))}return e}({defaultCountry:i},r));return{text:t,options:r,metadata:n}}var xe=function(e){return"object"===Me(e)};function Ge(){return a(Be,arguments)}function je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ke(e,t,r){t&&t.defaultCountry&&!R(t.defaultCountry,r)&&(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){je(e,t,r[t])}))}return e}({},t,{defaultCountry:void 0}));try{return Le(e,t,r)}catch(e){if(!(e instanceof p))throw e}}function $e(){var e=Fe(arguments);return Ke(e.text,e.options,e.metadata)}function Ve(){return a($e,arguments)}function He(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function We(){var e=Fe(arguments),t=e.text,r=e.options,n=e.metadata;r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){He(e,t,r[t])}))}return e}({},r,{extract:!1});var o=Ke(t,r,n);return o&&o.isValid()||!1}function ze(){return a(We,arguments)}function qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ye(){var e=Fe(arguments),t=e.text,r=e.options,n=e.metadata;r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){qe(e,t,r[t])}))}return e}({},r,{extract:!1});var o=Ke(t,r,n);return o&&o.isPossible()||!1}function Qe(){return a(Ye,arguments)}function Ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xe(){var e=Fe(arguments),t=e.text,r=e.options,n=e.metadata;r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ze(e,t,r[t])}))}return e}({},r,{extract:!1});try{var o=Le(t,r,n);(n=new _(n)).selectNumberingPlan(o.countryCallingCode);var a=Y(o.nationalNumber,n);if("IS_POSSIBLE"!==a)return a}catch(e){if(e instanceof p)return e.message;throw e}}function Je(){return a(Xe,arguments)}function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var rt=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;tt(this,e),this.key=t,this.value=r,this.next=n,this.prev=o},nt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;tt(this,e),this.size=0,this.limit=t,this.head=null,this.tail=null,this.cache={}}var t,r;return t=e,(r=[{key:"put",value:function(e,t){if(this.ensureLimit(),this.head){var r=new rt(e,t,this.head);this.head.prev=r,this.head=r}else this.head=this.tail=new rt(e,t);this.cache[e]=this.head,this.size++}},{key:"get",value:function(e){if(this.cache[e]){var t=this.cache[e].value;return this.remove(e),this.put(e,t),t}console.log("Item not available in cache for key ".concat(e))}},{key:"ensureLimit",value:function(){this.size===this.limit&&this.remove(this.tail.key)}},{key:"remove",value:function(e){var t=this.cache[e];null!==t.prev?t.prev.next=t.next:this.head=t.next,null!==t.next?t.next.prev=t.prev:this.tail=t.prev,delete this.cache[e],this.size--}},{key:"clear",value:function(){this.head=null,this.tail=null,this.size=0,this.cache={}}}])&&et(t.prototype,r),e}();function ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var at=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache=new nt(t)}var t,r;return t=e,(r=[{key:"getPatternForRegExp",value:function(e){var t=this.cache.get(e);return t||(t=new RegExp("^"+e),this.cache.put(e,t)),t}}])&&ot(t.prototype,r),e}();function it(e,t){if(e<0||t<=0||t<e)throw new TypeError;return"{".concat(e,",").concat(t,"}")}function st(e,t){var r=t.search(e);return r>=0?t.slice(0,r):t}var ct="   ᠎ - \u2028\u2029  　",ut="[".concat(ct,"]"),lt="[^".concat(ct,"]"),dt="[".concat("0-9٠-٩۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹０-９","]"),pt="A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",ft="[".concat(pt,"]"),gt=new RegExp(ft),mt="[".concat("$¢-¥֏؋৲৳৻૱௹฿៛₠-₹꠸﷼﹩＄￠￡￥￦","]"),ht=new RegExp(mt),yt="[".concat("̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣤ-ࣾऀ-ंऺ़ु-ै्॑-ॗॢॣঁ়ু-ৄ্ৢৣਁਂ਼ੁੂੇੈੋ-੍ੑੰੱੵઁં઼ુ-ૅેૈ્ૢૣଁ଼ିୁ-ୄ୍ୖୢୣஂீ்ా-ీె-ైొ-్ౕౖౢౣ಼ಿೆೌ್ೢೣു-ൄ്ൢൣ්ි-ුූัิ-ฺ็-๎ັິ-ູົຼ່-ໍཱ༹༘༙༵༷-ཾྀ-྄྆྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္်ွှၘၙၞ-ၠၱ-ၴႂႅႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧᤨᤲ᤹-᤻ᨘᨗᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀᮁᮢ-ᮥᮨᮩ᯦᮫ᯨᯩᯭᯯ-ᯱᰬ-ᰳᰶ᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᷀-ᷦ᷼-᷿⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〭꙯ꙴ-꙽ꚟ꛰꛱ꠂ꠆ꠋꠥꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꨩ-ꨮꨱꨲꨵꨶꩃꩌꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫬꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︦","]"),St=new RegExp(yt),vt=new RegExp("[\0--ÿĀ-ſḀ-ỿƀ-ɏ̀-ͯ]");function Et(e){return!(!gt.test(e)&&!St.test(e))&&vt.test(e)}function At(e){return"%"===e||ht.test(e)}const _t={POSSIBLE:function(e,t,r){return!0},VALID:function(e,t,r){return!(!ie(e,void 0,r)||!bt(e,t.toString(),r))},STRICT_GROUPING:function(e,t,r,n){var o=t.toString();return!(!ie(e,void 0,r)||!bt(e,o,r)||It(e,o)||!Tt(e,r))&&wt(e,t,r,Dt,n)},EXACT_GROUPING:function(e,t,r,n){var o=t.toString();return!(!ie(e,void 0,r)||!bt(e,o,r)||It(e,o)||!Tt(e,r))&&wt(e,t,r,Ot,n)}};function bt(e,t,r){for(var n=0;n<t.length-1;n++){var o=t.charAt(n);if("x"===o||"X"===o){var a=t.charAt(n+1);if("x"===a||"X"===a){if(n++,util.isNumberMatch(e,t.substring(n))!=MatchType.NSN_MATCH)return!1}else if(W(t.substring(n))!==e.ext)return!1}}return!0}function Tt(e,t){if("FROM_DEFAULT_COUNTRY"!=e.getCountryCodeSource())return!0;var r=util.getRegionCodeForCountryCode(e.getCountryCode()),n=util.getMetadataForRegion(r);if(null==n)return!0;var o=util.getNationalSignificantNumber(e),a=util.chooseFormattingPatternForNumber(n.numberFormats(),o);if(a&&a.getNationalPrefixFormattingRule().length>0){if(a.getNationalPrefixOptionalWhenFormatting())return!0;if(PhoneNumberUtil.formattingRuleHasFirstGroupOnly(a.getNationalPrefixFormattingRule()))return!0;var i=PhoneNumberUtil.normalizeDigitsOnly(e.getRawInput());return util.maybeStripNationalPrefixAndCarrierCode(i,n,null)}return!0}function It(e,t){var r=t.indexOf("/");if(r<0)return!1;var n=t.indexOf("/",r+1);return!(n<0)&&(!(e.getCountryCodeSource()===CountryCodeSource.FROM_NUMBER_WITH_PLUS_SIGN||e.getCountryCodeSource()===CountryCodeSource.FROM_NUMBER_WITHOUT_PLUS_SIGN)||PhoneNumberUtil.normalizeDigitsOnly(t.substring(0,r))!==String(e.getCountryCode())||t.slice(n+1).indexOf("/")>=0)}function wt(e,t,r,n,o){var a=normalizeDigits(t,!0),i=Ct(r,e,null);if(n(r,e,a,i))return!0;var s=MetadataManager.getAlternateFormatsForCountry(e.getCountryCode()),c=util.getNationalSignificantNumber(e);if(s){var u=s.numberFormats(),l=Array.isArray(u),d=0;for(u=l?u:u[Symbol.iterator]();;){var p;if(l){if(d>=u.length)break;p=u[d++]}else{if((d=u.next()).done)break;p=d.value}var f=p;if((!(f.leadingDigitsPatterns().length>0)||o.getPatternForRegExp("^"+f.leadingDigitsPatterns()[0]).test(c))&&n(r,e,a,i=Ct(r,e,f)))return!0}}return!1}function Ct(e,t,r){if(r){var n=util.getNationalSignificantNumber(t);return util.formatNsnUsingPattern(n,r,"RFC3966",e).split("-")}var o=formatNumber(t,"RFC3966",e),a=o.indexOf(";");a<0&&(a=o.length);var i=o.indexOf("-")+1;return o.slice(i,a).split("-")}function Ot(e,t,r,n){var o=r.split(NON_DIGITS_PATTERN),a=t.hasExtension()?o.length-2:o.length-1;if(1==o.length||o[a].contains(util.getNationalSignificantNumber(t)))return!0;for(var i,s,c=n.length-1;c>0&&a>=0;){if(o[a]!==n[c])return!1;c--,a--}return a>=0&&(i=o[a],s=n[0],i.indexOf(s,i.length-s.length)===i.length-s.length)}function Dt(e,t,r,n){var o,a=0;if(t.getCountryCodeSource()!==CountryCodeSource.FROM_DEFAULT_COUNTRY){var i=String(t.getCountryCode());a=r.indexOf(i)+i.length()}for(var s=0;s<n.length;s++){if((a=r.indexOf(n[s],a))<0)return!1;if(a+=n[s].length(),0==s&&a<r.length()){var c=util.getRegionCodeForCountryCode(t.getCountryCode());if(null!=util.getNddPrefixForRegion(c,!0)&&Character.isDigit(r.charAt(a)))return o=util.getNationalSignificantNumber(t),0===r.slice(a-n[s].length).indexOf(o)}}return r.slice(a).contains(t.getExtension())}var Pt=/[\\/] *x/;function Nt(e){return st(Pt,e)}var Rt=/(?:(?:[0-3]?\d\/[01]?\d)|(?:[01]?\d\/[0-3]?\d))\/(?:[12]\d)?\d{2}/,Ut=/[12]\d{3}[-/]?[01]\d[-/]?[0-3]\d +[0-2]\d$/,Lt=/^:[0-5]\d/;function Mt(e,t,r){if(Rt.test(e))return!1;if(Ut.test(e)){var n=r.slice(t+e.length);if(Lt.test(n))return!1}return!0}var kt="(\\[（［",Bt=")\\]）］",Ft="[^".concat(kt).concat(Bt,"]"),xt="[".concat(kt).concat("+＋","]"),Gt=new RegExp("^"+xt),jt=it(0,3),Kt=new RegExp("^(?:[(\\[（［])?(?:"+Ft+"+["+Bt+"])?"+Ft+"+(?:["+kt+"]"+Ft+"+["+Bt+"])"+jt+Ft+"*$"),$t=/\d{1,5}-+\d{1,5}\s{0,4}\(\d{1,4}/;function Vt(e,t,r,n){if(Kt.test(e)&&!$t.test(e)){if("POSSIBLE"!==n){if(t>0&&!Gt.test(e)){var o=r[t-1];if(At(o)||Et(o))return!1}var a=t+e.length;if(a<r.length){var i=r[a];if(At(i)||Et(i))return!1}}return!0}}function Ht(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zt=k(),qt=["\\/+(.*)/","(\\([^(]*)","(?:".concat(ut,"-|-").concat(ut,")").concat(ut,"*(.+)"),"[‒-―－]".concat(ut,"*(.+)"),"\\.+".concat(ut,"*([^.]+)"),"".concat(ut,"+(").concat(lt,"+)")],Yt=it(0,2),Qt=it(0,4),Zt=s+c,Xt=it(0,Zt),Jt="[".concat(d,"]")+Qt,er=dt+it(1,Zt),tr="(?:"+xt+Jt+")"+Yt+er+"(?:"+Jt+er+")"+Xt+"(?:"+zt+")?",rr=new RegExp("[^".concat("0-9²³¹¼-¾٠-٩۰-۹߀-߉०-९০-৯৴-৹੦-੯૦-૯୦-୯୲-୷௦-௲౦-౯౸-౾೦-೯൦-൵๐-๙໐-໙༠-༳၀-၉႐-႙፩-፼ᛮ-ᛰ០-៩៰-៹᠐-᠙᥆-᥏᧐-᧚᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙⁰⁴-⁹₀-₉⅐-ↂↅ-↉①-⒛⓪-⓿❶-➓⳽〇〡-〩〸-〺㆒-㆕㈠-㈩㉈-㉏㉑-㉟㊀-㊉㊱-㊿꘠-꘩ꛦ-ꛯ꠰-꠵꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹０-９").concat(pt,"#]+$")),nr=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,or=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Wt(this,"state","NOT_READY"),Wt(this,"searchIndex",0),Wt(this,"regExpCache",new at(32)),r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Wt(e,t,r[t])}))}return e}({},r,{defaultCallingCode:r.defaultCallingCode,defaultCountry:r.defaultCountry&&R(r.defaultCountry,n)?r.defaultCountry:void 0,leniency:r.leniency||r.extended?"POSSIBLE":"VALID",maxTries:r.maxTries||nr}),!r.leniency)throw new TypeError("`Leniency` not supplied");if(r.maxTries<0)throw new TypeError("`maxTries` not supplied");if(this.text=t,this.options=r,this.metadata=n,this.leniency=_t[r.leniency],!this.leniency)throw new TypeError("Unknown leniency: ".concat(r.leniency,"."));this.maxTries=r.maxTries,this.PATTERN=new RegExp(tr,"ig")}var t,r;return t=e,r=[{key:"find",value:function(){for(var e;this.maxTries>0&&null!==(e=this.PATTERN.exec(this.text));){var t=e[0],r=e.index;if(Mt(t=Nt(t),r,this.text)){var n=this.parseAndVerify(t,r,this.text)||this.extractInnerMatch(t,r,this.text);if(n){if(this.options.v2){var o=new Se(n.country||n.countryCallingCode,n.phone,this.metadata);return n.ext&&(o.ext=n.ext),{startsAt:n.startsAt,endsAt:n.endsAt,number:o}}return n}}this.maxTries--}}},{key:"extractInnerMatch",value:function(e,t,r){for(var n=0,o=qt;n<o.length;n++)for(var a=!0,i=void 0,s=new RegExp(o[n],"g");this.maxTries>0&&null!==(i=s.exec(e));){if(a){var c=st(rr,e.slice(0,i.index)),u=this.parseAndVerify(c,t,r);if(u)return u;this.maxTries--,a=!1}var l=st(rr,i[1]),d=e.indexOf(l,i.index),p=this.parseAndVerify(l,t+d,r);if(p)return p;this.maxTries--}}},{key:"parseAndVerify",value:function(e,t,r){if(Vt(e,t,r,this.options.leniency)){var n=Re(e,{extended:!0,defaultCountry:this.options.defaultCountry,defaultCallingCode:this.options.defaultCallingCode},this.metadata);if(n.possible&&this.leniency(n,e,this.metadata,this.regExpCache)){var o={startsAt:t,endsAt:t+e.length,phone:n.phone};return n.country&&"001"!==n.country?o.country=n.country:o.countryCallingCode=n.countryCallingCode,n.ext&&(o.ext=n.ext),o}}}},{key:"hasNext",value:function(){return"NOT_READY"===this.state&&(this.lastMatch=this.find(),this.lastMatch?this.state="READY":this.state="DONE"),"READY"===this.state}},{key:"next",value:function(){if(!this.hasNext())throw new Error("No next element");var e=this.lastMatch;return this.lastMatch=null,this.state="NOT_READY",e}}],r&&Ht(t.prototype,r),e}();function ar(){var e=Fe(arguments);return function(e,t,r){for(var n=new or(e,t,r),o=[];n.hasNext();)o.push(n.next());return o}(e.text,e.options,e.metadata)}function ir(){return a(ar,arguments)}function sr(){var e,t,r,n=Fe(arguments),o=n.text,a=n.options,i=n.metadata,s=new or(o,a,i);return e={},r=function(){return{next:function(){return s.hasNext()?{done:!1,value:s.next()}:{done:!0}}}},(t=Symbol.iterator)in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cr(){return a(sr,arguments)}function ur(e){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(e)}function lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){dr(e,t,r[t])}))}return e}function dr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pr(e,t,r,n){var o=fr(t,r,n);return ar(e,o.options,o.metadata)}function fr(e,t,r){return r?e&&(t=lr({},t,{defaultCountry:e})):t?(r=t,t=e?gr(e)?e:{defaultCountry:e}:void 0):(r=e,t=void 0),{options:lr({},t,{v2:!0}),metadata:r}}var gr=function(e){return"object"===ur(e)};function mr(){return a(pr,arguments)}function hr(e,t,r,n){var o=fr(t,r,n);return sr(e,o.options,o.metadata)}function yr(){return a(hr,arguments)}function Sr(e,t){return or.call(this,e,t,o)}function vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Sr.prototype=Object.create(or.prototype,{}),Sr.prototype.constructor=Sr;var Er=function(){function e(t){var r,n,o=this,a=t.onCountryChange,i=t.onCallingCodeChange;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(e){for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];o[n]=e[n]}},(r="update")in this?Object.defineProperty(this,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[r]=n,this.onCountryChange=a,this.onCallingCodeChange=i}var t,r;return t=e,(r=[{key:"reset",value:function(e,t){this.international=!1,this.IDDPrefix=void 0,this.missingPlus=void 0,this.callingCode=void 0,this.digits="",this.resetNationalSignificantNumber(),this.initCountryAndCallingCode(e,t)}},{key:"resetNationalSignificantNumber",value:function(){this.nationalSignificantNumber=this.getNationalDigits(),this.nationalSignificantNumberMatchesInput=!0,this.nationalPrefix=void 0,this.carrierCode=void 0,this.complexPrefixBeforeNationalSignificantNumber=void 0}},{key:"initCountryAndCallingCode",value:function(e,t){this.setCountry(e),this.setCallingCode(t)}},{key:"setCountry",value:function(e){this.country=e,this.onCountryChange(e)}},{key:"setCallingCode",value:function(e){return this.callingCode=e,this.onCallingCodeChange(this.country,e)}},{key:"startInternationalNumber",value:function(){this.international=!0,this.initCountryAndCallingCode()}},{key:"appendDigits",value:function(e){this.digits+=e}},{key:"appendNationalSignificantNumberDigits",value:function(e){this.nationalSignificantNumber+=e}},{key:"getNationalDigits",value:function(){return this.international?this.digits.slice((this.IDDPrefix?this.IDDPrefix.length:0)+(this.callingCode?this.callingCode.length:0)):this.digits}},{key:"getDigitsWithoutInternationalPrefix",value:function(){return this.international&&this.IDDPrefix?this.digits.slice(this.IDDPrefix.length):this.digits}}])&&vr(t.prototype,r),e}(),Ar="x",_r=new RegExp(Ar);function br(e,t){if(t<1)return"";for(var r="";t>1;)1&t&&(r+=e),t>>=1,e+=e;return r+e}function Tr(e,t){return")"===e[t]&&t++,function(e){for(var t=[],r=0;r<e.length;)"("===e[r]?t.push(r):")"===e[r]&&t.pop(),r++;var n=0,o="";t.push(e.length);for(var a=0,i=t;a<i.length;a++){var s=i[a];o+=e.slice(n,s),n=s+1}return o}(e.slice(0,t))}function Ir(e,t,r){var n=r.metadata,o=r.shouldTryNationalPrefixFormattingRule,a=r.getSeparatorAfterNationalPrefix;if(new RegExp("^(?:".concat(t.pattern(),")$")).test(e.nationalSignificantNumber))return function(e,t,r){var n=r.metadata,o=r.shouldTryNationalPrefixFormattingRule,a=r.getSeparatorAfterNationalPrefix;if(e.nationalSignificantNumber,e.international,e.nationalPrefix,e.carrierCode,o(t)){var i=wr(e,t,{useNationalPrefixFormattingRule:!0,getSeparatorAfterNationalPrefix:a,metadata:n});if(i)return i}return wr(e,t,{useNationalPrefixFormattingRule:!1,getSeparatorAfterNationalPrefix:a,metadata:n})}(e,t,{metadata:n,shouldTryNationalPrefixFormattingRule:o,getSeparatorAfterNationalPrefix:a})}function wr(e,t,r){var n=r.metadata,o=r.useNationalPrefixFormattingRule,a=r.getSeparatorAfterNationalPrefix,i=ue(e.nationalSignificantNumber,t,{carrierCode:e.carrierCode,useInternationalFormat:e.international,withNationalPrefix:o,metadata:n});if(o||(e.nationalPrefix?i=e.nationalPrefix+a(t)+i:e.complexPrefixBeforeNationalSignificantNumber&&(i=e.complexPrefixBeforeNationalSignificantNumber+" "+i)),function(e,t){return W(e)===t.getNationalDigits()}(i,e))return i}function Cr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Or(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dr=br("9",15),Pr=/[- ]/,Nr=new RegExp("^["+d+"]*(\\$\\d["+d+"]*)+$"),Rr=function(){function e(t){var r=this,n=(t.state,t.metadata);!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Or(this,"getSeparatorAfterNationalPrefix",(function(e){return r.isNANP||e&&e.nationalPrefixFormattingRule()&&Pr.test(e.nationalPrefixFormattingRule())?" ":""})),Or(this,"shouldTryNationalPrefixFormattingRule",(function(e,t){var r=t.international,n=t.nationalPrefix;if(e.nationalPrefixFormattingRule()){var o=e.usesNationalPrefix();if(o&&n||!o&&!r)return!0}})),this.metadata=n,this.resetFormat()}var t,r;return t=e,r=[{key:"resetFormat",value:function(){this.chosenFormat=void 0,this.template=void 0,this.nationalNumberTemplate=void 0,this.populatedNationalNumberTemplate=void 0,this.populatedNationalNumberTemplatePosition=-1}},{key:"reset",value:function(e,t){this.resetFormat(),e?(this.isNANP="1"===e.callingCode(),this.matchingFormats=e.formats(),t.nationalSignificantNumber&&this.narrowDownMatchingFormats(t)):(this.isNANP=void 0,this.matchingFormats=[])}},{key:"format",value:function(e,t){var r=this;if(function(e,t){return"IS_POSSIBLE"===Y(e,t)}(t.nationalSignificantNumber,this.metadata)){var n=this.matchingFormats,o=Array.isArray(n),a=0;for(n=o?n:n[Symbol.iterator]();;){var i;if(o){if(a>=n.length)break;i=n[a++]}else{if((a=n.next()).done)break;i=a.value}var s=i,c=Ir(t,s,{metadata:this.metadata,shouldTryNationalPrefixFormattingRule:function(e){return r.shouldTryNationalPrefixFormattingRule(e,{international:t.international,nationalPrefix:t.nationalPrefix})},getSeparatorAfterNationalPrefix:this.getSeparatorAfterNationalPrefix});if(c)return this.resetFormat(),this.chosenFormat=s,this.setNationalNumberTemplate(c.replace(/\d/g,Ar),t),this.populatedNationalNumberTemplate=c,this.populatedNationalNumberTemplatePosition=this.template.lastIndexOf(Ar),c}}return this.formatNationalNumberWithNextDigits(e,t)}},{key:"formatNationalNumberWithNextDigits",value:function(e,t){var r=this.chosenFormat,n=this.chooseFormat(t);if(n)return n===r?this.formatNextNationalNumberDigits(e):this.formatNextNationalNumberDigits(t.getNationalDigits())}},{key:"narrowDownMatchingFormats",value:function(e){var t=this,r=e.nationalSignificantNumber,n=e.nationalPrefix,o=e.international,a=r,i=a.length-3;i<0&&(i=0),this.matchingFormats=this.matchingFormats.filter((function(e){return t.formatSuits(e,o,n)&&t.formatMatches(e,a,i)})),this.chosenFormat&&-1===this.matchingFormats.indexOf(this.chosenFormat)&&this.resetFormat()}},{key:"formatSuits",value:function(e,t,r){return!(r&&!e.usesNationalPrefix()&&!e.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!t&&!r&&e.nationalPrefixIsMandatoryWhenFormattingInNationalFormat())}},{key:"formatMatches",value:function(e,t,r){var n=e.leadingDigitsPatterns().length;if(0===n)return!0;if(t.length<3)return!0;r=Math.min(r,n-1);var o=e.leadingDigitsPatterns()[r];return new RegExp("^(".concat(o,")")).test(t)}},{key:"getFormatFormat",value:function(e,t){return t?e.internationalFormat():e.format()}},{key:"chooseFormat",value:function(e){var t=this,r=function(){if(o){if(a>=n.length)return"break";i=n[a++]}else{if((a=n.next()).done)return"break";i=a.value}var r=i;return t.chosenFormat===r?"break":Nr.test(t.getFormatFormat(r,e.international))?t.createTemplateForFormat(r,e)?(t.chosenFormat=r,"break"):(t.matchingFormats=t.matchingFormats.filter((function(e){return e!==r})),"continue"):"continue"},n=this.matchingFormats.slice(),o=Array.isArray(n),a=0;e:for(n=o?n:n[Symbol.iterator]();;){var i;switch(r()){case"break":break e;case"continue":continue}}return this.chosenFormat||this.resetFormat(),this.chosenFormat}},{key:"createTemplateForFormat",value:function(e,t){if(!(e.pattern().indexOf("|")>=0)){var r=this.getTemplateForFormat(e,t);return r?(this.setNationalNumberTemplate(r,t),!0):void 0}}},{key:"getInternationalPrefixBeforeCountryCallingCode",value:function(e,t){var r=e.IDDPrefix,n=e.missingPlus;return r?t&&!1===t.spacing?r:r+" ":n?"":"+"}},{key:"getTemplate",value:function(e){if(this.template){for(var t=-1,r=0,n=e.international?this.getInternationalPrefixBeforeCountryCallingCode(e,{spacing:!1}):"";r<n.length+e.getDigitsWithoutInternationalPrefix().length;)t=this.template.indexOf(Ar,t+1),r++;return Tr(this.template,t+1)}}},{key:"setNationalNumberTemplate",value:function(e,t){this.nationalNumberTemplate=e,this.populatedNationalNumberTemplate=e,this.populatedNationalNumberTemplatePosition=-1,t.international?this.template=this.getInternationalPrefixBeforeCountryCallingCode(t).replace(/[\d\+]/g,Ar)+br(Ar,t.callingCode.length)+" "+e:this.template=e}},{key:"getTemplateForFormat",value:function(e,t){var r=t.nationalSignificantNumber,n=t.international,o=t.nationalPrefix,a=t.complexPrefixBeforeNationalSignificantNumber,i=e.pattern();i=i.replace(/\[([^\[\]])*\]/g,"\\d").replace(/\d(?=[^,}][^,}])/g,"\\d");var s=Dr.match(i)[0];if(!(r.length>s.length)){var c=new RegExp("^"+i+"$"),u=r.replace(/\d/g,"9");c.test(u)&&(s=u);var l,d=this.getFormatFormat(e,n);if(this.shouldTryNationalPrefixFormattingRule(e,{international:n,nationalPrefix:o})){var p=d.replace(ce,e.nationalPrefixFormattingRule());if(W(e.nationalPrefixFormattingRule())===(o||"")+W("$1")&&(d=p,l=!0,o))for(var f=o.length;f>0;)d=d.replace(/\d/,Ar),f--}var g=s.replace(new RegExp(i),d).replace(new RegExp("9","g"),Ar);return l||(a?g=br(Ar,a.length)+" "+g:o&&(g=br(Ar,o.length)+this.getSeparatorAfterNationalPrefix(e)+g)),n&&(g=se(g)),g}}},{key:"formatNextNationalNumberDigits",value:function(e){var t=function(e,t,r){var n=r.split(""),o=Array.isArray(n),a=0;for(n=o?n:n[Symbol.iterator]();;){var i;if(o){if(a>=n.length)break;i=n[a++]}else{if((a=n.next()).done)break;i=a.value}var s=i;if(e.slice(t+1).search(_r)<0)return;t=e.search(_r),e=e.replace(_r,s)}return[e,t]}(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition,e);if(t)return this.populatedNationalNumberTemplate=t[0],this.populatedNationalNumberTemplatePosition=t[1],Tr(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition+1);this.resetFormat()}}],r&&Cr(t.prototype,r),e}();function Ur(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Lr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Mr=new RegExp("^["+d+u+"]+$","i"),kr="(?:[+＋]["+d+u+"]*|["+d+u+"]+)",Br=new RegExp("[^"+d+u+"]+.*$"),Fr=/[^\d\[\]]/,xr=function(){function e(t){var r=t.defaultCountry,n=t.defaultCallingCode,o=t.metadata,a=t.onNationalSignificantNumberChange;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultCountry=r,this.defaultCallingCode=n,this.metadata=o,this.onNationalSignificantNumberChange=a}var t,r;return t=e,(r=[{key:"input",value:function(e,t){var r,n=function(e){var t=function(e){var t=function(e){var t,r=e.search(kr);if(!(r<0))return"+"===(e=e.slice(r))[0]&&(t=!0,e=e.slice("+".length)),e=e.replace(Br,""),t&&(e="+"+e),e}(e)||"";return"+"===t[0]?[t.slice("+".length),!0]:[t]}(e),r=Ur(t,2),n=r[0],o=r[1];return Mr.test(n)||(n=""),[n,o]}(e),o=Ur(n,2),a=o[0],i=o[1],s=W(a);return i&&(t.digits||(t.startInternationalNumber(),s||(r=!0))),s&&this.inputDigits(s,t),{digits:s,justLeadingPlus:r}}},{key:"inputDigits",value:function(e,t){var r=t.digits,n=r.length<3&&r.length+e.length>=3;if(t.appendDigits(e),n&&this.extractIddPrefix(t),this.isWaitingForCountryCallingCode(t)){if(!this.extractCountryCallingCode(t))return}else t.appendNationalSignificantNumberDigits(e);t.international||this.hasExtractedNationalSignificantNumber||this.extractNationalSignificantNumber(t.getNationalDigits(),t.update)}},{key:"isWaitingForCountryCallingCode",value:function(e){var t=e.international,r=e.callingCode;return t&&!r}},{key:"extractCountryCallingCode",value:function(e){var t=Ie("+"+e.getDigitsWithoutInternationalPrefix(),this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),r=t.countryCallingCode,n=t.number;if(r)return e.setCallingCode(r),e.update({nationalSignificantNumber:n}),!0}},{key:"reset",value:function(e){if(e){this.hasSelectedNumberingPlan=!0;var t=e._nationalPrefixForParsing();this.couldPossiblyExtractAnotherNationalSignificantNumber=t&&Fr.test(t)}else this.hasSelectedNumberingPlan=void 0,this.couldPossiblyExtractAnotherNationalSignificantNumber=void 0}},{key:"extractNationalSignificantNumber",value:function(e,t){if(this.hasSelectedNumberingPlan){var r=_e(e,this.metadata),n=r.nationalPrefix,o=r.nationalNumber,a=r.carrierCode;if(o!==e)return this.onExtractedNationalNumber(n,a,o,e,t),!0}}},{key:"extractAnotherNationalSignificantNumber",value:function(e,t,r){if(!this.hasExtractedNationalSignificantNumber)return this.extractNationalSignificantNumber(e,r);if(this.couldPossiblyExtractAnotherNationalSignificantNumber){var n=_e(e,this.metadata),o=n.nationalPrefix,a=n.nationalNumber,i=n.carrierCode;if(a!==t)return this.onExtractedNationalNumber(o,i,a,e,r),!0}}},{key:"onExtractedNationalNumber",value:function(e,t,r,n,o){var a,i,s=n.lastIndexOf(r);if(s>=0&&s===n.length-r.length){i=!0;var c=n.slice(0,s);c!==e&&(a=c)}o({nationalPrefix:e,carrierCode:t,nationalSignificantNumber:r,nationalSignificantNumberMatchesInput:i,complexPrefixBeforeNationalSignificantNumber:a}),this.hasExtractedNationalSignificantNumber=!0,this.onNationalSignificantNumberChange()}},{key:"reExtractNationalSignificantNumber",value:function(e){return!!this.extractAnotherNationalSignificantNumber(e.getNationalDigits(),e.nationalSignificantNumber,e.update)||(this.extractIddPrefix(e)||this.fixMissingPlus(e)?(this.extractCallingCodeAndNationalSignificantNumber(e),!0):void 0)}},{key:"extractIddPrefix",value:function(e){var t=e.international,r=e.IDDPrefix,n=e.digits;if(e.nationalSignificantNumber,!t&&!r){var o=Ae(n,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata);return void 0!==o&&o!==n?(e.update({IDDPrefix:n.slice(0,n.length-o.length)}),this.startInternationalNumber(e),!0):void 0}}},{key:"fixMissingPlus",value:function(e){if(!e.international){var t=Te(e.digits,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),r=t.countryCallingCode;if(t.number,r)return e.update({missingPlus:!0}),this.startInternationalNumber(e),!0}}},{key:"startInternationalNumber",value:function(e){e.startInternationalNumber(),e.nationalSignificantNumber&&(e.resetNationalSignificantNumber(),this.onNationalSignificantNumberChange(),this.hasExtractedNationalSignificantNumber=void 0)}},{key:"extractCallingCodeAndNationalSignificantNumber",value:function(e){this.extractCountryCallingCode(e)&&this.extractNationalSignificantNumber(e.getNationalDigits(),e.update)}}])&&Lr(t.prototype,r),e}();function Gr(e){return Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gr(e)}function jr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Kr=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metadata=new _(r);var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(this.getCountryAndCallingCode(t),2),o=n[0],a=n[1];this.defaultCountry=o,this.defaultCallingCode=a,this.reset()}var t,r;return t=e,(r=[{key:"getCountryAndCallingCode",value:function(e){var t,r;return e&&("object"===Gr(e)?(t=e.defaultCountry,r=e.defaultCallingCode):t=e),t&&!this.metadata.hasCountry(t)&&(t=void 0),[t,r]}},{key:"input",value:function(e){var t=this.parser.input(e,this.state),r=t.digits;if(t.justLeadingPlus)this.formattedOutput="+";else if(r){var n;if(this.determineTheCountryIfNeeded(),this.state.nationalSignificantNumber&&this.formatter.narrowDownMatchingFormats(this.state),this.metadata.hasSelectedNumberingPlan()&&(n=this.formatter.format(r,this.state)),void 0===n&&this.parser.reExtractNationalSignificantNumber(this.state)){this.determineTheCountryIfNeeded();var o=this.state.getNationalDigits();o&&(n=this.formatter.format(o,this.state))}this.formattedOutput=n?this.getFullNumber(n):this.getNonFormattedNumber()}return this.formattedOutput}},{key:"reset",value:function(){var e=this;return this.state=new Er({onCountryChange:function(t){e.country=t},onCallingCodeChange:function(t,r){e.metadata.selectNumberingPlan(t,r),e.formatter.reset(e.metadata.numberingPlan,e.state),e.parser.reset(e.metadata.numberingPlan)}}),this.formatter=new Rr({state:this.state,metadata:this.metadata}),this.parser=new xr({defaultCountry:this.defaultCountry,defaultCallingCode:this.defaultCallingCode,metadata:this.metadata,state:this.state,onNationalSignificantNumberChange:function(){e.determineTheCountryIfNeeded(),e.formatter.reset(e.metadata.numberingPlan,e.state)}}),this.state.reset(this.defaultCountry,this.defaultCallingCode),this.formattedOutput="",this}},{key:"isInternational",value:function(){return this.state.international}},{key:"getCallingCode",value:function(){return this.state.callingCode}},{key:"getCountryCallingCode",value:function(){return this.getCallingCode()}},{key:"getCountry",value:function(){var e=this.state,t=e.digits,r=e.country;if(t)return r}},{key:"determineTheCountryIfNeeded",value:function(){this.state.country&&!this.isCountryCallingCodeAmbiguous()||this.determineTheCountry()}},{key:"getFullNumber",value:function(e){var t=this;if(this.isInternational()){var r=this.state.callingCode;return function(e){return t.formatter.getInternationalPrefixBeforeCountryCallingCode(t.state,{spacing:!!e})+e}(r?e?"".concat(r," ").concat(e):r:"".concat(this.state.getDigitsWithoutInternationalPrefix()))}return e}},{key:"getNonFormattedNationalNumberWithPrefix",value:function(){var e=this.state,t=e.nationalSignificantNumber,r=e.complexPrefixBeforeNationalSignificantNumber,n=e.nationalPrefix,o=t,a=r||n;return a&&(o=a+o),o}},{key:"getNonFormattedNumber",value:function(){var e=this.state.nationalSignificantNumberMatchesInput;return this.getFullNumber(e?this.getNonFormattedNationalNumberWithPrefix():this.state.getNationalDigits())}},{key:"getNonFormattedTemplate",value:function(){var e=this.getNonFormattedNumber();if(e)return e.replace(/[\+\d]/g,Ar)}},{key:"isCountryCallingCodeAmbiguous",value:function(){var e=this.state.callingCode,t=this.metadata.getCountryCodesForCallingCode(e);return t&&t.length>1}},{key:"determineTheCountry",value:function(){this.state.setCountry(Ce(this.isInternational()?this.state.callingCode:this.defaultCallingCode,this.state.nationalSignificantNumber,this.metadata))}},{key:"getNumber",value:function(){var e=this.state,t=e.nationalSignificantNumber,r=e.carrierCode;if(this.isInternational()){if(!this.state.callingCode)return}else if(!this.state.country&&!this.defaultCallingCode)return;if(t){var n=this.getCountry(),o=this.getCountryCallingCode()||this.defaultCallingCode,a=new Se(n||o,t,this.metadata.metadata);return r&&(a.carrierCode=r),a}}},{key:"isPossible",value:function(){var e=this.getNumber();return!!e&&e.isPossible()}},{key:"isValid",value:function(){var e=this.getNumber();return!!e&&e.isValid()}},{key:"getNationalNumber",value:function(){return this.state.nationalSignificantNumber}},{key:"getChars",value:function(){return(this.state.international?"+":"")+this.state.digits}},{key:"getTemplate",value:function(){return this.formatter.getTemplate(this.state)||this.getNonFormattedTemplate()||""}}])&&jr(t.prototype,r),e}();function $r(e){return Kr.call(this,e,o)}function Vr(){return a(R,arguments)}function Hr(e){return new _(e).getCountries()}function Wr(){return a(Hr,arguments)}function zr(){return a(N,arguments)}function qr(){return a(P,arguments)}function Yr(){return _.call(this,o)}function Qr(e,t,r){if(t[e])return new Se(e,t[e],r)}function Zr(){return a(Qr,arguments)}function Xr(e,t,r){return r||(r=t,t=void 0),new Kr(t,r).input(e)}function Jr(){return a(Xr,arguments)}function en(){var e=Fe(arguments);return Re(e.text,e.options,e.metadata)}function tn(){return a(en,arguments)}function rn(e){return rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(e)}function nn(){var e=function(e){var t,r,n,o,a=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(Array.prototype.slice.call(e),5),i=a[0],s=a[1],c=a[2],u=a[3],l=a[4];if("string"==typeof i)if("string"==typeof c)r=c,l?(n=u,o=l):o=u,t=Re(i,{defaultCountry:s,extended:!0},o);else{if("string"!=typeof s)throw new Error("`format` argument not passed to `formatNumber(number, format)`");r=s,u?(n=c,o=u):o=c,t=Re(i,{extended:!0},o)}else{if(!on(i))throw new TypeError("A phone number must either be a string or an object of shape { phone, [country] }.");t=i,r=s,u?(n=c,o=u):o=c}return"International"===r?r="INTERNATIONAL":"National"===r&&(r="NATIONAL"),{input:t,format:r,options:n,metadata:o}}(arguments);return fe(e.input,e.format,e.options,e.metadata)}$r.prototype=Object.create(Kr.prototype,{}),$r.prototype.constructor=$r,Yr.prototype=Object.create(_.prototype,{}),Yr.prototype.constructor=Yr;var on=function(e){return"object"===rn(e)};function an(){return a(nn,arguments)}function sn(e){return sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sn(e)}function cn(){var e=un(arguments);return oe(e.input,e.options,e.metadata)}function un(e){var t,r,n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(Array.prototype.slice.call(e),4),o=n[0],a=n[1],i=n[2],s=n[3],c={};if("string"==typeof o)"object"!==sn(a)?(s?(c=i,r=s):r=i,t=K(o)?Re(o,{defaultCountry:a},r):{}):(i?(c=a,r=i):r=a,t=K(o)?Re(o,void 0,r):{});else{if(!ln(o))throw new TypeError("A phone number must either be a string or an object of shape { phone, [country] }.");t=o,i?(c=a,r=i):r=a}return{input:t,options:c,metadata:r}}var ln=function(e){return"object"===sn(e)};function dn(){return a(cn,arguments)}function pn(){var e=un(arguments);return Z(e.input,e.options,e.metadata)}function fn(){return a(pn,arguments)}function gn(){var e=un(arguments);return ie(e.input,e.options,e.metadata)}function mn(){return a(gn,arguments)}function hn(e,t,r){if("string"!=typeof e)throw new TypeError("number must be a string");if("string"!=typeof t)throw new TypeError("country must be a string");return function(e,t,r,n){return r=r||{},e.country===t&&ie(e,r,n)}(K(e)?Re(e,{defaultCountry:t},r):{},t,void 0,r)}function yn(){return a(hn,arguments)}function Sn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}k();var En=new RegExp("^["+l+"]+"),An=new RegExp("["+d+"]+$"),_n=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),vn(this,"state","NOT_READY"),this.text=t,this.options=r||{},this.metadata=n,this.regexp=new RegExp(G,"ig")}var t,r;return t=e,r=[{key:"find",value:function(){var e=this.regexp.exec(this.text);if(e){var t=e[0],r=e.index;return t=t.replace(En,""),r+=e[0].length-t.length,t=Nt(t=t.replace(An,"")),this.parseCandidate(t,r)||this.find()}}},{key:"parseCandidate",value:function(e,t){if(Mt(e,t,this.text)&&Vt(e,t,this.text,this.options.extended?"POSSIBLE":"VALID")){var r=Re(e,this.options,this.metadata);if(r.phone)return r.startsAt=t,r.endsAt=t+e.length,r}}},{key:"hasNext",value:function(){return"NOT_READY"===this.state&&(this.last_match=this.find(),this.last_match?this.state="READY":this.state="DONE"),"READY"===this.state}},{key:"next",value:function(){if(!this.hasNext())throw new Error("No next element");var e=this.last_match;return this.last_match=null,this.state="NOT_READY",e}}],r&&Sn(t.prototype,r),e}();function bn(){var e=Fe(arguments);return function(e,t,r){void 0===t&&(t={});for(var n=new _n(e,t,r),o=[];n.hasNext();)o.push(n.next());return o}(e.text,e.options,e.metadata)}function Tn(){var e=Fe(arguments);return function(e,t,r){void 0===t&&(t={});var n=new _n(e,t,r);return vn({},Symbol.iterator,(function(){return{next:function(){return n.hasNext()?{done:!1,value:n.next()}:{done:!0}}}}))}(e.text,e.options,e.metadata)}function In(){return a(bn,arguments)}function wn(){return a(Tn,arguments)}function Cn(e,t){_n.call(this,e,t,o)}Cn.prototype=Object.create(_n.prototype,{}),Cn.prototype.constructor=Cn},80022:(e,t,r)=>{e=r.nmd(e);var n="__lodash_hash_undefined__",o=9007199254740991,a="[object Arguments]",i="[object Boolean]",s="[object Date]",c="[object Function]",u="[object GeneratorFunction]",l="[object Map]",d="[object Number]",p="[object Object]",f="[object Promise]",g="[object RegExp]",m="[object Set]",h="[object String]",y="[object Symbol]",S="[object WeakMap]",v="[object ArrayBuffer]",E="[object DataView]",A="[object Float32Array]",_="[object Float64Array]",b="[object Int8Array]",T="[object Int16Array]",I="[object Int32Array]",w="[object Uint8Array]",C="[object Uint8ClampedArray]",O="[object Uint16Array]",D="[object Uint32Array]",P=/\w*$/,N=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,U={};U[a]=U["[object Array]"]=U[v]=U[E]=U[i]=U[s]=U[A]=U[_]=U[b]=U[T]=U[I]=U[l]=U[d]=U[p]=U[g]=U[m]=U[h]=U[y]=U[w]=U[C]=U[O]=U[D]=!0,U["[object Error]"]=U[c]=U[S]=!1;var L="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,M="object"==typeof self&&self&&self.Object===Object&&self,k=L||M||Function("return this")(),B=t&&!t.nodeType&&t,F=B&&e&&!e.nodeType&&e,x=F&&F.exports===B;function G(e,t){return e.set(t[0],t[1]),e}function j(e,t){return e.add(t),e}function K(e,t,r,n){var o=-1,a=e?e.length:0;for(n&&a&&(r=e[++o]);++o<a;)r=t(r,e[o],o,e);return r}function $(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function V(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function H(e,t){return function(r){return e(t(r))}}function W(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var z,q=Array.prototype,Y=Function.prototype,Q=Object.prototype,Z=k["__core-js_shared__"],X=(z=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"",J=Y.toString,ee=Q.hasOwnProperty,te=Q.toString,re=RegExp("^"+J.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=x?k.Buffer:void 0,oe=k.Symbol,ae=k.Uint8Array,ie=H(Object.getPrototypeOf,Object),se=Object.create,ce=Q.propertyIsEnumerable,ue=q.splice,le=Object.getOwnPropertySymbols,de=ne?ne.isBuffer:void 0,pe=H(Object.keys,Object),fe=ke(k,"DataView"),ge=ke(k,"Map"),me=ke(k,"Promise"),he=ke(k,"Set"),ye=ke(k,"WeakMap"),Se=ke(Object,"create"),ve=je(fe),Ee=je(ge),Ae=je(me),_e=je(he),be=je(ye),Te=oe?oe.prototype:void 0,Ie=Te?Te.valueOf:void 0;function we(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ce(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Oe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function De(e){this.__data__=new Ce(e)}function Pe(e,t,r){var n=e[t];ee.call(e,t)&&Ke(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function Ne(e,t){for(var r=e.length;r--;)if(Ke(e[r][0],t))return r;return-1}function Re(e,t,r,n,o,f,S){var N;if(n&&(N=f?n(e,o,f,S):n(e)),void 0!==N)return N;if(!ze(e))return e;var R=$e(e);if(R){if(N=function(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&ee.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!t)return function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(e,N)}else{var L=Fe(e),M=L==c||L==u;if(He(e))return function(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}(e,t);if(L==p||L==a||M&&!f){if($(e))return f?e:{};if(N=function(e){return"function"!=typeof e.constructor||Ge(e)?{}:ze(t=ie(e))?se(t):{};var t}(M?{}:e),!t)return function(e,t){return Le(e,Be(e),t)}(e,function(e,t){return e&&Le(t,qe(t),e)}(N,e))}else{if(!U[L])return f?e:{};N=function(e,t,r,n){var o,a=e.constructor;switch(t){case v:return Ue(e);case i:case s:return new a(+e);case E:return function(e,t){var r=t?Ue(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,n);case A:case _:case b:case T:case I:case w:case C:case O:case D:return function(e,t){var r=t?Ue(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,n);case l:return function(e,t,r){return K(t?r(V(e),!0):V(e),G,new e.constructor)}(e,n,r);case d:case h:return new a(e);case g:return function(e){var t=new e.constructor(e.source,P.exec(e));return t.lastIndex=e.lastIndex,t}(e);case m:return function(e,t,r){return K(t?r(W(e),!0):W(e),j,new e.constructor)}(e,n,r);case y:return o=e,Ie?Object(Ie.call(o)):{}}}(e,L,Re,t)}}S||(S=new De);var k=S.get(e);if(k)return k;if(S.set(e,N),!R)var B=r?function(e){return function(e,t,r){var n=t(e);return $e(e)?n:function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}(n,r(e))}(e,qe,Be)}(e):qe(e);return function(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r););}(B||e,(function(o,a){B&&(o=e[a=o]),Pe(N,a,Re(o,t,r,n,a,e,S))})),N}function Ue(e){var t=new e.constructor(e.byteLength);return new ae(t).set(new ae(e)),t}function Le(e,t,r,n){r||(r={});for(var o=-1,a=t.length;++o<a;){var i=t[o],s=n?n(r[i],e[i],i,r,e):void 0;Pe(r,i,void 0===s?e[i]:s)}return r}function Me(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function ke(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!ze(e)||(t=e,X&&X in t))&&(We(e)||$(e)?re:N).test(je(e));var t}(r)?r:void 0}we.prototype.clear=function(){this.__data__=Se?Se(null):{}},we.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},we.prototype.get=function(e){var t=this.__data__;if(Se){var r=t[e];return r===n?void 0:r}return ee.call(t,e)?t[e]:void 0},we.prototype.has=function(e){var t=this.__data__;return Se?void 0!==t[e]:ee.call(t,e)},we.prototype.set=function(e,t){return this.__data__[e]=Se&&void 0===t?n:t,this},Ce.prototype.clear=function(){this.__data__=[]},Ce.prototype.delete=function(e){var t=this.__data__,r=Ne(t,e);return!(r<0||(r==t.length-1?t.pop():ue.call(t,r,1),0))},Ce.prototype.get=function(e){var t=this.__data__,r=Ne(t,e);return r<0?void 0:t[r][1]},Ce.prototype.has=function(e){return Ne(this.__data__,e)>-1},Ce.prototype.set=function(e,t){var r=this.__data__,n=Ne(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Oe.prototype.clear=function(){this.__data__={hash:new we,map:new(ge||Ce),string:new we}},Oe.prototype.delete=function(e){return Me(this,e).delete(e)},Oe.prototype.get=function(e){return Me(this,e).get(e)},Oe.prototype.has=function(e){return Me(this,e).has(e)},Oe.prototype.set=function(e,t){return Me(this,e).set(e,t),this},De.prototype.clear=function(){this.__data__=new Ce},De.prototype.delete=function(e){return this.__data__.delete(e)},De.prototype.get=function(e){return this.__data__.get(e)},De.prototype.has=function(e){return this.__data__.has(e)},De.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ce){var n=r.__data__;if(!ge||n.length<199)return n.push([e,t]),this;r=this.__data__=new Oe(n)}return r.set(e,t),this};var Be=le?H(le,Object):function(){return[]},Fe=function(e){return te.call(e)};function xe(e,t){return!!(t=t??o)&&("number"==typeof e||R.test(e))&&e>-1&&e%1==0&&e<t}function Ge(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Q)}function je(e){if(null!=e){try{return J.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ke(e,t){return e===t||e!=e&&t!=t}(fe&&Fe(new fe(new ArrayBuffer(1)))!=E||ge&&Fe(new ge)!=l||me&&Fe(me.resolve())!=f||he&&Fe(new he)!=m||ye&&Fe(new ye)!=S)&&(Fe=function(e){var t=te.call(e),r=t==p?e.constructor:void 0,n=r?je(r):void 0;if(n)switch(n){case ve:return E;case Ee:return l;case Ae:return f;case _e:return m;case be:return S}return t});var $e=Array.isArray;function Ve(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!We(e)}var He=de||function(){return!1};function We(e){var t=ze(e)?te.call(e):"";return t==c||t==u}function ze(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function qe(e){return Ve(e)?function(e,t){var r=$e(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Ve(e)}(e)&&ee.call(e,"callee")&&(!ce.call(e,"callee")||te.call(e)==a)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!ee.call(e,i)||o&&("length"==i||xe(i,n))||r.push(i);return r}(e):function(e){if(!Ge(e))return pe(e);var t=[];for(var r in Object(e))ee.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}e.exports=function(e){return Re(e,!0,!0)}},56358:e=>{var t=9007199254740991,r="[object Arguments]",n="[object Function]",o="[object GeneratorFunction]",a=/^(?:0|[1-9]\d*)$/,i=Object.prototype,s=i.hasOwnProperty,c=i.toString,u=i.propertyIsEnumerable;function l(e,r){return!!(r=r??t)&&("number"==typeof e||a.test(e))&&e>-1&&e%1==0&&e<r}var d=Array.isArray;function p(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}(e.length)&&!function(e){var t=f(e)?c.call(e):"";return t==n||t==o}(e)}function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){return p(e)?function(e,t){var n=d(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&p(e)}(e)&&s.call(e,"callee")&&(!u.call(e,"callee")||c.call(e)==r)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],o=n.length,a=!!o;for(var i in e)!t&&!s.call(e,i)||a&&("length"==i||l(i,o))||n.push(i);return n}(e,!0):function(e){if(!f(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t,r,n=(r=(t=e)&&t.constructor,t===("function"==typeof r&&r.prototype||i)),o=[];for(var a in e)("constructor"!=a||!n&&s.call(e,a))&&o.push(a);return o}(e)}function m(e){return e}e.exports=function(e,t){return null==e?e:function(e,t,r){for(var n=-1,o=Object(e),a=r(e),i=a.length;i--;){var s=a[++n];if(!1===t(o[s],s,o))break}return e}(e,"function"==typeof t?t:m,g)}},56325:(e,t,r)=>{var n,o="Expected a function",a="__lodash_hash_undefined__",i=1/0,s="[object Function]",c="[object GeneratorFunction]",u="[object Symbol]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/,p=/^\./,f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,g=/\\(\\)?/g,m=/^\[object .+?Constructor\]$/,h="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,y="object"==typeof self&&self&&self.Object===Object&&self,S=h||y||Function("return this")(),v=Array.prototype,E=Function.prototype,A=Object.prototype,_=S["__core-js_shared__"],b=(n=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",T=E.toString,I=A.hasOwnProperty,w=A.toString,C=RegExp("^"+T.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),O=S.Symbol,D=v.splice,P=x(S,"Map"),N=x(Object,"create"),R=O?O.prototype:void 0,U=R?R.toString:void 0;function L(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function M(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function k(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function B(e,t){for(var r,n,o=e.length;o--;)if((r=e[o][0])===(n=t)||r!=r&&n!=n)return o;return-1}function F(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function x(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!V(e)||b&&b in e)return!1;var t=function(e){var t=V(e)?w.call(e):"";return t==s||t==c}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?C:m;return t.test(function(e){if(null!=e){try{return T.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(r)?r:void 0}L.prototype.clear=function(){this.__data__=N?N(null):{}},L.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},L.prototype.get=function(e){var t=this.__data__;if(N){var r=t[e];return r===a?void 0:r}return I.call(t,e)?t[e]:void 0},L.prototype.has=function(e){var t=this.__data__;return N?void 0!==t[e]:I.call(t,e)},L.prototype.set=function(e,t){return this.__data__[e]=N&&void 0===t?a:t,this},M.prototype.clear=function(){this.__data__=[]},M.prototype.delete=function(e){var t=this.__data__,r=B(t,e);return!(r<0||(r==t.length-1?t.pop():D.call(t,r,1),0))},M.prototype.get=function(e){var t=this.__data__,r=B(t,e);return r<0?void 0:t[r][1]},M.prototype.has=function(e){return B(this.__data__,e)>-1},M.prototype.set=function(e,t){var r=this.__data__,n=B(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},k.prototype.clear=function(){this.__data__={hash:new L,map:new(P||M),string:new L}},k.prototype.delete=function(e){return F(this,e).delete(e)},k.prototype.get=function(e){return F(this,e).get(e)},k.prototype.has=function(e){return F(this,e).has(e)},k.prototype.set=function(e,t){return F(this,e).set(e,t),this};var G=K((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(H(e))return U?U.call(e):"";var t=e+"";return"0"==t&&1/e==-i?"-0":t}(t);var r=[];return p.test(e)&&r.push(""),e.replace(f,(function(e,t,n,o){r.push(n?o.replace(g,"$1"):t||e)})),r}));function j(e){if("string"==typeof e||H(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}function K(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(o);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i),i};return r.cache=new(K.Cache||k),r}K.Cache=k;var $=Array.isArray;function V(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function H(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&w.call(e)==u}e.exports=function(e,t,r){var n=null==e?void 0:function(e,t){var r;t=function(e,t){if($(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!H(e))||d.test(e)||!l.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:$(r=t)?r:G(r);for(var n=0,o=t.length;null!=e&&n<o;)e=e[j(t[n++])];return n&&n==o?e:void 0}(e,t);return void 0===n?r:n}},38582:(e,t,r)=>{e=r.nmd(e);var n,o,a,i=9007199254740991,s="[object Arguments]",c="[object Function]",u="[object GeneratorFunction]",l="[object Map]",d="[object Promise]",p="[object Set]",f="[object WeakMap]",g="[object DataView]",m=/^\[object .+?Constructor\]$/,h="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,y="object"==typeof self&&self&&self.Object===Object&&self,S=h||y||Function("return this")(),v=t&&!t.nodeType&&t,E=v&&e&&!e.nodeType&&e,A=E&&E.exports===v,_=Function.prototype,b=Object.prototype,T=S["__core-js_shared__"],I=(n=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",w=_.toString,C=b.hasOwnProperty,O=b.toString,D=RegExp("^"+w.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=A?S.Buffer:void 0,N=b.propertyIsEnumerable,R=P?P.isBuffer:void 0,U=(o=Object.keys,a=Object,function(e){return o(a(e))}),L=H(S,"DataView"),M=H(S,"Map"),k=H(S,"Promise"),B=H(S,"Set"),F=H(S,"WeakMap"),x=!N.call({valueOf:1},"valueOf"),G=z(L),j=z(M),K=z(k),$=z(B),V=z(F);function H(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!X(e)||function(e){return!!I&&I in e}(e))return!1;var t=Z(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?D:m;return t.test(z(e))}(r)?r:void 0}var W=function(e){return O.call(e)};function z(e){if(null!=e){try{return w.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(L&&W(new L(new ArrayBuffer(1)))!=g||M&&W(new M)!=l||k&&W(k.resolve())!=d||B&&W(new B)!=p||F&&W(new F)!=f)&&(W=function(e){var t=O.call(e),r="[object Object]"==t?e.constructor:void 0,n=r?z(r):void 0;if(n)switch(n){case G:return g;case j:return l;case K:return d;case $:return p;case V:return f}return t});var q=Array.isArray;function Y(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}(e.length)&&!Z(e)}var Q=R||function(){return!1};function Z(e){var t=X(e)?O.call(e):"";return t==c||t==u}function X(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){if(Y(e)&&(q(e)||"string"==typeof e||"function"==typeof e.splice||Q(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Y(e)}(e)&&C.call(e,"callee")&&(!N.call(e,"callee")||O.call(e)==s)}(e)))return!e.length;var t=W(e);if(t==l||t==p)return!e.size;if(x||function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||b)}(e))return!U(e).length;for(var r in e)if(C.call(e,r))return!1;return!0}},86328:(e,t,r)=>{e=r.nmd(e);var n="Expected a function",o="__lodash_hash_undefined__",a=1,i=2,s=1/0,c=9007199254740991,u="[object Arguments]",l="[object Array]",d="[object Boolean]",p="[object Date]",f="[object Error]",g="[object Function]",m="[object GeneratorFunction]",h="[object Map]",y="[object Number]",S="[object Object]",v="[object Promise]",E="[object RegExp]",A="[object Set]",_="[object String]",b="[object Symbol]",T="[object WeakMap]",I="[object ArrayBuffer]",w="[object DataView]",C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,O=/^\w*$/,D=/^\./,P=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,N=/\\(\\)?/g,R=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,L={};L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L[u]=L[l]=L[I]=L[d]=L[w]=L[p]=L[f]=L[g]=L[h]=L[y]=L[S]=L[E]=L[A]=L[_]=L[T]=!1;var M="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,k="object"==typeof self&&self&&self.Object===Object&&self,B=M||k||Function("return this")(),F=t&&!t.nodeType&&t,x=F&&e&&!e.nodeType&&e,G=x&&x.exports===F&&M.process,j=function(){try{return G&&G.binding("util")}catch(e){}}(),K=j&&j.isTypedArray;function $(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function V(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function H(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function W(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function z(e,t){return function(r){return e(t(r))}}function q(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var Y,Q=Array.prototype,Z=Function.prototype,X=Object.prototype,J=B["__core-js_shared__"],ee=(Y=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"",te=Z.toString,re=X.hasOwnProperty,ne=X.toString,oe=RegExp("^"+te.call(re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ae=B.Symbol,ie=B.Uint8Array,se=z(Object.getPrototypeOf,Object),ce=X.propertyIsEnumerable,ue=Q.splice,le=Object.getOwnPropertySymbols,de=z(Object.keys,Object),pe=xe(B,"DataView"),fe=xe(B,"Map"),ge=xe(B,"Promise"),me=xe(B,"Set"),he=xe(B,"WeakMap"),ye=xe(Object,"create"),Se=Qe(pe),ve=Qe(fe),Ee=Qe(ge),Ae=Qe(me),_e=Qe(he),be=ae?ae.prototype:void 0,Te=be?be.valueOf:void 0,Ie=be?be.toString:void 0;function we(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ce(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Oe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function De(e){var t=-1,r=e?e.length:0;for(this.__data__=new Oe;++t<r;)this.add(e[t])}function Pe(e){this.__data__=new Ce(e)}function Ne(e,t){var r=et(e)||Je(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var a in e)!t&&!re.call(e,a)||o&&("length"==a||$e(a,n))||r.push(a);return r}function Re(e,t){for(var r=e.length;r--;)if(Xe(e[r][0],t))return r;return-1}function Ue(e,t){for(var r=0,n=(t=Ve(t,e)?[t]:ke(t)).length;null!=e&&r<n;)e=e[Ye(t[r++])];return r&&r==n?e:void 0}function Le(e,t){return null!=e&&t in Object(e)}function Me(e,t,r,n,o){return e===t||(null==e||null==t||!ot(e)&&!at(t)?e!=e&&t!=t:function(e,t,r,n,o,s){var c=et(e),g=et(t),m=l,v=l;c||(m=(m=Ke(e))==u?S:m),g||(v=(v=Ke(t))==u?S:v);var T=m==S&&!H(e),C=v==S&&!H(t),O=m==v;if(O&&!T)return s||(s=new Pe),c||ct(e)?Be(e,t,r,n,o,s):function(e,t,r,n,o,s,c){switch(r){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case I:return!(e.byteLength!=t.byteLength||!n(new ie(e),new ie(t)));case d:case p:case y:return Xe(+e,+t);case f:return e.name==t.name&&e.message==t.message;case E:case _:return e==t+"";case h:var u=W;case A:var l=s&i;if(u||(u=q),e.size!=t.size&&!l)return!1;var g=c.get(e);if(g)return g==t;s|=a,c.set(e,t);var m=Be(u(e),u(t),n,o,s,c);return c.delete(e),m;case b:if(Te)return Te.call(e)==Te.call(t)}return!1}(e,t,m,r,n,o,s);if(!(o&i)){var D=T&&re.call(e,"__wrapped__"),P=C&&re.call(t,"__wrapped__");if(D||P){var N=D?e.value():e,R=P?t.value():t;return s||(s=new Pe),r(N,R,n,o,s)}}return!!O&&(s||(s=new Pe),function(e,t,r,n,o,a){var s=o&i,c=ut(e),u=c.length;if(u!=ut(t).length&&!s)return!1;for(var l=u;l--;){var d=c[l];if(!(s?d in t:re.call(t,d)))return!1}var p=a.get(e);if(p&&a.get(t))return p==t;var f=!0;a.set(e,t),a.set(t,e);for(var g=s;++l<u;){var m=e[d=c[l]],h=t[d];if(n)var y=s?n(h,m,d,t,e,a):n(m,h,d,e,t,a);if(!(void 0===y?m===h||r(m,h,n,o,a):y)){f=!1;break}g||(g="constructor"==d)}if(f&&!g){var S=e.constructor,v=t.constructor;S==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof S&&S instanceof S&&"function"==typeof v&&v instanceof v||(f=!1)}return a.delete(e),a.delete(t),f}(e,t,r,n,o,s))}(e,t,Me,r,n,o))}function ke(e){return et(e)?e:qe(e)}function Be(e,t,r,n,o,s){var c=o&i,u=e.length,l=t.length;if(u!=l&&!(c&&l>u))return!1;var d=s.get(e);if(d&&s.get(t))return d==t;var p=-1,f=!0,g=o&a?new De:void 0;for(s.set(e,t),s.set(t,e);++p<u;){var m=e[p],h=t[p];if(n)var y=c?n(h,m,p,t,e,s):n(m,h,p,e,t,s);if(void 0!==y){if(y)continue;f=!1;break}if(g){if(!V(t,(function(e,t){if(!g.has(t)&&(m===e||r(m,e,n,o,s)))return g.add(t)}))){f=!1;break}}else if(m!==h&&!r(m,h,n,o,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function Fe(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function xe(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!ot(e)||(t=e,ee&&ee in t))&&(rt(e)||H(e)?oe:R).test(Qe(e));var t}(r)?r:void 0}we.prototype.clear=function(){this.__data__=ye?ye(null):{}},we.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},we.prototype.get=function(e){var t=this.__data__;if(ye){var r=t[e];return r===o?void 0:r}return re.call(t,e)?t[e]:void 0},we.prototype.has=function(e){var t=this.__data__;return ye?void 0!==t[e]:re.call(t,e)},we.prototype.set=function(e,t){return this.__data__[e]=ye&&void 0===t?o:t,this},Ce.prototype.clear=function(){this.__data__=[]},Ce.prototype.delete=function(e){var t=this.__data__,r=Re(t,e);return!(r<0||(r==t.length-1?t.pop():ue.call(t,r,1),0))},Ce.prototype.get=function(e){var t=this.__data__,r=Re(t,e);return r<0?void 0:t[r][1]},Ce.prototype.has=function(e){return Re(this.__data__,e)>-1},Ce.prototype.set=function(e,t){var r=this.__data__,n=Re(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Oe.prototype.clear=function(){this.__data__={hash:new we,map:new(fe||Ce),string:new we}},Oe.prototype.delete=function(e){return Fe(this,e).delete(e)},Oe.prototype.get=function(e){return Fe(this,e).get(e)},Oe.prototype.has=function(e){return Fe(this,e).has(e)},Oe.prototype.set=function(e,t){return Fe(this,e).set(e,t),this},De.prototype.add=De.prototype.push=function(e){return this.__data__.set(e,o),this},De.prototype.has=function(e){return this.__data__.has(e)},Pe.prototype.clear=function(){this.__data__=new Ce},Pe.prototype.delete=function(e){return this.__data__.delete(e)},Pe.prototype.get=function(e){return this.__data__.get(e)},Pe.prototype.has=function(e){return this.__data__.has(e)},Pe.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ce){var n=r.__data__;if(!fe||n.length<199)return n.push([e,t]),this;r=this.__data__=new Oe(n)}return r.set(e,t),this};var Ge=le?z(le,Object):pt,je=le?function(e){for(var t=[];e;)$(t,Ge(e)),e=se(e);return t}:pt,Ke=function(e){return ne.call(e)};function $e(e,t){return!!(t=t??c)&&("number"==typeof e||U.test(e))&&e>-1&&e%1==0&&e<t}function Ve(e,t){if(et(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!it(e))||O.test(e)||!C.test(e)||null!=t&&e in Object(t)}function He(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||X)}function We(e){return e==e&&!ot(e)}function ze(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}(pe&&Ke(new pe(new ArrayBuffer(1)))!=w||fe&&Ke(new fe)!=h||ge&&Ke(ge.resolve())!=v||me&&Ke(new me)!=A||he&&Ke(new he)!=T)&&(Ke=function(e){var t=ne.call(e),r=t==S?e.constructor:void 0,n=r?Qe(r):void 0;if(n)switch(n){case Se:return w;case ve:return h;case Ee:return v;case Ae:return A;case _e:return T}return t});var qe=Ze((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(it(e))return Ie?Ie.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}(t);var r=[];return D.test(e)&&r.push(""),e.replace(P,(function(e,t,n,o){r.push(n?o.replace(N,"$1"):t||e)})),r}));function Ye(e){if("string"==typeof e||it(e))return e;var t=e+"";return"0"==t&&1/e==-s?"-0":t}function Qe(e){if(null!=e){try{return te.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ze(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(n);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i),i};return r.cache=new(Ze.Cache||Oe),r}function Xe(e,t){return e===t||e!=e&&t!=t}function Je(e){return function(e){return at(e)&&tt(e)}(e)&&re.call(e,"callee")&&(!ce.call(e,"callee")||ne.call(e)==u)}Ze.Cache=Oe;var et=Array.isArray;function tt(e){return null!=e&&nt(e.length)&&!rt(e)}function rt(e){var t=ot(e)?ne.call(e):"";return t==g||t==m}function nt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function ot(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function at(e){return!!e&&"object"==typeof e}function it(e){return"symbol"==typeof e||at(e)&&ne.call(e)==b}var st,ct=K?(st=K,function(e){return st(e)}):function(e){return at(e)&&nt(e.length)&&!!L[ne.call(e)]};function ut(e){return tt(e)?Ne(e):function(e){if(!He(e))return de(e);var t=[];for(var r in Object(e))re.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}function lt(e){return tt(e)?Ne(e,!0):function(e){if(!ot(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=He(e),r=[];for(var n in e)("constructor"!=n||!t&&re.call(e,n))&&r.push(n);return r}(e)}function dt(e){return e}function pt(){return[]}e.exports=function(e,t){return null==e?{}:function(e,t,r){for(var n=-1,o=t.length,a={};++n<o;){var i=t[n],s=e[i];r(s,i)&&(a[i]=s)}return a}(e,function(e){return function(e,t,r){var n=t(e);return et(e)?n:$(n,r(e))}(e,lt,je)}(e),function(e){return"function"==typeof e?e:null==e?dt:"object"==typeof e?et(e)?function(e,t){return Ve(e)&&We(t)?ze(Ye(e),t):function(r){var n=function(e,t,r){var n=null==e?void 0:Ue(e,t);return void 0===n?void 0:n}(r,e);return void 0===n&&n===t?function(e,t){return null!=e&&function(e,t,r){for(var n,o=-1,a=(t=Ve(t,e)?[t]:ke(t)).length;++o<a;){var i=Ye(t[o]);if(!(n=null!=e&&r(e,i)))break;e=e[i]}return n||!!(a=e?e.length:0)&&nt(a)&&$e(i,a)&&(et(e)||Je(e))}(e,t,Le)}(r,e):Me(t,n,void 0,a|i)}}(e[0],e[1]):function(e){var t=function(e){for(var t=ut(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,We(o)]}return t}(e);return 1==t.length&&t[0][2]?ze(t[0][0],t[0][1]):function(r){return r===e||function(e,t,r,n){var o=r.length,s=o;if(null==e)return!s;for(e=Object(e);o--;){var c=r[o];if(c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var u=(c=r[o])[0],l=e[u],d=c[1];if(c[2]){if(void 0===l&&!(u in e))return!1}else{var p,f=new Pe;if(!(void 0===p?Me(d,l,n,a|i,f):p))return!1}}return!0}(r,0,t)}}(e):Ve(t=e)?(r=Ye(t),function(e){return null==e?void 0:e[r]}):function(e){return function(t){return Ue(t,e)}}(t);var t,r}(t))}},49345:(e,t,r)=>{var n,o="Expected a function",a="__lodash_hash_undefined__",i=1/0,s=9007199254740991,c="[object Function]",u="[object GeneratorFunction]",l="[object Symbol]",d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,p=/^\w*$/,f=/^\./,g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,m=/\\(\\)?/g,h=/^\[object .+?Constructor\]$/,y=/^(?:0|[1-9]\d*)$/,S="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,v="object"==typeof self&&self&&self.Object===Object&&self,E=S||v||Function("return this")(),A=Array.prototype,_=Function.prototype,b=Object.prototype,T=E["__core-js_shared__"],I=(n=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",w=_.toString,C=b.hasOwnProperty,O=b.toString,D=RegExp("^"+w.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=E.Symbol,N=A.splice,R=K(E,"Map"),U=K(Object,"create"),L=P?P.prototype:void 0,M=L?L.toString:void 0;function k(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function B(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function F(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function x(e,t,r){var n=e[t];C.call(e,t)&&z(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function G(e,t){for(var r=e.length;r--;)if(z(e[r][0],t))return r;return-1}function j(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function K(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!Y(e)||I&&I in e)return!1;var t=function(e){var t=Y(e)?O.call(e):"";return t==c||t==u}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?D:h;return t.test(function(e){if(null!=e){try{return w.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(r)?r:void 0}function $(e,t){return!!(t=t??s)&&("number"==typeof e||y.test(e))&&e>-1&&e%1==0&&e<t}k.prototype.clear=function(){this.__data__=U?U(null):{}},k.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},k.prototype.get=function(e){var t=this.__data__;if(U){var r=t[e];return r===a?void 0:r}return C.call(t,e)?t[e]:void 0},k.prototype.has=function(e){var t=this.__data__;return U?void 0!==t[e]:C.call(t,e)},k.prototype.set=function(e,t){return this.__data__[e]=U&&void 0===t?a:t,this},B.prototype.clear=function(){this.__data__=[]},B.prototype.delete=function(e){var t=this.__data__,r=G(t,e);return!(r<0||(r==t.length-1?t.pop():N.call(t,r,1),0))},B.prototype.get=function(e){var t=this.__data__,r=G(t,e);return r<0?void 0:t[r][1]},B.prototype.has=function(e){return G(this.__data__,e)>-1},B.prototype.set=function(e,t){var r=this.__data__,n=G(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},F.prototype.clear=function(){this.__data__={hash:new k,map:new(R||B),string:new k}},F.prototype.delete=function(e){return j(this,e).delete(e)},F.prototype.get=function(e){return j(this,e).get(e)},F.prototype.has=function(e){return j(this,e).has(e)},F.prototype.set=function(e,t){return j(this,e).set(e,t),this};var V=W((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(Q(e))return M?M.call(e):"";var t=e+"";return"0"==t&&1/e==-i?"-0":t}(t);var r=[];return f.test(e)&&r.push(""),e.replace(g,(function(e,t,n,o){r.push(n?o.replace(m,"$1"):t||e)})),r}));function H(e){if("string"==typeof e||Q(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}function W(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(o);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i),i};return r.cache=new(W.Cache||F),r}function z(e,t){return e===t||e!=e&&t!=t}W.Cache=F;var q=Array.isArray;function Y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Q(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&O.call(e)==l}e.exports=function(e,t,r){return null==e?e:function(e,t,r,n){if(!Y(e))return e;t=function(e,t){if(q(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Q(e))||p.test(e)||!d.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:function(e){return q(e)?e:V(e)}(t);for(var o=-1,a=t.length,i=a-1,s=e;null!=s&&++o<a;){var c=H(t[o]),u=r;if(o!=i){var l=s[c];void 0===(u=n?n(l,c,s):void 0)&&(u=Y(l)?l:$(t[o+1])?[]:{})}x(s,c,u),s=s[c]}return e}(e,t,r)}},72291:(e,t,r)=>{var n,o="Expected a function",a="__lodash_hash_undefined__",i=1/0,s="[object Function]",c="[object GeneratorFunction]",u="[object Symbol]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/,p=/^\./,f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,g=/\\(\\)?/g,m=/^\[object .+?Constructor\]$/,h="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,y="object"==typeof self&&self&&self.Object===Object&&self,S=h||y||Function("return this")(),v=Array.prototype,E=Function.prototype,A=Object.prototype,_=S["__core-js_shared__"],b=(n=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",T=E.toString,I=A.hasOwnProperty,w=A.toString,C=RegExp("^"+T.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),O=S.Symbol,D=v.splice,P=G(S,"Map"),N=G(Object,"create"),R=O?O.prototype:void 0,U=R?R.toString:void 0;function L(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function M(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function k(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function B(e,t){for(var r,n,o=e.length;o--;)if((r=e[o][0])===(n=t)||r!=r&&n!=n)return o;return-1}function F(e){return H(e)?e:K(e)}function x(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function G(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!W(e)||b&&b in e)return!1;var t=function(e){var t=W(e)?w.call(e):"";return t==s||t==c}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?C:m;return t.test(function(e){if(null!=e){try{return T.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(r)?r:void 0}function j(e,t){if(H(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!z(e))||d.test(e)||!l.test(e)||null!=t&&e in Object(t)}L.prototype.clear=function(){this.__data__=N?N(null):{}},L.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},L.prototype.get=function(e){var t=this.__data__;if(N){var r=t[e];return r===a?void 0:r}return I.call(t,e)?t[e]:void 0},L.prototype.has=function(e){var t=this.__data__;return N?void 0!==t[e]:I.call(t,e)},L.prototype.set=function(e,t){return this.__data__[e]=N&&void 0===t?a:t,this},M.prototype.clear=function(){this.__data__=[]},M.prototype.delete=function(e){var t=this.__data__,r=B(t,e);return!(r<0||(r==t.length-1?t.pop():D.call(t,r,1),0))},M.prototype.get=function(e){var t=this.__data__,r=B(t,e);return r<0?void 0:t[r][1]},M.prototype.has=function(e){return B(this.__data__,e)>-1},M.prototype.set=function(e,t){var r=this.__data__,n=B(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},k.prototype.clear=function(){this.__data__={hash:new L,map:new(P||M),string:new L}},k.prototype.delete=function(e){return x(this,e).delete(e)},k.prototype.get=function(e){return x(this,e).get(e)},k.prototype.has=function(e){return x(this,e).has(e)},k.prototype.set=function(e,t){return x(this,e).set(e,t),this};var K=V((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(z(e))return U?U.call(e):"";var t=e+"";return"0"==t&&1/e==-i?"-0":t}(t);var r=[];return p.test(e)&&r.push(""),e.replace(f,(function(e,t,n,o){r.push(n?o.replace(g,"$1"):t||e)})),r}));function $(e){if("string"==typeof e||z(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}function V(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(o);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i),i};return r.cache=new(V.Cache||k),r}V.Cache=k;var H=Array.isArray;function W(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function z(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&w.call(e)==u}e.exports=function(e,t){return null==e||function(e,t){e=function(e,t){return 1==t.length?e:function(e,t){for(var r=0,n=(t=j(t,e)?[t]:F(t)).length;null!=e&&r<n;)e=e[$(t[r++])];return r&&r==n?e:void 0}(e,function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a}(t,0,-1))}(e,t=j(t,e)?[t]:F(t));var r,n,o=$((n=(r=t)?r.length:0)?r[n-1]:void 0);return!(null!=e&&I.call(e,o))||delete e[o]}(e,t)}},28255:(e,t,r)=>{"use strict";var n=r(73656),o=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},a=function(e){var t,r,n=document.createTextNode(""),a=0;return new e((function(){var e;if(t)r&&(t=r.concat(t));else{if(!r)return;t=r}if(r=t,t=null,"function"==typeof r)return e=r,r=null,void e();for(n.data=a=++a%2;r;)e=r.shift(),r.length||(r=null),e()})).observe(n,{characterData:!0}),function(e){o(e),t?"function"==typeof t?t=[t,e]:t.push(e):(t=e,n.data=a=++a%2)}};e.exports=function(){if("object"==typeof n&&n&&"function"==typeof n.nextTick)return n.nextTick;if("function"==typeof queueMicrotask)return function(e){queueMicrotask(o(e))};if("object"==typeof document&&document){if("function"==typeof MutationObserver)return a(MutationObserver);if("function"==typeof WebKitMutationObserver)return a(WebKitMutationObserver)}return"function"==typeof setImmediate?function(e){setImmediate(o(e))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(e){setTimeout(o(e),0)}:null}()},43882:(e,t,r)=>{var n=r(83418);function o(e,t){n.cipher.registerAlgorithm(e,(function(){return new n.aes.Algorithm(e,t)}))}r(58654),r(23392),r(63290),e.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(e,t,r,n){var o=m({key:e,output:r,decrypt:!1,mode:n});return o.start(t),o},n.aes.createEncryptionCipher=function(e,t){return m({key:e,output:null,decrypt:!1,mode:t})},n.aes.startDecrypting=function(e,t,r,n){var o=m({key:e,output:r,decrypt:!0,mode:n});return o.start(t),o},n.aes.createDecryptionCipher=function(e,t){return m({key:e,output:null,decrypt:!0,mode:t})},n.aes.Algorithm=function(e,t){l||p();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return g(r._w,e,t,!1)},decrypt:function(e,t){return g(r._w,e,t,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if("string"!=typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){t=r,r=n.util.createBuffer();for(var o=0;o<t.length;++o)r.putByte(t[o])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){t=r,r=[];var a=t.length();if(16===a||24===a||32===a)for(a>>>=2,o=0;o<a;++o)r.push(t.getInt32())}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var i=this.mode.name,s=-1!==["CFB","OFB","CTR","GCM"].indexOf(i);this._w=f(r,e.decrypt&&!s),this._init=!0}},n.aes._expandKey=function(e,t){return l||p(),f(e,t)},n.aes._updateBlock=g,o("AES-ECB",n.cipher.modes.ecb),o("AES-CBC",n.cipher.modes.cbc),o("AES-CFB",n.cipher.modes.cfb),o("AES-OFB",n.cipher.modes.ofb),o("AES-CTR",n.cipher.modes.ctr),o("AES-GCM",n.cipher.modes.gcm);var a,i,s,c,u,l=!1,d=4;function p(){l=!0,s=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;for(a=new Array(256),i=new Array(256),c=new Array(4),u=new Array(4),t=0;t<4;++t)c[t]=new Array(256),u[t]=new Array(256);var r,n,o,d,p,f,g,m=0,h=0;for(t=0;t<256;++t){d=(d=h^h<<1^h<<2^h<<3^h<<4)>>8^255&d^99,a[m]=d,i[d]=m,f=(p=e[d])<<24^d<<16^d<<8^d^p,g=((r=e[m])^(n=e[r])^(o=e[n]))<<24^(m^o)<<16^(m^n^o)<<8^m^r^o;for(var y=0;y<4;++y)c[y][m]=f,u[y][d]=g,f=f<<24|f>>>8,g=g<<24|g>>>8;0===m?m=h=1:(m=r^e[e[e[r^o]]],h^=e[e[h]])}}function f(e,t){for(var r,n=e.slice(0),o=1,i=n.length,c=d*(i+6+1),l=i;l<c;++l)r=n[l-1],l%i==0?(r=a[r>>>16&255]<<24^a[r>>>8&255]<<16^a[255&r]<<8^a[r>>>24]^s[o]<<24,o++):i>6&&l%i==4&&(r=a[r>>>24]<<24^a[r>>>16&255]<<16^a[r>>>8&255]<<8^a[255&r]),n[l]=n[l-i]^r;if(t){for(var p,f=u[0],g=u[1],m=u[2],h=u[3],y=n.slice(0),S=(l=0,(c=n.length)-d);l<c;l+=d,S-=d)if(0===l||l===c-d)y[l]=n[S],y[l+1]=n[S+3],y[l+2]=n[S+2],y[l+3]=n[S+1];else for(var v=0;v<d;++v)p=n[S+v],y[l+(3&-v)]=f[a[p>>>24]]^g[a[p>>>16&255]]^m[a[p>>>8&255]]^h[a[255&p]];n=y}return n}function g(e,t,r,n){var o,s,l,d,p,f,g,m,h,y,S,v,E=e.length/4-1;n?(o=u[0],s=u[1],l=u[2],d=u[3],p=i):(o=c[0],s=c[1],l=c[2],d=c[3],p=a),f=t[0]^e[0],g=t[n?3:1]^e[1],m=t[2]^e[2],h=t[n?1:3]^e[3];for(var A=3,_=1;_<E;++_)y=o[f>>>24]^s[g>>>16&255]^l[m>>>8&255]^d[255&h]^e[++A],S=o[g>>>24]^s[m>>>16&255]^l[h>>>8&255]^d[255&f]^e[++A],v=o[m>>>24]^s[h>>>16&255]^l[f>>>8&255]^d[255&g]^e[++A],h=o[h>>>24]^s[f>>>16&255]^l[g>>>8&255]^d[255&m]^e[++A],f=y,g=S,m=v;r[0]=p[f>>>24]<<24^p[g>>>16&255]<<16^p[m>>>8&255]<<8^p[255&h]^e[++A],r[n?3:1]=p[g>>>24]<<24^p[m>>>16&255]<<16^p[h>>>8&255]<<8^p[255&f]^e[++A],r[2]=p[m>>>24]<<24^p[h>>>16&255]<<16^p[f>>>8&255]<<8^p[255&g]^e[++A],r[n?1:3]=p[h>>>24]<<24^p[f>>>16&255]<<16^p[g>>>8&255]<<8^p[255&m]^e[++A]}function m(e){var t,r="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),o=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var a=null;r instanceof n.util.ByteBuffer&&(a=r,r={}),(r=r||{}).output=a,r.iv=e,o.call(t,r)},t}},10001:(e,t,r)=>{var n=r(83418);r(63290),r(43793);var o=e.exports=n.asn1=n.asn1||{};function a(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}o.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},o.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},o.create=function(e,t,r,a,i){if(n.util.isArray(a)){for(var s=[],c=0;c<a.length;++c)void 0!==a[c]&&s.push(a[c]);a=s}var u={tagClass:e,type:t,constructed:r,composed:r||n.util.isArray(a),value:a};return i&&"bitStringContents"in i&&(u.bitStringContents=i.bitStringContents,u.original=o.copy(u)),u},o.copy=function(e,t){var r;if(n.util.isArray(e)){r=[];for(var a=0;a<e.length;++a)r.push(o.copy(e[a],t));return r}return"string"==typeof e?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:o.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)},o.equals=function(e,t,r){if(n.util.isArray(e)){if(!n.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var a=0;a<e.length;++a)if(!o.equals(e[a],t[a]))return!1;return!0}if(typeof e!=typeof t)return!1;if("string"==typeof e)return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&o.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i},o.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t};var i=function(e,t){var r=e.getByte();if(t--,128!==r){var n;if(128&r){var o=127&r;a(e,t,o),n=e.getInt(o<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}};function s(e,t,r,n){var c;a(e,t,2);var u=e.getByte();t--;var l=192&u,d=31&u;c=e.length();var p,f,g=i(e,t);if(t-=c-e.length(),void 0!==g&&g>t){if(n.strict){var m=new Error("Too few bytes to read ASN.1 value.");throw m.available=e.length(),m.remaining=t,m.requested=g,m}g=t}var h=32==(32&u);if(h)if(p=[],void 0===g)for(;;){if(a(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}c=e.length(),p.push(s(e,t,r+1,n)),t-=c-e.length()}else for(;g>0;)c=e.length(),p.push(s(e,g,r+1,n)),t-=c-e.length(),g-=c-e.length();if(void 0===p&&l===o.Class.UNIVERSAL&&d===o.Type.BITSTRING&&(f=e.bytes(g)),void 0===p&&n.decodeBitStrings&&l===o.Class.UNIVERSAL&&d===o.Type.BITSTRING&&g>1){var y=e.read,S=t,v=0;if(d===o.Type.BITSTRING&&(a(e,t,1),v=e.getByte(),t--),0===v)try{c=e.length();var E=s(e,t,r+1,{strict:!0,decodeBitStrings:!0}),A=c-e.length();t-=A,d==o.Type.BITSTRING&&A++;var _=E.tagClass;A!==g||_!==o.Class.UNIVERSAL&&_!==o.Class.CONTEXT_SPECIFIC||(p=[E])}catch(e){}void 0===p&&(e.read=y,t=S)}if(void 0===p){if(void 0===g){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");g=t}if(d===o.Type.BMPSTRING)for(p="";g>0;g-=2)a(e,t,2),p+=String.fromCharCode(e.getInt16()),t-=2;else p=e.getBytes(g),t-=g}var b=void 0===f?null:{bitStringContents:f};return o.create(l,d,h,p,b)}o.fromDer=function(e,t){void 0===t&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"==typeof t&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),"string"==typeof e&&(e=n.util.createBuffer(e));var r=e.length(),o=s(e,e.length(),0,t);if(t.parseAllBytes&&0!==e.length()){var a=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw a.byteCount=r,a.remaining=e.length(),a}return o},o.toDer=function(e){var t=n.util.createBuffer(),r=e.tagClass|e.type,a=n.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=o.equals(e,e.original))),i)a.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:a.putByte(0);for(var s=0;s<e.value.length;++s)void 0!==e.value[s]&&a.putBuffer(o.toDer(e.value[s]))}else if(e.type===o.Type.BMPSTRING)for(s=0;s<e.value.length;++s)a.putInt16(e.value.charCodeAt(s));else e.type===o.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0==(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128==(128&e.value.charCodeAt(1)))?a.putBytes(e.value.substr(1)):a.putBytes(e.value);if(t.putByte(r),a.length()<=127)t.putByte(127&a.length());else{var c=a.length(),u="";do{u+=String.fromCharCode(255&c),c>>>=8}while(c>0);for(t.putByte(128|u.length),s=u.length-1;s>=0;--s)t.putByte(u.charCodeAt(s))}return t.putBuffer(a),t},o.oidToDer=function(e){var t,r,o,a,i=e.split("."),s=n.util.createBuffer();s.putByte(40*parseInt(i[0],10)+parseInt(i[1],10));for(var c=2;c<i.length;++c){t=!0,r=[],o=parseInt(i[c],10);do{a=127&o,o>>>=7,t||(a|=128),r.push(a),t=!1}while(o>0);for(var u=r.length-1;u>=0;--u)s.putByte(r[u])}return s},o.derToOid=function(e){var t;"string"==typeof e&&(e=n.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var o=0;e.length()>0;)o<<=7,128&(r=e.getByte())?o+=127&r:(t+="."+(o+r),o=0);return t},o.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,o=parseInt(e.substr(4,2),10),a=parseInt(e.substr(6,2),10),i=parseInt(e.substr(8,2),10),s=0;if(e.length>11){var c=e.charAt(10),u=10;"+"!==c&&"-"!==c&&(s=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(r,n,o),t.setUTCHours(a,i,s,0),u&&("+"===(c=e.charAt(u))||"-"===c)){var l=60*parseInt(e.substr(u+1,2),10)+parseInt(e.substr(u+4,2),10);l*=6e4,"+"===c?t.setTime(+t-l):t.setTime(+t+l)}return t},o.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,o=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),i=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),c=0,u=0,l=!1;"Z"===e.charAt(e.length-1)&&(l=!0);var d=e.length-5,p=e.charAt(d);return"+"!==p&&"-"!==p||(u=60*parseInt(e.substr(d+1,2),10)+parseInt(e.substr(d+4,2),10),u*=6e4,"+"===p&&(u*=-1),l=!0),"."===e.charAt(14)&&(c=1e3*parseFloat(e.substr(14),10)),l?(t.setUTCFullYear(r,n,o),t.setUTCHours(a,i,s,c),t.setTime(+t+u)):(t.setFullYear(r,n,o),t.setHours(a,i,s,c)),t},o.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+"Z"},o.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+"Z"},o.integerToDer=function(e){var t=n.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},o.derToInteger=function(e){"string"==typeof e&&(e=n.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},o.validate=function(e,t,r,a){var i=!1;if(e.tagClass!==t.tagClass&&void 0!==t.tagClass||e.type!==t.type&&void 0!==t.type)a&&(e.tagClass!==t.tagClass&&a.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&a.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||void 0===t.constructed){if(i=!0,t.value&&n.util.isArray(t.value))for(var s=0,c=0;i&&c<t.value.length;++c)i=t.value[c].optional||!1,e.value[s]&&((i=o.validate(e.value[s],t.value[c],r,a))?++s:t.value[c].optional&&(i=!0)),!i&&a&&a.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e))if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{if(0!==e.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else a&&a.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return i};var c=/[^\\u0000-\\u00ff]/;o.prettyPrint=function(e,t,r){var a="";r=r||2,(t=t||0)>0&&(a+="\n");for(var i="",s=0;s<t*r;++s)i+=" ";switch(a+=i+"Tag: ",e.tagClass){case o.Class.UNIVERSAL:a+="Universal:";break;case o.Class.APPLICATION:a+="Application:";break;case o.Class.CONTEXT_SPECIFIC:a+="Context-Specific:";break;case o.Class.PRIVATE:a+="Private:"}if(e.tagClass===o.Class.UNIVERSAL)switch(a+=e.type,e.type){case o.Type.NONE:a+=" (None)";break;case o.Type.BOOLEAN:a+=" (Boolean)";break;case o.Type.INTEGER:a+=" (Integer)";break;case o.Type.BITSTRING:a+=" (Bit string)";break;case o.Type.OCTETSTRING:a+=" (Octet string)";break;case o.Type.NULL:a+=" (Null)";break;case o.Type.OID:a+=" (Object Identifier)";break;case o.Type.ODESC:a+=" (Object Descriptor)";break;case o.Type.EXTERNAL:a+=" (External or Instance of)";break;case o.Type.REAL:a+=" (Real)";break;case o.Type.ENUMERATED:a+=" (Enumerated)";break;case o.Type.EMBEDDED:a+=" (Embedded PDV)";break;case o.Type.UTF8:a+=" (UTF8)";break;case o.Type.ROID:a+=" (Relative Object Identifier)";break;case o.Type.SEQUENCE:a+=" (Sequence)";break;case o.Type.SET:a+=" (Set)";break;case o.Type.PRINTABLESTRING:a+=" (Printable String)";break;case o.Type.IA5String:a+=" (IA5String (ASCII))";break;case o.Type.UTCTIME:a+=" (UTC time)";break;case o.Type.GENERALIZEDTIME:a+=" (Generalized time)";break;case o.Type.BMPSTRING:a+=" (BMP String)"}else a+=e.type;if(a+="\n",a+=i+"Constructed: "+e.constructed+"\n",e.composed){var u=0,l="";for(s=0;s<e.value.length;++s)void 0!==e.value[s]&&(u+=1,l+=o.prettyPrint(e.value[s],t+1,r),s+1<e.value.length&&(l+=","));a+=i+"Sub values: "+u+l}else{if(a+=i+"Value: ",e.type===o.Type.OID){var d=o.derToOid(e.value);a+=d,n.pki&&n.pki.oids&&d in n.pki.oids&&(a+=" ("+n.pki.oids[d]+") ")}if(e.type===o.Type.INTEGER)try{a+=o.derToInteger(e.value)}catch(t){a+="0x"+n.util.bytesToHex(e.value)}else if(e.type===o.Type.BITSTRING){if(e.value.length>1?a+="0x"+n.util.bytesToHex(e.value.slice(1)):a+="(none)",e.value.length>0){var p=e.value.charCodeAt(0);1==p?a+=" (1 unused bit shown)":p>1&&(a+=" ("+p+" unused bits shown)")}}else if(e.type===o.Type.OCTETSTRING)c.test(e.value)||(a+="("+e.value+") "),a+="0x"+n.util.bytesToHex(e.value);else if(e.type===o.Type.UTF8)try{a+=n.util.decodeUtf8(e.value)}catch(t){if("URI malformed"!==t.message)throw t;a+="0x"+n.util.bytesToHex(e.value)+" (malformed UTF8)"}else e.type===o.Type.PRINTABLESTRING||e.type===o.Type.IA5String?a+=e.value:c.test(e.value)?a+="0x"+n.util.bytesToHex(e.value):0===e.value.length?a+="[null]":a+=e.value}return a}},40976:(e,t,r)=>{var n=r(3275).Buffer,o={};e.exports=o;var a={};o.encode=function(e,t,r){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var o=0,a=t.length,i=t.charAt(0),s=[0];for(o=0;o<e.length;++o){for(var c=0,u=e[o];c<s.length;++c)u+=s[c]<<8,s[c]=u%a,u=u/a|0;for(;u>0;)s.push(u%a),u=u/a|0}for(o=0;0===e[o]&&o<e.length-1;++o)n+=i;for(o=s.length-1;o>=0;--o)n+=t[s[o]]}else n=function(e,t){var r=0,n=t.length,o=t.charAt(0),a=[0];for(r=0;r<e.length();++r){for(var i=0,s=e.at(r);i<a.length;++i)s+=a[i]<<8,a[i]=s%n,s=s/n|0;for(;s>0;)a.push(s%n),s=s/n|0}var c="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)c+=o;for(r=a.length-1;r>=0;--r)c+=t[a[r]];return c}(e,t);if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join("\r\n")}return n},o.decode=function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');var r=a[t];if(!r){r=a[t]=[];for(var o=0;o<t.length;++o)r[t.charCodeAt(o)]=o}e=e.replace(/\s/g,"");var i=t.length,s=t.charAt(0),c=[0];for(o=0;o<e.length;o++){var u=r[e.charCodeAt(o)];if(void 0===u)return;for(var l=0,d=u;l<c.length;++l)d+=c[l]*i,c[l]=255&d,d>>=8;for(;d>0;)c.push(255&d),d>>=8}for(var p=0;e[p]===s&&p<e.length-1;++p)c.push(0);return void 0!==n?n.from(c.reverse()):new Uint8Array(c.reverse())}},58654:(e,t,r)=>{var n=r(83418);r(63290),e.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(e,t){var r=e;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},n.cipher.createDecipher=function(e,t){var r=e;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},n.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),n.cipher.algorithms[e]=t},n.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[e]:null};var o=n.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};o.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=e.output||n.util.createBuffer(),this.mode.start(t)},o.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},o.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t)||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}},23392:(e,t,r)=>{var n=r(83418);r(63290),n.cipher=n.cipher||{};var o=e.exports=n.cipher.modes=n.cipher.modes||{};function a(e,t){if("string"==typeof e&&(e=n.util.createBuffer(e)),n.util.isArray(e)&&e.length>4){var r=e;e=n.util.createBuffer();for(var o=0;o<r.length;++o)e.putByte(r[o])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!n.util.isArray(e)){var a=[],i=t/4;for(o=0;o<i;++o)a.push(e.getInt32());e=a}return e}function i(e){e[e.length-1]=e[e.length-1]+1&4294967295}function s(e){return[e/4294967296|0,4294967295&e]}o.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},o.ecb.prototype.start=function(e){},o.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},o.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},o.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},o.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2||(e.truncate(n),0))},o.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},o.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=a(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},o.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},o.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},o.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},o.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2||(e.truncate(n),0))},o.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},o.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=a(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)this._inBlock[o]=e.getInt32()^this._outBlock[o],t.putInt32(this._inBlock[o]);else{var a=(this.blockSize-n)%this.blockSize;for(a>0&&(a=this.blockSize-a),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialBlock[o]=e.getInt32()^this._outBlock[o],this._partialOutput.putInt32(this._partialBlock[o]);if(a>0)e.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)this._inBlock[o]=e.getInt32(),t.putInt32(this._inBlock[o]^this._outBlock[o]);else{var a=(this.blockSize-n)%this.blockSize;for(a>0&&(a=this.blockSize-a),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialBlock[o]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[o]^this._outBlock[o]);if(a>0)e.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},o.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=a(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)t.putInt32(e.getInt32()^this._outBlock[o]),this._inBlock[o]=this._outBlock[o];else{var a=(this.blockSize-n)%this.blockSize;for(a>0&&(a=this.blockSize-a),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(e.getInt32()^this._outBlock[o]);if(a>0)e.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._outBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.ofb.prototype.decrypt=o.ofb.prototype.encrypt,o.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},o.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=a(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)t.putInt32(e.getInt32()^this._outBlock[o]);else{var a=(this.blockSize-n)%this.blockSize;for(a>0&&(a=this.blockSize-a),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(e.getInt32()^this._outBlock[o]);if(a>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}i(this._inBlock)},o.ctr.prototype.decrypt=o.ctr.prototype.encrypt,o.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},o.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,r=n.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?n.util.createBuffer(e.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=n.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var o=r.length();if(12===o)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(s(8*o)))}this._inBlock=this._j0.slice(0),i(this._inBlock),this._partialBytes=0,t=n.util.createBuffer(t),this._aDataLength=s(8*t.length());var a=t.length()%this.blockSize;for(a&&t.fillWithByte(0,this.blockSize-a),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},o.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var o=0;o<this._ints;++o)t.putInt32(this._outBlock[o]^=e.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-n)%this.blockSize;for(a>0&&(a=this.blockSize-a),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(e.getInt32()^this._outBlock[o]);if(a<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),i(this._inBlock)},o.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),i(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)t.putInt32(this._outBlock[o]^this._hashBlock[o]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},o.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=n.util.createBuffer();var o=this._aDataLength.concat(s(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,o);var a=[];this.cipher.encrypt(this._j0,a);for(var i=0;i<this._ints;++i)this.tag.putInt32(this._s[i]^a[i]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},o.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),o=0;o<128;++o)e[o/32|0]&1<<31-o%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n);return r},o.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},o.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,o=this._m[r][n];t[0]^=o[0],t[1]^=o[1],t[2]^=o[2],t[3]^=o[3]}return t},o.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},o.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,o=16*r,a=new Array(o),i=0;i<o;++i){var s=[0,0,0,0],c=(n-1-i%n)*t;s[i/n|0]=1<<t-1<<c,a[i]=this.generateSubHashTable(this.multiply(s,e),t)}return a},o.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,o=new Array(r);o[n]=e.slice(0);for(var a=n>>>1;a>0;)this.pow(o[2*a],o[a]=[]),a>>=1;for(a=2;a<n;){for(var i=1;i<a;++i){var s=o[a],c=o[i];o[a+i]=[s[0]^c[0],s[1]^c[1],s[2]^c[2],s[3]^c[3]]}a*=2}for(o[0]=[0,0,0,0],a=n+1;a<r;++a){var u=o[a^n];o[a]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return o}},86875:(e,t,r)=>{var n=r(83418);function o(e,t){n.cipher.registerAlgorithm(e,(function(){return new n.des.Algorithm(e,t)}))}r(58654),r(23392),r(63290),e.exports=n.des=n.des||{},n.des.startEncrypting=function(e,t,r,n){var o=g({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return o.start(t),o},n.des.createEncryptionCipher=function(e,t){return g({key:e,output:null,decrypt:!1,mode:t})},n.des.startDecrypting=function(e,t,r,n){var o=g({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return o.start(t),o},n.des.createDecryptionCipher=function(e,t){return g({key:e,output:null,decrypt:!0,mode:t})},n.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return f(r._keys,e,t,!1)},decrypt:function(e,t){return f(r._keys,e,t,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=n.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=function(e){for(var t,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],o=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],a=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],i=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],f=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],g=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],h=e.length()>8?3:1,y=[],S=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],v=0,E=0;E<h;E++){var A=e.getInt32(),_=e.getInt32();A^=(t=252645135&(A>>>4^_))<<4,A^=t=65535&((_^=t)>>>-16^A),A^=(t=858993459&(A>>>2^(_^=t<<-16)))<<2,A^=t=65535&((_^=t)>>>-16^A),A^=(t=1431655765&(A>>>1^(_^=t<<-16)))<<1,A^=t=16711935&((_^=t)>>>8^A),t=(A^=(t=1431655765&(A>>>1^(_^=t<<8)))<<1)<<8|(_^=t)>>>20&240,A=_<<24|_<<8&16711680|_>>>8&65280|_>>>24&240,_=t;for(var b=0;b<S.length;++b){S[b]?(A=A<<2|A>>>26,_=_<<2|_>>>26):(A=A<<1|A>>>27,_=_<<1|_>>>27);var T=r[(A&=-15)>>>28]|n[A>>>24&15]|o[A>>>20&15]|a[A>>>16&15]|i[A>>>12&15]|s[A>>>8&15]|c[A>>>4&15],I=u[(_&=-15)>>>28]|l[_>>>24&15]|d[_>>>20&15]|p[_>>>16&15]|f[_>>>12&15]|g[_>>>8&15]|m[_>>>4&15];t=65535&(I>>>16^T),y[v++]=T^t,y[v++]=I^t<<16}}return y}(t),this._init=!0}},o("DES-ECB",n.cipher.modes.ecb),o("DES-CBC",n.cipher.modes.cbc),o("DES-CFB",n.cipher.modes.cfb),o("DES-OFB",n.cipher.modes.ofb),o("DES-CTR",n.cipher.modes.ctr),o("3DES-ECB",n.cipher.modes.ecb),o("3DES-CBC",n.cipher.modes.cbc),o("3DES-CFB",n.cipher.modes.cfb),o("3DES-OFB",n.cipher.modes.ofb),o("3DES-CTR",n.cipher.modes.ctr);var a=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],i=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],s=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],c=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],u=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],l=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],d=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],p=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function f(e,t,r,n){var o,f,g=32===e.length?3:9;o=3===g?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var m=t[0],h=t[1];m^=(f=252645135&(m>>>4^h))<<4,m^=(f=65535&(m>>>16^(h^=f)))<<16,m^=f=858993459&((h^=f)>>>2^m),m^=f=16711935&((h^=f<<2)>>>8^m),m=(m^=(f=1431655765&(m>>>1^(h^=f<<8)))<<1)<<1|m>>>31,h=(h^=f)<<1|h>>>31;for(var y=0;y<g;y+=3){for(var S=o[y+1],v=o[y+2],E=o[y];E!=S;E+=v){var A=h^e[E],_=(h>>>4|h<<28)^e[E+1];f=m,m=h,h=f^(i[A>>>24&63]|c[A>>>16&63]|l[A>>>8&63]|p[63&A]|a[_>>>24&63]|s[_>>>16&63]|u[_>>>8&63]|d[63&_])}f=m,m=h,h=f}h=h>>>1|h<<31,h^=f=1431655765&((m=m>>>1|m<<31)>>>1^h),h^=(f=16711935&(h>>>8^(m^=f<<1)))<<8,h^=(f=858993459&(h>>>2^(m^=f)))<<2,h^=f=65535&((m^=f)>>>16^h),h^=f=252645135&((m^=f<<16)>>>4^h),m^=f<<4,r[0]=m,r[1]=h}function g(e){var t,r="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),o=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var a=null;r instanceof n.util.ByteBuffer&&(a=r,r={}),(r=r||{}).output=a,r.iv=e,o.call(t,r)},t}},83418:e=>{e.exports={options:{usePureJavaScript:!1}}},85469:(e,t,r)=>{var n=r(83418);r(43730),r(63290),(e.exports=n.hmac=n.hmac||{}).create=function(){var e=null,t=null,r=null,o=null,a={start:function(a,i){if(null!==a)if("string"==typeof a){if(!((a=a.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+a+'"');t=n.md.algorithms[a].create()}else t=a;if(null===i)i=e;else{if("string"==typeof i)i=n.util.createBuffer(i);else if(n.util.isArray(i)){var s=i;i=n.util.createBuffer();for(var c=0;c<s.length;++c)i.putByte(s[c])}var u=i.length();for(u>t.blockLength&&(t.start(),t.update(i.bytes()),i=t.digest()),r=n.util.createBuffer(),o=n.util.createBuffer(),u=i.length(),c=0;c<u;++c)s=i.at(c),r.putByte(54^s),o.putByte(92^s);if(u<t.blockLength)for(s=t.blockLength-u,c=0;c<s;++c)r.putByte(54),o.putByte(92);e=i,r=r.bytes(),o=o.bytes()}t.start(),t.update(r)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(o),t.update(e),t.digest()}};return a.digest=a.getMac,a}},97224:(e,t,r)=>{var n,o=r(83418);function a(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function i(){return new a(null)}function s(e,t,r,n,o,a){for(var i=16383&t,s=t>>14;--a>=0;){var c=16383&this.data[e],u=this.data[e++]>>14,l=s*c+u*i;o=((c=i*c+((16383&l)<<14)+r.data[n]+o)>>28)+(l>>14)+s*u,r.data[n++]=268435455&c}return o}e.exports=o.jsbn=o.jsbn||{},o.jsbn.BigInteger=a,"undefined"==typeof navigator?(a.prototype.am=s,n=28):"Microsoft Internet Explorer"==navigator.appName?(a.prototype.am=function(e,t,r,n,o,a){for(var i=32767&t,s=t>>15;--a>=0;){var c=32767&this.data[e],u=this.data[e++]>>15,l=s*c+u*i;o=((c=i*c+((32767&l)<<15)+r.data[n]+(1073741823&o))>>>30)+(l>>>15)+s*u+(o>>>30),r.data[n++]=1073741823&c}return o},n=30):"Netscape"!=navigator.appName?(a.prototype.am=function(e,t,r,n,o,a){for(;--a>=0;){var i=t*this.data[e++]+r.data[n]+o;o=Math.floor(i/67108864),r.data[n++]=67108863&i}return o},n=26):(a.prototype.am=s,n=28),a.prototype.DB=n,a.prototype.DM=(1<<n)-1,a.prototype.DV=1<<n,a.prototype.FV=Math.pow(2,52),a.prototype.F1=52-n,a.prototype.F2=2*n-52;var c,u,l="0123456789abcdefghijklmnopqrstuvwxyz",d=new Array;for(c="0".charCodeAt(0),u=0;u<=9;++u)d[c++]=u;for(c="a".charCodeAt(0),u=10;u<36;++u)d[c++]=u;for(c="A".charCodeAt(0),u=10;u<36;++u)d[c++]=u;function p(e){return l.charAt(e)}function f(e,t){return d[e.charCodeAt(t)]??-1}function g(e){var t=i();return t.fromInt(e),t}function m(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function h(e){this.m=e}function y(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function S(e,t){return e&t}function v(e,t){return e|t}function E(e,t){return e^t}function A(e,t){return e&~t}function _(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function b(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function T(){}function I(e){return e}function w(e){this.r2=i(),this.q3=i(),a.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}h.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},h.prototype.revert=function(e){return e},h.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},h.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},h.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},y.prototype.convert=function(e){var t=i();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(a.ZERO)>0&&this.m.subTo(t,t),t},y.prototype.revert=function(e){var t=i();return e.copyTo(t),this.reduce(t),t},y.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},y.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},y.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},a.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},a.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},a.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,o=!1,i=0;--n>=0;){var s=8==r?255&e[n]:f(e,n);s<0?"-"==e.charAt(n)&&(o=!0):(o=!1,0==i?this.data[this.t++]=s:i+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-i)-1)<<i,this.data[this.t++]=s>>this.DB-i):this.data[this.t-1]|=s<<i,(i+=r)>=this.DB&&(i-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,i>0&&(this.data[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),o&&a.ZERO.subTo(this,this)},a.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t},a.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s},a.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s},a.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,o=this.DB-n,a=(1<<o)-1,i=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+i+1]=this.data[r]>>o|s,s=(this.data[r]&a)<<n;for(r=i-1;r>=0;--r)t.data[r]=0;t.data[i]=s,t.t=this.t+i+1,t.s=this.s,t.clamp()},a.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,o=this.DB-n,a=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var i=r+1;i<this.t;++i)t.data[i-r-1]|=(this.data[i]&a)<<o,t.data[i-r]=this.data[i]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&a)<<o),t.t=this.t-r,t.clamp()}},a.prototype.subTo=function(e,t){for(var r=0,n=0,o=Math.min(e.t,this.t);r<o;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()},a.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),o=r.t;for(t.t=o+n.t;--o>=0;)t.data[o]=0;for(o=0;o<n.t;++o)t.data[o+r.t]=r.am(0,n.data[o],t,o,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&a.ZERO.subTo(t,t)},a.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()},a.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var o=this.abs();if(o.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=i());var s=i(),c=this.s,u=e.s,l=this.DB-m(n.data[n.t-1]);l>0?(n.lShiftTo(l,s),o.lShiftTo(l,r)):(n.copyTo(s),o.copyTo(r));var d=s.t,p=s.data[d-1];if(0!=p){var f=p*(1<<this.F1)+(d>1?s.data[d-2]>>this.F2:0),g=this.FV/f,h=(1<<this.F1)/f,y=1<<this.F2,S=r.t,v=S-d,E=t??i();for(s.dlShiftTo(v,E),r.compareTo(E)>=0&&(r.data[r.t++]=1,r.subTo(E,r)),a.ONE.dlShiftTo(d,E),E.subTo(s,s);s.t<d;)s.data[s.t++]=0;for(;--v>=0;){var A=r.data[--S]==p?this.DM:Math.floor(r.data[S]*g+(r.data[S-1]+y)*h);if((r.data[S]+=s.am(0,A,r,v,0,d))<A)for(s.dlShiftTo(v,E),r.subTo(E,r);r.data[S]<--A;)r.subTo(E,r)}null!=t&&(r.drShiftTo(d,t),c!=u&&a.ZERO.subTo(t,t)),r.t=d,r.clamp(),l>0&&r.rShiftTo(l,r),c<0&&a.ZERO.subTo(r,r)}}},a.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},a.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},a.prototype.exp=function(e,t){if(e>4294967295||e<1)return a.ONE;var r=i(),n=i(),o=t.convert(this),s=m(e)-1;for(o.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,o,r);else{var c=r;r=n,n=c}return t.revert(r)},a.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,o=!1,a="",i=this.t,s=this.DB-i*this.DB%t;if(i-- >0)for(s<this.DB&&(r=this.data[i]>>s)>0&&(o=!0,a=p(r));i>=0;)s<t?(r=(this.data[i]&(1<<s)-1)<<t-s,r|=this.data[--i]>>(s+=this.DB-t)):(r=this.data[i]>>(s-=t)&n,s<=0&&(s+=this.DB,--i)),r>0&&(o=!0),o&&(a+=p(r));return o?a:"0"},a.prototype.negate=function(){var e=i();return a.ZERO.subTo(this,e),e},a.prototype.abs=function(){return this.s<0?this.negate():this},a.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0},a.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+m(this.data[this.t-1]^this.s&this.DM)},a.prototype.mod=function(e){var t=i();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(a.ZERO)>0&&e.subTo(t,t),t},a.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new h(t):new y(t),this.exp(e,r)},a.ZERO=g(0),a.ONE=g(1),T.prototype.convert=I,T.prototype.revert=I,T.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},T.prototype.sqrTo=function(e,t){e.squareTo(t)},w.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=i();return e.copyTo(t),this.reduce(t),t},w.prototype.revert=function(e){return e},w.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},w.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},w.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var C=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],O=(1<<26)/C[C.length-1];a.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},a.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=g(r),o=i(),a=i(),s="";for(this.divRemTo(n,o,a);o.signum()>0;)s=(r+a.intValue()).toString(e).substr(1)+s,o.divRemTo(n,o,a);return a.intValue().toString(e)+s},a.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),o=!1,i=0,s=0,c=0;c<e.length;++c){var u=f(e,c);u<0?"-"==e.charAt(c)&&0==this.signum()&&(o=!0):(s=t*s+u,++i>=r&&(this.dMultiply(n),this.dAddOffset(s,0),i=0,s=0))}i>0&&(this.dMultiply(Math.pow(t,i)),this.dAddOffset(s,0)),o&&a.ZERO.subTo(this,this)},a.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(a.ONE.shiftLeft(e-1),v,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(a.ONE.shiftLeft(e-1),this);else{var n=new Array,o=7&e;n.length=1+(e>>3),t.nextBytes(n),o>0?n[0]&=(1<<o)-1:n[0]=0,this.fromString(n,256)}},a.prototype.bitwiseTo=function(e,t,r){var n,o,a=Math.min(e.t,this.t);for(n=0;n<a;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(o=e.s&this.DM,n=a;n<this.t;++n)r.data[n]=t(this.data[n],o);r.t=this.t}else{for(o=this.s&this.DM,n=a;n<e.t;++n)r.data[n]=t(o,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},a.prototype.changeBit=function(e,t){var r=a.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},a.prototype.addTo=function(e,t){for(var r=0,n=0,o=Math.min(e.t,this.t);r<o;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()},a.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},a.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},a.prototype.multiplyLowerTo=function(e,t,r){var n,o=Math.min(this.t+e.t,t);for(r.s=0,r.t=o;o>0;)r.data[--o]=0;for(n=r.t-this.t;o<n;++o)r.data[o+this.t]=this.am(0,e.data[o],r,o,0,this.t);for(n=Math.min(e.t,t);o<n;++o)this.am(0,e.data[o],r,o,0,t-o);r.clamp()},a.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},a.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r},a.prototype.millerRabin=function(e){var t=this.subtract(a.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,o=t.shiftRight(r),i={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},s=0;s<e;++s){do{n=new a(this.bitLength(),i)}while(n.compareTo(a.ONE)<=0||n.compareTo(t)>=0);var c=n.modPow(o,this);if(0!=c.compareTo(a.ONE)&&0!=c.compareTo(t)){for(var u=1;u++<r&&0!=c.compareTo(t);)if(0==(c=c.modPowInt(2,this)).compareTo(a.ONE))return!1;if(0!=c.compareTo(t))return!1}}return!0},a.prototype.clone=function(){var e=i();return this.copyTo(e),e},a.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},a.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},a.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},a.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},a.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,o=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[o++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==o&&(128&this.s)!=(128&r)&&++o,(o>0||r!=this.s)&&(t[o++]=r);return t},a.prototype.equals=function(e){return 0==this.compareTo(e)},a.prototype.min=function(e){return this.compareTo(e)<0?this:e},a.prototype.max=function(e){return this.compareTo(e)>0?this:e},a.prototype.and=function(e){var t=i();return this.bitwiseTo(e,S,t),t},a.prototype.or=function(e){var t=i();return this.bitwiseTo(e,v,t),t},a.prototype.xor=function(e){var t=i();return this.bitwiseTo(e,E,t),t},a.prototype.andNot=function(e){var t=i();return this.bitwiseTo(e,A,t),t},a.prototype.not=function(){for(var e=i(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},a.prototype.shiftLeft=function(e){var t=i();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},a.prototype.shiftRight=function(e){var t=i();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},a.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+_(this.data[e]);return this.s<0?this.t*this.DB:-1},a.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=b(this.data[r]^t);return e},a.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},a.prototype.setBit=function(e){return this.changeBit(e,v)},a.prototype.clearBit=function(e){return this.changeBit(e,A)},a.prototype.flipBit=function(e){return this.changeBit(e,E)},a.prototype.add=function(e){var t=i();return this.addTo(e,t),t},a.prototype.subtract=function(e){var t=i();return this.subTo(e,t),t},a.prototype.multiply=function(e){var t=i();return this.multiplyTo(e,t),t},a.prototype.divide=function(e){var t=i();return this.divRemTo(e,t,null),t},a.prototype.remainder=function(e){var t=i();return this.divRemTo(e,null,t),t},a.prototype.divideAndRemainder=function(e){var t=i(),r=i();return this.divRemTo(e,t,r),new Array(t,r)},a.prototype.modPow=function(e,t){var r,n,o=e.bitLength(),a=g(1);if(o<=0)return a;r=o<18?1:o<48?3:o<144?4:o<768?5:6,n=o<8?new h(t):t.isEven()?new w(t):new y(t);var s=new Array,c=3,u=r-1,l=(1<<r)-1;if(s[1]=n.convert(this),r>1){var d=i();for(n.sqrTo(s[1],d);c<=l;)s[c]=i(),n.mulTo(d,s[c-2],s[c]),c+=2}var p,f,S=e.t-1,v=!0,E=i();for(o=m(e.data[S])-1;S>=0;){for(o>=u?p=e.data[S]>>o-u&l:(p=(e.data[S]&(1<<o+1)-1)<<u-o,S>0&&(p|=e.data[S-1]>>this.DB+o-u)),c=r;0==(1&p);)p>>=1,--c;if((o-=c)<0&&(o+=this.DB,--S),v)s[p].copyTo(a),v=!1;else{for(;c>1;)n.sqrTo(a,E),n.sqrTo(E,a),c-=2;c>0?n.sqrTo(a,E):(f=a,a=E,E=f),n.mulTo(E,s[p],a)}for(;S>=0&&0==(e.data[S]&1<<o);)n.sqrTo(a,E),f=a,a=E,E=f,--o<0&&(o=this.DB-1,--S)}return n.revert(a)},a.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return a.ZERO;for(var r=e.clone(),n=this.clone(),o=g(1),i=g(0),s=g(0),c=g(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(o.isEven()&&i.isEven()||(o.addTo(this,o),i.subTo(e,i)),o.rShiftTo(1,o)):i.isEven()||i.subTo(e,i),i.rShiftTo(1,i);for(;n.isEven();)n.rShiftTo(1,n),t?(s.isEven()&&c.isEven()||(s.addTo(this,s),c.subTo(e,c)),s.rShiftTo(1,s)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),t&&o.subTo(s,o),i.subTo(c,i)):(n.subTo(r,n),t&&s.subTo(o,s),c.subTo(i,c))}return 0!=n.compareTo(a.ONE)?a.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c},a.prototype.pow=function(e){return this.exp(e,new T)},a.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var o=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(o<a&&(a=o),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(o=t.getLowestSetBit())>0&&t.rShiftTo(o,t),(o=r.getLowestSetBit())>0&&r.rShiftTo(o,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r},a.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=C[C.length-1]){for(t=0;t<C.length;++t)if(r.data[0]==C[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<C.length;){for(var n=C[t],o=t+1;o<C.length&&n<O;)n*=C[o++];for(n=r.modInt(n);t<o;)if(n%C[t++]==0)return!1}return r.millerRabin(e)}},11087:(e,t,r)=>{e.exports=r(43730),r(30960),r(28804),r(51792),r(64301)},43730:(e,t,r)=>{var n=r(83418);e.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},30960:(e,t,r)=>{var n=r(83418);r(43730),r(63290);var o=e.exports=n.md5=n.md5||{};n.md.md5=n.md.algorithms.md5=o,o.create=function(){u||function(){a=String.fromCharCode(128),a+=n.util.fillString(String.fromCharCode(0),64),i=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],s=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],c=new Array(64);for(var e=0;e<64;++e)c[e]=Math.floor(4294967296*Math.abs(Math.sin(e+1)));u=!0}();var e=null,t=n.util.createBuffer(),r=new Array(16),o={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,a=0;a<r;++a)o.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},o}};return o.start(),o.update=function(a,i){"utf8"===i&&(a=n.util.encodeUtf8(a));var s=a.length;o.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var c=o.fullMessageLength.length-1;c>=0;--c)o.fullMessageLength[c]+=s[1],s[1]=s[0]+(o.fullMessageLength[c]/4294967296>>>0),o.fullMessageLength[c]=o.fullMessageLength[c]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(a),l(e,r,t),(t.read>2048||0===t.length())&&t.compact(),o},o.digest=function(){var i=n.util.createBuffer();i.putBytes(t.bytes());var s=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;i.putBytes(a.substr(0,o.blockLength-s));for(var c,u=0,d=o.fullMessageLength.length-1;d>=0;--d)u=(c=8*o.fullMessageLength[d]+u)/4294967296>>>0,i.putInt32Le(c>>>0);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};l(p,r,i);var f=n.util.createBuffer();return f.putInt32Le(p.h0),f.putInt32Le(p.h1),f.putInt32Le(p.h2),f.putInt32Le(p.h3),f},o};var a=null,i=null,s=null,c=null,u=!1;function l(e,t,r){for(var n,o,a,u,l,d,p,f=r.length();f>=64;){for(o=e.h0,a=e.h1,u=e.h2,l=e.h3,p=0;p<16;++p)t[p]=r.getInt32Le(),n=o+(l^a&(u^l))+c[p]+t[p],o=l,l=u,u=a,a+=n<<(d=s[p])|n>>>32-d;for(;p<32;++p)n=o+(u^l&(a^u))+c[p]+t[i[p]],o=l,l=u,u=a,a+=n<<(d=s[p])|n>>>32-d;for(;p<48;++p)n=o+(a^u^l)+c[p]+t[i[p]],o=l,l=u,u=a,a+=n<<(d=s[p])|n>>>32-d;for(;p<64;++p)n=o+(u^(a|~l))+c[p]+t[i[p]],o=l,l=u,u=a,a+=n<<(d=s[p])|n>>>32-d;e.h0=e.h0+o|0,e.h1=e.h1+a|0,e.h2=e.h2+u|0,e.h3=e.h3+l|0,f-=64}}},39028:(e,t,r)=>{var n=r(83418);r(9647),e.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},9647:(e,t,r)=>{var n=r(83418);r(63290),n.mgf=n.mgf||{},(e.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(e){return{generate:function(t,r){for(var o=new n.util.ByteBuffer,a=Math.ceil(r/e.digestLength),i=0;i<a;i++){var s=new n.util.ByteBuffer;s.putInt32(i),e.start(),e.update(t+s.getBytes()),o.putBuffer(e.digest())}return o.truncate(o.length()-r),o.getBytes()}}}},43793:(e,t,r)=>{var n=r(83418);n.pki=n.pki||{};var o=e.exports=n.pki.oids=n.oids=n.oids||{};function a(e,t){o[e]=t,o[t]=e}function i(e,t){o[e]=t}a("1.2.840.113549.1.1.1","rsaEncryption"),a("1.2.840.113549.1.1.4","md5WithRSAEncryption"),a("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),a("1.2.840.113549.1.1.7","RSAES-OAEP"),a("1.2.840.113549.1.1.8","mgf1"),a("1.2.840.113549.1.1.9","pSpecified"),a("1.2.840.113549.1.1.10","RSASSA-PSS"),a("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),a("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),a("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),a("1.3.101.112","EdDSA25519"),a("1.2.840.10040.4.3","dsa-with-sha1"),a("1.3.14.3.2.7","desCBC"),a("1.3.14.3.2.26","sha1"),a("1.3.14.3.2.29","sha1WithRSASignature"),a("2.16.840.1.101.3.4.2.1","sha256"),a("2.16.840.1.101.3.4.2.2","sha384"),a("2.16.840.1.101.3.4.2.3","sha512"),a("2.16.840.1.101.3.4.2.4","sha224"),a("2.16.840.1.101.3.4.2.5","sha512-224"),a("2.16.840.1.101.3.4.2.6","sha512-256"),a("1.2.840.113549.2.2","md2"),a("1.2.840.113549.2.5","md5"),a("1.2.840.113549.1.7.1","data"),a("1.2.840.113549.1.7.2","signedData"),a("1.2.840.113549.1.7.3","envelopedData"),a("1.2.840.113549.1.7.4","signedAndEnvelopedData"),a("1.2.840.113549.1.7.5","digestedData"),a("1.2.840.113549.1.7.6","encryptedData"),a("1.2.840.113549.1.9.1","emailAddress"),a("1.2.840.113549.1.9.2","unstructuredName"),a("1.2.840.113549.1.9.3","contentType"),a("1.2.840.113549.1.9.4","messageDigest"),a("1.2.840.113549.1.9.5","signingTime"),a("1.2.840.113549.1.9.6","counterSignature"),a("1.2.840.113549.1.9.7","challengePassword"),a("1.2.840.113549.1.9.8","unstructuredAddress"),a("1.2.840.113549.1.9.14","extensionRequest"),a("1.2.840.113549.1.9.20","friendlyName"),a("1.2.840.113549.1.9.21","localKeyId"),a("1.2.840.113549.1.9.22.1","x509Certificate"),a("1.2.840.113549.1.12.10.1.1","keyBag"),a("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),a("1.2.840.113549.1.12.10.1.3","certBag"),a("1.2.840.113549.1.12.10.1.4","crlBag"),a("1.2.840.113549.1.12.10.1.5","secretBag"),a("1.2.840.113549.1.12.10.1.6","safeContentsBag"),a("1.2.840.113549.1.5.13","pkcs5PBES2"),a("1.2.840.113549.1.5.12","pkcs5PBKDF2"),a("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),a("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),a("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),a("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),a("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),a("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),a("1.2.840.113549.2.7","hmacWithSHA1"),a("1.2.840.113549.2.8","hmacWithSHA224"),a("1.2.840.113549.2.9","hmacWithSHA256"),a("1.2.840.113549.2.10","hmacWithSHA384"),a("1.2.840.113549.2.11","hmacWithSHA512"),a("1.2.840.113549.3.7","des-EDE3-CBC"),a("2.16.840.1.101.3.4.1.2","aes128-CBC"),a("2.16.840.1.101.3.4.1.22","aes192-CBC"),a("2.16.840.1.101.3.4.1.42","aes256-CBC"),a("2.5.4.3","commonName"),a("2.5.4.4","surname"),a("2.5.4.5","serialNumber"),a("2.5.4.6","countryName"),a("2.5.4.7","localityName"),a("2.5.4.8","stateOrProvinceName"),a("2.5.4.9","streetAddress"),a("2.5.4.10","organizationName"),a("2.5.4.11","organizationalUnitName"),a("2.5.4.12","title"),a("2.5.4.13","description"),a("2.5.4.15","businessCategory"),a("2.5.4.17","postalCode"),a("2.5.4.42","givenName"),a("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),a("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),a("2.16.840.1.113730.1.1","nsCertType"),a("2.16.840.1.113730.1.13","nsComment"),i("2.5.29.1","authorityKeyIdentifier"),i("2.5.29.2","keyAttributes"),i("2.5.29.3","certificatePolicies"),i("2.5.29.4","keyUsageRestriction"),i("2.5.29.5","policyMapping"),i("2.5.29.6","subtreesConstraint"),i("2.5.29.7","subjectAltName"),i("2.5.29.8","issuerAltName"),i("2.5.29.9","subjectDirectoryAttributes"),i("2.5.29.10","basicConstraints"),i("2.5.29.11","nameConstraints"),i("2.5.29.12","policyConstraints"),i("2.5.29.13","basicConstraints"),a("2.5.29.14","subjectKeyIdentifier"),a("2.5.29.15","keyUsage"),i("2.5.29.16","privateKeyUsagePeriod"),a("2.5.29.17","subjectAltName"),a("2.5.29.18","issuerAltName"),a("2.5.29.19","basicConstraints"),i("2.5.29.20","cRLNumber"),i("2.5.29.21","cRLReason"),i("2.5.29.22","expirationDate"),i("2.5.29.23","instructionCode"),i("2.5.29.24","invalidityDate"),i("2.5.29.25","cRLDistributionPoints"),i("2.5.29.26","issuingDistributionPoint"),i("2.5.29.27","deltaCRLIndicator"),i("2.5.29.28","issuingDistributionPoint"),i("2.5.29.29","certificateIssuer"),i("2.5.29.30","nameConstraints"),a("2.5.29.31","cRLDistributionPoints"),a("2.5.29.32","certificatePolicies"),i("2.5.29.33","policyMappings"),i("2.5.29.34","policyConstraints"),a("2.5.29.35","authorityKeyIdentifier"),i("2.5.29.36","policyConstraints"),a("2.5.29.37","extKeyUsage"),i("2.5.29.46","freshestCRL"),i("2.5.29.54","inhibitAnyPolicy"),a("1.3.6.1.4.1.11129.2.4.2","timestampList"),a("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),a("1.3.6.1.5.5.7.3.1","serverAuth"),a("1.3.6.1.5.5.7.3.2","clientAuth"),a("1.3.6.1.5.5.7.3.3","codeSigning"),a("1.3.6.1.5.5.7.3.4","emailProtection"),a("1.3.6.1.5.5.7.3.8","timeStamping")},89007:(e,t,r)=>{var n=r(83418);if(r(43882),r(10001),r(86875),r(43730),r(43793),r(42497),r(30115),r(59018),r(14528),r(9120),r(63290),void 0===o)var o=n.jsbn.BigInteger;var a=n.asn1,i=n.pki=n.pki||{};e.exports=i.pbe=n.pbe=n.pbe||{};var s=i.oids,c={name:"EncryptedPrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},u={name:"PBES2Algorithms",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},l={name:"pkcs-12PbeParams",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"iterations"}]};function d(e,t){return e.start().update(t).digest().getBytes()}function p(e){var t;if(e){if(!(t=i.oids[a.derToOid(e)])){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return f(t)}function f(e){var t=n.md;switch(e){case"hmacWithSHA224":t=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}i.encryptPrivateKeyInfo=function(e,t,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var o,c,u,l=n.random.getBytesSync(r.saltSize),d=r.count,p=a.integerToDer(d);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var g,m,h;switch(r.algorithm){case"aes128":o=16,g=16,m=s["aes128-CBC"],h=n.aes.createEncryptionCipher;break;case"aes192":o=24,g=16,m=s["aes192-CBC"],h=n.aes.createEncryptionCipher;break;case"aes256":o=32,g=16,m=s["aes256-CBC"],h=n.aes.createEncryptionCipher;break;case"des":o=8,g=8,m=s.desCBC,h=n.des.createEncryptionCipher;break;default:throw(_=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,_}var y="hmacWith"+r.prfAlgorithm.toUpperCase(),S=f(y),v=n.pkcs5.pbkdf2(t,l,d,o,S),E=n.random.getBytesSync(g);(b=h(v)).start(E),b.update(a.toDer(e)),b.finish(),u=b.output.getBytes();var A=function(e,t,r,o){var s=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,e),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,t.getBytes())]);return"hmacWithSHA1"!==o&&s.value.push(a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(i.oids[o]).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])),s}(l,p,o,y);c=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.pkcs5PBES2).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.pkcs5PBKDF2).getBytes()),A]),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(m).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,E)])])])}else{var _;if("3des"!==r.algorithm)throw(_=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,_;o=24;var b,T=new n.util.ByteBuffer(l);v=i.pbe.generatePkcs12Key(t,T,1,d,o),E=i.pbe.generatePkcs12Key(t,T,2,d,o),(b=n.des.createEncryptionCipher(v)).start(E),b.update(a.toDer(e)),b.finish(),u=b.output.getBytes(),c=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,l),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,p.getBytes())])])}return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[c,a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,u)])},i.decryptPrivateKeyInfo=function(e,t){var r=null,o={},s=[];if(!a.validate(e,c,o,s)){var u=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=s,u}var l=a.derToOid(o.encryptionOid),d=i.pbe.getCipher(l,o.encryptionParams,t),p=n.util.createBuffer(o.encryptedData);return d.update(p),d.finish()&&(r=a.fromDer(d.output)),r},i.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:a.toDer(e).getBytes()};return n.pem.encode(r,{maxline:t})},i.encryptedPrivateKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return a.fromDer(t.body)},i.encryptRsaPrivateKey=function(e,t,r){if(!(r=r||{}).legacy){var o=i.wrapRsaPrivateKey(i.privateKeyToAsn1(e));return o=i.encryptPrivateKeyInfo(o,t,r),i.encryptedPrivateKeyToPem(o)}var s,c,u,l;switch(r.algorithm){case"aes128":s="AES-128-CBC",u=16,c=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"aes192":s="AES-192-CBC",u=24,c=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"aes256":s="AES-256-CBC",u=32,c=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"3des":s="DES-EDE3-CBC",u=24,c=n.random.getBytesSync(8),l=n.des.createEncryptionCipher;break;case"des":s="DES-CBC",u=8,c=n.random.getBytesSync(8),l=n.des.createEncryptionCipher;break;default:var d=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw d.algorithm=r.algorithm,d}var p=l(n.pbe.opensslDeriveBytes(t,c.substr(0,8),u));p.start(c),p.update(a.toDer(i.privateKeyToAsn1(e))),p.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:s,parameters:n.util.bytesToHex(c).toUpperCase()},body:p.output.getBytes()};return n.pem.encode(f)},i.decryptRsaPrivateKey=function(e,t){var r=null,o=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==o.type&&"PRIVATE KEY"!==o.type&&"RSA PRIVATE KEY"!==o.type)throw(u=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=u,u;if(o.procType&&"ENCRYPTED"===o.procType.type){var s,c;switch(o.dekInfo.algorithm){case"DES-CBC":s=8,c=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,c=n.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,c=n.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,c=n.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,c=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,c=function(e){return n.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":s=8,c=function(e){return n.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":s=16,c=function(e){return n.rc2.createDecryptionCipher(e,128)};break;default:var u;throw(u=new Error('Could not decrypt private key; unsupported encryption algorithm "'+o.dekInfo.algorithm+'".')).algorithm=o.dekInfo.algorithm,u}var l=n.util.hexToBytes(o.dekInfo.parameters),d=c(n.pbe.opensslDeriveBytes(t,l.substr(0,8),s));if(d.start(l),d.update(n.util.createBuffer(o.body)),!d.finish())return r;r=d.output.getBytes()}else r=o.body;return null!==(r="ENCRYPTED PRIVATE KEY"===o.type?i.decryptPrivateKeyInfo(a.fromDer(r),t):a.fromDer(r))&&(r=i.privateKeyFromAsn1(r)),r},i.pbe.generatePkcs12Key=function(e,t,r,o,a,i){var s,c;if(null==i){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');i=n.md.sha1.create()}var u=i.digestLength,l=i.blockLength,d=new n.util.ByteBuffer,p=new n.util.ByteBuffer;if(null!=e){for(c=0;c<e.length;c++)p.putInt16(e.charCodeAt(c));p.putInt16(0)}var f=p.length(),g=t.length(),m=new n.util.ByteBuffer;m.fillWithByte(r,l);var h=l*Math.ceil(g/l),y=new n.util.ByteBuffer;for(c=0;c<h;c++)y.putByte(t.at(c%g));var S=l*Math.ceil(f/l),v=new n.util.ByteBuffer;for(c=0;c<S;c++)v.putByte(p.at(c%f));var E=y;E.putBuffer(v);for(var A=Math.ceil(a/u),_=1;_<=A;_++){var b=new n.util.ByteBuffer;b.putBytes(m.bytes()),b.putBytes(E.bytes());for(var T=0;T<o;T++)i.start(),i.update(b.getBytes()),b=i.digest();var I=new n.util.ByteBuffer;for(c=0;c<l;c++)I.putByte(b.at(c%u));var w=Math.ceil(g/l)+Math.ceil(f/l),C=new n.util.ByteBuffer;for(s=0;s<w;s++){var O=new n.util.ByteBuffer(E.getBytes(l)),D=511;for(c=I.length()-1;c>=0;c--)D>>=8,D+=I.at(c)+O.at(c),O.setAt(c,255&D);C.putBuffer(O)}E=C,d.putBuffer(b)}return d.truncate(d.length()-a),d},i.pbe.getCipher=function(e,t,r){switch(e){case i.oids.pkcs5PBES2:return i.pbe.getCipherForPBES2(e,t,r);case i.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case i.oids["pbewithSHAAnd40BitRC2-CBC"]:return i.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},i.pbe.getCipherForPBES2=function(e,t,r){var o,s={},c=[];if(!a.validate(t,u,s,c))throw(o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=c,o;if((e=a.derToOid(s.kdfOid))!==i.oids.pkcs5PBKDF2)throw(o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,o.supportedOids=["pkcs5PBKDF2"],o;if((e=a.derToOid(s.encOid))!==i.oids["aes128-CBC"]&&e!==i.oids["aes192-CBC"]&&e!==i.oids["aes256-CBC"]&&e!==i.oids["des-EDE3-CBC"]&&e!==i.oids.desCBC)throw(o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o;var l,d,f=s.kdfSalt,g=n.util.createBuffer(s.kdfIterationCount);switch(g=g.getInt(g.length()<<3),i.oids[e]){case"aes128-CBC":l=16,d=n.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,d=n.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,d=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,d=n.des.createDecryptionCipher;break;case"desCBC":l=8,d=n.des.createDecryptionCipher}var m=p(s.prfOid),h=n.pkcs5.pbkdf2(r,f,g,l,m),y=s.encIv,S=d(h);return S.start(y),S},i.pbe.getCipherForPKCS12PBE=function(e,t,r){var o={},s=[];if(!a.validate(t,l,o,s))throw(m=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=s,m;var c,u,d,f=n.util.createBuffer(o.salt),g=n.util.createBuffer(o.iterations);switch(g=g.getInt(g.length()<<3),e){case i.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,d=n.des.startDecrypting;break;case i.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,d=function(e,t){var r=n.rc2.createDecryptionCipher(e,40);return r.start(t,null),r};break;default:var m;throw(m=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,m}var h=p(o.prfOid),y=i.pbe.generatePkcs12Key(r,f,1,g,c,h);return h.start(),d(y,i.pbe.generatePkcs12Key(r,f,2,g,u,h))},i.pbe.opensslDeriveBytes=function(e,t,r,o){if(null==o){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');o=n.md.md5.create()}null===t&&(t="");for(var a=[d(o,e+t)],i=16,s=1;i<r;++s,i+=16)a.push(d(o,a[s-1]+e+t));return a.join("").substr(0,r)}},42497:(e,t,r)=>{var n=r(3275).Buffer,o=r(83418);r(85469),r(43730),r(63290);var a,i=o.pkcs5=o.pkcs5||{};o.util.isNodejs&&!o.options.usePureJavaScript&&(a=r(63619)),e.exports=o.pbkdf2=i.pbkdf2=function(e,t,r,i,s,c){if("function"==typeof s&&(c=s,s=null),o.util.isNodejs&&!o.options.usePureJavaScript&&a.pbkdf2&&(null===s||"object"!=typeof s)&&(a.pbkdf2Sync.length>4||!s||"sha1"===s))return"string"!=typeof s&&(s="sha1"),e=n.from(e,"binary"),t=n.from(t,"binary"),c?4===a.pbkdf2Sync.length?a.pbkdf2(e,t,r,i,(function(e,t){if(e)return c(e);c(null,t.toString("binary"))})):a.pbkdf2(e,t,r,i,s,(function(e,t){if(e)return c(e);c(null,t.toString("binary"))})):4===a.pbkdf2Sync.length?a.pbkdf2Sync(e,t,r,i).toString("binary"):a.pbkdf2Sync(e,t,r,i,s).toString("binary");if(null==s&&(s="sha1"),"string"==typeof s){if(!(s in o.md.algorithms))throw new Error("Unknown hash algorithm: "+s);s=o.md[s].create()}var u=s.digestLength;if(i>4294967295*u){var l=new Error("Derived key is too long.");if(c)return c(l);throw l}var d=Math.ceil(i/u),p=i-(d-1)*u,f=o.hmac.create();f.start(s,e);var g,m,h,y="";if(!c){for(var S=1;S<=d;++S){f.start(null,null),f.update(t),f.update(o.util.int32ToBytes(S)),g=h=f.digest().getBytes();for(var v=2;v<=r;++v)f.start(null,null),f.update(h),m=f.digest().getBytes(),g=o.util.xorBytes(g,m,u),h=m;y+=S<d?g:g.substr(0,p)}return y}function E(){if(S>d)return c(null,y);f.start(null,null),f.update(t),f.update(o.util.int32ToBytes(S)),g=h=f.digest().getBytes(),v=2,A()}function A(){if(v<=r)return f.start(null,null),f.update(h),m=f.digest().getBytes(),g=o.util.xorBytes(g,m,u),h=m,++v,o.util.setImmediate(A);y+=S<d?g:g.substr(0,p),++S,E()}S=1,E()}},30115:(e,t,r)=>{var n=r(83418);r(63290);var o=e.exports=n.pem=n.pem||{};function a(e){for(var t=e.name+": ",r=[],n=function(e,t){return" "+t},o=0;o<e.values.length;++o)r.push(e.values[o].replace(/^(\S+\r\n)/,n));t+=r.join(",")+"\r\n";var a=0,i=-1;for(o=0;o<t.length;++o,++a)if(a>65&&-1!==i){var s=t[i];","===s?(++i,t=t.substr(0,i)+"\r\n "+t.substr(i)):t=t.substr(0,i)+"\r\n"+s+t.substr(i+1),a=o-i-1,i=-1,++o}else" "!==t[o]&&"\t"!==t[o]&&","!==t[o]||(i=o);return t}function i(e){return e.replace(/^\s+/,"")}o.encode=function(e,t){t=t||{};var r,o="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(o+=a(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(o+=a(r={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),o+=a(r)),e.headers)for(var i=0;i<e.headers.length;++i)o+=a(e.headers[i]);return e.procType&&(o+="\r\n"),(o+=n.util.encode64(e.body,t.maxline||64)+"\r\n")+"-----END "+e.type+"-----\r\n"},o.decode=function(e){for(var t,r=[],o=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,a=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/;t=o.exec(e);){var c=t[1];"NEW CERTIFICATE REQUEST"===c&&(c="CERTIFICATE REQUEST");var u={type:c,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(t[3])};if(r.push(u),t[2]){for(var l=t[2].split(s),d=0;t&&d<l.length;){for(var p=l[d].replace(/\s+$/,""),f=d+1;f<l.length;++f){var g=l[f];if(!/\s/.test(g[0]))break;p+=g,d=f}if(t=p.match(a)){for(var m={name:t[1],values:[]},h=t[2].split(","),y=0;y<h.length;++y)m.values.push(i(h[y]));if(u.procType)if(u.contentDomain||"Content-Domain"!==m.name)if(u.dekInfo||"DEK-Info"!==m.name)u.headers.push(m);else{if(0===m.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');u.dekInfo={algorithm:h[0],parameters:h[1]||null}}else u.contentDomain=h[0]||"";else{if("Proc-Type"!==m.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==m.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');u.procType={version:h[0],type:h[1]}}}++d}if("ENCRYPTED"===u.procType&&!u.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},7993:(e,t,r)=>{var n=r(83418);r(63290),r(59018),r(28804);var o=e.exports=n.pkcs1=n.pkcs1||{};function a(e,t,r){r||(r=n.md.sha1.create());for(var o="",a=Math.ceil(t/r.digestLength),i=0;i<a;++i){var s=String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,255&i);r.start(),r.update(e+s),o+=r.digest().getBytes()}return o.substring(0,t)}o.encode_rsa_oaep=function(e,t,r){var o,i,s,c;"string"==typeof r?(o=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(o=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(c=r.mgf1.md)),s?s.start():s=n.md.sha1.create(),c||(c=s);var u=Math.ceil(e.n.bitLength()/8),l=u-2*s.digestLength-2;if(t.length>l)throw(m=new Error("RSAES-OAEP input message length is too long.")).length=t.length,m.maxLength=l,m;o||(o=""),s.update(o,"raw");for(var d=s.digest(),p="",f=l-t.length,g=0;g<f;g++)p+="\0";var m,h=d.getBytes()+p+""+t;if(i){if(i.length!==s.digestLength)throw(m=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=i.length,m.digestLength=s.digestLength,m}else i=n.random.getBytes(s.digestLength);var y=a(i,u-s.digestLength-1,c),S=n.util.xorBytes(h,y,h.length),v=a(S,s.digestLength,c);return"\0"+n.util.xorBytes(i,v,i.length)+S},o.decode_rsa_oaep=function(e,t,r){var o,i,s;"string"==typeof r?(o=r,i=arguments[3]||void 0):r&&(o=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var c=Math.ceil(e.n.bitLength()/8);if(t.length!==c)throw(y=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,y.expectedLength=c,y;if(void 0===i?i=n.md.sha1.create():i.start(),s||(s=i),c<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");o||(o=""),i.update(o,"raw");for(var u=i.digest().getBytes(),l=t.charAt(0),d=t.substring(1,i.digestLength+1),p=t.substring(1+i.digestLength),f=a(p,i.digestLength,s),g=a(n.util.xorBytes(d,f,d.length),c-i.digestLength-1,s),m=n.util.xorBytes(p,g,p.length),h=m.substring(0,i.digestLength),y="\0"!==l,S=0;S<i.digestLength;++S)y|=u.charAt(S)!==h.charAt(S);for(var v=1,E=i.digestLength,A=i.digestLength;A<m.length;A++){var _=m.charCodeAt(A);y|=_&(v?65534:0),E+=v&=1&_^1}if(y||1!==m.charCodeAt(E))throw new Error("Invalid RSAES-OAEP padding.");return m.substring(E+1)}},84834:(e,t,r)=>{var n=r(83418);r(10001),r(85469),r(43793),r(23023),r(89007),r(59018),r(9120),r(28804),r(63290),r(4811);var o=n.asn1,a=n.pki,i=e.exports=n.pkcs12=n.pkcs12||{},s={name:"ContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},c={name:"PFX",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},s,{name:"PFX.macData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},u={name:"SafeBag",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},l={name:"Attribute",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,capture:"values"}]},d={name:"CertBag",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:o.Class.UNIVERSAL,type:o.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function p(e,t,r,n){for(var o=[],a=0;a<e.length;a++)for(var i=0;i<e[a].safeBags.length;i++){var s=e[a].safeBags[i];void 0!==n&&s.type!==n||(null!==t?void 0!==s.attributes[t]&&s.attributes[t].indexOf(r)>=0&&o.push(s):o.push(s))}return o}function f(e){if(e.composed||e.constructed){for(var t=n.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function g(e,t){var r={},i=[];if(!o.validate(e,n.pkcs7.asn1.encryptedDataValidator,r,i))throw(s=new Error("Cannot read EncryptedContentInfo.")).errors=i,s;var s,c=o.derToOid(r.contentType);if(c!==a.oids.data)throw(s=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=c,s;c=o.derToOid(r.encAlgorithm);var u=a.pbe.getCipher(c,r.encParameter,t),l=f(r.encryptedContentAsn1),d=n.util.createBuffer(l.value);if(u.update(d),!u.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return u.output.getBytes()}function m(e,t,r){if(!t&&0===e.length)return[];if((e=o.fromDer(e,t)).tagClass!==o.Class.UNIVERSAL||e.type!==o.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<e.value.length;i++){var s=e.value[i],c={},l=[];if(!o.validate(s,u,c,l))throw(y=new Error("Cannot read SafeBag.")).errors=l,y;var p,f,g={type:o.derToOid(c.bagId),attributes:h(c.bagAttributes)};n.push(g);var m=c.bagValue.value[0];switch(g.type){case a.oids.pkcs8ShroudedKeyBag:if(null===(m=a.decryptPrivateKeyInfo(m,r)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case a.oids.keyBag:try{g.key=a.privateKeyFromAsn1(m)}catch(e){g.key=null,g.asn1=m}continue;case a.oids.certBag:p=d,f=function(){if(o.derToOid(c.certId)!==a.oids.x509Certificate){var e=new Error("Unsupported certificate type, only X.509 supported.");throw e.oid=o.derToOid(c.certId),e}var r=o.fromDer(c.cert,t);try{g.cert=a.certificateFromAsn1(r,!0)}catch(e){g.cert=null,g.asn1=r}};break;default:var y;throw(y=new Error("Unsupported PKCS#12 SafeBag type.")).oid=g.type,y}if(void 0!==p&&!o.validate(m,p,c,l))throw(y=new Error("Cannot read PKCS#12 "+p.name)).errors=l,y;f()}return n}function h(e){var t={};if(void 0!==e)for(var r=0;r<e.length;++r){var n={},i=[];if(!o.validate(e[r],l,n,i)){var s=new Error("Cannot read PKCS#12 BagAttribute.");throw s.errors=i,s}var c=o.derToOid(n.oid);if(void 0!==a.oids[c]){t[a.oids[c]]=[];for(var u=0;u<n.values.length;++u)t[a.oids[c]].push(n.values[u].value)}}return t}i.pkcs12FromAsn1=function(e,t,r){"string"==typeof t?(r=t,t=!0):void 0===t&&(t=!0);var u={};if(!o.validate(e,c,u,[]))throw(l=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=l,l;var l,d={version:u.version.charCodeAt(0),safeContents:[],getBags:function(e){var t,r={};return"localKeyId"in e?t=e.localKeyId:"localKeyIdHex"in e&&(t=n.util.hexToBytes(e.localKeyIdHex)),void 0===t&&!("friendlyName"in e)&&"bagType"in e&&(r[e.bagType]=p(d.safeContents,null,null,e.bagType)),void 0!==t&&(r.localKeyId=p(d.safeContents,"localKeyId",t,e.bagType)),"friendlyName"in e&&(r.friendlyName=p(d.safeContents,"friendlyName",e.friendlyName,e.bagType)),r},getBagsByFriendlyName:function(e,t){return p(d.safeContents,"friendlyName",e,t)},getBagsByLocalKeyId:function(e,t){return p(d.safeContents,"localKeyId",e,t)}};if(3!==u.version.charCodeAt(0))throw(l=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=u.version.charCodeAt(0),l;if(o.derToOid(u.contentType)!==a.oids.data)throw(l=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=o.derToOid(u.contentType),l;var h=u.content.value[0];if(h.tagClass!==o.Class.UNIVERSAL||h.type!==o.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(h=f(h),u.mac){var y=null,S=0,v=o.derToOid(u.macAlgorithm);switch(v){case a.oids.sha1:y=n.md.sha1.create(),S=20;break;case a.oids.sha256:y=n.md.sha256.create(),S=32;break;case a.oids.sha384:y=n.md.sha384.create(),S=48;break;case a.oids.sha512:y=n.md.sha512.create(),S=64;break;case a.oids.md5:y=n.md.md5.create(),S=16}if(null===y)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+v);var E=new n.util.ByteBuffer(u.macSalt),A="macIterations"in u?parseInt(n.util.bytesToHex(u.macIterations),16):1,_=i.generateKey(r,E,3,A,S,y),b=n.hmac.create();if(b.start(y,_),b.update(h.value),b.getMac().getBytes()!==u.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(e,t,r,n){if((t=o.fromDer(t,r)).tagClass!==o.Class.UNIVERSAL||t.type!==o.Type.SEQUENCE||!0!==t.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var c=t.value[i],u={},l=[];if(!o.validate(c,s,u,l))throw(y=new Error("Cannot read ContentInfo.")).errors=l,y;var d={encrypted:!1},p=null,h=u.content.value[0];switch(o.derToOid(u.contentType)){case a.oids.data:if(h.tagClass!==o.Class.UNIVERSAL||h.type!==o.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");p=f(h).value;break;case a.oids.encryptedData:p=g(h,n),d.encrypted=!0;break;default:var y;throw(y=new Error("Unsupported PKCS#12 contentType.")).contentType=o.derToOid(u.contentType),y}d.safeBags=m(p,r,n),e.safeContents.push(d)}}(d,h.value,t,r),d},i.toPkcs12Asn1=function(e,t,r,s){(s=s||{}).saltSize=s.saltSize||8,s.count=s.count||2048,s.algorithm=s.algorithm||s.encAlgorithm||"aes128","useMac"in s||(s.useMac=!0),"localKeyId"in s||(s.localKeyId=null),"generateLocalKeyId"in s||(s.generateLocalKeyId=!0);var c,u=s.localKeyId;if(null!==u)u=n.util.hexToBytes(u);else if(s.generateLocalKeyId)if(t){var l=n.util.isArray(t)?t[0]:t;"string"==typeof l&&(l=a.certificateFromPem(l)),(C=n.md.sha1.create()).update(o.toDer(a.certificateToAsn1(l)).getBytes()),u=C.digest().getBytes()}else u=n.random.getBytes(20);var d=[];null!==u&&d.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.oids.localKeyId).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,u)])])),"friendlyName"in s&&d.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.oids.friendlyName).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.BMPSTRING,!1,s.friendlyName)])])),d.length>0&&(c=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,d));var p=[],f=[];null!==t&&(f=n.util.isArray(t)?t:[t]);for(var g=[],m=0;m<f.length;++m){"string"==typeof(t=f[m])&&(t=a.certificateFromPem(t));var h=0===m?c:void 0,y=a.certificateToAsn1(t),S=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.oids.certBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.oids.x509Certificate).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(y).getBytes())])])]),h]);g.push(S)}if(g.length>0){var v=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,g),E=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(v).getBytes())])]);p.push(E)}var A=null;if(null!==e){var _=a.wrapRsaPrivateKey(a.privateKeyToAsn1(e));A=null===r?o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.oids.keyBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[_]),c]):o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.oids.pkcs8ShroudedKeyBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[a.encryptPrivateKeyInfo(_,r,s)]),c]);var b=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[A]),T=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(b).getBytes())])]);p.push(T)}var I,w=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,p);if(s.useMac){var C=n.md.sha1.create(),O=new n.util.ByteBuffer(n.random.getBytes(s.saltSize)),D=s.count,P=(e=i.generateKey(r,O,3,D,20),n.hmac.create());P.start(C,e),P.update(o.toDer(w).getBytes());var N=P.getMac();I=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.oids.sha1).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,N.getBytes())]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,O.getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(D).getBytes())])}return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(3).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(w).getBytes())])]),I])},i.generateKey=n.pbe.generatePkcs12Key},23023:(e,t,r)=>{var n=r(83418);r(10001),r(63290);var o=n.asn1,a=e.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=a;var i={name:"ContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};a.contentInfoValidator=i;var s={name:"EncryptedContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};a.envelopedDataValidator={name:"EnvelopedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(s)},a.encryptedDataValidator={name:"EncryptedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"}].concat(s)};var c={name:"SignerInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};a.signedDataValidator={name:"SignedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},i,{name:"SignedData.Certificates",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,capture:"signerInfos",optional:!0,value:[c]}]},a.recipientInfoValidator={name:"RecipientInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},63969:(e,t,r)=>{var n=r(83418);r(10001),r(43793),r(89007),r(30115),r(42497),r(84834),r(95032),r(9120),r(63290),r(4811);var o=n.asn1,a=e.exports=n.pki=n.pki||{};a.pemToDer=function(e){var t=n.pem.decode(e)[0];if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return n.util.createBuffer(t.body)},a.privateKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("PRIVATE KEY"!==t.type&&"RSA PRIVATE KEY"!==t.type){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var i=o.fromDer(t.body);return a.privateKeyFromAsn1(i)},a.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:o.toDer(a.privateKeyToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},a.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:o.toDer(e).getBytes()};return n.pem.encode(r,{maxline:t})}},14725:(e,t,r)=>{var n=r(83418);r(63290),r(97224),r(59018),function(){if(n.prime)e.exports=n.prime;else{var t=e.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,o=[6,4,2,4,2,4,6,2],a=new r(null);a.fromInt(30);var i=function(e,t){return e|t};t.generateProbablePrime=function(e,t,o){"function"==typeof t&&(o=t,t={});var a=(t=t||{}).algorithm||"PRIMEINC";"string"==typeof a&&(a={name:a}),a.options=a.options||{};var i=t.prng||n.random,c={nextBytes:function(e){for(var t=i.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if("PRIMEINC"===a.name)return function(e,t,o,a){return"workers"in o?function(e,t,o,a){if("undefined"==typeof Worker)return s(e,t,o,a);var i=u(e,t),c=o.workers,l=o.workLoad||100,d=30*l/8,p=o.workerScript||"forge/prime.worker.js";if(-1===c)return n.util.estimateCores((function(e,t){e&&(t=2),c=t-1,f()}));function f(){c=Math.max(1,c);for(var n=[],o=0;o<c;++o)n[o]=new Worker(p);for(o=0;o<c;++o)n[o].addEventListener("message",f);var s=!1;function f(o){if(!s){var c=o.data;if(c.found){for(var p=0;p<n.length;++p)n[p].terminate();return s=!0,a(null,new r(c.prime,16))}i.bitLength()>e&&(i=u(e,t));var f=i.toString(16);o.target.postMessage({hex:f,workLoad:l}),i.dAddOffset(d,0)}}}f()}(e,t,o,a):s(e,t,o,a)}(e,c,a.options,o);throw new Error("Invalid prime generation algorithm: "+a.name)}}function s(e,t,r,n){var o=u(e,t),a=function(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}(o.bitLength());"millerRabinTests"in r&&(a=r.millerRabinTests);var i=10;"maxBlockTime"in r&&(i=r.maxBlockTime),c(o,e,t,0,a,i,n)}function c(e,t,r,a,i,s,l){var d=+new Date;do{if(e.bitLength()>t&&(e=u(t,r)),e.isProbablePrime(i))return l(null,e);e.dAddOffset(o[a++%8],0)}while(s<0||+new Date-d<s);n.util.setImmediate((function(){c(e,t,r,a,i,s,l)}))}function u(e,t){var n=new r(e,t),o=e-1;return n.testBit(o)||n.bitwiseTo(r.ONE.shiftLeft(o),i,n),n.dAddOffset(31-n.mod(a).byteValue(),0),n}}()},64286:(e,t,r)=>{var n=r(73656),o=r(83418);r(63290);var a=null;!o.util.isNodejs||o.options.usePureJavaScript||n.versions["node-webkit"]||(a=r(63619)),(e.exports=o.prng=o.prng||{}).create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();function s(){if(t.pools[0].messageLength>=32)return c();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),c()}function c(){t.reseeds=4294967295===t.reseeds?0:t.reseeds+1;var e=t.plugin.md.create();e.update(t.keyBytes);for(var r=1,n=0;n<32;++n)t.reseeds%r==0&&(e.update(t.pools[n].digest().getBytes()),t.pools[n].start()),r<<=1;t.keyBytes=e.digest().getBytes(),e.start(),e.update(t.keyBytes);var o=e.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(o),t.generated=0}function u(e){var t=null,r=o.util.globalScope,n=r.crypto||r.msCrypto;n&&n.getRandomValues&&(t=function(e){return n.getRandomValues(e)});var a=o.util.createBuffer();if(t)for(;a.length()<e;){var i=Math.max(1,Math.min(e-a.length(),65536)/4),s=new Uint32Array(Math.floor(i));try{t(s);for(var c=0;c<s.length;++c)a.putInt32(s[c])}catch(e){if(!("undefined"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(a.length()<e)for(var u,l,d,p=Math.floor(65536*Math.random());a.length()<e;)for(l=16807*(65535&p),l+=(32767&(u=16807*(p>>16)))<<16,p=4294967295&(l=(2147483647&(l+=u>>15))+(l>>31)),c=0;c<3;++c)d=p>>>(c<<3),d^=Math.floor(256*Math.random()),a.putByte(255&d);return a.getBytes(e)}return t.pools=n,t.pool=0,t.generate=function(e,r){if(!r)return t.generateSync(e);var n=t.plugin.cipher,a=t.plugin.increment,i=t.plugin.formatKey,s=t.plugin.formatSeed,u=o.util.createBuffer();t.key=null,function l(d){if(d)return r(d);if(u.length()>=e)return r(null,u.getBytes(e));if(t.generated>1048575&&(t.key=null),null===t.key)return o.util.nextTick((function(){!function(e){if(t.pools[0].messageLength>=32)return c(),e();var r=32-t.pools[0].messageLength<<5;t.seedFile(r,(function(r,n){if(r)return e(r);t.collect(n),c(),e()}))}(l)}));var p=n(t.key,t.seed);t.generated+=p.length,u.putBytes(p),t.key=i(n(t.key,a(t.seed))),t.seed=s(n(t.key,t.seed)),o.util.setImmediate(l)}()},t.generateSync=function(e){var r=t.plugin.cipher,n=t.plugin.increment,a=t.plugin.formatKey,i=t.plugin.formatSeed;t.key=null;for(var c=o.util.createBuffer();c.length()<e;){t.generated>1048575&&(t.key=null),null===t.key&&s();var u=r(t.key,t.seed);t.generated+=u.length,c.putBytes(u),t.key=a(r(t.key,n(t.seed))),t.seed=i(r(t.key,t.seed))}return c.getBytes(e)},a?(t.seedFile=function(e,t){a.randomBytes(e,(function(e,r){if(e)return t(e);t(null,r.toString())}))},t.seedFileSync=function(e){return a.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,u(e))}catch(e){t(e)}},t.seedFileSync=u),t.collect=function(e){for(var r=e.length,n=0;n<r;++n)t.pools[t.pool].update(e.substr(n,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,r){for(var n="",o=0;o<r;o+=8)n+=String.fromCharCode(e>>o&255);t.collect(n)},t.registerWorker=function(e){e===self?t.seedFile=function(e,t){self.addEventListener("message",(function e(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",e),t(n.forge.prng.err,n.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:e}}})}:e.addEventListener("message",(function(r){var n=r.data;n.forge&&n.forge.prng&&t.seedFile(n.forge.prng.needed,(function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})}))}))},t}},95032:(e,t,r)=>{var n=r(83418);r(59018),r(63290),(e.exports=n.pss=n.pss||{}).create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,r=e.md,o=e.mgf,a=r.digestLength,i=e.salt||null;if("string"==typeof i&&(i=n.util.createBuffer(i)),"saltLength"in e)t=e.saltLength;else{if(null===i)throw new Error("Salt length not specified or specific salt not given.");t=i.length()}if(null!==i&&i.length()!==t)throw new Error("Given salt length does not match length of given salt.");var s=e.prng||n.random,c={encode:function(e,c){var u,l,d=c-1,p=Math.ceil(d/8),f=e.digest().getBytes();if(p<a+t+2)throw new Error("Message is too long to encrypt.");l=null===i?s.getBytesSync(t):i.bytes();var g=new n.util.ByteBuffer;g.fillWithByte(0,8),g.putBytes(f),g.putBytes(l),r.start(),r.update(g.getBytes());var m=r.digest().getBytes(),h=new n.util.ByteBuffer;h.fillWithByte(0,p-t-a-2),h.putByte(1),h.putBytes(l);var y=h.getBytes(),S=p-a-1,v=o.generate(m,S),E="";for(u=0;u<S;u++)E+=String.fromCharCode(y.charCodeAt(u)^v.charCodeAt(u));var A=65280>>8*p-d&255;return(E=String.fromCharCode(E.charCodeAt(0)&~A)+E.substr(1))+m+String.fromCharCode(188)},verify:function(e,i,s){var c,u=s-1,l=Math.ceil(u/8);if(i=i.substr(-l),l<a+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==i.charCodeAt(l-1))throw new Error("Encoded message does not end in 0xBC.");var d=l-a-1,p=i.substr(0,d),f=i.substr(d,a),g=65280>>8*l-u&255;if(0!=(p.charCodeAt(0)&g))throw new Error("Bits beyond keysize not zero as expected.");var m=o.generate(f,d),h="";for(c=0;c<d;c++)h+=String.fromCharCode(p.charCodeAt(c)^m.charCodeAt(c));h=String.fromCharCode(h.charCodeAt(0)&~g)+h.substr(1);var y=l-a-t-2;for(c=0;c<y;c++)if(0!==h.charCodeAt(c))throw new Error("Leftmost octets not zero as expected");if(1!==h.charCodeAt(y))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var S=h.substr(-t),v=new n.util.ByteBuffer;return v.fillWithByte(0,8),v.putBytes(e),v.putBytes(S),r.start(),r.update(v.getBytes()),f===r.digest().getBytes()}};return c}},59018:(e,t,r)=>{var n=r(83418);r(43882),r(51792),r(64286),r(63290),n.random&&n.random.getBytes?e.exports=n.random:function(t){var r={},o=new Array(4),a=n.util.createBuffer();function i(){var e=n.prng.create(r);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}r.formatKey=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),n.aes._expandKey(e,!1)},r.formatSeed=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},r.cipher=function(e,t){return n.aes._updateBlock(e,t,o,!1),a.putInt32(o[0]),a.putInt32(o[1]),a.putInt32(o[2]),a.putInt32(o[3]),a.getBytes()},r.increment=function(e){return++e[3],e},r.md=n.md.sha256;var s=i(),c=null,u=n.util.globalScope,l=u.crypto||u.msCrypto;if(l&&l.getRandomValues&&(c=function(e){return l.getRandomValues(e)}),n.options.usePureJavaScript||!n.util.isNodejs&&!c){if("undefined"==typeof window||window.document,s.collectInt(+new Date,32),"undefined"!=typeof navigator){var d="";for(var p in navigator)try{"string"==typeof navigator[p]&&(d+=navigator[p])}catch(e){}s.collect(d),d=null}t&&(t().mousemove((function(e){s.collectInt(e.clientX,16),s.collectInt(e.clientY,16)})),t().keypress((function(e){s.collectInt(e.charCode,8)})))}if(n.random)for(var p in s)n.random[p]=s[p];else n.random=s;n.random.createInstance=i,e.exports=n.random}("undefined"!=typeof jQuery?jQuery:null)},14528:(e,t,r)=>{var n=r(83418);r(63290);var o=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],a=[1,2,3,5],i=function(e,t){return e<<t&65535|(65535&e)>>16-t},s=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(e,t){"string"==typeof e&&(e=n.util.createBuffer(e)),t=t||128;var r,a=e,i=e.length(),s=t,c=Math.ceil(s/8),u=255>>(7&s);for(r=i;r<128;r++)a.putByte(o[a.at(r-1)+a.at(r-i)&255]);for(a.setAt(128-c,o[a.at(128-c)&u]),r=127-c;r>=0;r--)a.setAt(r,o[a.at(r+1)^a.at(r+c)]);return a};var c=function(e,t,r){var o,c,u,l,d=!1,p=null,f=null,g=null,m=[];for(e=n.rc2.expandKey(e,t),u=0;u<64;u++)m.push(e.getInt16Le());r?(o=function(e){for(u=0;u<4;u++)e[u]+=m[l]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),e[u]=i(e[u],a[u]),l++},c=function(e){for(u=0;u<4;u++)e[u]+=m[63&e[(u+3)%4]]}):(o=function(e){for(u=3;u>=0;u--)e[u]=s(e[u],a[u]),e[u]-=m[l]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),l--},c=function(e){for(u=3;u>=0;u--)e[u]-=m[63&e[(u+3)%4]]});var h=function(e){var t=[];for(u=0;u<4;u++){var n=p.getInt16Le();null!==g&&(r?n^=g.getInt16Le():g.putInt16Le(n)),t.push(65535&n)}l=r?0:63;for(var o=0;o<e.length;o++)for(var a=0;a<e[o][0];a++)e[o][1](t);for(u=0;u<4;u++)null!==g&&(r?g.putInt16Le(t[u]):t[u]^=g.getInt16Le()),f.putInt16Le(t[u])},y=null;return y={start:function(e,t){e&&"string"==typeof e&&(e=n.util.createBuffer(e)),d=!1,p=n.util.createBuffer(),f=t||new n.util.createBuffer,g=e,y.output=f},update:function(e){for(d||p.putBuffer(e);p.length()>=8;)h([[5,o],[1,c],[6,o],[1,c],[5,o]])},finish:function(e){var t=!0;if(r)if(e)t=e(8,p,!r);else{var n=8===p.length()?8:8-p.length();p.fillWithByte(n,n)}if(t&&(d=!0,y.update()),!r&&(t=0===p.length()))if(e)t=e(8,f,!r);else{var o=f.length(),a=f.at(o-1);a>o?t=!1:f.truncate(a)}return t}}};n.rc2.startEncrypting=function(e,t,r){var o=n.rc2.createEncryptionCipher(e,128);return o.start(t,r),o},n.rc2.createEncryptionCipher=function(e,t){return c(e,t,!0)},n.rc2.startDecrypting=function(e,t,r){var o=n.rc2.createDecryptionCipher(e,128);return o.start(t,r),o},n.rc2.createDecryptionCipher=function(e,t){return c(e,t,!1)}},9120:(e,t,r)=>{var n=r(83418);if(r(10001),r(97224),r(43793),r(7993),r(14725),r(59018),r(63290),void 0===o)var o=n.jsbn.BigInteger;var a=n.util.isNodejs?r(63619):null,i=n.asn1,s=n.util;n.pki=n.pki||{},e.exports=n.pki.rsa=n.rsa=n.rsa||{};var c=n.pki,u=[6,4,2,4,2,4,6,2],l={name:"PrivateKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},d={name:"RSAPrivateKey",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},p={name:"RSAPublicKey",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},f=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},g={name:"DigestInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,type:i.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},m=function(e){var t;if(!(e.algorithm in c.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}t=c.oids[e.algorithm];var n=i.oidToDer(t).getBytes(),o=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),a=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);a.value.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,n)),a.value.push(i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,""));var s=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.digest().getBytes());return o.value.push(a),o.value.push(s),i.toDer(o).getBytes()},h=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var a;t.dP||(t.dP=t.d.mod(t.p.subtract(o.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(o.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{a=new o(n.util.bytesToHex(n.random.getBytes(t.n.bitLength()/8)),16)}while(a.compareTo(t.n)>=0||!a.gcd(t.n).equals(o.ONE));for(var i=(e=e.multiply(a.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(s)<0;)i=i.add(t.p);var c=i.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return c.multiply(a.modInverse(t.n)).mod(t.n)};function y(e,t,r){var o=n.util.createBuffer(),a=Math.ceil(t.n.bitLength()/8);if(e.length>a-11){var i=new Error("Message is too long for PKCS#1 v1.5 padding.");throw i.length=e.length,i.max=a-11,i}o.putByte(0),o.putByte(r);var s,c=a-3-e.length;if(0===r||1===r){s=0===r?0:255;for(var u=0;u<c;++u)o.putByte(s)}else for(;c>0;){var l=0,d=n.random.getBytes(c);for(u=0;u<c;++u)0===(s=d.charCodeAt(u))?++l:o.putByte(s);c=l}return o.putByte(0),o.putBytes(e),o}function S(e,t,r,o){var a=Math.ceil(t.n.bitLength()/8),i=n.util.createBuffer(e),s=i.getByte(),c=i.getByte();if(0!==s||r&&0!==c&&1!==c||!r&&2!=c||r&&0===c&&void 0===o)throw new Error("Encryption block is invalid.");var u=0;if(0===c){u=a-3-o;for(var l=0;l<u;++l)if(0!==i.getByte())throw new Error("Encryption block is invalid.")}else if(1===c)for(u=0;i.length()>1;){if(255!==i.getByte()){--i.read;break}++u}else if(2===c)for(u=0;i.length()>1;){if(0===i.getByte()){--i.read;break}++u}if(0!==i.getByte()||u!==a-3-i.length())throw new Error("Encryption block is invalid.");return i.getBytes()}function v(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=n.util.hexToBytes(t);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function E(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function A(e){return n.util.isNodejs&&"function"==typeof a[e]}function _(e){return void 0!==s.globalScope&&"object"==typeof s.globalScope.crypto&&"object"==typeof s.globalScope.crypto.subtle&&"function"==typeof s.globalScope.crypto.subtle[e]}function b(e){return void 0!==s.globalScope&&"object"==typeof s.globalScope.msCrypto&&"object"==typeof s.globalScope.msCrypto.subtle&&"function"==typeof s.globalScope.msCrypto.subtle[e]}function T(e){for(var t=n.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),o=0;o<t.length;++o)r[o]=t.charCodeAt(o);return r}c.rsa.encrypt=function(e,t,r){var a,i=r,s=Math.ceil(t.n.bitLength()/8);!1!==r&&!0!==r?(i=2===r,a=y(e,t,r)):(a=n.util.createBuffer()).putBytes(e);for(var c=new o(a.toHex(),16),u=h(c,t,i).toString(16),l=n.util.createBuffer(),d=s-Math.ceil(u.length/2);d>0;)l.putByte(0),--d;return l.putBytes(n.util.hexToBytes(u)),l.getBytes()},c.rsa.decrypt=function(e,t,r,a){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=i,s}var c=new o(n.util.createBuffer(e).toHex(),16);if(c.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var u=h(c,t,r).toString(16),l=n.util.createBuffer(),d=i-Math.ceil(u.length/2);d>0;)l.putByte(0),--d;return l.putBytes(n.util.hexToBytes(u)),!1!==a?S(l.getBytes(),t,r):l.getBytes()},c.rsa.createKeyPairGenerationState=function(e,t,r){"string"==typeof e&&(e=parseInt(e,10)),e=e||2048;var a,i=(r=r||{}).prng||n.random,s={nextBytes:function(e){for(var t=i.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},c=r.algorithm||"PRIMEINC";if("PRIMEINC"!==c)throw new Error("Invalid key generation algorithm: "+c);return(a={algorithm:c,state:0,bits:e,rng:s,eInt:t||65537,e:new o(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(a.eInt),a},c.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new o(null);r.fromInt(30);for(var n,a=0,i=function(e,t){return e|t},s=+new Date,l=0;null===e.keys&&(t<=0||l<t);){if(0===e.state){var d=null===e.p?e.pBits:e.qBits,p=d-1;0===e.pqState?(e.num=new o(d,e.rng),e.num.testBit(p)||e.num.bitwiseTo(o.ONE.shiftLeft(p),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),a=0,++e.pqState):1===e.pqState?e.num.bitLength()>d?e.pqState=0:e.num.isProbablePrime(E(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(u[a++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(o.ONE).gcd(e.e).compareTo(o.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(o.ONE),e.q1=e.q.subtract(o.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(o.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var f=e.e.modInverse(e.phi);e.keys={privateKey:c.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:c.rsa.setPublicKey(e.n,e.e)}}l+=(n=+new Date)-s,s=n}return null!==e.keys},c.rsa.generateKeyPair=function(e,t,r,u){if(1===arguments.length?"object"==typeof e?(r=e,e=void 0):"function"==typeof e&&(u=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof t?(u=t,t=void 0):"number"!=typeof t&&(r=t,t=void 0):(r=e,u=t,e=void 0,t=void 0):3===arguments.length&&("number"==typeof t?"function"==typeof r&&(u=r,r=void 0):(u=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||2048),void 0===t&&(t=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(65537===t||3===t))if(u){if(A("generateKeyPair"))return a.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(e,t,r){if(e)return u(e);u(null,{privateKey:c.privateKeyFromPem(r),publicKey:c.publicKeyFromPem(t)})}));if(_("generateKey")&&_("exportKey"))return s.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:T(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(e){return s.globalScope.crypto.subtle.exportKey("pkcs8",e.privateKey)})).then(void 0,(function(e){u(e)})).then((function(e){if(e){var t=c.privateKeyFromAsn1(i.fromDer(n.util.createBuffer(e)));u(null,{privateKey:t,publicKey:c.setRsaPublicKey(t.n,t.e)})}}));if(b("generateKey")&&b("exportKey")){var l=s.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:T(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return l.oncomplete=function(e){var t=e.target.result,r=s.globalScope.msCrypto.subtle.exportKey("pkcs8",t.privateKey);r.oncomplete=function(e){var t=e.target.result,r=c.privateKeyFromAsn1(i.fromDer(n.util.createBuffer(t)));u(null,{privateKey:r,publicKey:c.setRsaPublicKey(r.n,r.e)})},r.onerror=function(e){u(e)}},void(l.onerror=function(e){u(e)})}}else if(A("generateKeyPairSync")){var d=a.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:c.privateKeyFromPem(d.privateKey),publicKey:c.publicKeyFromPem(d.publicKey)}}var p=c.rsa.createKeyPairGenerationState(e,t,r);if(!u)return c.rsa.stepKeyPairGenerationState(p,0),p.keys;!function(e,t,r){"function"==typeof t&&(r=t,t={});var a={algorithm:{name:(t=t||{}).algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};function i(){s(e.pBits,(function(t,n){return t?r(t):(e.p=n,null!==e.q?u(t,e.q):void s(e.qBits,u))}))}function s(e,t){n.prime.generateProbablePrime(e,a,t)}function u(t,n){if(t)return r(t);if(e.q=n,e.p.compareTo(e.q)<0){var a=e.p;e.p=e.q,e.q=a}if(0!==e.p.subtract(o.ONE).gcd(e.e).compareTo(o.ONE))return e.p=null,void i();if(0!==e.q.subtract(o.ONE).gcd(e.e).compareTo(o.ONE))return e.q=null,void s(e.qBits,u);if(e.p1=e.p.subtract(o.ONE),e.q1=e.q.subtract(o.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(o.ONE))return e.p=e.q=null,void i();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void s(e.qBits,u);var l=e.e.modInverse(e.phi);e.keys={privateKey:c.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:c.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}"prng"in t&&(a.prng=t.prng),i()}(p,r,u)},c.setRsaPublicKey=c.rsa.setPublicKey=function(e,t){var r={n:e,e:t,encrypt:function(e,t,o){if("string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,r){return y(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return n.pkcs1.encode_rsa_oaep(t,e,o)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"==typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var a=t.encode(e,r,!0);return c.rsa.encrypt(a,r,!0)},verify:function(e,t,o,a){"string"==typeof o?o=o.toUpperCase():void 0===o&&(o="RSASSA-PKCS1-V1_5"),void 0===a&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===o?o={verify:function(e,t){t=S(t,r,!0);var o=i.fromDer(t,{parseAllBytes:a._parseAllDigestBytes}),s={},c=[];if(!i.validate(o,g,s,c))throw(u=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=c,u;var u,l=i.derToOid(s.algorithmIdentifier);if(l!==n.oids.md2&&l!==n.oids.md5&&l!==n.oids.sha1&&l!==n.oids.sha224&&l!==n.oids.sha256&&l!==n.oids.sha384&&l!==n.oids.sha512&&l!==n.oids["sha512-224"]&&l!==n.oids["sha512-256"])throw(u=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=l,u;if((l===n.oids.md2||l===n.oids.md5)&&!("parameters"in s))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return e===s.digest}}:"NONE"!==o&&"NULL"!==o&&null!==o||(o={verify:function(e,t){return e===S(t,r,!0)}});var s=c.rsa.decrypt(t,r,!0,!1);return o.verify(e,s,r.n.bitLength())}};return r},c.setRsaPrivateKey=c.rsa.setPrivateKey=function(e,t,r,o,a,i,s,u){var l={n:e,e:t,d:r,p:o,q:a,dP:i,dQ:s,qInv:u,decrypt:function(e,t,r){"string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var o=c.rsa.decrypt(e,l,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:S};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return n.pkcs1.decode_rsa_oaep(t,e,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(o,l,!1)},sign:function(e,t){var r=!1;"string"==typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:m},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);var n=t.encode(e,l.n.bitLength());return c.rsa.encrypt(n,l,r)}};return l},c.wrapRsaPrivateKey=function(e){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(0).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(c.oids.rsaEncryption).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(e).getBytes())])},c.privateKeyFromAsn1=function(e){var t,r,a,s,u,p,f,g,m={},h=[];if(i.validate(e,l,m,h)&&(e=i.fromDer(n.util.createBuffer(m.privateKey))),m={},h=[],!i.validate(e,d,m,h)){var y=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw y.errors=h,y}return t=n.util.createBuffer(m.privateKeyModulus).toHex(),r=n.util.createBuffer(m.privateKeyPublicExponent).toHex(),a=n.util.createBuffer(m.privateKeyPrivateExponent).toHex(),s=n.util.createBuffer(m.privateKeyPrime1).toHex(),u=n.util.createBuffer(m.privateKeyPrime2).toHex(),p=n.util.createBuffer(m.privateKeyExponent1).toHex(),f=n.util.createBuffer(m.privateKeyExponent2).toHex(),g=n.util.createBuffer(m.privateKeyCoefficient).toHex(),c.setRsaPrivateKey(new o(t,16),new o(r,16),new o(a,16),new o(s,16),new o(u,16),new o(p,16),new o(f,16),new o(g,16))},c.privateKeyToAsn1=c.privateKeyToRSAPrivateKey=function(e){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(0).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,v(e.n)),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,v(e.e)),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,v(e.d)),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,v(e.p)),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,v(e.q)),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,v(e.dP)),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,v(e.dQ)),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,v(e.qInv))])},c.publicKeyFromAsn1=function(e){var t={},r=[];if(i.validate(e,f,t,r)){var a,s=i.derToOid(t.publicKeyOid);if(s!==c.oids.rsaEncryption)throw(a=new Error("Cannot read public key. Unknown OID.")).oid=s,a;e=t.rsaPublicKey}if(r=[],!i.validate(e,p,t,r))throw(a=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,a;var u=n.util.createBuffer(t.publicKeyModulus).toHex(),l=n.util.createBuffer(t.publicKeyExponent).toHex();return c.setRsaPublicKey(new o(u,16),new o(l,16))},c.publicKeyToAsn1=c.publicKeyToSubjectPublicKeyInfo=function(e){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(c.oids.rsaEncryption).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,[c.publicKeyToRSAPublicKey(e)])])},c.publicKeyToRSAPublicKey=function(e){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,v(e.n)),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,v(e.e))])}},28804:(e,t,r)=>{var n=r(83418);r(43730),r(63290);var o=e.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=o,o.create=function(){i||(a=String.fromCharCode(128),a+=n.util.fillString(String.fromCharCode(0),64),i=!0);var e=null,t=n.util.createBuffer(),r=new Array(80),o={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,a=0;a<r;++a)o.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},o}};return o.start(),o.update=function(a,i){"utf8"===i&&(a=n.util.encodeUtf8(a));var c=a.length;o.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var u=o.fullMessageLength.length-1;u>=0;--u)o.fullMessageLength[u]+=c[1],c[1]=c[0]+(o.fullMessageLength[u]/4294967296>>>0),o.fullMessageLength[u]=o.fullMessageLength[u]>>>0,c[0]=c[1]/4294967296>>>0;return t.putBytes(a),s(e,r,t),(t.read>2048||0===t.length())&&t.compact(),o},o.digest=function(){var i=n.util.createBuffer();i.putBytes(t.bytes());var c,u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;i.putBytes(a.substr(0,o.blockLength-u));for(var l=8*o.fullMessageLength[0],d=0;d<o.fullMessageLength.length-1;++d)l+=(c=8*o.fullMessageLength[d+1])/4294967296>>>0,i.putInt32(l>>>0),l=c>>>0;i.putInt32(l);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};s(p,r,i);var f=n.util.createBuffer();return f.putInt32(p.h0),f.putInt32(p.h1),f.putInt32(p.h2),f.putInt32(p.h3),f.putInt32(p.h4),f},o};var a=null,i=!1;function s(e,t,r){for(var n,o,a,i,s,c,u,l=r.length();l>=64;){for(o=e.h0,a=e.h1,i=e.h2,s=e.h3,c=e.h4,u=0;u<16;++u)n=r.getInt32(),t[u]=n,n=(o<<5|o>>>27)+(s^a&(i^s))+c+1518500249+n,c=s,s=i,i=(a<<30|a>>>2)>>>0,a=o,o=n;for(;u<20;++u)n=(n=t[u-3]^t[u-8]^t[u-14]^t[u-16])<<1|n>>>31,t[u]=n,n=(o<<5|o>>>27)+(s^a&(i^s))+c+1518500249+n,c=s,s=i,i=(a<<30|a>>>2)>>>0,a=o,o=n;for(;u<32;++u)n=(n=t[u-3]^t[u-8]^t[u-14]^t[u-16])<<1|n>>>31,t[u]=n,n=(o<<5|o>>>27)+(a^i^s)+c+1859775393+n,c=s,s=i,i=(a<<30|a>>>2)>>>0,a=o,o=n;for(;u<40;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(o<<5|o>>>27)+(a^i^s)+c+1859775393+n,c=s,s=i,i=(a<<30|a>>>2)>>>0,a=o,o=n;for(;u<60;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(o<<5|o>>>27)+(a&i|s&(a^i))+c+2400959708+n,c=s,s=i,i=(a<<30|a>>>2)>>>0,a=o,o=n;for(;u<80;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(o<<5|o>>>27)+(a^i^s)+c+3395469782+n,c=s,s=i,i=(a<<30|a>>>2)>>>0,a=o,o=n;e.h0=e.h0+o|0,e.h1=e.h1+a|0,e.h2=e.h2+i|0,e.h3=e.h3+s|0,e.h4=e.h4+c|0,l-=64}}},51792:(e,t,r)=>{var n=r(83418);r(43730),r(63290);var o=e.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=o,o.create=function(){i||(a=String.fromCharCode(128),a+=n.util.fillString(String.fromCharCode(0),64),s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=!0);var e=null,t=n.util.createBuffer(),r=new Array(64),o={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,a=0;a<r;++a)o.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},o}};return o.start(),o.update=function(a,i){"utf8"===i&&(a=n.util.encodeUtf8(a));var s=a.length;o.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var u=o.fullMessageLength.length-1;u>=0;--u)o.fullMessageLength[u]+=s[1],s[1]=s[0]+(o.fullMessageLength[u]/4294967296>>>0),o.fullMessageLength[u]=o.fullMessageLength[u]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(a),c(e,r,t),(t.read>2048||0===t.length())&&t.compact(),o},o.digest=function(){var i=n.util.createBuffer();i.putBytes(t.bytes());var s,u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;i.putBytes(a.substr(0,o.blockLength-u));for(var l=8*o.fullMessageLength[0],d=0;d<o.fullMessageLength.length-1;++d)l+=(s=8*o.fullMessageLength[d+1])/4294967296>>>0,i.putInt32(l>>>0),l=s>>>0;i.putInt32(l);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};c(p,r,i);var f=n.util.createBuffer();return f.putInt32(p.h0),f.putInt32(p.h1),f.putInt32(p.h2),f.putInt32(p.h3),f.putInt32(p.h4),f.putInt32(p.h5),f.putInt32(p.h6),f.putInt32(p.h7),f},o};var a=null,i=!1,s=null;function c(e,t,r){for(var n,o,a,i,c,u,l,d,p,f,g,m,h,y=r.length();y>=64;){for(c=0;c<16;++c)t[c]=r.getInt32();for(;c<64;++c)n=((n=t[c-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,o=((o=t[c-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,t[c]=n+t[c-7]+o+t[c-16]|0;for(u=e.h0,l=e.h1,d=e.h2,p=e.h3,f=e.h4,g=e.h5,m=e.h6,h=e.h7,c=0;c<64;++c)a=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),i=u&l|d&(u^l),n=h+((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(m^f&(g^m))+s[c]+t[c],h=m,m=g,g=f,f=p+n>>>0,p=d,d=l,l=u,u=n+(o=a+i)>>>0;e.h0=e.h0+u|0,e.h1=e.h1+l|0,e.h2=e.h2+d|0,e.h3=e.h3+p|0,e.h4=e.h4+f|0,e.h5=e.h5+g|0,e.h6=e.h6+m|0,e.h7=e.h7+h|0,y-=64}}},64301:(e,t,r)=>{var n=r(83418);r(43730),r(63290);var o=e.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=o;var a=n.sha384=n.sha512.sha384=n.sha512.sha384||{};a.create=function(){return o.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=a,n.sha512.sha256=n.sha512.sha256||{create:function(){return o.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return o.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,o.create=function(e){if(s||(i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),128),c=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(u={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],u["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],u["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],u["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],s=!0),void 0===e&&(e="SHA-512"),!(e in u))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=u[e],r=null,o=n.util.createBuffer(),a=new Array(80),d=0;d<80;++d)a[d]=new Array(2);var p=64;switch(e){case"SHA-384":p=48;break;case"SHA-512/256":p=32;break;case"SHA-512/224":p=28}var f={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:p,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){f.messageLength=0,f.fullMessageLength=f.messageLength128=[];for(var e=f.messageLengthSize/4,a=0;a<e;++a)f.fullMessageLength.push(0);for(o=n.util.createBuffer(),r=new Array(t.length),a=0;a<t.length;++a)r[a]=t[a].slice(0);return f}};return f.start(),f.update=function(e,t){"utf8"===t&&(e=n.util.encodeUtf8(e));var i=e.length;f.messageLength+=i,i=[i/4294967296>>>0,i>>>0];for(var s=f.fullMessageLength.length-1;s>=0;--s)f.fullMessageLength[s]+=i[1],i[1]=i[0]+(f.fullMessageLength[s]/4294967296>>>0),f.fullMessageLength[s]=f.fullMessageLength[s]>>>0,i[0]=i[1]/4294967296>>>0;return o.putBytes(e),l(r,a,o),(o.read>2048||0===o.length())&&o.compact(),f},f.digest=function(){var t=n.util.createBuffer();t.putBytes(o.bytes());var s,c=f.fullMessageLength[f.fullMessageLength.length-1]+f.messageLengthSize&f.blockLength-1;t.putBytes(i.substr(0,f.blockLength-c));for(var u=8*f.fullMessageLength[0],d=0;d<f.fullMessageLength.length-1;++d)u+=(s=8*f.fullMessageLength[d+1])/4294967296>>>0,t.putInt32(u>>>0),u=s>>>0;t.putInt32(u);var p=new Array(r.length);for(d=0;d<r.length;++d)p[d]=r[d].slice(0);l(p,a,t);var g,m=n.util.createBuffer();for(g="SHA-512"===e?p.length:"SHA-384"===e?p.length-2:p.length-4,d=0;d<g;++d)m.putInt32(p[d][0]),d===g-1&&"SHA-512/224"===e||m.putInt32(p[d][1]);return m},f};var i=null,s=!1,c=null,u=null;function l(e,t,r){for(var n,o,a,i,s,u,l,d,p,f,g,m,h,y,S,v,E,A,_,b,T,I,w,C,O,D,P,N,R,U,L,M,k,B=r.length();B>=128;){for(P=0;P<16;++P)t[P][0]=r.getInt32()>>>0,t[P][1]=r.getInt32()>>>0;for(;P<80;++P)n=(((N=(U=t[P-2])[0])>>>19|(R=U[1])<<13)^(R>>>29|N<<3)^N>>>6)>>>0,o=((N<<13|R>>>19)^(R<<3|N>>>29)^(N<<26|R>>>6))>>>0,a=(((N=(M=t[P-15])[0])>>>1|(R=M[1])<<31)^(N>>>8|R<<24)^N>>>7)>>>0,i=((N<<31|R>>>1)^(N<<24|R>>>8)^(N<<25|R>>>7))>>>0,L=t[P-7],k=t[P-16],R=o+L[1]+i+k[1],t[P][0]=n+L[0]+a+k[0]+(R/4294967296>>>0)>>>0,t[P][1]=R>>>0;for(g=e[0][0],m=e[0][1],h=e[1][0],y=e[1][1],S=e[2][0],v=e[2][1],E=e[3][0],A=e[3][1],_=e[4][0],b=e[4][1],T=e[5][0],I=e[5][1],w=e[6][0],C=e[6][1],O=e[7][0],D=e[7][1],P=0;P<80;++P)l=((_>>>14|b<<18)^(_>>>18|b<<14)^(b>>>9|_<<23))>>>0,d=(w^_&(T^w))>>>0,s=((g>>>28|m<<4)^(m>>>2|g<<30)^(m>>>7|g<<25))>>>0,u=((g<<4|m>>>28)^(m<<30|g>>>2)^(m<<25|g>>>7))>>>0,p=(g&h|S&(g^h))>>>0,f=(m&y|v&(m^y))>>>0,R=D+(((_<<18|b>>>14)^(_<<14|b>>>18)^(b<<23|_>>>9))>>>0)+((C^b&(I^C))>>>0)+c[P][1]+t[P][1],n=O+l+d+c[P][0]+t[P][0]+(R/4294967296>>>0)>>>0,o=R>>>0,a=s+p+((R=u+f)/4294967296>>>0)>>>0,i=R>>>0,O=w,D=C,w=T,C=I,T=_,I=b,_=E+n+((R=A+o)/4294967296>>>0)>>>0,b=R>>>0,E=S,A=v,S=h,v=y,h=g,y=m,g=n+a+((R=o+i)/4294967296>>>0)>>>0,m=R>>>0;R=e[0][1]+m,e[0][0]=e[0][0]+g+(R/4294967296>>>0)>>>0,e[0][1]=R>>>0,R=e[1][1]+y,e[1][0]=e[1][0]+h+(R/4294967296>>>0)>>>0,e[1][1]=R>>>0,R=e[2][1]+v,e[2][0]=e[2][0]+S+(R/4294967296>>>0)>>>0,e[2][1]=R>>>0,R=e[3][1]+A,e[3][0]=e[3][0]+E+(R/4294967296>>>0)>>>0,e[3][1]=R>>>0,R=e[4][1]+b,e[4][0]=e[4][0]+_+(R/4294967296>>>0)>>>0,e[4][1]=R>>>0,R=e[5][1]+I,e[5][0]=e[5][0]+T+(R/4294967296>>>0)>>>0,e[5][1]=R>>>0,R=e[6][1]+C,e[6][0]=e[6][0]+w+(R/4294967296>>>0)>>>0,e[6][1]=R>>>0,R=e[7][1]+D,e[7][0]=e[7][0]+O+(R/4294967296>>>0)>>>0,e[7][1]=R>>>0,B-=128}}},63290:(e,t,r)=>{var n=r(73656),o=r(3275).Buffer,a=r(83418),i=r(40976),s=e.exports=a.util=a.util||{};function c(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function u(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(s.isArrayBuffer(e)||s.isArrayBufferView(e))if(void 0!==o&&e instanceof o)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(e){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof u||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if(void 0!==n&&n.nextTick&&!n.browser)return s.nextTick=n.nextTick,void("function"==typeof setImmediate?s.setImmediate=setImmediate:s.setImmediate=s.nextTick);if("function"==typeof setImmediate)return s.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(s.nextTick=function(e){return setImmediate(e)});if(s.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",t=[];s.setImmediate=function(r){t.push(r),1===t.length&&window.postMessage(e,"*")},window.addEventListener("message",(function(r){if(r.source===window&&r.data===e){r.stopPropagation();var n=t.slice();t.length=0,n.forEach((function(e){e()}))}}),!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),o=!0,a=document.createElement("div");t=[],new MutationObserver((function(){var e=t.slice();t.length=0,e.forEach((function(e){e()}))})).observe(a,{attributes:!0});var i=s.setImmediate;s.setImmediate=function(e){Date.now()-r>15?(r=Date.now(),i(e)):(t.push(e),1===t.length&&a.setAttribute("a",o=!o))}}s.nextTick=s.setImmediate}(),s.isNodejs=void 0!==n&&n.versions&&n.versions.node,s.globalScope=s.isNodejs?r.g:"undefined"==typeof self?window:self,s.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},s.isArrayBufferView=function(e){return e&&s.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},s.ByteBuffer=u,s.ByteStringBuffer=u,s.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},s.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},s.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},s.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},s.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},s.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},s.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(s.encodeUtf8(e))},s.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},s.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},s.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},s.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},s.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},s.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},s.ByteStringBuffer.prototype.putInt=function(e,t){c(t);var r="";do{t-=8,r+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(r)},s.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},s.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},s.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},s.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},s.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},s.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},s.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},s.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},s.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},s.ByteStringBuffer.prototype.getInt=function(e){c(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},s.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},s.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},s.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},s.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},s.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},s.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},s.ByteStringBuffer.prototype.copy=function(){var e=s.createBuffer(this.data);return e.read=this.read,e},s.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},s.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},s.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},s.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},s.ByteStringBuffer.prototype.toString=function(){return s.decodeUtf8(this.bytes())},s.DataBuffer=function(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=s.isArrayBuffer(e),n=s.isArrayBufferView(e);if(r||n)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},s.DataBuffer.prototype.length=function(){return this.write-this.read},s.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},s.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},s.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},s.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},s.DataBuffer.prototype.putBytes=function(e,t){if(s.isArrayBufferView(e)){var r=(n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(s.isArrayBuffer(e)){var n=new Uint8Array(e);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(e instanceof s.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&s.isArrayBufferView(e.data))return n=new Uint8Array(e.data.byteLength,e.read,e.length()),this.accommodate(n.byteLength),new Uint8Array(e.data.byteLength,this.write).set(n),this.write+=n.byteLength,this;if(e instanceof s.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"==typeof e){var o;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.hex.decode(e,o,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),o=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.base64.decode(e,o,this.write),this;if("utf8"===t&&(e=s.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.raw.decode(o),this;if("utf16"===t)return this.accommodate(2*e.length),o=new Uint16Array(this.data.buffer,this.write),this.write+=s.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},s.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},s.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},s.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},s.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},s.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},s.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},s.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},s.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},s.DataBuffer.prototype.putInt=function(e,t){c(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},s.DataBuffer.prototype.putSignedInt=function(e,t){return c(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},s.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},s.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},s.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},s.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},s.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},s.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},s.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},s.DataBuffer.prototype.getInt=function(e){c(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},s.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},s.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},s.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},s.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},s.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},s.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},s.DataBuffer.prototype.copy=function(){return new s.DataBuffer(this)},s.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},s.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},s.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},s.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},s.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return s.binary.raw.encode(t);if("hex"===e)return s.binary.hex.encode(t);if("base64"===e)return s.binary.base64.encode(t);if("utf8"===e)return s.text.utf8.decode(t);if("utf16"===e)return s.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},s.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=s.encodeUtf8(e)),new s.ByteBuffer(e)},s.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},s.xorBytes=function(e,t,r){for(var n="",o="",a="",i=0,s=0;r>0;--r,++i)o=e.charCodeAt(i)^t.charCodeAt(i),s>=10&&(n+=a,a="",s=0),a+=String.fromCharCode(o),++s;return n+a},s.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},s.bytesToHex=function(e){return s.createBuffer(e).toHex()},s.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],p="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";s.encode64=function(e,t){for(var r,n,o,a="",i="",s=0;s<e.length;)r=e.charCodeAt(s++),n=e.charCodeAt(s++),o=e.charCodeAt(s++),a+=l.charAt(r>>2),a+=l.charAt((3&r)<<4|n>>4),isNaN(n)?a+="==":(a+=l.charAt((15&n)<<2|o>>6),a+=isNaN(o)?"=":l.charAt(63&o)),t&&a.length>t&&(i+=a.substr(0,t)+"\r\n",a=a.substr(t));return i+a},s.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,o,a="",i=0;i<e.length;)t=d[e.charCodeAt(i++)-43],r=d[e.charCodeAt(i++)-43],n=d[e.charCodeAt(i++)-43],o=d[e.charCodeAt(i++)-43],a+=String.fromCharCode(t<<2|r>>4),64!==n&&(a+=String.fromCharCode((15&r)<<4|n>>2),64!==o&&(a+=String.fromCharCode((3&n)<<6|o)));return a},s.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},s.decodeUtf8=function(e){return decodeURIComponent(escape(e))},s.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:i.encode,decode:i.decode}},s.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},s.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var o=r=r||0,a=0;a<e.length;++a)n[o++]=e.charCodeAt(a);return t?o-r:n},s.binary.hex.encode=s.bytesToHex,s.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var o=0,a=r=r||0;for(1&e.length&&(o=1,n[a++]=parseInt(e[0],16));o<e.length;o+=2)n[a++]=parseInt(e.substr(o,2),16);return t?a-r:n},s.binary.base64.encode=function(e,t){for(var r,n,o,a="",i="",s=0;s<e.byteLength;)r=e[s++],n=e[s++],o=e[s++],a+=l.charAt(r>>2),a+=l.charAt((3&r)<<4|n>>4),isNaN(n)?a+="==":(a+=l.charAt((15&n)<<2|o>>6),a+=isNaN(o)?"=":l.charAt(63&o)),t&&a.length>t&&(i+=a.substr(0,t)+"\r\n",a=a.substr(t));return i+a},s.binary.base64.decode=function(e,t,r){var n,o,a,i,s=t;s||(s=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var c=0,u=r=r||0;c<e.length;)n=d[e.charCodeAt(c++)-43],o=d[e.charCodeAt(c++)-43],a=d[e.charCodeAt(c++)-43],i=d[e.charCodeAt(c++)-43],s[u++]=n<<2|o>>4,64!==a&&(s[u++]=(15&o)<<4|a>>2,64!==i&&(s[u++]=(3&a)<<6|i));return t?u-r:s.subarray(0,u)},s.binary.base58.encode=function(e,t){return s.binary.baseN.encode(e,p,t)},s.binary.base58.decode=function(e,t){return s.binary.baseN.decode(e,p,t)},s.text={utf8:{},utf16:{}},s.text.utf8.encode=function(e,t,r){e=s.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length));for(var o=r=r||0,a=0;a<e.length;++a)n[o++]=e.charCodeAt(a);return t?o-r:n},s.text.utf8.decode=function(e){return s.decodeUtf8(String.fromCharCode.apply(null,e))},s.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var o=new Uint16Array(n.buffer),a=r=r||0,i=r,s=0;s<e.length;++s)o[i++]=e.charCodeAt(s),a+=2;return t?a-r:n},s.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},s.deflate=function(e,t,r){if(t=s.decode64(e.deflate(s.encode64(t)).rval),r){var n=2;32&t.charCodeAt(1)&&(n=6),t=t.substring(n,t.length-4)}return t},s.inflate=function(e,t,r){var n=e.inflate(s.encode64(t)).rval;return null===n?null:s.decode64(n)};var f=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(null===r?n=e.removeItem(t):(r=s.encode64(JSON.stringify(r)),n=e.setItem(t,r)),void 0!==n&&!0!==n.rval){var o=new Error(n.error.message);throw o.id=n.error.id,o.name=n.error.name,o}},g=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(s.decode64(r))),r},m=function(e,t,r,n){var o=g(e,t);null===o&&(o={}),o[r]=n,f(e,t,o)},h=function(e,t,r){var n=g(e,t);return null!==n&&(n=r in n?n[r]:null),n},y=function(e,t,r){var n=g(e,t);if(null!==n&&r in n){delete n[r];var o=!0;for(var a in n){o=!1;break}o&&(n=null),f(e,t,n)}},S=function(e,t){f(e,t,null)},v=function(e,t,r){var n,o=null;void 0===r&&(r=["web","flash"]);var a=!1,i=null;for(var s in r){n=r[s];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");o=e.apply(this,t),a="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,o=e.apply(this,t),a=!0)}catch(e){i=e}if(a)break}if(!a)throw i;return o};s.setItem=function(e,t,r,n,o){v(m,arguments,o)},s.getItem=function(e,t,r,n){return v(h,arguments,n)},s.removeItem=function(e,t,r,n){v(y,arguments,n)},s.clearItems=function(e,t,r){v(S,arguments,r)},s.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},s.format=function(e){for(var t,r,n=/%./g,o=0,a=[],i=0;t=n.exec(e);){(r=e.substring(i,n.lastIndex-2)).length>0&&a.push(r),i=n.lastIndex;var s=t[0][1];switch(s){case"s":case"o":o<arguments.length?a.push(arguments[1+o++]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+s+"?>")}}return a.push(e.substring(i)),a.join("")},s.formatNumber=function(e,t,r,n){var o=e,a=isNaN(t=Math.abs(t))?2:t,i=void 0===r?",":r,s=void 0===n?".":n,c=o<0?"-":"",u=parseInt(o=Math.abs(+o||0).toFixed(a),10)+"",l=u.length>3?u.length%3:0;return c+(l?u.substr(0,l)+s:"")+u.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+s)+(a?i+Math.abs(o-u).toFixed(a).slice(2):"")},s.formatSize=function(e){return e>=1073741824?s.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?s.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?s.formatNumber(e/1024,0)+" KiB":s.formatNumber(e,0)+" bytes"},s.bytesFromIP=function(e){return-1!==e.indexOf(".")?s.bytesFromIPv4(e):-1!==e.indexOf(":")?s.bytesFromIPv6(e):null},s.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var t=s.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()},s.bytesFromIPv6=function(e){for(var t=0,r=2*(8-(e=e.split(":").filter((function(e){return 0===e.length&&++t,!0}))).length+t),n=s.createBuffer(),o=0;o<8;++o)if(e[o]&&0!==e[o].length){var a=s.hexToBytes(e[o]);a.length<2&&n.putByte(0),n.putBytes(a)}else n.fillWithByte(0,r),r=0;return n.getBytes()},s.bytesToIP=function(e){return 4===e.length?s.bytesToIPv4(e):16===e.length?s.bytesToIPv6(e):null},s.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},s.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],r=[],n=0,o=0;o<e.length;o+=2){for(var a=s.bytesToHex(e[o]+e[o+1]);"0"===a[0]&&"0"!==a;)a=a.substr(1);if("0"===a){var i=r[r.length-1],c=t.length;i&&c===i.end+1?(i.end=c,i.end-i.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:c,end:c})}t.push(a)}if(r.length>0){var u=r[n];u.end-u.start>0&&(t.splice(u.start,u.end-u.start+1,""),0===u.start&&t.unshift(""),7===u.end&&t.push(""))}return t.join(":")},s.estimateCores=function(e,t){if("function"==typeof e&&(t=e,e={}),e=e||{},"cores"in s&&!e.update)return t(null,s.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return s.cores=navigator.hardwareConcurrency,t(null,s.cores);if("undefined"==typeof Worker)return s.cores=1,t(null,s.cores);if("undefined"==typeof Blob)return s.cores=2,t(null,s.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){for(var t=Date.now(),r=t+4;Date.now()<r;);self.postMessage({st:t,et:r})}))}.toString(),")()"],{type:"application/javascript"}));!function e(n,o,a){if(0===o){var i=Math.floor(n.reduce((function(e,t){return e+t}),0)/n.length);return s.cores=Math.max(1,i),URL.revokeObjectURL(r),t(null,s.cores)}!function(e,t){for(var n=[],o=[],a=0;a<e;++a){var i=new Worker(r);i.addEventListener("message",(function(r){if(o.push(r.data),o.length===e){for(var a=0;a<e;++a)n[a].terminate();t(null,o)}})),n.push(i)}for(a=0;a<e;++a)n[a].postMessage(a)}(a,(function(t,r){n.push(function(e,t){for(var r=[],n=0;n<e;++n)for(var o=t[n],a=r[n]=[],i=0;i<e;++i)if(n!==i){var s=t[i];(o.st>s.st&&o.st<s.et||s.st>o.st&&s.st<o.et)&&a.push(i)}return r.reduce((function(e,t){return Math.max(e,t.length)}),0)}(a,r)),e(n,o-1,a)}))}([],5,16)}},4811:(e,t,r)=>{var n=r(83418);r(43882),r(10001),r(86875),r(43730),r(39028),r(43793),r(30115),r(95032),r(9120),r(63290);var o=n.asn1,a=e.exports=n.pki=n.pki||{},i=a.oids,s={};s.CN=i.commonName,s.commonName="CN",s.C=i.countryName,s.countryName="C",s.L=i.localityName,s.localityName="L",s.ST=i.stateOrProvinceName,s.stateOrProvinceName="ST",s.O=i.organizationName,s.organizationName="O",s.OU=i.organizationalUnitName,s.organizationalUnitName="OU",s.E=i.emailAddress,s.emailAddress="E";var c=n.pki.rsa.publicKeyValidator,u={name:"Certificate",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:o.Class.UNIVERSAL,type:o.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:o.Class.UNIVERSAL,type:o.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:o.Class.UNIVERSAL,type:o.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:o.Class.UNIVERSAL,type:o.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},c,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:o.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:o.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},l={name:"rsapss",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:o.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:o.Class.UNIVERSAL,type:o.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:o.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:o.Class.UNIVERSAL,type:o.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},d={name:"CertificationRequestInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},c,{name:"CertificationRequestInfo.attributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0}]}]}]},p={name:"CertificationRequest",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[d,{name:"CertificationRequest.signatureAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function f(e,t){"string"==typeof t&&(t={shortName:t});for(var r,n=null,o=0;null===n&&o<e.attributes.length;++o)r=e.attributes[o],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}a.RDNAttributesAsArray=function(e,t){for(var r,n,a,c=[],u=0;u<e.value.length;++u){r=e.value[u];for(var l=0;l<r.value.length;++l)a={},n=r.value[l],a.type=o.derToOid(n.value[0].value),a.value=n.value[1].value,a.valueTagClass=n.value[1].type,a.type in i&&(a.name=i[a.type],a.name in s&&(a.shortName=s[a.name])),t&&(t.update(a.type),t.update(a.value)),c.push(a)}return c},a.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],c=o.derToOid(n.value[0].value),u=n.value[1].value,l=0;l<u.length;++l){var d={};if(d.type=c,d.value=u[l].value,d.valueTagClass=u[l].type,d.type in i&&(d.name=i[d.type],d.name in s&&(d.shortName=s[d.name])),d.type===i.extensionRequest){d.extensions=[];for(var p=0;p<d.value.length;++p)d.extensions.push(a.certificateExtensionFromAsn1(d.value[p]))}t.push(d)}return t};var g=function(e,t,r){var n={};if(e!==i["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:i.sha1},mgf:{algorithmOid:i.mgf1,hash:{algorithmOid:i.sha1}},saltLength:20});var a={},s=[];if(!o.validate(t,l,a,s)){var c=new Error("Cannot read RSASSA-PSS parameter block.");throw c.errors=s,c}return void 0!==a.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=o.derToOid(a.hashOid)),void 0!==a.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=o.derToOid(a.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=o.derToOid(a.maskGenHashOid)),void 0!==a.saltLength&&(n.saltLength=a.saltLength.charCodeAt(0)),n},m=function(e){switch(i[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return n.md.sha1.create();case"md5WithRSAEncryption":return n.md.md5.create();case"sha256WithRSAEncryption":case"RSASSA-PSS":return n.md.sha256.create();case"sha384WithRSAEncryption":return n.md.sha384.create();case"sha512WithRSAEncryption":return n.md.sha512.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},h=function(e){var t,r=e.certificate;switch(r.signatureOid){case i.sha1WithRSAEncryption:case i.sha1WithRSASignature:break;case i["RSASSA-PSS"]:var o,a,s;if(void 0===(o=i[r.signatureParameters.mgf.hash.algorithmOid])||void 0===n.md[o])throw(s=new Error("Unsupported MGF hash function.")).oid=r.signatureParameters.mgf.hash.algorithmOid,s.name=o,s;if(void 0===(a=i[r.signatureParameters.mgf.algorithmOid])||void 0===n.mgf[a])throw(s=new Error("Unsupported MGF function.")).oid=r.signatureParameters.mgf.algorithmOid,s.name=a,s;if(a=n.mgf[a].create(n.md[o].create()),void 0===(o=i[r.signatureParameters.hash.algorithmOid])||void 0===n.md[o])throw(s=new Error("Unsupported RSASSA-PSS hash function.")).oid=r.signatureParameters.hash.algorithmOid,s.name=o,s;t=n.pss.create(n.md[o].create(),a,r.signatureParameters.saltLength)}return r.publicKey.verify(e.md.digest().getBytes(),e.signature,t)};function y(e){for(var t,r,a=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),i=e.attributes,s=0;s<i.length;++s){var c=(t=i[s]).value,u=o.Type.PRINTABLESTRING;"valueTagClass"in t&&(u=t.valueTagClass)===o.Type.UTF8&&(c=n.util.encodeUtf8(c)),r=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.type).getBytes()),o.create(o.Class.UNIVERSAL,u,!1,c)])]),a.value.push(r)}return a}function S(e){for(var t,r=0;r<e.length;++r){if(void 0===(t=e[r]).name&&(t.type&&t.type in a.oids?t.name=a.oids[t.type]:t.shortName&&t.shortName in s&&(t.name=a.oids[s[t.shortName]])),void 0===t.type){if(!t.name||!(t.name in a.oids))throw(c=new Error("Attribute type not specified.")).attribute=t,c;t.type=a.oids[t.name]}if(void 0===t.shortName&&t.name&&t.name in s&&(t.shortName=s[t.name]),t.type===i.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=o.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var n=0;n<t.extensions.length;++n)t.value.push(a.certificateExtensionToAsn1(v(t.extensions[n])))}var c;if(void 0===t.value)throw(c=new Error("Attribute value not specified.")).attribute=t,c}}function v(e,t){if(t=t||{},void 0===e.name&&e.id&&e.id in a.oids&&(e.name=a.oids[e.id]),void 0===e.id){if(!e.name||!(e.name in a.oids))throw(A=new Error("Extension ID not specified.")).extension=e,A;e.id=a.oids[e.name]}if(void 0!==e.value)return e;if("keyUsage"===e.name){var r=0,s=0,c=0;e.digitalSignature&&(s|=128,r=7),e.nonRepudiation&&(s|=64,r=6),e.keyEncipherment&&(s|=32,r=5),e.dataEncipherment&&(s|=16,r=4),e.keyAgreement&&(s|=8,r=3),e.keyCertSign&&(s|=4,r=2),e.cRLSign&&(s|=2,r=1),e.encipherOnly&&(s|=1,r=0),e.decipherOnly&&(c|=128,r=7);var u=String.fromCharCode(r);0!==c?u+=String.fromCharCode(s)+String.fromCharCode(c):0!==s&&(u+=String.fromCharCode(s)),e.value=o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,u)}else if("basicConstraints"===e.name)e.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(o.create(o.Class.UNIVERSAL,o.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);var l=e.value.value;for(var d in e)!0===e[d]&&(d in i?l.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i[d]).getBytes())):-1!==d.indexOf(".")&&l.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(d).getBytes())))}else if("nsCertType"===e.name)r=0,s=0,e.client&&(s|=128,r=7),e.server&&(s|=64,r=6),e.email&&(s|=32,r=5),e.objsign&&(s|=16,r=4),e.reserved&&(s|=8,r=3),e.sslCA&&(s|=4,r=2),e.emailCA&&(s|=2,r=1),e.objCA&&(s|=1,r=0),u=String.fromCharCode(r),0!==s&&(u+=String.fromCharCode(s)),e.value=o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,u);else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);for(var p=0;p<e.altNames.length;++p){if(u=(S=e.altNames[p]).value,7===S.type&&S.ip){if(null===(u=n.util.bytesFromIP(S.ip)))throw(A=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,A}else 8===S.type&&(u=S.oid?o.oidToDer(o.oidToDer(S.oid)):o.oidToDer(u));e.value.value.push(o.create(o.Class.CONTEXT_SPECIFIC,S.type,!1,u))}}else if("nsComment"===e.name&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=o.create(o.Class.UNIVERSAL,o.Type.IA5STRING,!1,e.comment)}else if("subjectKeyIdentifier"===e.name&&t.cert){var f=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,f.getBytes())}else if("authorityKeyIdentifier"===e.name&&t.cert){if(e.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),l=e.value.value,e.keyIdentifier){var g=!0===e.keyIdentifier?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;l.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!1,g))}if(e.authorityCertIssuer){var m=[o.create(o.Class.CONTEXT_SPECIFIC,4,!0,[y(!0===e.authorityCertIssuer?t.cert.issuer:e.authorityCertIssuer)])];l.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,m))}if(e.serialNumber){var h=n.util.hexToBytes(!0===e.serialNumber?t.cert.serialNumber:e.serialNumber);l.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!1,h))}}else if("cRLDistributionPoints"===e.name){e.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),l=e.value.value;var S,v=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),E=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);for(p=0;p<e.altNames.length;++p){if(u=(S=e.altNames[p]).value,7===S.type&&S.ip){if(null===(u=n.util.bytesFromIP(S.ip)))throw(A=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,A}else 8===S.type&&(u=S.oid?o.oidToDer(o.oidToDer(S.oid)):o.oidToDer(u));E.value.push(o.create(o.Class.CONTEXT_SPECIFIC,S.type,!1,u))}v.value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[E])),l.push(v)}var A;if(void 0===e.value)throw(A=new Error("Extension value not specified.")).extension=e,A;return e}function E(e,t){if(e===i["RSASSA-PSS"]){var r=[];return void 0!==t.hash.algorithmOid&&r.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.hash.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&r.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.mgf.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.mgf.hash.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&r.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.saltLength).getBytes())])),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,r)}return o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")}function A(e){var t=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var r=e.attributes,a=0;a<r.length;++a){var i=r[a],s=i.value,c=o.Type.UTF8;"valueTagClass"in i&&(c=i.valueTagClass),c===o.Type.UTF8&&(s=n.util.encodeUtf8(s));var u=!1;"valueConstructed"in i&&(u=i.valueConstructed);var l=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.type).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,c,u,s)])]);t.value.push(l)}return t}a.certificateFromPem=function(e,t,r){var i=n.pem.decode(e)[0];if("CERTIFICATE"!==i.type&&"X509 CERTIFICATE"!==i.type&&"TRUSTED CERTIFICATE"!==i.type){var s=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw s.headerType=i.type,s}if(i.procType&&"ENCRYPTED"===i.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=o.fromDer(i.body,r);return a.certificateFromAsn1(c,t)},a.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:o.toDer(a.certificateToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},a.publicKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("PUBLIC KEY"!==t.type&&"RSA PUBLIC KEY"!==t.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var i=o.fromDer(t.body);return a.publicKeyFromAsn1(i)},a.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:o.toDer(a.publicKeyToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},a.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:o.toDer(a.publicKeyToRSAPublicKey(e)).getBytes()};return n.pem.encode(r,{maxline:t})},a.getPublicKeyFingerprint=function(e,t){var r,i=(t=t||{}).md||n.md.sha1.create();switch(t.type||"RSAPublicKey"){case"RSAPublicKey":r=o.toDer(a.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":r=o.toDer(a.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}i.start(),i.update(r);var s=i.digest();if("hex"===t.encoding){var c=s.toHex();return t.delimiter?c.match(/.{2}/g).join(t.delimiter):c}if("binary"===t.encoding)return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return s},a.certificationRequestFromPem=function(e,t,r){var i=n.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==i.type){var s=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw s.headerType=i.type,s}if(i.procType&&"ENCRYPTED"===i.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var c=o.fromDer(i.body,r);return a.certificationRequestFromAsn1(c,t)},a.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:o.toDer(a.certificationRequestToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},a.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return f(e.issuer,t)},e.issuer.addField=function(t){S([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return f(e.subject,t)},e.subject.addField=function(t){S([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){S(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){S(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)v(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){"string"==typeof t&&(t={name:t});for(var r,n=null,o=0;null===n&&o<e.extensions.length;++o)r=e.extensions[o],(t.id&&r.id===t.id||t.name&&r.name===t.name)&&(n=r);return n},e.sign=function(t,r){e.md=r||n.md.sha1.create();var s=i[e.md.algorithm+"WithRSAEncryption"];if(!s){var c=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw c.algorithm=e.md.algorithm,c}e.signatureOid=e.siginfo.algorithmOid=s,e.tbsCertificate=a.getTBSCertificate(e);var u=o.toDer(e.tbsCertificate);e.md.update(u.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,i=e.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=i.attributes,s.actualIssuer=n.attributes,s}var c=t.md;if(null===c){c=m({signatureOid:t.signatureOid,type:"certificate"});var u=t.tbsCertificate||a.getTBSCertificate(t),l=o.toDer(u);c.update(l.getBytes())}return null!==c&&(r=h({certificate:e,md:c,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,o=t.subject;if(n.hash&&o.hash)r=n.hash===o.hash;else if(n.attributes.length===o.attributes.length){var a,i;r=!0;for(var s=0;r&&s<n.attributes.length;++s)a=n.attributes[s],i=o.attributes[s],a.type===i.type&&a.value===i.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return a.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=i.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var o=e.extensions[r];if(o.id===t){var a=e.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(o.subjectKeyIdentifier)===a}}return!1},e},a.certificateFromAsn1=function(e,t){var r={},i=[];if(!o.validate(e,u,r,i)){var s=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw s.errors=i,s}if(o.derToOid(r.publicKeyOid)!==a.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=a.createCertificate();c.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=n.util.createBuffer(r.certSerialNumber);c.serialNumber=l.toHex(),c.signatureOid=n.asn1.derToOid(r.certSignatureOid),c.signatureParameters=g(c.signatureOid,r.certSignatureParams,!0),c.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),c.siginfo.parameters=g(c.siginfo.algorithmOid,r.certinfoSignatureParams,!1),c.signature=r.certSignature;var d=[];if(void 0!==r.certValidity1UTCTime&&d.push(o.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&d.push(o.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&d.push(o.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&d.push(o.generalizedTimeToDate(r.certValidity4GeneralizedTime)),d.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(d.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(c.validity.notBefore=d[0],c.validity.notAfter=d[1],c.tbsCertificate=r.tbsCertificate,t){c.md=m({signatureOid:c.signatureOid,type:"certificate"});var p=o.toDer(c.tbsCertificate);c.md.update(p.getBytes())}var h=n.md.sha1.create(),y=o.toDer(r.certIssuer);h.update(y.getBytes()),c.issuer.getField=function(e){return f(c.issuer,e)},c.issuer.addField=function(e){S([e]),c.issuer.attributes.push(e)},c.issuer.attributes=a.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(c.issuer.uniqueId=r.certIssuerUniqueId),c.issuer.hash=h.digest().toHex();var v=n.md.sha1.create(),E=o.toDer(r.certSubject);return v.update(E.getBytes()),c.subject.getField=function(e){return f(c.subject,e)},c.subject.addField=function(e){S([e]),c.subject.attributes.push(e)},c.subject.attributes=a.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(c.subject.uniqueId=r.certSubjectUniqueId),c.subject.hash=v.digest().toHex(),r.certExtensions?c.extensions=a.certificateExtensionsFromAsn1(r.certExtensions):c.extensions=[],c.publicKey=a.publicKeyFromAsn1(r.subjectPublicKeyInfo),c},a.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],o=0;o<n.value.length;++o)t.push(a.certificateExtensionFromAsn1(n.value[o]));return t},a.certificateExtensionFromAsn1=function(e){var t={};if(t.id=o.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===o.Type.BOOLEAN?(t.critical=0!==e.value[1].value.charCodeAt(0),t.value=e.value[2].value):t.value=e.value[1].value,t.id in i)if(t.name=i[t.id],"keyUsage"===t.name){var r=0,a=0;(c=o.fromDer(t.value)).value.length>1&&(r=c.value.charCodeAt(1),a=c.value.length>2?c.value.charCodeAt(2):0),t.digitalSignature=128==(128&r),t.nonRepudiation=64==(64&r),t.keyEncipherment=32==(32&r),t.dataEncipherment=16==(16&r),t.keyAgreement=8==(8&r),t.keyCertSign=4==(4&r),t.cRLSign=2==(2&r),t.encipherOnly=1==(1&r),t.decipherOnly=128==(128&a)}else if("basicConstraints"===t.name){(c=o.fromDer(t.value)).value.length>0&&c.value[0].type===o.Type.BOOLEAN?t.cA=0!==c.value[0].value.charCodeAt(0):t.cA=!1;var s=null;c.value.length>0&&c.value[0].type===o.Type.INTEGER?s=c.value[0].value:c.value.length>1&&(s=c.value[1].value),null!==s&&(t.pathLenConstraint=o.derToInteger(s))}else if("extKeyUsage"===t.name)for(var c=o.fromDer(t.value),u=0;u<c.value.length;++u){var l=o.derToOid(c.value[u].value);l in i?t[i[l]]=!0:t[l]=!0}else if("nsCertType"===t.name)r=0,(c=o.fromDer(t.value)).value.length>1&&(r=c.value.charCodeAt(1)),t.client=128==(128&r),t.server=64==(64&r),t.email=32==(32&r),t.objsign=16==(16&r),t.reserved=8==(8&r),t.sslCA=4==(4&r),t.emailCA=2==(2&r),t.objCA=1==(1&r);else if("subjectAltName"===t.name||"issuerAltName"===t.name){var d;t.altNames=[],c=o.fromDer(t.value);for(var p=0;p<c.value.length;++p){var f={type:(d=c.value[p]).type,value:d.value};switch(t.altNames.push(f),d.type){case 1:case 2:case 6:break;case 7:f.ip=n.util.bytesToIP(d.value);break;case 8:f.oid=o.derToOid(d.value)}}}else"subjectKeyIdentifier"===t.name&&(c=o.fromDer(t.value),t.subjectKeyIdentifier=n.util.bytesToHex(c.value));return t},a.certificationRequestFromAsn1=function(e,t){var r={},i=[];if(!o.validate(e,p,r,i)){var s=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw s.errors=i,s}if(o.derToOid(r.publicKeyOid)!==a.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=a.createCertificationRequest();if(c.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,c.signatureOid=n.asn1.derToOid(r.csrSignatureOid),c.signatureParameters=g(c.signatureOid,r.csrSignatureParams,!0),c.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),c.siginfo.parameters=g(c.siginfo.algorithmOid,r.csrSignatureParams,!1),c.signature=r.csrSignature,c.certificationRequestInfo=r.certificationRequestInfo,t){c.md=m({signatureOid:c.signatureOid,type:"certification request"});var u=o.toDer(c.certificationRequestInfo);c.md.update(u.getBytes())}var l=n.md.sha1.create();return c.subject.getField=function(e){return f(c.subject,e)},c.subject.addField=function(e){S([e]),c.subject.attributes.push(e)},c.subject.attributes=a.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),c.subject.hash=l.digest().toHex(),c.publicKey=a.publicKeyFromAsn1(r.subjectPublicKeyInfo),c.getAttribute=function(e){return f(c,e)},c.addAttribute=function(e){S([e]),c.attributes.push(e)},c.attributes=a.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),c},a.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return f(e.subject,t)},e.subject.addField=function(t){S([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return f(e,t)},e.addAttribute=function(t){S([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){S(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){S(t),e.attributes=t},e.sign=function(t,r){e.md=r||n.md.sha1.create();var s=i[e.md.algorithm+"WithRSAEncryption"];if(!s){var c=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw c.algorithm=e.md.algorithm,c}e.signatureOid=e.siginfo.algorithmOid=s,e.certificationRequestInfo=a.getCertificationRequestInfo(e);var u=o.toDer(e.certificationRequestInfo);e.md.update(u.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(null===r){r=m({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||a.getCertificationRequestInfo(e),i=o.toDer(n);r.update(i.getBytes())}return null!==r&&(t=h({certificate:e,md:r,signature:e.signature})),t},e};var _=new Date("1950-01-01T00:00:00Z"),b=new Date("2050-01-01T00:00:00Z");function T(e){return e>=_&&e<b?o.create(o.Class.UNIVERSAL,o.Type.UTCTIME,!1,o.dateToUtcTime(e)):o.create(o.Class.UNIVERSAL,o.Type.GENERALIZEDTIME,!1,o.dateToGeneralizedTime(e))}a.getTBSCertificate=function(e){var t=T(e.validity.notBefore),r=T(e.validity.notAfter),i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.version).getBytes())]),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.siginfo.algorithmOid).getBytes()),E(e.siginfo.algorithmOid,e.siginfo.parameters)]),y(e.issuer),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[t,r]),y(e.subject),a.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&i.value.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&i.value.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!0,[o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&i.value.push(a.certificateExtensionsToAsn1(e.extensions)),i},a.getCertificationRequestInfo=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.version).getBytes()),y(e.subject),a.publicKeyToAsn1(e.publicKey),A(e)])},a.distinguishedNameToAsn1=function(e){return y(e)},a.certificateToAsn1=function(e){var t=e.tbsCertificate||a.getTBSCertificate(e);return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[t,o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.signatureOid).getBytes()),E(e.signatureOid,e.signatureParameters)]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},a.certificateExtensionsToAsn1=function(e){var t=o.create(o.Class.CONTEXT_SPECIFIC,3,!0,[]),r=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(a.certificateExtensionToAsn1(e[n]));return t},a.certificateExtensionToAsn1=function(e){var t=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);t.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.id).getBytes())),e.critical&&t.value.push(o.create(o.Class.UNIVERSAL,o.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return"string"!=typeof e.value&&(r=o.toDer(r).getBytes()),t.value.push(o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,r)),t},a.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||a.getCertificationRequestInfo(e);return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[t,o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.signatureOid).getBytes()),E(e.signatureOid,e.signatureParameters)]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},a.createCaStore=function(e){var t={certs:{}};function r(e){return i(e),t.certs[e.hash]||null}function i(e){if(!e.hash){var t=n.md.sha1.create();e.attributes=a.RDNAttributesAsArray(y(e),t),e.hash=t.digest().toHex()}}if(t.getIssuer=function(e){return r(e.issuer)},t.addCertificate=function(e){if("string"==typeof e&&(e=n.pki.certificateFromPem(e)),i(e.subject),!t.hasCertificate(e))if(e.subject.hash in t.certs){var r=t.certs[e.subject.hash];n.util.isArray(r)||(r=[r]),r.push(e),t.certs[e.subject.hash]=r}else t.certs[e.subject.hash]=e},t.hasCertificate=function(e){"string"==typeof e&&(e=n.pki.certificateFromPem(e));var t=r(e.subject);if(!t)return!1;n.util.isArray(t)||(t=[t]);for(var i=o.toDer(a.certificateToAsn1(e)).getBytes(),s=0;s<t.length;++s)if(i===o.toDer(a.certificateToAsn1(t[s])).getBytes())return!0;return!1},t.listAllCertificates=function(){var e=[];for(var r in t.certs)if(t.certs.hasOwnProperty(r)){var o=t.certs[r];if(n.util.isArray(o))for(var a=0;a<o.length;++a)e.push(o[a]);else e.push(o)}return e},t.removeCertificate=function(e){var s;if("string"==typeof e&&(e=n.pki.certificateFromPem(e)),i(e.subject),!t.hasCertificate(e))return null;var c=r(e.subject);if(!n.util.isArray(c))return s=t.certs[e.subject.hash],delete t.certs[e.subject.hash],s;for(var u=o.toDer(a.certificateToAsn1(e)).getBytes(),l=0;l<c.length;++l)u===o.toDer(a.certificateToAsn1(c[l])).getBytes()&&(s=c[l],c.splice(l,1));return 0===c.length&&delete t.certs[e.subject.hash],s},e)for(var s=0;s<e.length;++s){var c=e[s];t.addCertificate(c)}return t},a.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},a.verifyCertificateChain=function(e,t,r){"function"==typeof r&&(r={verify:r}),r=r||{};var o=(t=t.slice(0)).slice(0),i=r.validityCheckDate;void 0===i&&(i=new Date);var s=!0,c=null,u=0;do{var l=t.shift(),d=null,p=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(c={message:"Certificate is not valid yet or has expired.",error:a.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),null===c){if(null===(d=t[0]||e.getIssuer(l))&&l.isIssuer(l)&&(p=!0,d=l),d){var f=d;n.util.isArray(f)||(f=[f]);for(var g=!1;!g&&f.length>0;){d=f.shift();try{g=d.verify(l)}catch(e){}}g||(c={message:"Certificate signature is invalid.",error:a.certificateError.bad_certificate})}null!==c||d&&!p||e.hasCertificate(l)||(c={message:"Certificate is not trusted.",error:a.certificateError.unknown_ca})}if(null===c&&d&&!l.isIssuer(d)&&(c={message:"Certificate issuer is invalid.",error:a.certificateError.bad_certificate}),null===c)for(var m={keyUsage:!0,basicConstraints:!0},h=0;null===c&&h<l.extensions.length;++h){var y=l.extensions[h];y.critical&&!(y.name in m)&&(c={message:"Certificate has an unsupported critical extension.",error:a.certificateError.unsupported_certificate})}if(null===c&&(!s||0===t.length&&(!d||p))){var S=l.getExtension("basicConstraints"),v=l.getExtension("keyUsage");null!==v&&(v.keyCertSign&&null!==S||(c={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:a.certificateError.bad_certificate})),null!==c||null===S||S.cA||(c={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:a.certificateError.bad_certificate}),null===c&&null!==v&&"pathLenConstraint"in S&&u-1>S.pathLenConstraint&&(c={message:"Certificate basicConstraints pathLenConstraint violated.",error:a.certificateError.bad_certificate})}var E=null===c||c.error,A=r.verify?r.verify(E,u,o):E;if(!0!==A)throw!0===E&&(c={message:"The application rejected the certificate.",error:a.certificateError.bad_certificate}),(A||0===A)&&("object"!=typeof A||n.util.isArray(A)?"string"==typeof A&&(c.error=A):(A.message&&(c.message=A.message),A.error&&(c.error=A.error))),c;c=null,s=!1,++u}while(t.length>0);return!0}},52458:e=>{"use strict";var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,i,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in a=Object(arguments[c]))r.call(a,u)&&(s[u]=a[u]);if(t){i=t(a);for(var l=0;l<i.length;l++)n.call(a,i[l])&&(s[i[l]]=a[i[l]])}}return s}},86434:e=>{"use strict";var t=function(e){return e!=e};e.exports=function(e,r){return 0===e&&0===r?1/e==1/r:e===r||!(!t(e)||!t(r))}},42641:(e,t,r)=>{"use strict";var n=r(6648),o=r(25592),a=r(86434),i=r(65669),s=r(39525),c=o(i(),Object);n(c,{getPolyfill:i,implementation:a,shim:s}),e.exports=c},65669:(e,t,r)=>{"use strict";var n=r(86434);e.exports=function(){return"function"==typeof Object.is?Object.is:n}},39525:(e,t,r)=>{"use strict";var n=r(65669),o=r(6648);e.exports=function(){var e=n();return o(Object,{is:e},{is:function(){return Object.is!==e}}),e}},3032:(e,t,r)=>{"use strict";var n;if(!Object.keys){var o=Object.prototype.hasOwnProperty,a=Object.prototype.toString,i=r(49473),s=Object.prototype.propertyIsEnumerable,c=!s.call({toString:null},"toString"),u=s.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(e){var t=e.constructor;return t&&t.prototype===e},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!p["$"+e]&&o.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{d(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();n=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===a.call(e),n=i(e),s=t&&"[object String]"===a.call(e),p=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var g=u&&r;if(s&&e.length>0&&!o.call(e,0))for(var m=0;m<e.length;++m)p.push(String(m));if(n&&e.length>0)for(var h=0;h<e.length;++h)p.push(String(h));else for(var y in e)g&&"prototype"===y||!o.call(e,y)||p.push(String(y));if(c)for(var S=function(e){if("undefined"==typeof window||!f)return d(e);try{return d(e)}catch(e){return!1}}(e),v=0;v<l.length;++v)S&&"constructor"===l[v]||!o.call(e,l[v])||p.push(l[v]);return p}}e.exports=n},53571:(e,t,r)=>{"use strict";var n=Array.prototype.slice,o=r(49473),a=Object.keys,i=a?function(e){return a(e)}:r(3032),s=Object.keys;i.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return o(e)?s(n.call(e)):s(e)})}else Object.keys=i;return Object.keys||i},e.exports=i},49473:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var r=t.call(e),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},68243:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(65756);Object.keys(n).forEach((function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})}))},93347:(e,t,r)=>{"use strict";var n={};(0,r(2604).assign)(n,r(20988),r(62727),r(6857)),e.exports=n},20988:(e,t,r)=>{"use strict";var n=r(63172),o=r(2604),a=r(94615),i=r(66186),s=r(24104),c=Object.prototype.toString,u=0,l=-1,d=0,p=8;function f(e){if(!(this instanceof f))return new f(e);this.options=o.assign({level:l,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==u)throw new Error(i[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var g;if(g="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=n.deflateSetDictionary(this.strm,g))!==u)throw new Error(i[r]);this._dict_set=!0}}function g(e,t){var r=new f(t);if(r.push(e,!0),r.err)throw r.msg||i[r.err];return r.result}f.prototype.push=function(e,t){var r,i,s=this.strm,l=this.options.chunkSize;if(this.ended)return!1;i=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=a.string2buf(e):"[object ArrayBuffer]"===c.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new o.Buf8(l),s.next_out=0,s.avail_out=l),1!==(r=n.deflate(s,i))&&r!==u)return this.onEnd(r),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(a.buf2binstring(o.shrinkBuf(s.output,s.next_out))):this.onData(o.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==r);return 4===i?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===u):2!==i||(this.onEnd(u),s.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=f,t.deflate=g,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,g(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,g(e,t)}},62727:(e,t,r)=>{"use strict";var n=r(86919),o=r(2604),a=r(94615),i=r(6857),s=r(66186),c=r(24104),u=r(62948),l=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==i.Z_OK)throw new Error(s[r]);if(this.header=new u,n.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=a.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=n.inflateSetDictionary(this.strm,t.dictionary))!==i.Z_OK))throw new Error(s[r])}function p(e,t){var r=new d(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}d.prototype.push=function(e,t){var r,s,c,u,d,p=this.strm,f=this.options.chunkSize,g=this.options.dictionary,m=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?i.Z_FINISH:i.Z_NO_FLUSH,"string"==typeof e?p.input=a.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new o.Buf8(f),p.next_out=0,p.avail_out=f),(r=n.inflate(p,i.Z_NO_FLUSH))===i.Z_NEED_DICT&&g&&(r=n.inflateSetDictionary(this.strm,g)),r===i.Z_BUF_ERROR&&!0===m&&(r=i.Z_OK,m=!1),r!==i.Z_STREAM_END&&r!==i.Z_OK)return this.onEnd(r),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&r!==i.Z_STREAM_END&&(0!==p.avail_in||s!==i.Z_FINISH&&s!==i.Z_SYNC_FLUSH)||("string"===this.options.to?(c=a.utf8border(p.output,p.next_out),u=p.next_out-c,d=a.buf2string(p.output,c),p.next_out=u,p.avail_out=f-u,u&&o.arraySet(p.output,p.output,c,u,0),this.onData(d)):this.onData(o.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(m=!0)}while((p.avail_in>0||0===p.avail_out)&&r!==i.Z_STREAM_END);return r===i.Z_STREAM_END&&(s=i.Z_FINISH),s===i.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===i.Z_OK):s!==i.Z_SYNC_FLUSH||(this.onEnd(i.Z_OK),p.avail_out=0,!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===i.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=d,t.inflate=p,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},t.ungzip=p},2604:(e,t)=>{"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var o in r)n(r,o)&&(e[o]=r[o])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,r,n,o){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),o);else for(var a=0;a<n;a++)e[o+a]=t[r+a]},flattenChunks:function(e){var t,r,n,o,a,i;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(i=new Uint8Array(n),o=0,t=0,r=e.length;t<r;t++)a=e[t],i.set(a,o),o+=a.length;return i}},a={arraySet:function(e,t,r,n,o){for(var a=0;a<n;a++)e[o+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(r)},94615:(e,t,r)=>{"use strict";var n=r(2604),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var i=new n.Buf8(256),s=0;s<256;s++)i[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function c(e,t){if(t<65534&&(e.subarray&&a||!e.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",i=0;i<t;i++)r+=String.fromCharCode(e[i]);return r}i[254]=i[254]=1,t.string2buf=function(e){var t,r,o,a,i,s=e.length,c=0;for(a=0;a<s;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(o=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(o-56320),a++),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(c),i=0,a=0;i<c;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(o=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(o-56320),a++),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|63&r):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|63&r):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|63&r);return t},t.buf2binstring=function(e){return c(e,e.length)},t.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,o=t.length;r<o;r++)t[r]=e.charCodeAt(r);return t},t.buf2string=function(e,t){var r,n,o,a,s=t||e.length,u=new Array(2*s);for(n=0,r=0;r<s;)if((o=e[r++])<128)u[n++]=o;else if((a=i[o])>4)u[n++]=65533,r+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&r<s;)o=o<<6|63&e[r++],a--;a>1?u[n++]=65533:o<65536?u[n++]=o:(o-=65536,u[n++]=55296|o>>10&1023,u[n++]=56320|1023&o)}return c(u,n)},t.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+i[e[r]]>t?r:t}},55097:e=>{"use strict";e.exports=function(e,t,r,n){for(var o=65535&e|0,a=e>>>16&65535|0,i=0;0!==r;){r-=i=r>2e3?2e3:r;do{a=a+(o=o+t[n++]|0)|0}while(--i);o%=65521,a%=65521}return o|a<<16|0}},6857:e=>{"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},54702:e=>{"use strict";var t=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=function(e,r,n,o){var a=t,i=o+n;e^=-1;for(var s=o;s<i;s++)e=e>>>8^a[255&(e^r[s])];return-1^e}},63172:(e,t,r)=>{"use strict";var n,o=r(2604),a=r(97134),i=r(55097),s=r(54702),c=r(66186),u=0,l=4,d=0,p=-2,f=-1,g=1,m=4,h=2,y=8,S=9,v=286,E=30,A=19,_=2*v+1,b=15,T=3,I=258,w=I+T+1,C=42,O=103,D=113,P=666,N=1,R=2,U=3,L=4;function M(e,t){return e.msg=c[t],t}function k(e){return(e<<1)-(e>4?9:0)}function B(e){for(var t=e.length;--t>=0;)e[t]=0}function F(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(o.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function x(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,F(e.strm)}function G(e,t){e.pending_buf[e.pending++]=t}function j(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function K(e,t){var r,n,o=e.max_chain_length,a=e.strstart,i=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-w?e.strstart-(e.w_size-w):0,u=e.window,l=e.w_mask,d=e.prev,p=e.strstart+I,f=u[a+i-1],g=u[a+i];e.prev_length>=e.good_match&&(o>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(r=t)+i]===g&&u[r+i-1]===f&&u[r]===u[a]&&u[++r]===u[a+1]){a+=2,r++;do{}while(u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&a<p);if(n=I-(p-a),a=p-I,n>i){if(e.match_start=t,i=n,n>=s)break;f=u[a+i-1],g=u[a+i]}}}while((t=d[t&l])>c&&0!=--o);return i<=e.lookahead?i:e.lookahead}function $(e){var t,r,n,a,c,u,l,d,p,f,g=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=g+(g-w)){o.arraySet(e.window,e.window,g,g,0),e.match_start-=g,e.strstart-=g,e.block_start-=g,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=g?n-g:0}while(--r);t=r=g;do{n=e.prev[--t],e.prev[t]=n>=g?n-g:0}while(--r);a+=g}if(0===e.strm.avail_in)break;if(u=e.strm,l=e.window,d=e.strstart+e.lookahead,p=a,f=void 0,(f=u.avail_in)>p&&(f=p),r=0===f?0:(u.avail_in-=f,o.arraySet(l,u.input,u.next_in,f,d),1===u.state.wrap?u.adler=i(u.adler,l,f,d):2===u.state.wrap&&(u.adler=s(u.adler,l,f,d)),u.next_in+=f,u.total_in+=f,f),e.lookahead+=r,e.lookahead+e.insert>=T)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+T-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<T)););}while(e.lookahead<w&&0!==e.strm.avail_in)}function V(e,t){for(var r,n;;){if(e.lookahead<w){if($(e),e.lookahead<w&&t===u)return N;if(0===e.lookahead)break}if(r=0,e.lookahead>=T&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-w&&(e.match_length=K(e,r)),e.match_length>=T)if(n=a._tr_tally(e,e.strstart-e.match_start,e.match_length-T),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=T){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(x(e,!1),0===e.strm.avail_out))return N}return e.insert=e.strstart<T-1?e.strstart:T-1,t===l?(x(e,!0),0===e.strm.avail_out?U:L):e.last_lit&&(x(e,!1),0===e.strm.avail_out)?N:R}function H(e,t){for(var r,n,o;;){if(e.lookahead<w){if($(e),e.lookahead<w&&t===u)return N;if(0===e.lookahead)break}if(r=0,e.lookahead>=T&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=T-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-w&&(e.match_length=K(e,r),e.match_length<=5&&(e.strategy===g||e.match_length===T&&e.strstart-e.match_start>4096)&&(e.match_length=T-1)),e.prev_length>=T&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-T,n=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-T),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=T-1,e.strstart++,n&&(x(e,!1),0===e.strm.avail_out))return N}else if(e.match_available){if((n=a._tr_tally(e,0,e.window[e.strstart-1]))&&x(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return N}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<T-1?e.strstart:T-1,t===l?(x(e,!0),0===e.strm.avail_out?U:L):e.last_lit&&(x(e,!1),0===e.strm.avail_out)?N:R}function W(e,t,r,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=o}function z(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*_),this.dyn_dtree=new o.Buf16(2*(2*E+1)),this.bl_tree=new o.Buf16(2*(2*A+1)),B(this.dyn_ltree),B(this.dyn_dtree),B(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(b+1),this.heap=new o.Buf16(2*v+1),B(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*v+1),B(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function q(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=h,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?C:D,e.adler=2===t.wrap?0:1,t.last_flush=u,a._tr_init(t),d):M(e,p)}function Y(e){var t,r=q(e);return r===d&&((t=e.state).window_size=2*t.w_size,B(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=T-1,t.match_available=0,t.ins_h=0),r}function Q(e,t,r,n,a,i){if(!e)return p;var s=1;if(t===f&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),a<1||a>S||r!==y||n<8||n>15||t<0||t>9||i<0||i>m)return M(e,p);8===n&&(n=9);var c=new z;return e.state=c,c.strm=e,c.wrap=s,c.gzhead=null,c.w_bits=n,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=a+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+T-1)/T),c.window=new o.Buf8(2*c.w_size),c.head=new o.Buf16(c.hash_size),c.prev=new o.Buf16(c.w_size),c.lit_bufsize=1<<a+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new o.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=i,c.method=r,Y(e)}n=[new W(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if($(e),0===e.lookahead&&t===u)return N;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,x(e,!1),0===e.strm.avail_out))return N;if(e.strstart-e.block_start>=e.w_size-w&&(x(e,!1),0===e.strm.avail_out))return N}return e.insert=0,t===l?(x(e,!0),0===e.strm.avail_out?U:L):(e.strstart>e.block_start&&(x(e,!1),e.strm.avail_out),N)})),new W(4,4,8,4,V),new W(4,5,16,8,V),new W(4,6,32,32,V),new W(4,4,16,16,H),new W(8,16,32,32,H),new W(8,16,128,128,H),new W(8,32,128,256,H),new W(32,128,258,1024,H),new W(32,258,258,4096,H)],t.deflateInit=function(e,t){return Q(e,t,y,15,8,0)},t.deflateInit2=Q,t.deflateReset=Y,t.deflateResetKeep=q,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?p:(e.state.gzhead=t,d):p},t.deflate=function(e,t){var r,o,i,c;if(!e||!e.state||t>5||t<0)return e?M(e,p):p;if(o=e.state,!e.output||!e.input&&0!==e.avail_in||o.status===P&&t!==l)return M(e,0===e.avail_out?-5:p);if(o.strm=e,r=o.last_flush,o.last_flush=t,o.status===C)if(2===o.wrap)e.adler=0,G(o,31),G(o,139),G(o,8),o.gzhead?(G(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),G(o,255&o.gzhead.time),G(o,o.gzhead.time>>8&255),G(o,o.gzhead.time>>16&255),G(o,o.gzhead.time>>24&255),G(o,9===o.level?2:o.strategy>=2||o.level<2?4:0),G(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(G(o,255&o.gzhead.extra.length),G(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=s(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(G(o,0),G(o,0),G(o,0),G(o,0),G(o,0),G(o,9===o.level?2:o.strategy>=2||o.level<2?4:0),G(o,3),o.status=D);else{var f=y+(o.w_bits-8<<4)<<8;f|=(o.strategy>=2||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(f|=32),f+=31-f%31,o.status=D,j(o,f),0!==o.strstart&&(j(o,e.adler>>>16),j(o,65535&e.adler)),e.adler=1}if(69===o.status)if(o.gzhead.extra){for(i=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>i&&(e.adler=s(e.adler,o.pending_buf,o.pending-i,i)),F(e),i=o.pending,o.pending!==o.pending_buf_size));)G(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>i&&(e.adler=s(e.adler,o.pending_buf,o.pending-i,i)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){i=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>i&&(e.adler=s(e.adler,o.pending_buf,o.pending-i,i)),F(e),i=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,G(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>i&&(e.adler=s(e.adler,o.pending_buf,o.pending-i,i)),0===c&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){i=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>i&&(e.adler=s(e.adler,o.pending_buf,o.pending-i,i)),F(e),i=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,G(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>i&&(e.adler=s(e.adler,o.pending_buf,o.pending-i,i)),0===c&&(o.status=O)}else o.status=O;if(o.status===O&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&F(e),o.pending+2<=o.pending_buf_size&&(G(o,255&e.adler),G(o,e.adler>>8&255),e.adler=0,o.status=D)):o.status=D),0!==o.pending){if(F(e),0===e.avail_out)return o.last_flush=-1,d}else if(0===e.avail_in&&k(t)<=k(r)&&t!==l)return M(e,-5);if(o.status===P&&0!==e.avail_in)return M(e,-5);if(0!==e.avail_in||0!==o.lookahead||t!==u&&o.status!==P){var g=2===o.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&($(e),0===e.lookahead)){if(t===u)return N;break}if(e.match_length=0,r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(x(e,!1),0===e.strm.avail_out))return N}return e.insert=0,t===l?(x(e,!0),0===e.strm.avail_out?U:L):e.last_lit&&(x(e,!1),0===e.strm.avail_out)?N:R}(o,t):3===o.strategy?function(e,t){for(var r,n,o,i,s=e.window;;){if(e.lookahead<=I){if($(e),e.lookahead<=I&&t===u)return N;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=T&&e.strstart>0&&(n=s[o=e.strstart-1])===s[++o]&&n===s[++o]&&n===s[++o]){i=e.strstart+I;do{}while(n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&o<i);e.match_length=I-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=T?(r=a._tr_tally(e,1,e.match_length-T),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(x(e,!1),0===e.strm.avail_out))return N}return e.insert=0,t===l?(x(e,!0),0===e.strm.avail_out?U:L):e.last_lit&&(x(e,!1),0===e.strm.avail_out)?N:R}(o,t):n[o.level].func(o,t);if(g!==U&&g!==L||(o.status=P),g===N||g===U)return 0===e.avail_out&&(o.last_flush=-1),d;if(g===R&&(1===t?a._tr_align(o):5!==t&&(a._tr_stored_block(o,0,0,!1),3===t&&(B(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),F(e),0===e.avail_out))return o.last_flush=-1,d}return t!==l?d:o.wrap<=0?1:(2===o.wrap?(G(o,255&e.adler),G(o,e.adler>>8&255),G(o,e.adler>>16&255),G(o,e.adler>>24&255),G(o,255&e.total_in),G(o,e.total_in>>8&255),G(o,e.total_in>>16&255),G(o,e.total_in>>24&255)):(j(o,e.adler>>>16),j(o,65535&e.adler)),F(e),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?d:1)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==C&&69!==t&&73!==t&&91!==t&&t!==O&&t!==D&&t!==P?M(e,p):(e.state=null,t===D?M(e,-3):d):p},t.deflateSetDictionary=function(e,t){var r,n,a,s,c,u,l,f,g=t.length;if(!e||!e.state)return p;if(2===(s=(r=e.state).wrap)||1===s&&r.status!==C||r.lookahead)return p;for(1===s&&(e.adler=i(e.adler,t,g,0)),r.wrap=0,g>=r.w_size&&(0===s&&(B(r.head),r.strstart=0,r.block_start=0,r.insert=0),f=new o.Buf8(r.w_size),o.arraySet(f,t,g-r.w_size,r.w_size,0),t=f,g=r.w_size),c=e.avail_in,u=e.next_in,l=e.input,e.avail_in=g,e.next_in=0,e.input=t,$(r);r.lookahead>=T;){n=r.strstart,a=r.lookahead-(T-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+T-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--a);r.strstart=n,r.lookahead=T-1,$(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=T-1,r.match_available=0,e.next_in=u,e.input=l,e.avail_in=c,r.wrap=s,d},t.deflateInfo="pako deflate (from Nodeca project)"},62948:e=>{"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},92039:e=>{"use strict";e.exports=function(e,t){var r,n,o,a,i,s,c,u,l,d,p,f,g,m,h,y,S,v,E,A,_,b,T,I,w;r=e.state,n=e.next_in,I=e.input,o=n+(e.avail_in-5),a=e.next_out,w=e.output,i=a-(t-e.avail_out),s=a+(e.avail_out-257),c=r.dmax,u=r.wsize,l=r.whave,d=r.wnext,p=r.window,f=r.hold,g=r.bits,m=r.lencode,h=r.distcode,y=(1<<r.lenbits)-1,S=(1<<r.distbits)-1;e:do{g<15&&(f+=I[n++]<<g,g+=8,f+=I[n++]<<g,g+=8),v=m[f&y];t:for(;;){if(f>>>=E=v>>>24,g-=E,0==(E=v>>>16&255))w[a++]=65535&v;else{if(!(16&E)){if(0==(64&E)){v=m[(65535&v)+(f&(1<<E)-1)];continue t}if(32&E){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}A=65535&v,(E&=15)&&(g<E&&(f+=I[n++]<<g,g+=8),A+=f&(1<<E)-1,f>>>=E,g-=E),g<15&&(f+=I[n++]<<g,g+=8,f+=I[n++]<<g,g+=8),v=h[f&S];r:for(;;){if(f>>>=E=v>>>24,g-=E,!(16&(E=v>>>16&255))){if(0==(64&E)){v=h[(65535&v)+(f&(1<<E)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(_=65535&v,g<(E&=15)&&(f+=I[n++]<<g,(g+=8)<E&&(f+=I[n++]<<g,g+=8)),(_+=f&(1<<E)-1)>c){e.msg="invalid distance too far back",r.mode=30;break e}if(f>>>=E,g-=E,_>(E=a-i)){if((E=_-E)>l&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(b=0,T=p,0===d){if(b+=u-E,E<A){A-=E;do{w[a++]=p[b++]}while(--E);b=a-_,T=w}}else if(d<E){if(b+=u+d-E,(E-=d)<A){A-=E;do{w[a++]=p[b++]}while(--E);if(b=0,d<A){A-=E=d;do{w[a++]=p[b++]}while(--E);b=a-_,T=w}}}else if(b+=d-E,E<A){A-=E;do{w[a++]=p[b++]}while(--E);b=a-_,T=w}for(;A>2;)w[a++]=T[b++],w[a++]=T[b++],w[a++]=T[b++],A-=3;A&&(w[a++]=T[b++],A>1&&(w[a++]=T[b++]))}else{b=a-_;do{w[a++]=w[b++],w[a++]=w[b++],w[a++]=w[b++],A-=3}while(A>2);A&&(w[a++]=w[b++],A>1&&(w[a++]=w[b++]))}break}}break}}while(n<o&&a<s);n-=A=g>>3,f&=(1<<(g-=A<<3))-1,e.next_in=n,e.next_out=a,e.avail_in=n<o?o-n+5:5-(n-o),e.avail_out=a<s?s-a+257:257-(a-s),r.hold=f,r.bits=g}},86919:(e,t,r)=>{"use strict";var n=r(2604),o=r(55097),a=r(54702),i=r(92039),s=r(7093),c=1,u=2,l=0,d=-2,p=1,f=12,g=30,m=852,h=592;function y(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=p,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(m),t.distcode=t.distdyn=new n.Buf32(h),t.sane=1,t.back=-1,l):d}function E(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,v(e)):d}function A(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?d:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,E(e))):d}function _(e,t){var r,n;return e?(n=new S,e.state=n,n.window=null,(r=A(e,t))!==l&&(e.state=null),r):d}var b,T,I=!0;function w(e){if(I){var t;for(b=new n.Buf32(512),T=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(c,e.lens,0,288,b,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(u,e.lens,0,32,T,0,e.work,{bits:5}),I=!1}e.lencode=b,e.lenbits=9,e.distcode=T,e.distbits=5}function C(e,t,r,o){var a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new n.Buf8(i.wsize)),o>=i.wsize?(n.arraySet(i.window,t,r-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>o&&(a=o),n.arraySet(i.window,t,r-o,a,i.wnext),(o-=a)?(n.arraySet(i.window,t,r-o,o,0),i.wnext=o,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0}t.inflateReset=E,t.inflateReset2=A,t.inflateResetKeep=v,t.inflateInit=function(e){return _(e,15)},t.inflateInit2=_,t.inflate=function(e,t){var r,m,h,S,v,E,A,_,b,T,I,O,D,P,N,R,U,L,M,k,B,F,x,G,j=0,K=new n.Buf8(4),$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;(r=e.state).mode===f&&(r.mode=13),v=e.next_out,h=e.output,A=e.avail_out,S=e.next_in,m=e.input,E=e.avail_in,_=r.hold,b=r.bits,T=E,I=A,F=l;e:for(;;)switch(r.mode){case p:if(0===r.wrap){r.mode=13;break}for(;b<16;){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}if(2&r.wrap&&35615===_){r.check=0,K[0]=255&_,K[1]=_>>>8&255,r.check=a(r.check,K,2,0),_=0,b=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&_)<<8)+(_>>8))%31){e.msg="incorrect header check",r.mode=g;break}if(8!=(15&_)){e.msg="unknown compression method",r.mode=g;break}if(b-=4,B=8+(15&(_>>>=4)),0===r.wbits)r.wbits=B;else if(B>r.wbits){e.msg="invalid window size",r.mode=g;break}r.dmax=1<<B,e.adler=r.check=1,r.mode=512&_?10:f,_=0,b=0;break;case 2:for(;b<16;){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}if(r.flags=_,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=g;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=g;break}r.head&&(r.head.text=_>>8&1),512&r.flags&&(K[0]=255&_,K[1]=_>>>8&255,r.check=a(r.check,K,2,0)),_=0,b=0,r.mode=3;case 3:for(;b<32;){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}r.head&&(r.head.time=_),512&r.flags&&(K[0]=255&_,K[1]=_>>>8&255,K[2]=_>>>16&255,K[3]=_>>>24&255,r.check=a(r.check,K,4,0)),_=0,b=0,r.mode=4;case 4:for(;b<16;){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}r.head&&(r.head.xflags=255&_,r.head.os=_>>8),512&r.flags&&(K[0]=255&_,K[1]=_>>>8&255,r.check=a(r.check,K,2,0)),_=0,b=0,r.mode=5;case 5:if(1024&r.flags){for(;b<16;){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}r.length=_,r.head&&(r.head.extra_len=_),512&r.flags&&(K[0]=255&_,K[1]=_>>>8&255,r.check=a(r.check,K,2,0)),_=0,b=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((O=r.length)>E&&(O=E),O&&(r.head&&(B=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,m,S,O,B)),512&r.flags&&(r.check=a(r.check,m,O,S)),E-=O,S+=O,r.length-=O),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===E)break e;O=0;do{B=m[S+O++],r.head&&B&&r.length<65536&&(r.head.name+=String.fromCharCode(B))}while(B&&O<E);if(512&r.flags&&(r.check=a(r.check,m,O,S)),E-=O,S+=O,B)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===E)break e;O=0;do{B=m[S+O++],r.head&&B&&r.length<65536&&(r.head.comment+=String.fromCharCode(B))}while(B&&O<E);if(512&r.flags&&(r.check=a(r.check,m,O,S)),E-=O,S+=O,B)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;b<16;){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}if(_!==(65535&r.check)){e.msg="header crc mismatch",r.mode=g;break}_=0,b=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=f;break;case 10:for(;b<32;){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}e.adler=r.check=y(_),_=0,b=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=v,e.avail_out=A,e.next_in=S,e.avail_in=E,r.hold=_,r.bits=b,2;e.adler=r.check=1,r.mode=f;case f:if(5===t||6===t)break e;case 13:if(r.last){_>>>=7&b,b-=7&b,r.mode=27;break}for(;b<3;){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}switch(r.last=1&_,b-=1,3&(_>>>=1)){case 0:r.mode=14;break;case 1:if(w(r),r.mode=20,6===t){_>>>=2,b-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=g}_>>>=2,b-=2;break;case 14:for(_>>>=7&b,b-=7&b;b<32;){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}if((65535&_)!=(_>>>16^65535)){e.msg="invalid stored block lengths",r.mode=g;break}if(r.length=65535&_,_=0,b=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(O=r.length){if(O>E&&(O=E),O>A&&(O=A),0===O)break e;n.arraySet(h,m,S,O,v),E-=O,S+=O,A-=O,v+=O,r.length-=O;break}r.mode=f;break;case 17:for(;b<14;){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}if(r.nlen=257+(31&_),_>>>=5,b-=5,r.ndist=1+(31&_),_>>>=5,b-=5,r.ncode=4+(15&_),_>>>=4,b-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=g;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;b<3;){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}r.lens[$[r.have++]]=7&_,_>>>=3,b-=3}for(;r.have<19;)r.lens[$[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,x={bits:r.lenbits},F=s(0,r.lens,0,19,r.lencode,0,r.work,x),r.lenbits=x.bits,F){e.msg="invalid code lengths set",r.mode=g;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;R=(j=r.lencode[_&(1<<r.lenbits)-1])>>>16&255,U=65535&j,!((N=j>>>24)<=b);){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}if(U<16)_>>>=N,b-=N,r.lens[r.have++]=U;else{if(16===U){for(G=N+2;b<G;){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}if(_>>>=N,b-=N,0===r.have){e.msg="invalid bit length repeat",r.mode=g;break}B=r.lens[r.have-1],O=3+(3&_),_>>>=2,b-=2}else if(17===U){for(G=N+3;b<G;){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}b-=N,B=0,O=3+(7&(_>>>=N)),_>>>=3,b-=3}else{for(G=N+7;b<G;){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}b-=N,B=0,O=11+(127&(_>>>=N)),_>>>=7,b-=7}if(r.have+O>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=g;break}for(;O--;)r.lens[r.have++]=B}}if(r.mode===g)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=g;break}if(r.lenbits=9,x={bits:r.lenbits},F=s(c,r.lens,0,r.nlen,r.lencode,0,r.work,x),r.lenbits=x.bits,F){e.msg="invalid literal/lengths set",r.mode=g;break}if(r.distbits=6,r.distcode=r.distdyn,x={bits:r.distbits},F=s(u,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,x),r.distbits=x.bits,F){e.msg="invalid distances set",r.mode=g;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(E>=6&&A>=258){e.next_out=v,e.avail_out=A,e.next_in=S,e.avail_in=E,r.hold=_,r.bits=b,i(e,I),v=e.next_out,h=e.output,A=e.avail_out,S=e.next_in,m=e.input,E=e.avail_in,_=r.hold,b=r.bits,r.mode===f&&(r.back=-1);break}for(r.back=0;R=(j=r.lencode[_&(1<<r.lenbits)-1])>>>16&255,U=65535&j,!((N=j>>>24)<=b);){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}if(R&&0==(240&R)){for(L=N,M=R,k=U;R=(j=r.lencode[k+((_&(1<<L+M)-1)>>L)])>>>16&255,U=65535&j,!(L+(N=j>>>24)<=b);){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}_>>>=L,b-=L,r.back+=L}if(_>>>=N,b-=N,r.back+=N,r.length=U,0===R){r.mode=26;break}if(32&R){r.back=-1,r.mode=f;break}if(64&R){e.msg="invalid literal/length code",r.mode=g;break}r.extra=15&R,r.mode=22;case 22:if(r.extra){for(G=r.extra;b<G;){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}r.length+=_&(1<<r.extra)-1,_>>>=r.extra,b-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;R=(j=r.distcode[_&(1<<r.distbits)-1])>>>16&255,U=65535&j,!((N=j>>>24)<=b);){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}if(0==(240&R)){for(L=N,M=R,k=U;R=(j=r.distcode[k+((_&(1<<L+M)-1)>>L)])>>>16&255,U=65535&j,!(L+(N=j>>>24)<=b);){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}_>>>=L,b-=L,r.back+=L}if(_>>>=N,b-=N,r.back+=N,64&R){e.msg="invalid distance code",r.mode=g;break}r.offset=U,r.extra=15&R,r.mode=24;case 24:if(r.extra){for(G=r.extra;b<G;){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}r.offset+=_&(1<<r.extra)-1,_>>>=r.extra,b-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=g;break}r.mode=25;case 25:if(0===A)break e;if(O=I-A,r.offset>O){if((O=r.offset-O)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=g;break}O>r.wnext?(O-=r.wnext,D=r.wsize-O):D=r.wnext-O,O>r.length&&(O=r.length),P=r.window}else P=h,D=v-r.offset,O=r.length;O>A&&(O=A),A-=O,r.length-=O;do{h[v++]=P[D++]}while(--O);0===r.length&&(r.mode=21);break;case 26:if(0===A)break e;h[v++]=r.length,A--,r.mode=21;break;case 27:if(r.wrap){for(;b<32;){if(0===E)break e;E--,_|=m[S++]<<b,b+=8}if(I-=A,e.total_out+=I,r.total+=I,I&&(e.adler=r.check=r.flags?a(r.check,h,I,v-I):o(r.check,h,I,v-I)),I=A,(r.flags?_:y(_))!==r.check){e.msg="incorrect data check",r.mode=g;break}_=0,b=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;b<32;){if(0===E)break e;E--,_+=m[S++]<<b,b+=8}if(_!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=g;break}_=0,b=0}r.mode=29;case 29:F=1;break e;case g:F=-3;break e;case 31:return-4;default:return d}return e.next_out=v,e.avail_out=A,e.next_in=S,e.avail_in=E,r.hold=_,r.bits=b,(r.wsize||I!==e.avail_out&&r.mode<g&&(r.mode<27||4!==t))&&C(e,e.output,e.next_out,I-e.avail_out)?(r.mode=31,-4):(T-=e.avail_in,I-=e.avail_out,e.total_in+=T,e.total_out+=I,r.total+=I,r.wrap&&I&&(e.adler=r.check=r.flags?a(r.check,h,I,e.next_out-I):o(r.check,h,I,e.next_out-I)),e.data_type=r.bits+(r.last?64:0)+(r.mode===f?128:0)+(20===r.mode||15===r.mode?256:0),(0===T&&0===I||4===t)&&F===l&&(F=-5),F)},t.inflateEnd=function(e){if(!e||!e.state)return d;var t=e.state;return t.window&&(t.window=null),e.state=null,l},t.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?d:(r.head=t,t.done=!1,l):d},t.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?d:11===r.mode&&o(1,t,n,0)!==r.check?-3:C(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,l):d},t.inflateInfo="pako inflate (from Nodeca project)"},7093:(e,t,r)=>{"use strict";var n=r(2604),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],i=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,r,c,u,l,d,p){var f,g,m,h,y,S,v,E,A,_=p.bits,b=0,T=0,I=0,w=0,C=0,O=0,D=0,P=0,N=0,R=0,U=null,L=0,M=new n.Buf16(16),k=new n.Buf16(16),B=null,F=0;for(b=0;b<=15;b++)M[b]=0;for(T=0;T<c;T++)M[t[r+T]]++;for(C=_,w=15;w>=1&&0===M[w];w--);if(C>w&&(C=w),0===w)return u[l++]=20971520,u[l++]=20971520,p.bits=1,0;for(I=1;I<w&&0===M[I];I++);for(C<I&&(C=I),P=1,b=1;b<=15;b++)if(P<<=1,(P-=M[b])<0)return-1;if(P>0&&(0===e||1!==w))return-1;for(k[1]=0,b=1;b<15;b++)k[b+1]=k[b]+M[b];for(T=0;T<c;T++)0!==t[r+T]&&(d[k[t[r+T]]++]=T);if(0===e?(U=B=d,S=19):1===e?(U=o,L-=257,B=a,F-=257,S=256):(U=i,B=s,S=-1),R=0,T=0,b=I,y=l,O=C,D=0,m=-1,h=(N=1<<C)-1,1===e&&N>852||2===e&&N>592)return 1;for(;;){v=b-D,d[T]<S?(E=0,A=d[T]):d[T]>S?(E=B[F+d[T]],A=U[L+d[T]]):(E=96,A=0),f=1<<b-D,I=g=1<<O;do{u[y+(R>>D)+(g-=f)]=v<<24|E<<16|A|0}while(0!==g);for(f=1<<b-1;R&f;)f>>=1;if(0!==f?(R&=f-1,R+=f):R=0,T++,0==--M[b]){if(b===w)break;b=t[r+d[T]]}if(b>C&&(R&h)!==m){for(0===D&&(D=C),y+=I,P=1<<(O=b-D);O+D<w&&!((P-=M[O+D])<=0);)O++,P<<=1;if(N+=1<<O,1===e&&N>852||2===e&&N>592)return 1;u[m=R&h]=C<<24|O<<16|y-l|0}}return 0!==R&&(u[y+R]=b-D<<24|64<<16|0),p.bits=C,0}},66186:e=>{"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},97134:(e,t,r)=>{"use strict";var n=r(2604);function o(e){for(var t=e.length;--t>=0;)e[t]=0}var a=0,i=256,s=i+1+29,c=30,u=19,l=2*s+1,d=15,p=16,f=256,g=16,m=17,h=18,y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],A=new Array(2*(s+2));o(A);var _=new Array(2*c);o(_);var b=new Array(512);o(b);var T=new Array(256);o(T);var I=new Array(29);o(I);var w,C,O,D=new Array(c);function P(e,t,r,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}function N(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function R(e){return e<256?b[e]:b[256+(e>>>7)]}function U(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function L(e,t,r){e.bi_valid>p-r?(e.bi_buf|=t<<e.bi_valid&65535,U(e,e.bi_buf),e.bi_buf=t>>p-e.bi_valid,e.bi_valid+=r-p):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function M(e,t,r){L(e,r[2*t],r[2*t+1])}function k(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function B(e,t,r){var n,o,a=new Array(d+1),i=0;for(n=1;n<=d;n++)a[n]=i=i+r[n-1]<<1;for(o=0;o<=t;o++){var s=e[2*o+1];0!==s&&(e[2*o]=k(a[s]++,s))}}function F(e){var t;for(t=0;t<s;t++)e.dyn_ltree[2*t]=0;for(t=0;t<c;t++)e.dyn_dtree[2*t]=0;for(t=0;t<u;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*f]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function x(e){e.bi_valid>8?U(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function G(e,t,r,n){var o=2*t,a=2*r;return e[o]<e[a]||e[o]===e[a]&&n[t]<=n[r]}function j(e,t,r){for(var n=e.heap[r],o=r<<1;o<=e.heap_len&&(o<e.heap_len&&G(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!G(t,n,e.heap[o],e.depth));)e.heap[r]=e.heap[o],r=o,o<<=1;e.heap[r]=n}function K(e,t,r){var n,o,a,s,c=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],o=e.pending_buf[e.l_buf+c],c++,0===n?M(e,o,t):(M(e,(a=T[o])+i+1,t),0!==(s=y[a])&&L(e,o-=I[a],s),M(e,a=R(--n),r),0!==(s=S[a])&&L(e,n-=D[a],s))}while(c<e.last_lit);M(e,f,t)}function $(e,t){var r,n,o,a=t.dyn_tree,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=l,r=0;r<c;r++)0!==a[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)a[2*(o=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[o]=0,e.opt_len--,s&&(e.static_len-=i[2*o+1]);for(t.max_code=u,r=e.heap_len>>1;r>=1;r--)j(e,a,r);o=c;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],j(e,a,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,a[2*o]=a[2*r]+a[2*n],e.depth[o]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,a[2*r+1]=a[2*n+1]=o,e.heap[1]=o++,j(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,o,a,i,s,c=t.dyn_tree,u=t.max_code,p=t.stat_desc.static_tree,f=t.stat_desc.has_stree,g=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,h=t.stat_desc.max_length,y=0;for(a=0;a<=d;a++)e.bl_count[a]=0;for(c[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<l;r++)(a=c[2*c[2*(n=e.heap[r])+1]+1]+1)>h&&(a=h,y++),c[2*n+1]=a,n>u||(e.bl_count[a]++,i=0,n>=m&&(i=g[n-m]),s=c[2*n],e.opt_len+=s*(a+i),f&&(e.static_len+=s*(p[2*n+1]+i)));if(0!==y){do{for(a=h-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[h]--,y-=2}while(y>0);for(a=h;0!==a;a--)for(n=e.bl_count[a];0!==n;)(o=e.heap[--r])>u||(c[2*o+1]!==a&&(e.opt_len+=(a-c[2*o+1])*c[2*o],c[2*o+1]=a),n--)}}(e,t),B(a,u,e.bl_count)}function V(e,t,r){var n,o,a=-1,i=t[1],s=0,c=7,u=4;for(0===i&&(c=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)o=i,i=t[2*(n+1)+1],++s<c&&o===i||(s<u?e.bl_tree[2*o]+=s:0!==o?(o!==a&&e.bl_tree[2*o]++,e.bl_tree[2*g]++):s<=10?e.bl_tree[2*m]++:e.bl_tree[2*h]++,s=0,a=o,0===i?(c=138,u=3):o===i?(c=6,u=3):(c=7,u=4))}function H(e,t,r){var n,o,a=-1,i=t[1],s=0,c=7,u=4;for(0===i&&(c=138,u=3),n=0;n<=r;n++)if(o=i,i=t[2*(n+1)+1],!(++s<c&&o===i)){if(s<u)do{M(e,o,e.bl_tree)}while(0!=--s);else 0!==o?(o!==a&&(M(e,o,e.bl_tree),s--),M(e,g,e.bl_tree),L(e,s-3,2)):s<=10?(M(e,m,e.bl_tree),L(e,s-3,3)):(M(e,h,e.bl_tree),L(e,s-11,7));s=0,a=o,0===i?(c=138,u=3):o===i?(c=6,u=3):(c=7,u=4)}}o(D);var W=!1;function z(e,t,r,o){L(e,(a<<1)+(o?1:0),3),function(e,t,r,o){x(e),U(e,r),U(e,~r),n.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r)}t._tr_init=function(e){W||(function(){var e,t,r,n,o,a=new Array(d+1);for(r=0,n=0;n<28;n++)for(I[n]=r,e=0;e<1<<y[n];e++)T[r++]=n;for(T[r-1]=n,o=0,n=0;n<16;n++)for(D[n]=o,e=0;e<1<<S[n];e++)b[o++]=n;for(o>>=7;n<c;n++)for(D[n]=o<<7,e=0;e<1<<S[n]-7;e++)b[256+o++]=n;for(t=0;t<=d;t++)a[t]=0;for(e=0;e<=143;)A[2*e+1]=8,e++,a[8]++;for(;e<=255;)A[2*e+1]=9,e++,a[9]++;for(;e<=279;)A[2*e+1]=7,e++,a[7]++;for(;e<=287;)A[2*e+1]=8,e++,a[8]++;for(B(A,s+1,a),e=0;e<c;e++)_[2*e+1]=5,_[2*e]=k(e,5);w=new P(A,y,i+1,s,d),C=new P(_,S,0,c,d),O=new P(new Array(0),v,0,u,7)}(),W=!0),e.l_desc=new N(e.dyn_ltree,w),e.d_desc=new N(e.dyn_dtree,C),e.bl_desc=new N(e.bl_tree,O),e.bi_buf=0,e.bi_valid=0,F(e)},t._tr_stored_block=z,t._tr_flush_block=function(e,t,r,n){var o,a,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<i;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),$(e,e.l_desc),$(e,e.d_desc),s=function(e){var t;for(V(e,e.dyn_ltree,e.l_desc.max_code),V(e,e.dyn_dtree,e.d_desc.max_code),$(e,e.bl_desc),t=u-1;t>=3&&0===e.bl_tree[2*E[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=o&&(o=a)):o=a=r+5,r+4<=o&&-1!==t?z(e,t,r,n):4===e.strategy||a===o?(L(e,2+(n?1:0),3),K(e,A,_)):(L(e,4+(n?1:0),3),function(e,t,r,n){var o;for(L(e,t-257,5),L(e,r-1,5),L(e,n-4,4),o=0;o<n;o++)L(e,e.bl_tree[2*E[o]+1],3);H(e,e.dyn_ltree,t-1),H(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),K(e,e.dyn_ltree,e.dyn_dtree)),F(e),n&&x(e)},t._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(T[r]+i+1)]++,e.dyn_dtree[2*R(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){L(e,2,3),M(e,f,A),function(e){16===e.bi_valid?(U(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},24104:e=>{"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},27377:function(e,t,r){var n;e=r.nmd(e),function(o){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof r.g&&r.g;a.global!==a&&a.window!==a&&a.self;var i,s=2147483647,c=36,u=1,l=26,d=38,p=700,f=72,g=128,m="-",h=/^xn--/,y=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=c-u,A=Math.floor,_=String.fromCharCode;function b(e){throw RangeError(v[e])}function T(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function I(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+T((e=e.replace(S,".")).split("."),t).join(".")}function w(e){for(var t,r,n=[],o=0,a=e.length;o<a;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<a?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function C(e){return T(e,(function(e){var t="";return e>65535&&(t+=_((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+_(e)})).join("")}function O(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function D(e,t,r){var n=0;for(e=r?A(e/p):e>>1,e+=A(e/t);e>E*l>>1;n+=c)e=A(e/E);return A(n+(E+1)*e/(e+d))}function P(e){var t,r,n,o,a,i,d,p,h,y,S,v=[],E=e.length,_=0,T=g,I=f;for((r=e.lastIndexOf(m))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&b("not-basic"),v.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<E;){for(a=_,i=1,d=c;o>=E&&b("invalid-input"),((p=(S=e.charCodeAt(o++))-48<10?S-22:S-65<26?S-65:S-97<26?S-97:c)>=c||p>A((s-_)/i))&&b("overflow"),_+=p*i,!(p<(h=d<=I?u:d>=I+l?l:d-I));d+=c)i>A(s/(y=c-h))&&b("overflow"),i*=y;I=D(_-a,t=v.length+1,0==a),A(_/t)>s-T&&b("overflow"),T+=A(_/t),_%=t,v.splice(_++,0,T)}return C(v)}function N(e){var t,r,n,o,a,i,d,p,h,y,S,v,E,T,I,C=[];for(v=(e=w(e)).length,t=g,r=0,a=f,i=0;i<v;++i)(S=e[i])<128&&C.push(_(S));for(n=o=C.length,o&&C.push(m);n<v;){for(d=s,i=0;i<v;++i)(S=e[i])>=t&&S<d&&(d=S);for(d-t>A((s-r)/(E=n+1))&&b("overflow"),r+=(d-t)*E,t=d,i=0;i<v;++i)if((S=e[i])<t&&++r>s&&b("overflow"),S==t){for(p=r,h=c;!(p<(y=h<=a?u:h>=a+l?l:h-a));h+=c)I=p-y,T=c-y,C.push(_(O(y+I%T,0))),p=A(I/T);C.push(_(O(p,0))),a=D(r,E,n==o),r=0,++n}++r,++t}return C.join("")}i={version:"1.3.2",ucs2:{decode:w,encode:C},decode:P,encode:N,toASCII:function(e){return I(e,(function(e){return y.test(e)?"xn--"+N(e):e}))},toUnicode:function(e){return I(e,(function(e){return h.test(e)?P(e.slice(4).toLowerCase()):e}))}},void 0===(n=function(){return i}.call(t,r,t,e))||(e.exports=n)}()},66319:(e,t,r)=>{"use strict";var n=r(79112),o=r(52458),a=r(49048);function i(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function s(e){return Array.isArray(e)?e.sort():"object"==typeof e?s(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function c(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function u(e,t){var r=function(e){var t;switch(e.arrayFormat){case"index":return function(e,r,n){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return function(e,r,n){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};default:return function(e,t,r){void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t=o({arrayFormat:"none"},t)),n=Object.create(null);return"string"!=typeof e?n:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),o=t.shift(),i=t.length>0?t.join("="):void 0;i=void 0===i?null:a(i),r(a(o),i,n)})),Object.keys(n).sort().reduce((function(e,t){var r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=s(r):e[t]=r,e}),Object.create(null))):n}t.extract=c,t.parse=u,t.stringify=function(e,t){!1===(t=o({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var r=function(e){switch(e.arrayFormat){case"index":return function(t,r,n){return null===r?[i(t,e),"[",n,"]"].join(""):[i(t,e),"[",i(n,e),"]=",i(r,e)].join("")};case"bracket":return function(t,r){return null===r?i(t,e):[i(t,e),"[]=",i(r,e)].join("")};default:return function(t,r){return null===r?i(t,e):[i(t,e),"=",i(r,e)].join("")}}}(t);return e?Object.keys(e).sort(t.sort).map((function(n){var o=e[n];if(void 0===o)return"";if(null===o)return i(n,t);if(Array.isArray(o)){var a=[];return o.slice().forEach((function(e){void 0!==e&&a.push(r(n,e,a.length))})),a.join("&")}return i(n,t)+"="+i(o,t)})).filter((function(e){return e.length>0})).join("&"):""},t.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:u(c(e),t)}}},24400:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,r,n,o){r=r||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var i=/\+/g;e=e.split(r);var s=1e3;o&&"number"==typeof o.maxKeys&&(s=o.maxKeys);var c=e.length;s>0&&c>s&&(c=s);for(var u=0;u<c;++u){var l,d,p,f,g=e[u].replace(i,"%20"),m=g.indexOf(n);m>=0?(l=g.substr(0,m),d=g.substr(m+1)):(l=g,d=""),p=decodeURIComponent(l),f=decodeURIComponent(d),t(a,p)?Array.isArray(a[p])?a[p].push(f):a[p]=[a[p],f]:a[p]=f}return a}},7433:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,r,n,o){return r=r||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(o){var a=encodeURIComponent(t(o))+n;return Array.isArray(e[o])?e[o].map((function(e){return a+encodeURIComponent(t(e))})).join(r):a+encodeURIComponent(t(e[o]))})).join(r):o?encodeURIComponent(t(o))+n+encodeURIComponent(t(e)):""}},3048:(e,t,r)=>{"use strict";t.decode=t.parse=r(24400),t.encode=t.stringify=r(7433)},16516:(e,t,r)=>{"use strict";r.r(t),r.d(t,{F:()=>n,T:()=>o,__:()=>a,add:()=>s,addIndex:()=>g,adjust:()=>h,all:()=>T,allPass:()=>z,always:()=>q,and:()=>Y,andThen:()=>Sa,any:()=>X,anyPass:()=>J,ap:()=>ee,aperture:()=>ne,append:()=>oe,apply:()=>ae,applySpec:()=>ue,applyTo:()=>le,ascend:()=>de,assoc:()=>fe,assocPath:()=>ye,binary:()=>ve,bind:()=>N,both:()=>be,call:()=>Ie,chain:()=>Oe,clamp:()=>Pe,clone:()=>Le,comparator:()=>Me,complement:()=>Be,compose:()=>Ve,composeK:()=>He,composeP:()=>qe,composeWith:()=>Je,concat:()=>mt,cond:()=>yt,construct:()=>vt,constructN:()=>St,contains:()=>Et,converge:()=>At,countBy:()=>Tt,curry:()=>Te,curryN:()=>f,dec:()=>It,defaultTo:()=>wt,descend:()=>Ct,difference:()=>Pt,differenceWith:()=>Rt,dissoc:()=>Lt,dissocPath:()=>Ft,divide:()=>xt,drop:()=>Kt,dropLast:()=>qt,dropLastWhile:()=>Zt,dropRepeats:()=>rr,dropRepeatsWith:()=>tr,dropWhile:()=>ar,either:()=>sr,empty:()=>ur,endsWith:()=>dr,eqBy:()=>pr,eqProps:()=>gr,equals:()=>et.Z,evolve:()=>hr,filter:()=>dt,find:()=>vr,findIndex:()=>_r,findLast:()=>Ir,findLastIndex:()=>Or,flatten:()=>Dr,flip:()=>Pr,forEach:()=>Nr,forEachObjIndexed:()=>Rr,fromPairs:()=>Ur,groupBy:()=>Lr,groupWith:()=>Mr,gt:()=>kr,gte:()=>Br,has:()=>Gr,hasIn:()=>Kr,hasPath:()=>Fr,head:()=>Ye,identical:()=>Vr,identity:()=>Ze,ifElse:()=>Hr,inc:()=>Wr,includes:()=>zr,indexBy:()=>qr,indexOf:()=>Yr,init:()=>Qr,innerJoin:()=>Zr,insert:()=>Xr,insertAll:()=>Jr,intersection:()=>nn,intersperse:()=>on,into:()=>dn,invert:()=>fn,invertObj:()=>mn,invoker:()=>hn,is:()=>yn,isEmpty:()=>Sn,isNil:()=>me,join:()=>vn,juxt:()=>En,keys:()=>F.Z,keysIn:()=>_n,last:()=>er,lastIndexOf:()=>bn,length:()=>In,lens:()=>wn,lensIndex:()=>Cn,lensPath:()=>On,lensProp:()=>Dn,lift:()=>_e,liftN:()=>Ae,lt:()=>Pn,lte:()=>Nn,map:()=>x,mapAccum:()=>Rn,mapAccumRight:()=>Un,mapObjIndexed:()=>Ln,match:()=>Mn,mathMod:()=>kn,max:()=>I,maxBy:()=>Bn,mean:()=>xn,median:()=>Gn,memoizeWith:()=>jn,merge:()=>Kn,mergeAll:()=>$n,mergeDeepLeft:()=>Wn,mergeDeepRight:()=>zn,mergeDeepWith:()=>qn,mergeDeepWithKey:()=>Hn,mergeLeft:()=>Yn,mergeRight:()=>Qn,mergeWith:()=>Zn,mergeWithKey:()=>Vn,min:()=>Xn,minBy:()=>Jn,modulo:()=>eo,move:()=>to,multiply:()=>ro,nAry:()=>Se,negate:()=>no,none:()=>oo,not:()=>ke,nth:()=>j,nthArg:()=>ao,o:()=>io,objOf:()=>sn,of:()=>so,omit:()=>uo,once:()=>lo,or:()=>ir,otherwise:()=>fo,over:()=>ho,pair:()=>yo,partial:()=>vo,partialRight:()=>Eo,partition:()=>Ao,path:()=>$,pathEq:()=>_o,pathOr:()=>bo,pathSatisfies:()=>To,paths:()=>K,pick:()=>Io,pickAll:()=>wo,pickBy:()=>Oo,pipe:()=>Ke,pipeK:()=>Do,pipeP:()=>ze,pipeWith:()=>Xe,pluck:()=>H,prepend:()=>Po,product:()=>No,project:()=>Uo,prop:()=>V,propEq:()=>Lo,propIs:()=>ko,propOr:()=>Bo,propSatisfies:()=>Fo,props:()=>xo,range:()=>Go,reduce:()=>W,reduceBy:()=>bt,reduceRight:()=>jo,reduceWhile:()=>Ko,reduced:()=>$o,reject:()=>pt,remove:()=>Mt,repeat:()=>Ho,replace:()=>Wo,reverse:()=>$e,scan:()=>zo,sequence:()=>Yo,set:()=>Zo,slice:()=>Ge,sort:()=>Jo,sortBy:()=>ea,sortWith:()=>ta,split:()=>ra,splitAt:()=>na,splitEvery:()=>oa,splitWhen:()=>aa,startsWith:()=>ia,subtract:()=>sa,sum:()=>Fn,symmetricDifference:()=>ca,symmetricDifferenceWith:()=>ua,tail:()=>je,take:()=>Ht,takeLast:()=>lr,takeLastWhile:()=>la,takeWhile:()=>fa,tap:()=>ha,test:()=>ya,thunkify:()=>ii,times:()=>Vo,toLower:()=>va,toPairs:()=>Aa,toPairsIn:()=>ba,toString:()=>gt,toUpper:()=>Ta,transduce:()=>Ia,transpose:()=>wa,traverse:()=>Oa,trim:()=>Pa,tryCatch:()=>Na,type:()=>Re.Z,unapply:()=>Ra,unary:()=>Ua,uncurryN:()=>La,unfold:()=>ka,union:()=>Ba,unionWith:()=>xa,uniq:()=>rn,uniqBy:()=>tn,uniqWith:()=>Fa,unless:()=>Ga,unnest:()=>ja,until:()=>$a,update:()=>kt,useWith:()=>Ro,values:()=>se,valuesIn:()=>Ha,view:()=>qa,when:()=>Ya,where:()=>Za,whereEq:()=>Xa,without:()=>Ja,xor:()=>ei,xprod:()=>ti,zip:()=>ri,zipObj:()=>oi,zipWith:()=>ai});const n=function(){return!1},o=function(){return!0},a={"@@functional/placeholder":!0};var i=r(11963);const s=(0,i.Z)((function(e,t){return Number(e)+Number(t)}));function c(e,t){var r;t=t||[];var n=(e=e||[]).length,o=t.length,a=[];for(r=0;r<n;)a[a.length]=e[r],r+=1;for(r=0;r<o;)a[a.length]=t[r],r+=1;return a}var u=r(94005);function l(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,r){return t.apply(this,arguments)};case 3:return function(e,r,n){return t.apply(this,arguments)};case 4:return function(e,r,n,o){return t.apply(this,arguments)};case 5:return function(e,r,n,o,a){return t.apply(this,arguments)};case 6:return function(e,r,n,o,a,i){return t.apply(this,arguments)};case 7:return function(e,r,n,o,a,i,s){return t.apply(this,arguments)};case 8:return function(e,r,n,o,a,i,s,c){return t.apply(this,arguments)};case 9:return function(e,r,n,o,a,i,s,c,u){return t.apply(this,arguments)};case 10:return function(e,r,n,o,a,i,s,c,u,l){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var d=r(2457);function p(e,t,r){return function(){for(var n=[],o=0,a=e,i=0;i<t.length||o<arguments.length;){var s;i<t.length&&(!(0,d.Z)(t[i])||o>=arguments.length)?s=t[i]:(s=arguments[o],o+=1),n[i]=s,(0,d.Z)(s)||(a-=1),i+=1}return a<=0?r.apply(this,n):l(a,p(e,n,r))}}const f=(0,i.Z)((function(e,t){return 1===e?(0,u.Z)(t):l(e,p(e,[],t))})),g=(0,u.Z)((function(e){return f(e.length,(function(){var t=0,r=arguments[0],n=arguments[arguments.length-1],o=Array.prototype.slice.call(arguments,0);return o[0]=function(){var e=r.apply(this,c(arguments,[t,n]));return t+=1,e},e.apply(this,o)}))}));function m(e){return function t(r,n,o){switch(arguments.length){case 0:return t;case 1:return(0,d.Z)(r)?t:(0,i.Z)((function(t,n){return e(r,t,n)}));case 2:return(0,d.Z)(r)&&(0,d.Z)(n)?t:(0,d.Z)(r)?(0,i.Z)((function(t,r){return e(t,n,r)})):(0,d.Z)(n)?(0,i.Z)((function(t,n){return e(r,t,n)})):(0,u.Z)((function(t){return e(r,n,t)}));default:return(0,d.Z)(r)&&(0,d.Z)(n)&&(0,d.Z)(o)?t:(0,d.Z)(r)&&(0,d.Z)(n)?(0,i.Z)((function(t,r){return e(t,r,o)})):(0,d.Z)(r)&&(0,d.Z)(o)?(0,i.Z)((function(t,r){return e(t,n,r)})):(0,d.Z)(n)&&(0,d.Z)(o)?(0,i.Z)((function(t,n){return e(r,t,n)})):(0,d.Z)(r)?(0,u.Z)((function(t){return e(t,n,o)})):(0,d.Z)(n)?(0,u.Z)((function(t){return e(r,t,o)})):(0,d.Z)(o)?(0,u.Z)((function(t){return e(r,n,t)})):e(r,n,o)}}}const h=m((function(e,t,r){if(e>=r.length||e<-r.length)return r;var n=(e<0?r.length:0)+e,o=c(r);return o[n]=t(r[n]),o})),y=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function S(e){return null!=e&&"function"==typeof e["@@transducer/step"]}function v(e,t,r){return function(){if(0===arguments.length)return r();var n=Array.prototype.slice.call(arguments,0),o=n.pop();if(!y(o)){for(var a=0;a<e.length;){if("function"==typeof o[e[a]])return o[e[a]].apply(o,n);a+=1}if(S(o))return t.apply(null,n)(o)}return r.apply(this,arguments)}}function E(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}}const A={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}};var _=function(){function e(e,t){this.xf=t,this.f=e,this.all=!0}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.all&&(e=this.xf["@@transducer/step"](e,!0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)||(this.all=!1,e=E(this.xf["@@transducer/step"](e,!1))),e},e}();const b=(0,i.Z)((function(e,t){return new _(e,t)})),T=(0,i.Z)(v(["all"],b,(function(e,t){for(var r=0;r<t.length;){if(!e(t[r]))return!1;r+=1}return!0}))),I=(0,i.Z)((function(e,t){return t>e?t:e}));function w(e,t){for(var r=0,n=t.length,o=Array(n);r<n;)o[r]=e(t[r]),r+=1;return o}function C(e){return"[object String]"===Object.prototype.toString.call(e)}const O=(0,u.Z)((function(e){return!!y(e)||!!e&&"object"==typeof e&&!C(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1))}));var D=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();function P(e){return new D(e)}const N=(0,i.Z)((function(e,t){return l(e.length,(function(){return e.apply(t,arguments)}))}));function R(e,t,r){for(var n=r.next();!n.done;){if((t=e["@@transducer/step"](t,n.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n=r.next()}return e["@@transducer/result"](t)}function U(e,t,r,n){return e["@@transducer/result"](r[n](N(e["@@transducer/step"],e),t))}var L="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function M(e,t,r){if("function"==typeof e&&(e=P(e)),O(r))return function(e,t,r){for(var n=0,o=r.length;n<o;){if((t=e["@@transducer/step"](t,r[n]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n+=1}return e["@@transducer/result"](t)}(e,t,r);if("function"==typeof r["fantasy-land/reduce"])return U(e,t,r,"fantasy-land/reduce");if(null!=r[L])return R(e,t,r[L]());if("function"==typeof r.next)return R(e,t,r);if("function"==typeof r.reduce)return U(e,t,r,"reduce");throw new TypeError("reduce: list must be array or iterable")}var k=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=A.result,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},e}();const B=(0,i.Z)((function(e,t){return new k(e,t)}));var F=r(50622);const x=(0,i.Z)(v(["fantasy-land/map","map"],B,(function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return f(t.length,(function(){return e.call(this,t.apply(this,arguments))}));case"[object Object]":return M((function(r,n){return r[n]=e(t[n]),r}),{},(0,F.Z)(t));default:return w(e,t)}}))),G=Number.isInteger||function(e){return e<<0===e},j=(0,i.Z)((function(e,t){var r=e<0?t.length+e:e;return C(t)?t.charAt(r):t[r]})),K=(0,i.Z)((function(e,t){return e.map((function(e){for(var r,n=t,o=0;o<e.length;){if(null==n)return;r=e[o],n=G(r)?j(r,n):n[r],o+=1}return n}))})),$=(0,i.Z)((function(e,t){return K([e],t)[0]})),V=(0,i.Z)((function(e,t){return $([e],t)})),H=(0,i.Z)((function(e,t){return x(V(e),t)})),W=m(M),z=(0,u.Z)((function(e){return f(W(I,0,H("length",e)),(function(){for(var t=0,r=e.length;t<r;){if(!e[t].apply(this,arguments))return!1;t+=1}return!0}))})),q=(0,u.Z)((function(e){return function(){return e}})),Y=(0,i.Z)((function(e,t){return e&&t}));var Q=function(){function e(e,t){this.xf=t,this.f=e,this.any=!1}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.any=!0,e=E(this.xf["@@transducer/step"](e,!0))),e},e}();const Z=(0,i.Z)((function(e,t){return new Q(e,t)})),X=(0,i.Z)(v(["any"],Z,(function(e,t){for(var r=0;r<t.length;){if(e(t[r]))return!0;r+=1}return!1}))),J=(0,u.Z)((function(e){return f(W(I,0,H("length",e)),(function(){for(var t=0,r=e.length;t<r;){if(e[t].apply(this,arguments))return!0;t+=1}return!1}))})),ee=(0,i.Z)((function(e,t){return"function"==typeof t["fantasy-land/ap"]?t["fantasy-land/ap"](e):"function"==typeof e.ap?e.ap(t):"function"==typeof e?function(r){return e(r)(t(r))}:M((function(e,r){return c(e,x(r,t))}),[],e)}));var te=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=new Array(e)}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.store(t),this.full?this.xf["@@transducer/step"](e,this.getCopy()):e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e.prototype.getCopy=function(){return c(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},e}();const re=(0,i.Z)((function(e,t){return new te(e,t)})),ne=(0,i.Z)(v([],re,(function(e,t){for(var r=0,n=t.length-(e-1),o=new Array(n>=0?n:0);r<n;)o[r]=Array.prototype.slice.call(t,r,r+e),r+=1;return o}))),oe=(0,i.Z)((function(e,t){return c(t,[e])})),ae=(0,i.Z)((function(e,t){return e.apply(this,t)}));var ie=(0,u.Z)((function(e){for(var t=(0,F.Z)(e),r=t.length,n=[],o=0;o<r;)n[o]=e[t[o]],o+=1;return n}));const se=ie;function ce(e,t){return(0,F.Z)(t).reduce((function(r,n){return r[n]=e(t[n]),r}),{})}const ue=(0,u.Z)((function e(t){return t=ce((function(t){return"function"==typeof t?t:e(t)}),t),f(W(I,0,H("length",se(t))),(function(){var e=arguments;return ce((function(t){return ae(t,e)}),t)}))})),le=(0,i.Z)((function(e,t){return t(e)})),de=m((function(e,t,r){var n=e(t),o=e(r);return n<o?-1:n>o?1:0}));var pe=m((function(e,t,r){var n={};for(var o in r)n[o]=r[o];return n[e]=t,n}));const fe=pe;var ge=r(46861);const me=(0,u.Z)((function(e){return null==e}));var he=m((function e(t,r,n){if(0===t.length)return r;var o=t[0];if(t.length>1){var a=!me(n)&&(0,ge.Z)(o,n)?n[o]:G(t[1])?[]:{};r=e(Array.prototype.slice.call(t,1),r,a)}if(G(o)&&y(n)){var i=[].concat(n);return i[o]=r,i}return fe(o,r,n)}));const ye=he,Se=(0,i.Z)((function(e,t){switch(e){case 0:return function(){return t.call(this)};case 1:return function(e){return t.call(this,e)};case 2:return function(e,r){return t.call(this,e,r)};case 3:return function(e,r,n){return t.call(this,e,r,n)};case 4:return function(e,r,n,o){return t.call(this,e,r,n,o)};case 5:return function(e,r,n,o,a){return t.call(this,e,r,n,o,a)};case 6:return function(e,r,n,o,a,i){return t.call(this,e,r,n,o,a,i)};case 7:return function(e,r,n,o,a,i,s){return t.call(this,e,r,n,o,a,i,s)};case 8:return function(e,r,n,o,a,i,s,c){return t.call(this,e,r,n,o,a,i,s,c)};case 9:return function(e,r,n,o,a,i,s,c,u){return t.call(this,e,r,n,o,a,i,s,c,u)};case 10:return function(e,r,n,o,a,i,s,c,u,l){return t.call(this,e,r,n,o,a,i,s,c,u,l)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}})),ve=(0,u.Z)((function(e){return Se(2,e)}));function Ee(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t}const Ae=(0,i.Z)((function(e,t){var r=f(e,t);return f(e,(function(){return M(ee,x(r,arguments[0]),Array.prototype.slice.call(arguments,1))}))})),_e=(0,u.Z)((function(e){return Ae(e.length,e)})),be=(0,i.Z)((function(e,t){return Ee(e)?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:_e(Y)(e,t)})),Te=(0,u.Z)((function(e){return f(e.length,e)})),Ie=Te((function(e){return e.apply(this,Array.prototype.slice.call(arguments,1))}));function we(e){return function t(r){for(var n,o,a,i=[],s=0,c=r.length;s<c;){if(O(r[s]))for(a=0,o=(n=e?t(r[s]):r[s]).length;a<o;)i[i.length]=n[a],a+=1;else i[i.length]=r[s];s+=1}return i}}const Ce=(0,i.Z)((function(e,t){return x(e,function(e){var t=function(e){return{"@@transducer/init":A.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,r){var n=e["@@transducer/step"](t,r);return n["@@transducer/reduced"]?{"@@transducer/value":n,"@@transducer/reduced":!0}:n}}}(e);return{"@@transducer/init":A.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,r){return O(r)?M(t,e,r):M(t,e,[r])}}}(t))})),Oe=(0,i.Z)(v(["fantasy-land/chain","chain"],Ce,(function(e,t){return"function"==typeof t?function(r){return e(t(r))(r)}:we(!1)(x(e,t))})));var De=m((function(e,t,r){if(e>t)throw new Error("min must not be greater than max in clamp(min, max, value)");return r<e?e:r>t?t:r}));const Pe=De;function Ne(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))}var Re=r(18208);function Ue(e,t,r,n){var o=function(o){for(var a=t.length,i=0;i<a;){if(e===t[i])return r[i];i+=1}for(var s in t[i+1]=e,r[i+1]=o,e)o[s]=n?Ue(e[s],t,r,!0):e[s];return o};switch((0,Re.Z)(e)){case"Object":return o({});case"Array":return o([]);case"Date":return new Date(e.valueOf());case"RegExp":return Ne(e);default:return e}}const Le=(0,u.Z)((function(e){return null!=e&&"function"==typeof e.clone?e.clone():Ue(e,[],[],!0)})),Me=(0,u.Z)((function(e){return function(t,r){return e(t,r)?-1:e(r,t)?1:0}})),ke=(0,u.Z)((function(e){return!e})),Be=_e(ke);function Fe(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function xe(e,t){return function(){var r=arguments.length;if(0===r)return t();var n=arguments[r-1];return y(n)||"function"!=typeof n[e]?t.apply(this,arguments):n[e].apply(n,Array.prototype.slice.call(arguments,0,r-1))}}const Ge=m(xe("slice",(function(e,t,r){return Array.prototype.slice.call(r,e,t)}))),je=(0,u.Z)(xe("tail",Ge(1,1/0)));function Ke(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return l(arguments[0].length,W(Fe,arguments[0],je(arguments)))}const $e=(0,u.Z)((function(e){return C(e)?e.split("").reverse().join(""):Array.prototype.slice.call(e,0).reverse()}));function Ve(){if(0===arguments.length)throw new Error("compose requires at least one argument");return Ke.apply(this,$e(arguments))}function He(){if(0===arguments.length)throw new Error("composeK requires at least one argument");var e=Array.prototype.slice.call(arguments),t=e.pop();return Ve(Ve.apply(this,x(Oe,e)),t)}function We(e,t){return function(){var r=this;return e.apply(r,arguments).then((function(e){return t.call(r,e)}))}}function ze(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return l(arguments[0].length,W(We,arguments[0],je(arguments)))}function qe(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return ze.apply(this,$e(arguments))}const Ye=j(0);function Qe(e){return e}const Ze=(0,u.Z)(Qe),Xe=(0,i.Z)((function(e,t){if(t.length<=0)return Ze;var r=Ye(t),n=je(t);return l(r.length,(function(){return M((function(t,r){return e.call(this,r,t)}),r.apply(this,arguments),n)}))})),Je=(0,i.Z)((function(e,t){return Xe.apply(this,[e,$e(t)])}));var et=r(52800);function tt(e,t,r){var n,o;if("function"==typeof e.indexOf)switch(typeof t){case"number":if(0===t){for(n=1/t;r<e.length;){if(0===(o=e[r])&&1/o===n)return r;r+=1}return-1}if(t!=t){for(;r<e.length;){if("number"==typeof(o=e[r])&&o!=o)return r;r+=1}return-1}return e.indexOf(t,r);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,r);case"object":if(null===t)return e.indexOf(t,r)}for(;r<e.length;){if((0,et.Z)(e[r],t))return r;r+=1}return-1}function rt(e,t){return tt(t,e,0)>=0}function nt(e){return'"'+e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var ot=function(e){return(e<10?"0":"")+e};const at="function"==typeof Date.prototype.toISOString?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+ot(e.getUTCMonth()+1)+"-"+ot(e.getUTCDate())+"T"+ot(e.getUTCHours())+":"+ot(e.getUTCMinutes())+":"+ot(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function it(e){return function(){return!e.apply(this,arguments)}}function st(e,t){for(var r=0,n=t.length,o=[];r<n;)e(t[r])&&(o[o.length]=t[r]),r+=1;return o}function ct(e){return"[object Object]"===Object.prototype.toString.call(e)}var ut=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=A.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},e}();const lt=(0,i.Z)((function(e,t){return new ut(e,t)})),dt=(0,i.Z)(v(["filter"],lt,(function(e,t){return ct(t)?M((function(r,n){return e(t[n])&&(r[n]=t[n]),r}),{},(0,F.Z)(t)):st(e,t)}))),pt=(0,i.Z)((function(e,t){return dt(it(e),t)}));function ft(e,t){var r=function(r){var n=t.concat([e]);return rt(r,n)?"<Circular>":ft(r,n)},n=function(e,t){return w((function(t){return nt(t)+": "+r(e[t])}),t.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+w(r,e).join(", ")+"))";case"[object Array]":return"["+w(r,e).concat(n(e,pt((function(e){return/^\d+$/.test(e)}),(0,F.Z)(e)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof e?"new Boolean("+r(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?r(NaN):nt(at(e)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof e?"new Number("+r(e.valueOf())+")":1/e==-1/0?"-0":e.toString(10);case"[object String]":return"object"==typeof e?"new String("+r(e.valueOf())+")":nt(e);case"[object Undefined]":return"undefined";default:if("function"==typeof e.toString){var o=e.toString();if("[object Object]"!==o)return o}return"{"+n(e,(0,F.Z)(e)).join(", ")+"}"}}const gt=(0,u.Z)((function(e){return ft(e,[])})),mt=(0,i.Z)((function(e,t){if(y(e)){if(y(t))return e.concat(t);throw new TypeError(gt(t)+" is not an array")}if(C(e)){if(C(t))return e+t;throw new TypeError(gt(t)+" is not a string")}if(null!=e&&Ee(e["fantasy-land/concat"]))return e["fantasy-land/concat"](t);if(null!=e&&Ee(e.concat))return e.concat(t);throw new TypeError(gt(e)+' does not have a method named "concat" or "fantasy-land/concat"')}));var ht=(0,u.Z)((function(e){return l(W(I,0,x((function(e){return e[0].length}),e)),(function(){for(var t=0;t<e.length;){if(e[t][0].apply(this,arguments))return e[t][1].apply(this,arguments);t+=1}}))}));const yt=ht,St=(0,i.Z)((function(e,t){if(e>10)throw new Error("Constructor with greater than ten arguments");return 0===e?function(){return new t}:Te(Se(e,(function(e,r,n,o,a,i,s,c,u,l){switch(arguments.length){case 1:return new t(e);case 2:return new t(e,r);case 3:return new t(e,r,n);case 4:return new t(e,r,n,o);case 5:return new t(e,r,n,o,a);case 6:return new t(e,r,n,o,a,i);case 7:return new t(e,r,n,o,a,i,s);case 8:return new t(e,r,n,o,a,i,s,c);case 9:return new t(e,r,n,o,a,i,s,c,u);case 10:return new t(e,r,n,o,a,i,s,c,u,l)}})))})),vt=(0,u.Z)((function(e){return St(e.length,e)})),Et=(0,i.Z)(rt),At=(0,i.Z)((function(e,t){return f(W(I,0,H("length",t)),(function(){var r=arguments,n=this;return e.apply(n,w((function(e){return e.apply(n,r)}),t))}))}));var _t=function(){function e(e,t,r,n){this.valueFn=e,this.valueAcc=t,this.keyFn=r,this.xf=n,this.inputs={}}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){var t;for(t in this.inputs)if((0,ge.Z)(t,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[t]))["@@transducer/reduced"]){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){var r=this.keyFn(t);return this.inputs[r]=this.inputs[r]||[r,this.valueAcc],this.inputs[r][1]=this.valueFn(this.inputs[r][1],t),e},e}();const bt=p(4,[],v([],p(4,[],(function(e,t,r,n){return new _t(e,t,r,n)})),(function(e,t,r,n){return M((function(n,o){var a=r(o);return n[a]=e((0,ge.Z)(a,n)?n[a]:Ue(t,[],[],!1),o),n}),{},n)}))),Tt=bt((function(e,t){return e+1}),0),It=s(-1),wt=(0,i.Z)((function(e,t){return null==t||t!=t?e:t})),Ct=m((function(e,t,r){var n=e(t),o=e(r);return n>o?-1:n<o?1:0}));function Ot(e,t,r){var n,o=typeof e;switch(o){case"string":case"number":return 0===e&&1/e==-1/0?!!r._items["-0"]||(t&&(r._items["-0"]=!0),!1):null!==r._nativeSet?t?(n=r._nativeSet.size,r._nativeSet.add(e),r._nativeSet.size===n):r._nativeSet.has(e):o in r._items?e in r._items[o]||(t&&(r._items[o][e]=!0),!1):(t&&(r._items[o]={},r._items[o][e]=!0),!1);case"boolean":if(o in r._items){var a=e?1:0;return!!r._items[o][a]||(t&&(r._items[o][a]=!0),!1)}return t&&(r._items[o]=e?[!1,!0]:[!0,!1]),!1;case"function":return null!==r._nativeSet?t?(n=r._nativeSet.size,r._nativeSet.add(e),r._nativeSet.size===n):r._nativeSet.has(e):o in r._items?!!rt(e,r._items[o])||(t&&r._items[o].push(e),!1):(t&&(r._items[o]=[e]),!1);case"undefined":return!!r._items[o]||(t&&(r._items[o]=!0),!1);case"object":if(null===e)return!!r._items.null||(t&&(r._items.null=!0),!1);default:return(o=Object.prototype.toString.call(e))in r._items?!!rt(e,r._items[o])||(t&&r._items[o].push(e),!1):(t&&(r._items[o]=[e]),!1)}}const Dt=function(){function e(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return e.prototype.add=function(e){return!Ot(e,!0,this)},e.prototype.has=function(e){return Ot(e,!1,this)},e}(),Pt=(0,i.Z)((function(e,t){for(var r=[],n=0,o=e.length,a=t.length,i=new Dt,s=0;s<a;s+=1)i.add(t[s]);for(;n<o;)i.add(e[n])&&(r[r.length]=e[n]),n+=1;return r}));var Nt=r(34425);const Rt=m((function(e,t,r){for(var n=[],o=0,a=t.length;o<a;)(0,Nt.Z)(e,t[o],r)||(0,Nt.Z)(e,t[o],n)||n.push(t[o]),o+=1;return n}));var Ut=(0,i.Z)((function(e,t){var r={};for(var n in t)r[n]=t[n];return delete r[e],r}));const Lt=Ut,Mt=m((function(e,t,r){var n=Array.prototype.slice.call(r,0);return n.splice(e,t),n})),kt=m((function(e,t,r){return h(e,q(t),r)}));var Bt=(0,i.Z)((function e(t,r){switch(t.length){case 0:return r;case 1:return G(t[0])&&y(r)?Mt(t[0],1,r):Lt(t[0],r);default:var n=t[0],o=Array.prototype.slice.call(t,1);return null==r[n]?r:G(n)&&y(r)?kt(n,e(o,r[n]),r):fe(n,e(o,r[n]),r)}}));const Ft=Bt,xt=(0,i.Z)((function(e,t){return e/t}));var Gt=function(){function e(e,t){this.xf=t,this.n=e}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=A.result,e.prototype["@@transducer/step"]=function(e,t){return this.n>0?(this.n-=1,e):this.xf["@@transducer/step"](e,t)},e}();const jt=(0,i.Z)((function(e,t){return new Gt(e,t)})),Kt=(0,i.Z)(v(["drop"],jt,(function(e,t){return Ge(Math.max(0,e),1/0,t)})));var $t=function(){function e(e,t){this.xf=t,this.n=e,this.i=0}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=A.result,e.prototype["@@transducer/step"]=function(e,t){this.i+=1;var r=0===this.n?e:this.xf["@@transducer/step"](e,t);return this.n>=0&&this.i>=this.n?E(r):r},e}();const Vt=(0,i.Z)((function(e,t){return new $t(e,t)})),Ht=(0,i.Z)(v(["take"],Vt,(function(e,t){return Ge(0,e<0?1/0:e,t)})));var Wt=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=new Array(e)}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.full&&(e=this.xf["@@transducer/step"](e,this.acc[this.pos])),this.store(t),e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e}();const zt=(0,i.Z)((function(e,t){return new Wt(e,t)})),qt=(0,i.Z)(v([],zt,(function(e,t){return Ht(e<t.length?t.length-e:0,t)})));var Yt=function(){function e(e,t){this.f=e,this.retained=[],this.xf=t}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.retained=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.retain(e,t):this.flush(e,t)},e.prototype.flush=function(e,t){return e=M(this.xf["@@transducer/step"],e,this.retained),this.retained=[],this.xf["@@transducer/step"](e,t)},e.prototype.retain=function(e,t){return this.retained.push(t),e},e}();const Qt=(0,i.Z)((function(e,t){return new Yt(e,t)})),Zt=(0,i.Z)(v([],Qt,(function(e,t){for(var r=t.length-1;r>=0&&e(t[r]);)r-=1;return Ge(0,r+1,t)})));var Xt=function(){function e(e,t){this.xf=t,this.pred=e,this.lastValue=void 0,this.seenFirstValue=!1}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=A.result,e.prototype["@@transducer/step"]=function(e,t){var r=!1;return this.seenFirstValue?this.pred(this.lastValue,t)&&(r=!0):this.seenFirstValue=!0,this.lastValue=t,r?e:this.xf["@@transducer/step"](e,t)},e}();const Jt=(0,i.Z)((function(e,t){return new Xt(e,t)})),er=j(-1),tr=(0,i.Z)(v([],Jt,(function(e,t){var r=[],n=1,o=t.length;if(0!==o)for(r[0]=t[0];n<o;)e(er(r),t[n])||(r[r.length]=t[n]),n+=1;return r}))),rr=(0,u.Z)(v([],Jt(et.Z),tr(et.Z)));var nr=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=A.result,e.prototype["@@transducer/step"]=function(e,t){if(this.f){if(this.f(t))return e;this.f=null}return this.xf["@@transducer/step"](e,t)},e}();const or=(0,i.Z)((function(e,t){return new nr(e,t)})),ar=(0,i.Z)(v(["dropWhile"],or,(function(e,t){for(var r=0,n=t.length;r<n&&e(t[r]);)r+=1;return Ge(r,1/0,t)}))),ir=(0,i.Z)((function(e,t){return e||t})),sr=(0,i.Z)((function(e,t){return Ee(e)?function(){return e.apply(this,arguments)||t.apply(this,arguments)}:_e(ir)(e,t)}));var cr=r(3405);const ur=(0,u.Z)((function(e){return null!=e&&"function"==typeof e["fantasy-land/empty"]?e["fantasy-land/empty"]():null!=e&&null!=e.constructor&&"function"==typeof e.constructor["fantasy-land/empty"]?e.constructor["fantasy-land/empty"]():null!=e&&"function"==typeof e.empty?e.empty():null!=e&&null!=e.constructor&&"function"==typeof e.constructor.empty?e.constructor.empty():y(e)?[]:C(e)?"":ct(e)?{}:(0,cr.Z)(e)?function(){return arguments}():void 0})),lr=(0,i.Z)((function(e,t){return Kt(e>=0?t.length-e:0,t)})),dr=(0,i.Z)((function(e,t){return(0,et.Z)(lr(e.length,t),e)})),pr=m((function(e,t,r){return(0,et.Z)(e(t),e(r))}));var fr=m((function(e,t,r){return(0,et.Z)(t[e],r[e])}));const gr=fr;var mr=(0,i.Z)((function e(t,r){var n,o,a,i=r instanceof Array?[]:{};for(o in r)a=typeof(n=t[o]),i[o]="function"===a?n(r[o]):n&&"object"===a?e(n,r[o]):r[o];return i}));const hr=mr;var yr=function(){function e(e,t){this.xf=t,this.f=e,this.found=!1}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=E(this.xf["@@transducer/step"](e,t))),e},e}();const Sr=(0,i.Z)((function(e,t){return new yr(e,t)})),vr=(0,i.Z)(v(["find"],Sr,(function(e,t){for(var r=0,n=t.length;r<n;){if(e(t[r]))return t[r];r+=1}})));var Er=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.found=!1}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,-1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.found=!0,e=E(this.xf["@@transducer/step"](e,this.idx))),e},e}();const Ar=(0,i.Z)((function(e,t){return new Er(e,t)})),_r=(0,i.Z)(v([],Ar,(function(e,t){for(var r=0,n=t.length;r<n;){if(e(t[r]))return r;r+=1}return-1})));var br=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.last))},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.last=t),e},e}();const Tr=(0,i.Z)((function(e,t){return new br(e,t)})),Ir=(0,i.Z)(v([],Tr,(function(e,t){for(var r=t.length-1;r>=0;){if(e(t[r]))return t[r];r-=1}})));var wr=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.lastIdx=-1}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.lastIdx))},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.lastIdx=this.idx),e},e}();const Cr=(0,i.Z)((function(e,t){return new wr(e,t)})),Or=(0,i.Z)(v([],Cr,(function(e,t){for(var r=t.length-1;r>=0;){if(e(t[r]))return r;r-=1}return-1}))),Dr=(0,u.Z)(we(!0)),Pr=(0,u.Z)((function(e){return f(e.length,(function(t,r){var n=Array.prototype.slice.call(arguments,0);return n[0]=r,n[1]=t,e.apply(this,n)}))})),Nr=(0,i.Z)(xe("forEach",(function(e,t){for(var r=t.length,n=0;n<r;)e(t[n]),n+=1;return t}))),Rr=(0,i.Z)((function(e,t){for(var r=(0,F.Z)(t),n=0;n<r.length;){var o=r[n];e(t[o],o,t),n+=1}return t})),Ur=(0,u.Z)((function(e){for(var t={},r=0;r<e.length;)t[e[r][0]]=e[r][1],r+=1;return t})),Lr=(0,i.Z)(xe("groupBy",bt((function(e,t){return null==e&&(e=[]),e.push(t),e}),null))),Mr=(0,i.Z)((function(e,t){for(var r=[],n=0,o=t.length;n<o;){for(var a=n+1;a<o&&e(t[a-1],t[a]);)a+=1;r.push(t.slice(n,a)),n=a}return r})),kr=(0,i.Z)((function(e,t){return e>t})),Br=(0,i.Z)((function(e,t){return e>=t})),Fr=(0,i.Z)((function(e,t){if(0===e.length||me(t))return!1;for(var r=t,n=0;n<e.length;){if(me(r)||!(0,ge.Z)(e[n],r))return!1;r=r[e[n]],n+=1}return!0}));var xr=(0,i.Z)((function(e,t){return Fr([e],t)}));const Gr=xr;var jr=(0,i.Z)((function(e,t){return e in t}));const Kr=jr;var $r=r(32295);const Vr=(0,i.Z)($r.Z),Hr=m((function(e,t,r){return f(Math.max(e.length,t.length,r.length),(function(){return e.apply(this,arguments)?t.apply(this,arguments):r.apply(this,arguments)}))})),Wr=s(1),zr=(0,i.Z)(rt),qr=bt((function(e,t){return t}),null),Yr=(0,i.Z)((function(e,t){return"function"!=typeof t.indexOf||y(t)?tt(t,e,0):t.indexOf(e)})),Qr=Ge(0,-1),Zr=m((function(e,t,r){return st((function(t){return(0,Nt.Z)(e,t,r)}),t)})),Xr=m((function(e,t,r){e=e<r.length&&e>=0?e:r.length;var n=Array.prototype.slice.call(r,0);return n.splice(e,0,t),n})),Jr=m((function(e,t,r){return e=e<r.length&&e>=0?e:r.length,[].concat(Array.prototype.slice.call(r,0,e),t,Array.prototype.slice.call(r,e))}));var en=(0,i.Z)((function(e,t){for(var r,n,o=new Dt,a=[],i=0;i<t.length;)r=e(n=t[i]),o.add(r)&&a.push(n),i+=1;return a}));const tn=en,rn=tn(Ze),nn=(0,i.Z)((function(e,t){var r,n;return e.length>t.length?(r=e,n=t):(r=t,n=e),rn(st(Pr(rt)(r),n))})),on=(0,i.Z)(xe("intersperse",(function(e,t){for(var r=[],n=0,o=t.length;n<o;)n===o-1?r.push(t[n]):r.push(t[n],e),n+=1;return r}))),an="function"==typeof Object.assign?Object.assign:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,n=arguments.length;r<n;){var o=arguments[r];if(null!=o)for(var a in o)(0,ge.Z)(a,o)&&(t[a]=o[a]);r+=1}return t},sn=(0,i.Z)((function(e,t){var r={};return r[e]=t,r}));var cn={"@@transducer/init":Array,"@@transducer/step":function(e,t){return e.push(t),e},"@@transducer/result":Qe},un={"@@transducer/init":String,"@@transducer/step":function(e,t){return e+t},"@@transducer/result":Qe},ln={"@@transducer/init":Object,"@@transducer/step":function(e,t){return an(e,O(t)?sn(t[0],t[1]):t)},"@@transducer/result":Qe};const dn=m((function(e,t,r){return S(e)?M(t(e),e["@@transducer/init"](),r):M(t(function(e){if(S(e))return e;if(O(e))return cn;if("string"==typeof e)return un;if("object"==typeof e)return ln;throw new Error("Cannot create transformer for "+e)}(e)),Ue(e,[],[],!1),r)}));var pn=(0,u.Z)((function(e){for(var t=(0,F.Z)(e),r=t.length,n=0,o={};n<r;){var a=t[n],i=e[a],s=(0,ge.Z)(i,o)?o[i]:o[i]=[];s[s.length]=a,n+=1}return o}));const fn=pn;var gn=(0,u.Z)((function(e){for(var t=(0,F.Z)(e),r=t.length,n=0,o={};n<r;){var a=t[n];o[e[a]]=a,n+=1}return o}));const mn=gn,hn=(0,i.Z)((function(e,t){return f(e+1,(function(){var r=arguments[e];if(null!=r&&Ee(r[t]))return r[t].apply(r,Array.prototype.slice.call(arguments,0,e));throw new TypeError(gt(r)+' does not have a method named "'+t+'"')}))})),yn=(0,i.Z)((function(e,t){return null!=t&&t.constructor===e||t instanceof e})),Sn=(0,u.Z)((function(e){return null!=e&&(0,et.Z)(e,ur(e))})),vn=hn(1,"join"),En=(0,u.Z)((function(e){return At((function(){return Array.prototype.slice.call(arguments,0)}),e)}));var An=(0,u.Z)((function(e){var t,r=[];for(t in e)r[r.length]=t;return r}));const _n=An,bn=(0,i.Z)((function(e,t){if("function"!=typeof t.lastIndexOf||y(t)){for(var r=t.length-1;r>=0;){if((0,et.Z)(t[r],e))return r;r-=1}return-1}return t.lastIndexOf(e)}));function Tn(e){return"[object Number]"===Object.prototype.toString.call(e)}const In=(0,u.Z)((function(e){return null!=e&&Tn(e.length)?e.length:NaN})),wn=(0,i.Z)((function(e,t){return function(r){return function(n){return x((function(e){return t(e,n)}),r(e(n)))}}})),Cn=(0,u.Z)((function(e){return wn(j(e),kt(e))})),On=(0,u.Z)((function(e){return wn($(e),ye(e))})),Dn=(0,u.Z)((function(e){return wn(V(e),fe(e))})),Pn=(0,i.Z)((function(e,t){return e<t})),Nn=(0,i.Z)((function(e,t){return e<=t})),Rn=m((function(e,t,r){for(var n=0,o=r.length,a=[],i=[t];n<o;)i=e(i[0],r[n]),a[n]=i[1],n+=1;return[i[0],a]})),Un=m((function(e,t,r){for(var n=r.length-1,o=[],a=[t];n>=0;)a=e(a[0],r[n]),o[n]=a[1],n-=1;return[a[0],o]})),Ln=(0,i.Z)((function(e,t){return M((function(r,n){return r[n]=e(t[n],n,t),r}),{},(0,F.Z)(t))})),Mn=(0,i.Z)((function(e,t){return t.match(e)||[]})),kn=(0,i.Z)((function(e,t){return G(e)?!G(t)||t<1?NaN:(e%t+t)%t:NaN})),Bn=m((function(e,t,r){return e(r)>e(t)?r:t})),Fn=W(s,0),xn=(0,u.Z)((function(e){return Fn(e)/e.length})),Gn=(0,u.Z)((function(e){var t=e.length;if(0===t)return NaN;var r=2-t%2,n=(t-r)/2;return xn(Array.prototype.slice.call(e,0).sort((function(e,t){return e<t?-1:e>t?1:0})).slice(n,n+r))})),jn=(0,i.Z)((function(e,t){var r={};return l(t.length,(function(){var n=e.apply(this,arguments);return(0,ge.Z)(n,r)||(r[n]=t.apply(this,arguments)),r[n]}))})),Kn=(0,i.Z)((function(e,t){return an({},e,t)})),$n=(0,u.Z)((function(e){return an.apply(null,[{}].concat(e))})),Vn=m((function(e,t,r){var n,o={};for(n in t)(0,ge.Z)(n,t)&&(o[n]=(0,ge.Z)(n,r)?e(n,t[n],r[n]):t[n]);for(n in r)(0,ge.Z)(n,r)&&!(0,ge.Z)(n,o)&&(o[n]=r[n]);return o})),Hn=m((function e(t,r,n){return Vn((function(r,n,o){return ct(n)&&ct(o)?e(t,n,o):t(r,n,o)}),r,n)})),Wn=(0,i.Z)((function(e,t){return Hn((function(e,t,r){return t}),e,t)})),zn=(0,i.Z)((function(e,t){return Hn((function(e,t,r){return r}),e,t)})),qn=m((function(e,t,r){return Hn((function(t,r,n){return e(r,n)}),t,r)})),Yn=(0,i.Z)((function(e,t){return an({},t,e)})),Qn=(0,i.Z)((function(e,t){return an({},e,t)})),Zn=m((function(e,t,r){return Vn((function(t,r,n){return e(r,n)}),t,r)})),Xn=(0,i.Z)((function(e,t){return t<e?t:e})),Jn=m((function(e,t,r){return e(r)<e(t)?r:t})),eo=(0,i.Z)((function(e,t){return e%t})),to=m((function(e,t,r){var n=r.length,o=r.slice(),a=e<0?n+e:e,i=t<0?n+t:t,s=o.splice(a,1);return a<0||a>=r.length||i<0||i>=r.length?r:[].concat(o.slice(0,i)).concat(s).concat(o.slice(i,r.length))})),ro=(0,i.Z)((function(e,t){return e*t})),no=(0,u.Z)((function(e){return-e})),oo=(0,i.Z)((function(e,t){return T(it(e),t)})),ao=(0,u.Z)((function(e){return f(e<0?1:e+1,(function(){return j(e,arguments)}))})),io=m((function(e,t,r){return e(t(r))}));const so=(0,u.Z)((function(e){return[e]}));var co=(0,i.Z)((function(e,t){for(var r={},n={},o=0,a=e.length;o<a;)n[e[o]]=1,o+=1;for(var i in t)n.hasOwnProperty(i)||(r[i]=t[i]);return r}));const uo=co,lo=(0,u.Z)((function(e){var t,r=!1;return l(e.length,(function(){return r?t:(r=!0,t=e.apply(this,arguments))}))}));function po(e,t){if(null==t||!Ee(t.then))throw new TypeError("`"+e+"` expected a Promise, received "+ft(t,[]))}const fo=(0,i.Z)((function(e,t){return po("otherwise",t),t.then(null,e)}));var go=function(e){return{value:e,map:function(t){return go(t(e))}}},mo=m((function(e,t,r){return e((function(e){return go(t(e))}))(r).value}));const ho=mo,yo=(0,i.Z)((function(e,t){return[e,t]}));function So(e){return(0,i.Z)((function(t,r){return l(Math.max(0,t.length-r.length),(function(){return t.apply(this,e(r,arguments))}))}))}const vo=So(c),Eo=So(Pr(c)),Ao=En([dt,pt]),_o=m((function(e,t,r){return(0,et.Z)($(e,r),t)})),bo=m((function(e,t,r){return wt(e,$(t,r))})),To=m((function(e,t,r){return e($(t,r))})),Io=(0,i.Z)((function(e,t){for(var r={},n=0;n<e.length;)e[n]in t&&(r[e[n]]=t[e[n]]),n+=1;return r})),wo=(0,i.Z)((function(e,t){for(var r={},n=0,o=e.length;n<o;){var a=e[n];r[a]=t[a],n+=1}return r}));var Co=(0,i.Z)((function(e,t){var r={};for(var n in t)e(t[n],n,t)&&(r[n]=t[n]);return r}));const Oo=Co;function Do(){if(0===arguments.length)throw new Error("pipeK requires at least one argument");return He.apply(this,$e(arguments))}const Po=(0,i.Z)((function(e,t){return c([e],t)})),No=W(ro,1),Ro=(0,i.Z)((function(e,t){return f(t.length,(function(){for(var r=[],n=0;n<t.length;)r.push(t[n].call(this,arguments[n])),n+=1;return e.apply(this,r.concat(Array.prototype.slice.call(arguments,t.length)))}))})),Uo=Ro(w,[wo,Ze]),Lo=m((function(e,t,r){return(0,et.Z)(t,r[e])}));var Mo=m((function(e,t,r){return yn(e,r[t])}));const ko=Mo,Bo=m((function(e,t,r){return bo(e,[t],r)})),Fo=m((function(e,t,r){return e(r[t])})),xo=(0,i.Z)((function(e,t){return e.map((function(e){return $([e],t)}))})),Go=(0,i.Z)((function(e,t){if(!Tn(e)||!Tn(t))throw new TypeError("Both arguments to range must be numbers");for(var r=[],n=e;n<t;)r.push(n),n+=1;return r})),jo=m((function(e,t,r){for(var n=r.length-1;n>=0;)t=e(r[n],t),n-=1;return t})),Ko=p(4,[],(function(e,t,r,n){return M((function(r,n){return e(r,n)?t(r,n):E(r)}),r,n)})),$o=(0,u.Z)(E),Vo=(0,i.Z)((function(e,t){var r,n=Number(t),o=0;if(n<0||isNaN(n))throw new RangeError("n must be a non-negative number");for(r=new Array(n);o<n;)r[o]=e(o),o+=1;return r})),Ho=(0,i.Z)((function(e,t){return Vo(q(e),t)})),Wo=m((function(e,t,r){return r.replace(e,t)})),zo=m((function(e,t,r){for(var n=0,o=r.length,a=[t];n<o;)t=e(t,r[n]),a[n+1]=t,n+=1;return a}));var qo=(0,i.Z)((function(e,t){return"function"==typeof t.sequence?t.sequence(e):jo((function(e,t){return ee(x(Po,e),t)}),e([]),t)}));const Yo=qo;var Qo=m((function(e,t,r){return ho(e,q(t),r)}));const Zo=Qo;var Xo=(0,i.Z)((function(e,t){return Array.prototype.slice.call(t,0).sort(e)}));const Jo=Xo,ea=(0,i.Z)((function(e,t){return Array.prototype.slice.call(t,0).sort((function(t,r){var n=e(t),o=e(r);return n<o?-1:n>o?1:0}))})),ta=(0,i.Z)((function(e,t){return Array.prototype.slice.call(t,0).sort((function(t,r){for(var n=0,o=0;0===n&&o<e.length;)n=e[o](t,r),o+=1;return n}))})),ra=hn(1,"split"),na=(0,i.Z)((function(e,t){return[Ge(0,e,t),Ge(e,In(t),t)]})),oa=(0,i.Z)((function(e,t){if(e<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var r=[],n=0;n<t.length;)r.push(Ge(n,n+=e,t));return r})),aa=(0,i.Z)((function(e,t){for(var r=0,n=t.length,o=[];r<n&&!e(t[r]);)o.push(t[r]),r+=1;return[o,Array.prototype.slice.call(t,r)]})),ia=(0,i.Z)((function(e,t){return(0,et.Z)(Ht(e.length,t),e)})),sa=(0,i.Z)((function(e,t){return Number(e)-Number(t)})),ca=(0,i.Z)((function(e,t){return mt(Pt(e,t),Pt(t,e))})),ua=m((function(e,t,r){return mt(Rt(e,t,r),Rt(e,r,t))})),la=(0,i.Z)((function(e,t){for(var r=t.length-1;r>=0&&e(t[r]);)r-=1;return Ge(r+1,1/0,t)}));var da=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=A.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):E(e)},e}();const pa=(0,i.Z)((function(e,t){return new da(e,t)})),fa=(0,i.Z)(v(["takeWhile"],pa,(function(e,t){for(var r=0,n=t.length;r<n&&e(t[r]);)r+=1;return Ge(0,r,t)})));var ga=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=A.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t),this.xf["@@transducer/step"](e,t)},e}();const ma=(0,i.Z)((function(e,t){return new ga(e,t)})),ha=(0,i.Z)(v([],ma,(function(e,t){return e(t),t}))),ya=(0,i.Z)((function(e,t){if(r=e,"[object RegExp]"!==Object.prototype.toString.call(r))throw new TypeError("‘test’ requires a value of type RegExp as its first argument; received "+gt(e));var r;return Ne(e).test(t)})),Sa=(0,i.Z)((function(e,t){return po("andThen",t),t.then(e)})),va=hn(0,"toLowerCase");var Ea=(0,u.Z)((function(e){var t=[];for(var r in e)(0,ge.Z)(r,e)&&(t[t.length]=[r,e[r]]);return t}));const Aa=Ea;var _a=(0,u.Z)((function(e){var t=[];for(var r in e)t[t.length]=[r,e[r]];return t}));const ba=_a,Ta=hn(0,"toUpperCase"),Ia=f(4,(function(e,t,r,n){return M(e("function"==typeof t?P(t):t),r,n)})),wa=(0,u.Z)((function(e){for(var t=0,r=[];t<e.length;){for(var n=e[t],o=0;o<n.length;)void 0===r[o]&&(r[o]=[]),r[o].push(n[o]),o+=1;t+=1}return r}));var Ca=m((function(e,t,r){return"function"==typeof r["fantasy-land/traverse"]?r["fantasy-land/traverse"](t,e):Yo(e,x(t,r))}));const Oa=Ca;var Da="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff";const Pa="function"==typeof String.prototype.trim&&!Da.trim()&&"​".trim()?(0,u.Z)((function(e){return e.trim()})):(0,u.Z)((function(e){var t=new RegExp("^["+Da+"]["+Da+"]*"),r=new RegExp("["+Da+"]["+Da+"]*$");return e.replace(t,"").replace(r,"")})),Na=(0,i.Z)((function(e,t){return l(e.length,(function(){try{return e.apply(this,arguments)}catch(e){return t.apply(this,c([e],arguments))}}))})),Ra=(0,u.Z)((function(e){return function(){return e(Array.prototype.slice.call(arguments,0))}})),Ua=(0,u.Z)((function(e){return Se(1,e)})),La=(0,i.Z)((function(e,t){return f(e,(function(){for(var r,n=1,o=t,a=0;n<=e&&"function"==typeof o;)r=n===e?arguments.length:a+o.length,o=o.apply(this,Array.prototype.slice.call(arguments,a,r)),n+=1,a=r;return o}))}));var Ma=(0,i.Z)((function(e,t){for(var r=e(t),n=[];r&&r.length;)n[n.length]=r[0],r=e(r[1]);return n}));const ka=Ma,Ba=(0,i.Z)(Ve(rn,c)),Fa=(0,i.Z)((function(e,t){for(var r,n=0,o=t.length,a=[];n<o;)r=t[n],(0,Nt.Z)(e,r,a)||(a[a.length]=r),n+=1;return a})),xa=m((function(e,t,r){return Fa(e,c(t,r))})),Ga=m((function(e,t,r){return e(r)?r:t(r)})),ja=Oe(Qe);var Ka=m((function(e,t,r){for(var n=r;!e(n);)n=t(n);return n}));const $a=Ka;var Va=(0,u.Z)((function(e){var t,r=[];for(t in e)r[r.length]=e[t];return r}));const Ha=Va;var Wa=function(e){return{value:e,"fantasy-land/map":function(){return this}}},za=(0,i.Z)((function(e,t){return e(Wa)(t).value}));const qa=za,Ya=m((function(e,t,r){return e(r)?t(r):r}));var Qa=(0,i.Z)((function(e,t){for(var r in e)if((0,ge.Z)(r,e)&&!e[r](t[r]))return!1;return!0}));const Za=Qa,Xa=(0,i.Z)((function(e,t){return Za(x(et.Z,e),t)})),Ja=(0,i.Z)((function(e,t){return pt(Pr(rt)(e),t)})),ei=(0,i.Z)((function(e,t){return Boolean(!e^!t)})),ti=(0,i.Z)((function(e,t){for(var r,n=0,o=e.length,a=t.length,i=[];n<o;){for(r=0;r<a;)i[i.length]=[e[n],t[r]],r+=1;n+=1}return i})),ri=(0,i.Z)((function(e,t){for(var r=[],n=0,o=Math.min(e.length,t.length);n<o;)r[n]=[e[n],t[n]],n+=1;return r}));var ni=(0,i.Z)((function(e,t){for(var r=0,n=Math.min(e.length,t.length),o={};r<n;)o[e[r]]=t[r],r+=1;return o}));const oi=ni,ai=m((function(e,t,r){for(var n=[],o=0,a=Math.min(t.length,r.length);o<a;)n[o]=e(t[o],r[o]),o+=1;return n})),ii=(0,u.Z)((function(e){return f(e.length,(function(){var t=arguments;return function(){return e.apply(this,t)}}))}))},84801:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.createFilter=f,t.createWhitelistFilter=function(e,t,r){return f(e,t,r,"whitelist")},t.createBlacklistFilter=function(e,t,r){return f(e,t,r,"blacklist")},t.persistFilter=m;var o=r(44602),a=p(r(56325)),i=p(r(49345)),s=p(r(72291)),c=p(r(86328)),u=p(r(38582)),l=p(r(56358)),d=p(r(80022));function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"whitelist";return(0,o.createTransform)((function(e,r){return t?m(e,t,n):e}),(function(e,t){return r?m(e,r,n):e}),{whitelist:[e]})}function g(e,t){var r=e.path,n=e.filterFunction,o=void 0===n?function(){return!0}:n,i=(0,a.default)(t,r,t);return i instanceof Array?i.filter(o):(0,c.default)(i,o)}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"whitelist",o={};return"string"==typeof t&&(t=[t]),"whitelist"===r?t.forEach((function(t){if("object"!==(void 0===t?"undefined":n(t))||t instanceof Array){var r=(0,a.default)(e,t);void 0!==r&&(0,i.default)(o,t,r)}else{var s=g(t,e);(0,u.default)(s)||(0,i.default)(o,t.path,s)}})):"blacklist"===r?(o=(0,d.default)(e),t.forEach((function(t){if("object"!==(void 0===t?"undefined":n(t))||t instanceof Array)void 0!==(0,a.default)(e,t)&&(0,s.default)(o,t);else{var r=g(t,e);(0,u.default)(r)?o=r:r instanceof Array?(0,i.default)(o,t.path,(0,a.default)(o,t.path,o).filter((function(e){return!1}))):(0,l.default)(r,(function(e,r){(0,s.default)(o,t.path+"["+r+"]")}))}}))):o=e,o}t.default=f},44602:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DEFAULT_VERSION:()=>l,FLUSH:()=>o,KEY_PREFIX:()=>n,PAUSE:()=>i,PERSIST:()=>s,PURGE:()=>c,REGISTER:()=>u,REHYDRATE:()=>a,createMigrate:()=>G,createPersistoid:()=>m,createTransform:()=>j,getStoredState:()=>y,persistCombineReducers:()=>R,persistReducer:()=>I,persistStore:()=>x,purgeStoredState:()=>v});var n="persist:",o="persist/FLUSH",a="persist/REHYDRATE",i="persist/PAUSE",s="persist/PERSIST",c="persist/PURGE",u="persist/REGISTER",l=-1;function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t,r,n){n.debug;var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(r,!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r);return e&&"object"===d(e)&&Object.keys(e).forEach((function(n){"_persist"!==n&&t[n]===r[n]&&(o[n]=e[n])})),o}function m(e){var t,r=e.blacklist||null,o=e.whitelist||null,a=e.transforms||[],i=e.throttle||0,s="".concat(void 0!==e.keyPrefix?e.keyPrefix:n).concat(e.key),c=e.storage;t=!1===e.serialize?function(e){return e}:"function"==typeof e.serialize?e.serialize:h;var u=e.writeFailHandler||null,l={},d={},p=[],f=null,g=null;function m(){if(0===p.length)return f&&clearInterval(f),void(f=null);var e=p.shift(),r=a.reduce((function(t,r){return r.in(t,e,l)}),l[e]);if(void 0!==r)try{d[e]=t(r)}catch(e){console.error("redux-persist/createPersistoid: error serializing state",e)}else delete d[e];0===p.length&&(Object.keys(d).forEach((function(e){void 0===l[e]&&delete d[e]})),g=c.setItem(s,t(d)).catch(S))}function y(e){return!(o&&-1===o.indexOf(e)&&"_persist"!==e||r&&-1!==r.indexOf(e))}function S(e){u&&u(e)}return{update:function(e){Object.keys(e).forEach((function(t){y(t)&&l[t]!==e[t]&&-1===p.indexOf(t)&&p.push(t)})),Object.keys(l).forEach((function(t){void 0===e[t]&&y(t)&&-1===p.indexOf(t)&&void 0!==l[t]&&p.push(t)})),null===f&&(f=setInterval(m,i)),l=e},flush:function(){for(;0!==p.length;)m();return g||Promise.resolve()}}}function h(e){return JSON.stringify(e)}function y(e){var t,r=e.transforms||[],o="".concat(void 0!==e.keyPrefix?e.keyPrefix:n).concat(e.key),a=e.storage;return e.debug,t=!1===e.deserialize?function(e){return e}:"function"==typeof e.deserialize?e.deserialize:S,a.getItem(o).then((function(e){if(e)try{var n={},o=t(e);return Object.keys(o).forEach((function(e){n[e]=r.reduceRight((function(t,r){return r.out(t,e,o)}),t(o[e]))})),n}catch(e){throw e}}))}function S(e){return JSON.parse(e)}function v(e){var t=e.storage,r="".concat(void 0!==e.keyPrefix?e.keyPrefix:n).concat(e.key);return t.removeItem(r,E)}function E(e){}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(r,!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=5e3;function I(e,t){var r=void 0!==e.version?e.version:l,n=(e.debug,void 0===e.stateReconciler?g:e.stateReconciler),u=e.getStoredState||y,d=void 0!==e.timeout?e.timeout:T,p=null,f=!1,h=!0,S=function(e){return e._persist.rehydrated&&p&&!h&&p.update(e),e};return function(l,g){var y=l||{},E=y._persist,A=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(y,["_persist"]);if(g.type===s){var b=!1,T=function(t,r){b||(g.rehydrate(e.key,t,r),b=!0)};if(d&&setTimeout((function(){!b&&T(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))}),d),h=!1,p||(p=m(e)),E)return _({},t(A,g),{_persist:E});if("function"!=typeof g.rehydrate||"function"!=typeof g.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return g.register(e.key),u(e).then((function(t){(e.migrate||function(e,t){return Promise.resolve(e)})(t,r).then((function(e){T(e)}),(function(e){T(void 0,e)}))}),(function(e){T(void 0,e)})),_({},t(A,g),{_persist:{version:r,rehydrated:!1}})}if(g.type===c)return f=!0,g.result(v(e)),_({},t(A,g),{_persist:E});if(g.type===o)return g.result(p&&p.flush()),_({},t(A,g),{_persist:E});if(g.type===i)h=!0;else if(g.type===a){if(f)return _({},A,{_persist:_({},E,{rehydrated:!0})});if(g.key===e.key){var I=t(A,g),w=g.payload,C=_({},!1!==n&&void 0!==w?n(w,l,I,e):I,{_persist:_({},E,{rehydrated:!0})});return S(C)}}if(!E)return t(l,g);var O=t(A,g);return O===A?l:S(_({},O,{_persist:E}))}}var w=r(98160);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(r,!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e,t,r,n){n.debug;var o=D({},r);return e&&"object"===C(e)&&Object.keys(e).forEach((function(n){var a;"_persist"!==n&&t[n]===r[n]&&(null===(a=r[n])||Array.isArray(a)||"object"!==C(a)?o[n]=e[n]:o[n]=D({},o[n],{},e[n]))})),o}function R(e,t){return e.stateReconciler=void 0===e.stateReconciler?N:e.stateReconciler,I(e,(0,w.combineReducers)(t))}function U(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(r,!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B={registry:[],bootstrapped:!1},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return M({},e,{registry:[].concat(U(e.registry),[t.key])});case a:var r=e.registry.indexOf(t.key),n=U(e.registry);return n.splice(r,1),M({},e,{registry:n,bootstrapped:0===n.length});default:return e}};function x(e,t,r){var n=r||!1,l=(0,w.createStore)(F,B,t&&t.enhancer?t.enhancer:void 0),d=function(e){l.dispatch({type:u,key:e})},p=function(t,r,o){var i={type:a,payload:r,err:o,key:t};e.dispatch(i),l.dispatch(i),n&&f.getState().bootstrapped&&(n(),n=!1)},f=M({},l,{purge:function(){var t=[];return e.dispatch({type:c,result:function(e){t.push(e)}}),Promise.all(t)},flush:function(){var t=[];return e.dispatch({type:o,result:function(e){t.push(e)}}),Promise.all(t)},pause:function(){e.dispatch({type:i})},persist:function(){e.dispatch({type:s,register:d,rehydrate:p})}});return t&&t.manualPersist||f.persist(),f}function G(e,t){return(t||{}).debug,function(t,r){if(!t)return Promise.resolve(void 0);var n=t._persist&&void 0!==t._persist.version?t._persist.version:l;if(n===r)return Promise.resolve(t);if(n>r)return Promise.resolve(t);var o=Object.keys(e).map((function(e){return parseInt(e)})).filter((function(e){return r>=e&&e>n})).sort((function(e,t){return e-t}));try{var a=o.reduce((function(t,r){return e[r](t)}),t);return Promise.resolve(a)}catch(e){return Promise.reject(e)}}}function j(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.whitelist||null,o=r.blacklist||null;function a(e){return!(!n||-1!==n.indexOf(e))||!(!o||-1===o.indexOf(e))}return{in:function(t,r,n){return!a(r)&&e?e(t,r,n):t},out:function(e,r,n){return!a(r)&&t?t(e,r,n):e}}}},98160:(e,t,r)=>{"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}r.r(t),r.d(t,{__DO_NOT_USE__ActionTypes:()=>u,applyMiddleware:()=>m,bindActionCreators:()=>f,combineReducers:()=>d,compose:()=>g,createStore:()=>l});var s="function"==typeof Symbol&&Symbol.observable||"@@observable",c=function(){return Math.random().toString(36).substring(7).split("").join(".")},u={INIT:"@@redux/INIT"+c(),REPLACE:"@@redux/REPLACE"+c(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+c()}};function l(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(i(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(i(1));return r(l)(e,t)}if("function"!=typeof e)throw new Error(i(2));var o=e,a=t,c=[],d=c,p=!1;function f(){d===c&&(d=c.slice())}function g(){if(p)throw new Error(i(3));return a}function m(e){if("function"!=typeof e)throw new Error(i(4));if(p)throw new Error(i(5));var t=!0;return f(),d.push(e),function(){if(t){if(p)throw new Error(i(6));t=!1,f();var r=d.indexOf(e);d.splice(r,1),c=null}}}function h(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(i(7));if(void 0===e.type)throw new Error(i(8));if(p)throw new Error(i(9));try{p=!0,a=o(a,e)}finally{p=!1}for(var t=c=d,r=0;r<t.length;r++)(0,t[r])();return e}return h({type:u.INIT}),(n={dispatch:h,subscribe:m,getState:g,replaceReducer:function(e){if("function"!=typeof e)throw new Error(i(10));o=e,h({type:u.REPLACE})}})[s]=function(){var e,t=m;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(i(11));function r(){e.next&&e.next(g())}return r(),{unsubscribe:t(r)}}})[s]=function(){return this},e},n}function d(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];"function"==typeof e[o]&&(r[o]=e[o])}var a,s=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:u.INIT}))throw new Error(i(12));if(void 0===r(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw new Error(i(13))}))}(r)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var n=!1,o={},c=0;c<s.length;c++){var u=s[c],l=r[u],d=e[u],p=l(d,t);if(void 0===p)throw t&&t.type,new Error(i(14));o[u]=p,n=n||p!==d}return(n=n||s.length!==Object.keys(e).length)?o:e}}function p(e,t){return function(){return t(e.apply(this,arguments))}}function f(e,t){if("function"==typeof e)return p(e,t);if("object"!=typeof e||null===e)throw new Error(i(16));var r={};for(var n in e){var o=e[n];"function"==typeof o&&(r[n]=p(o,t))}return r}function g(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function m(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(i(15))},o={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},s=t.map((function(e){return e(o)}));return n=g.apply(void 0,s)(r.dispatch),a(a({},r),{},{dispatch:n})}}}},32034:(e,t,r)=>{"use strict";function n(e,t){return e===t}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,r=null,o=null;return function(){return function(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}(t,r,arguments)||(o=e.apply(null,arguments)),r=arguments,o}}function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=0,i=n.pop(),s=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}(n),c=e.apply(void 0,[function(){return a++,i.apply(null,arguments)}].concat(r)),u=e((function(){for(var e=[],t=s.length,r=0;r<t;r++)e.push(s[r].apply(null,arguments));return c.apply(null,e)}));return u.resultFunc=i,u.dependencies=s,u.recomputations=function(){return a},u.resetRecomputations=function(){return a=0},u}}r.r(t),r.d(t,{createSelector:()=>i,createSelectorCreator:()=>a,createStructuredSelector:()=>s,defaultMemoize:()=>o});var i=a(o);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var r=Object.keys(e);return t(r.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t,n){return e[r[n]]=t,e}),{})}))}},61465:(e,t,r)=>{var n=r(15313).Buffer;!function(e){e.parser=function(e,t){return new a(e,t)},e.SAXParser=a,e.SAXStream=s,e.createStream=function(e,t){return new s(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,o=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function a(t,r){if(!(this instanceof a))return new a(t,r);var n=this;!function(e){for(var t=0,r=o.length;t<r;t++)e[o[t]]=""}(n),n.q=n.c="",n.bufferCheckPosition=e.MAX_BUFFER_LENGTH,n.opt=r||{},n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags,n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase",n.tags=[],n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.strict=!!t,n.noscript=!(!t&&!n.opt.noscript),n.state=I.BEGIN,n.strictEntities=n.opt.strictEntities,n.ENTITIES=n.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),n.attribList=[],n.opt.xmlns&&(n.ns=Object.create(p)),n.trackPosition=!1!==n.opt.position,n.trackPosition&&(n.position=n.line=n.column=0),C(n,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}),a.prototype={end:function(){R(this)},write:function(t){var r=this;if(this.error)throw this.error;if(r.closed)return N(r,"Cannot write after close. Assign an onready handler.");if(null===t)return R(r);"object"==typeof t&&(t=t.toString());for(var n=0,a="";a=j(t,n++),r.c=a,a;)switch(r.trackPosition&&(r.position++,"\n"===a?(r.line++,r.column=0):r.column++),r.state){case I.BEGIN:if(r.state=I.BEGIN_WHITESPACE,"\ufeff"===a)continue;G(r,a);continue;case I.BEGIN_WHITESPACE:G(r,a);continue;case I.TEXT:if(r.sawRoot&&!r.closedRoot){for(var i=n-1;a&&"<"!==a&&"&"!==a;)(a=j(t,n++))&&r.trackPosition&&(r.position++,"\n"===a?(r.line++,r.column=0):r.column++);r.textNode+=t.substring(i,n-1)}"<"!==a||r.sawRoot&&r.closedRoot&&!r.strict?(y(a)||r.sawRoot&&!r.closedRoot||U(r,"Text data outside of root node."),"&"===a?r.state=I.TEXT_ENTITY:r.textNode+=a):(r.state=I.OPEN_WAKA,r.startTagPosition=r.position);continue;case I.SCRIPT:"<"===a?r.state=I.SCRIPT_ENDING:r.script+=a;continue;case I.SCRIPT_ENDING:"/"===a?r.state=I.CLOSE_TAG:(r.script+="<"+a,r.state=I.SCRIPT);continue;case I.OPEN_WAKA:if("!"===a)r.state=I.SGML_DECL,r.sgmlDecl="";else if(y(a));else if(E(f,a))r.state=I.OPEN_TAG,r.tagName=a;else if("/"===a)r.state=I.CLOSE_TAG,r.tagName="";else if("?"===a)r.state=I.PROC_INST,r.procInstName=r.procInstBody="";else{if(U(r,"Unencoded <"),r.startTagPosition+1<r.position){var s=r.position-r.startTagPosition;a=new Array(s).join(" ")+a}r.textNode+="<"+a,r.state=I.TEXT}continue;case I.SGML_DECL:(r.sgmlDecl+a).toUpperCase()===c?(O(r,"onopencdata"),r.state=I.CDATA,r.sgmlDecl="",r.cdata=""):r.sgmlDecl+a==="--"?(r.state=I.COMMENT,r.comment="",r.sgmlDecl=""):(r.sgmlDecl+a).toUpperCase()===u?(r.state=I.DOCTYPE,(r.doctype||r.sawRoot)&&U(r,"Inappropriately located doctype declaration"),r.doctype="",r.sgmlDecl=""):">"===a?(O(r,"onsgmldeclaration",r.sgmlDecl),r.sgmlDecl="",r.state=I.TEXT):S(a)?(r.state=I.SGML_DECL_QUOTED,r.sgmlDecl+=a):r.sgmlDecl+=a;continue;case I.SGML_DECL_QUOTED:a===r.q&&(r.state=I.SGML_DECL,r.q=""),r.sgmlDecl+=a;continue;case I.DOCTYPE:">"===a?(r.state=I.TEXT,O(r,"ondoctype",r.doctype),r.doctype=!0):(r.doctype+=a,"["===a?r.state=I.DOCTYPE_DTD:S(a)&&(r.state=I.DOCTYPE_QUOTED,r.q=a));continue;case I.DOCTYPE_QUOTED:r.doctype+=a,a===r.q&&(r.q="",r.state=I.DOCTYPE);continue;case I.DOCTYPE_DTD:r.doctype+=a,"]"===a?r.state=I.DOCTYPE:S(a)&&(r.state=I.DOCTYPE_DTD_QUOTED,r.q=a);continue;case I.DOCTYPE_DTD_QUOTED:r.doctype+=a,a===r.q&&(r.state=I.DOCTYPE_DTD,r.q="");continue;case I.COMMENT:"-"===a?r.state=I.COMMENT_ENDING:r.comment+=a;continue;case I.COMMENT_ENDING:"-"===a?(r.state=I.COMMENT_ENDED,r.comment=P(r.opt,r.comment),r.comment&&O(r,"oncomment",r.comment),r.comment=""):(r.comment+="-"+a,r.state=I.COMMENT);continue;case I.COMMENT_ENDED:">"!==a?(U(r,"Malformed comment"),r.comment+="--"+a,r.state=I.COMMENT):r.state=I.TEXT;continue;case I.CDATA:"]"===a?r.state=I.CDATA_ENDING:r.cdata+=a;continue;case I.CDATA_ENDING:"]"===a?r.state=I.CDATA_ENDING_2:(r.cdata+="]"+a,r.state=I.CDATA);continue;case I.CDATA_ENDING_2:">"===a?(r.cdata&&O(r,"oncdata",r.cdata),O(r,"onclosecdata"),r.cdata="",r.state=I.TEXT):"]"===a?r.cdata+="]":(r.cdata+="]]"+a,r.state=I.CDATA);continue;case I.PROC_INST:"?"===a?r.state=I.PROC_INST_ENDING:y(a)?r.state=I.PROC_INST_BODY:r.procInstName+=a;continue;case I.PROC_INST_BODY:if(!r.procInstBody&&y(a))continue;"?"===a?r.state=I.PROC_INST_ENDING:r.procInstBody+=a;continue;case I.PROC_INST_ENDING:">"===a?(O(r,"onprocessinginstruction",{name:r.procInstName,body:r.procInstBody}),r.procInstName=r.procInstBody="",r.state=I.TEXT):(r.procInstBody+="?"+a,r.state=I.PROC_INST_BODY);continue;case I.OPEN_TAG:E(g,a)?r.tagName+=a:(L(r),">"===a?B(r):"/"===a?r.state=I.OPEN_TAG_SLASH:(y(a)||U(r,"Invalid character in tag name"),r.state=I.ATTRIB));continue;case I.OPEN_TAG_SLASH:">"===a?(B(r,!0),F(r)):(U(r,"Forward-slash in opening tag not followed by >"),r.state=I.ATTRIB);continue;case I.ATTRIB:if(y(a))continue;">"===a?B(r):"/"===a?r.state=I.OPEN_TAG_SLASH:E(f,a)?(r.attribName=a,r.attribValue="",r.state=I.ATTRIB_NAME):U(r,"Invalid attribute name");continue;case I.ATTRIB_NAME:"="===a?r.state=I.ATTRIB_VALUE:">"===a?(U(r,"Attribute without value"),r.attribValue=r.attribName,k(r),B(r)):y(a)?r.state=I.ATTRIB_NAME_SAW_WHITE:E(g,a)?r.attribName+=a:U(r,"Invalid attribute name");continue;case I.ATTRIB_NAME_SAW_WHITE:if("="===a)r.state=I.ATTRIB_VALUE;else{if(y(a))continue;U(r,"Attribute without value"),r.tag.attributes[r.attribName]="",r.attribValue="",O(r,"onattribute",{name:r.attribName,value:""}),r.attribName="",">"===a?B(r):E(f,a)?(r.attribName=a,r.state=I.ATTRIB_NAME):(U(r,"Invalid attribute name"),r.state=I.ATTRIB)}continue;case I.ATTRIB_VALUE:if(y(a))continue;S(a)?(r.q=a,r.state=I.ATTRIB_VALUE_QUOTED):(U(r,"Unquoted attribute value"),r.state=I.ATTRIB_VALUE_UNQUOTED,r.attribValue=a);continue;case I.ATTRIB_VALUE_QUOTED:if(a!==r.q){"&"===a?r.state=I.ATTRIB_VALUE_ENTITY_Q:r.attribValue+=a;continue}k(r),r.q="",r.state=I.ATTRIB_VALUE_CLOSED;continue;case I.ATTRIB_VALUE_CLOSED:y(a)?r.state=I.ATTRIB:">"===a?B(r):"/"===a?r.state=I.OPEN_TAG_SLASH:E(f,a)?(U(r,"No whitespace between attributes"),r.attribName=a,r.attribValue="",r.state=I.ATTRIB_NAME):U(r,"Invalid attribute name");continue;case I.ATTRIB_VALUE_UNQUOTED:if(!v(a)){"&"===a?r.state=I.ATTRIB_VALUE_ENTITY_U:r.attribValue+=a;continue}k(r),">"===a?B(r):r.state=I.ATTRIB;continue;case I.CLOSE_TAG:if(r.tagName)">"===a?F(r):E(g,a)?r.tagName+=a:r.script?(r.script+="</"+r.tagName,r.tagName="",r.state=I.SCRIPT):(y(a)||U(r,"Invalid tagname in closing tag"),r.state=I.CLOSE_TAG_SAW_WHITE);else{if(y(a))continue;A(f,a)?r.script?(r.script+="</"+a,r.state=I.SCRIPT):U(r,"Invalid tagname in closing tag."):r.tagName=a}continue;case I.CLOSE_TAG_SAW_WHITE:if(y(a))continue;">"===a?F(r):U(r,"Invalid characters in closing tag");continue;case I.TEXT_ENTITY:case I.ATTRIB_VALUE_ENTITY_Q:case I.ATTRIB_VALUE_ENTITY_U:var l,d;switch(r.state){case I.TEXT_ENTITY:l=I.TEXT,d="textNode";break;case I.ATTRIB_VALUE_ENTITY_Q:l=I.ATTRIB_VALUE_QUOTED,d="attribValue";break;case I.ATTRIB_VALUE_ENTITY_U:l=I.ATTRIB_VALUE_UNQUOTED,d="attribValue"}";"===a?(r[d]+=x(r),r.entity="",r.state=l):E(r.entity.length?h:m,a)?r.entity+=a:(U(r,"Invalid character in entity name"),r[d]+="&"+r.entity+a,r.entity="",r.state=l);continue;default:throw new Error(r,"Unknown state: "+r.state)}return r.position>=r.bufferCheckPosition&&function(t){for(var r=Math.max(e.MAX_BUFFER_LENGTH,10),n=0,a=0,i=o.length;a<i;a++){var s=t[o[a]].length;if(s>r)switch(o[a]){case"textNode":D(t);break;case"cdata":O(t,"oncdata",t.cdata),t.cdata="";break;case"script":O(t,"onscript",t.script),t.script="";break;default:N(t,"Max buffer length exceeded: "+o[a])}n=Math.max(n,s)}var c=e.MAX_BUFFER_LENGTH-n;t.bufferCheckPosition=c+t.position}(r),r},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;D(e=this),""!==e.cdata&&(O(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(O(e,"onscript",e.script),e.script="")}};try{t=r(96704).Stream}catch(e){t=function(){}}var i=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function s(e,r){if(!(this instanceof s))return new s(e,r);t.apply(this),this._parser=new a(e,r),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,i.forEach((function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})}))}s.prototype=Object.create(t.prototype,{constructor:{value:s}}),s.prototype.write=function(e){if("function"==typeof n&&"function"==typeof n.isBuffer&&n.isBuffer(e)){if(!this._decoder){var t=r(36835).s;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},s.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},s.prototype.on=function(e,r){var n=this;return n._parser["on"+e]||-1===i.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),t.prototype.on.call(n,e,r)};var c="[CDATA[",u="DOCTYPE",l="http://www.w3.org/XML/1998/namespace",d="http://www.w3.org/2000/xmlns/",p={xml:l,xmlns:d},f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,h=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function y(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function S(e){return'"'===e||"'"===e}function v(e){return">"===e||y(e)}function E(e,t){return e.test(t)}function A(e,t){return!E(e,t)}var _,b,T,I=0;for(var w in e.STATE={BEGIN:I++,BEGIN_WHITESPACE:I++,TEXT:I++,TEXT_ENTITY:I++,OPEN_WAKA:I++,SGML_DECL:I++,SGML_DECL_QUOTED:I++,DOCTYPE:I++,DOCTYPE_QUOTED:I++,DOCTYPE_DTD:I++,DOCTYPE_DTD_QUOTED:I++,COMMENT_STARTING:I++,COMMENT:I++,COMMENT_ENDING:I++,COMMENT_ENDED:I++,CDATA:I++,CDATA_ENDING:I++,CDATA_ENDING_2:I++,PROC_INST:I++,PROC_INST_BODY:I++,PROC_INST_ENDING:I++,OPEN_TAG:I++,OPEN_TAG_SLASH:I++,ATTRIB:I++,ATTRIB_NAME:I++,ATTRIB_NAME_SAW_WHITE:I++,ATTRIB_VALUE:I++,ATTRIB_VALUE_QUOTED:I++,ATTRIB_VALUE_CLOSED:I++,ATTRIB_VALUE_UNQUOTED:I++,ATTRIB_VALUE_ENTITY_Q:I++,ATTRIB_VALUE_ENTITY_U:I++,CLOSE_TAG:I++,CLOSE_TAG_SAW_WHITE:I++,SCRIPT:I++,SCRIPT_ENDING:I++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var r=e.ENTITIES[t],n="number"==typeof r?String.fromCharCode(r):r;e.ENTITIES[t]=n})),e.STATE)e.STATE[e.STATE[w]]=w;function C(e,t,r){e[t]&&e[t](r)}function O(e,t,r){e.textNode&&D(e),C(e,t,r)}function D(e){e.textNode=P(e.opt,e.textNode),e.textNode&&C(e,"ontext",e.textNode),e.textNode=""}function P(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function N(e,t){return D(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,C(e,"onerror",t),e}function R(e){return e.sawRoot&&!e.closedRoot&&U(e,"Unclosed root tag"),e.state!==I.BEGIN&&e.state!==I.BEGIN_WHITESPACE&&e.state!==I.TEXT&&N(e,"Unexpected end"),D(e),e.c="",e.closed=!0,C(e,"onend"),a.call(e,e.strict,e.opt),e}function U(e,t){if("object"!=typeof e||!(e instanceof a))throw new Error("bad call to strictFail");e.strict&&N(e,t)}function L(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,r=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(r.ns=t.ns),e.attribList.length=0,O(e,"onopentagstart",r)}function M(e,t){var r=e.indexOf(":")<0?["",e]:e.split(":"),n=r[0],o=r[1];return t&&"xmlns"===e&&(n="xmlns",o=""),{prefix:n,local:o}}function k(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=M(e.attribName,!0),r=t.prefix,n=t.local;if("xmlns"===r)if("xml"===n&&e.attribValue!==l)U(e,"xml: prefix must be bound to "+l+"\nActual: "+e.attribValue);else if("xmlns"===n&&e.attribValue!==d)U(e,"xmlns: prefix must be bound to "+d+"\nActual: "+e.attribValue);else{var o=e.tag,a=e.tags[e.tags.length-1]||e;o.ns===a.ns&&(o.ns=Object.create(a.ns)),o.ns[n]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,O(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function B(e,t){if(e.opt.xmlns){var r=e.tag,n=M(e.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(U(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),r.uri=n.prefix);var o=e.tags[e.tags.length-1]||e;r.ns&&o.ns!==r.ns&&Object.keys(r.ns).forEach((function(t){O(e,"onopennamespace",{prefix:t,uri:r.ns[t]})}));for(var a=0,i=e.attribList.length;a<i;a++){var s=e.attribList[a],c=s[0],u=s[1],l=M(c,!0),d=l.prefix,p=l.local,f=""===d?"":r.ns[d]||"",g={name:c,value:u,prefix:d,local:p,uri:f};d&&"xmlns"!==d&&!f&&(U(e,"Unbound namespace prefix: "+JSON.stringify(d)),g.uri=d),e.tag.attributes[c]=g,O(e,"onattribute",g)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),O(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=I.TEXT:e.state=I.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function F(e){if(!e.tagName)return U(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=I.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=I.SCRIPT);O(e,"onscript",e.script),e.script=""}var t=e.tags.length,r=e.tagName;e.strict||(r=r[e.looseCase]());for(var n=r;t--&&e.tags[t].name!==n;)U(e,"Unexpected close tag");if(t<0)return U(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=I.TEXT);e.tagName=r;for(var o=e.tags.length;o-- >t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,O(e,"onclosetag",e.tagName);var i={};for(var s in a.ns)i[s]=a.ns[s];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==c.ns&&Object.keys(a.ns).forEach((function(t){var r=a.ns[t];O(e,"onclosenamespace",{prefix:t,uri:r})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=I.TEXT}function x(e){var t,r=e.entity,n=r.toLowerCase(),o="";return e.ENTITIES[r]?e.ENTITIES[r]:e.ENTITIES[n]?e.ENTITIES[n]:("#"===(r=n).charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),o=(t=parseInt(r,16)).toString(16)):(r=r.slice(1),o=(t=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),isNaN(t)||o.toLowerCase()!==r?(U(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function G(e,t){"<"===t?(e.state=I.OPEN_WAKA,e.startTagPosition=e.position):y(t)||(U(e,"Non-whitespace before first tag."),e.textNode=t,e.state=I.TEXT)}function j(e,t){var r="";return t<e.length&&(r=e.charAt(t)),r}I=e.STATE,String.fromCodePoint||(_=String.fromCharCode,b=Math.floor,T=function(){var e,t,r=[],n=-1,o=arguments.length;if(!o)return"";for(var a="";++n<o;){var i=Number(arguments[n]);if(!isFinite(i)||i<0||i>1114111||b(i)!==i)throw RangeError("Invalid code point: "+i);i<=65535?r.push(i):(e=55296+((i-=65536)>>10),t=i%1024+56320,r.push(e,t)),(n+1===o||r.length>16384)&&(a+=_.apply(null,r),r.length=0)}return a},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:T,configurable:!0,writable:!0}):String.fromCodePoint=T)}(t)},79112:e=>{"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},74155:(e,t,r)=>{var n=r(22715);t.encode=n.encode,t.decode=n.decode},22715:(e,t,r)=>{"use strict";var n=r(15313).Buffer,o=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255];t.encode=function(e){n.isBuffer(e)||(e=new n(e));for(var t,r,o=0,a=0,i=0,s=0,c=new n(8*(t=e,r=Math.floor(t.length/5),t.length%5==0?r:r+1));o<e.length;){var u=e[o];i>3?(s=(s=u&255>>i)<<(i=(i+5)%8)|(o+1<e.length?e[o+1]:0)>>8-i,o++):(s=u>>8-(i+5)&31,0==(i=(i+5)%8)&&o++),c[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".charCodeAt(s),a++}for(o=a;o<c.length;o++)c[o]=61;return c},t.decode=function(e){var t,r=0,a=0,i=0;n.isBuffer(e)||(e=new n(e));for(var s=new n(Math.ceil(5*e.length/8)),c=0;c<e.length&&61!==e[c];c++){var u=e[c]-48;if(!(u<o.length))throw new Error("Invalid input - it is not base32 encoded string");a=o[u],r<=3?0==(r=(r+5)%8)?(t|=a,s[i]=t,i++,t=0):t|=255&a<<8-r:(t|=255&a>>>(r=(r+5)%8),s[i]=t,i++,t=255&a<<8-r)}return s.slice(0,i)}},52056:function(e,t,r){var n;!function(o,a){"use strict";var i="function",s="undefined",c="object",u="string",l="model",d="name",p="type",f="vendor",g="version",m="architecture",h="console",y="mobile",S="tablet",v="smarttv",E="wearable",A="embedded",_={extend:function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},has:function(e,t){return typeof e===u&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===u?e.replace(/[^\d\.]/g,"").split(".")[0]:a},trim:function(e,t){return e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),typeof t===s?e:e.substring(0,255)}},b={rgx:function(e,t){for(var r,n,o,s,u,l,d=0;d<t.length&&!u;){var p=t[d],f=t[d+1];for(r=n=0;r<p.length&&!u;)if(u=p[r++].exec(e))for(o=0;o<f.length;o++)l=u[++n],typeof(s=f[o])===c&&s.length>0?2==s.length?typeof s[1]==i?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3==s.length?typeof s[1]!==i||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):a:this[s[0]]=l?s[1].call(this,l,s[2]):a:4==s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):a):this[s]=l||a;d+=2}},str:function(e,t){for(var r in t)if(typeof t[r]===c&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(_.has(t[r][n],e))return"?"===r?a:r}else if(_.has(t[r],e))return"?"===r?a:r;return e}},T={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},I={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[d,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[d,g],[/opios[\/\s]+([\w\.]+)/i],[g,[d,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[g,[d,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,g],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[g,[d,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[g,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[g,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[d,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[g,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[g,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure Browser"],g],[/focus\/([\w\.]+)/i],[g,[d,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[g,[d,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[g,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[d,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[g,[d,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[g,[d,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[d,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 Browser"],g],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],g],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[d,g],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[d],[/;fbav\/([\w\.]+);/i],[g,[d,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[d,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[d,g],[/\bgsa\/([\w\.]+)\s.*safari\//i],[g,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[g,[d,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[d,"Chrome WebView"],g],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[g,[d,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[d,g],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[g,[d,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[g,d],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[d,[g,b.str,T.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[d,g],[/(navigator|netscape)\/([\w\.-]+)/i],[[d,"Netscape"],g],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[g,[d,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[d,g]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,_.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[m,/ower/,"",_.lowerize]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,_.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[l,[f,"Samsung"],[p,S]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[l,[f,"Samsung"],[p,y]],[/\((ip(?:hone|od)[\s\w]*);/i],[l,[f,"Apple"],[p,y]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[f,"Apple"],[p,S]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[l,[f,"Huawei"],[p,S]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[l,[f,"Huawei"],[p,y]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[l,/_/g," "],[f,"Xiaomi"],[p,y]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[l,/_/g," "],[f,"Xiaomi"],[p,S]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[l,[f,"OPPO"],[p,y]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[l,[f,"Vivo"],[p,y]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[l,[f,"Realme"],[p,y]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[l,[f,"Motorola"],[p,y]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[l,[f,"Motorola"],[p,S]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[l,[f,"LG"],[p,S]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[l,[f,"LG"],[p,y]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[l,[f,"Lenovo"],[p,S]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[l,/_/g," "],[f,"Nokia"],[p,y]],[/droid.+;\s(pixel\sc)[\s)]/i],[l,[f,"Google"],[p,S]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[l,[f,"Google"],[p,y]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[f,"Sony"],[p,y]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[l,"Xperia Tablet"],[f,"Sony"],[p,S]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[l,[f,"OnePlus"],[p,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[l,[f,"Amazon"],[p,S]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[l,"Fire Phone"],[f,"Amazon"],[p,y]],[/\((playbook);[\w\s\),;-]+(rim)/i],[l,f,[p,S]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[l,[f,"BlackBerry"],[p,y]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[l,[f,"ASUS"],[p,S]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[l,[f,"ASUS"],[p,y]],[/(nexus\s9)/i],[l,[f,"HTC"],[p,S]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[f,[l,/_/g," "],[p,y]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[l,[f,"Acer"],[p,S]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[l,[f,"Meizu"],[p,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[f,l,[p,y]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[f,l,[p,S]],[/\s(surface\sduo)\s/i],[l,[f,"Microsoft"],[p,S]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[l,[f,"Fairphone"],[p,y]],[/\s(u304aa)\sbuild/i],[l,[f,"AT&T"],[p,y]],[/sie-(\w*)/i],[l,[f,"Siemens"],[p,y]],[/[;\/]\s?(rct\w+)\sbuild/i],[l,[f,"RCA"],[p,S]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[l,[f,"Dell"],[p,S]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[l,[f,"Verizon"],[p,S]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[l,[f,"Barnes & Noble"],[p,S]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[l,[f,"NuVision"],[p,S]],[/;\s(k88)\sbuild/i],[l,[f,"ZTE"],[p,S]],[/;\s(nx\d{3}j)\sbuild/i],[l,[f,"ZTE"],[p,y]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[l,[f,"Swiss"],[p,y]],[/[;\/]\s?(zur\d{3})\sbuild/i],[l,[f,"Swiss"],[p,S]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[l,[f,"Zeki"],[p,S]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[f,"Dragon Touch"],l,[p,S]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[l,[f,"Insignia"],[p,S]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[l,[f,"NextBook"],[p,S]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[f,"Voice"],l,[p,y]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[f,"LvTel"],l,[p,y]],[/;\s(ph-1)\s/i],[l,[f,"Essential"],[p,y]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[l,[f,"Envizen"],[p,S]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[l,[f,"MachSpeed"],[p,S]],[/[;\/]\s?tu_(1491)\sbuild/i],[l,[f,"Rotor"],[p,S]],[/(shield[\w\s]+)\sbuild/i],[l,[f,"Nvidia"],[p,S]],[/(sprint)\s(\w+)/i],[f,l,[p,y]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[f,"Microsoft"],[p,y]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[f,"Zebra"],[p,S]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[f,"Zebra"],[p,y]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[f,l,[p,h]],[/droid.+;\s(shield)\sbuild/i],[l,[f,"Nvidia"],[p,h]],[/(playstation\s[345portablevi]+)/i],[l,[f,"Sony"],[p,h]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[l,[f,"Microsoft"],[p,h]],[/smart-tv.+(samsung)/i],[f,[p,v]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[f,"Samsung"],[p,v]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[f,"LG"],[p,v]],[/(apple)\s?tv/i],[f,[l,"Apple TV"],[p,v]],[/crkey/i],[[l,"Chromecast"],[f,"Google"],[p,v]],[/droid.+aft([\w])(\sbuild\/|\))/i],[l,[f,"Amazon"],[p,v]],[/\(dtv[\);].+(aquos)/i],[l,[f,"Sharp"],[p,v]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[f,_.trim],[l,_.trim],[p,v]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[p,v]],[/((pebble))app\/[\d\.]+\s/i],[f,l,[p,E]],[/droid.+;\s(glass)\s\d/i],[l,[f,"Google"],[p,E]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[l,[f,"Zebra"],[p,E]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[f,[p,A]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[l,[p,y]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[l,[p,S]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[p,_.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[l,[f,"Generic"]],[/(phone)/i],[[p,y]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[g,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[d,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,d]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[d,g],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[d,[g,b.str,T.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[d,"Windows"],[g,b.str,T.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[d,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[d,"Mac OS"],[g,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[d,g],[/\(bb(10);/i],[g,[d,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[g,[d,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[d,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[g,[d,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[d,"Chromium OS"],g],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[d,g],[/(sunos)\s?([\w\.\d]*)/i],[[d,"Solaris"],g],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[d,g]]},w=function(e,t){if("object"==typeof e&&(t=e,e=a),!(this instanceof w))return new w(e,t).getResult();var r=e||(void 0!==o&&o.navigator&&o.navigator.userAgent?o.navigator.userAgent:""),n=t?_.extend(I,t):I;return this.getBrowser=function(){var e={name:a,version:a};return b.rgx.call(e,r,n.browser),e.major=_.major(e.version),e},this.getCPU=function(){var e={architecture:a};return b.rgx.call(e,r,n.cpu),e},this.getDevice=function(){var e={vendor:a,model:a,type:a};return b.rgx.call(e,r,n.device),e},this.getEngine=function(){var e={name:a,version:a};return b.rgx.call(e,r,n.engine),e},this.getOS=function(){var e={name:a,version:a};return b.rgx.call(e,r,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===u&&e.length>255?_.trim(e,255):e,this},this.setUA(r),this};w.VERSION="0.7.28",w.BROWSER={NAME:d,MAJOR:"major",VERSION:g},w.CPU={ARCHITECTURE:m},w.DEVICE={MODEL:l,VENDOR:f,TYPE:p,CONSOLE:h,MOBILE:y,SMARTTV:v,TABLET:S,WEARABLE:E,EMBEDDED:A},w.ENGINE={NAME:d,VERSION:g},w.OS={NAME:d,VERSION:g},typeof t!==s?(e.exports&&(t=e.exports=w),t.UAParser=w):(n=function(){return w}.call(t,r,t,e))===a||(e.exports=n);var C=void 0!==o&&(o.jQuery||o.Zepto);if(C&&!C.ua){var O=new w;C.ua=O.getResult(),C.ua.get=function(){return O.getUA()},C.ua.set=function(e){O.setUA(e);var t=O.getResult();for(var r in t)C.ua[r]=t[r]}}}("object"==typeof window?window:this)},51121:(e,t,r)=>{"use strict";var n=r(27377),o=r(52239);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=v,t.resolve=function(e,t){return v(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?v(e,!1,!0).resolveObject(t):t},t.format=function(e){return o.isString(e)&&(e=v(e)),e instanceof a?e.format():a.prototype.format.call(e)},t.Url=a;var i=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),d=["%","/","?",";","#"].concat(l),p=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},h={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=r(3048);function v(e,t,r){if(e&&o.isObject(e)&&e instanceof a)return e;var n=new a;return n.parse(e,t,r),n}a.prototype.parse=function(e,t,r){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),s=-1!==a&&a<e.indexOf("#")?"?":"#",u=e.split(s);u[0]=u[0].replace(/\\/g,"/");var v=e=u.join(s);if(v=v.trim(),!r&&1===e.split("#").length){var E=c.exec(v);if(E)return this.path=v,this.href=v,this.pathname=E[1],E[2]?(this.search=E[2],this.query=t?S.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var A=i.exec(v);if(A){var _=(A=A[0]).toLowerCase();this.protocol=_,v=v.substr(A.length)}if(r||A||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var b="//"===v.substr(0,2);!b||A&&h[A]||(v=v.substr(2),this.slashes=!0)}if(!h[A]&&(b||A&&!y[A])){for(var T,I,w=-1,C=0;C<p.length;C++)-1!==(O=v.indexOf(p[C]))&&(-1===w||O<w)&&(w=O);for(-1!==(I=-1===w?v.lastIndexOf("@"):v.lastIndexOf("@",w))&&(T=v.slice(0,I),v=v.slice(I+1),this.auth=decodeURIComponent(T)),w=-1,C=0;C<d.length;C++){var O;-1!==(O=v.indexOf(d[C]))&&(-1===w||O<w)&&(w=O)}-1===w&&(w=v.length),this.host=v.slice(0,w),v=v.slice(w),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var P=this.hostname.split(/\./),N=(C=0,P.length);C<N;C++){var R=P[C];if(R&&!R.match(f)){for(var U="",L=0,M=R.length;L<M;L++)R.charCodeAt(L)>127?U+="x":U+=R[L];if(!U.match(f)){var k=P.slice(0,C),B=P.slice(C+1),F=R.match(g);F&&(k.push(F[1]),B.unshift(F[2])),B.length&&(v="/"+B.join(".")+v),this.hostname=k.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=n.toASCII(this.hostname));var x=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+x,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!m[_])for(C=0,N=l.length;C<N;C++){var j=l[C];if(-1!==v.indexOf(j)){var K=encodeURIComponent(j);K===j&&(K=escape(j)),v=v.split(j).join(K)}}var $=v.indexOf("#");-1!==$&&(this.hash=v.substr($),v=v.slice(0,$));var V=v.indexOf("?");if(-1!==V?(this.search=v.substr(V),this.query=v.substr(V+1),t&&(this.query=S.parse(this.query)),v=v.slice(0,V)):t&&(this.search="",this.query={}),v&&(this.pathname=v),y[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){x=this.pathname||"";var H=this.search||"";this.path=x+H}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",a=!1,i="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(i=S.stringify(this.query));var s=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==a?(a="//"+(a||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):a||(a=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),t+a+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+n},a.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(o.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var r=new a,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var l=c[u];"protocol"!==l&&(r[l]=e[l])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!y[e.protocol]){for(var d=Object.keys(e),p=0;p<d.length;p++){var f=d[p];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||h[e.protocol])r.pathname=e.pathname;else{for(var g=(e.pathname||"").split("/");g.length&&!(e.host=g.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==g[0]&&g.unshift(""),g.length<2&&g.unshift(""),r.pathname=g.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||"",S=r.search||"";r.path=m+S}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),E=e.host||e.pathname&&"/"===e.pathname.charAt(0),A=E||v||r.host&&e.pathname,_=A,b=r.pathname&&r.pathname.split("/")||[],T=(g=e.pathname&&e.pathname.split("/")||[],r.protocol&&!y[r.protocol]);if(T&&(r.hostname="",r.port=null,r.host&&(""===b[0]?b[0]=r.host:b.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===g[0]?g[0]=e.host:g.unshift(e.host)),e.host=null),A=A&&(""===g[0]||""===b[0])),E)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,b=g;else if(g.length)b||(b=[]),b.pop(),b=b.concat(g),r.search=e.search,r.query=e.query;else if(!o.isNullOrUndefined(e.search))return T&&(r.hostname=r.host=b.shift(),(D=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=D.shift(),r.host=r.hostname=D.shift())),r.search=e.search,r.query=e.query,o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!b.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var I=b.slice(-1)[0],w=(r.host||e.host||b.length>1)&&("."===I||".."===I)||""===I,C=0,O=b.length;O>=0;O--)"."===(I=b[O])?b.splice(O,1):".."===I?(b.splice(O,1),C++):C&&(b.splice(O,1),C--);if(!A&&!_)for(;C--;C)b.unshift("..");!A||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),w&&"/"!==b.join("/").substr(-1)&&b.push("");var D,P=""===b[0]||b[0]&&"/"===b[0].charAt(0);return T&&(r.hostname=r.host=P?"":b.length?b.shift():"",(D=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=D.shift(),r.host=r.hostname=D.shift())),(A=A||r.host&&b.length)&&!P&&b.unshift(""),b.length?r.pathname=b.join("/"):(r.pathname=null,r.path=null),o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},a.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},52239:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},28354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>C,parse:()=>d,stringify:()=>i.Z,v1:()=>u,v3:()=>_,v4:()=>b.Z,v5:()=>w,validate:()=>l.Z,version:()=>O});var n,o,a=r(16684),i=r(30254),s=0,c=0;const u=function(e,t,r){var u=t&&r||0,l=t||new Array(16),d=(e=e||{}).node||n,p=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==p){var f=e.random||(e.rng||a.Z)();null==d&&(d=n=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=o=16383&(f[6]<<8|f[7]))}var g=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:c+1,h=g-s+(m-c)/1e4;if(h<0&&void 0===e.clockseq&&(p=p+1&16383),(h<0||g>s)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=g,c=m,o=p;var y=(1e4*(268435455&(g+=122192928e5))+m)%4294967296;l[u++]=y>>>24&255,l[u++]=y>>>16&255,l[u++]=y>>>8&255,l[u++]=255&y;var S=g/4294967296*1e4&268435455;l[u++]=S>>>8&255,l[u++]=255&S,l[u++]=S>>>24&15|16,l[u++]=S>>>16&255,l[u++]=p>>>8|128,l[u++]=255&p;for(var v=0;v<6;++v)l[u+v]=d[v];return t||(0,i.Z)(l)};var l=r(68317);const d=function(e){if(!(0,l.Z)(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};var p="6ba7b810-9dad-11d1-80b4-00c04fd430c8",f="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function g(e,t,r){function n(e,n,o,a){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=d(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),(s=r(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,o){a=a||0;for(var c=0;c<16;++c)o[a+c]=s[c];return o}return(0,i.Z)(s)}try{n.name=e}catch(e){}return n.DNS=p,n.URL=f,n}function m(e){return 14+(e+64>>>9<<4)+1}function h(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function y(e,t,r,n,o,a){return h((i=h(h(t,e),h(n,a)))<<(s=o)|i>>>32-s,r);var i,s}function S(e,t,r,n,o,a,i){return y(t&r|~t&n,e,t,o,a,i)}function v(e,t,r,n,o,a,i){return y(t&n|r&~n,e,t,o,a,i)}function E(e,t,r,n,o,a,i){return y(t^r^n,e,t,o,a,i)}function A(e,t,r,n,o,a,i){return y(r^(t|~n),e,t,o,a,i)}const _=g("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n="0123456789abcdef",o=0;o<r;o+=8){var a=e[o>>5]>>>o%32&255,i=parseInt(n.charAt(a>>>4&15)+n.charAt(15&a),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[m(t)-1]=t;for(var r=1732584193,n=-271733879,o=-1732584194,a=271733878,i=0;i<e.length;i+=16){var s=r,c=n,u=o,l=a;r=S(r,n,o,a,e[i],7,-680876936),a=S(a,r,n,o,e[i+1],12,-389564586),o=S(o,a,r,n,e[i+2],17,606105819),n=S(n,o,a,r,e[i+3],22,-1044525330),r=S(r,n,o,a,e[i+4],7,-176418897),a=S(a,r,n,o,e[i+5],12,1200080426),o=S(o,a,r,n,e[i+6],17,-1473231341),n=S(n,o,a,r,e[i+7],22,-45705983),r=S(r,n,o,a,e[i+8],7,1770035416),a=S(a,r,n,o,e[i+9],12,-1958414417),o=S(o,a,r,n,e[i+10],17,-42063),n=S(n,o,a,r,e[i+11],22,-1990404162),r=S(r,n,o,a,e[i+12],7,1804603682),a=S(a,r,n,o,e[i+13],12,-40341101),o=S(o,a,r,n,e[i+14],17,-1502002290),r=v(r,n=S(n,o,a,r,e[i+15],22,1236535329),o,a,e[i+1],5,-165796510),a=v(a,r,n,o,e[i+6],9,-1069501632),o=v(o,a,r,n,e[i+11],14,643717713),n=v(n,o,a,r,e[i],20,-373897302),r=v(r,n,o,a,e[i+5],5,-701558691),a=v(a,r,n,o,e[i+10],9,38016083),o=v(o,a,r,n,e[i+15],14,-660478335),n=v(n,o,a,r,e[i+4],20,-405537848),r=v(r,n,o,a,e[i+9],5,568446438),a=v(a,r,n,o,e[i+14],9,-1019803690),o=v(o,a,r,n,e[i+3],14,-187363961),n=v(n,o,a,r,e[i+8],20,1163531501),r=v(r,n,o,a,e[i+13],5,-1444681467),a=v(a,r,n,o,e[i+2],9,-51403784),o=v(o,a,r,n,e[i+7],14,1735328473),r=E(r,n=v(n,o,a,r,e[i+12],20,-1926607734),o,a,e[i+5],4,-378558),a=E(a,r,n,o,e[i+8],11,-2022574463),o=E(o,a,r,n,e[i+11],16,1839030562),n=E(n,o,a,r,e[i+14],23,-35309556),r=E(r,n,o,a,e[i+1],4,-1530992060),a=E(a,r,n,o,e[i+4],11,1272893353),o=E(o,a,r,n,e[i+7],16,-155497632),n=E(n,o,a,r,e[i+10],23,-1094730640),r=E(r,n,o,a,e[i+13],4,681279174),a=E(a,r,n,o,e[i],11,-358537222),o=E(o,a,r,n,e[i+3],16,-722521979),n=E(n,o,a,r,e[i+6],23,76029189),r=E(r,n,o,a,e[i+9],4,-640364487),a=E(a,r,n,o,e[i+12],11,-421815835),o=E(o,a,r,n,e[i+15],16,530742520),r=A(r,n=E(n,o,a,r,e[i+2],23,-995338651),o,a,e[i],6,-198630844),a=A(a,r,n,o,e[i+7],10,1126891415),o=A(o,a,r,n,e[i+14],15,-1416354905),n=A(n,o,a,r,e[i+5],21,-57434055),r=A(r,n,o,a,e[i+12],6,1700485571),a=A(a,r,n,o,e[i+3],10,-1894986606),o=A(o,a,r,n,e[i+10],15,-1051523),n=A(n,o,a,r,e[i+1],21,-2054922799),r=A(r,n,o,a,e[i+8],6,1873313359),a=A(a,r,n,o,e[i+15],10,-30611744),o=A(o,a,r,n,e[i+6],15,-1560198380),n=A(n,o,a,r,e[i+13],21,1309151649),r=A(r,n,o,a,e[i+4],6,-145523070),a=A(a,r,n,o,e[i+11],10,-1120210379),o=A(o,a,r,n,e[i+2],15,718787259),n=A(n,o,a,r,e[i+9],21,-343485551),r=h(r,s),n=h(n,c),o=h(o,u),a=h(a,l)}return[r,n,o,a]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(m(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}));var b=r(69183);function T(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function I(e,t){return e<<t|e>>>32-t}const w=g("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var o=0;o<n.length;++o)e.push(n.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=e.length/4+2,i=Math.ceil(a/16),s=new Array(i),c=0;c<i;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[64*c+4*l]<<24|e[64*c+4*l+1]<<16|e[64*c+4*l+2]<<8|e[64*c+4*l+3];s[c]=u}s[i-1][14]=8*(e.length-1)/Math.pow(2,32),s[i-1][14]=Math.floor(s[i-1][14]),s[i-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<i;++d){for(var p=new Uint32Array(80),f=0;f<16;++f)p[f]=s[d][f];for(var g=16;g<80;++g)p[g]=I(p[g-3]^p[g-8]^p[g-14]^p[g-16],1);for(var m=r[0],h=r[1],y=r[2],S=r[3],v=r[4],E=0;E<80;++E){var A=Math.floor(E/20),_=I(m,5)+T(A,h,y,S)+v+t[A]+p[E]>>>0;v=S,S=y,y=I(h,30)>>>0,h=m,m=_}r[0]=r[0]+m>>>0,r[1]=r[1]+h>>>0,r[2]=r[2]+y>>>0,r[3]=r[3]+S>>>0,r[4]=r[4]+v>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),C="00000000-0000-0000-0000-000000000000",O=function(e){if(!(0,l.Z)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},88503:function(e){(function(){e.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},64356:function(e){(function(){e.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},67479:function(e){(function(){var t,r,n,o,a,i,s,c={}.hasOwnProperty;t=function(e,...t){var r,n,o,i;if(a(Object.assign))Object.assign.apply(null,arguments);else for(r=0,o=t.length;r<o;r++)if(null!=(i=t[r]))for(n in i)c.call(i,n)&&(e[n]=i[n]);return e},a=function(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)},i=function(e){var t;return!!e&&("function"==(t=typeof e)||"object"===t)},n=function(e){return a(Array.isArray)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},o=function(e){var t;if(n(e))return!e.length;for(t in e)if(c.call(e,t))return!1;return!0},s=function(e){var t,r;return i(e)&&(r=Object.getPrototypeOf(e))&&(t=r.constructor)&&"function"==typeof t&&t instanceof t&&Function.prototype.toString.call(t)===Function.prototype.toString.call(Object)},r=function(e){return a(e.valueOf)?e.valueOf():e},e.exports.assign=t,e.exports.isFunction=a,e.exports.isObject=i,e.exports.isArray=n,e.exports.isEmpty=o,e.exports.isPlainObject=s,e.exports.getValue=r}).call(this)},66149:function(e){(function(){e.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},85460:function(e,t,r){(function(){var t;t=r(64356),r(28352),e.exports=function(){class e{constructor(e,r,n){if(this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==r)throw new Error("Missing attribute name. "+this.debugInfo(r));this.name=this.stringify.name(r),this.value=this.stringify.attValue(n),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}clone(){return Object.create(this)}toString(e){return this.options.writer.attribute(this,this.options.writer.filterOptions(e))}debugInfo(e){return null==(e=e||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"}isEqualNode(e){return e.namespaceURI===this.namespaceURI&&e.prefix===this.prefix&&e.localName===this.localName&&e.value===this.value}}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e}.call(this)}).call(this)},62207:function(e,t,r){(function(){var t,n;t=r(64356),n=r(51502),e.exports=class extends n{constructor(e,r){if(super(e),null==r)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(r)}clone(){return Object.create(this)}toString(e){return this.options.writer.cdata(this,this.options.writer.filterOptions(e))}}}).call(this)},51502:function(e,t,r){(function(){var t;t=r(28352),e.exports=function(){class e extends t{constructor(e){super(e),this.value=""}clone(){return Object.create(this)}substringData(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}appendData(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}insertData(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}deleteData(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}replaceData(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(e){return!!super.isEqualNode(e)&&e.data===this.data}}return Object.defineProperty(e.prototype,"data",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(e.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),e}.call(this)}).call(this)},32023:function(e,t,r){(function(){var t,n;t=r(64356),n=r(51502),e.exports=class extends n{constructor(e,r){if(super(e),null==r)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(r)}clone(){return Object.create(this)}toString(e){return this.options.writer.comment(this,this.options.writer.filterOptions(e))}}}).call(this)},58052:function(e,t,r){(function(){var t,n;t=r(43846),n=r(41601),e.exports=function(){class e{constructor(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}getParameter(e){return this.params.hasOwnProperty(e)?this.params[e]:null}canSetParameter(e,t){return!0}setParameter(e,t){return null!=t?this.params[e]=t:delete this.params[e]}}return Object.defineProperty(e.prototype,"parameterNames",{get:function(){return new n(Object.keys(this.defaultParams))}}),e}.call(this)}).call(this)},43846:function(e){(function(){e.exports=class{constructor(){}handleError(e){throw new Error(e)}}}).call(this)},44163:function(e){(function(){e.exports=class{hasFeature(e,t){return!0}createDocumentType(e,t,r){throw new Error("This DOM method is not implemented.")}createDocument(e,t,r){throw new Error("This DOM method is not implemented.")}createHTMLDocument(e){throw new Error("This DOM method is not implemented.")}getFeature(e,t){throw new Error("This DOM method is not implemented.")}}}).call(this)},41601:function(e){(function(){e.exports=function(){class e{constructor(e){this.arr=e||[]}item(e){return this.arr[e]||null}contains(e){return-1!==this.arr.indexOf(e)}}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e}.call(this)}).call(this)},89318:function(e,t,r){(function(){var t,n;n=r(28352),t=r(64356),e.exports=class extends n{constructor(e,r,n,o,a,i){if(super(e),null==r)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==n)throw new Error("Missing DTD attribute name. "+this.debugInfo(r));if(!o)throw new Error("Missing DTD attribute type. "+this.debugInfo(r));if(!a)throw new Error("Missing DTD attribute default. "+this.debugInfo(r));if(0!==a.indexOf("#")&&(a="#"+a),!a.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(r));if(i&&!a.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(r));this.elementName=this.stringify.name(r),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(n),this.attributeType=this.stringify.dtdAttType(o),i&&(this.defaultValue=this.stringify.dtdAttDefault(i)),this.defaultValueType=a}toString(e){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(e))}}}).call(this)},64677:function(e,t,r){(function(){var t,n;n=r(28352),t=r(64356),e.exports=class extends n{constructor(e,r,n){if(super(e),null==r)throw new Error("Missing DTD element name. "+this.debugInfo());n||(n="(#PCDATA)"),Array.isArray(n)&&(n="("+n.join(",")+")"),this.name=this.stringify.name(r),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(n)}toString(e){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(e))}}}).call(this)},88131:function(e,t,r){(function(){var t,n,o;({isObject:o}=r(67479)),n=r(28352),t=r(64356),e.exports=function(){class e extends n{constructor(e,r,n,a){if(super(e),null==n)throw new Error("Missing DTD entity name. "+this.debugInfo(n));if(null==a)throw new Error("Missing DTD entity value. "+this.debugInfo(n));if(this.pe=!!r,this.name=this.stringify.name(n),this.type=t.EntityDeclaration,o(a)){if(!a.pubID&&!a.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(n));if(a.pubID&&!a.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(n));if(this.internal=!1,null!=a.pubID&&(this.pubID=this.stringify.dtdPubID(a.pubID)),null!=a.sysID&&(this.sysID=this.stringify.dtdSysID(a.sysID)),null!=a.nData&&(this.nData=this.stringify.dtdNData(a.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(n))}else this.value=this.stringify.dtdEntityValue(a),this.internal=!0}toString(e){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(e))}}return Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(e.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(e.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"xmlVersion",{get:function(){return null}}),e}.call(this)}).call(this)},70089:function(e,t,r){(function(){var t,n;n=r(28352),t=r(64356),e.exports=function(){class e extends n{constructor(e,r,n){if(super(e),null==r)throw new Error("Missing DTD notation name. "+this.debugInfo(r));if(!n.pubID&&!n.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(r));this.name=this.stringify.name(r),this.type=t.NotationDeclaration,null!=n.pubID&&(this.pubID=this.stringify.dtdPubID(n.pubID)),null!=n.sysID&&(this.sysID=this.stringify.dtdSysID(n.sysID))}toString(e){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(e))}}return Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),e}.call(this)}).call(this)},65868:function(e,t,r){(function(){var t,n,o;({isObject:o}=r(67479)),n=r(28352),t=r(64356),e.exports=class extends n{constructor(e,r,n,a){super(e),o(r)&&({version:r,encoding:n,standalone:a}=r),r||(r="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(r),null!=n&&(this.encoding=this.stringify.xmlEncoding(n)),null!=a&&(this.standalone=this.stringify.xmlStandalone(a))}toString(e){return this.options.writer.declaration(this,this.options.writer.filterOptions(e))}}}).call(this)},86821:function(e,t,r){(function(){var t,n,o,a,i,s,c,u;({isObject:u}=r(67479)),c=r(28352),t=r(64356),n=r(89318),a=r(88131),o=r(64677),i=r(70089),s=r(60322),e.exports=function(){class e extends c{constructor(e,r,n){var o,a,i,s;if(super(e),this.type=t.DocType,e.children)for(a=0,i=(s=e.children).length;a<i;a++)if((o=s[a]).type===t.Element){this.name=o.name;break}this.documentObject=e,u(r)&&({pubID:r,sysID:n}=r),null==n&&([n,r]=[r,n]),null!=r&&(this.pubID=this.stringify.dtdPubID(r)),null!=n&&(this.sysID=this.stringify.dtdSysID(n))}element(e,t){var r;return r=new o(this,e,t),this.children.push(r),this}attList(e,t,r,o,a){var i;return i=new n(this,e,t,r,o,a),this.children.push(i),this}entity(e,t){var r;return r=new a(this,!1,e,t),this.children.push(r),this}pEntity(e,t){var r;return r=new a(this,!0,e,t),this.children.push(r),this}notation(e,t){var r;return r=new i(this,e,t),this.children.push(r),this}toString(e){return this.options.writer.docType(this,this.options.writer.filterOptions(e))}ele(e,t){return this.element(e,t)}att(e,t,r,n,o){return this.attList(e,t,r,n,o)}ent(e,t){return this.entity(e,t)}pent(e,t){return this.pEntity(e,t)}not(e,t){return this.notation(e,t)}up(){return this.root()||this.documentObject}isEqualNode(e){return!!super.isEqualNode(e)&&e.name===this.name&&e.publicId===this.publicId&&e.systemId===this.systemId}}return Object.defineProperty(e.prototype,"entities",{get:function(){var e,r,n,o,a;for(o={},r=0,n=(a=this.children).length;r<n;r++)(e=a[r]).type!==t.EntityDeclaration||e.pe||(o[e.name]=e);return new s(o)}}),Object.defineProperty(e.prototype,"notations",{get:function(){var e,r,n,o,a;for(o={},r=0,n=(a=this.children).length;r<n;r++)(e=a[r]).type===t.NotationDeclaration&&(o[e.name]=e);return new s(o)}}),Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(e.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),e}.call(this)}).call(this)},99477:function(e,t,r){(function(){var t,n,o,a,i,s,c;({isPlainObject:c}=r(67479)),o=r(44163),n=r(58052),a=r(28352),t=r(64356),s=r(4702),i=r(50027),e.exports=function(){class e extends a{constructor(e){super(null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new n,e||(e={}),e.writer||(e.writer=new i),this.options=e,this.stringify=new s(e)}end(e){var t;return t={},e?c(e)&&(t=e,e=this.options.writer):e=this.options.writer,e.document(this,e.filterOptions(t))}toString(e){return this.options.writer.document(this,this.options.writer.filterOptions(e))}createElement(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createDocumentFragment(){throw new Error("This DOM method is not implemented."+this.debugInfo())}createTextNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createComment(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createCDATASection(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createProcessingInstruction(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createAttribute(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createEntityReference(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}importNode(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createElementNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createAttributeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementById(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}adoptNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}normalizeDocument(){throw new Error("This DOM method is not implemented."+this.debugInfo())}renameNode(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByClassName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createEvent(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createRange(){throw new Error("This DOM method is not implemented."+this.debugInfo())}createNodeIterator(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}createTreeWalker(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}}return Object.defineProperty(e.prototype,"implementation",{value:new o}),Object.defineProperty(e.prototype,"doctype",{get:function(){var e,r,n,o;for(r=0,n=(o=this.children).length;r<n;r++)if((e=o[r]).type===t.DocType)return e;return null}}),Object.defineProperty(e.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(e.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(e.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(e.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(e.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(e.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(e.prototype,"origin",{get:function(){return null}}),Object.defineProperty(e.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(e.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(e.prototype,"contentType",{get:function(){return null}}),e}.call(this)}).call(this)},86914:function(e,t,r){(function(){var t,n,o,a,i,s,c,u,l,d,p,f,g,m,h,y,S,v,E,A,_,b,T={}.hasOwnProperty;({isObject:_,isFunction:A,isPlainObject:b,getValue:E}=r(67479)),t=r(64356),f=r(99477),g=r(90950),a=r(62207),i=r(32023),h=r(10893),v=r(71386),m=r(70424),d=r(65868),p=r(86821),s=r(89318),u=r(88131),c=r(64677),l=r(70089),o=r(85460),S=r(4702),y=r(50027),n=r(66149),e.exports=class{constructor(e,r,n){var o;this.name="?xml",this.type=t.Document,e||(e={}),o={},e.writer?b(e.writer)&&(o=e.writer,e.writer=new y):e.writer=new y,this.options=e,this.writer=e.writer,this.writerOptions=this.writer.filterOptions(o),this.stringify=new S(e),this.onDataCallback=r||function(){},this.onEndCallback=n||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}createChildNode(e){var r,n,o,a,i,s,c,u;switch(e.type){case t.CData:this.cdata(e.value);break;case t.Comment:this.comment(e.value);break;case t.Element:for(n in o={},c=e.attribs)T.call(c,n)&&(r=c[n],o[n]=r.value);this.node(e.name,o);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(e.value);break;case t.Text:this.text(e.value);break;case t.ProcessingInstruction:this.instruction(e.target,e.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+e.constructor.name)}for(i=0,s=(u=e.children).length;i<s;i++)a=u[i],this.createChildNode(a),a.type===t.Element&&this.up();return this}dummy(){return this}node(e,t,r){if(null==e)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(e));return this.openCurrent(),e=E(e),null==t&&(t={}),t=E(t),_(t)||([r,t]=[t,r]),this.currentNode=new g(this,e,t),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=r&&this.text(r),this}element(e,r,n){var o,a,i,s,c,u;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement(...arguments);else if(Array.isArray(e)||_(e)||A(e))for(s=this.options.noValidation,this.options.noValidation=!0,(u=new f(this.options).element("TEMP_ROOT")).element(e),this.options.noValidation=s,a=0,i=(c=u.children).length;a<i;a++)o=c[a],this.createChildNode(o),o.type===t.Element&&this.up();else this.node(e,r,n);return this}attribute(e,t){var r,n;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(e));if(null!=e&&(e=E(e)),_(e))for(r in e)T.call(e,r)&&(n=e[r],this.attribute(r,n));else A(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.currentNode.attribs[e]=new o(this,e,""):null!=t&&(this.currentNode.attribs[e]=new o(this,e,t));return this}text(e){var t;return this.openCurrent(),t=new v(this,e),this.onData(this.writer.text(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}cdata(e){var t;return this.openCurrent(),t=new a(this,e),this.onData(this.writer.cdata(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}comment(e){var t;return this.openCurrent(),t=new i(this,e),this.onData(this.writer.comment(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}raw(e){var t;return this.openCurrent(),t=new h(this,e),this.onData(this.writer.raw(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}instruction(e,t){var r,n,o,a,i;if(this.openCurrent(),null!=e&&(e=E(e)),null!=t&&(t=E(t)),Array.isArray(e))for(r=0,a=e.length;r<a;r++)n=e[r],this.instruction(n);else if(_(e))for(n in e)T.call(e,n)&&(o=e[n],this.instruction(n,o));else A(t)&&(t=t.apply()),i=new m(this,e,t),this.onData(this.writer.processingInstruction(i,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this}declaration(e,t,r){var n;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return n=new d(this,e,t,r),this.onData(this.writer.declaration(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}doctype(e,t,r){if(this.openCurrent(),null==e)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new p(this,t,r),this.currentNode.rootNodeName=e,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this}dtdElement(e,t){var r;return this.openCurrent(),r=new c(this,e,t),this.onData(this.writer.dtdElement(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}attList(e,t,r,n,o){var a;return this.openCurrent(),a=new s(this,e,t,r,n,o),this.onData(this.writer.dtdAttList(a,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}entity(e,t){var r;return this.openCurrent(),r=new u(this,!1,e,t),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}pEntity(e,t){var r;return this.openCurrent(),r=new u(this,!0,e,t),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}notation(e,t){var r;return this.openCurrent(),r=new l(this,e,t),this.onData(this.writer.dtdNotation(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}up(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this}end(){for(;this.currentLevel>=0;)this.up();return this.onEnd()}openCurrent(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)}openNode(e){var r,o,a,i;if(!e.isOpen){if(this.root||0!==this.currentLevel||e.type!==t.Element||(this.root=e),o="",e.type===t.Element){for(a in this.writerOptions.state=n.OpenTag,o=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<"+e.name,i=e.attribs)T.call(i,a)&&(r=i[a],o+=this.writer.attribute(r,this.writerOptions,this.currentLevel));o+=(e.children?">":"/>")+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=n.InsideTag}else this.writerOptions.state=n.OpenTag,o=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+e.rootNodeName,e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),e.children?(o+=" [",this.writerOptions.state=n.InsideTag):(this.writerOptions.state=n.CloseTag,o+=">"),o+=this.writer.endline(e,this.writerOptions,this.currentLevel);return this.onData(o,this.currentLevel),e.isOpen=!0}}closeNode(e){var r;if(!e.isClosed)return"",this.writerOptions.state=n.CloseTag,r=e.type===t.Element?this.writer.indent(e,this.writerOptions,this.currentLevel)+"</"+e.name+">"+this.writer.endline(e,this.writerOptions,this.currentLevel):this.writer.indent(e,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=n.None,this.onData(r,this.currentLevel),e.isClosed=!0}onData(e,t){return this.documentStarted=!0,this.onDataCallback(e,t+1)}onEnd(){return this.documentCompleted=!0,this.onEndCallback()}debugInfo(e){return null==e?"":"node: <"+e+">"}ele(){return this.element(...arguments)}nod(e,t,r){return this.node(e,t,r)}txt(e){return this.text(e)}dat(e){return this.cdata(e)}com(e){return this.comment(e)}ins(e,t){return this.instruction(e,t)}dec(e,t,r){return this.declaration(e,t,r)}dtd(e,t,r){return this.doctype(e,t,r)}e(e,t,r){return this.element(e,t,r)}n(e,t,r){return this.node(e,t,r)}t(e){return this.text(e)}d(e){return this.cdata(e)}c(e){return this.comment(e)}r(e){return this.raw(e)}i(e,t){return this.instruction(e,t)}att(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList(...arguments):this.attribute(...arguments)}a(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList(...arguments):this.attribute(...arguments)}ent(e,t){return this.entity(e,t)}pent(e,t){return this.pEntity(e,t)}not(e,t){return this.notation(e,t)}}}).call(this)},3688:function(e,t,r){(function(){var t,n;n=r(28352),t=r(64356),e.exports=class extends n{constructor(e){super(e),this.type=t.Dummy}clone(){return Object.create(this)}toString(e){return""}}}).call(this)},90950:function(e,t,r){(function(){var t,n,o,a,i,s,c,u={}.hasOwnProperty;({isObject:c,isFunction:s,getValue:i}=r(67479)),a=r(28352),t=r(64356),n=r(85460),o=r(60322),e.exports=function(){class e extends a{constructor(e,r,n){var o,a,i,s;if(super(e),null==r)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(r),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,null!=n&&this.attribute(n),e.type===t.Document&&(this.isRoot=!0,this.documentObject=e,e.rootObject=this,e.children))for(a=0,i=(s=e.children).length;a<i;a++)if((o=s[a]).type===t.DocType){o.name=this.name;break}}clone(){var e,t,r,n;for(t in(r=Object.create(this)).isRoot&&(r.documentObject=null),r.attribs={},n=this.attribs)u.call(n,t)&&(e=n[t],r.attribs[t]=e.clone());return r.children=[],this.children.forEach((function(e){var t;return(t=e.clone()).parent=r,r.children.push(t)})),r}attribute(e,t){var r,o;if(null!=e&&(e=i(e)),c(e))for(r in e)u.call(e,r)&&(o=e[r],this.attribute(r,o));else s(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.attribs[e]=new n(this,e,""):null!=t&&(this.attribs[e]=new n(this,e,t));return this}removeAttribute(e){var t,r,n;if(null==e)throw new Error("Missing attribute name. "+this.debugInfo());if(e=i(e),Array.isArray(e))for(r=0,n=e.length;r<n;r++)t=e[r],delete this.attribs[t];else delete this.attribs[e];return this}toString(e){return this.options.writer.element(this,this.options.writer.filterOptions(e))}att(e,t){return this.attribute(e,t)}a(e,t){return this.attribute(e,t)}getAttribute(e){return this.attribs.hasOwnProperty(e)?this.attribs[e].value:null}setAttribute(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNode(e){return this.attribs.hasOwnProperty(e)?this.attribs[e]:null}setAttributeNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeAttributeNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}setAttributeNS(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeAttributeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNodeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}setAttributeNodeNS(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}hasAttribute(e){return this.attribs.hasOwnProperty(e)}hasAttributeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}setIdAttribute(e,t){return this.attribs.hasOwnProperty(e)?this.attribs[e].isId:t}setIdAttributeNS(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}setIdAttributeNode(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByClassName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(e){var t,r,n;if(!super.isEqualNode(e))return!1;if(e.namespaceURI!==this.namespaceURI)return!1;if(e.prefix!==this.prefix)return!1;if(e.localName!==this.localName)return!1;if(e.attribs.length!==this.attribs.length)return!1;for(t=r=0,n=this.attribs.length-1;0<=n?r<=n:r>=n;t=0<=n?++r:--r)if(!this.attribs[t].isEqualNode(e.attribs[t]))return!1;return!0}}return Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new o(this.attribs)),this.attributeMap}}),e}.call(this)}).call(this)},60322:function(e){(function(){e.exports=function(){class e{constructor(e){this.nodes=e}clone(){return this.nodes=null}getNamedItem(e){return this.nodes[e]}setNamedItem(e){var t;return t=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,t||null}removeNamedItem(e){var t;return t=this.nodes[e],delete this.nodes[e],t||null}item(e){return this.nodes[Object.keys(this.nodes)[e]]||null}getNamedItemNS(e,t){throw new Error("This DOM method is not implemented.")}setNamedItemNS(e){throw new Error("This DOM method is not implemented.")}removeNamedItemNS(e,t){throw new Error("This DOM method is not implemented.")}}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e}.call(this)}).call(this)},28352:function(e,t,r){(function(){var t,n,o,a,i,s,c,u,l,d,p,f,g,m,h,y,S={}.hasOwnProperty,v=[].splice;({isObject:y,isFunction:h,isEmpty:m,getValue:g}=r(67479)),u=null,o=null,a=null,i=null,s=null,p=null,f=null,d=null,c=null,n=null,l=null,t=null,e.exports=function(){class e{constructor(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,u||(u=r(90950),o=r(62207),a=r(32023),i=r(65868),s=r(86821),p=r(10893),f=r(71386),d=r(70424),c=r(3688),n=r(64356),l=r(21469),r(60322),t=r(88503))}setParent(e){var t,r,n,o,a;for(this.parent=e,e&&(this.options=e.options,this.stringify=e.stringify),a=[],r=0,n=(o=this.children).length;r<n;r++)t=o[r],a.push(t.setParent(this));return a}element(e,t,r){var n,o,a,i,s,c,u,l,d;if(c=null,null===t&&null==r&&([t,r]=[{},null]),null==t&&(t={}),t=g(t),y(t)||([r,t]=[t,r]),null!=e&&(e=g(e)),Array.isArray(e))for(a=0,u=e.length;a<u;a++)o=e[a],c=this.element(o);else if(h(e))c=this.element(e.apply());else if(y(e)){for(s in e)if(S.call(e,s))if(d=e[s],h(d)&&(d=d.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===s.indexOf(this.stringify.convertAttKey))c=this.attribute(s.substr(this.stringify.convertAttKey.length),d);else if(!this.options.separateArrayItems&&Array.isArray(d)&&m(d))c=this.dummy();else if(y(d)&&m(d))c=this.element(s);else if(this.options.keepNullNodes||null!=d)if(!this.options.separateArrayItems&&Array.isArray(d))for(i=0,l=d.length;i<l;i++)o=d[i],(n={})[s]=o,c=this.element(n);else y(d)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===s.indexOf(this.stringify.convertTextKey)?c=this.element(d):(c=this.element(s)).element(d):c=this.element(s,d);else c=this.dummy()}else c=this.options.keepNullNodes||null!==r?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(r):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(r):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(r):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(r):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===e.indexOf(this.stringify.convertPIKey)?this.instruction(e.substr(this.stringify.convertPIKey.length),r):this.node(e,t,r):this.dummy();if(null==c)throw new Error("Could not create any elements with: "+e+". "+this.debugInfo());return c}insertBefore(e,t,r){var n,o,a,i,s;if(null!=e?e.type:void 0)return i=t,(a=e).setParent(this),i?(o=children.indexOf(i),s=children.splice(o),children.push(a),Array.prototype.push.apply(children,s)):children.push(a),a;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return o=this.parent.children.indexOf(this),s=this.parent.children.splice(o),n=this.parent.element(e,t,r),Array.prototype.push.apply(this.parent.children,s),n}insertAfter(e,t,r){var n,o,a;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return o=this.parent.children.indexOf(this),a=this.parent.children.splice(o+1),n=this.parent.element(e,t,r),Array.prototype.push.apply(this.parent.children,a),n}remove(){var e;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return e=this.parent.children.indexOf(this),v.apply(this.parent.children,[e,e-e+1].concat([])),this.parent}node(e,t,r){var n;return null!=e&&(e=g(e)),t||(t={}),t=g(t),y(t)||([r,t]=[t,r]),n=new u(this,e,t),null!=r&&n.text(r),this.children.push(n),n}text(e){var t;return y(e)&&this.element(e),t=new f(this,e),this.children.push(t),this}cdata(e){var t;return t=new o(this,e),this.children.push(t),this}comment(e){var t;return t=new a(this,e),this.children.push(t),this}commentBefore(e){var t,r;return t=this.parent.children.indexOf(this),r=this.parent.children.splice(t),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,r),this}commentAfter(e){var t,r;return t=this.parent.children.indexOf(this),r=this.parent.children.splice(t+1),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,r),this}raw(e){var t;return t=new p(this,e),this.children.push(t),this}dummy(){return new c(this)}instruction(e,t){var r,n,o,a,i;if(null!=e&&(e=g(e)),null!=t&&(t=g(t)),Array.isArray(e))for(a=0,i=e.length;a<i;a++)r=e[a],this.instruction(r);else if(y(e))for(r in e)S.call(e,r)&&(n=e[r],this.instruction(r,n));else h(t)&&(t=t.apply()),o=new d(this,e,t),this.children.push(o);return this}instructionBefore(e,t){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,n),this}instructionAfter(e,t){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r+1),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,n),this}declaration(e,t,r){var o,a;return o=this.document(),a=new i(o,e,t,r),0===o.children.length?o.children.unshift(a):o.children[0].type===n.Declaration?o.children[0]=a:o.children.unshift(a),o.root()||o}dtd(e,t){var r,o,a,i,c,u,l,d,p;for(r=this.document(),o=new s(r,e,t),a=i=0,u=(d=r.children).length;i<u;a=++i)if(d[a].type===n.DocType)return r.children[a]=o,o;for(a=c=0,l=(p=r.children).length;c<l;a=++c)if(p[a].isRoot)return r.children.splice(a,0,o),o;return r.children.push(o),o}up(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent}root(){var e;for(e=this;e;){if(e.type===n.Document)return e.rootObject;if(e.isRoot)return e;e=e.parent}}document(){var e;for(e=this;e;){if(e.type===n.Document)return e;e=e.parent}}end(e){return this.document().end(e)}prev(){var e;if((e=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[e-1]}next(){var e;if(-1===(e=this.parent.children.indexOf(this))||e===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[e+1]}importDocument(e){var t,r,o,a,i;if((r=e.root().clone()).parent=this,r.isRoot=!1,this.children.push(r),this.type===n.Document&&(r.isRoot=!0,r.documentObject=this,this.rootObject=r,this.children))for(o=0,a=(i=this.children).length;o<a;o++)if((t=i[o]).type===n.DocType){t.name=r.name;break}return this}debugInfo(e){var t,r;return null!=(e=e||this.name)||(null!=(t=this.parent)?t.name:void 0)?null==e?"parent: <"+this.parent.name+">":(null!=(r=this.parent)?r.name:void 0)?"node: <"+e+">, parent: <"+this.parent.name+">":"node: <"+e+">":""}ele(e,t,r){return this.element(e,t,r)}nod(e,t,r){return this.node(e,t,r)}txt(e){return this.text(e)}dat(e){return this.cdata(e)}com(e){return this.comment(e)}ins(e,t){return this.instruction(e,t)}doc(){return this.document()}dec(e,t,r){return this.declaration(e,t,r)}e(e,t,r){return this.element(e,t,r)}n(e,t,r){return this.node(e,t,r)}t(e){return this.text(e)}d(e){return this.cdata(e)}c(e){return this.comment(e)}r(e){return this.raw(e)}i(e,t){return this.instruction(e,t)}u(){return this.up()}importXMLBuilder(e){return this.importDocument(e)}attribute(e,t){throw new Error("attribute() applies to element nodes only.")}att(e,t){return this.attribute(e,t)}a(e,t){return this.attribute(e,t)}removeAttribute(e){throw new Error("attribute() applies to element nodes only.")}replaceChild(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeChild(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}appendChild(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}hasChildNodes(){return 0!==this.children.length}cloneNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}normalize(){throw new Error("This DOM method is not implemented."+this.debugInfo())}isSupported(e,t){return!0}hasAttributes(){return 0!==this.attribs.length}compareDocumentPosition(e){var r,n;return(r=this)===e?0:this.document()!==e.document()?(n=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?n|=t.Preceding:n|=t.Following,n):r.isAncestor(e)?t.Contains|t.Preceding:r.isDescendant(e)?t.Contains|t.Following:r.isPreceding(e)?t.Preceding:t.Following}isSameNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}lookupPrefix(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}isDefaultNamespace(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}lookupNamespaceURI(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(e){var t,r,n;if(e.nodeType!==this.nodeType)return!1;if(e.children.length!==this.children.length)return!1;for(t=r=0,n=this.children.length-1;0<=n?r<=n:r>=n;t=0<=n?++r:--r)if(!this.children[t].isEqualNode(e.children[t]))return!1;return!0}getFeature(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}setUserData(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}getUserData(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}contains(e){return!!e&&(e===this||this.isDescendant(e))}isDescendant(e){var t,r,n,o;for(r=0,n=(o=this.children).length;r<n;r++){if(e===(t=o[r]))return!0;if(t.isDescendant(e))return!0}return!1}isAncestor(e){return e.isDescendant(this)}isPreceding(e){var t,r;return t=this.treePosition(e),r=this.treePosition(this),-1!==t&&-1!==r&&t<r}isFollowing(e){var t,r;return t=this.treePosition(e),r=this.treePosition(this),-1!==t&&-1!==r&&t>r}treePosition(e){var t,r;return r=0,t=!1,this.foreachTreeNode(this.document(),(function(n){if(r++,!t&&n===e)return t=!0})),t?r:-1}foreachTreeNode(e,t){var r,n,o,a,i;for(e||(e=this.document()),n=0,o=(a=e.children).length;n<o;n++){if(i=t(r=a[n]))return i;if(i=this.foreachTreeNode(r,t))return i}}}return Object.defineProperty(e.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new l(this.children)),this.childNodeList}}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e-1]||null}}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e+1]||null}}),Object.defineProperty(e.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(e.prototype,"textContent",{get:function(){var e,t,r,o,a;if(this.nodeType===n.Element||this.nodeType===n.DocumentFragment){for(a="",t=0,r=(o=this.children).length;t<r;t++)(e=o[t]).textContent&&(a+=e.textContent);return a}return null},set:function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),e}.call(this)}).call(this)},21469:function(e){(function(){e.exports=function(){class e{constructor(e){this.nodes=e}clone(){return this.nodes=null}item(e){return this.nodes[e]||null}}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e}.call(this)}).call(this)},70424:function(e,t,r){(function(){var t,n;t=r(64356),n=r(51502),e.exports=class extends n{constructor(e,r,n){if(super(e),null==r)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(r),this.name=this.target,n&&(this.value=this.stringify.insValue(n))}clone(){return Object.create(this)}toString(e){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(e))}isEqualNode(e){return!!super.isEqualNode(e)&&e.target===this.target}}}).call(this)},10893:function(e,t,r){(function(){var t,n;t=r(64356),n=r(28352),e.exports=class extends n{constructor(e,r){if(super(e),null==r)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(r)}clone(){return Object.create(this)}toString(e){return this.options.writer.raw(this,this.options.writer.filterOptions(e))}}}).call(this)},99068:function(e,t,r){(function(){var t,n,o,a={}.hasOwnProperty;t=r(64356),o=r(41991),n=r(66149),e.exports=class extends o{constructor(e,t){super(t),this.stream=e}endline(e,t,r){return e.isLastRootNode&&t.state===n.CloseTag?"":super.endline(e,t,r)}document(e,t){var r,n,o,a,i,s,c,u,l;for(n=o=0,i=(c=e.children).length;o<i;n=++o)(r=c[n]).isLastRootNode=n===e.children.length-1;for(t=this.filterOptions(t),l=[],a=0,s=(u=e.children).length;a<s;a++)r=u[a],l.push(this.writeChildNode(r,t,0));return l}cdata(e,t,r){return this.stream.write(super.cdata(e,t,r))}comment(e,t,r){return this.stream.write(super.comment(e,t,r))}declaration(e,t,r){return this.stream.write(super.declaration(e,t,r))}docType(e,t,r){var o,a,i,s;if(r||(r=0),this.openNode(e,t,r),t.state=n.OpenTag,this.stream.write(this.indent(e,t,r)),this.stream.write("<!DOCTYPE "+e.root().name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(e,t,r)),t.state=n.InsideTag,a=0,i=(s=e.children).length;a<i;a++)o=s[a],this.writeChildNode(o,t,r+1);t.state=n.CloseTag,this.stream.write("]")}return t.state=n.CloseTag,this.stream.write(t.spaceBeforeSlash+">"),this.stream.write(this.endline(e,t,r)),t.state=n.None,this.closeNode(e,t,r)}element(e,r,o){var i,s,c,u,l,d,p,f,g,m,h,y,S,v;if(o||(o=0),this.openNode(e,r,o),r.state=n.OpenTag,g=this.indent(e,r,o)+"<"+e.name,r.pretty&&r.width>0)for(f in d=g.length,h=e.attribs)a.call(h,f)&&(i=h[f],d+(m=this.attribute(i,r,o)).length>r.width?(v=this.indent(e,r,o+1)+m,g+=this.endline(e,r,o)+v,d=v.length):(g+=v=" "+m,d+=v.length));else for(f in y=e.attribs)a.call(y,f)&&(i=y[f],g+=this.attribute(i,r,o));if(this.stream.write(g),u=0===(c=e.children.length)?null:e.children[0],0===c||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))r.allowEmpty?(this.stream.write(">"),r.state=n.CloseTag,this.stream.write("</"+e.name+">")):(r.state=n.CloseTag,this.stream.write(r.spaceBeforeSlash+"/>"));else if(!r.pretty||1!==c||u.type!==t.Text&&u.type!==t.Raw||null==u.value){for(this.stream.write(">"+this.endline(e,r,o)),r.state=n.InsideTag,l=0,p=(S=e.children).length;l<p;l++)s=S[l],this.writeChildNode(s,r,o+1);r.state=n.CloseTag,this.stream.write(this.indent(e,r,o)+"</"+e.name+">")}else this.stream.write(">"),r.state=n.InsideTag,r.suppressPrettyCount++,this.writeChildNode(u,r,o+1),r.suppressPrettyCount--,r.state=n.CloseTag,this.stream.write("</"+e.name+">");return this.stream.write(this.endline(e,r,o)),r.state=n.None,this.closeNode(e,r,o)}processingInstruction(e,t,r){return this.stream.write(super.processingInstruction(e,t,r))}raw(e,t,r){return this.stream.write(super.raw(e,t,r))}text(e,t,r){return this.stream.write(super.text(e,t,r))}dtdAttList(e,t,r){return this.stream.write(super.dtdAttList(e,t,r))}dtdElement(e,t,r){return this.stream.write(super.dtdElement(e,t,r))}dtdEntity(e,t,r){return this.stream.write(super.dtdEntity(e,t,r))}dtdNotation(e,t,r){return this.stream.write(super.dtdNotation(e,t,r))}}}).call(this)},50027:function(e,t,r){(function(){var t;t=r(41991),e.exports=class extends t{constructor(e){super(e)}document(e,t){var r,n,o,a,i;for(t=this.filterOptions(t),a="",n=0,o=(i=e.children).length;n<o;n++)r=i[n],a+=this.writeChildNode(r,t,0);return t.pretty&&a.slice(-t.newline.length)===t.newline&&(a=a.slice(0,-t.newline.length)),a}}}).call(this)},4702:function(e){(function(){var t={}.hasOwnProperty;e.exports=function(){class e{constructor(e){var r,n,o;for(r in this.assertLegalChar=this.assertLegalChar.bind(this),this.assertLegalName=this.assertLegalName.bind(this),e||(e={}),this.options=e,this.options.version||(this.options.version="1.0"),n=e.stringify||{})t.call(n,r)&&(o=n[r],this[r]=o)}name(e){return this.options.noValidation?e:this.assertLegalName(""+e||"")}text(e){return this.options.noValidation?e:this.assertLegalChar(this.textEscape(""+e||""))}cdata(e){return this.options.noValidation?e:(e=(e=""+e||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(e))}comment(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)}raw(e){return this.options.noValidation?e:""+e||""}attValue(e){return this.options.noValidation?e:this.assertLegalChar(this.attEscape(e=""+e||""))}insTarget(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}insValue(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return this.assertLegalChar(e)}xmlVersion(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e}xmlEncoding(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+e);return this.assertLegalChar(e)}xmlStandalone(e){return this.options.noValidation?e:e?"yes":"no"}dtdPubID(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdSysID(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdElementValue(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdAttType(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdAttDefault(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdEntityValue(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdNData(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}assertLegalChar(e){var t,r;if(this.options.noValidation)return e;if(t="","1.0"===this.options.version){if(t=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,r=e.match(t))throw new Error(`Invalid character in string: ${e} at index ${r.index}`)}else if("1.1"===this.options.version&&(t=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,r=e.match(t)))throw new Error(`Invalid character in string: ${e} at index ${r.index}`);return e}assertLegalName(e){var t;if(this.options.noValidation)return e;if(this.assertLegalChar(e),t=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!e.match(t))throw new Error("Invalid character in name");return e}textEscape(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))}attEscape(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))}}return e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e}.call(this)}).call(this)},71386:function(e,t,r){(function(){var t,n;t=r(64356),n=r(51502),e.exports=function(){class e extends n{constructor(e,r){if(super(e),null==r)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(r)}clone(){return Object.create(this)}toString(e){return this.options.writer.text(this,this.options.writer.filterOptions(e))}splitText(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}replaceWholeText(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}}return Object.defineProperty(e.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"wholeText",{get:function(){var e,t,r;for(r="",t=this.previousSibling;t;)r=t.data+r,t=t.previousSibling;for(r+=this.data,e=this.nextSibling;e;)r+=e.data,e=e.nextSibling;return r}}),e}.call(this)}).call(this)},41991:function(e,t,r){(function(){var t,n,o,a={}.hasOwnProperty;({assign:o}=r(67479)),t=r(64356),r(65868),r(86821),r(62207),r(32023),r(90950),r(10893),r(71386),r(70424),r(3688),r(89318),r(64677),r(88131),r(70089),n=r(66149),e.exports=class{constructor(e){var t,r,n;for(t in e||(e={}),this.options=e,r=e.writer||{})a.call(r,t)&&(n=r[t],this["_"+t]=this[t],this[t]=n)}filterOptions(e){var t,r,a,i,s,c,u,l,d;return e||(e={}),e=o({},this.options,e),(t={writer:this}).pretty=e.pretty||!1,t.allowEmpty=e.allowEmpty||!1,t.indent=null!=(r=e.indent)?r:"  ",t.newline=null!=(a=e.newline)?a:"\n",t.offset=null!=(i=e.offset)?i:0,t.width=null!=(s=e.width)?s:0,t.dontPrettyTextNodes=null!=(c=null!=(u=e.dontPrettyTextNodes)?u:e.dontprettytextnodes)?c:0,t.spaceBeforeSlash=null!=(l=null!=(d=e.spaceBeforeSlash)?d:e.spacebeforeslash)?l:"",!0===t.spaceBeforeSlash&&(t.spaceBeforeSlash=" "),t.suppressPrettyCount=0,t.user={},t.state=n.None,t}indent(e,t,r){var n;return!t.pretty||t.suppressPrettyCount?"":t.pretty&&(n=(r||0)+t.offset+1)>0?new Array(n).join(t.indent):""}endline(e,t,r){return!t.pretty||t.suppressPrettyCount?"":t.newline}attribute(e,t,r){var n;return this.openAttribute(e,t,r),n=t.pretty&&t.width>0?e.name+'="'+e.value+'"':" "+e.name+'="'+e.value+'"',this.closeAttribute(e,t,r),n}cdata(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r)+"<![CDATA[",t.state=n.InsideTag,o+=e.value,t.state=n.CloseTag,o+="]]>"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}comment(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r)+"\x3c!-- ",t.state=n.InsideTag,o+=e.value,t.state=n.CloseTag,o+=" --\x3e"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}declaration(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r)+"<?xml",t.state=n.InsideTag,o+=' version="'+e.version+'"',null!=e.encoding&&(o+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(o+=' standalone="'+e.standalone+'"'),t.state=n.CloseTag,o+=t.spaceBeforeSlash+"?>",o+=this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}docType(e,t,r){var o,a,i,s,c;if(r||(r=0),this.openNode(e,t,r),t.state=n.OpenTag,s=this.indent(e,t,r),s+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?s+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(s+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(s+=" [",s+=this.endline(e,t,r),t.state=n.InsideTag,a=0,i=(c=e.children).length;a<i;a++)o=c[a],s+=this.writeChildNode(o,t,r+1);t.state=n.CloseTag,s+="]"}return t.state=n.CloseTag,s+=t.spaceBeforeSlash+">",s+=this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),s}element(e,r,o){var i,s,c,u,l,d,p,f,g,m,h,y,S,v,E,A,_,b;if(o||(o=0),h=!1,this.openNode(e,r,o),r.state=n.OpenTag,y=this.indent(e,r,o)+"<"+e.name,r.pretty&&r.width>0)for(m in p=y.length,v=e.attribs)a.call(v,m)&&(i=v[m],p+(S=this.attribute(i,r,o)).length>r.width?(b=this.indent(e,r,o+1)+S,y+=this.endline(e,r,o)+b,p=b.length):(y+=b=" "+S,p+=b.length));else for(m in E=e.attribs)a.call(E,m)&&(i=E[m],y+=this.attribute(i,r,o));if(u=0===(c=e.children.length)?null:e.children[0],0===c||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))r.allowEmpty?(y+=">",r.state=n.CloseTag,y+="</"+e.name+">"+this.endline(e,r,o)):(r.state=n.CloseTag,y+=r.spaceBeforeSlash+"/>"+this.endline(e,r,o));else if(!r.pretty||1!==c||u.type!==t.Text&&u.type!==t.Raw||null==u.value){if(r.dontPrettyTextNodes)for(l=0,f=(A=e.children).length;l<f;l++)if(((s=A[l]).type===t.Text||s.type===t.Raw)&&null!=s.value){r.suppressPrettyCount++,h=!0;break}for(y+=">"+this.endline(e,r,o),r.state=n.InsideTag,d=0,g=(_=e.children).length;d<g;d++)s=_[d],y+=this.writeChildNode(s,r,o+1);r.state=n.CloseTag,y+=this.indent(e,r,o)+"</"+e.name+">",h&&r.suppressPrettyCount--,y+=this.endline(e,r,o),r.state=n.None}else y+=">",r.state=n.InsideTag,r.suppressPrettyCount++,h=!0,y+=this.writeChildNode(u,r,o+1),r.suppressPrettyCount--,h=!1,r.state=n.CloseTag,y+="</"+e.name+">"+this.endline(e,r,o);return this.closeNode(e,r,o),y}writeChildNode(e,r,n){switch(e.type){case t.CData:return this.cdata(e,r,n);case t.Comment:return this.comment(e,r,n);case t.Element:return this.element(e,r,n);case t.Raw:return this.raw(e,r,n);case t.Text:return this.text(e,r,n);case t.ProcessingInstruction:return this.processingInstruction(e,r,n);case t.Dummy:return"";case t.Declaration:return this.declaration(e,r,n);case t.DocType:return this.docType(e,r,n);case t.AttributeDeclaration:return this.dtdAttList(e,r,n);case t.ElementDeclaration:return this.dtdElement(e,r,n);case t.EntityDeclaration:return this.dtdEntity(e,r,n);case t.NotationDeclaration:return this.dtdNotation(e,r,n);default:throw new Error("Unknown XML node type: "+e.constructor.name)}}processingInstruction(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r)+"<?",t.state=n.InsideTag,o+=e.target,e.value&&(o+=" "+e.value),t.state=n.CloseTag,o+=t.spaceBeforeSlash+"?>",o+=this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}raw(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r),t.state=n.InsideTag,o+=e.value,t.state=n.CloseTag,o+=this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}text(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r),t.state=n.InsideTag,o+=e.value,t.state=n.CloseTag,o+=this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}dtdAttList(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r)+"<!ATTLIST",t.state=n.InsideTag,o+=" "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(o+=" "+e.defaultValueType),e.defaultValue&&(o+=' "'+e.defaultValue+'"'),t.state=n.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}dtdElement(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r)+"<!ELEMENT",t.state=n.InsideTag,o+=" "+e.name+" "+e.value,t.state=n.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}dtdEntity(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r)+"<!ENTITY",t.state=n.InsideTag,e.pe&&(o+=" %"),o+=" "+e.name,e.value?o+=' "'+e.value+'"':(e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),e.nData&&(o+=" NDATA "+e.nData)),t.state=n.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}dtdNotation(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r)+"<!NOTATION",t.state=n.InsideTag,o+=" "+e.name,e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?o+=' PUBLIC "'+e.pubID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),t.state=n.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}openNode(e,t,r){}closeNode(e,t,r){}openAttribute(e,t,r){}closeAttribute(e,t,r){}}}).call(this)},42541:function(e,t,r){(function(){var t,n,o,a,i,s,c,u,l;({assign:u,isFunction:l}=r(67479)),o=r(44163),a=r(99477),i=r(86914),c=r(50027),s=r(99068),t=r(64356),n=r(66149),e.exports.create=function(e,t,r,n){var o,i;if(null==e)throw new Error("Root element needs a name.");return n=u({},t,r,n),i=(o=new a(n)).element(e),n.headless||(o.declaration(n),null==n.pubID&&null==n.sysID||o.dtd(n)),i},e.exports.begin=function(e,t,r){return l(e)&&([t,r]=[e,t],e={}),t?new i(e,t,r):new a(e)},e.exports.stringWriter=function(e){return new c(e)},e.exports.streamWriter=function(e,t){return new s(e,t)},e.exports.implementation=new o,e.exports.nodeType=t,e.exports.writerState=n}).call(this)},55328:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchABTestingVersionDetails=void 0;const n=r(95623),o=r(50884);t.fetchABTestingVersionDetails=(e,t)=>{const r=e.storeService,a={capacity:"",language:r.getPlatform().info.lang,platform:"real_website"};return t?.abTestForcedVersion&&(a.forceVersion3=t.abTestForcedVersion),e.wsService.premium.getABTestingVersionDetails(a).then((e=>{r.dispatch((0,o.saveABTestingInfo)(e))})).catch((e=>{n.default.error("Carbon init - Error while calling getABTestingVersionDetails: ",e)}))}},35673:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(92082),o=r(72525),a=r(62627);t.config={commands:{participateToUserABTest:{handler:o.participateToUserABTest}},queries:{getUserABTestVariant:{selector:a.userABTestVariantSelector}},liveQueries:{liveUserABTestVariant:{operator:n.userABTestVariant$}}}},50884:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveABTestingInfo=t.SAVE_ABTESTING_INFO=void 0,t.SAVE_ABTESTING_INFO="SAVE_ABTESTING_INFO",t.saveABTestingInfo=e=>({type:t.SAVE_ABTESTING_INFO,data:Object.assign({},e)})},34007:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyABTesting=void 0;const n=r(50884);t.default=(e={details:[],version:"control2016_all",success:null},t)=>t.type===n.SAVE_ABTESTING_INFO?Object.assign({},e,{...t.data}):e,t.getEmptyABTesting=function(){return{details:[],version:"control2016_all",success:null}}},80755:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(35673);t.bootstrap=e=>{e.register(n.config)}},8481:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshUserABTest=void 0;const n=r(41075),o=r(70252),a=r(90503),i=r(30913),s=r(46298),c=r(43416),u=r(9272),l=r(25899);t.refreshUserABTest=async function(e,t,r){try{const o=(0,i.abTestsNamesSelector)(e.getState());if(0===o.length)return;const a=await(0,n.getAndEvaluateForUser)(e,r,{abtests:o});if((0,s.isApiError)(a))throw new Error(`Failed to refresh user AB tests: ${a}`);const d=(0,u.mapGetUserABServerResponse)(o,a.abtests);e.dispatch((0,c.refreshedUserABTests)(d)),(0,l.persistUserTests)(t,e)}catch(e){const t=new Error(`[ABTests] - refreshUserABTest: ${e}`);(0,o.sendExceptionLog)({error:t,code:a.ExceptionCriticality.WARNING})}}},21587:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(80755);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},92082:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userABTestVariant$=void 0;const n=r(18948),o=r(3343),a=r(62627);t.userABTestVariant$=e=>(0,n.pipe)((0,o.map)((t=>(0,a.userABTestVariantSelector)(t,e))),(0,o.distinctUntilChanged)())},9272:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapGetUserABServerResponse=t.NOT_PARTICIPATING=void 0,t.NOT_PARTICIPATING="not-participating",t.mapGetUserABServerResponse=function(e,r){return e.reduce(((e,n)=>{const o=r.find((e=>n===e.name));return e[n]=o?{variant:o.variant,version:o.abtestVersion}:{variant:t.NOT_PARTICIPATING},e}),{})}},72525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.participateToUserABTest=void 0;const n=r(62627),o=r(9272),a=r(25899);t.participateToUserABTest=async function(e,t){const r=(0,n.userABTestSelector)(e.storeService.getState(),t);r&&o.NOT_PARTICIPATING!==r.variant&&(0,a.persistUserTests)(e.localStorageService.getInstance(),e.storeService)}},25899:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.persistUserTests=void 0;const n=r(25576),o=r(62627);t.persistUserTests=async function(e,t){if(t.getAccountInfo().persistData===n.PersistData.PERSIST_DATA_NO)return Promise.resolve();e&&await e.storeUserABTests((0,o.userABTestsSelector)(t.getState()))}},52346:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(18216),o=r(55328),a=r(9486);t.setupSubscriptions=function(e,t){e.appInitialized.on((async e=>{if(e.initMode===n.InitMode.FirstInit){await(0,o.fetchABTestingVersionDetails)(t,{abTestForcedVersion:e.abTestForcedVersion});const r=t.storeService.getABTesting();(0,a.triggerABTestingChanged)(r)}}))}},39811:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(95667),o=r(88544),a=r(71594);t.config={commands:{editContactInfo:{handler:n.editContactInfoHandler}},queries:{getContactInfo:{selector:o.contactInfoSelector}},liveQueries:{liveContactInfo:{operator:a.contactInfo$}}}},13044:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(92925),t)},1463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(39811);t.bootstrap=e=>{e.register(n.config)}},66650:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.editContactInfoHandler=void 0;const n=r(92925),o=r(46298),a=r(45956),i=r(16593),s=r(5464),c={contact_email_required:n.EditContactInfoErrorCode.EMPTY_EMAIL,invalid_contact_email:n.EditContactInfoErrorCode.INVALID_EMAIL,UNKNOWN_ERROR:n.EditContactInfoErrorCode.UNKNOWN_ERROR};t.editContactInfoHandler=async function(e,t){const{storeService:r,wsService:u,sessionService:l}=e,d=r.getState(),p=(0,i.userLoginSelector)(d);if(!r.isAuthenticated())return{success:!1,error:{code:n.EditContactInfoErrorCode.UNKNOWN_ERROR}};try{const e=await(0,o.updateContactInfo)(r,p,t);return(0,o.isApiError)(e)?{success:!1,error:{code:c[e.code]}}:(await(0,s.getAndTriggerRefreshAccountInfo)(r,l,u),{success:!0})}catch(e){return{success:!1,error:{code:c[a.UnknownError]}}}}},95667:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(66650),t)},64369:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0,o(r(13044),t);var a=r(1463);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return a.bootstrap}})},71594:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contactInfo$=void 0;const n=r(18948),o=r(3343),a=r(88544);t.contactInfo$=()=>(0,n.pipe)((0,o.map)(a.contactInfoSelector),(0,o.distinctUntilChanged)())},88544:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contactInfoSelector=void 0,t.contactInfoSelector=e=>e.userSession.accountContactInfo},92925:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditContactInfoErrorCode=void 0,function(e){e[e.EMPTY_EMAIL=0]="EMPTY_EMAIL",e[e.INVALID_EMAIL=1]="INVALID_EMAIL",e[e.UNKNOWN_ERROR=2]="UNKNOWN_ERROR"}(t.EditContactInfoErrorCode||(t.EditContactInfoErrorCode={}))},71703:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeAccountCreationController=t.encryptSettings=t.checkLogin=void 0;const n=r(53576),o=r(70252),a=r(32074),i=r(39362),s=r(36513),c=r(43461),u=r(95551),l=r(28096),d=r(7624),p=r(16356),f=r(61259),g=r(95623),m=r(65675),h=r(16038),y=r(46298);async function S(e,t){g.default.log("AccountCreationController.checkLogin");const r=await(0,y.requestAccountCreation)(e,{login:t});if((0,y.isApiError)(r)){if("SSO_BLOCKED"===r.code)return{accountCreationCode:n.AccountCreationCode.USER_DOESNT_EXIST_SSO_NON_PROVISIONED};throw new Error(`[AccountCreationController] - checkLogin: ${r.message} (${r.code})`)}if(r.ssoServiceProviderUrl)return e.dispatch((0,d.storeSSOSettings)({serviceProviderUrl:r.ssoServiceProviderUrl,isNitroProvider:r.ssoIsNitroProvider})),r.ssoIsNitroProvider?{accountCreationCode:n.AccountCreationCode.USER_NITRO_SSO_PROVISIONED,isUserProposed:r.isProposed,isUserAccepted:r.isAccepted}:((0,f.triggerServiceProviderUrlRedirect)(e.getState(),t),{accountCreationCode:n.AccountCreationCode.USER_SSO_PROVISIONED,isUserProposed:r.isProposed,isUserAccepted:r.isAccepted});switch(r.exists){case y.AccountExistsStatus.AccountExists:return{accountCreationCode:n.AccountCreationCode.USER_EXISTS,isUserProposed:r.isProposed,isUserAccepted:r.isAccepted};case y.AccountExistsStatus.AccountDoesntExistInvalid:return{accountCreationCode:n.AccountCreationCode.USER_DOESNT_EXIST_INVALID_MX,isUserProposed:r.isProposed,isUserAccepted:r.isAccepted};case y.AccountExistsStatus.AccountDoesntExistUnlikely:return{accountCreationCode:n.AccountCreationCode.USER_DOESNT_EXIST_UNLIKELY_MX,isUserProposed:r.isProposed,isUserAccepted:r.isAccepted};case y.AccountExistsStatus.AccountDoesntExist:default:return{accountCreationCode:n.AccountCreationCode.USER_DOESNT_EXIST,isUserProposed:r.isProposed,isUserAccepted:r.isAccepted}}}function v(e,t,r){return Promise.resolve().then((()=>{const n=e.getStore(),o=a.encryptSettings(e,t,r);n.dispatch((0,c.saveAccountSettings)(o));const i=(0,s.makeCryptoService)(),d={cryptoConfig:(0,m.parsePayload)(o.personalSettings.CryptoUserPayload).cryptoConfig,forceSalt:(0,h.base64ToBuffer)(o.personalSettings.CryptoFixedSalt)},p={promise:(0,u.generateRsaKeys)(t,i,d)};e.dispatch((0,c.saveAccountKeys)(p));const f={encryptSettingsRequest:r,valid:!0};return l.sendEncryptSettingsResult(f),f})).catch((e=>{const t=new Error(`[AccountCreation] - encryptSettings: ${e}`);throw g.default.error(t),(0,o.sendExceptionLog)({error:t}),t}))}t.checkLogin=S,t.encryptSettings=v,t.makeAccountCreationController=function(e){return{checkLogin:t=>S(e.storeService,t),createAccount:t=>(e.storeService.dispatch((0,c.accountCreationStarted)({isSSO:!1})),e.sessionService.close().then((()=>{e.masterPasswordEncryptorService.setInstance({raw:t.password},"");const{storeService:r,masterPasswordEncryptorService:n}=e;return v(r,n,t)}))),confirmAccountCreation:t=>function(e,t){return Promise.resolve().then((()=>{const r=e.storeService.getStore().getState().userSession.accountCreation.settings.personalSettings,n=e.storeService.getAccountCreation(),o=n.settings.promise;if(null===o)throw new Error("createAccount should be call before confirmAccountCreation");const a=n.accountKey.promise;if(null===a)throw new Error("createAccount should be call before confirmAccountCreation");return i.createAccount(e,t,o,r,a).then((t=>(l.sendConfirmCreateAccountResult(t),e.storeService.dispatch((0,p.updateIsFirstSessionAfterAccountCreation)()),t)))})).catch((e=>{const t=new Error(`[AccountCreation] - confirmAccountCreation: ${e}`);throw g.default.error(t),(0,o.sendExceptionLog)({error:t}),t}))}(e,t)}}},85591:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(47542);t.config={commands:{},queries:{},liveQueries:{liveAccountCreated:{subject:n.getAccountCreated$}}}},81867:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(85591);t.bootstrap=e=>{e.register(n.config)}},23881:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(81867);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},47542:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emitAccountCreated=t.getAccountCreated$=void 0;const n=new(r(18948).Subject);t.getAccountCreated$=()=>n,t.emitAccountCreated=()=>n.next()},32074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encryptSettings=void 0;const n=r(63713),o=r(75270),a=r(56668),i=r(91301),s=r(16038),c=r(55623),u=r(12706),l=r(95648),d=r(78320),p=r(47408);t.encryptSettings=function(e,t,r){const f=(0,d.generateItemUuid)(),g=(0,p.getUnixTimestamp)(),m=(0,c.getRandomValues)(16),h=e.getState(),y=(0,u.isSSOAccountCreationSelector)(h)?i.CRYPTO_NODERIVATION_HMAC64:a.ARGON2_DEFAULT_PAYLOAD,S={...(0,l.makeBasePersonalSettings)(),AnonymousUserId:r.anonymousUserId,UsagelogToken:f,Format:r.format,Language:r.language,SecurityEmail:r.login,RealLogin:r.login,accountCreationDatetime:g,SyncBackup:!0,CryptoFixedSalt:(0,s.bufferToBase64)(m),CryptoUserPayload:y},v=(0,o.getTransactionXml)(S),E={time:(0,p.getUnixTimestamp)(),backupDate:0,type:"SETTINGS",action:"BACKUP_EDIT",identifier:"SETTINGS_userId",content:v},A={forceSalt:m};return{personalSettings:S,promise:n.encryptSingleTransaction(t,E,A)}}},751:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSSOAccount=t.prepareRemoteDataEncryptionServices=void 0;const n=r(28354),o=r(71703),a=r(39362),i=r(56915),s=r(56668),c=r(16038),u=r(64910),l=r(33769),d=r(69530),p=r(46298),f=r(70252),g=r(61259),m=r(92029),h=r(16356),y=r(43461);t.prepareRemoteDataEncryptionServices=async(e,t)=>{const r=(0,n.v4)(),{remoteDataEncryptorService:o,masterPasswordEncryptorService:a}=e,i=await(0,d.generate64BytesKey)(),p=(0,c.base64BufferToText)(i),f=await(0,d.generate64BytesKey)(),g=(0,c.bufferToBase64)(f),m=(0,c.base64ToBuffer)(t),y=(0,l.getEncryptionKeyBuffer)(m,f,{skipDerivation:!0}),S=(0,c.arrayBufferToText)(y),v=(0,u.getNoDerivationCryptoConfig)();a.setInstance({raw:S},"",v);const E=(0,s.utf16ToDeflatedUtf8)(p,{skipUtf8Encoding:!0,skipDeflate:!0}),A=await a.getInstance().encrypt(E);return o.setInstance({raw:p},"",v),e.storeService.dispatch((0,h.updateRemoteKey)(p)),{remoteKey:{uuid:r,key:A,type:"sso"},serverKeyBase64:g}},t.createSSOAccount=async function(e,r){const{sessionService:n,storeService:s,remoteDataEncryptorService:c}=e,{consents:u,deviceName:l,login:d,ssoServiceProviderKey:f,ssoToken:g,anonymousUserId:v}=r,{appVersion:E,country:A,lang:_,platformName:b}=(0,i.platformInfoSelector)(s.getState());await n.close(),s.dispatch((0,y.accountCreationStarted)({isSSO:!0}));const{remoteKey:T,serverKeyBase64:I}=await(0,t.prepareRemoteDataEncryptionServices)(e,f),w={anonymousUserId:v,deviceName:l,format:A,language:_,login:d,password:f,subscribe:u.find((({consentType:e})=>"emailsOffersAndTips"===e)).status||!1};await(0,o.encryptSettings)(s,c,w);const C=s.getAccountCreation(),{content:O,time:D}=await C.settings.promise,P=await C.accountKey.promise,N=(0,p.makeSafeCountry)(s.getLocation().country||A),R={login:d,contactEmail:d,appVersion:E,sdkVersion:"1.0.0.0",platform:b,settings:{content:O,time:D},consents:u,deviceName:l,country:N,osCountry:N,language:(0,p.makeSafeLanguage)(_),osLanguage:(0,p.makeSafeLanguage)(_),remoteKeys:[T],ssoServerKey:I,ssoToken:g,sharingKeys:{publicKey:P.keys.publicKey,privateKey:P.encryptedPrivateKey},temporaryDevice:!0},U=await(0,p.createUserWithSSO)(s,R);if((0,p.isApiError)(U))return S(U);const L={createAccountResult:{encryptSettingsRequest:w,valid:!0},options:{flowIndicator:"memberAccount"},isStandAlone:!1,consents:u};return await(0,a.firstSync)(e,L,U,{useRemoteKey:!0}),e.storeService.dispatch((0,h.updateAnalyticsIds)(U.userAnalyticsId,U.deviceAnalyticsId)),{success:!0,code:m.LoginViaSsoCode.SUCCESS}};const S=e=>{const{code:t,message:r}=e;switch(v(t),t){case p.DomainNotValidForTeam:case p.InvalidUser:case p.InvalidSsoToken:case p.NotProposedNeitherAccepted:case p.NoFreeSlot:return(0,g.makeReturnErrorObject)(m.LoginViaSsoCode.SSO_VERIFICATION_FAILED,r);default:return(0,g.makeReturnErrorObject)(m.LoginViaSsoCode.UNKNOWN_ERROR,r)}},v=e=>{const t=new Error(`[createSSOAccount] - createUserWithSSO: ${e}`);(0,f.sendExceptionLog)({error:t})}},39362:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.firstSync=t.createAccount=void 0;const n=r(53576),o=r(10203),a=r(25963),i=r(37898),s=r(25576),c=r(88610),u=r(16356),l=r(78320),d=r(1347),p=r(27517),f=r(19399),g=r(58582),m=r(60946),h=r(41007),y=r(17936),S=r(92221),v=r(46298),E=r(92215),A=r(47542),_=r(51064);async function b(e,t,r,u={useRemoteKey:!1}){const p=t.createAccountResult,{login:v}=p.encryptSettingsRequest,A=(0,l.generateItemUuid)(),b=(0,d.getEmptyPersonalDataState)();b.emails.push({AnonId:(0,l.generateItemUuid)(),Email:v,EmailName:"Email 1",Id:A,kwType:"KWEmail",LastBackupTime:0,LocaleFormat:n.Country.UNIVERSAL,SpaceId:"",Type:"PERSO"}),b.changesToUpload.push((0,_.createUploadChange)({action:"EDIT",itemId:A,kwType:"KWEmail"}));const{monitor:T,getSyncEvent:I}=(0,h.makeEventLoggerSyncMonitor)(e.eventLoggerService,{sendLogOnSyncComplete:!1}),w=(0,m.setupProbe)(T,(0,y.makeDiagnosticReportMonitor)(),(0,S.makeSyncLoggerMonitor)()),C={accessKey:r.deviceAccessKey,secretKey:r.deviceSecretKey},O=(0,E.convertDeviceKeysToUki)(C),D=u.useRemoteKey?e.remoteDataEncryptorService:e.masterPasswordEncryptorService,P=Date.now(),N=i.SyncType.FULL_SYNC,R={storeService:e.storeService,dataEncryptorService:D,login:v,uki:O,lastSyncTimestamp:P,personalData:b,syncType:N,needsKeys:!1,ws:e.wsService,announce:w};let U=null;try{w(g.announcements.syncStarted(o.Trigger.AccountCreation,N),g.announcements.chronologicalSyncStarted(b)),U=await(0,a.sync)(R),w(g.announcements.chronologicalSyncFinished(U.summary),g.announcements.syncFinished())}catch(e){throw w(g.announcements.chronologicalSyncFailed(e),g.announcements.syncFailed(e)),e}if(t.isStandAlone){const t=(0,c.makeLoginController)(e);await t.loadAccountCreationInfos(v,p.encryptSettingsRequest.password,(0,f.secureDeviceName)(p.encryptSettingsRequest.deviceName),C,U.lastSyncTimestamp,s.PersistData.PERSIST_DATA_YES),await t.openSession(v,{password:p.encryptSettingsRequest.password})}const L=async function(e,t){return await e.logSync(new o.UserSyncEvent({duration:t.duration,error:t.error,extent:t.extent,fullBackupSize:t.fullBackupSize,incomingDeleteCount:t.incomingDeleteCount,incomingUpdateCount:t.incomingUpdateCount,outgoingDeleteCount:t.outgoingDeleteCount,outgoingUpdateCount:t.outgoingUpdateCount,timestamp:t.timestamp,trigger:t.trigger,treatProblem:t.treatProblem})),e.flushEventQueue()}(e.eventLoggerService,I());t.isStandAlone||await L}t.createAccount=async function(e,t,r,n,o){const a=e.storeService.getPlatform().info;if(!t.createAccountResult.valid)throw new Error("Account creation: Will not perform API request for invalidated settings promise");const[i,s]=await Promise.all([r,o]),c=await async function(e,t,r,n,o,a){const{storeService:i}=e,{createAccountResult:s}=r,c=e.storeService.getABTesting().version;let l=r.consents;Array.isArray(l)||(l=[{consentType:"emailsOffersAndTips",status:s.encryptSettingsRequest.subscribe}]);const d=s.encryptSettingsRequest.login,g={abTestingVersion:c,askM2dToken:!0,country:(0,v.makeSafeCountry)(e.storeService.getLocation().country||t.country),deviceName:(0,v.makeSafeDeviceName)((0,f.secureDeviceName)(s.encryptSettingsRequest.deviceName)),language:(0,v.makeSafeLanguage)(t.lang),login:d,osCountry:(0,v.makeSafeCountry)(t.country),osLanguage:(0,v.makeSafeLanguage)(t.lang),platform:t.platformName,settings:{content:o.content,time:o.time},appVersion:t.appVersion,contactEmail:d,consents:l,sharingKeys:{publicKey:a.keys.publicKey,privateKey:a.encryptedPrivateKey},temporaryDevice:!r.isStandAlone},m=await(0,v.createUser)(i,g);if((0,v.isApiError)(m))throw new Error(`[AccountCreation] - createAccountOnServer : ${m.message} (${m.code})`);return e.storeService.dispatch((0,u.updateKeyPair)({publicKey:a.keys.publicKey,privateKey:a.keys.privateKey})),e.storeService.dispatch((0,p.loadStoredPersonalSettings)(n)),e.storeService.dispatch((0,u.updateAnalyticsIds)(m.userAnalyticsId,m.deviceAnalyticsId)),m}(e,a,t,n,i,s);await b(e,t,c);const l=(0,E.convertDeviceKeysToUki)({accessKey:c.deviceAccessKey,secretKey:c.deviceSecretKey});return t.isStandAlone&&t.createAccountResult.valid&&(0,A.emitAccountCreated)(),{m2dToken:c.token,abtestingversion:c.abTestingVersion,uki:l,origin:c.origin,openSession:t.isStandAlone}},t.firstSync=b},85902:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(22021),o=r(34913);t.config={commands:{},queries:{getSubscriptionCode:{selector:n.subscriptionCodeSelector}},liveQueries:{liveSubscriptionCode:{operator:o.subscriptionCode$}}}},68904:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(85902);t.bootstrap=e=>{e.register(n.config)}},93820:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(68904);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},34913:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptionCode$=void 0;const n=r(18948),o=r(3343),a=r(22021);t.subscriptionCode$=()=>(0,n.pipe)((0,o.map)(a.subscriptionCodeSelector),(0,o.distinctUntilChanged)())},22021:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptionCodeSelector=void 0,t.subscriptionCodeSelector=e=>e.userSession.account.subscriptionCode},65725:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AntiPhishingConfig=void 0;const n=r(48331);t.AntiPhishingConfig={commands:{},queries:{},liveQueries:{livePhishingURLList:{operator:n.antiPhishingURLList$}}}},26404:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateAntiPhishingURLList=t.UPDATE_ANTI_PHISHING_URL_LIST=void 0,t.UPDATE_ANTI_PHISHING_URL_LIST="UPDATE_ANTI_PHISHING_URL_LIST",t.updateAntiPhishingURLList=e=>({type:t.UPDATE_ANTI_PHISHING_URL_LIST,phishingURLList:e})},56666:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(65725);t.bootstrap=e=>{e.register(n.AntiPhishingConfig)}},77820:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REMOTE_PHISHING_FILE=void 0,t.REMOTE_PHISHING_FILE="phishing_urls_test.json"},25560:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(56666);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},48331:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.antiPhishingURLList$=void 0;const n=r(18948),o=r(3343),a=r(68769);t.antiPhishingURLList$=()=>(0,n.pipe)((0,o.map)(a.antiPhishingURLListSelector),(0,o.distinctUntilChanged)())},69018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AntiPhishingReducer=t.getEmptyAntiPhishingState=void 0;const n=r(26404);t.getEmptyAntiPhishingState=()=>new Set([]),t.AntiPhishingReducer=(e=(0,t.getEmptyAntiPhishingState)(),r)=>r.type===n.UPDATE_ANTI_PHISHING_URL_LIST?r.phishingURLList:e},68769:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.antiPhishingURLListSelector=void 0,t.antiPhishingURLListSelector=e=>e.device.antiPhishing},46564:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(85318);t.setupSubscriptions=async function(e,t){e.remoteFileChanged.on((e=>(0,n.triggerUpdatePhishingURLFile)(t,e)))}},85318:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerUpdatePhishingURLFile=void 0;const n=r(70252),o=r(96405),a=r(26404),i=r(77820),s=async e=>{const t=await(0,o.fileContentStrSelector)(e,i.REMOTE_PHISHING_FILE),r=t?JSON.parse(t):[];if(1!==(a=r).fileFormat||!Array.isArray(a.domains)){const e=new Error("[Anti-Phishing]: File format is invalid");return(0,n.sendExceptionLog)(e),null}var a;return{domains:new Set(r.domains),fileFormat:r.fileFormat}};t.triggerUpdatePhishingURLFile=async function(e,t){const{storeService:r}=e,n=r.getState();if(t===i.REMOTE_PHISHING_FILE){const e=await s(n);e&&r.dispatch((0,a.updateAntiPhishingURLList)(e.domains))}}},7036:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connectLazySlot=void 0;const n=r(4939),o=["API","Live"];t.connectLazySlot=(e,t,r=!1)=>{const a=new Map;return e.lazy((i=>{r&&(0,n.logInfo)({message:`${e.slotName} subscribed on param ${i}`,tag:o});const s=t(i),c=((e,t,r,a)=>e?e=>((0,n.logInfo)({message:`Emitting on ${t.slotName} with param ${r}`,tag:o,details:{event:e}}),a(e)):a)(r,e,i,(t=>e(i,t).catch((()=>{})))),u=s.subscribe(c);a.set(i,u)}),(t=>{const i=a.get(t);i?(r&&(0,n.logInfo)({message:`${e.slotName} unsubscribed on param ${t}`,tag:o}),i.unsubscribe(),a.delete(t)):r&&(0,n.logWarn)({message:`Cannot unsubscribe from ${e.slotName} on param ${t}: subscription not found.`,tag:o})}))}},50643:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiEvents=void 0;var n=r(31249);Object.defineProperty(t,"apiEvents",{enumerable:!0,get:function(){return n.apiEvents}})},38250:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(41248),t),o(r(36540),t),o(r(62922),t),o(r(90678),t),o(r(13044),t),o(r(96916),t),o(r(61380),t),o(r(39319),t),o(r(53506),t),o(r(37148),t),o(r(96463),t),o(r(7279),t),o(r(45968),t),o(r(6629),t),o(r(2207),t),o(r(66869),t),o(r(83042),t),o(r(18982),t),o(r(41346),t),o(r(71661),t),o(r(45923),t),o(r(72658),t),o(r(4216),t),o(r(40941),t),o(r(79562),t),o(r(42331),t),o(r(92987),t),o(r(35240),t),o(r(82481),t),o(r(69335),t),o(r(3790),t),o(r(74536),t)},2246:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSyncAppSetting=t.setDataDEBUGONLY=t.decipherApplicationSettings=t.loadAppSettings=t.getCommonAppSettings=t.getCommonAppSetting=t.storeCommonAppSetting=t.getUsersWithPublicSettings=t.deleteUsersPublicSettings=t.getUserPublicSetting=t.storeUserPublicSetting=t.initApplicationSettings=void 0;const n=r(95623),o=r(72365),a=r(56668),i=r(1860),s=r(80722),c=r(2356),u=r(30913),l=r(18216);let d=null,p=null,f=null;function g(){if(!f)throw new Error("ApplicationSettings not initialized");return(0,u.commonApplicationSettingsSelector)(f.getState())||{}}t.initApplicationSettings=function(e,t,r,n){return d=e,p=n&&n.dataEncryptorService||(0,i.makeKeyDataEncryptorService)(),f=t,(0,o.setObfuscatingKey)(p),r===l.InitMode.FirstInit?(n?.settings&&t.dispatch((0,c.storeApplicationSettings)(n.settings)),y()):Promise.resolve()},t.storeUserPublicSetting=function(e,t,r){if(!f)throw new Error("ApplicationSettings not initialized");return f.dispatch((0,c.storeUserPublicSetting)(e,{[t]:r})),h()},t.getUserPublicSetting=function(e,t){if(!f)throw new Error("ApplicationSettings not initialized");const r=(0,u.userPublicSettingsSelector)(f.getState(),e);return r&&r.hasOwnProperty(t)?r[t]:null},t.deleteUsersPublicSettings=async function(e){if(!f)throw new Error("ApplicationSettings not initialized");return f.dispatch((0,c.deleteUserPublicSettings)(e)),h()},t.getUsersWithPublicSettings=function(){if(!f)throw new Error("ApplicationSettings not initialized");return Object.keys((0,u.publicUsersSettingsSelector)(f.getState()))},t.storeCommonAppSetting=function(e,t){return g()[e]=t,h()},t.getCommonAppSetting=function(e){const t=g();return t.hasOwnProperty(e)?(t[e],t[e]):null},t.getCommonAppSettings=g;const m="ApplicationSettings.cdata";function h(){if(!f||!d||!p)throw new Error("ApplicationSettings not initialized");const e=d.getLocalStorage(),t={publicUsersSettings:(0,u.publicUsersSettingsSelector)(f.getState()),commonApplicationSettings:(0,u.commonApplicationSettingsSelector)(f.getState())||{}},r=JSON.stringify(t),n=(0,a.utf16ToDeflatedUtf8)(r);return p.getInstance().encrypt(n).then((t=>e.writeItem(m,t))).then((()=>{}))}function y(){if(!d||!p)throw new Error("ApplicationSettings not initialized");n.default.log("loadApplicationSettings");const e=d.getLocalStorage();return e.itemExists(m).then((t=>(n.default.log("loadApplicationSettings "+t),t?e.readItem(m).then((e=>{if(n.default.log("appSettings read"),n.default.log(e),null==e)throw new Error("storing empty or null value is not authorized");if("string"!=typeof e)throw new Error("value of ApplicationSettings.cdata is expected to be a string");return S(p,e).then((e=>JSON.parse(e))).then((e=>{v(e)}))})):v({publicUsersSettings:{},commonApplicationSettings:{}})))).catch((e=>{n.default.error(e,"loadAppSettings"),v({publicUsersSettings:{},commonApplicationSettings:{}})}))}function S(e,t){return e.getInstance().decrypt(t).then((e=>(0,a.deflatedUtf8ToUtf16)(e))).catch((()=>{const e=(0,o.makeDataEncryptorService)((0,s.makeStoreService)());return(0,o.setObfuscatingKey)(e),e.getInstance().decrypt(t).then((e=>(0,a.deflatedUtf8ToUtf16)(e)))}))}function v(e){if(!f)throw new Error("ApplicationSettings not initialized");n.default.log(`ApplicationSettings loaded for deviceId: ${e.commonApplicationSettings.deviceId}`),f.dispatch((0,c.storeApplicationSettings)(e))}t.loadAppSettings=y,t.decipherApplicationSettings=S,t.setDataDEBUGONLY=function(e){if(!f)throw new Error("ApplicationSettings not initialized");f.dispatch((0,c.storeApplicationSettings)(e))},t.getSyncAppSetting=function(e){const t=function(){if(!f)throw new Error("ApplicationSettings not initialized");return f.getState().device.application.settings.sync}();return t.hasOwnProperty(e)?t[e]:null}},30096:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appSessionIdInitialized=t.APP_SESSION_ID_INITIALIZED=void 0,t.APP_SESSION_ID_INITIALIZED="APP_SESSION_ID_INITIALIZED",t.appSessionIdInitialized=e=>({type:t.APP_SESSION_ID_INITIALIZED,appSessionId:e})},10319:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applicationReducer=t.getEmptyApplicationSessionState=void 0;const n=r(98160),o=r(59600),a=r(30096);t.getEmptyApplicationSessionState=()=>({appSessionId:void 0}),t.applicationReducer=(0,n.combineReducers)({appSession:(e=(0,t.getEmptyApplicationSessionState)(),r)=>r.type===a.APP_SESSION_ID_INITIALIZED?{...e,appSessionId:r.appSessionId}:e,settings:o.default})},28486:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appSessionIdSelector=void 0,t.appSessionIdSelector=e=>e.device.application.appSession.appSessionId},2356:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteUserPublicSettings=t.storeUserPublicSetting=t.storeApplicationSettings=t.DELETE_USER_PUBLIC_SETTINGS=t.STORE_USER_PUBLIC_SETTING=t.STORE_APPLICATION_SETTINGS=void 0,t.STORE_APPLICATION_SETTINGS="STORE_APPLICATION_SETTINGS",t.STORE_USER_PUBLIC_SETTING="STORE_USER_PUBLIC_SETTING",t.DELETE_USER_PUBLIC_SETTINGS="DELETE_USER_PUBLIC_SETTINGS",t.storeApplicationSettings=e=>({type:t.STORE_APPLICATION_SETTINGS,settings:e}),t.storeUserPublicSetting=(e,r)=>({type:t.STORE_USER_PUBLIC_SETTING,login:e,userSettings:r}),t.deleteUserPublicSettings=e=>({type:t.DELETE_USER_PUBLIC_SETTINGS,logins:e})},59600:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyApplicationSettings=t.ApplicationBuildType=void 0;const n=r(2356);!function(e){e.DEV="DEV",e.QA="QA",e.NIGHTLY="NIGHTLY",e.BETA="BETA",e.PRODUCTION="PRODUCTION"}(t.ApplicationBuildType||(t.ApplicationBuildType={})),t.getEmptyApplicationSettings=()=>({sync:{syncWithLocalClients:!1},userABTestNames:[],migratedToSAEX:void 0,desktopLogin:void 0,buildType:void 0,publicUsersSettings:void 0,commonApplicationSettings:void 0}),t.default=(e=(0,t.getEmptyApplicationSettings)(),r)=>{switch(r.type){case n.STORE_APPLICATION_SETTINGS:return{...e,...r.settings||{}};case n.STORE_USER_PUBLIC_SETTING:{const t=r.login,n=e.publicUsersSettings??{},o={...n,[t]:{...n[t]??{},...r.userSettings}};return{...e,publicUsersSettings:o}}case n.DELETE_USER_PUBLIC_SETTINGS:{const t=r.logins,n=Object.keys(e.publicUsersSettings??{}),o=t.filter((e=>n.includes(e.trim())));return 0===o.length||o.forEach((t=>{const r=t.trim();delete e.publicUsersSettings[r]})),{...e}}default:return e}}},30913:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commonApplicationSettingsSelector=t.publicUsersSettingsSelector=t.userPublicSettingsSelector=t.applicationBuildTypeSelector=t.migratedToSAEXSelector=t.abTestsNamesSelector=void 0;const r={};t.abTestsNamesSelector=e=>e.device.application.settings.userABTestNames,t.migratedToSAEXSelector=e=>e.device.application.settings.migratedToSAEX,t.applicationBuildTypeSelector=e=>e.device.application.settings.buildType,t.userPublicSettingsSelector=(e,t)=>e.device.application.settings.publicUsersSettings?.[t],t.publicUsersSettingsSelector=e=>e.device.application.settings.publicUsersSettings??r,t.commonApplicationSettingsSelector=e=>e.device.application.settings.commonApplicationSettings},87855:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensureDeviceId=t.initAuthenticatedCarbonApplication=void 0;const n=r(28354),o=r(2246),a=r(95623),i=r(17338),s=r(33007),c=r(70252),u=r(57366),l=r(86056),d=r(75125),p=r(69530),f=r(16038),g=r(78671),m=r(17644),h=r(18216);async function y(e,t,r,{platformInfo:i,settings:s}){a.default.log("initCarbonApplication"),(0,d.initializeAppSessionId)(e),(0,l.setPlatformInfo)(i),await(0,o.initApplicationSettings)(t,e,r,{settings:s}),await function(){if(!(0,o.getCommonAppSetting)("anonymousComputerId"))return(0,o.storeCommonAppSetting)("anonymousComputerId",(0,n.v4)())}(),await((0,o.getCommonAppSetting)("installationId")?Promise.resolve():(0,o.storeCommonAppSetting)("installationId",(0,n.v4)())),await async function(){if(!(0,o.getCommonAppSetting)("eventLoggerQueueKey")){const e=await(0,p.generate64BytesKey)(),t=(0,f.base64BufferToText)(e);return(0,o.storeCommonAppSetting)("eventLoggerQueueKey",t)}}()}t.default=y,t.initAuthenticatedCarbonApplication=async(e,t,r)=>{r===h.InitMode.FirstInit&&await S(e,t);const{storageService:n,storeService:o}=(0,i.getCoreServices)(t);return await y(o,n,r,e),await v(o,n),t},t.ensureDeviceId=async function(){let e=(0,o.getCommonAppSetting)("deviceId");return e||(await(0,o.storeCommonAppSetting)("deviceId",(0,n.v4)().replace(/-/g,"")),e=(0,o.getCommonAppSetting)("deviceId")),e};const S=async(e,t)=>{try{const r=(0,i.getCoreServices)(t),{storeService:n}=r;e.anonymousPartnerId&&n.dispatch((0,s.loadAnonymousPartnerId)(e.anonymousPartnerId)),await(0,u.initAuthentication)(r,e.keys)}catch(e){const t=new Error(`[Application] - setSdkAuthentication: ${e}`);(0,c.sendExceptionLog)({error:t})}},v=async(e,t)=>{const r=await(0,g.getGlobalExtensionSettings)({storeService:e,storageService:t});e.dispatch((0,m.setGlobalExtensionSettingsState)(r))}},86056:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setPlatformInfo=t.getPlatformInfo=void 0;const n=r(9149);let o=Object.assign({},n.defaultPlatformInfo);t.getPlatformInfo=function(){return o},t.setPlatformInfo=function(e){o=Object.assign({},n.defaultPlatformInfo,e)}},75125:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getApplicationSessionId=t.initializeAppSessionId=void 0;const n=r(96997),o=r(28486),a=r(30096);function i(e){return(0,o.appSessionIdSelector)(e.getState())}t.initializeAppSessionId=function(e){i(e)||function(e,t){e.dispatch((0,a.appSessionIdInitialized)(t))}(e,(0,n.default)())},t.getApplicationSessionId=i},2646:(e,t)=>{"use strict";let r;Object.defineProperty(t,"__esModule",{value:!0}),t.getPublicPath=t.setPublicPath=void 0,t.setPublicPath=e=>{if("string"!=typeof e)throw new Error("[Assets] - setPublicPath: provided public path is not a string.");r=e},t.getPublicPath=()=>{if(!r)throw new Error("[Assets] - getPublicPath: trying to access public path before it was set.");return r}},3158:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(91178),o=r(53325),a=r(81404),i=r(36592),s=r(54622),c=r(21107),u=r(56915),l=r(3914);t.config={commands:{requestExtraDeviceToken:{handler:c.requestExtraDeviceToken},requestEmailToken:{handler:c.requestEmailToken},requestPaymentUpdateAuthenticationToken:{handler:c.requestPaymentUpdateAuthenticationToken},setReactivationStatus:{handler:l.setReactivationStatusHandler},...n.config.commands,...o.config.commands,...a.config.commands,...i.config.commands},queries:{getHasOtp2Type:{selector:u.hasOtp2TypeSelector},getUserOtpType:{selector:u.otpTypeSelector},getLocalAccounts:{selector:u.localAccountsListSelector},getReactivationStatus:{selector:u.reactivationStatusSelector},...n.config.queries,...o.config.queries,...a.config.queries,...i.config.queries},liveQueries:{liveReactivationStatus:{operator:s.reactivationStatus$},...n.config.liveQueries,...o.config.liveQueries,...a.config.liveQueries,...i.config.liveQueries}}},90678:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactivationStatus=void 0;var a=r(52968);Object.defineProperty(t,"ReactivationStatus",{enumerable:!0,get:function(){return a.ReactivationStatus}}),o(r(25997),t),o(r(93928),t),o(r(24929),t),o(r(27686),t),o(r(61217),t)},93553:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isExtraDeviceToken=t.requestExtraDeviceToken=void 0;const n=r(46298);t.requestExtraDeviceToken=async(e,t)=>{if(!e())return{type:"userNotAuthenticated",message:"No authenticated user"};const r=await t();if((0,n.isApiError)(r))return r;const a=r.token;return o(a)};const o=e=>"string"!=typeof e||0===e.length?{type:"invalidExtraDeviceTokenSentByServer",message:"Invalid extra device token sent by server"}:{type:"extraDeviceToken",extraDeviceToken:e};t.isExtraDeviceToken=e=>"extraDeviceToken"===e.type},75226:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalAccounts=void 0;const n=r(2246),o=r(56915),a=r(63739),i=r(61740);t.getLocalAccounts=async function(e,t){const r=(0,n.getUsersWithPublicSettings)(),s={},c=["localSettings","personalData","personalSettings"];return Promise.all(r.map((async r=>{const n=(0,o.getUserDeviceWasRegisteredWithDeviceKeysSelector)(e.getState(),r),i=[...c,...n?["authentication"]:[]],u=(await Promise.all(i.map((e=>(0,a.isDataStored)(t,r,e))))).every((e=>e));s[r]=u}))).then((()=>r.filter((e=>s[e])))).then((e=>{const t=e.map((e=>({login:e,lastLoginTime:(0,n.getUserPublicSetting)(e,"lastSuccessfulLoginTime")||0}))).sort(((e,t)=>{const r=e.lastLoginTime,n=t.lastLoginTime;return r>n?-1:r<n?1:0}))[0];return e.map((e=>({login:e,hasLoginOtp:(0,n.getUserPublicSetting)(e,"otp2")||!1,isLastSuccessfulLogin:t&&t.login===e,rememberMeType:(0,i.getLocalAccountRememberMeType)(e)??void 0,shouldAskMasterPassword:(0,i.shouldAskMasterPassword)(e)}))).sort(((e,t)=>{const r=e.login.toLowerCase(),n=t.login.toLowerCase();return r.localeCompare(n)}))}))}},37864:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTokenForKwUser=void 0;const n=r(46298);t.getTokenForKwUser=async(e,t)=>{const{storeService:r}=e,o=await(0,n.getTokens)(r);if((0,n.isApiError)(o))throw new Error(`Error: ${o.code}`);const{tokens:a}=o,i=a.find((e=>e.login===t));if(!i)throw new Error("Email token not found for "+t);return i.token}},21107:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestPaymentUpdateAuthenticationToken=t.requestEmailToken=t.requestExtraDeviceToken=void 0;var n=r(61336);Object.defineProperty(t,"requestExtraDeviceToken",{enumerable:!0,get:function(){return n.requestExtraDeviceToken}});var o=r(95626);Object.defineProperty(t,"requestEmailToken",{enumerable:!0,get:function(){return o.requestEmailToken}});var a=r(17717);Object.defineProperty(t,"requestPaymentUpdateAuthenticationToken",{enumerable:!0,get:function(){return a.requestPaymentUpdateAuthenticationToken}})},57366:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initAuthentication=void 0;const n=r(95623),o=r(33007),a=r(69763),i=r(46298),s=r(56915),c=r(28445);t.initAuthentication=async(e,t)=>{u(e,t),l(e,t),await(0,a.loadLocalUsersAuthenticationDataFromStorage)(e),await d(e,(0,c.checkOrigin)(self))};const u=(e,t)=>{const{storeService:r}=e;r.dispatch((0,o.saveAppKeys)({accessKey:t.appAccess,secretKey:t.appSecret}))},l=(e,t)=>{const{storeService:r}=e;r.dispatch((0,o.saveStyxKeys)({accessKey:t.styxAccess,secretKey:t.styxSecret}))},d=async(e,t)=>{const{storeService:r}=e;try{const e=(0,s.platformInfoSelector)(r.getState()),n=await(0,i.getRemoteTime)(r,"server_tac"!==e.platformName&&"server_leeloo"!==e.platformName||!t?void 0:{tz:(new Date).getTimezoneOffset().toString()});if((0,i.isApiError)(n))throw n;r.dispatch((0,o.saveDashlaneServerDeltaTimestamp)(n.timestamp))}catch(e){(0,n.logDebug)({tag:["Auth"],message:"Error while calling getRemoteTime",details:{error:e}})}}},14498:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadRememberMeTypeToStore=void 0;const n=r(98226),o=r(61740),a=r(16593);t.loadRememberMeTypeToStore=function(e){const{storeService:t}=e,r=(0,a.userLoginSelector)(t.getState()),i=(0,o.getLocalAccountRememberMeType)(r);i&&t.dispatch((0,n.setRememberMeTypeAction)(i))}},61336:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestExtraDeviceToken=void 0;const n=r(46298),o=r(93553),a=r(16593);t.requestExtraDeviceToken=async e=>{const{storeService:t}=e,r=t.isAuthenticated,i=(0,a.userLoginSelector)(t.getState());if(!i||!r)throw new Error("[Authentication] - requestExtraDeviceToken: User is not authenticated");const s=await(0,o.requestExtraDeviceToken)(r,(()=>(0,n.requestExtraDeviceRegistration)(t,i)));if((0,o.isExtraDeviceToken)(s))return s.extraDeviceToken;throw new Error(s.message)}},17717:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestPaymentUpdateAuthenticationToken=void 0;const n=r(90622),o=r(46298),a=r(16593),i=r(27885),s=r(32924),c=r(1577);t.requestPaymentUpdateAuthenticationToken=async function(e){try{const{storeService:t}=e,r=t.getState(),u=(0,a.userLoginSelector)(r);if(!(0,a.isAuthenticatedSelector)(r))return{success:!1};const l=await(0,s.getAuthenticationTokenForCardUpdate)(t,u,{});if((0,o.isApiError)(l))return{success:!1};const d=(0,i.getCurrentTeamId)(r.userSession.spaceData),p=(0,i.isTeamAdminInCurrentSpace)(r.userSession.spaceData),f={login:u,uki:(0,n.ukiSelector)(r),teamId:d};let g,m={};if(d&&p){const e={name:"teamPlans",version:1};if(g=await(0,c.NewCardToken)(f,e),200!==g.code)return{success:!1};m={customerId:g.content.customerId,tokenId:g.content.tokenId}}let h={};const y={name:"premium",version:3},S=await(0,c.NewCardToken)(f,y);return 200!==S.code?{success:!1}:(h={customerId:S.content.customerId,tokenId:S.content.tokenId},{success:!0,accessKey:l.accessKey,creationDateUnix:l.creationDateUnix,expirationDateUnix:l.expirationDateUnix,secretKey:l.secretKey,livemode:l.livemode,b2bPaymentTokens:m,b2cPaymentTokens:h})}catch(e){return{success:!1}}}},95626:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestEmailToken=void 0;const n=r(57839),o=r(16593);t.requestEmailToken=async function(e){try{const{storeService:t,wsService:r}=e,n=t.getState(),a=(0,o.userLoginSelector)(n);if(!a)throw new Error("[emailToken] - askServerToSendToken: no current authenticated user");await r.authentication.askServerToSendToken({login:a})}catch(e){return{success:!1,error:{code:n.EmailTokenApiError,message:e.message}}}return{success:!0}}},3914:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setReactivationStatusHandler=void 0;const n=r(48990);t.setReactivationStatusHandler=function({storeService:e},{reactivationStatus:t}){return e.dispatch((0,n.reactivationStatusUpdated)(t)),Promise.resolve()}},57839:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmailTokenApiError=void 0,t.EmailTokenApiError="SEND_TOKEN_FAILED"},6231:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.persistUserAuthenticationData=t.loadUserAuthenticationData=void 0;const n=r(56915),o=r(98226),a=r(39408);t.loadUserAuthenticationData=async(e,t)=>{let r;try{const t=e.getInstance();if(!await t.hasAuthenticationData())return Promise.resolve({type:"success"});r=await t.getAuthenticationData()}catch(e){return Promise.resolve({type:"failed",message:a.FailedToReadParseOrValidateAuthenticationData,error:e})}try{t.dispatch((0,o.rehydrateUserAuthenticationData)(r))}catch(e){return Promise.resolve({type:"failed",message:a.FailedToRehydrateAuthenticationData,error:e})}return Promise.resolve({type:"success"})},t.persistUserAuthenticationData=async(e,t)=>{const r=(0,n.userAuthenticationDataSelector)(t.getState()),o=e.getInstance();await o.storeAuthenticationData(r)}},69763:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadLocalUsersAuthenticationDataFromStorage=t.persistLocalUsersAuthenticationData=void 0;const n=r(72365),o=r(50058),a=r(70252),i=r(95623),s=r(92263),c=r(56915),u=r(16038),l=r(1860),d=r(56668),p=r(93513),f="authentication.localusers";t.persistLocalUsersAuthenticationData=async(e,t)=>{try{const r=e.getLocalStorage(),o=(0,l.makeKeyDataEncryptorService)();(0,n.setObfuscatingKey)(o);const a=(0,c.localUsersAuthenticationDataSelector)(t.getState()),i=JSON.stringify(a),s=(0,u.utf8ChunkEncode)(i),g=p.encode(s),m=(0,d.utf16ToDeflatedUtf8)(g,{skipUtf8Encoding:!0}),h=await o.getInstance().encrypt(m);await r.writeItem(f,h)}catch(e){const t="Auth",r=s.CarbonError.fromAnyError(e).addContextInfo(t,"persistLocalUsersAuthenticationData");(0,i.logError)({tag:[t],message:`${r}`,details:{error:e}}),(0,a.sendExceptionLog)({error:r})}},t.loadLocalUsersAuthenticationDataFromStorage=async e=>{try{const{storageService:t,storeService:r}=e,a=t.getLocalStorage(),i=(0,n.makeDataEncryptorService)(r);(0,n.setObfuscatingKey)(i);const s=await a.readItem(f);if(!s)return;if("string"!=typeof s)throw new Error("value of authentication.localusers is expected to be a string");const c=await i.getInstance().decrypt(s),l=(0,d.deflatedUtf8ToUtf16)(c,{skipUtf8Decoding:!0}),g=p.decode(l);let m=g;try{m=(0,u.utf8ChunkDecode)(g)}catch(e){}const h=JSON.parse(m);r.dispatch((0,o.loadLocalUsersAuthenticationData)(h))}catch(e){const t="Auth",r=s.CarbonError.fromAnyError(e).addContextInfo(t,"loadLocalUsersAuthenticationDataFromStorage");(0,i.logError)({tag:[t],message:`${r}`,details:{error:e}}),(0,a.sendExceptionLog)({error:r})}}},39408:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLoadAuthenticationSuccess=t.FailedToRehydrateAuthenticationData=t.FailedToReadParseOrValidateAuthenticationData=void 0,t.FailedToReadParseOrValidateAuthenticationData="Failed to read, parse or validate persisted data",t.FailedToRehydrateAuthenticationData="Failed to rehydrate",t.isLoadAuthenticationSuccess=e=>"object"==typeof e&&"success"===e.type},43739:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deviceRegistered=t.makeDeviceRegistrationKeys=t.makeLegacyDeviceRegistrationKey=t.DEVICE_REGISTERED=void 0,t.DEVICE_REGISTERED="DEVICE_REGISTERED",t.makeLegacyDeviceRegistrationKey=e=>({type:"uki",uki:e}),t.makeDeviceRegistrationKeys=(e,t)=>({type:"deviceKeys",deviceAccessKey:e,deviceSecretKey:t}),t.deviceRegistered=(e,r,n)=>({type:t.DEVICE_REGISTERED,registrationType:e,persistData:r,login:n})},98226:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRememberMeTypeAction=t.rehydrateUserAuthenticationData=t.SET_REMEMBER_ME_TYPE=t.REHYDRATE_USER_AUTHENTICATION_DATA=void 0,t.REHYDRATE_USER_AUTHENTICATION_DATA="REHYDRATE_USER_AUTHENTICATION_DATA",t.SET_REMEMBER_ME_TYPE="SET_REMEMBER_ME_TYPE",t.rehydrateUserAuthenticationData=e=>({type:t.REHYDRATE_USER_AUTHENTICATION_DATA,data:e}),t.setRememberMeTypeAction=e=>({type:t.SET_REMEMBER_ME_TYPE,rememberMeType:e})},99932:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyCurrentUserAuthentication=t.currentUserAuthenticationReducer=void 0;const n=r(48313),o=r(98226),a=r(43739);t.currentUserAuthenticationReducer=(e=(0,t.getEmptyCurrentUserAuthentication)(),r)=>{switch(r.type){case n.CLOSE_SESSION:return(0,t.getEmptyCurrentUserAuthentication)();case a.DEVICE_REGISTERED:if("deviceKeys"===r.registrationType.type){const{deviceAccessKey:t,deviceSecretKey:n}=r.registrationType;return{...e,deviceKeys:{accessKey:t,secretKey:n}}}return e;case o.REHYDRATE_USER_AUTHENTICATION_DATA:return{...e,...r.data};case o.SET_REMEMBER_ME_TYPE:return{...e,rememberMeType:r.rememberMeType};default:return e}},t.getEmptyCurrentUserAuthentication=()=>({deviceKeys:null,rememberMeType:null})},52653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authenticationReducer=t.updateLocalUserInfo=t.makeDeviceRegistrationKeys=t.makeLegacyDeviceRegistrationKey=t.deviceRegistered=void 0;var n=r(43739);Object.defineProperty(t,"deviceRegistered",{enumerable:!0,get:function(){return n.deviceRegistered}}),Object.defineProperty(t,"makeLegacyDeviceRegistrationKey",{enumerable:!0,get:function(){return n.makeLegacyDeviceRegistrationKey}}),Object.defineProperty(t,"makeDeviceRegistrationKeys",{enumerable:!0,get:function(){return n.makeDeviceRegistrationKeys}});var o=r(50058);Object.defineProperty(t,"updateLocalUserInfo",{enumerable:!0,get:function(){return o.updateLocalUserInfo}});var a=r(57334);Object.defineProperty(t,"authenticationReducer",{enumerable:!0,get:function(){return a.authenticationReducer}})},48990:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reactivationStatusUpdated=t.localAccountsListUpdated=void 0;const n=r(52968);t.localAccountsListUpdated=e=>({type:n.LOCAL_ACCOUNTS_LIST_UPDATED,localAccounts:e}),t.reactivationStatusUpdated=e=>({type:n.REACTIVATION_STATUS_UPDATED,reactivationStatus:e})},83803:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.localAccountsAuthenticationReducer=t.getEmptyLocalAccountsAuthenticationState=void 0;const n=r(52968);t.getEmptyLocalAccountsAuthenticationState=()=>({accountsList:[],accountsListInitialized:!1,reactivationStatus:n.ReactivationStatus.CLASSIC}),t.localAccountsAuthenticationReducer=(e=(0,t.getEmptyLocalAccountsAuthenticationState)(),r)=>{switch(r.type){case n.LOCAL_ACCOUNTS_LIST_UPDATED:return{...e,accountsList:r.localAccounts,accountsListInitialized:!0};case n.REACTIVATION_STATUS_UPDATED:return{...e,reactivationStatus:r.reactivationStatus};default:return e}}},52968:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REACTIVATION_STATUS_UPDATED=t.LOCAL_ACCOUNTS_LIST_UPDATED=t.ReactivationStatus=void 0,function(e){e.DISABLED="DISABLED",e.CLASSIC="CLASSIC",e.WEBAUTHN="WEBAUTHN"}(t.ReactivationStatus||(t.ReactivationStatus={})),t.LOCAL_ACCOUNTS_LIST_UPDATED="LOCAL_ACCOUNTS_LIST_UPDATED",t.REACTIVATION_STATUS_UPDATED="REACTIVATION_STATUS_UPDATED"},50058:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLocalUserAuthenticationAction=t.updateLocalUserInfo=t.loadLocalUsersAuthenticationData=t.UPDATE_LOCAL_USER_INFO=t.LOAD_LOCAL_USERS_AUTH_DATA_FROM_STORAGE=void 0;const n=r(43739);t.LOAD_LOCAL_USERS_AUTH_DATA_FROM_STORAGE="LOAD_LOCAL_USERS_AUTH_DATA_FROM_STORAGE",t.UPDATE_LOCAL_USER_INFO="UPDATE_LOCAL_USER_INFO",t.loadLocalUsersAuthenticationData=e=>({type:t.LOAD_LOCAL_USERS_AUTH_DATA_FROM_STORAGE,data:e}),t.updateLocalUserInfo=(e,r)=>({type:t.UPDATE_LOCAL_USER_INFO,login:e,data:r}),t.isLocalUserAuthenticationAction=e=>e.type===n.DEVICE_REGISTERED},76156:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyLocalUsersAuthentication=t.localUsersAuthenticationReducer=void 0;const n=r(16516),o=r(50058),a=r(43739),i=r(17825);t.localUsersAuthenticationReducer=(e=(0,t.getEmptyLocalUsersAuthentication)(),r)=>{if((0,o.isLocalUserAuthenticationAction)(r)){const t=s(e[r.login],r);return t?{...e,[r.login]:t}:(0,n.omit)([r.login],e)}switch(r.type){case o.LOAD_LOCAL_USERS_AUTH_DATA_FROM_STORAGE:return{...e,...r.data};case o.UPDATE_LOCAL_USER_INFO:const t=c();return{...e,[r.login]:{...t,...e[r.login],...r.data}};default:return e}},t.getEmptyLocalUsersAuthentication=()=>({});const s=(e,t)=>{const r=e||c();if(t.type!==a.DEVICE_REGISTERED)return e;{const{registrationType:e}=t;switch(e.type){case"deviceKeys":{const{deviceAccessKey:t}=e;return{...r,deviceAccessKey:t,deviceRegisteredWithLegacyKey:!1}}case"uki":return{...r,deviceRegisteredWithLegacyKey:!0};default:(0,i.assertUnreachable)(e)}}},c=()=>({deviceAccessKey:null,deviceRegisteredWithLegacyKey:!1,ssoActivatedUser:!1})},57334:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authenticationReducer=t.getEmptyAuthenticationState=void 0;const n=r(98160),o=r(99932),a=r(83803),i=r(76156),s=r(82677),c=r(96171),u=r(88272);t.getEmptyAuthenticationState=()=>({currentUser:(0,o.getEmptyCurrentUserAuthentication)(),localAccounts:(0,a.getEmptyLocalAccountsAuthenticationState)(),localUsers:(0,i.getEmptyLocalUsersAuthentication)(),u2f:(0,s.getEmptyU2FAuthenticationState)(),webAuthnAuthentication:(0,u.getEmptyWebAuthnAuthentication)(),twoFactorAuthentication:(0,c.getEmptyTwoFactorAuthenticationState)()}),t.authenticationReducer=(0,n.combineReducers)({currentUser:o.currentUserAuthenticationReducer,localAccounts:a.localAccountsAuthenticationReducer,localUsers:i.localUsersAuthenticationReducer,u2f:s.u2fAuthenticationReducer,webAuthnAuthentication:u.webAuthnAuthenticationReducer,twoFactorAuthentication:c.TwoFactorAuthenticationReducer})},72355:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.u2fDevicesUpdated=t.U2F_DEVICES_UPDATED=void 0,t.U2F_DEVICES_UPDATED="U2F_DEVICES_UPDATED",t.u2fDevicesUpdated=e=>({type:t.U2F_DEVICES_UPDATED,devices:e})},82677:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.u2fAuthenticationReducer=t.getEmptyU2FAuthenticationState=void 0;const n=r(72355);t.getEmptyU2FAuthenticationState=()=>({u2fDevices:[]}),t.u2fAuthenticationReducer=(e=(0,t.getEmptyU2FAuthenticationState)(),r)=>r.type===n.U2F_DEVICES_UPDATED?{...e,u2fDevices:r.devices}:e},8246:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webAuthnAvailableAuthenticatorsListUpdated=t.webAuthnAuthenticatorsListUpdated=t.webAuthnAuthenticatorRemoved=t.webAuthnAuthenticatorAdded=t.webAuthnUserIdUpdated=t.WEBAUTHN_AVAILABLE_AUTHENTICATORS_LIST_UPDATED=t.WEBAUTHN_AUTHENTICATORS_LIST_UPDATED=t.WEBAUTHN_AUTHENTICATOR_REMOVED=t.WEBAUTHN_AUTHENTICATOR_ADDED=t.WEBAUTHN_USERID_UPDATED=void 0,t.WEBAUTHN_USERID_UPDATED="WEBAUTHN_USERID_UPDATED",t.WEBAUTHN_AUTHENTICATOR_ADDED="WEBAUTHN_AUTHENTICATOR_ADDED",t.WEBAUTHN_AUTHENTICATOR_REMOVED="WEBAUTHN_AUTHENTICATOR_REMOVED",t.WEBAUTHN_AUTHENTICATORS_LIST_UPDATED="WEBAUTHN_AUTHENTICATORS_LIST_UPDATED",t.WEBAUTHN_AVAILABLE_AUTHENTICATORS_LIST_UPDATED="WEBAUTHN_AVAILABLE_AUTHENTICATORS_LIST_UPDATED",t.webAuthnUserIdUpdated=e=>({type:t.WEBAUTHN_USERID_UPDATED,webAuthnUserId:e}),t.webAuthnAuthenticatorAdded=e=>({type:t.WEBAUTHN_AUTHENTICATOR_ADDED,authenticator:e}),t.webAuthnAuthenticatorRemoved=e=>({type:t.WEBAUTHN_AUTHENTICATOR_REMOVED,credentialId:e}),t.webAuthnAuthenticatorsListUpdated=e=>({type:t.WEBAUTHN_AUTHENTICATORS_LIST_UPDATED,authenticatorsList:e}),t.webAuthnAvailableAuthenticatorsListUpdated=e=>({type:t.WEBAUTHN_AVAILABLE_AUTHENTICATORS_LIST_UPDATED,availableAuthenticatorsList:e})},88272:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webAuthnAuthenticationReducer=t.getEmptyWebAuthnAuthentication=void 0;const n=r(8246);t.getEmptyWebAuthnAuthentication=()=>({webAuthnUserId:null,authenticators:[]}),t.webAuthnAuthenticationReducer=(e=(0,t.getEmptyWebAuthnAuthentication)(),r)=>{switch(r.type){case n.WEBAUTHN_USERID_UPDATED:return{...e,webAuthnUserId:r.webAuthnUserId};case n.WEBAUTHN_AUTHENTICATOR_ADDED:return{...e,authenticators:[...e.authenticators,r.authenticator]};case n.WEBAUTHN_AUTHENTICATOR_REMOVED:{const t=e.authenticators.filter((e=>e.credentialId!==r.credentialId));return{...e,authenticators:t}}case n.WEBAUTHN_AUTHENTICATORS_LIST_UPDATED:return{...e,authenticators:r.authenticatorsList};case n.WEBAUTHN_AVAILABLE_AUTHENTICATORS_LIST_UPDATED:{const t=r.availableAuthenticatorsList.map((e=>e.credentialId)),n=e.authenticators.map((e=>t.includes(e.credentialId)?{...e,canOpenSession:!0}:{...e,canOpenSession:!1}));return{...e,authenticators:n}}default:return e}}},36592:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(43037),o=r(5689),a=r(24797),i=r(87463);t.config={commands:{refreshTwoFactorAuthenticationInfo:{handler:a.refreshTwoFactorAuthenticationInfoHandler},...i.config.commands},queries:{getTwoFactorAuthenticationInfo:{selector:o.twoFactorAuthenticationInfoSelector},...i.config.queries},liveQueries:{liveTwoFactorAuthenticationInfo:{operator:n.twoFactorAuthenticationInfo$},...i.config.liveQueries}}},27686:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationErrorCode=t.TwoFactorAuthenticationInfoRequestStatus=t.TwoFactorAuthenticationType=void 0;var n=r(42290);Object.defineProperty(t,"TwoFactorAuthenticationType",{enumerable:!0,get:function(){return n.TwoFactorAuthenticationType}}),Object.defineProperty(t,"TwoFactorAuthenticationInfoRequestStatus",{enumerable:!0,get:function(){return n.TwoFactorAuthenticationInfoRequestStatus}}),function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR"}(t.TwoFactorAuthenticationErrorCode||(t.TwoFactorAuthenticationErrorCode={}))},81404:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(54120),o=r(18099),a=r(95475);t.config={commands:{startTwoFactorAuthenticationDisableFlow:{handler:n.startTwoFactorAuthenticationDisableFlow},continueTwoFactorAuthenticationDisableFlow:{handler:n.continueTwoFactorAuthenticationDisableFlow},backTwoFactorAuthenticationDisableFlow:{handler:n.backTwoFactorAuthenticationDisableFlow},stopTwoFactorAuthenticationDisableFlow:{handler:n.stopTwoFactorAuthenticationDisableFlow}},queries:{getTwoFactorAuthenticationDisableStage:{selector:o.getTwoFactorAuthenticationDisableStageData}},liveQueries:{liveTwoFactorAuthenticationDisableStage:{operator:a.twoFactorAuthenticationDisableFlow$}}}},24929:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationDisableStages=void 0;var n=r(87632);Object.defineProperty(t,"TwoFactorAuthenticationDisableStages",{enumerable:!0,get:function(){return n.TwoFactorAuthenticationDisableStages}})},44787:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stopTwoFactorAuthenticationStage=t.updateTwoFactorAuthenticationStage=void 0;const n=r(4478);t.updateTwoFactorAuthenticationStage=e=>({type:n.UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE,data:e}),t.stopTwoFactorAuthenticationStage=()=>({type:n.UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE,data:{stage:void 0}})},4478:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STOP_TWO_FACTOR_AUTHENTICATION_DISABLE_FLOW=t.UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE=void 0,t.UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE="UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE",t.STOP_TWO_FACTOR_AUTHENTICATION_DISABLE_FLOW="STOP_TWO_FACTOR_AUTHENTICATION_DISABLE_FLOW"},51554:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationDisableFlow=t.stopTwoFactorAuthenticationStage=t.updateTwoFactorAuthenticationStage=void 0;var n=r(44787);Object.defineProperty(t,"updateTwoFactorAuthenticationStage",{enumerable:!0,get:function(){return n.updateTwoFactorAuthenticationStage}}),Object.defineProperty(t,"stopTwoFactorAuthenticationStage",{enumerable:!0,get:function(){return n.stopTwoFactorAuthenticationStage}});var o=r(98259);Object.defineProperty(t,"twoFactorAuthenticationDisableFlow",{enumerable:!0,get:function(){return o.twoFactorAuthenticationDisableFlow}})},98259:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationDisableFlow=t.getEmptyTwoFactorAuthenticationDisable=void 0;const n=r(4478);t.getEmptyTwoFactorAuthenticationDisable=()=>({stage:void 0}),t.twoFactorAuthenticationDisableFlow=(e=(0,t.getEmptyTwoFactorAuthenticationDisable)(),r)=>r.type===n.UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE?{...e,...r.data}:e},18099:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTwoFactorAuthenticationDisableFlowData=t.getTwoFactorAuthenticationDisableStageData=void 0;const n=r(46474);t.getTwoFactorAuthenticationDisableStageData=e=>{const{stage:t}=e.userSession.twoFactorAuthenticationDisableFlow,r=n.TwoFactorAuthenticationDisableFlowConfig?.[t]?.viewMapper;return{stage:t,viewData:r?r(e):void 0}},t.getTwoFactorAuthenticationDisableFlowData=e=>{const{flowData:t}=e.userSession.twoFactorAuthenticationDisableFlow;return t}},46474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationDisableFlowStages=t.TwoFactorAuthenticationDisableFlowConfig=void 0;const n=r(87632),o=r(73714),a=r(24216),i=r(18747),s=r(46796);t.TwoFactorAuthenticationDisableFlowConfig={start:{storeMapper:o.startTwoFactorAuthenticationDisableStoreMapper},stop:{currentHandler:s.endTwoFactorAuthenticationHandler,storeMapper:o.endTwoFactorAuthenticationDisableStoreMapper},end:{currentHandler:s.endTwoFactorAuthenticationHandler,storeMapper:o.endTwoFactorAuthenticationDisableStoreMapper},[n.TwoFactorAuthenticationDisableStages.AUTHENTICATION_CODE]:{currentHandler:a.disableTwoFactorAuthenticationCodeHandler,viewMapper:i.disableTwoFactorAuthenticationCodeViewMapper},[n.TwoFactorAuthenticationDisableStages.BACKUP_CODE]:{currentHandler:a.disableTwoFactorAuthenticationCodeHandler,viewMapper:i.disableTwoFactorAuthenticationBackupCodeViewMapper},[n.TwoFactorAuthenticationDisableStages.LOGOUT_REQUIRED]:{currentHandler:a.disableTwoFactorAuthenticationLogoutRequiredHandler}},t.TwoFactorAuthenticationDisableFlowStages=[{stage:n.TwoFactorAuthenticationDisableStages.CONFIRMATION},{stage:n.TwoFactorAuthenticationDisableStages.AUTHENTICATION_CODE},{stage:n.TwoFactorAuthenticationDisableStages.FINALIZING_CHANGES},{stage:n.TwoFactorAuthenticationDisableStages.SUCCESS}]},54120:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.backTwoFactorAuthenticationDisableFlow=t.continueTwoFactorAuthenticationDisableFlow=t.stopTwoFactorAuthenticationDisableFlow=t.startTwoFactorAuthenticationDisableFlow=void 0;const n=r(46474),o=r(51554),a=e=>{const{stage:t}=e.getState().userSession.twoFactorAuthenticationDisableFlow;return{currentIndex:n.TwoFactorAuthenticationDisableFlowStages.findIndex((e=>e.stage===t)),currentStage:t}};t.startTwoFactorAuthenticationDisableFlow=({storeService:e})=>{const{storeMapper:t}=n.TwoFactorAuthenticationDisableFlowConfig.start,r=t?t(e):void 0,a=(0,o.updateTwoFactorAuthenticationStage)({...r,stage:n.TwoFactorAuthenticationDisableFlowStages[0].stage});return e.dispatch(a),Promise.resolve({success:!0})},t.stopTwoFactorAuthenticationDisableFlow=e=>{const{storeService:t}=e;t.dispatch((0,o.stopTwoFactorAuthenticationStage)());const{currentHandler:r,storeMapper:a}=n.TwoFactorAuthenticationDisableFlowConfig.stop,i=a?a(t):void 0;return r?r(e,i):Promise.resolve({success:!0})};const i=(e,t,r,n)=>{const{storeService:o}=e;return t(e,r?r(o):void 0,n)},s=({storeService:e},t)=>{const{currentIndex:r}=a(e);if(r!==n.TwoFactorAuthenticationDisableFlowStages.length-1){const a=(0,o.updateTwoFactorAuthenticationStage)({...t,stage:n.TwoFactorAuthenticationDisableFlowStages[r+1].stage});e.dispatch(a)}return Promise.resolve({success:!0})},c=({storeService:e},t)=>{const{currentIndex:r}=a(e);if(0!==r){const a=(0,o.updateTwoFactorAuthenticationStage)({...t,stage:n.TwoFactorAuthenticationDisableFlowStages[r-1].stage});e.dispatch(a)}return Promise.resolve({success:!0})},u=e=>{const{currentStage:t}=a(e);let r,o=s,i=c;if(n.TwoFactorAuthenticationDisableFlowConfig[t]){const e=n.TwoFactorAuthenticationDisableFlowConfig[t];i=e.backHandler||i,o=e.currentHandler||o,r=e.storeMapper}return{currentHandler:o,backHandler:i,storeMapper:r}};t.continueTwoFactorAuthenticationDisableFlow=(e,t)=>{const{storeService:r}=e,{currentHandler:n,storeMapper:o}=u(r);return i(e,n,o,t)},t.backTwoFactorAuthenticationDisableFlow=(e,t)=>{const{storeService:r}=e,{backHandler:n,storeMapper:o}=u(r);return i(e,n,o,t)}},95475:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationDisableFlow$=void 0;const n=r(18948),o=r(3343),a=r(18099);t.twoFactorAuthenticationDisableFlow$=()=>(0,n.pipe)((0,o.map)(a.getTwoFactorAuthenticationDisableStageData),(0,o.distinctUntilChanged)())},24216:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableTwoFactorAuthenticationLogoutRequiredHandler=t.disableTwoFactorAuthenticationCodeHandler=void 0;const n=r(51554),o=r(25576),a=r(87632),i=r(46796),s=r(5689),c=r(27686),u=r(71291),l=r(42290),d=r(18099),p=r(16593),f=r(1965),g={[c.TwoFactorAuthenticationType.DEVICE_REGISTRATION]:{handler:i.disableTwoFactorAuthenticationTOTP1Handler,showLoading:!1},[c.TwoFactorAuthenticationType.LOGIN]:{handler:i.disableTwoFactorAuthenticationTOTP2Handler,showLoading:!0}};t.disableTwoFactorAuthenticationCodeHandler=async(e,t,r)=>{const c=r.target;if(c){const{storeService:r}=e,o=(0,n.updateTwoFactorAuthenticationStage)({...t,stage:c,stageData:void 0});return r.dispatch(o),{success:!0}}return await(async(e,t,r)=>{const{storeService:c}=e,p=e=>{const t=(0,n.updateTwoFactorAuthenticationStage)({...e});c.dispatch(t)};try{const f=(0,d.getTwoFactorAuthenticationDisableFlowData)(c.getState()),m=(0,s.twoFactorAuthenticationInfoSelector)(c.getState());if(m.status===l.TwoFactorAuthenticationInfoRequestStatus.READY){const{type:s}=m,{authenticationCode:l}=r,d=await(0,u.performTotpVerificationService)(e,l);if(d.success){const{authTicket:r}=d;if(g[s]){const{handler:o,showLoading:u}=g[s];u&&p({...t,stage:a.TwoFactorAuthenticationDisableStages.FINALIZING_CHANGES});const l=await o(e,r);if(l.success)if(l.logoutRequired){const e={...f,logoutRequired:l.logoutRequired};p({...t,stage:a.TwoFactorAuthenticationDisableStages.LOGOUT_REQUIRED,flowData:e})}else await(0,i.refreshTwoFactorAuthenticationInfoHandler)(e),p({...t,stage:a.TwoFactorAuthenticationDisableStages.SUCCESS}),c.dispatch((0,n.stopTwoFactorAuthenticationStage)());else p({...t,stage:a.TwoFactorAuthenticationDisableStages.GENERIC_ERROR,stageData:{...l}})}else p({...t,stage:a.TwoFactorAuthenticationDisableStages.GENERIC_ERROR,stageData:{success:!1,error:{code:o.AuthenticationCode.UNEXPECTED_OTP_TYPE}}})}else p({...t,stageData:d})}else p({...t,stage:a.TwoFactorAuthenticationDisableStages.GENERIC_ERROR,stageData:{success:!1,error:{code:o.AuthenticationCode.UNKNOWN_ERROR}}})}catch(e){p({...t,stageData:{success:!1,error:{code:o.AuthenticationCode.UNKNOWN_ERROR}}})}return{success:!0}})(e,t,r)},t.disableTwoFactorAuthenticationLogoutRequiredHandler=async e=>{const{storeService:t,storageService:r,sessionService:o,applicationModulesAccess:a}=e,i=(0,p.userLoginSelector)(t.getState());return t.dispatch((0,n.stopTwoFactorAuthenticationStage)()),i&&await(0,f.wipeOutLocalAccounts)(r,a,[i]),await o.close(),{success:!0}}},73714:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.endTwoFactorAuthenticationDisableStoreMapper=t.startTwoFactorAuthenticationDisableStoreMapper=void 0;const n=r(56915);t.startTwoFactorAuthenticationDisableStoreMapper=e=>{const t=e.getState();return{stage:void 0,stageData:void 0,flowData:{otpType:(0,n.otpTypeSelector)(t)}}},t.endTwoFactorAuthenticationDisableStoreMapper=()=>({stage:void 0,stageData:void 0,flowData:void 0})},87632:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationDisableStages=void 0,function(e){e.CONFIRMATION="CONFIRMATION",e.AUTHENTICATION_CODE="AUTHENTICATION_CODE",e.BACKUP_CODE="BACKUP_CODE",e.FINALIZING_CHANGES="FINALIZING_CHANGES",e.SUCCESS="SUCCESS",e.LOGOUT_REQUIRED="LOGOUT_REQUIRED",e.GENERIC_ERROR="GENERIC_ERROR"}(t.TwoFactorAuthenticationDisableStages||(t.TwoFactorAuthenticationDisableStages={}))},18747:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableTwoFactorAuthenticationBackupCodeViewMapper=t.disableTwoFactorAuthenticationCodeViewMapper=void 0;const n=r(25576);t.disableTwoFactorAuthenticationCodeViewMapper=e=>{const{stageData:t}=e.userSession.twoFactorAuthenticationDisableFlow;if(t&&!t.success){const{error:e}=t;return{success:!1,error:e}}},t.disableTwoFactorAuthenticationBackupCodeViewMapper=e=>{const{stageData:t}=e.userSession.twoFactorAuthenticationDisableFlow;if(t&&!t.success){const{error:e}=t;return e.code===n.AuthenticationCode.OTP_NOT_VALID?{success:!1,error:{code:n.AuthenticationCode.BACKUP_CODE_NOT_VALID}}:{success:!1,error:e}}}},53325:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(17303),o=r(69631),a=r(66574);t.config={commands:{startTwoFactorAuthenticationEnableFlow:{handler:n.startTwoFactorAuthenticationEnableFlow},continueTwoFactorAuthenticationEnableFlow:{handler:n.continueTwoFactorAuthenticationEnableFlow},backTwoFactorAuthenticationEnableFlow:{handler:n.backTwoFactorAuthenticationEnableFlow},stopTwoFactorAuthenticationEnableFlow:{handler:n.stopTwoFactorAuthenticationEnableFlow}},queries:{getTwoFactorAuthenticationEnableStage:{selector:o.getTwoFactorAuthenticationEnableStageData}},liveQueries:{liveTwoFactorAuthenticationEnableStage:{operator:a.twoFactorAuthenticationEnableFlow$}}}},93928:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationEnableStages=void 0;var n=r(15179);Object.defineProperty(t,"TwoFactorAuthenticationEnableStages",{enumerable:!0,get:function(){return n.TwoFactorAuthenticationEnableStages}})},44527:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationBackupCodesHandler=void 0;const n=r(15441),o=r(69631),a=r(15179);t.enableTwoFactorAuthenticationBackupCodesHandler=async(e,t)=>{const{storeService:r}=e,i=(0,o.getTwoFactorAuthenticationEnableFlowData)(r.getState());return(0,n.updateStore)(e,{...t,stage:i.logoutRequired?a.TwoFactorAuthenticationEnableStages.LOGOUT_REQUIRED:a.TwoFactorAuthenticationEnableStages.SUCCESS}),{success:!0}}},72387:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationBackupPhoneHandler=void 0;const n=r(46298),o=r(15441),a=r(69631),i=r(15179),s=r(71291),c=r(38250);t.enableTwoFactorAuthenticationBackupPhoneHandler=async(e,t,r)=>{const{storeService:u}=e;let l=(0,a.getTwoFactorAuthenticationEnableFlowData)(u.getState());const d=await(0,s.requestTOTPActivationService)(e,{...r,country:(0,n.makeSafeCountry)(r.countryCode)});if(d.success){const{seed:n,uri:a,recoveryKeys:s,serverKey:u}=d,{authenticationType:p}=l;p===c.TwoFactorAuthenticationType.LOGIN&&(l[c.TwoFactorAuthenticationType.LOGIN].serverKey=u),l={...l,seed:n,uri:a,recoveryKeys:s},(0,o.updateStore)(e,{...t,stageData:{...d},flowData:{...l,savedValues:{...l?.savedValues,savedCountryCode:r.countryCode,savedPhoneNumber:r.phoneNumber}},stage:i.TwoFactorAuthenticationEnableStages.QR_CODE})}else(0,o.updateStore)(e,{...t,stageData:{...d}});return Promise.resolve({success:!0})}},14732:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationCodeHandler=void 0;const n=r(25576),o=r(15441),a=r(15179),i=r(38250),s=r(69631),c=r(86370),u=r(52284),l=r(46796),d=r(71291),p={[i.TwoFactorAuthenticationType.DEVICE_REGISTRATION]:{handler:c.enableTwoFactorAuthenticationTOTP1Handler,showLoading:!1},[i.TwoFactorAuthenticationType.LOGIN]:{handler:u.enableTwoFactorAuthenticationTOTP2Handler,showLoading:!0,errorStage:a.TwoFactorAuthenticationEnableStages.GENERIC_ERROR}};t.enableTwoFactorAuthenticationCodeHandler=async(e,t,{authenticationCode:r})=>{const{storeService:i}=e;try{const n=(0,s.getTwoFactorAuthenticationEnableFlowData)(i.getState()),{authenticationType:c}=n,u=await(0,d.performTotpVerificationService)(e,r,!0);if(!u.success)return(0,o.updateStore)(e,{...t,stageData:u}),{success:!1};if(p[c]){const{authTicket:r}=u,i=n[c],{handler:s,showLoading:d,errorStage:f}=p[c];d&&(0,o.updateStore)(e,{...t,stage:a.TwoFactorAuthenticationEnableStages.FINALIZING_CHANGES});const g=await s(e,r,i);if(g.success){g.logoutRequired||await(0,l.refreshTwoFactorAuthenticationInfoHandler)(e);const r={...n,logoutRequired:g.logoutRequired};(0,o.updateStore)(e,{...t,stage:a.TwoFactorAuthenticationEnableStages.BACKUP_CODES,flowData:r})}else(0,o.updateStore)(e,{...t,stage:f?a.TwoFactorAuthenticationEnableStages.GENERIC_ERROR:a.TwoFactorAuthenticationEnableStages.AUTHENTICATION_CODE,stageData:{...g}})}else(0,o.updateStore)(e,{...t,stage:a.TwoFactorAuthenticationEnableStages.GENERIC_ERROR,stageData:{success:!1}});return{success:!0}}catch(r){return(0,o.updateStore)(e,{...t,stageData:{success:!1,error:{code:n.AuthenticationCode.UNKNOWN_ERROR}}}),{success:!1}}}},68513:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationLogoutRequiredHandler=void 0;const n=r(16593),o=r(1965),a=r(19546);t.enableTwoFactorAuthenticationLogoutRequiredHandler=async e=>{const{storeService:t,storageService:r,sessionService:i,applicationModulesAccess:s}=e,c=(0,n.userLoginSelector)(t.getState());return t.dispatch((0,a.stopTwoFactorAuthenticationStage)()),c&&await(0,o.wipeOutLocalAccounts)(r,s,[c]),await i.close(),{success:!0}}},33778:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationTypeHandler=void 0;const n=r(57903),o=r(19546),a=r(69631),i=r(15179),s=r(15441),c=r(38250),u=r(16194),l=r(16593),d=r(46298),p=r(61984),f=r(10203);t.enableTwoFactorAuthenticationTypeHandler=async(e,t,{authenticationType:r})=>{const{storeService:g}=e,m=(0,a.getTwoFactorAuthenticationEnableFlowData)(g.getState());if(r===c.TwoFactorAuthenticationType.LOGIN)try{const a=(0,o.updateTwoFactorAuthenticationStage)({...t,stage:i.TwoFactorAuthenticationEnableStages.LOADING});g.dispatch(a);const{eventLoggerService:h}=e,y=g.getState(),S=(0,l.userLoginSelector)(y);if(!S)return(0,s.updateStore)(e,{...t,stage:i.TwoFactorAuthenticationEnableStages.GENERIC_ERROR}),Promise.resolve({success:!1});if(!await(0,n.waitUntilSyncComplete)(g))return(0,s.updateStore)(e,{...t,stage:i.TwoFactorAuthenticationEnableStages.GENERIC_ERROR}),Promise.resolve({success:!1});g.dispatch((0,u.changeMPStart)());const v=await(0,d.getDataForMasterPasswordChange)(g,S,{});if((0,d.isApiError)(v))(0,p.logChangeMasterPasswordError)(h,f.ChangeMasterPasswordError.DownloadError),g.dispatch((0,u.changeMPDone)()),(0,s.updateStore)(e,{...t,stage:i.TwoFactorAuthenticationEnableStages.GENERIC_ERROR});else{const{data:{transactions:e,sharingKeys:n},timestamp:a}=v,s=(0,o.updateTwoFactorAuthenticationStage)({...t,flowData:{...m,authenticationType:r,[c.TwoFactorAuthenticationType.LOGIN]:{transactions:e,sharingKeys:n,timestamp:a,serverKey:""},savedValues:{...m?.savedValues,savedAuthenticationType:r}},stage:i.TwoFactorAuthenticationEnableStages.BACKUP_PHONE});g.dispatch(s)}}catch(r){g.dispatch((0,u.changeMPDone)()),(0,s.updateStore)(e,{...t,stage:i.TwoFactorAuthenticationEnableStages.GENERIC_ERROR})}else{const e=(0,o.updateTwoFactorAuthenticationStage)({...t,flowData:{...m,authenticationType:r,savedValues:{...m?.savedValues,savedAuthenticationType:r}},stage:i.TwoFactorAuthenticationEnableStages.BACKUP_PHONE});g.dispatch(e)}return Promise.resolve({success:!0})}},46667:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(14732),t),o(r(72387),t),o(r(33778),t),o(r(44527),t),o(r(68513),t)},48277:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stopTwoFactorAuthenticationStage=t.updateTwoFactorAuthenticationStage=t.UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE=void 0,t.UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE="UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE",t.updateTwoFactorAuthenticationStage=e=>({type:t.UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE,data:e}),t.stopTwoFactorAuthenticationStage=()=>({type:t.UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE,data:{stage:void 0}})},19546:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationEnableFlow=t.stopTwoFactorAuthenticationStage=t.updateTwoFactorAuthenticationStage=void 0;var n=r(48277);Object.defineProperty(t,"updateTwoFactorAuthenticationStage",{enumerable:!0,get:function(){return n.updateTwoFactorAuthenticationStage}}),Object.defineProperty(t,"stopTwoFactorAuthenticationStage",{enumerable:!0,get:function(){return n.stopTwoFactorAuthenticationStage}});var o=r(15896);Object.defineProperty(t,"twoFactorAuthenticationEnableFlow",{enumerable:!0,get:function(){return o.twoFactorAuthenticationEnableFlow}})},15896:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationEnableFlow=t.getEmptyTwoFactorAuthenticationEnable=void 0;const n=r(48277);t.getEmptyTwoFactorAuthenticationEnable=()=>({stage:void 0}),t.twoFactorAuthenticationEnableFlow=(e=(0,t.getEmptyTwoFactorAuthenticationEnable)(),r)=>r.type===n.UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE?{...e,...r.data}:e},69631:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTwoFactorAuthenticationEnableFlowData=t.getTwoFactorAuthenticationEnableStageData=void 0;const n=r(13610);t.getTwoFactorAuthenticationEnableStageData=e=>{const{stage:t}=e.userSession.twoFactorAuthenticationEnableFlow,r=n.TwoFactorAuthenticationEnableFlowConfig?.[t]?.viewMapper,o=e.userSession.twoFactorAuthenticationEnableFlow?.flowData?.savedValues;return{stage:t,viewData:r?r(e):void 0,savedValues:o}},t.getTwoFactorAuthenticationEnableFlowData=e=>{const{flowData:t}=e.userSession.twoFactorAuthenticationEnableFlow;return t}},13610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationEnableFlowStages=t.TwoFactorAuthenticationEnableFlowConfig=void 0;const n=r(15179),o=r(62669),a=r(58206),i=r(46667),s=r(46796);t.TwoFactorAuthenticationEnableFlowConfig={start:{storeMapper:o.startTwoFactorAuthenticationEnableStoreMapper},stop:{currentHandler:s.endTwoFactorAuthenticationHandler,storeMapper:o.endTwoFactorAuthenticationEnableStoreMapper},end:{currentHandler:s.endTwoFactorAuthenticationHandler,storeMapper:o.endTwoFactorAuthenticationEnableStoreMapper},[n.TwoFactorAuthenticationEnableStages.AUTHENTICATION_TYPE]:{currentHandler:i.enableTwoFactorAuthenticationTypeHandler,viewMapper:a.enableTwoFactorAuthenticationTypeViewMapper},[n.TwoFactorAuthenticationEnableStages.BACKUP_PHONE]:{currentHandler:i.enableTwoFactorAuthenticationBackupPhoneHandler,viewMapper:a.enableTwoFactorAuthenticationBackupPhoneViewMapper},[n.TwoFactorAuthenticationEnableStages.QR_CODE]:{viewMapper:a.enableTwoFactorAuthenticationQRCodeViewMapper},[n.TwoFactorAuthenticationEnableStages.AUTHENTICATION_CODE]:{currentHandler:i.enableTwoFactorAuthenticationCodeHandler,viewMapper:a.enableTwoFactorAuthenticationCodeViewMapper},[n.TwoFactorAuthenticationEnableStages.BACKUP_CODES]:{currentHandler:i.enableTwoFactorAuthenticationBackupCodesHandler,viewMapper:a.enableTwoFactorAuthenticationBackupCodesViewMapper},[n.TwoFactorAuthenticationEnableStages.LOGOUT_REQUIRED]:{currentHandler:i.enableTwoFactorAuthenticationLogoutRequiredHandler}},t.TwoFactorAuthenticationEnableFlowStages=[{stage:n.TwoFactorAuthenticationEnableStages.AUTHENTICATION_TYPE},{stage:n.TwoFactorAuthenticationEnableStages.BACKUP_PHONE},{stage:n.TwoFactorAuthenticationEnableStages.QR_CODE},{stage:n.TwoFactorAuthenticationEnableStages.AUTHENTICATION_CODE},{stage:n.TwoFactorAuthenticationEnableStages.FINALIZING_CHANGES},{stage:n.TwoFactorAuthenticationEnableStages.BACKUP_CODES},{stage:n.TwoFactorAuthenticationEnableStages.SUCCESS}]},17303:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.backTwoFactorAuthenticationEnableFlow=t.continueTwoFactorAuthenticationEnableFlow=t.stopTwoFactorAuthenticationEnableFlow=t.startTwoFactorAuthenticationEnableFlow=void 0;const n=r(13610),o=r(19546),a=e=>e.userSession.twoFactorAuthenticationEnableFlow,i=e=>{const{stage:t}=a(e.getState());return{currentIndex:n.TwoFactorAuthenticationEnableFlowStages.findIndex((e=>e.stage===t)),currentStage:t}};t.startTwoFactorAuthenticationEnableFlow=({storeService:e})=>{const{storeMapper:t}=n.TwoFactorAuthenticationEnableFlowConfig.start,r=t?t(e):void 0,a=(0,o.updateTwoFactorAuthenticationStage)({...r,stage:n.TwoFactorAuthenticationEnableFlowStages[0].stage});return e.dispatch(a),Promise.resolve({success:!0})},t.stopTwoFactorAuthenticationEnableFlow=e=>{const{storeService:t}=e;t.dispatch((0,o.stopTwoFactorAuthenticationStage)());const{currentHandler:r,storeMapper:a}=n.TwoFactorAuthenticationEnableFlowConfig.stop,i=a?a(t):void 0;return r?r(e,i):Promise.resolve({success:!0})};const s=(e,t,r,n)=>{const{storeService:o}=e;return t(e,r?r(o):void 0,n)},c=({storeService:e},t)=>{const{currentIndex:r}=i(e);if(r!==n.TwoFactorAuthenticationEnableFlowStages.length-1){const a=(0,o.updateTwoFactorAuthenticationStage)({...t,stage:n.TwoFactorAuthenticationEnableFlowStages[r+1].stage});e.dispatch(a)}return Promise.resolve({success:!0})},u=({storeService:e},t)=>{const{currentIndex:r}=i(e);if(0!==r){const a=(0,o.updateTwoFactorAuthenticationStage)({...t,stage:n.TwoFactorAuthenticationEnableFlowStages[r-1].stage});e.dispatch(a)}return Promise.resolve({success:!0})},l=e=>{const{currentStage:t}=i(e);let r,o=c,a=u;if(n.TwoFactorAuthenticationEnableFlowConfig[t]){const e=n.TwoFactorAuthenticationEnableFlowConfig[t];a=e.backHandler||a,o=e.currentHandler||o,r=e.storeMapper}return{currentHandler:o,backHandler:a,storeMapper:r}};t.continueTwoFactorAuthenticationEnableFlow=(e,t)=>{const{storeService:r}=e,{currentHandler:n,storeMapper:o}=l(r);return s(e,n,o,t)},t.backTwoFactorAuthenticationEnableFlow=(e,t)=>{const{storeService:r}=e,{backHandler:n,storeMapper:i}=l(r);return(e=>{const t=a(e.getState()),r=(0,o.updateTwoFactorAuthenticationStage)({...t,stageData:void 0});e.dispatch(r)})(r),s(e,n,i,t)}},15441:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateStore=void 0;const n=r(19546);t.updateStore=({storeService:e},t)=>{const r=(0,n.updateTwoFactorAuthenticationStage)({...t});e.dispatch(r)}},66574:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationEnableFlow$=void 0;const n=r(18948),o=r(3343),a=r(69631);t.twoFactorAuthenticationEnableFlow$=()=>(0,n.pipe)((0,o.map)(a.getTwoFactorAuthenticationEnableStageData),(0,o.distinctUntilChanged)())},62669:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.endTwoFactorAuthenticationEnableStoreMapper=t.startTwoFactorAuthenticationEnableStoreMapper=void 0,t.startTwoFactorAuthenticationEnableStoreMapper=()=>({stage:void 0,stageData:void 0,flowData:void 0}),t.endTwoFactorAuthenticationEnableStoreMapper=()=>({stage:void 0,stageData:void 0,flowData:void 0})},15179:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationEnableStages=t.TwoFactorAuthenticationBackupPhoneErrorCode=void 0,function(e){e[e.INVALID_FORMAT=0]="INVALID_FORMAT",e[e.UNKNOWN_ERROR=1]="UNKNOWN_ERROR"}(t.TwoFactorAuthenticationBackupPhoneErrorCode||(t.TwoFactorAuthenticationBackupPhoneErrorCode={})),function(e){e.AUTHENTICATION_TYPE="AUTHENTICATION_TYPE",e.BACKUP_PHONE="BACKUP_PHONE",e.QR_CODE="QR_CODE",e.AUTHENTICATION_CODE="AUTHENTICATION_CODE",e.LOADING="LOADING",e.FINALIZING_CHANGES="FINALIZING_CHANGES",e.BACKUP_CODES="BACKUP_CODES",e.GENERIC_ERROR="GENERIC_ERROR",e.LOGOUT_REQUIRED="LOGOUT_REQUIRED",e.SUCCESS="SUCCESS"}(t.TwoFactorAuthenticationEnableStages||(t.TwoFactorAuthenticationEnableStages={}))},58206:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationBackupCodesViewMapper=t.enableTwoFactorAuthenticationCodeViewMapper=t.enableTwoFactorAuthenticationQRCodeViewMapper=t.enableTwoFactorAuthenticationBackupPhoneViewMapper=t.enableTwoFactorAuthenticationTypeViewMapper=void 0;const n=r(46298);t.enableTwoFactorAuthenticationTypeViewMapper=()=>({currentStep:1,totalSteps:5}),t.enableTwoFactorAuthenticationBackupPhoneViewMapper=e=>{const t=(0,n.makeSafeCountry)(e.device.platform.location.country),{stageData:r}=e.userSession.twoFactorAuthenticationEnableFlow;return{currentStep:2,totalSteps:5,countryCode:t,...r}},t.enableTwoFactorAuthenticationQRCodeViewMapper=e=>{const{uri:t,seed:r}=e.userSession.twoFactorAuthenticationEnableFlow.flowData;return{currentStep:3,totalSteps:5,uri:t,seed:r}},t.enableTwoFactorAuthenticationCodeViewMapper=e=>{const{stageData:t}=e.userSession.twoFactorAuthenticationEnableFlow;if(t){const{error:t}=e.userSession.twoFactorAuthenticationEnableFlow.stageData;return{currentStep:4,totalSteps:5,error:t}}return{currentStep:4,totalSteps:5}},t.enableTwoFactorAuthenticationBackupCodesViewMapper=e=>{const{recoveryKeys:t}=e.userSession.twoFactorAuthenticationEnableFlow.flowData;return{currentStep:5,totalSteps:5,recoveryKeys:t}}},6836:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthStatusError=t.TwoFactorAuthStatusRequested=t.TwoFactorAuthStatusUpdated=t.TWO_FACTOR_AUTHENTICATION_INFO_ERROR=t.TWO_FACTOR_AUTHENTICATION_INFO_REQUESTED=t.TWO_FACTOR_AUTHENTICATION_INFO_UPDATED=void 0,t.TWO_FACTOR_AUTHENTICATION_INFO_UPDATED="TWO_FACTOR_AUTHENTICATION_INFO_UPDATED",t.TWO_FACTOR_AUTHENTICATION_INFO_REQUESTED="TWO_FACTOR_AUTHENTICATION_INFO_REQUESTED",t.TWO_FACTOR_AUTHENTICATION_INFO_ERROR="TWO_FACTOR_AUTHENTICATION_INFO_ERROR",t.TwoFactorAuthStatusUpdated=e=>({type:t.TWO_FACTOR_AUTHENTICATION_INFO_UPDATED,info:e}),t.TwoFactorAuthStatusRequested=()=>({type:t.TWO_FACTOR_AUTHENTICATION_INFO_REQUESTED}),t.TwoFactorAuthStatusError=e=>({type:t.TWO_FACTOR_AUTHENTICATION_INFO_ERROR,errorCode:e})},96171:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationReducer=t.getEmptyTwoFactorAuthenticationState=void 0;const n=r(6836),o=r(42290),a=r(16478);t.getEmptyTwoFactorAuthenticationState=()=>({status:o.TwoFactorAuthenticationInfoRequestStatus.UNKNOWN}),t.TwoFactorAuthenticationReducer=(e=(0,t.getEmptyTwoFactorAuthenticationState)(),r)=>{const i=r?.info?.type;switch(r.type){case n.TWO_FACTOR_AUTHENTICATION_INFO_REQUESTED:return{status:o.TwoFactorAuthenticationInfoRequestStatus.PENDING};case n.TWO_FACTOR_AUTHENTICATION_INFO_ERROR:return{status:o.TwoFactorAuthenticationInfoRequestStatus.ERROR,errorCode:r.errorCode};case n.TWO_FACTOR_AUTHENTICATION_INFO_UPDATED:return{...r.info,isTwoFactorAuthenticationEnabled:a.TwoFactorAuthenticationEnabled.includes(i),status:o.TwoFactorAuthenticationInfoRequestStatus.READY};default:return e}}},87463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(40970),o=r(70245),a=r(60262),i=r(24217);t.config={commands:{removeU2FAuthenticator:{handler:n.removeU2FAuthenticatorHandler},refreshU2FDevicesList:{handler:o.refreshU2FDevicesListHandler}},queries:{getU2FDevicesList:{selector:i.listU2FDevicesSelector}},liveQueries:{liveU2FDevicesList:{operator:a.listU2FDevices$}}}},61217:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshU2FErrorCode=t.RemoveU2FAuthenticatorError=void 0,function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NO_KEYHANDLE_FOUND="NO_KEYHANDLE_FOUND",e.WRONG_AUTHENTICATION_CODE="WRONG_AUTHENTICATION_CODE"}(t.RemoveU2FAuthenticatorError||(t.RemoveU2FAuthenticatorError={})),function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR"}(t.RefreshU2FErrorCode||(t.RefreshU2FErrorCode={}))},70245:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshU2FDevicesListHandler=void 0;const n=r(46298),o=r(16593),a=r(61217),i=r(72355);t.refreshU2FDevicesListHandler=async e=>{try{const{storeService:t}=e,r=t.isAuthenticated,s=(0,o.userLoginSelector)(t.getState());if(!s||!r)return{success:!1,error:{code:a.RefreshU2FErrorCode.UNKNOWN_ERROR}};const c=await(0,n.getU2FDevices)(t,s);return(0,n.isApiError)(c)?{success:!1,error:{code:a.RefreshU2FErrorCode.UNKNOWN_ERROR}}:(t.dispatch((0,i.u2fDevicesUpdated)(c.u2fDevices)),{success:!0})}catch(e){return{success:!1,error:{code:a.RefreshU2FErrorCode.UNKNOWN_ERROR}}}}},40970:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeU2FAuthenticatorHandler=void 0;const n=r(14656),o=r(92263),a=r(46298),i=r(70252),s=r(16593),c=r(28287),u=r(61217),l=r(70245),d=r(17387);t.removeU2FAuthenticatorHandler=async(e,t)=>{try{const{storeService:r}=e,n=r.getState(),o=r.isAuthenticated,i=(0,s.userLoginSelector)(n);if(!i||!o)return{success:!1,error:{code:u.RemoveU2FAuthenticatorError.UNKNOWN_ERROR}};const{authenticationCode:d,keyHandle:p}=t,f=await(0,a.performTotpVerification)(r,{login:i,otp:d});if((0,a.isApiError)(f))return(0,c.handlePerformValidationError)(f,!0);const{authTicket:g}=f,m=await(0,a.removeU2FAuthenticator)(r,i,{authTicket:g,keyHandle:p});return(0,a.isApiError)(m)?{success:!1,error:{code:u.RemoveU2FAuthenticatorError.UNKNOWN_ERROR}}:(await(0,l.refreshU2FDevicesListHandler)(e),{success:!0})}catch(e){const t=o.CarbonError.fromAnyError(e).addContextInfo("U2F","removeU2FAuthenticatorHandler");return(0,i.sendExceptionLog)({error:t}),{success:!1,error:{code:(0,o.isCarbonError)(e)&&e.errorCode===n.HttpErrorCode.NETWORK_ERROR?d.AuthenticationCode.NETWORK_ERROR:u.RemoveU2FAuthenticatorError.UNKNOWN_ERROR}}}}},60262:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listU2FDevices$=void 0;const n=r(18948),o=r(3343),a=r(24217);t.listU2FDevices$=()=>(0,n.pipe)((0,o.map)(a.listU2FDevicesSelector),(0,o.distinctUntilChanged)())},24217:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listU2FDevicesSelector=void 0,t.listU2FDevicesSelector=e=>e.authentication.u2f.u2fDevices},16478:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENFORCE_2FA_POLICY_REFRESH_TIMER_INTERVAL=t.TwoFactorAuthenticationEnabled=void 0;const n=r(42290);t.TwoFactorAuthenticationEnabled=[n.TwoFactorAuthenticationType.DEVICE_REGISTRATION,n.TwoFactorAuthenticationType.LOGIN,n.TwoFactorAuthenticationType.SSO],t.ENFORCE_2FA_POLICY_REFRESH_TIMER_INTERVAL=9e5},9819:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableTwoFactorAuthenticationTOTP1Handler=void 0;const n=r(46298),o=r(25576);t.disableTwoFactorAuthenticationTOTP1Handler=async(e,t)=>{const{storeService:r}=e,{login:a}=r.getAccountInfo(),i=await(0,n.deactivateTotpVerification)(r,a,{authTicket:t});return(0,n.isApiError)(i)?{success:!1,error:{code:o.AuthenticationCode.UNKNOWN_ERROR}}:{success:!0}}},99445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableTwoFactorAuthenticationTOTP2Handler=void 0;const n=r(61740),o=r(46298),a=r(33740),i=r(57903),s=r(16194),c=r(16593),u=r(25576),l=r(16356),d=r(47820);t.disableTwoFactorAuthenticationTOTP2Handler=async(e,t)=>{const{storeService:r,masterPasswordEncryptorService:p,sessionService:f,storageService:g}=e,m=r.getState(),h=(0,c.userLoginSelector)(m);try{if(!h)throw new Error("2FA Disable Flow - Login not available");if((0,c.isRemoteKeyActivatedSelector)(m))throw console.error("Disable 2FA unavailable: RK account"),new Error("2FA Disable Flow - Unavailable due to RemoteKey Account");if(!await(0,i.waitUntilSyncComplete)(r))return{success:!1,error:{code:u.AuthenticationCode.UNKNOWN_SYNC_ERROR}};r.dispatch((0,s.changeMPStart)());const y=await(0,o.getDataForMasterPasswordChange)(r,h,{});if((0,o.isApiError)(y))throw new Error("2FA Disable Flow - Unable to getDataForMasterPasswordChange");const S=(0,c.serverKeySelector)(m);if(!(0,a.isOtpStatusValid)(y.otpStatus,S))throw new Error("2FA Disable Flow - OTP status is invalid");const{timestamp:v}=y,{transactions:E,sharingKeys:A}=y.data,_=await(0,a.deCipherAllTransactions)(f,p,E,!1),b=r.getUserSession().masterPassword,T=e.localStorageService.getInstance(),I=await T.doesLocalKeyExist();let w=null;I&&(w=await T.getLocalKey());const{publicKey:C}=A,O=await(0,a.decipherPrivateKey)(r,p,A);await(0,n.cleanRememberMeStorageData)(r,g);const D="",P=(0,a.returnProperCryptoConfig)(r);p.setInstance({raw:b},D,P),r.dispatch((0,l.updateServerKey)(D));const N={type:"email_token"};r.dispatch((0,l.updateRemoteKey)(null));const R=await(0,a.cipherTransactionWithNewMP)(r,f,p,_,null,!1),U=await(0,a.cipherPrivateKey)(p,O),L={timestamp:v,transactions:(0,a.formatTransaction)(R),updateVerification:N,sharingKeys:{publicKey:C,privateKey:U},authTicket:t},M=await(0,o.uploadDataForMasterPasswordChange)(r,h,L);if((0,o.isApiError)(M))throw(0,a.revertOnError)(e,p,{currentPassword:b,serverKey:S}),new Error("2FA Disable Flow - Unable to uploadDataForMasterPasswordChange");w&&await f.getInstance().user.persistLocalKey(w),await(0,d.storeSessionCredentialForRecovery)(r,e.localStorageService)}catch(e){return r.dispatch((0,s.changeMPDone)()),{success:!1,error:{code:u.AuthenticationCode.UNKNOWN_ERROR}}}let y=!0;try{const e=await(0,o.confirmMasterPasswordChangeDone)(r,h,{});if((0,o.isApiError)(e))throw new Error("2FA Disable Flow - Failed to confirmMasterPasswordChangeDone");y=!1}catch(e){throw new Error("2FA Disable Flow - Failed to confirmMasterPasswordChangeDone")}return r.dispatch((0,s.changeMPDone)()),{success:!0,logoutRequired:y}}},86370:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationTOTP1Handler=void 0;const n=r(35823);t.enableTwoFactorAuthenticationTOTP1Handler=async(e,t)=>await(0,n.completeTotpActivationHandler)(e,t)},52284:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationTOTP2Handler=void 0;const n=r(61740),o=r(46298),a=r(33740),i=r(16593),s=r(25576),c=r(47820),u=r(16194),l=r(16356);t.enableTwoFactorAuthenticationTOTP2Handler=async(e,t,r)=>{const{timestamp:d,transactions:p,sharingKeys:f,serverKey:g}=r;if(!g)throw new Error("[2FA - Enable] - Empty server key");const{storeService:m,masterPasswordEncryptorService:h,sessionService:y,storageService:S}=e,v=m.getState();if((0,i.isRemoteKeyActivatedSelector)(v))return console.error("Enable 2FA unavailable: RK account"),{success:!1,error:{code:s.AuthenticationCode.UNKNOWN_ERROR}};const E=(0,i.userLoginSelector)(v);if(!E)return{success:!1,error:{code:s.AuthenticationCode.UNKNOWN_ERROR}};const A=e.localStorageService.getInstance();let _=null;await A.doesLocalKeyExist()&&(_=await A.getLocalKey());try{const r=await(0,a.deCipherAllTransactions)(y,h,p,!1),{publicKey:i}=f,s=await(0,a.decipherPrivateKey)(m,h,f);await(0,n.cleanRememberMeStorageData)(m,S);const u={type:"totp_login",serverKey:g},v=(0,a.returnProperCryptoConfig)(m),A=m.getUserSession().masterPassword;h.setInstance({raw:A},g,v);const b=await(0,a.cipherTransactionWithNewMP)(m,y,h,r,null,!1),T=await(0,a.cipherPrivateKey)(h,s),I={timestamp:d,transactions:(0,a.formatTransaction)(b),updateVerification:u,sharingKeys:{publicKey:i,privateKey:T},authTicket:t},w=await(0,o.uploadDataForMasterPasswordChange)(m,E,I);if((0,o.isApiError)(w))throw new Error("2FA Enable Flow - Unable to uploadDataForMasterPasswordChange");m.dispatch((0,l.updateServerKey)(g)),_&&await y.getInstance().user.persistLocalKey(_),await(0,c.storeSessionCredentialForRecovery)(m,e.localStorageService)}catch(t){return(e=>{const{storeService:t,masterPasswordEncryptorService:r,remoteDataEncryptorService:n}=e,o=t.getState(),s=(0,i.isRemoteKeyActivatedSelector)(o)?n:r,c=t.getUserSession().masterPassword;(0,a.revertOnError)(e,s,{currentPassword:c,serverKey:""})})(e),m.dispatch((0,u.changeMPDone)()),{success:!1,error:{code:s.AuthenticationCode.UNKNOWN_ERROR}}}let b=!0;try{const e=await(0,o.confirmMasterPasswordChangeDone)(m,E,{});if((0,o.isApiError)(e))throw new Error("2FA Enable Flow - Failed to confirmMasterPasswordChangeDone");b=!1}catch(e){}return m.dispatch((0,u.changeMPDone)()),{success:!0,logoutRequired:b}}},35823:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeTotpActivationHandler=void 0;const n=r(46298),o=r(25576),a=r(16593),i=r(34569);t.completeTotpActivationHandler=async(e,t)=>{const{storeService:r}=e,s=r.getState(),c=(0,a.userLoginSelector)(s);if(!c)return{success:!1,error:{code:o.AuthenticationCode.UNKNOWN_ERROR}};const u=await(0,i.completeTotpActivation)(r,c,{authTicket:t});return(0,n.isApiError)(u)?{success:!1,error:{code:u.code}}:{success:!0}}},49109:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.endTwoFactorAuthenticationHandler=void 0;const n=r(10203),o=r(16194);t.endTwoFactorAuthenticationHandler=async({sessionService:e,storeService:t})=>(t.dispatch((0,o.changeMPDone)()),await e.getInstance().user.attemptSync(n.Trigger.SettingsChange),{success:!0})},46796:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.endTwoFactorAuthenticationHandler=t.disableTwoFactorAuthenticationTOTP1Handler=t.disableTwoFactorAuthenticationTOTP2Handler=t.refreshTwoFactorAuthenticationInfoHandler=void 0;var n=r(24797);Object.defineProperty(t,"refreshTwoFactorAuthenticationInfoHandler",{enumerable:!0,get:function(){return n.refreshTwoFactorAuthenticationInfoHandler}});var o=r(99445);Object.defineProperty(t,"disableTwoFactorAuthenticationTOTP2Handler",{enumerable:!0,get:function(){return o.disableTwoFactorAuthenticationTOTP2Handler}});var a=r(9819);Object.defineProperty(t,"disableTwoFactorAuthenticationTOTP1Handler",{enumerable:!0,get:function(){return a.disableTwoFactorAuthenticationTOTP1Handler}});var i=r(49109);Object.defineProperty(t,"endTwoFactorAuthenticationHandler",{enumerable:!0,get:function(){return i.endTwoFactorAuthenticationHandler}})},24797:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshTwoFactorAuthenticationInfoHandler=void 0;const n=r(16593),o=r(27686),a=r(6836),i=r(71291);t.refreshTwoFactorAuthenticationInfoHandler=async e=>{const{storeService:t,wsService:r}=e;try{const e=t.isAuthenticated,s=(0,n.userLoginSelector)(t.getState());if(t.dispatch((0,a.TwoFactorAuthStatusRequested)()),!s||!e)return t.dispatch((0,a.TwoFactorAuthStatusError)(o.TwoFactorAuthenticationErrorCode.UNKNOWN_ERROR)),{success:!1,error:{code:o.TwoFactorAuthenticationErrorCode.UNKNOWN_ERROR}};const c=await(0,i.refreshTwoFactorAuthenticationInfoService)(t,r);if(!1===c.success){const{code:e}=c.error;return t.dispatch((0,a.TwoFactorAuthStatusError)(e)),{success:!1,error:{code:e}}}return{success:!0}}catch(e){return t.dispatch((0,a.TwoFactorAuthStatusError)(o.TwoFactorAuthenticationErrorCode.UNKNOWN_ERROR)),{success:!1,error:{code:o.TwoFactorAuthenticationErrorCode.UNKNOWN_ERROR}}}}},43037:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationInfo$=void 0;const n=r(18948),o=r(3343),a=r(5689);t.twoFactorAuthenticationInfo$=()=>(0,n.pipe)((0,o.map)(a.twoFactorAuthenticationInfoSelector),(0,o.distinctUntilChanged)())},5689:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationInfoSelector=void 0,t.twoFactorAuthenticationInfoSelector=e=>e.authentication.twoFactorAuthentication},71291:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestTOTPActivationService=t.refreshTwoFactorAuthenticationInfoService=t.performTotpVerificationService=void 0;var n=r(14762);Object.defineProperty(t,"performTotpVerificationService",{enumerable:!0,get:function(){return n.performTotpVerificationService}});var o=r(71938);Object.defineProperty(t,"refreshTwoFactorAuthenticationInfoService",{enumerable:!0,get:function(){return o.refreshTwoFactorAuthenticationInfoService}});var a=r(56733);Object.defineProperty(t,"requestTOTPActivationService",{enumerable:!0,get:function(){return a.requestTOTPActivationService}})},14762:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performTotpVerificationService=void 0;const n=r(46298),o=r(92263),a=r(14656),i=r(25576),s=r(28287),c=r(16593);t.performTotpVerificationService=async(e,t,r=!1)=>{const{storeService:u}=e,l=u.getState(),d=(0,c.userLoginSelector)(l);if(!d)return{success:!1,error:{code:i.AuthenticationCode.UNKNOWN_ERROR}};try{const e=await(0,n.performTotpVerification)(u,{login:d,otp:t,activationFlow:r});if((0,n.isApiError)(e))return(0,s.handlePerformValidationError)(e,!0);const{authTicket:o}=e;return{success:!0,authTicket:o}}catch(e){return{success:!1,error:{code:(0,o.isCarbonError)(e)&&e.errorCode===a.HttpErrorCode.NETWORK_ERROR?i.AuthenticationCode.NETWORK_ERROR:i.AuthenticationCode.UNKNOWN_ERROR}}}}},71938:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshTwoFactorAuthenticationInfoService=void 0;const n=r(46298),o=r(16593),a=r(27686),i=r(42290),s=r(16478),c=r(56915),u=r(6836),l={email_token:i.TwoFactorAuthenticationType.EMAIL_TOKEN,totp_login:i.TwoFactorAuthenticationType.LOGIN,totp_device_registration:i.TwoFactorAuthenticationType.DEVICE_REGISTRATION,sso:i.TwoFactorAuthenticationType.SSO};t.refreshTwoFactorAuthenticationInfoService=async(e,t)=>{try{const r=(0,o.userLoginSelector)(e.getState()),d=await(0,n.getTwoFactorAuthenticationStatus)(e,r);if((0,n.isApiError)(d))return{success:!1,error:{code:a.TwoFactorAuthenticationErrorCode.UNKNOWN_ERROR}};const p=l[d.type],f=s.TwoFactorAuthenticationEnabled.includes(p);let g=!1;const m=await t.premium.status({login:(0,o.userLoginSelector)(e.getState()),uki:(0,c.ukiSelector)(e.getState()),spaces:!0}),{spaces:h}=m;h&&(g=h.some((e=>{const{info:{twoFAEnforced:t}}=e;return i.ENFORCE_TWO_FACTOR_AUTHENTICATION_ENABLED_VALUES.includes(t)})));const y=!f&&g,S={...d,isTwoFactorAuthenticationEnabled:f,isTwoFactorAuthenticationEnforced:g,shouldEnforceTwoFactorAuthentication:y,type:p};return e.dispatch((0,u.TwoFactorAuthStatusUpdated)(S)),{success:!0,info:S}}catch(e){return{success:!1,error:{code:a.TwoFactorAuthenticationErrorCode.UNKNOWN_ERROR}}}}},56733:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestTOTPActivationService=void 0;const n=r(46298),o=r(92263),a=r(14656),i=r(25576),s=r(16593);t.requestTOTPActivationService=async(e,{phoneNumber:t,country:r})=>{try{const{storeService:o}=e,a=o.getState(),c=(0,s.userLoginSelector)(a);if(!c)return{success:!1,error:{code:i.AuthenticationCode.UNKNOWN_ERROR}};const u=await(0,n.requestTOTPActivation)(o,c,{phoneNumber:t,country:r});return(0,n.isApiError)(u)?{success:!1,error:{code:u.code}}:{success:!0,...u}}catch(e){return{success:!1,error:{code:(0,o.isCarbonError)(e)&&e.errorCode===a.HttpErrorCode.NETWORK_ERROR?i.AuthenticationCode.NETWORK_ERROR:i.AuthenticationCode.UNKNOWN_ERROR}}}}},42290:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ENFORCE_TWO_FACTOR_AUTHENTICATION_ENABLED_VALUES=t.TwoFactorAuthenticationInfoRequestStatus=t.TwoFactorAuthenticationType=void 0,function(e){e.EMAIL_TOKEN="email_token",e.DEVICE_REGISTRATION="totp_device_registration",e.LOGIN="totp_login",e.SSO="sso"}(t.TwoFactorAuthenticationType||(t.TwoFactorAuthenticationType={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PENDING=1]="PENDING",e[e.ERROR=2]="ERROR",e[e.READY=3]="READY"}(t.TwoFactorAuthenticationInfoRequestStatus||(t.TwoFactorAuthenticationInfoRequestStatus={})),function(e){e.LOGIN="login",e.NEW_DEVICE="newDevice",e.DISABLED="disabled"}(r||(r={})),t.ENFORCE_TWO_FACTOR_AUTHENTICATION_ENABLED_VALUES=[r.LOGIN,r.NEW_DEVICE]},91178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(41762),o=r(52198),a=r(29010),i=r(3433),s=r(22770),c=r(49904),u=r(56915),l=r(43843),d=r(89805),p=r(92694),f=r(33088),g=r(82862);t.config={commands:{enableWebAuthnAuthentication:{handler:p.enableWebAuthnAuthentication},initEnableWebAuthnAuthentication:{handler:d.initEnableWebAuthnAuthentication},initRegisterWebAuthnAuthenticator:{handler:n.initRegisterWebAuthnAuthenticator},registerWebAuthnAuthenticator:{handler:o.registerWebAuthnAuthenticator},refreshWebAuthnAuthenticators:{handler:i.refreshWebAuthnAuthenticators},refreshAvailableWebAuthnAuthenticators:{handler:a.refreshAvailableWebAuthnAuthenticators},initOpenSessionWithWebAuthnAuthenticator:{handler:s.initOpenSessionWithWebAuthnAuthenticator},openSessionWithWebAuthnAuthenticator:{handler:c.openSessionWithWebAuthnAuthenticator},disableWebAuthnAuthentication:{handler:f.disableWebAuthnAuthentication},removeWebAuthnAuthenticator:{handler:g.removeWebAuthnAuthenticator}},queries:{getWebAuthnAuthenticators:{selector:u.authenticatorsSelector},getWebAuthnAuthenticationOptedIn:{selector:u.webAuthnAuthenticationOptedInSelector}},liveQueries:{liveWebAuthnAuthenticators:{operator:l.webAuthnAuthenticators$},liveWebAuthnAuthenticationOptedIn:{operator:l.webAuthnAuthenticationOptedIn$}}}},25997:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebAuthnCallTypes=t.RegisterWebAuthnAuthenticatorError=t.OpenSessionWithWebAuthnAuthenticatorError=t.InitRegisterWebAuthnAuthenticatorError=t.InitEnableWebAuthnAuthenticationError=t.EnableWebAuthnAuthenticationError=t.DisableWebAuthnAuthenticationError=void 0;var n=r(38945);Object.defineProperty(t,"DisableWebAuthnAuthenticationError",{enumerable:!0,get:function(){return n.DisableWebAuthnAuthenticationError}}),Object.defineProperty(t,"EnableWebAuthnAuthenticationError",{enumerable:!0,get:function(){return n.EnableWebAuthnAuthenticationError}}),Object.defineProperty(t,"InitEnableWebAuthnAuthenticationError",{enumerable:!0,get:function(){return n.InitEnableWebAuthnAuthenticationError}}),Object.defineProperty(t,"InitRegisterWebAuthnAuthenticatorError",{enumerable:!0,get:function(){return n.InitRegisterWebAuthnAuthenticatorError}}),Object.defineProperty(t,"OpenSessionWithWebAuthnAuthenticatorError",{enumerable:!0,get:function(){return n.OpenSessionWithWebAuthnAuthenticatorError}}),Object.defineProperty(t,"RegisterWebAuthnAuthenticatorError",{enumerable:!0,get:function(){return n.RegisterWebAuthnAuthenticatorError}}),Object.defineProperty(t,"WebAuthnCallTypes",{enumerable:!0,get:function(){return n.WebAuthnCallTypes}})},79842:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PUBKEY_ALGORITHM_RSA_PKCS1256=t.PUBKEY_ALGORITHM_ECDSA256=void 0,t.PUBKEY_ALGORITHM_ECDSA256=-7,t.PUBKEY_ALGORITHM_RSA_PKCS1256=-257},26942:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildAssertionPublicKeyOptions=t.buildAttestationPublicKeyOptions=void 0;const n=r(79842);t.buildAttestationPublicKeyOptions=function(e,t,r,o,a,i){return{rp:{id:e,name:"Dashlane"},user:{id:t,name:r,displayName:r},challenge:o,timeout:a,pubKeyCredParams:[{alg:n.PUBKEY_ALGORITHM_ECDSA256,type:"public-key"},{alg:n.PUBKEY_ALGORITHM_RSA_PKCS1256,type:"public-key"}],excludeCredentials:i,authenticatorSelection:{userVerification:"discouraged"}}},t.buildAssertionPublicKeyOptions=function(e,t,r,n){return{rpId:e,challenge:t,timeout:r,allowCredentials:n,userVerification:"discouraged"}}},43843:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webAuthnAuthenticationOptedIn$=t.webAuthnAuthenticators$=void 0;const n=r(18948),o=r(3343),a=r(56915);t.webAuthnAuthenticators$=()=>(0,n.pipe)((0,o.map)(a.authenticatorsSelector),(0,o.distinctUntilChanged)()),t.webAuthnAuthenticationOptedIn$=()=>(0,n.pipe)((0,o.map)(a.webAuthnAuthenticationOptedInSelector),(0,o.distinctUntilChanged)())},33088:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableWebAuthnAuthentication=void 0;const n=r(16593),o=r(38945),a=r(86903);t.disableWebAuthnAuthentication=async function(e){const{webAuthnAuthenticationService:t,storeService:r}=e,i=(0,n.userLoginSelector)(r.getState());if(!i)return{success:!1,error:{code:o.DisableWebAuthnAuthenticationError.MISSING_LOGIN}};try{return await t.deactivate(i)?((0,a.sendUserSettingsLog)(e),{success:!0}):{success:!1,error:{code:o.DisableWebAuthnAuthenticationError.WEBAUTHN_SERVICE_DEACTIVATE_FAILED}}}catch(e){return{success:!1,error:{code:o.DisableWebAuthnAuthenticationError.WEBAUTHN_SERVICE_DEACTIVATE_FAILED}}}}},92694:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableWebAuthnAuthentication=void 0;const n=r(38945),o=r(56915),a=r(16593),i=r(86903),s={UNKNOWN_ERROR:{success:!1,error:{code:n.EnableWebAuthnAuthenticationError.UNKNOWN_ERROR}},WEBAUTHN_SERVICE_INIT_FAILED:{success:!1,error:{code:n.EnableWebAuthnAuthenticationError.WEBAUTHN_SERVICE_INIT_FAILED}},USER_HAS_OTP:{success:!1,error:{code:n.EnableWebAuthnAuthenticationError.USER_HAS_OTP}}};t.enableWebAuthnAuthentication=async function(e,t){const{webAuthnAuthenticationService:r,storeService:c}=e,{authenticationType:u,credential:l,isRoaming:d}=t,p=(0,a.userLoginSelector)(c.getState());if((0,o.hasOtp2TypeSelector)(c.getState()))return s.USER_HAS_OTP;try{switch(u){case n.WebAuthnCallTypes.CREATE:{const t=await async function(e,t,r,n){const o=t.response,a={authenticationType:"webauthn.create",name:e,isRoaming:r,credential:{id:t.id,type:t.type,rawId:t.rawId,response:o}};return await n.initialize(a)?{success:!0}:s.WEBAUTHN_SERVICE_INIT_FAILED}(p,l,d,r);return t.success&&(0,i.sendUserSettingsLog)(e),t}case n.WebAuthnCallTypes.GET:{const t=await async function(e,t){const r=e.response,n={authenticationType:"webauthn.get",credential:{id:e.id,type:e.type,rawId:e.rawId,response:r}};return await t.initialize(n)?{success:!0}:s.WEBAUTHN_SERVICE_INIT_FAILED}(l,r);return t.success&&(0,i.sendUserSettingsLog)(e),t}default:return s.UNKNOWN_ERROR}}catch(e){return s.UNKNOWN_ERROR}}},89805:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initEnableWebAuthnAuthentication=void 0;const n=r(28354),o=r(46298),a=r(38945),i=r(16593),s=r(56915),c=r(8246),u=r(3433),l=r(26942);t.initEnableWebAuthnAuthentication=async function(e,t){const{storeService:r}=e,{relyingPartyId:d}=t,p=r.getState(),f=(0,i.userLoginSelector)(r.getState());let g=(0,s.webAuthnUserIdSelector)(p);g||(g=(0,n.v4)(),r.dispatch((0,c.webAuthnUserIdUpdated)(g)));let m=(0,s.authenticatorsAsCredentialSelector)(p);m&&0!==m.length||(await(0,u.refreshWebAuthnAuthenticators)(e),m=(0,s.authenticatorsAsCredentialSelector)(r.getState()));const h=m?.length>0?a.WebAuthnCallTypes.GET:a.WebAuthnCallTypes.CREATE;try{const e=await(0,o.requestWebauthnRegistration)(r,f);if((0,o.isApiError)(e))return{success:!1,error:{code:a.InitEnableWebAuthnAuthenticationError.UNKNOWN_ERROR}};const{challenge:t,expirationDateUnix:n}=e;let i;return i=h===a.WebAuthnCallTypes.CREATE?(0,l.buildAttestationPublicKeyOptions)(d,g,f,t,n,m):(0,l.buildAssertionPublicKeyOptions)(d,t,n,m),{success:!0,response:{publicKeyOptions:i,webAuthnType:h}}}catch(e){return{success:!1,error:{code:a.InitEnableWebAuthnAuthenticationError.UNKNOWN_ERROR}}}}},22770:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initOpenSessionWithWebAuthnAuthenticator=void 0;const n=r(10203),o=r(38945),a=r(46298),i=r(658),s=r(29010),c=r(26942);t.initOpenSessionWithWebAuthnAuthenticator=async function(e,t){const{relyingPartyId:r,login:u}=t,{storeService:l,webAuthnAuthenticationService:d}=e;try{if(!await d.shouldTrigger(u))return{success:!1,error:{code:o.InitOpenSessionWithWebAuthnAuthenticatorError.CANNOT_TRIGGER_WEBAUTHN_AUTHENTICATION}};(0,i.sendAskBiometricAuthenticationEventLog)(e,n.VerificationMode.None);const t=await(0,s.refreshAvailableWebAuthnAuthenticators)(e,{login:u});if(!t.success)return{success:!1,error:{code:o.InitOpenSessionWithWebAuthnAuthenticatorError.UNAVAILABLE_AUTHENTICATORS}};const p=[],f=[];t.response.authenticators.forEach((e=>{p.push({id:e.credentialId,type:"public-key"}),f.push({credentialId:e.credentialId,isRoaming:e.isRoaming})}));const g=await(0,a.requestWebauthnOpenSession)(l,u);if((0,a.isApiError)(g))return{success:!1,error:{code:o.InitOpenSessionWithWebAuthnAuthenticatorError.UNKNOWN_ERROR}};const{challenge:m,expirationDateUnix:h}=g;return{success:!0,response:{publicKeyOptions:(0,c.buildAssertionPublicKeyOptions)(r,m,h,p),authenticatorsInfo:f}}}catch(e){return{success:!1,error:{code:o.InitOpenSessionWithWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}}},41762:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initRegisterWebAuthnAuthenticator=void 0;const n=r(28354),o=r(38945),a=r(46298),i=r(8246),s=r(16593),c=r(56915),u=r(26942),l=r(3433);t.initRegisterWebAuthnAuthenticator=async function(e,t){const{storeService:r}=e,{relyingPartyId:d}=t,p=(0,s.userLoginSelector)(r.getState());let f=(0,c.webAuthnUserIdSelector)(r.getState());f||(f=(0,n.v4)(),r.dispatch((0,i.webAuthnUserIdUpdated)(f)));let g=(0,c.authenticatorsAsCredentialSelector)(r.getState());g&&0!==g.length||(await(0,l.refreshWebAuthnAuthenticators)(e),g=(0,c.authenticatorsAsCredentialSelector)(r.getState()));try{const e=await(0,a.requestWebauthnRegistration)(r,p);if((0,a.isApiError)(e))return{success:!1,error:{code:o.InitRegisterWebAuthnAuthenticatorError.UNKNOWN_ERROR}};const{challenge:t,expirationDateUnix:n}=e;return{success:!0,response:{publicKeyOptions:(0,u.buildAttestationPublicKeyOptions)(d,f,p,t,n,g)}}}catch(e){return{success:!1,error:{code:o.InitRegisterWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}}},49904:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openSessionWithWebAuthnAuthenticator=void 0;const n=r(38945),o=r(88610),a=r(658);t.openSessionWithWebAuthnAuthenticator=async function(e,t){const{credential:r,login:i,isRoamingAuthenticator:s}=t,{storeService:c,webAuthnAuthenticationService:u}=e;try{const t={authenticationType:"webauthn.get",credential:{id:r.id,type:r.type,rawId:r.rawId,response:r.response}};await u.process(i,t);const l=c.getUserSession().masterPassword;if(!l)return(0,a.sendBiometricLoginErrorLog)(e),{success:!1,error:{code:n.OpenSessionWithWebAuthnAuthenticatorError.MP_MISSING_IN_SESSION_ERROR}};const d=(0,o.makeLoginController)(e);return await d.openSessionWithMasterPassword(i,l,{triggeredByRememberMeType:"webauthn",isWebAuthnAuthenticatorRoaming:s}),{success:!0}}catch(t){return(0,a.sendBiometricLoginErrorLog)(e),{success:!1,error:{code:n.OpenSessionWithWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}}},29010:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshAvailableWebAuthnAuthenticators=void 0;const n=r(38945),o=r(56915),a=r(46298),i=r(8246);t.refreshAvailableWebAuthnAuthenticators=async function(e,t){const{storeService:r}=e,{login:s}=t;if(!(0,o.sessionKeysSelector)(r.getState()))return{success:!1,error:{code:n.RefreshAvailableWebAuthnAuthenticatorsError.MISSING_SESSION_KEYS_IN_STORE}};try{const e=await(0,a.getAvailableWebAuthnAuthenticators)(r,s);if((0,a.isApiError)(e))return{success:!1,error:{code:n.RefreshAvailableWebAuthnAuthenticatorsError.UNKNOWN_ERROR}};const t=e.authenticators.map((e=>({...e,canOpenSession:!0})));return r.dispatch((0,i.webAuthnAvailableAuthenticatorsListUpdated)(t)),{success:!0,response:{authenticators:t}}}catch(e){return{success:!1,error:{code:n.RefreshAvailableWebAuthnAuthenticatorsError.UNKNOWN_ERROR}}}}},3433:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshWebAuthnAuthenticators=void 0;const n=r(38945),o=r(46298),a=r(16593),i=r(8246);t.refreshWebAuthnAuthenticators=async function(e){const{storeService:t}=e,r=(0,a.userLoginSelector)(t.getState());try{const e=await(0,o.getWebAuthnAuthenticators)(t,r);if((0,o.isApiError)(e))return{success:!1,error:{code:n.RefreshWebAuthnAuthenticatorsError.UNKNOWN_ERROR}};const a=e.authenticators.map((e=>({...e,canOpenSession:!1})));return t.dispatch((0,i.webAuthnAuthenticatorsListUpdated)(a)),{success:!0,response:{authenticators:a}}}catch(e){return{success:!1,error:{code:n.RefreshWebAuthnAuthenticatorsError.UNKNOWN_ERROR}}}}},52198:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerWebAuthnAuthenticator=void 0;const n=r(38945),o=r(16593),a=r(46298),i=r(56915),s=r(8246);t.registerWebAuthnAuthenticator=async function(e,t){const{credential:r,isRoaming:c}=t,{storeService:u,webAuthnAuthenticationService:l}=e,d=u.getState(),p=(0,o.userLoginSelector)(d);if((0,i.hasOtp2TypeSelector)(d))return{success:!1,error:{code:n.RegisterWebAuthnAuthenticatorError.USER_HAS_OTP}};try{const e={authenticationType:"webauthn.create",name:p,isRoaming:c,credential:{id:r.id,type:r.type,rawId:r.rawId,response:r.response}};if((0,i.authenticatorsSelector)(d).length){const t=await(0,a.completeWebAuthnAuthenticatorRegistration)(u,p,{authenticator:e});if((0,a.isApiError)(t))return{success:!1,error:{code:n.RegisterWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}else await l.initialize(e);return u.dispatch((0,s.webAuthnAuthenticatorAdded)({name:e.name,isRoaming:e.isRoaming,credentialId:e.credential.id,canOpenSession:!0})),{success:!0}}catch(e){return{success:!1,error:{code:n.RegisterWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}}},82862:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeWebAuthnAuthenticator=void 0;const n=r(16593),o=r(46298),a=r(38945),i=r(56915),s=r(33088),c=r(8246);async function u(e,t,r){const n=await(0,o.deactivateWebAuthnAuthenticator)(e,t,{credentialId:r});return(0,o.isApiError)(n)?{success:!1,error:{code:a.RemoveWebAuthnAuthenticatorError.CANNOT_REMOVE_WEBAUTHN_AUTHENTICATOR}}:{success:!0}}t.removeWebAuthnAuthenticator=async function(e,t){const{credentialId:r}=t,{storeService:o}=e,l=o.getState(),d=(0,n.userLoginSelector)(l),p=(0,i.webAuthnAuthenticationOptedInSelector)(l),f=(0,i.authenticatorsSelector)(l);try{let t=null;return p&&1===f.length?(await(0,s.disableWebAuthnAuthentication)(e),t=await u(o,d,r)):t=await u(o,d,r),t.success&&o.dispatch((0,c.webAuthnAuthenticatorRemoved)(r)),t}catch(e){return{success:!1,error:{code:a.RemoveWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}}},38945:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveWebAuthnAuthenticatorError=t.DisableWebAuthnAuthenticationError=t.OpenSessionWithWebAuthnAuthenticatorError=t.InitOpenSessionWithWebAuthnAuthenticatorError=t.RefreshAvailableWebAuthnAuthenticatorsError=t.RefreshWebAuthnAuthenticatorsError=t.RegisterWebAuthnAuthenticatorError=t.InitRegisterWebAuthnAuthenticatorError=t.EnableWebAuthnAuthenticationError=t.InitEnableWebAuthnAuthenticationError=t.WebAuthnCallTypes=void 0,function(e){e.CREATE="webauthn.create",e.GET="webauthn.get"}(t.WebAuthnCallTypes||(t.WebAuthnCallTypes={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(t.InitEnableWebAuthnAuthenticationError||(t.InitEnableWebAuthnAuthenticationError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.USER_HAS_OTP="USER_HAS_OTP",e.WEBAUTHN_SERVICE_INIT_FAILED="WEBAUTHN_SERVICE_INIT_FAILED"}(t.EnableWebAuthnAuthenticationError||(t.EnableWebAuthnAuthenticationError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(t.InitRegisterWebAuthnAuthenticatorError||(t.InitRegisterWebAuthnAuthenticatorError={})),function(e){e.USER_HAS_OTP="USER_HAS_OTP",e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(t.RegisterWebAuthnAuthenticatorError||(t.RegisterWebAuthnAuthenticatorError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(t.RefreshWebAuthnAuthenticatorsError||(t.RefreshWebAuthnAuthenticatorsError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.MISSING_SESSION_KEYS_IN_STORE="MISSING_SESSION_KEYS_IN_STORE"}(t.RefreshAvailableWebAuthnAuthenticatorsError||(t.RefreshAvailableWebAuthnAuthenticatorsError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.UNAVAILABLE_AUTHENTICATORS="UNAVAILABLE_AUTHENTICATORS",e.CANNOT_TRIGGER_WEBAUTHN_AUTHENTICATION="CANNOT_TRIGGER_WEBAUTHN_AUTHENTICATION"}(t.InitOpenSessionWithWebAuthnAuthenticatorError||(t.InitOpenSessionWithWebAuthnAuthenticatorError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.MP_MISSING_IN_SESSION_ERROR="MP_MISSING_IN_SESSION_ERROR"}(t.OpenSessionWithWebAuthnAuthenticatorError||(t.OpenSessionWithWebAuthnAuthenticatorError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.WEBAUTHN_SERVICE_DEACTIVATE_FAILED="WEBAUTHN_SERVICE_DEACTIVATE_FAILED",e.MISSING_LOGIN="MISSING_LOGIN"}(t.DisableWebAuthnAuthenticationError||(t.DisableWebAuthnAuthenticationError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.CANNOT_REMOVE_WEBAUTHN_AUTHENTICATOR="CANNOT_REMOVE_WEBAUTHN_AUTHENTICATOR"}(t.RemoveWebAuthnAuthenticatorError||(t.RemoveWebAuthnAuthenticatorError={}))},44740:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(3158);t.bootstrap=e=>{e.register(n.config)}},90622:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.getLocalAccounts=t.appKeysSelector=t.sessionKeysSelector=t.ukiSelector=t.deviceKeysSelector=t.authenticationReducer=void 0;var n=r(57334);Object.defineProperty(t,"authenticationReducer",{enumerable:!0,get:function(){return n.authenticationReducer}});var o=r(56915);Object.defineProperty(t,"deviceKeysSelector",{enumerable:!0,get:function(){return o.deviceKeysSelector}}),Object.defineProperty(t,"ukiSelector",{enumerable:!0,get:function(){return o.ukiSelector}}),Object.defineProperty(t,"sessionKeysSelector",{enumerable:!0,get:function(){return o.sessionKeysSelector}}),Object.defineProperty(t,"appKeysSelector",{enumerable:!0,get:function(){return o.appKeysSelector}});var a=r(75226);Object.defineProperty(t,"getLocalAccounts",{enumerable:!0,get:function(){return a.getLocalAccounts}});var i=r(44740);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return i.bootstrap}})},54622:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reactivationStatus$=void 0;const n=r(18948),o=r(3343),a=r(56915);t.reactivationStatus$=()=>(0,n.pipe)((0,o.map)(a.reactivationStatusSelector),(0,o.distinctUntilChanged)())},56915:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reactivationStatusSelector=t.rememberMeFor14DaysOptedInSelector=t.webAuthnAuthenticationOptedInSelector=t.rememberMeTypeSelector=t.authenticatorsAsCredentialSelector=t.availableAuthenticatorsSelector=t.authenticatorsSelector=t.webAuthnUserIdSelector=t.webAuthnAuthenticationSelector=t.platformInfoSelector=t.hasOtp2TypeSelector=t.otpTypeSelector=t.userAuthenticationDataSelector=t.localUsersAuthenticationDataSelector=t.localAccountsListSelector=t.getUserDeviceWasRegisteredWithDeviceKeysSelector=t.sessionKeysSelector=t.getDeviceAccessKeySelector=t.getDeviceIdSelector=t.deviceKeysSelector=t.ukiSelector=t.dashlaneServerDeltaTimestampSelector=t.appKeysSelector=void 0;const n=r(92215),o=r(2246),a=r(86797);t.appKeysSelector=e=>e.userSession.sdkAuthentication.appKeys,t.dashlaneServerDeltaTimestampSelector=e=>e.userSession.sdkAuthentication.dashlaneServerDeltaTimestamp,t.ukiSelector=e=>e.userSession.localSettings.uki||e.authentication.currentUser&&e.authentication.currentUser.deviceKeys&&(0,n.convertDeviceKeysToUki)(e.authentication.currentUser.deviceKeys)||null,t.deviceKeysSelector=e=>{if(e.authentication.currentUser&&e.authentication.currentUser.deviceKeys)return e.authentication.currentUser.deviceKeys;const t=e.userSession.localSettings.uki;return(0,n.convertUkiToDeviceKeys)(t)},t.getDeviceIdSelector=(e,t)=>{const r=e.authentication.localUsers[t];return r&&r.deviceAccessKey?r.deviceAccessKey:(0,o.getCommonAppSetting)("deviceId")||null},t.getDeviceAccessKeySelector=(e,r)=>(0,t.getDeviceIdSelector)(e,r),t.sessionKeysSelector=({userSession:{session:e}})=>Boolean(e.sessionKeys&&e.sessionKeys.accessKey&&e.sessionKeys.secretKey)?{...e.sessionKeys}:null,t.getUserDeviceWasRegisteredWithDeviceKeysSelector=(e,t)=>{const r=e.authentication.localUsers[t];return!!r&&!r.deviceRegisteredWithLegacyKey},t.localAccountsListSelector=e=>e.authentication.localAccounts.accountsList,t.localUsersAuthenticationDataSelector=e=>e.authentication.localUsers,t.userAuthenticationDataSelector=e=>e.authentication.currentUser,t.otpTypeSelector=e=>e.userSession?.account?e.userSession.account.otpType:null,t.hasOtp2TypeSelector=e=>(0,t.otpTypeSelector)(e)===a.OtpType.OTP_LOGIN,t.platformInfoSelector=e=>e.device.platform.info,t.webAuthnAuthenticationSelector=e=>e.authentication.webAuthnAuthentication,t.webAuthnUserIdSelector=e=>e.authentication.webAuthnAuthentication.webAuthnUserId,t.authenticatorsSelector=e=>e.authentication.webAuthnAuthentication.authenticators,t.availableAuthenticatorsSelector=e=>e.authentication.webAuthnAuthentication.authenticators.filter((e=>e.canOpenSession)),t.authenticatorsAsCredentialSelector=e=>(0,t.authenticatorsSelector)(e).map((e=>({id:e.credentialId,type:"public-key"}))),t.rememberMeTypeSelector=e=>e.authentication.currentUser.rememberMeType,t.webAuthnAuthenticationOptedInSelector=e=>"webauthn"===(0,t.rememberMeTypeSelector)(e),t.rememberMeFor14DaysOptedInSelector=e=>"autologin"===(0,t.rememberMeTypeSelector)(e),t.reactivationStatusSelector=e=>e.authentication.localAccounts.reactivationStatus},33045:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(14498);t.setupSubscriptions=async function(e,t){e.sessionOpened.on((()=>{(0,n.loadRememberMeTypeToStore)(t)}))}},76839:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(90351);t.config={commands:{},queries:{getSingleAddressForAutofill:{selector:n.autofillViewedAddressSelector},getMultipleAddressesForAutofill:{selector:n.autofillViewedQueriedAddressesSelector},getSingleBankAccountForAutofill:{selector:n.autofillViewedBankAccountSelector},getMultipleBankAccountsForAutofill:{selector:n.autofillViewedQueriedBankAccountsSelector},getSingleCompanyForAutofill:{selector:n.autofillViewedCompanySelector},getMultipleCompaniesForAutofill:{selector:n.autofillViewedQueriedCompaniesSelector},getSingleCredentialForAutofill:{selector:n.autofillViewedCredentialSelector},getMultipleCredentialsForAutofill:{selector:n.autofillViewedQueriedCredentialsByDomainSelector},getSingleDriverLicenseForAutofill:{selector:n.autofillViewedDriverLicenseSelector},getMultipleDriverLicensesForAutofill:{selector:n.autofillViewedQueriedDriverLicensesSelector},getSingleEmailForAutofill:{selector:n.autofillViewedEmailSelector},getMultipleEmailsForAutofill:{selector:n.autofillViewedQueriedEmailsSelector},getSingleFiscalIdForAutofill:{selector:n.autofillViewedFiscalIdSelector},getMultipleFiscalIdsForAutofill:{selector:n.autofillViewedQueriedFiscalIdsSelector},getSingleGeneratedPasswordForAutofill:{selector:n.autofillViewedGeneratedPasswordSelector},getMultipleGeneratedPasswordsForAutofill:{selector:n.autofillViewedQueriedGeneratedPasswordsSelector},getSingleIdCardForAutofill:{selector:n.autofillViewedIdCardSelector},getMultipleIdCardsForAutofill:{selector:n.autofillViewedQueriedIdCardsSelector},getSingleIdentityForAutofill:{selector:n.autofillViewedIdentitySelector},getMultipleIdentitiesForAutofill:{selector:n.autofillViewedQueriedIdentitiesSelector},getSingleNoteForAutofill:{selector:n.autofillViewedNoteSelector},getMultipleNotesForAutofill:{selector:n.autofillViewedQueriedNotesSelector},getSinglePasskeyForAutofill:{selector:n.autofillViewedPasskeySelector},getSinglePassportForAutofill:{selector:n.autofillViewedPassportSelector},getMultiplePassportsForAutofill:{selector:n.autofillViewedQueriedPassportsSelector},getSinglePaymentCardForAutofill:{selector:n.autofillViewedPaymentCardSelector},getMultiplePaymentCardsForAutofill:{selector:n.autofillViewedQueriedPaymentCardsSelector},getSinglePersonalWebsiteForAutofill:{selector:n.autofillViewedPersonalWebsiteSelector},getMultiplePersonalWebsitesForAutofill:{selector:n.autofillViewedQueriedPersonalWebsitesSelector},getSinglePhoneForAutofill:{selector:n.autofillViewedPhoneSelector},getMultiplePhonesForAutofill:{selector:n.autofillViewedQueriedPhonesSelector},getSingleSocialSecurityIdForAutofill:{selector:n.autofillViewedSocialSecurityIdSelector},getMultipleSocialSecurityIdsForAutofill:{selector:n.autofillViewedQueriedSocialSecurityIdsSelector},getAutofillSettingOnUrlForAutofill:{selector:n.getAutofillSettingOnUrlForAutofillSelector}},liveQueries:{}}},72227:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(76839);t.bootstrap=e=>{e.register(n.config)}},27923:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPasswordHealthStatusForHermes=t.getDomainMatchTypeForHermes=t.getAgeFromIdentity=t.defaultToZero=t.defaultToUS=t.defaultToEmptyString=void 0;const n=r(16516),o=r(53576),a=r(10203),i=r(72099),s=r(88083),c=r(69198);t.defaultToEmptyString=(0,n.defaultTo)(""),t.defaultToUS=(0,n.defaultTo)(o.Country.US),t.defaultToZero=(0,n.defaultTo)(0),t.getAgeFromIdentity=e=>{const t=new Date(0).getUTCFullYear(),r=(0,i.epochToDate)((0,i.vaultDateToViewDate)(e.BirthDate)),n=new Date(Date.now()-r.getTime());return Math.abs(n.getUTCFullYear()-t)},t.getDomainMatchTypeForHermes=(e,t)=>{switch((0,s.getCredentialByDomainMatchType)(e,t)){case s.DomainMatchType.DashlaneDefinedLinkedWebsite:return a.MatchType.AssociatedWebsite;case s.DomainMatchType.UserDefinedLinkedWebsite:return a.MatchType.UserAssociatedWebsite;case s.DomainMatchType.None:case s.DomainMatchType.MainWebsite:default:return a.MatchType.Regular}},t.getPasswordHealthStatusForHermes=e=>{if(!(0,c.isEligible)(e))return{is_excluded:!0};if(!((0,c.isComputed)(e.value.isWeak)||(0,c.isComputed)(e.value.similarCredentialsCount)||(0,c.isComputed)(e.value.compromised)))return;const t=(0,c.unwrapComputedValueOr)(e.value.compromised,{isCompromised:!1}),r=(0,c.isComputedWithValue)(e.value.isWeak,!0),n=(0,c.unwrapComputedValueOr)(e.value.similarCredentialsCount,0)>0;return{is_weak:r,is_compromised:t.isCompromised,is_reused:n}}},74219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(72227);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},90351:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAutofillSettingOnUrlForAutofillSelector=t.autofillViewedQueriedSocialSecurityIdsSelector=t.autofillViewedSocialSecurityIdSelector=t.autofillViewedQueriedPersonalWebsitesSelector=t.autofillViewedPersonalWebsiteSelector=t.autofillViewedQueriedPhonesSelector=t.autofillViewedPhoneSelector=t.autofillViewedQueriedPaymentCardsSelector=t.autofillViewedPaymentCardSelector=t.autofillViewedQueriedPassportsSelector=t.autofillViewedPassportSelector=t.autofillViewedPasskeySelector=t.autofillViewedQueriedNotesSelector=t.autofillViewedNoteSelector=t.autofillViewedQueriedIdentitiesSelector=t.autofillViewedIdentitySelector=t.autofillViewedQueriedIdCardsSelector=t.autofillViewedIdCardSelector=t.autofillViewedQueriedGeneratedPasswordsSelector=t.autofillViewedGeneratedPasswordSelector=t.autofillViewedQueriedFiscalIdsSelector=t.autofillViewedFiscalIdSelector=t.autofillViewedQueriedEmailsSelector=t.autofillViewedEmailSelector=t.autofillViewedQueriedDriverLicensesSelector=t.autofillViewedDriverLicenseSelector=t.autofillViewedQueriedCredentialsByDomainSelector=t.autofillViewedCredentialSelector=t.autofillViewedQueriedCompaniesSelector=t.autofillViewedCompanySelector=t.autofillViewedQueriedBankAccountsSelector=t.autofillViewedBankAccountSelector=t.autofillViewedQueriedAddressesSelector=t.autofillViewedAddressSelector=void 0;const n=r(16516),o=r(11814),a=r(83195),i=r(51504),s=r(99281),c=r(16018),u=r(80624),l=r(19736),d=r(19325),p=r(41841),f=r(9774),g=r(26147),m=r(41092),h=r(92598),y=r(23437),S=r(81438),v=r(28074),E=r(65401),A=r(58235),_=r(81473),b=r(82439),T=r(27147),I=r(16593),w=r(63566),C=r(91210),O=r(52102),D=r(83687),P=r(55346),N=r(38250),R=r(26766),U=r(7944),L=r(21342),M=r(18665),k=r(43480);t.autofillViewedAddressSelector=(e,t)=>{const r=(0,s.addressSelector)(e,t);return(0,P.addressAutofillView)(r)},t.autofillViewedQueriedAddressesSelector=(0,n.compose)((0,w.viewListResults)(P.addressListView),s.queryAddressesSelector),t.autofillViewedBankAccountSelector=(e,t)=>{const r=(0,c.bankAccountSelector)(e,t);return(0,P.bankAccountAutofillView)(r)},t.autofillViewedQueriedBankAccountsSelector=(0,n.compose)((0,w.viewListResults)(P.bankAccountListView),c.queryBankAccountsSelector),t.autofillViewedCompanySelector=(e,t)=>{const r=(0,u.companySelector)(e,t);return(0,P.companyAutofillView)(r)},t.autofillViewedQueriedCompaniesSelector=(0,n.compose)((0,w.viewListResults)(P.companyListView),u.queryCompaniesSelector),t.autofillViewedCredentialSelector=(e,{credentialId:t,rootDomain:r})=>{const n=(0,R.healthSelector)(e),o=(0,U.spacesSelector)(e),a=(0,L.breachesSelector)(e),i=(0,k.getCredentialHealthView)(n,a,o),s=(0,l.credentialSelector)(e,t),c=i(s),u=(0,C.limitedSharingItemsSelector)(e),d=(0,O.sharingDataSelector)(e),p=(0,I.userIdSelector)(e),f=(0,D.getSharingStatusDetail)(u,d,p)(t);return(0,P.credentialAutofillView)(c,r,s,f)},t.autofillViewedQueriedCredentialsByDomainSelector=(e,t)=>{const r=(0,R.healthSelector)(e),n=(0,U.spacesSelector)(e),o=(0,L.breachesSelector)(e),a=(0,k.getCredentialHealthView)(r,o,n),i=(0,C.limitedSharingItemsSelector)(e),s=(0,O.sharingDataSelector)(e),c=(0,I.userIdSelector)(e),u=(0,D.getSharingStatusDetail)(i,s,c),{domain:l,...f}=t,g=(l?(0,d.getQueryByDomainSelector)(l):p.querySelector)(e,f),m={...g,items:g.items.map((e=>({credential:e,domain:l,health:a(e),sharingStatus:u(e.Id)})))};return(0,w.viewListResults)(P.credentialListView)(m)},t.autofillViewedDriverLicenseSelector=(e,t)=>{const r=(0,f.driverLicenseWithIdentitySelector)(e,t);return(0,P.driverLicenseAutofillView)(r)},t.autofillViewedQueriedDriverLicensesSelector=(0,n.compose)((0,w.viewListResults)(P.driverLicenseListView),f.queryDriverLicensesSelector),t.autofillViewedEmailSelector=(e,t)=>{const r=(0,g.emailSelector)(e,t);return(0,P.emailAutofillView)(r)},t.autofillViewedQueriedEmailsSelector=(0,n.compose)((0,w.viewListResults)(P.emailListView),g.queryEmailsSelector),t.autofillViewedFiscalIdSelector=(e,t)=>{const r=(0,m.fiscalIdSelector)(e,t);return(0,P.fiscalIdAutofillView)(r)},t.autofillViewedQueriedFiscalIdsSelector=(0,n.compose)((0,w.viewListResults)(P.fiscalIdListView),m.queryFiscalIdsSelector),t.autofillViewedGeneratedPasswordSelector=(e,t)=>{const r=(0,h.generatedPasswordSelector)(e,t);return(0,P.generatedPasswordAutofillView)(r)},t.autofillViewedQueriedGeneratedPasswordsSelector=(0,n.compose)((0,w.viewListResults)(P.generatedPasswordListView),h.queryGeneratedPasswordsSelector),t.autofillViewedIdCardSelector=(e,t)=>{const r=(0,y.idCardWithIdentitySelector)(e,t);return(0,P.idCardAutofillView)(r)},t.autofillViewedQueriedIdCardsSelector=(0,n.compose)((0,w.viewListResults)(P.idCardListView),y.queryIdCardsSelector),t.autofillViewedIdentitySelector=(e,t)=>{const r=(0,v.identitySelector)(e,t);return(0,P.identityAutofillView)(r)},t.autofillViewedQueriedIdentitiesSelector=(0,n.compose)((0,w.viewListResults)(P.identityListView),v.queryIdentitiesSelector),t.autofillViewedNoteSelector=(e,t)=>{const r=(0,S.noteSelector)(e,t);return(0,P.noteAutofillView)(r)},t.autofillViewedQueriedNotesSelector=(0,n.compose)((0,w.viewListResults)(P.noteListView),S.queryNotesSelector),t.autofillViewedPasskeySelector=(e,t)=>{const r=(0,M.passkeySelector)(e,t);return(0,P.passkeyAutofillView)(r)},t.autofillViewedPassportSelector=(e,t)=>{const r=(0,E.passportWithIdentitySelector)(e,t);return(0,P.passportAutofillView)(r)},t.autofillViewedQueriedPassportsSelector=(0,n.compose)((0,w.viewListResults)(P.passportListView),E.queryPassportsWithIdentitySelector),t.autofillViewedPaymentCardSelector=(e,t)=>{const r=(0,A.paymentCardSelector)(e,t);return(0,P.paymentCardAutofillView)(r)},t.autofillViewedQueriedPaymentCardsSelector=(0,n.compose)((0,w.viewListResults)(P.paymentCardListView),A.queryPaymentCardsSelector),t.autofillViewedPhoneSelector=(e,t)=>{const r=(0,b.phoneSelector)(e,t);return(0,P.phoneAutofillView)(r)},t.autofillViewedQueriedPhonesSelector=(0,n.compose)((0,w.viewListResults)(P.phoneListView),b.queryPhonesSelector),t.autofillViewedPersonalWebsiteSelector=(e,t)=>{const r=(0,_.personalWebsiteSelector)(e,t);return(0,P.personalWebsiteAutofillView)(r)},t.autofillViewedQueriedPersonalWebsitesSelector=(0,n.compose)((0,w.viewListResults)(P.personalWebsiteListView),_.queryPersonalWebsitesSelector),t.autofillViewedSocialSecurityIdSelector=(e,t)=>{const r=(0,T.socialSecurityIdWithIdentitySelector)(e,t);return(0,P.socialSecurityIdAutofillView)(r)},t.autofillViewedQueriedSocialSecurityIdsSelector=(0,n.compose)((0,w.viewListResults)(P.socialSecurityIdListView),T.querySocialSecurityIdsSelector),t.getAutofillSettingOnUrlForAutofillSelector=(e,t)=>{const r=e.userSession.personalFeatures.features[i.NEW_URL_PARSER_FF]||e.userSession.personalFeatures.features[i.NEW_URL_PARSER_FF_PROD]?new a.ParsedURL(t).getRootDomain():o.url.getDomainForUrl(t),n=(0,I.personalSettingsSelector)(e),s=n.DisabledUrlsList.includes(t);return n.DisabledDomainsList.includes(r)||s?N.AutofillOptions.ANALYSIS_ENABLED_ONLY_ON_LOGINS_AND_PASSWORDS:N.AutofillOptions.ANALYSIS_ENABLED_ON_ALL_FORMS}},55346:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passkeyAutofillView=t.socialSecurityIdListView=t.socialSecurityIdAutofillView=t.phoneListView=t.phoneAutofillView=t.personalWebsiteListView=t.personalWebsiteAutofillView=t.paymentCardListView=t.paymentCardAutofillView=t.passportListView=t.passportAutofillView=t.noteListView=t.noteAutofillView=t.idCardListView=t.idCardAutofillView=t.identityListView=t.identityAutofillView=t.generatedPasswordListView=t.generatedPasswordAutofillView=t.fiscalIdListView=t.fiscalIdAutofillView=t.emailListView=t.emailAutofillView=t.driverLicenseListView=t.driverLicenseAutofillView=t.credentialListView=t.credentialAutofillView=t.companyListView=t.companyAutofillView=t.bankAccountListView=t.bankAccountAutofillView=t.addressListView=t.addressAutofillView=void 0;const n=r(24979),o=r(16516),a=r(92882),i=r(42316),s=r(90073),c=r(72099),u=r(6205),l=r(38495),d=r(27923),p=e=>({id:e.Id,lastUse:e.LastUse,localeFormat:e.LocaleFormat,spaceId:e.SpaceId});t.addressAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.Address,addressFull:(0,d.defaultToEmptyString)(e.AddressFull),addressName:(0,d.defaultToEmptyString)(e.AddressName),building:(0,d.defaultToEmptyString)(e.Building),city:(0,d.defaultToEmptyString)(e.City),country:(0,d.defaultToEmptyString)(e.Country),digitCode:(0,d.defaultToEmptyString)(e.DigitCode),door:(0,d.defaultToEmptyString)(e.Door),floor:(0,d.defaultToEmptyString)(e.Floor),stairs:(0,d.defaultToEmptyString)(e.Stairs),state:(0,l.findStateName)((0,d.defaultToEmptyString)(e.State)),stateCode:(0,l.findStateCode)((0,d.defaultToEmptyString)(e.LocaleFormat),(0,d.defaultToEmptyString)(e.State)),stateLevel2:(0,l.findStateLevel2Name)((0,d.defaultToEmptyString)(e.StateLevel2)),streetName:(0,d.defaultToEmptyString)(e.StreetName),streetNumber:(0,d.defaultToEmptyString)(e.StreetNumber),streetTitle:(0,d.defaultToEmptyString)(e.StreetTitle),zipCode:(0,d.defaultToEmptyString)(e.ZipCode)}),t.addressListView=e=>e.map(t.addressAutofillView),t.bankAccountAutofillView=e=>{const t=(0,a.getBankInfoFromBankAccountData)(e);return{...p(e),vaultType:n.VaultSourceType.BankAccount,name:(0,d.defaultToEmptyString)(e.BankAccountName),owner:(0,d.defaultToEmptyString)(e.BankAccountOwner),IBAN:(0,d.defaultToEmptyString)(e.BankAccountIBAN),BIC:(0,d.defaultToEmptyString)(e.BankAccountBIC),bank:t.bank,country:(0,d.defaultToUS)(e.LocaleFormat),bankCode:t.bankCode}},t.bankAccountListView=e=>e.map(t.bankAccountAutofillView),t.companyAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.Company,name:(0,d.defaultToEmptyString)(e.Name),jobTitle:(0,d.defaultToEmptyString)(e.JobTitle)}),t.companyListView=e=>e.map(t.companyAutofillView),t.credentialAutofillView=(e,t,r,a)=>({...p(r),vaultType:n.VaultSourceType.Credential,autoProtected:(0,o.defaultTo)(!1,r.AutoProtected),autoLogin:(0,o.defaultTo)(!1,r.AutoLogin),categoryName:r.CategoryName,email:(0,d.defaultToEmptyString)(r.Email),hasOtp:Boolean(r.OtpSecret??r.OtpUrl),matchType:(0,d.getDomainMatchTypeForHermes)(t,r),login:(0,d.defaultToEmptyString)(r.Login),otpSecret:(0,d.defaultToEmptyString)(r.OtpSecret),otpUrl:(0,d.defaultToEmptyString)(r.OtpUrl),password:(0,d.defaultToEmptyString)(r.Password),subdomainOnly:r.SubdomainOnly||!1,sharingStatus:a,title:(0,d.defaultToEmptyString)(r.Title||(0,s.getDomainForCredential)(r)),secondaryLogin:r.SecondaryLogin,url:(0,d.defaultToEmptyString)(r.Url),userAddedLinkedWebsites:(0,u.getUserAddedLinkedWebsiteDomains)(r),passwordHealthStatus:(0,d.getPasswordHealthStatusForHermes)(e)}),t.credentialListView=e=>e.map((({health:e,domain:r,credential:n,sharingStatus:o})=>(0,t.credentialAutofillView)(e,r,n,o))),t.driverLicenseAutofillView=e=>{const t=(0,c.epochToDate)((0,c.vaultDateToViewDate)(e.ExpireDate)),r=(0,c.epochToDate)((0,c.vaultDateToViewDate)(e.DeliveryDate));return{...p(e),vaultType:n.VaultSourceType.DriverLicense,country:(0,c.vaultCountryToViewCountry)(e.LocaleFormat),creationDate:(0,d.defaultToZero)(e.CreationDatetime),expirationDay:t.getDate(),expirationMonth:t.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET,expirationYear:t.getFullYear(),expirationDateFull:`${t.getFullYear()}-${t.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET}-${t.getDate()}`,idNumber:(0,d.defaultToEmptyString)(e.Number),issueDay:r.getDate(),issueMonth:r.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET,issueYear:r.getFullYear(),issueDateFull:`${r.getFullYear()}-${r.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET}-${r.getDate()}`,name:(0,c.identityToName)(e.identity)||e.Fullname||"",spaceId:e.SpaceId,state:e.State}},t.driverLicenseListView=e=>e.map(t.driverLicenseAutofillView),t.emailAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.Email,email:(0,d.defaultToEmptyString)(e.Email),name:(0,d.defaultToEmptyString)(e.EmailName),type:e.Type||"NO_TYPE"}),t.emailListView=e=>e.map(t.emailAutofillView),t.fiscalIdAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.FiscalId,country:(0,c.vaultCountryToViewCountry)(e.LocaleFormat),idNumber:(0,d.defaultToEmptyString)(e.FiscalNumber),teledeclarantNumber:(0,d.defaultToEmptyString)(e.TeledeclarantNumber),creationDate:(0,d.defaultToZero)(e.CreationDatetime)}),t.fiscalIdListView=e=>e.map(t.fiscalIdAutofillView),t.generatedPasswordAutofillView=e=>({vaultType:n.VaultSourceType.GeneratedPassword,domain:(0,d.defaultToEmptyString)(e.Domain),generatedDate:e.GeneratedDate,password:e.Password,id:e.Id}),t.generatedPasswordListView=e=>e.map(t.generatedPasswordAutofillView),t.identityAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.Identity,age:(0,d.getAgeFromIdentity)(e),birthDate:(0,d.defaultToEmptyString)(e.BirthDate),birthPlace:(0,d.defaultToEmptyString)(e.BirthPlace),firstName:(0,d.defaultToEmptyString)(e.FirstName),lastName2:(0,d.defaultToEmptyString)(e.LastName2),lastName:(0,d.defaultToEmptyString)(e.LastName),middleName:(0,d.defaultToEmptyString)(e.MiddleName),middleNameInitial:(0,d.defaultToEmptyString)(e.MiddleName),pseudo:(0,d.defaultToEmptyString)(e.Pseudo),title:e.Title}),t.identityListView=e=>e.map(t.identityAutofillView),t.idCardAutofillView=e=>{const t=(0,c.epochToDate)((0,c.vaultDateToViewDate)(e.ExpireDate)),r=(0,c.epochToDate)((0,c.vaultDateToViewDate)(e.DeliveryDate));return{...p(e),vaultType:n.VaultSourceType.IdCard,country:(0,c.vaultCountryToViewCountry)(e.LocaleFormat),creationDate:(0,d.defaultToZero)(e.CreationDatetime),expirationDay:t.getDate(),expirationMonth:t.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET,expirationYear:t.getFullYear(),expirationDateFull:`${t.getFullYear()}-${t.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET}-${t.getDate()}`,idNumber:(0,d.defaultToEmptyString)(e.Number),issueDay:r.getDate(),issueMonth:r.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET,issueYear:r.getFullYear(),issueDateFull:`${r.getFullYear()}-${r.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET}-${r.getDate()}`,name:(0,c.identityToName)(e.identity)||e.Fullname||"",spaceId:e.SpaceId}},t.idCardListView=e=>e.map(t.idCardAutofillView),t.noteAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.Note}),t.noteListView=e=>e.map(t.noteAutofillView),t.passportAutofillView=e=>{const t=(0,c.epochToDate)((0,c.vaultDateToViewDate)(e.ExpireDate)),r=(0,c.epochToDate)((0,c.vaultDateToViewDate)(e.DeliveryDate));return{...p(e),vaultType:n.VaultSourceType.Passport,idNumber:(0,d.defaultToEmptyString)(e.Number),country:(0,c.vaultCountryToViewCountry)(e.LocaleFormat),expirationDay:t.getDate(),expirationMonth:t.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET,expirationYear:t.getFullYear(),expirationDateFull:`${t.getFullYear()}-${t.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET}-${t.getDate()}`,issueDay:r.getDate(),issueMonth:r.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET,issueYear:r.getFullYear(),issueDateFull:`${r.getFullYear()}-${r.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET}-${r.getDate()}`,name:(0,c.identityToName)(e.identity)||e.Fullname||"",deliveryPlace:(0,d.defaultToEmptyString)(e.DeliveryPlace),creationDate:(0,d.defaultToZero)(e.CreationDatetime)}},t.passportListView=e=>e.map(t.passportAutofillView),t.paymentCardAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.PaymentCard,bank:(0,d.defaultToEmptyString)(e.Bank),cardNumber:(0,d.defaultToEmptyString)(e.CardNumber),cardNumberLastDigits:(0,i.getLastDigitsFromCardNumber)(e.CardNumber),color:e.Color||i.defaultColor,expireMonth:(0,d.defaultToEmptyString)(e.ExpireMonth),expireYear:(0,d.defaultToEmptyString)(e.ExpireYear),name:(0,d.defaultToEmptyString)(e.Name),ownerName:(0,d.defaultToEmptyString)(e.OwnerName),securityCode:(0,d.defaultToEmptyString)(e.SecurityCode),type:e.Type}),t.paymentCardListView=e=>e.map(t.paymentCardAutofillView),t.personalWebsiteAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.PersonalWebsite,name:(0,d.defaultToEmptyString)(e.Name),website:(0,d.defaultToEmptyString)(e.Website)}),t.personalWebsiteListView=e=>e.map(t.personalWebsiteAutofillView),t.phoneAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.Phone,name:(0,d.defaultToEmptyString)(e.PhoneName),numberInternational:(0,d.defaultToEmptyString)(e.NumberNational),number:(0,d.defaultToEmptyString)(e.Number),type:e.Type}),t.phoneListView=e=>e.map(t.phoneAutofillView),t.socialSecurityIdAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.SocialSecurityId,name:(0,c.identityToName)(e.identity)||e.SocialSecurityFullname||"",idNumber:(0,d.defaultToEmptyString)(e.SocialSecurityNumber),country:(0,c.vaultCountryToViewCountry)(e.LocaleFormat),creationDate:(0,d.defaultToZero)(e.CreationDatetime)}),t.socialSecurityIdListView=e=>e.map(t.socialSecurityIdAutofillView),t.passkeyAutofillView=e=>({...p(e),credentialId:e.CredentialId,privateKey:e.PrivateKey,rpId:e.RpId,rpName:e.RpName,userDisplayName:e.UserDisplayName,userHandle:e.UserHandle,vaultType:n.VaultSourceType.Passkey,counter:e.Counter,keyAlgorithm:e.KeyAlgorithm})},62922:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(42517),t),o(r(21871),t)},42517:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isOtherDataSource=t.isVaultDataSource=void 0;const n=r(24979);t.isVaultDataSource=e=>(0,n.isVaultSourceType)(e.type),t.isOtherDataSource=e=>(0,n.isOtherSourceType)(e.type)},21871:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vaultSourceTypeToDataModelTypeMap=void 0;const n=r(24979),o=r(53576);t.vaultSourceTypeToDataModelTypeMap={[n.VaultSourceType.Address]:o.DataModelType.KWAddress,[n.VaultSourceType.BankAccount]:o.DataModelType.KWBankStatement,[n.VaultSourceType.Company]:o.DataModelType.KWCompany,[n.VaultSourceType.Credential]:o.DataModelType.KWAuthentifiant,[n.VaultSourceType.CredentialCategory]:o.DataModelType.KWAuthCategory,[n.VaultSourceType.DriverLicense]:o.DataModelType.KWDriverLicence,[n.VaultSourceType.Email]:o.DataModelType.KWEmail,[n.VaultSourceType.FiscalId]:o.DataModelType.KWFiscalStatement,[n.VaultSourceType.GeneratedPassword]:o.DataModelType.KWGeneratedPassword,[n.VaultSourceType.IdCard]:o.DataModelType.KWIDCard,[n.VaultSourceType.Identity]:o.DataModelType.KWIdentity,[n.VaultSourceType.NoteCategory]:o.DataModelType.KWSecureNoteCategory,[n.VaultSourceType.Note]:o.DataModelType.KWSecureNote,[n.VaultSourceType.Passkey]:o.DataModelType.KWPasskey,[n.VaultSourceType.Passport]:o.DataModelType.KWPassport,[n.VaultSourceType.PaymentCard]:o.DataModelType.KWPaymentMean_creditCard,[n.VaultSourceType.PersonalWebsite]:o.DataModelType.KWPersonalWebsite,[n.VaultSourceType.Phone]:o.DataModelType.KWPhone,[n.VaultSourceType.SocialSecurityId]:o.DataModelType.KWSocialSecurityStatement}},7006:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(19083),o=r(50059);t.config={commands:{changeMasterPassword:{handler:n.changeMasterPassword}},queries:{},liveQueries:{liveChangeMasterPasswordStatus:{subject:o.getChangeMasterPasswordStatus$}}}},50059:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChangeMasterPasswordStatus$=t.emitChangeMasterPasswordStatus=void 0;const n=new(r(18948).Subject);t.emitChangeMasterPasswordStatus=e=>n.next(e),t.getChangeMasterPasswordStatus$=()=>n},33441:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeMasterPasswordStepNeeded=t.ChangeMasterPasswordCode=t.ChangeMPFlowPath=void 0;var n=r(61380);Object.defineProperty(t,"ChangeMPFlowPath",{enumerable:!0,get:function(){return n.ChangeMPFlowPath}}),Object.defineProperty(t,"ChangeMasterPasswordCode",{enumerable:!0,get:function(){return n.ChangeMasterPasswordCode}}),Object.defineProperty(t,"ChangeMasterPasswordStepNeeded",{enumerable:!0,get:function(){return n.ChangeMasterPasswordStepNeeded}})},35186:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(7006);t.bootstrap=e=>{e.register(n.config)}},19083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeMasterPassword=void 0;const n=r(50059),o=r(61380),a=r(33740),i=r(13141),s=r(37515),c=r(78238),u=r(41383),l=r(46298),d=r(88610),p=r(47820),f=r(16593),g=r(16194),m=r(61740),h=r(10203),y=r(61984),S=r(18948),v=r(58807);t.changeMasterPassword=async(e,t)=>{const{storeService:r,masterPasswordEncryptorService:E,remoteDataEncryptorService:A,sessionService:_,localStorageService:b,storageService:T,eventLoggerService:I,applicationModulesAccess:w}=e,{queries:{isMasterPasswordLeaked:C},commands:{temporaryResetMasterPasswordLeaked:O}}=w.createClients().masterPasswordSecurity,{flow:D}=t,P=await(0,a.preValidationForChangeMP)(e,t);if(!1===P.success)return P;const N=await(0,S.firstValueFrom)(C()),R=!!(0,v.isSuccess)(N)&&N.data,U=r.getState(),L=(0,f.isRemoteKeyActivatedSelector)(U)?A:E;(0,n.emitChangeMasterPasswordStatus)({type:o.ChangeMasterPasswordStepNeeded.DOWNLOAD,value:10});const M=(0,f.userLoginSelector)(U);if(!M)return(0,a.makeReturnErrorObject)(o.ChangeMasterPasswordCode.UNEXPECTED_STATE,D);r.dispatch((0,g.changeMPStart)());const k=await(0,l.getDataForMasterPasswordChange)(r,M,{});if((0,l.isApiError)(k))return(0,y.logChangeMasterPasswordError)(I,h.ChangeMasterPasswordError.DownloadError),r.dispatch((0,g.changeMPDone)()),(0,a.makeUnexpectedErrorObject)(k.message,D);const{serverKey:B}=r.getUserSession();if(!(0,a.isOtpStatusValid)(k.otpStatus,B))return(0,y.logChangeMasterPasswordError)(I,h.ChangeMasterPasswordError.LoginError),r.dispatch((0,g.changeMPDone)()),(0,a.makeReturnErrorObject)(o.ChangeMasterPasswordCode.OTP_PROBLEM,D);const{timestamp:F}=k,{transactions:x,sharingKeys:G}=k.data;try{const l=await(0,a.deCipherAllTransactions)(_,L,x),f=b.getInstance(),S=await f.doesLocalKeyExist();let v=null;S&&(v=await f.getLocalKey());const{publicKey:E}=G,A=await(0,a.decipherPrivateKey)(r,L,G);let w;switch(await(0,m.cleanRememberMeStorageData)(r,T),t.flow){case o.ChangeMPFlowPath.MP_TO_SSO:w=await(0,s.handleMigrationMPtoSso)(e,t,l,A,E,F);break;case o.ChangeMPFlowPath.SSO_TO_MP:w=await(0,c.handleMigrationSSOtoMP)(e,t,l,A,E,F);break;case o.ChangeMPFlowPath.TO_EMAIL_TOKEN:w=await(0,i.handleMigrationToEmailToken)(e,t,l,A,E,F);break;case o.ChangeMPFlowPath.ACCOUNT_RECOVERY:case o.ChangeMPFlowPath.USER_CHANGING_MP:default:w=await(0,u.handleUserChangingMP)(e,t,l,A,E,F)}return w.success?(v&&await _.getInstance().user.persistLocalKey(v),await(0,p.storeSessionCredentialForRecovery)(r,b),(0,n.emitChangeMasterPasswordStatus)({type:o.ChangeMasterPasswordStepNeeded.DONE,value:100}),await(0,a.resetMigrationState)(e,D),D!==o.ChangeMPFlowPath.ACCOUNT_RECOVERY&&D!==o.ChangeMPFlowPath.MP_TO_SSO&&D!==o.ChangeMPFlowPath.SSO_TO_MP||await(0,d.sessionDidOpen)(e),(0,y.logChangeMasterPasswordComplete)(I,R),r.dispatch((0,g.changeMPDone)()),O(void 0),{success:!0,response:{reason:o.ChangeMasterPasswordCode.SUCCESS}}):((0,y.logChangeMasterPasswordError)(I,h.ChangeMasterPasswordError.UnknownError),r.dispatch((0,g.changeMPDone)()),w)}catch(r){if((0,y.logChangeMasterPasswordError)(I,h.ChangeMasterPasswordError.UnknownError),t.flow===o.ChangeMPFlowPath.TO_EMAIL_TOKEN||t.flow===o.ChangeMPFlowPath.USER_CHANGING_MP||t.flow===o.ChangeMPFlowPath.ACCOUNT_RECOVERY){const r=(0,a.extractCurrentPassword)(U,t);(0,a.revertOnError)(e,L,{currentPassword:r,serverKey:B})}else(0,a.logoutUserOnError)(e);return(0,a.makeUnexpectedErrorObject)(r.message,D)}}},13141:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleMigrationToEmailToken=void 0;const n=r(10203),o=r(16593),a=r(50059),i=r(61380),s=r(33740),c=r(46298),u=r(16356),l=r(61984);t.handleMigrationToEmailToken=async(e,t,r,d,p,f)=>{const{storeService:g,sessionService:m,masterPasswordEncryptorService:h,eventLoggerService:y}=e,{newPassword:S,flow:v,currentPassword:E}=t,{serverKey:A}=g.getUserSession(),_=g.getState(),b=(0,o.userLoginSelector)(_);if(!b)return(0,l.logChangeMasterPasswordError)(y,n.ChangeMasterPasswordError.LoginError),(0,s.makeReturnErrorObject)(i.ChangeMasterPasswordCode.UNEXPECTED_STATE,v);const T=(0,s.returnProperCryptoConfig)(g);h.setInstance({raw:S},"",T),g.dispatch((0,u.updateMasterPassword)(S)),g.dispatch((0,u.updateServerKey)("")),g.dispatch((0,u.updateRemoteKey)(null));const{authTicket:I}=(0,o.authTicketInfoSelector)(_),w=await(0,s.cipherTransactionWithNewMP)(g,m,h,r,v),C=await(0,s.cipherPrivateKey)(h,d),O={timestamp:f,transactions:(0,s.formatTransaction)(w),updateVerification:{type:"email_token"},sharingKeys:{publicKey:p,privateKey:C},authTicket:I};(0,a.emitChangeMasterPasswordStatus)({type:i.ChangeMasterPasswordStepNeeded.UPLOADING,value:95});const D=await(0,c.uploadDataForMasterPasswordChange)(g,b,O);if((0,c.isApiError)(D))return(0,l.logChangeMasterPasswordError)(y,n.ChangeMasterPasswordError.UploadError),(0,s.revertOnError)(e,h,{currentPassword:E,serverKey:A}),(0,s.makeUnexpectedErrorObject)(D.message,v);const P=await(0,c.confirmMasterPasswordChangeDone)(g,b,{});return(0,c.isApiError)(P)?((0,l.logChangeMasterPasswordError)(y,n.ChangeMasterPasswordError.ConfirmationError),(0,s.revertOnError)(e,h,{currentPassword:E,serverKey:A}),(0,s.makeUnexpectedErrorObject)(P.message,v)):{success:!0,response:{reason:i.ChangeMasterPasswordCode.SUCCESS}}}},37515:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleMigrationMPtoSso=void 0;const n=r(10203),o=r(751),a=r(16593),i=r(50059),s=r(61380),c=r(33740),u=r(46298),l=r(61984);t.handleMigrationMPtoSso=async(e,t,r,d,p,f)=>{const{storeService:g,sessionService:m,remoteDataEncryptorService:h,eventLoggerService:y}=e,{newPassword:S,flow:v}=t,E=g.getState(),A=(0,a.userLoginSelector)(E);if(!A)return(0,l.logChangeMasterPasswordError)(y,n.ChangeMasterPasswordError.LoginError),(0,c.makeReturnErrorObject)(s.ChangeMasterPasswordCode.UNEXPECTED_STATE,v);const{remoteKey:_,serverKeyBase64:b}=await(0,o.prepareRemoteDataEncryptionServices)(e,S),T=[_],I={type:"sso",ssoServerKey:b},{authTicket:w}=(0,a.authTicketInfoSelector)(E),C=await(0,c.cipherTransactionWithNewMP)(g,m,h,r,v),O=await(0,c.cipherPrivateKey)(h,d),D={timestamp:f,transactions:(0,c.formatTransaction)(C),remoteKeys:T,updateVerification:I,sharingKeys:{publicKey:p,privateKey:O},authTicket:w};(0,i.emitChangeMasterPasswordStatus)({type:s.ChangeMasterPasswordStepNeeded.UPLOADING,value:95});const P=await(0,u.uploadDataForMasterPasswordChange)(g,A,D);if((0,u.isApiError)(P))return(0,l.logChangeMasterPasswordError)(y,n.ChangeMasterPasswordError.UploadError),(0,c.logoutUserOnError)(e),(0,c.makeUnexpectedErrorObject)(P.message,v);const N=await(0,u.confirmMasterPasswordChangeDone)(g,A,{});return(0,u.isApiError)(N)?((0,l.logChangeMasterPasswordError)(y,n.ChangeMasterPasswordError.ConfirmationError),(0,c.logoutUserOnError)(e),(0,c.makeUnexpectedErrorObject)(N.message,v)):{success:!0,response:{reason:s.ChangeMasterPasswordCode.SUCCESS}}}},78238:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleMigrationSSOtoMP=void 0;const n=r(10203),o=r(16593),a=r(50059),i=r(61380),s=r(33740),c=r(46298),u=r(16356),l=r(61984);t.handleMigrationSSOtoMP=async(e,t,r,d,p,f)=>{const{storeService:g,sessionService:m,masterPasswordEncryptorService:h,eventLoggerService:y}=e,{newPassword:S,flow:v}=t,E=g.getState(),A=(0,o.userLoginSelector)(E);if(!A)return(0,l.logChangeMasterPasswordError)(y,n.ChangeMasterPasswordError.LoginError),(0,s.makeReturnErrorObject)(i.ChangeMasterPasswordCode.UNEXPECTED_STATE,v);const _=(0,s.returnProperCryptoConfig)(g);h.setInstance({raw:S},"",_),g.dispatch((0,u.updateMasterPassword)(S)),g.dispatch((0,u.updateServerKey)("")),g.dispatch((0,u.updateRemoteKey)(null));const{authTicket:b}=(0,o.authTicketInfoSelector)(E),T=await(0,s.cipherTransactionWithNewMP)(g,m,h,r,v),I=await(0,s.cipherPrivateKey)(h,d),w={timestamp:f,transactions:(0,s.formatTransaction)(T),updateVerification:{type:"email_token"},sharingKeys:{publicKey:p,privateKey:I},authTicket:b};(0,a.emitChangeMasterPasswordStatus)({type:i.ChangeMasterPasswordStepNeeded.UPLOADING,value:95});const C=await(0,c.uploadDataForMasterPasswordChange)(g,A,w);if((0,c.isApiError)(C))return(0,l.logChangeMasterPasswordError)(y,n.ChangeMasterPasswordError.UploadError),(0,s.logoutUserOnError)(e),(0,s.makeUnexpectedErrorObject)(C.message,v);const O=await(0,c.confirmMasterPasswordChangeDone)(g,A,{});return(0,c.isApiError)(O)?((0,l.logChangeMasterPasswordError)(y,n.ChangeMasterPasswordError.ConfirmationError),(0,s.logoutUserOnError)(e),(0,s.makeUnexpectedErrorObject)(O.message,v)):{success:!0,response:{reason:i.ChangeMasterPasswordCode.SUCCESS}}}},41383:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleUserChangingMP=void 0;const n=r(10203),o=r(16593),a=r(50059),i=r(61380),s=r(33740),c=r(46298),u=r(16356),l=r(61984),d=r(33441);t.handleUserChangingMP=async(e,t,r,p,f,g)=>{const{storeService:m,sessionService:h,masterPasswordEncryptorService:y,eventLoggerService:S}=e,v=m.getState(),{newPassword:E,flow:A}=t,_=(0,s.extractCurrentPassword)(v,t),{serverKey:b}=m.getUserSession(),T=(0,o.userLoginSelector)(v);if(!T)return(0,l.logChangeMasterPasswordError)(S,n.ChangeMasterPasswordError.LoginError),(0,s.makeReturnErrorObject)(i.ChangeMasterPasswordCode.UNEXPECTED_STATE,A);y.setInstance({raw:E},b),m.dispatch((0,u.updateMasterPassword)(E));const I=await(0,s.cipherTransactionWithNewMP)(m,h,y,r),w=await(0,s.cipherPrivateKey)(y,p),C={timestamp:g,transactions:(0,s.formatTransaction)(I),sharingKeys:{publicKey:f,privateKey:w},uploadReason:A===d.ChangeMPFlowPath.ACCOUNT_RECOVERY?"complete_account_recovery":void 0};(0,a.emitChangeMasterPasswordStatus)({type:i.ChangeMasterPasswordStepNeeded.UPLOADING,value:95});const O=await(0,c.uploadDataForMasterPasswordChange)(m,T,C);if((0,c.isApiError)(O))return(0,l.logChangeMasterPasswordError)(S,n.ChangeMasterPasswordError.UploadError),(0,s.revertOnError)(e,y,{currentPassword:_,serverKey:b}),(0,s.makeUnexpectedErrorObject)(O.message,A);const D=await(0,c.confirmMasterPasswordChangeDone)(m,T,{});return(0,c.isApiError)(D)?((0,l.logChangeMasterPasswordError)(S,n.ChangeMasterPasswordError.ConfirmationError),(0,s.revertOnError)(e,y,{currentPassword:_,serverKey:b}),(0,s.makeUnexpectedErrorObject)(D.message,A)):{success:!0,response:{reason:i.ChangeMasterPasswordCode.SUCCESS}}}},15209:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(35186);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},61984:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logChangeMasterPasswordError=t.logChangeMasterPasswordComplete=t.logChangeMasterPasswordCancel=t.logChangeMasterPasswordStart=void 0;const n=r(10203),o=(e,t,r,o)=>{e.logEvent(new n.UserChangeMasterPasswordEvent({flowStep:t,errorName:r||void 0,isLeaked:o}))};t.logChangeMasterPasswordStart=e=>o(e,n.FlowStep.Start),t.logChangeMasterPasswordCancel=e=>o(e,n.FlowStep.Cancel),t.logChangeMasterPasswordComplete=(e,t)=>o(e,n.FlowStep.Complete,void 0,t),t.logChangeMasterPasswordError=(e,t)=>o(e,n.FlowStep.Error,t)},62844:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeMPinProgressSelector=void 0,t.changeMPinProgressSelector=e=>e.userSession.changeMPData.changeMPinProgress},23486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cipherPrivateKey=void 0;const n=r(56668);t.cipherPrivateKey=async(e,t)=>{const r=(0,n.utf16ToDeflatedUtf8)(t,{skipDeflate:!0});return await e.getInstance().encrypt(r)}},17696:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cipherTransactionWithNewMP=void 0;const n=r(61380),o=r(33740),a=r(27627),i=r(16859),s=r(75270),c=r(91301),u=r(55623),l=r(27517);t.cipherTransactionWithNewMP=async(e,t,r,d,p,f=!0)=>{const{announce:g}=t.getInstance().user.getSyncArgs(),m=await Promise.all(d.map((async t=>{if(p&&"SETTINGS"===t.type&&t.content){const r={...t,content:await(0,o.getBaseModelFromXml)(g,t.content)};switch(p){case n.ChangeMPFlowPath.MP_TO_SSO:const a={...r.content,CryptoUserPayload:c.CRYPTO_NODERIVATION_HMAC64};return{...r,content:(0,s.getTransactionXml)(a)};case n.ChangeMPFlowPath.SSO_TO_MP:const i={forceSalt:(0,u.getRandomValues)(16),cryptoConfig:(0,o.returnProperCryptoConfig)(e)},d=(0,o.returnProperSettingContent)(e,r,i);return e.dispatch((0,l.editPersonalSettings)(d)),{...t,content:(0,s.getTransactionXml)(d)};case n.ChangeMPFlowPath.ACCOUNT_RECOVERY:case n.ChangeMPFlowPath.USER_CHANGING_MP:case n.ChangeMPFlowPath.TO_EMAIL_TOKEN:}}return t}))),h=m.length,y=f?(0,o.initializeProgress)(n.ChangeMasterPasswordStepNeeded.ENCRYPTING,100,h):null,S=async(e,t)=>{y&&y(),t(await(0,i.encryptSingleTransaction)(r,e))};return await new Promise((e=>{(0,a.asyncMapLimit)(m,S,e,100)}))}},68328:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deCipherAllTransactions=void 0;const n=r(83638),o=r(61380),a=r(33740),i=r(27627),s=r(16859),c=r(82761),u=r(70252),l=r(92263);t.deCipherAllTransactions=async(e,t,r,d=!0)=>{const{announce:p}=e.getInstance().user.getSyncArgs(),f=t.getInstance(),g=r.length,m=d?(0,a.initializeProgress)(o.ChangeMasterPasswordStepNeeded.DECRYPTING,100,g):null,h=async(e,t)=>{if(m&&m(),e.content)try{const r=await(0,s.decryptTransactionContent)(f,p,e);t({...e,content:r})}catch(r){if(e.type===n.TransactionType.SETTINGS){const t=l.CarbonError.fromAnyError(r).addContextInfo("CHANGE_MP","decipherAllTransactions").addAdditionalInfo({comment:r.message??`Transaction of type ${e.type} couldn't be decrypted`});throw(0,u.sendExceptionLog)({error:t}),r}t(null)}else t(e)},y=await new Promise((e=>{(0,i.asyncMapLimit)(r,h,e,100)}));return(0,c.sanitizeTransactions)(y)}},74931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decipherPrivateKey=void 0;const n=r(56668),o=r(16356);t.decipherPrivateKey=async(e,t,r)=>{const a=await t.getInstance().decrypt(r.privateKey),i=(0,n.deflatedUtf8ToUtf16)(a,{skipInflate:!0}),s={privateKey:i,publicKey:r.publicKey};return e.dispatch((0,o.updateKeyPair)(s)),i}},60950:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatTransaction=void 0,t.formatTransaction=e=>e.map((({action:e,content:t,identifier:r,time:n,type:o})=>({action:e,content:t,identifier:r,time:n,type:o})))},10078:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBaseModelFromXml=void 0;const n=r(80469),o=r(16859),a=r(51104);t.getBaseModelFromXml=async(e,t)=>{const r=await(0,o.parseTransactionContentXml)(e,t);return a.fixPersonalSettingTypes.fromTransaction((0,n.fixKwType)(r))}},33740:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(23486),t),o(r(17696),t),o(r(74931),t),o(r(68328),t),o(r(60950),t),o(r(10078),t),o(r(39463),t),o(r(90673),t),o(r(17433),t),o(r(99849),t),o(r(14224),t),o(r(61484),t),o(r(16494),t),o(r(55612),t),o(r(78028),t),o(r(55429),t)},39463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeProgress=void 0;const n=r(50059),o=r(61380);t.initializeProgress=(e,t,r)=>{const a=e===o.ChangeMasterPasswordStepNeeded.DECRYPTING?10:50;let i=0;return()=>{i++,i%t!=0&&i!==r||(0,n.emitChangeMasterPasswordStatus)({type:e,value:a+Math.round(40*i/r)})}}},90673:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isOtpStatusValid=void 0,t.isOtpStatusValid=(e,t)=>{switch(e){case"login":return t&&t.length>0;case"disabled":case"newDevice":case"sso":return!t||0===t.length;default:return!1}}},17433:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logoutUserOnError=void 0;const n=r(16194),o=r(1965),a=r(16593);t.logoutUserOnError=async e=>{const{storeService:t,storageService:r,sessionService:i,applicationModulesAccess:s}=e,c=(0,a.userLoginSelector)(t.getState());t.dispatch((0,n.changeMPDone)()),c&&(0,o.wipeOutLocalAccounts)(r,s,[c]),i.close()}},99849:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeReturnErrorObject=void 0;const n=r(50059),o=r(61380),a=r(70252);t.makeReturnErrorObject=(e,t)=>{(0,n.emitChangeMasterPasswordStatus)({type:o.ChangeMasterPasswordStepNeeded.ERROR,value:100});const r=new Error(`[ChangeMP] ${t}: ${e}`);return(0,a.sendExceptionLog)({error:r}),{success:!1,error:{code:e}}}},14224:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeUnexpectedErrorObject=void 0;const n=r(61380),o=r(70252);t.makeUnexpectedErrorObject=(e,t)=>{const r=new Error(`[ChangeMP] - Unexpected - ${t}: ${e}`);return(0,o.sendExceptionLog)({error:r}),{success:!1,error:{code:n.ChangeMasterPasswordCode.UNKNOWN_ERROR,message:e}}}},61484:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preValidationForChangeMP=t.extractCurrentPassword=void 0;const n=r(61380),o=r(57903),a=r(64948),i=r(16593),s=r(29303),c=r(88205),u=r(33740),l=r(28287),d=r(71012);t.extractCurrentPassword=(e,t)=>t.flow===n.ChangeMPFlowPath.ACCOUNT_RECOVERY?(0,s.recoveryDataSelector)(e).currentPassword:t.currentPassword,t.preValidationForChangeMP=async(e,t)=>{const{masterPasswordEncryptorService:r,storeService:s}=e,{newPassword:p,flow:f}=t;if(!await(0,o.waitUntilSyncComplete)(s))return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.SYNC_PROGRESS,f);const g=s.getState(),m=(0,c.featuresSelector)(g);if(!s.getAccountInfo().isAuthenticated)return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.INNACTIVE_SESSION,f);if(m[n.CHANGEMP_WEB_BLOCKED_FEATURE_FLIP])return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.FEATURE_BLOCKED,f);const h=await(0,a.evaluatePasswordStrengthOutOfFive)(p);if(!p||!h||h<d.minAcceptablePasswordStrength)return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.MP_STRENGTH_ERROR,f);const y=(0,i.isRemoteKeyActivatedSelector)(g),S=9e5,{authTicket:v,date:E}=(0,i.authTicketInfoSelector)(g);if(!(0,i.userLoginSelector)(g))return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.UNEXPECTED_STATE,f);switch(t.flow){case n.ChangeMPFlowPath.MP_TO_SSO:if(!v||!E||Date.now()-E>S)return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.INVALID_TOKEN,f);if(y)return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.UNEXPECTED_STATE,f);break;case n.ChangeMPFlowPath.SSO_TO_MP:if(!v||!E||Date.now()-E>S)return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.INVALID_TOKEN,f);if(!y)return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.UNEXPECTED_STATE,f);break;case n.ChangeMPFlowPath.ACCOUNT_RECOVERY:break;case n.ChangeMPFlowPath.TO_EMAIL_TOKEN:case n.ChangeMPFlowPath.USER_CHANGING_MP:{const{currentPassword:e}=t;if(e===p)return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.MP_ERROR,f);if(!await(0,l.validateMasterPassword)(s,r,e))return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.WRONG_PASSWORD,f)}break;default:return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.UNEXPECTED_STATE,f)}return{success:!0}}},16494:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetMigrationState=void 0;const n=r(61380),o=r(95363),a=r(7624);t.resetMigrationState=async(e,t)=>{if(t===n.ChangeMPFlowPath.USER_CHANGING_MP||t===n.ChangeMPFlowPath.TO_EMAIL_TOKEN)return;const{storeService:r}=e;r.dispatch((0,o.resetRecoverySessionData)()),r.dispatch((0,a.resetSSOSettings)()),t===n.ChangeMPFlowPath.MP_TO_SSO&&r.dispatch((0,a.storeSSOSettings)({ssoUser:!0}))}},55612:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.returnProperCryptoConfig=void 0;const n=r(56668),o=r(65675),a=r(92310);t.returnProperCryptoConfig=e=>{let t=n.ARGON2_DEFAULT_PAYLOAD;const r=(0,a.currentSpaceInfoSelector)(e.getState());r?.cryptoForcedPayload&&(t=r.cryptoForcedPayload);try{return(0,o.parsePayload)(t).cryptoConfig}catch(e){return(0,o.makeFlexibleMarkerCryptoConfig)("argon2d")}}},78028:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.returnProperSettingContent=void 0;const n=r(56668),o=r(16038),a=r(95648),i=r(92310);t.returnProperSettingContent=(e,t,r)=>{let s=n.ARGON2_DEFAULT_PAYLOAD;const c=(0,i.currentSpaceInfoSelector)(e.getState());return c?.cryptoForcedPayload&&(s=c.cryptoForcedPayload),{...(0,a.makeBasePersonalSettings)(),...t.content,CryptoUserPayload:s,CryptoFixedSalt:(0,o.bufferToBase64)(r.forceSalt)}}},55429:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.revertOnError=void 0;const n=r(16194),o=r(16356);t.revertOnError=async(e,t,r)=>{const{currentPassword:a,serverKey:i}=r,{storeService:s}=e;t.setInstance({raw:a},i),s.dispatch((0,o.updateMasterPassword)(a)),s.dispatch((0,o.updateServerKey)(i)),s.dispatch((0,n.changeMPDone)())}},61380:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeMasterPasswordStepNeeded=t.CHANGEMP_WEB_BLOCKED_FEATURE_FLIP=t.ChangeMasterPasswordCode=t.ChangeMPFlowPath=void 0,function(e){e.USER_CHANGING_MP="USER_CHANGING_MP",e.MP_TO_SSO="MP_TO_SSO",e.SSO_TO_MP="SSO_TO_MP",e.TO_EMAIL_TOKEN="EMAIL_TOKEN",e.ACCOUNT_RECOVERY="ACCOUNT_RECOVERY"}(t.ChangeMPFlowPath||(t.ChangeMPFlowPath={})),function(e){e.FEATURE_BLOCKED="feature_blocked",e.INNACTIVE_SESSION="inactive_session",e.INVALID_TOKEN="invalid_token",e.OTP_PROBLEM="otp_problem",e.MP_ERROR="mp_error",e.MP_STRENGTH_ERROR="mp_strength_error",e.SUCCESS="success",e.SYNC_PROGRESS="sync_in_progress",e.UNKNOWN_ERROR="unknown_error",e.WRONG_PASSWORD="wrong_password",e.UNEXPECTED_STATE="unexpected_state"}(t.ChangeMasterPasswordCode||(t.ChangeMasterPasswordCode={})),t.CHANGEMP_WEB_BLOCKED_FEATURE_FLIP="disableChangeMpOnWeb",function(e){e.DOWNLOAD="download",e.DECRYPTING="decrypting",e.ENCRYPTING="encrypting",e.UPLOADING="uploading",e.DONE="done",e.ERROR="error"}(t.ChangeMasterPasswordStepNeeded||(t.ChangeMasterPasswordStepNeeded={}))},20849:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToDebugEvents=void 0;const n=r(95623),o=e=>(t,r)=>{const{message:n,details:o={}}=r;t[e]({date:(new Date).toJSON(),message:n,optionalParams:Object.keys(o).reduce(((e,t)=>[...e,o[t]]),[])})};t.subscribeToDebugEvents=function(e){(0,n.redirectConsoleLogs)((t=>{const{level:r=n.LogLevel.Debug}=t;(e=>{switch(e){case n.LogLevel.Error:return o("error");case n.LogLevel.Warn:return o("warning");case n.LogLevel.Info:return o("info");case n.LogLevel.Debug:case n.LogLevel.Verbose:default:return o("log")}})(r)(e,t)}))}},44273:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToDiagnosticEvents=void 0;let r=null;t.subscribeToDiagnosticEvents=function(e){r=e,e.decipheringDiagnosticLogEvent.on((e=>e))},t.default=function(){return r}},39947:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.carbonE2EConnector=void 0;const n=r(71796);t.carbonE2EConnector={registerFreeTrial:(0,n.slot)(),getTeamTokens:(0,n.slot)(),confirmFreeTrial:(0,n.slot)(),getPremiumStatus:(0,n.slot)(),proposeMembers:(0,n.slot)(),acceptTeamInvite:(0,n.slot)(),getTokenForTestUser:(0,n.slot)(),getServiceProviderToken:(0,n.slot)(),getSubscriptionTokenForTestUser:(0,n.slot)(),createOrUpdateDarkWebBreach:(0,n.slot)(),addPrivateBreach:(0,n.slot)(),createPublicBreach:(0,n.slot)(),forceBreachRefresh:(0,n.slot)(),getUserCryptoPayload:(0,n.slot)()}},58427:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToE2EEvents=void 0;const n=r(3674),o=r(17338),a=r(37864),i=r(71602),s=r(66916),c=r(32006),u=r(79734);t.subscribeToE2EEvents=function(e,t){const r=(0,o.getCoreServices)(t),l=(0,n.makeTeamAdminController)(r.storeService,r.wsService);e.registerFreeTrial.on(l.registerFreeTrial),e.getTeamTokens.on(l.getTeamTokens),e.confirmFreeTrial.on(l.confirmFreeTrial),e.getPremiumStatus.on(l.getPremiumStatus),e.proposeMembers.on(l.proposeMembers),e.acceptTeamInvite.on(l.acceptTeamInvite),e.getTokenForTestUser.on((e=>(0,a.getTokenForKwUser)(r,e))),e.getServiceProviderToken.on((e=>(0,i.getServiceProviderToken)(r,e))),e.getSubscriptionTokenForTestUser.on((e=>(0,s.getSubscriptionTokenForTestUser)(r,e))),e.createOrUpdateDarkWebBreach.on((e=>(0,u.createOrUpdateDarkWebBreachHelper)(r,e))),e.addPrivateBreach.on((e=>(0,u.addPrivateBreachHelper)(r,e))),e.createPublicBreach.on((e=>(0,u.createPublicBreachHelper)(r,e))),e.forceBreachRefresh.on((()=>{(0,c.forceBreachRefreshHandler)(r)})),e.getUserCryptoPayload.on((()=>r.storeService.getPersonalSettings().CryptoUserPayload))}},30855:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToE2EEvents=t.carbonE2EConnector=void 0;var n=r(39947);Object.defineProperty(t,"carbonE2EConnector",{enumerable:!0,get:function(){return n.carbonE2EConnector}});var o=r(58427);Object.defineProperty(t,"subscribeToE2EEvents",{enumerable:!0,get:function(){return o.subscribeToE2EEvents}})},19697:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEventBus=void 0;let r=null;t.setEventBus=e=>{r=e},t.default=function(){return r}},39421:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEventBus=void 0;let r=null;t.setEventBus=e=>{r=e},t.default=function(){return r}},44242:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToMaverickEvents=void 0;const n=r(19065),o=r(17338),a=r(38865),i=r(39421);t.subscribeToMaverickEvents=function(e,t){(0,i.setEventBus)(e);const r=(0,o.getCoreServices)(t),s=(0,n.makeDataManagementController)(r);e.savePersonalDataItem.on((e=>{s.savePersonalDataItem(e)})),e.filledDataItem.on((e=>s.updateMetadataItemFilledOnPage(e.id,e.url,e.dataType))),e.updateWebOnboardingMode.on((e=>(0,a.updateWebOnboardingMode)(r.storeService,r.sessionService,e)))}},21726:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEventBus=void 0;let r=null;t.setEventBus=e=>{r=e},t.default=function(){return r}},4798:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToExtensionEvents=void 0;const n=r(2246),o=r(90622),a=r(70252),i=r(38865),s=r(25576),c=r(17338),u=r(5464),l=r(88610),d=r(21726);t.subscribeToExtensionEvents=function(e,t){(0,d.setEventBus)(e);const r=(0,c.getCoreServices)(t),{storeService:p,storageService:f}=r,g=(0,l.makeLoginController)(r),m=(0,u.makeSessionController)(r);e.getAccountInfo.on((()=>m.getAndTriggerRefreshAccountInfo())),e.getDevicesList.on((()=>m.getDevicesList().then((e=>({devicesList:e}))))),e.getLocalAccountsList.on((()=>(0,o.getLocalAccounts)(p,f).then((e=>({localAccounts:e}))))),e.getAnonymousLogsMetadata.on((()=>({anonymouscomputerid:(0,n.getCommonAppSetting)("anonymousComputerId")}))),e.askWebsiteInfo.on((({fullUrl:e})=>m.askWebsiteInfo(e))),e.deactivateDevice.on((e=>{m.deactivateDevice(e.deviceId)})),e.changeDeviceName.on((e=>{m.changeDeviceName(e.deviceId,e.updatedName)})),e.checkIfMasterPasswordIsValid.on((e=>m.validateMasterPassword(e.masterPassword).then((e=>({isMasterPasswordValid:e}))))),e.closeSession.on((()=>m.closeSession())),e.lockSession.on((()=>m.lockSession())),e.openSession.on((({login:e,password:t})=>g.openSession(e,{password:t}))),e.openSessionWithToken.on((({login:e,password:t,token:r,persistData:n,deviceName:o})=>{g.openSessionWithToken(e,t,r,n?s.PersistData.PERSIST_DATA_YES:s.PersistData.PERSIST_DATA_NO,o)})),e.openSessionWithDashlaneAuthenticator.on((({login:e,password:t,persistData:r,deviceName:n})=>{g.openSessionWithDashlaneAuthenticator(e,t,r?s.PersistData.PERSIST_DATA_YES:s.PersistData.PERSIST_DATA_NO,n)})),e.cancelDashlaneAuthenticatorRegistration.on((()=>{g.cancelDashlaneAuthenticatorRegistration()})),e.openSessionResendToken.on((e=>{g.openSessionResendToken(e.login)})),e.openSessionWithOTP.on((e=>{g.openSessionWithOTP(e.login,e.password,e.otp)})),e.openSessionWithOTPForNewDevice.on((({login:e,password:t,otp:r,persistData:n,deviceName:o})=>{g.openSessionWithOTPForNewDevice(e,t,r,n?s.PersistData.PERSIST_DATA_YES:s.PersistData.PERSIST_DATA_NO,o)})),e.openSessionWithMasterPassword.on((e=>{g.openSessionWithMasterPassword(e.login,e.password,{rememberMasterPassword:e.rememberPassword,serverKey:e.serverKey})})),e.openExtraDeviceSession.on((e=>{g.openExtraDeviceSession(e.login,{password:e.password,serverKey:e.serverKey})})),e.openSessionWithExtraDeviceToken.on((e=>g.openSessionWithExtraDeviceToken(e.login,e.extraDeviceToken,e.persistData?s.PersistData.PERSIST_DATA_YES:s.PersistData.PERSIST_DATA_NO,{password:e.password,deviceName:e.deviceName}))),e.sessionForceSync.on((e=>{m.sessionForceSync(e.trigger)})),e.updateWebOnboardingMode.on((e=>{i.updateWebOnboardingMode(r.storeService,r.sessionService,e)})),e.openDevSession.on((()=>{})),e.exceptionLog.on((e=>(0,a.sendTypedExceptionLog)("extensionException",e)))}},75391:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToLeelooEvents=void 0;const n=r(71703),o=r(70252),a=r(25576),i=r(90622),s=r(17338),c=r(5464),u=r(38865),l=r(88610),d=r(15444),p=r(3674),f=r(63623),g=r(58415),m=r(97124),h=r(33332),y=r(28096),S=r(89675),v=r(19065),E=r(19697);t.subscribeToLeelooEvents=function(e,t){(0,E.setEventBus)(e);const r=(0,s.getCoreServices)(t),{storeService:A,localStorageService:_,wsService:b,sessionService:T,storageService:I}=r,w=(0,n.makeAccountCreationController)(r),C=(0,c.makeSessionController)(r),O=(0,l.makeLoginController)(r),D=(0,v.makeDataManagementController)(r),P=(0,d.makeRecoveryController)(A,b),N=(0,S.makeSettingsController)(A,b),R=(0,p.makeTeamAdminController)(A,b),U=(0,m.makeSharingService)(A,b),L=(0,g.makeDirectorySyncController)({storeService:A,localStorageService:_,wsService:b,sessionService:T,sharingService:U}),M=(0,h.makeStaticDataController)();e.getUki.on((()=>C.getUki())),e.getLoginStatus.on((()=>C.getLoginStatus())),e.savePaymentCard.on((e=>{D.savePaymentCardFromClient(e)})),e.savePersonalDataItem.on((e=>D.savePersonalDataItem(e))),e.removePersonalDataItem.on((e=>D.removePersonalDataItem(e.id))),e.getAccountInfo.on((()=>C.getAndTriggerRefreshAccountInfo())),e.getDevicesList.on((()=>C.getDevicesList().then((e=>({devicesList:e}))))),e.getLocalAccountsList.on((()=>(0,i.getLocalAccounts)(A,I).then((e=>({localAccounts:e}))))),e.getTemporaryToken.on((()=>C.getTemporaryToken().then((e=>({temporaryToken:e}))))),e.deactivateDevice.on((e=>{C.deactivateDevice(e.deviceId)})),e.changeDeviceName.on((e=>{C.changeDeviceName(e.deviceId,e.updatedName)})),e.cancelPremiumSubscription.on((()=>C.cancelPremiumSubscription())),e.getInvoices.on((()=>C.getInvoices().then((e=>({invoices:e}))))),e.closeSession.on((()=>C.closeSession())),e.lockSession.on((()=>C.lockSession())),e.resumeSession.on((()=>C.resumeSession())),e.getPersonalSettings.on((()=>C.getPersonalSettings().then((e=>e)))),e.openSession.on((({login:e,password:t})=>O.openSession(e,{password:t}))),e.openSessionWithToken.on((({login:e,password:t,token:r,persistData:n,deviceName:o})=>{O.openSessionWithToken(e,t,r,n?a.PersistData.PERSIST_DATA_YES:a.PersistData.PERSIST_DATA_NO,o)})),e.openSessionWithDashlaneAuthenticator.on((({login:e,password:t,persistData:r,deviceName:n})=>{O.openSessionWithDashlaneAuthenticator(e,t,r?a.PersistData.PERSIST_DATA_YES:a.PersistData.PERSIST_DATA_NO,n)})),e.cancelDashlaneAuthenticatorRegistration.on((()=>{O.cancelDashlaneAuthenticatorRegistration()})),e.openSessionResendToken.on((e=>{O.openSessionResendToken(e.login)})),e.openSessionWithOTP.on((e=>{O.openSessionWithOTP(e.login,e.password,e.otp,void 0,e.withBackupCode)})),e.openSessionWithOTPForNewDevice.on((({login:e,password:t,otp:r,persistData:n,deviceName:o,withBackupCode:i})=>{O.openSessionWithOTPForNewDevice(e,t,r,n?a.PersistData.PERSIST_DATA_YES:a.PersistData.PERSIST_DATA_NO,o,i)})),e.openSessionWithMasterPassword.on((e=>O.openSessionWithMasterPassword(e.login,e.password,{rememberMasterPassword:e.rememberPassword,requiredPermissions:e.requiredPermissions,serverKey:e.serverKey}))),e.openExtraDeviceSession.on((e=>{O.openExtraDeviceSession(e.login,{password:e.password,serverKey:e.serverKey})})),e.openSessionWithExtraDeviceToken.on((e=>O.openSessionWithExtraDeviceToken(e.login,e.extraDeviceToken,e.persistData?a.PersistData.PERSIST_DATA_YES:a.PersistData.PERSIST_DATA_NO,{password:e.password,deviceName:e.deviceName}))),e.sessionForceSync.on((e=>C.sessionForceSync(e.trigger))),e.exceptionLog.on((e=>(0,o.sendTypedExceptionLog)("leelooException",e))),e.teamUpdated.on((e=>R.teamUpdateHandler(e).then((e=>({errors:e}))))),e.createUserGroup.on((e=>R.createUserGroupAction(T,e))),e.deleteUserGroup.on((e=>R.deleteUserGroupAction(e))),e.renameUserGroup.on((e=>R.renameUserGroupAction(e))),e.inviteUserGroupMembers.on((e=>R.inviteUserGroupMembersAction(e))),e.revokeUserGroupMembers.on((e=>R.revokeUserGroupMembersAction(e))),e.updateUserGroupMembers.on((e=>R.updateUserGroupMembersAction(e))),e.createAccountStep1.on((e=>w.createAccount(e))),e.createAccountStep2.on((e=>w.confirmAccountCreation(e))),e.checkLogin.on((e=>w.checkLogin(e))),e.getMasterPasswordResetDemandList.on((e=>P.getMasterPasswordResetDemandList(e))),e.acceptMasterPasswordResetDemand.on((e=>P.acceptMasterPasswordResetDemand(e))),e.checkIfMasterPasswordIsValid.on((e=>C.validateMasterPassword(e.masterPassword).then((e=>({isMasterPasswordValid:e}))))),e.declineMasterPasswordResetDemand.on((e=>P.declineMasterPasswordResetDemand(e))),e.getMembers.on((e=>R.getMembers(e))),e.addTeamAdmin.on((e=>R.addTeamAdmin(e))),e.removeTeamAdmin.on((e=>R.removeTeamAdmin(e))),e.setTeamSettings.on((e=>N.setTeamSettings(e))),e.updateWebOnboardingMode.on((e=>u.updateWebOnboardingMode(A,T,e))),e.checkDirectorySyncKeyResponse.on((e=>{const{teamId:t,publicKey:r,requestId:n,response:o}=e;"validated"===o?L.keyValidatedByTacAdmin(t,r):"rejected"===o&&L.keyRejectedByTacAdmin(t,n)})),e.queryStaticDataCollections.on((e=>M.query(e))),e.sendSharingResponse.on((e=>(0,f.handleSharingResponse)(A,T,e))),e.getDataModel.on((()=>(0,y.getDataUpdates)(A).obfuscatedPersonalDataToSend)),e.getSharingSync.on((()=>A.getState().userSession.sharingSync)),e.getSharingData.on((()=>A.getSharingData())),e.revokeSharing.on((({itemGroupId:e,recipient:t})=>(0,f.handleRevokeSharing)(A,T,b,e,t))),e.getOtpForCredential.on((e=>C.getOtpForCredential(e))),e.updateSharingPermission.on((({itemGroupId:e,recipient:t,permission:r})=>(0,f.handleUpdateSharingPermission)(A,T,b,e,t,r))),e.setPendingElementsAsSeen.on((e=>(0,f.setPendingElementsAsSeen)(A,_,e))),e.isUserLastAdminOnItem.on((e=>(0,f.isUserLastAdminOnItem)(A,e))),e.doesUserReceiveItemViaGroup.on((e=>(0,f.doesUserReceiveItemViaGroup)(A,e)))}},95465:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(51950),o=r(24327),a=r(82485);t.config={commands:{generateCredentialOTP:{handler:n.generateCredentialOTP}},queries:{getCredentialOTP:{selector:a.credentialOTPSelector}},liveQueries:{liveCredentialOTP:{operator:o.credentialOTP$}}}},96916:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenerateCredentialOTPError=t.GenerateCredentialOTPStatus=void 0;var n=r(2634);Object.defineProperty(t,"GenerateCredentialOTPStatus",{enumerable:!0,get:function(){return n.GenerateCredentialOTPStatus}}),Object.defineProperty(t,"GenerateCredentialOTPError",{enumerable:!0,get:function(){return n.GenerateCredentialOTPError}})},80656:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(95465);t.bootstrap=e=>{e.register(n.config)}},51950:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateCredentialOTP=t.getNextOtpRefresh=void 0;const n=r(73439),o=r(11406),a=r(2634),i=r(19736),s=3e4;function c(){const e=Math.floor(Date.now()/s)*s;return new Date(e+s).getTime()}t.getNextOtpRefresh=c,t.generateCredentialOTP=async function({storeService:e},t){const r=e.getState(),u=(0,i.credentialSelector)(r,t);if(!u)return{status:a.GenerateCredentialOTPStatus.ERROR,error:{code:a.GenerateCredentialOTPError.NoCredentialFound}};if(!u.OtpSecret)return{status:a.GenerateCredentialOTPStatus.ERROR,error:{code:a.GenerateCredentialOTPError.NoOTPSecret}};const l=(0,n.generateOtpFromSecret)(u.OtpSecret);if(0===l.length)return{status:a.GenerateCredentialOTPStatus.ERROR,error:{code:a.GenerateCredentialOTPError.OTPGenerationError}};const d=c(),p={code:l,validityTime:s,validityEndDate:d};return e.dispatch((0,o.credentialOTPUpdatedAction)(t,p)),{status:a.GenerateCredentialOTPStatus.SUCCESS,credentialOtp:p}}},21647:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(80656);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},24327:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTP$=void 0;const n=r(18948),o=r(3343),a=r(82485);t.credentialOTP$=e=>(0,n.pipe)((0,o.map)((t=>(0,a.credentialOTPSelector)(t,e))),(0,o.distinctUntilChanged)())},82485:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTPSelector=t.credentialOTPsSelector=void 0,t.credentialOTPsSelector=e=>e.userSession.credentialOTPs,t.credentialOTPSelector=(e,r)=>(0,t.credentialOTPsSelector)(e)[r]},2634:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenerateCredentialOTPError=t.GenerateCredentialOTPStatus=void 0,function(e){e.SUCCESS="success",e.ERROR="error"}(t.GenerateCredentialOTPStatus||(t.GenerateCredentialOTPStatus={})),function(e){e.NoCredentialFound="No credential found",e.OTPGenerationError="OTP generation error",e.NoOTPSecret="Credential does not support otp"}(t.GenerateCredentialOTPError||(t.GenerateCredentialOTPError={}))},49267:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(75653),o=r(57193);t.config={commands:{changeUserCrypto:{handler:o.changeUserCrypto}},queries:{getCanUserChangeCrypto:{selector:n.canUserSelectCryptoSelector},getUserDerivationMethod:{selector:n.userDerivationMethodSelector}},liveQueries:{liveUserDerivationMethod:{operator:n.userDerivationMethodSelector$}}}},39319:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SupportedDerivationMethods=void 0;var n=r(64816);Object.defineProperty(t,"SupportedDerivationMethods",{enumerable:!0,get:function(){return n.SupportedDerivationMethods}})},21344:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(49267);t.bootstrap=e=>{e.register(n.config)}},21583:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(21344);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},75653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userDerivationMethodSelector$=t.userDerivationMethodSelector=t.canUserSelectCryptoSelector=t.teamCryptoForcedPayloadSelector=t.hasCryptoMigrationPhase2EnabledSelector=t.hasCryptoMigrationPhase1EnabledSelector=void 0;const n=r(18948),o=r(3343),a=r(7944),i=r(88205),s=r(65675),c=r(16593),u=r(64816);t.hasCryptoMigrationPhase1EnabledSelector=e=>(0,i.hasFeatureSelector)(e,"itadmin_SAEX_CryptoMigration_Phase1"),t.hasCryptoMigrationPhase2EnabledSelector=e=>(0,i.hasFeatureSelector)(e,"itadmin_SAEX_CryptoMigration_Phase2"),t.teamCryptoForcedPayloadSelector=e=>{const t=(0,a.activeSpacesSelector)(e)[0];return t?.details.info.cryptoForcedPayload??""},t.canUserSelectCryptoSelector=e=>!(0,t.teamCryptoForcedPayloadSelector)(e),t.userDerivationMethodSelector=e=>{switch((0,c.userDefaultCryptoSelector)(e)){case s.ARGON2_DEFAULT_PAYLOAD:return u.SupportedDerivationMethods.ARGON2D;case s.PBKDF2_DEFAULT_PAYLOAD:return u.SupportedDerivationMethods.PBKDF2;case s.KWC3_DEFAULT_PAYLOAD:return u.SupportedDerivationMethods.KWC3;default:return null}},t.userDerivationMethodSelector$=()=>(0,n.pipe)((0,o.map)(t.userDerivationMethodSelector),(0,o.distinctUntilChanged)())},57193:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeUserCrypto=void 0;const n=r(10203),o=r(55696),a=r(48238);t.changeUserCrypto=async function(e,{newDerivationMethod:t}){const{storeService:r}=e,i=r.getPersonalSettings().CryptoUserPayload,s=(0,a.getNewCryptoPayload)(t);if(!s)throw new Error(`[changeUserCrypto] - client sent wrong derivation value (${t})`);return await(0,o.migrateUserCrypto)(e,i,s,n.CryptoMigrationType.SettingsChange)}},77965:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decryptAllTransactions=void 0;const n=r(16859),o=r(83638);t.decryptAllTransactions=async function(e,t,r){const{announce:a}=r.getInstance().user.getSyncArgs(),i=e.map((async e=>({...e,content:await(0,n.decryptTransactionContent)(t.getInstance(),a,e).catch((t=>{if(e.type!==o.TransactionType.SETTINGS)return"";throw t}))})));return(await Promise.all(i)).filter((e=>!!e.content))}},9027:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decryptAllUserData=void 0;const n=r(33740),o=r(77965);t.decryptAllUserData=async function(e,t,r,{transactions:a,sharingKeys:i}){try{return{clearTransactions:await(0,o.decryptAllTransactions)(a,r,e),clearPrivateKey:await(0,n.decipherPrivateKey)(t,r,i)}}catch(e){throw new Error(`decipherAllUserData failed with error: ${e}`)}}},73909:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDataToMigrate=void 0;const n=r(10203),o=r(46298),a=r(16593);t.getDataToMigrate=async function(e,t){try{const t=e.getState(),r=(0,a.userLoginSelector)(t),n=await(0,o.getDataForMasterPasswordChange)(e,r,{});if((0,o.isApiError)(n))throw new Error(`getDataDoMigrate failed with error: ${n}`);return{transactions:n.data.transactions,sharingKeys:n.data.sharingKeys,timestamp:n.timestamp}}catch(e){throw t(n.CryptoMigrationStatus.ErrorDownload),new Error(`getDataDoMigrate failed with error: ${e}`)}}},48238:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNewCryptoPayload=void 0;const n=r(65675),o=r(38250);t.getNewCryptoPayload=function(e){switch(e){case o.SupportedDerivationMethods.ARGON2D:return n.ARGON2_DEFAULT_PAYLOAD;case o.SupportedDerivationMethods.PBKDF2:return n.PBKDF2_DEFAULT_PAYLOAD;case o.SupportedDerivationMethods.KWC3:return n.KWC3_DEFAULT_PAYLOAD;default:return}}},18767:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reEncryptAllUserData=void 0;const n=r(10203),o=r(33740),a=r(16859);t.reEncryptAllUserData=async function(e,{clearTransactions:t,clearPrivateKey:r},i){try{const n=t.map((t=>(0,a.encryptSingleTransaction)(e,t)));return{encryptedTransactions:await Promise.all(n),encryptedPrivateKey:await(0,o.cipherPrivateKey)(e,r)}}catch(e){throw i(n.CryptoMigrationStatus.ErrorReencryption),new Error(`reEncryptAllUserData failed with error: ${e}`)}}},46076:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetMasterPasswordEncryptorService=void 0;const n=r(65675),o=r(16593);t.resetMasterPasswordEncryptorService=function(e,t){const{storeService:r,masterPasswordEncryptorService:a}=e,i=r.getState(),s=(0,o.masterPasswordSelector)(i),c=(0,o.serverKeySelector)(i),u=t===n.KWC3_DEFAULT_PAYLOAD?(0,n.getLegacyCryptoConfig)(t):(0,n.parsePayload)(t).cryptoConfig;a.setInstance({raw:s},c,u)}},36116:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateAndPersistLocalData=void 0;const n=r(10203),o=r(16038),a=r(55623),i=r(27517);t.updateAndPersistLocalData=async function(e,t,r,s,c){try{e.dispatch((0,i.editPersonalSettings)({CryptoUserPayload:s,CryptoFixedSalt:(0,o.bufferToBase64)((0,a.getRandomValues)(16))})),await t.getInstance().user.persistPersonalSettings();const n=await r.getInstance().getLocalKey();await t.getInstance().user.persistLocalKey(n)}catch(e){throw c(n.CryptoMigrationStatus.ErrorUpdateLocalData),new Error(`updateAndPersistLocalData failed with error: ${e}`)}}},34726:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uploadDataOnServer=void 0;const n=r(10203),o=r(33740),a=r(46298),i=r(69214),s=r(16593);t.uploadDataOnServer=async function(e,t,r){try{const r=e.getState(),n=(0,s.userLoginSelector)(r),c={...t,transactions:(0,o.formatTransaction)(t.transactions)},u=await(0,i.uploadDataForCryptoChange)(e,n,c);if((0,a.isApiError)(u))throw new Error(`uploadDataForCryptoChange failed with error: ${u}`)}catch(e){throw r(n.CryptoMigrationStatus.ErrorUpload),new Error(`uploadDataForCryptoChange failed with error: ${e}`)}}},55696:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.migrateUserCrypto=void 0;const n=r(10203),o=r(65675),a=r(70252),i=r(57903),s=r(9027),c=r(73909),u=r(18767),l=r(46076),d=r(36116),p=r(34726),f=r(64816),g={[o.KWC3_DEFAULT_PAYLOAD]:n.CryptoAlgorithm.Kwc3,[o.ARGON2_DEFAULT_PAYLOAD]:n.CryptoAlgorithm.Argon2d,[o.PBKDF2_DEFAULT_PAYLOAD]:n.CryptoAlgorithm.Pbkdf2};t.migrateUserCrypto=async function(e,t,r,o){try{const{sessionService:a,storeService:m,masterPasswordEncryptorService:h,localStorageService:y,eventLoggerService:S}=e;if(!await(0,i.waitUntilSyncComplete)(m))return{success:!1,error:{code:f.ApiErrorType.ChangeUserCryptoFailed}};const v=e=>S.logEvent(new n.UserMigrateCryptoEvent({newCrypto:g[r],previousCrypto:g[t],type:o,status:e})),{transactions:E,sharingKeys:A,timestamp:_}=await(0,c.getDataToMigrate)(m,v),{clearTransactions:b,clearPrivateKey:T}=await(0,s.decryptAllUserData)(a,m,h,{transactions:E,sharingKeys:A});(0,l.resetMasterPasswordEncryptorService)(e,r);const{encryptedTransactions:I,encryptedPrivateKey:w}=await(0,u.reEncryptAllUserData)(h,{clearTransactions:b,clearPrivateKey:T},v);return await(0,p.uploadDataOnServer)(m,{timestamp:_,transactions:I,sharingKeys:{publicKey:A.publicKey,privateKey:w}},v),await(0,d.updateAndPersistLocalData)(m,a,y,r,v),await a.getInstance().user.attemptSync(n.Trigger.SettingsChange),v(n.CryptoMigrationStatus.Success),{success:!0}}catch(r){return(0,l.resetMasterPasswordEncryptorService)(e,t),(0,a.sendExceptionLog)({funcName:"migrateUserCrypto",fileName:"/carbon/src/CryptoMigration/services/migrate-user-crypto.ts",message:`Migration from KWC3 to Argon2 failed with error: ${r}`}),{success:!1,error:{code:f.ApiErrorType.ChangeUserCryptoFailed,message:r.message}}}}},63549:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(55696),o=r(10203),a=r(75653),i=r(65675),s=r(16593);t.setupSubscriptions=function(e,t){e.sessionOpened.on((()=>{const{storeService:e}=t,r=e.getState(),c=(0,a.hasCryptoMigrationPhase1EnabledSelector)(r),u=(0,a.hasCryptoMigrationPhase2EnabledSelector)(r),l=(0,a.teamCryptoForcedPayloadSelector)(r),d=(0,s.userDefaultCryptoSelector)(r);!c||l||d!==i.KWC3_DEFAULT_PAYLOAD?u&&l&&l!==d&&(0,n.migrateUserCrypto)(t,d,l,o.CryptoMigrationType.TeamEnforced):(0,n.migrateUserCrypto)(t,i.KWC3_DEFAULT_PAYLOAD,i.ARGON2_DEFAULT_PAYLOAD,o.CryptoMigrationType.MigrateLegacy)}))}},64816:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SupportedDerivationMethods=t.ApiErrorType=void 0,function(e){e.ChangeUserCryptoFailed="CHANGE_USER_CRYPTO_FAILED"}(t.ApiErrorType||(t.ApiErrorType={})),function(e){e.ARGON2D="argon2d",e.PBKDF2="pbkdf2",e.KWC3="kwc3"}(t.SupportedDerivationMethods||(t.SupportedDerivationMethods={}))},98347:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(67539),o=r(93190),a=r(54823),i=r(74738),s=r(31534),c=r(16225),u=r(30429);t.config={commands:{confirmDataLeaksEmailToken:{handler:u.confirmDataLeaksEmailToken},optinDataLeaksMonitoring:{handler:n.optinDataLeaks},optoutDataLeaksMonitoring:{handler:o.optoutDataLeaks},refreshDataLeaksEmailStatusList:{handler:a.refreshDataLeaksEmailStatusList},updateDarkWebOnboardingState:{handler:i.updateDarkWebOnboardingState}},queries:{getDataLeaksEmailStatusList:{selector:c.dataLeaksEmailStatusListSelector},getDarkWebOnboardingState:{selector:c.darkWebOnboardingStateSelector}},liveQueries:{liveDataLeaksEmailStatusList:{operator:s.dataLeaksEmailStatusList$},liveDarkWebOnboardingState:{operator:s.darkWebOnboardingState$}}}},53506:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(53582),t)},38983:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(98347);t.bootstrap=e=>{e.register(n.config)}},88548:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(38983);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},31534:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.darkWebOnboardingState$=t.dataLeaksEmailStatusList$=void 0;const n=r(18948),o=r(3343),a=r(16225);t.dataLeaksEmailStatusList$=()=>(0,n.pipe)((0,o.map)(a.dataLeaksEmailStatusListSelector),(0,o.distinctUntilChanged)()),t.darkWebOnboardingState$=()=>(0,n.pipe)((0,o.map)(a.darkWebOnboardingStateSelector),(0,o.distinctUntilChanged)())},28562:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.persistDarkWeb=void 0;const n=r(25576),o=r(16225);t.persistDarkWeb=async function(e,t){const{persistData:r,isAuthenticated:a}=t.getAccountInfo();if(!a||r===n.PersistData.PERSIST_DATA_NO)return!0;if(e)try{await e.storeDarkWeb((0,o.darkWebSelector)(t.getState()))}catch{return!1}return!0}},16225:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.darkWebOnboardingStateSelector=t.dataLeaksEmailStatusListSelector=t.darkWebSelector=void 0,t.darkWebSelector=e=>e.userSession.darkWeb,t.dataLeaksEmailStatusListSelector=e=>(0,t.darkWebSelector)(e).emails,t.darkWebOnboardingStateSelector=e=>(0,t.darkWebSelector)(e).onboardingState},30429:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.confirmDataLeaksEmailToken=void 0;const n=r(32868),o=r(16593),a=r(70252),i=r(88205),s=r(64194);t.confirmDataLeaksEmailToken=async function({wsService:e,storeService:t},r){const c=e.dataleaks,u=t.getState(),l=(0,o.premiumStatusSelector)(u),d=(0,i.featuresSelector)(u);if(!(0,s.hasDarkWebMonitoringFeature)(d,l))return{success:!1};try{const e=await c.confirm({token:r.token});return(0,n.isWSDataLeaksEmailResponseSuccess)(e)?{success:!0}:{success:!1,error:{code:e.content}}}catch(e){const t=new Error("Error when confirming email monitoring token");(0,a.sendExceptionLog)({error:t})}return{success:!1}}},64194:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasDarkWebMonitoringFeature=t.isValidErrorCode=void 0,t.isValidErrorCode=function(e,t){return Object.keys(t).map((e=>t[e])).includes(e)},t.hasDarkWebMonitoringFeature=function(e,t){if(!e.darkwebMonitoringWebRelease)return!1;if(!t)return!1;const{capabilities:r}=t;return Boolean(r&&r.dataLeak)}},14191:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeDarkWebState=void 0;const n=r(16225),o=r(45931),a=r(53582),i=r(31177),s=r(28562);t.initializeDarkWebState=async function(e){const{localStorageService:t,wsService:r,storeService:c}=e,{success:u}=await(0,o.syncAndPersistDataLeaksEmailStatusList)(c,t,r);if(u){const e=c.getState(),r=(0,n.darkWebOnboardingStateSelector)(e),o=function(e,t){return t===a.DarkWebOnboardingState.UNKNOWN?0===e.length?a.DarkWebOnboardingState.NOT_SEEN:a.DarkWebOnboardingState.SEEN:t}((0,n.dataLeaksEmailStatusListSelector)(e),r);c.dispatch((0,i.darkWebOnboardingStateUpdated)(o)),await(0,s.persistDarkWeb)(t.getInstance(),c)}}},67539:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optinDataLeaks=void 0;const n=r(90622),o=r(53582),a=r(32868),i=r(16593),s=r(64194),c=r(28445),u=r(70252),l=r(45931),d=r(88205),p=r(64194);t.optinDataLeaks=async function(e,t){const r=e.wsService.dataleaks,f=e.storeService.getState(),g=(0,i.userIdSelector)(f),m=(0,i.premiumStatusSelector)(f),h=(0,d.featuresSelector)(f);if(!(0,p.hasDarkWebMonitoringFeature)(h,m))return{success:!1};try{if(!(0,c.looksLikeEmail)(t.email))return{success:!1,error:{code:o.OptinDataLeaksResultErrorCode.INVALID_EMAIL}};{const i=(0,n.ukiSelector)(f),c=await r.optin({emails:[t.email],uki:i,login:g});if((0,a.isWSDataLeaksEmailResponseSuccess)(c))return await(0,l.syncAndPersistDataLeaksEmailStatusList)(e.storeService,e.localStorageService,e.wsService),{success:!0};const u=(0,a.getWSDataLeaksEmailErrorCode)(c);if(u&&(0,s.isValidErrorCode)(u,o.OptinDataLeaksResultErrorCode))return{success:!1,error:{code:u}}}}catch(e){const t=new Error("Error when opting-in user email");(0,u.sendExceptionLog)({error:t})}return{success:!1}}},93190:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optoutDataLeaks=void 0;const n=r(90622),o=r(53582),a=r(32868),i=r(64194),s=r(16593),c=r(88205),u=r(28445),l=r(70252),d=r(45931);t.optoutDataLeaks=async function(e,t){const r=e.wsService.dataleaks,p=e.storeService.getState(),f=(0,s.userIdSelector)(p);if(!(0,c.featuresSelector)(p).darkwebMonitoringWebRelease)return{success:!1};try{if(!(0,u.looksLikeEmail)(t.email))return{success:!1,error:{code:o.OptoutDataLeaksResultErrorCode.INVALID_EMAIL}};{const s=(0,n.ukiSelector)(p),c=await r.optout({emails:[t.email],uki:s,login:f});if((0,a.isWSDataLeaksEmailResponseSuccess)(c))return await(0,d.syncAndPersistDataLeaksEmailStatusList)(e.storeService,e.localStorageService,e.wsService),{success:!0};const u=(0,a.getWSDataLeaksEmailErrorCode)(c);if(u&&(0,i.isValidErrorCode)(u,o.OptoutDataLeaksResultErrorCode))return{success:!1,error:{code:u}}}}catch(e){const t=new Error("Error when opting-out user email");(0,l.sendExceptionLog)({error:t})}return{success:!1}}},54823:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshDataLeaksEmailStatusList=void 0;const n=r(45931),o=r(95303);t.refreshDataLeaksEmailStatusList=async function({localStorageService:e,storeService:t,wsService:r}){const a=await(0,n.syncAndPersistDataLeaksEmailStatusList)(t,e,r);if(a.success){const e=(0,o.getInstance)(t,r);await e.refresh({forceRefresh:!0})}return a}},45931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.syncAndPersistDataLeaksEmailStatusList=void 0;const n=r(31177),o=r(16593),a=r(28562),i=r(56915),s=r(70252),c=r(88205);t.syncAndPersistDataLeaksEmailStatusList=async function(e,t,r){const u=e.getState();if(!(0,c.featuresSelector)(u).darkwebMonitoringWebRelease)return{success:!1};try{const{code:s,content:c}=await async function(e,t){const r=(0,o.userIdSelector)(e),n=(0,i.ukiSelector)(e);return await t.status({login:r,uki:n,wantsLeaks:!1,includeDisabled:!1})}(e.getState(),r.dataleaks);if(200===s)return e.getStore().dispatch((0,n.dataLeaksEmailStatusListUpdated)(c.emails)),{success:await(0,a.persistDarkWeb)(t.getInstance(),e)}}catch(e){const t=new Error("Error when fetching dataleaks emails statuses");(0,s.sendExceptionLog)({error:t})}return{success:!1}}},74738:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateDarkWebOnboardingState=void 0;const n=r(31177),o=r(28562);t.updateDarkWebOnboardingState=async function({storeService:e,localStorageService:t},r){return e.dispatch((0,n.darkWebOnboardingStateUpdated)(r)),{success:await(0,o.persistDarkWeb)(t.getInstance(),e)}}},9991:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(14191);t.setupSubscriptions=async function(e,t){e.sessionOpened.on((async()=>{await(0,n.initializeDarkWebState)(t)}))}},53582:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DarkWebOnboardingState=t.DataLeaksEmailStatus=t.DataLeaksBreachesResultErrorCode=t.ConfirmDataLeaksResultErrorCode=t.OptoutDataLeaksResultErrorCode=t.OptinDataLeaksResultErrorCode=void 0,function(e){e.INVALID_EMAIL="EMAIL_IS_INVALID",e.ALREADY_SUBSCRIBED="USER_HAS_ALREADY_AN_ACTIVE_SUBSCRIPTION",e.TOO_MANY_SUBSCRIPTIONS="USER_HAS_TOO_MANY_SUBSCRIPTIONS"}(t.OptinDataLeaksResultErrorCode||(t.OptinDataLeaksResultErrorCode={})),function(e){e.INVALID_EMAIL="EMAIL_IS_INVALID",e.NO_SUBSCRIPTION="USER_HAS_NO_SUBSCRIPTION"}(t.OptoutDataLeaksResultErrorCode||(t.OptoutDataLeaksResultErrorCode={})),function(e){e.MISSING_ARGUMENT="Missing argument",e.TOKEN_NOT_FOUND="TOKEN_NOT_FOUND",e.TOKEN_HAS_EXPIRED="TOKEN_HAS_EXPIRED",e.USER_HAS_NO_PENDING_SUBSCRIPTION="USER_HAS_NO_PENDING_SUBSCRIPTION",e.ANOTHER_USER_HAS_ALREADY_AN_ACTIVE_SUBSCRIPTION="ANOTHER_USER_HAS_ALREADY_AN_ACTIVE_SUBSCRIPTION",e.USER_IS_NOT_ALLOWED="USER_IS_NOT_ALLOWED"}(t.ConfirmDataLeaksResultErrorCode||(t.ConfirmDataLeaksResultErrorCode={})),t.DataLeaksBreachesResultErrorCode||(t.DataLeaksBreachesResultErrorCode={}),function(e){e.PENDING="pending",e.ACTIVE="active",e.DISABLED="disabled"}(t.DataLeaksEmailStatus||(t.DataLeaksEmailStatus={})),function(e){e.UNKNOWN="UNKNOWN",e.SEEN="SEEN",e.NOT_SEEN="NOT_SEEN"}(t.DarkWebOnboardingState||(t.DarkWebOnboardingState={}))},44812:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(52921),o=r(31858);t.config={commands:{getDarkWebInsightsReportResults:{handler:n.getDarkWebInsightsReportResults},getDarkWebInsightsSummary:{handler:o.getDarkWebInsightsSummary}},queries:{},liveQueries:{}}},1945:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(44812);t.bootstrap=e=>{e.register(n.config)}},76592:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(1945);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},52921:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDarkWebInsightsReportResults=void 0;const n=r(96805),o=r(16593),a=r(46298),i=r(82512);t.getDarkWebInsightsReportResults=async function(e,t){const{storeService:r}=e,s=r.getState(),c=(0,o.userLoginSelector)(s),u=await(0,i.getDarkWebInsightReport)(r,c,t);return(0,a.isApiError)(u)?{success:!1,error:{code:n.ApiErrorType.GetDarkWebInsightsFailed,message:`get Dark Web Insights Report failed: ${u.message}`}}:{success:!0,data:u}}},31858:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDarkWebInsightsSummary=void 0;const n=r(96805),o=r(16593),a=r(46298),i=r(19667);t.getDarkWebInsightsSummary=async function(e){const{storeService:t}=e,r=t.getState(),s=(0,o.userLoginSelector)(r),c=await(0,i.getDarkWebInsightsSummaryRequest)(t,s);return(0,a.isApiError)(c)?{success:!1,error:{code:n.ApiErrorType.GetDarkWebInsightsSummaryFailed,message:`get Dark Web Insights Summary failed: ${c.message}`}}:{success:!0,data:c}}},96805:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmailIncidentViewStatus=t.BreachType=t.ApiErrorType=void 0,function(e){e.GetDarkWebInsightsFailed="GET_DARK_WEB_INSIGHTS_FAILED",e.GetDarkWebInsightsSummaryFailed="GET_DARK_WEB_INSIGHTS_SUMMARY_FAILED"}(t.ApiErrorType||(t.ApiErrorType={})),function(e){e.Password="password",e.CreditCard="creditcard",e.IPAddress="ip",e.MailingAddress="address",e.Phone="phone",e.Email="email",e.Social="social",e.GeoLocation="geolocation",e.UserName="username",e.PersonalInfo="personalinfo"}(t.BreachType||(t.BreachType={})),function(e){e.New="new",e.Viewed="viewed"}(t.EmailIncidentViewStatus||(t.EmailIncidentViewStatus={}))},52578:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCredentialSmartCategorized=t.isSpaceQuarantined=void 0;const n=r(11814),o=r(6205);t.isSpaceQuarantined=function(e){return!!e&&!("accepted"===e.details.status.toLowerCase()||!e.details.info)&&Boolean(e.details.info.forcedDomainsEnabled)&&Boolean(e.details.info.removeForcedContentEnabled)},t.isCredentialSmartCategorized=function(e,t){if(!e)return!1;let r="";if(e.Url){const t=n.url.getDomainForUrl(e.Url);r=t?t.toLowerCase():""}const a=e.Email?e.Email.toLowerCase():"",i=e.Login?e.Login.toLowerCase():"",s=e.SecondaryLogin?e.SecondaryLogin.toLowerCase():"",c=(0,o.getUserAddedLinkedWebsiteDomains)(e).map((e=>e.toLowerCase()));return t.filter((e=>{const t=e.toLowerCase();return r.includes(t)||a.includes(t)||i.includes(t)||s.includes(t)||c.some((e=>e.includes(t)))})).length>0}},76235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(5847),o=r(4914),a=r(43837),i=r(2946),s=r(49874),c=r(13648),u=r(15141),l=r(2282),d=r(81911),p=r(8453),f=r(68728),g=r(17025),m=r(57718),h=r(36351),y=r(72580),S=r(64489),v=r(75912),E=r(95633),A=r(6210),_=r(14037),b=r(80818),T=r(3474),I=r(80529),w=r(60309),C=r(45817),O=r(74172),D=r(11230),P=r(16458);t.config={commands:{...h.config.commands,...P.vaultConfig.commands,...n.config.commands,...o.config.commands,...a.config.commands,...y.config.commands,...i.config.commands,...s.config.commands,...c.config.commands,...S.config.commands,...v.config.commands,...u.config.commands,...T.config.commands,...E.config.commands,...l.config.commands,...D.importApiConfig.commands,...b.config.commands,...d.config.commands,...p.config.commands,...f.config.commands,...g.config.commands,...A.config.commands,..._.config.commands,...I.config.commands,...O.config.commands,...w.config.commands,...m.config.commands},queries:{...h.config.queries,...P.vaultConfig.queries,...n.config.queries,...o.config.queries,...y.config.queries,...i.config.queries,...c.config.queries,...S.config.queries,...v.config.queries,...u.config.queries,...T.config.queries,...E.config.queries,...l.config.queries,...D.importApiConfig.queries,...b.config.queries,...d.config.queries,...p.config.queries,...f.config.queries,...g.config.queries,...A.config.queries,..._.config.queries,...I.config.queries,...w.config.queries,...m.config.queries,...C.config.queries},liveQueries:{...h.config.liveQueries,...n.config.liveQueries,...o.config.liveQueries,...y.config.liveQueries,...i.config.liveQueries,...c.config.liveQueries,...S.config.liveQueries,...u.config.liveQueries,...T.config.liveQueries,...E.config.liveQueries,...l.config.liveQueries,...D.importApiConfig.liveQueries,...b.config.liveQueries,...d.config.liveQueries,...p.config.liveQueries,...f.config.liveQueries,...g.config.liveQueries,...A.config.liveQueries,..._.config.liveQueries,...I.config.liveQueries,...w.config.liveQueries,...m.config.liveQueries}}},37148:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ImportSource=void 0,o(r(2124),t),o(r(63499),t),o(r(98760),t),o(r(26655),t),o(r(26763),t),o(r(59198),t),o(r(80666),t),o(r(80630),t),o(r(32921),t),o(r(93301),t),o(r(95175),t),o(r(42262),t),o(r(34130),t),o(r(76707),t),o(r(91315),t),o(r(52490),t),o(r(25),t),o(r(88815),t),o(r(60802),t),o(r(15874),t),function(e){e["1Password"]="1password",e.Bitwarden="bitwarden",e.Chrome="chrome",e.Dash="dash",e.Edge="edge",e.Firefox="firefox",e.Keepass="keepass",e.Keeper="keeper",e.Lastpass="lastpass",e.Other="other",e.Safari="safari"}(t.ImportSource||(t.ImportSource={}))},5847:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(16018),o=r(13370),a=r(8639);t.config={commands:{addBankAccount:{handler:a.addBankAccountHandler},updateBankAccount:{handler:a.updateBankAccountHandler},deleteBankAccount:{handler:a.deleteBankAccountHandler}},queries:{getBankAccount:{selector:n.viewedBankAccountSelector},getBankAccounts:{selector:n.viewedQueriedBankAccountsSelector}},liveQueries:{liveBankAccount:{operator:o.getBankAccount$},liveBankAccounts:{operator:o.bankAccounts$}}}},2124:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(3816),t)},14369:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNewBankAccount=t.addBankAccountHandler=void 0;const n=r(10203),o=r(3816),a=r(23136),i=r(92882),s=r(48313),c=r(47408),u=r(78320),l=r(70252),d=r(13675),p=r(79980),f=r(51504);function g(e){const t=(0,c.getUnixTimestamp)();return{kwType:"KWBankStatement",Id:(0,u.generateItemUuid)(),LastBackupTime:0,LocaleFormat:(0,i.defaultToUS)(e.country),AnonId:(0,u.generateItemUuid)(),SpaceId:(0,i.defaultToEmptyString)(e.spaceId),CreationDatetime:t,UserModificationDatetime:t,BankAccountName:(0,i.defaultToEmptyString)(e.name),BankAccountOwner:(0,i.defaultToEmptyString)(e.owner),BankAccountIBAN:(0,i.defaultToEmptyString)(e.IBAN),BankAccountBIC:(0,i.defaultToEmptyString)(e.BIC),BankAccountBank:(0,i.defaultToEmptyString)(e.bank)}}t.addBankAccountHandler=async function(e,t){if(""===t.BIC&&""===t.IBAN)return{success:!1,error:{code:o.AddBankAccountResultErrorCode.EMPTY_BIC_AND_IBAN}};try{return await async function({storeService:e,sessionService:t,eventLoggerService:r},n){if(!e.isAuthenticated())throw new Error("No session available to saveBankAccount");const o=g((0,d.sanitizeInputPersonalData)(n)),a=e.getState().userSession.personalFeatures.features[f.NEW_URL_PARSER_FF]||e.getState().userSession.personalFeatures.features[f.NEW_URL_PARSER_FF_PROD];(0,p.logAddVaultItem)(e,r,o,a),e.dispatch((0,s.savePersonalDataItem)(o,o.kwType)),t.getInstance().user.persistPersonalData()}(e,t),(0,a.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),{success:!0}}catch(e){return(0,l.sendExceptionLog)({error:e}),{success:!1}}},t.getNewBankAccount=g},3242:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBankAccountHandler=void 0;const n=r(10203),o=r(16018),a=r(3816),i=r(23136),s=r(45291),c=r(70252),u=r(79980),l=r(51504);t.deleteBankAccountHandler=function(e,{id:t}){const r=(({storeService:e,eventLoggerService:t},r)=>{const n=e.getState();try{if(!e.isAuthenticated())return{success:!1,error:{code:a.DeleteBankAccountErrorCode.NOT_AUTHORIZED}};const i=(0,o.bankAccountSelector)(n,r);if(!i)return{success:!1,error:{code:a.DeleteBankAccountErrorCode.NOT_FOUND}};const c=n.userSession.personalFeatures.features[l.NEW_URL_PARSER_FF]||n.userSession.personalFeatures.features[l.NEW_URL_PARSER_FF_PROD];(0,u.logDeleteVaultItem)(e,t,i,c);const d=(0,s.removePersonalItem)(i.kwType,i.Id,null);return e.dispatch(d),{success:!0}}catch(e){const t=new Error(`[BankAccounts] - deleteBankAccount: ${e}`);return(0,c.sendExceptionLog)({error:t}),{success:!1,error:{code:a.DeleteBankAccountErrorCode.INTERNAL_ERROR}}}})(e,t);return r.success&&(0,i.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve(r)}},8639:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(14369),t),o(r(31570),t),o(r(3242),t)},31570:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateBankAccountHandler=t.getUpdatedBankAccount=t.getBankAccountModifiedProperties=void 0;const n=r(10203),o=r(16018),a=r(3816),i=r(23136),s=r(48313),c=r(47408),u=r(70252),l=r(85406),d=r(13675),p=r(79980),f=r(51504),g=e=>void 0!==e&&void 0===(0,l.getAllBanks)()[e];function m(e,r){const n=(0,o.bankAccountSelector)(e,r.id);if(!n)return;const a=(0,t.getBankAccountModifiedProperties)(r,n),i=(0,c.getUnixTimestamp)();return{...n,...a,UserModificationDatetime:i}}t.getBankAccountModifiedProperties=(e,t)=>({BankAccountName:e.name??t.BankAccountName,BankAccountOwner:e.owner??t.BankAccountOwner,BankAccountIBAN:e.IBAN??t.BankAccountIBAN,BankAccountBIC:e.BIC??t.BankAccountBIC,BankAccountBank:e.bank??(g(e.country)?"":t.BankAccountBank),SpaceId:e.spaceId??t.SpaceId,LocaleFormat:e.country??t.LocaleFormat}),t.getUpdatedBankAccount=m,t.updateBankAccountHandler=function(e,t){try{const r=function({storeService:e,sessionService:t,eventLoggerService:r},n){if(!e.isAuthenticated())throw new Error("No session available to updateBankAccount");const i=e.getState(),c=m(i,(0,d.sanitizeInputPersonalData)(n));if(!c)return{success:!1};if(""===c.BankAccountBIC&&""===c.BankAccountIBAN)return{success:!1,error:{code:a.UpdateBankAccountResultErrorCode.EMPTY_BIC_AND_IBAN}};const u=(0,o.bankAccountSelector)(i,n.id),l=e.getState().userSession.personalFeatures.features[f.NEW_URL_PARSER_FF]||e.getState().userSession.personalFeatures.features[f.NEW_URL_PARSER_FF_PROD];return(0,p.logEditVaultItem)(e,r,c,u,l),e.dispatch((0,s.savePersonalDataItem)(c,c.kwType)),t.getInstance().user.persistPersonalData(),{success:!0}}(e,t);return r.success?((0,i.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve({success:!0})):Promise.resolve(r)}catch(e){return(0,u.sendExceptionLog)({error:e}),Promise.resolve({success:!1})}}},92882:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBankInfoFromBankAccountData=t.defaultToUS=t.defaultToEmptyString=void 0;const n=r(16516),o=r(53576),a=r(85406);t.defaultToEmptyString=(0,n.defaultTo)(""),t.defaultToUS=(0,n.defaultTo)(o.Country.US),t.getBankInfoFromBankAccountData=e=>{const r=(0,t.defaultToUS)(e.LocaleFormat),{banks:n}=(0,a.getBanks)({country:r}),o=((e,r)=>{if(r){const[n,o]=(0,t.defaultToEmptyString)(e).split("-"),a=r.find((({code:e})=>[n,o].includes(e)))?.code;return a||"NO_TYPE"}return""})(e.BankAccountBank,n),i=o?.length>0?`${r}-${o}`:"",s=(0,t.defaultToEmptyString)(n?.find((({code:e})=>e===o))?.localizedString);return{country:r,bankCode:o,bankLocalizedName:s,bank:i}}},48931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeBankAccountSpecificProps=t.makeNewBankAccount=t.makeUpdatedBankAccount=void 0;const n=r(16516),o=r(47408),a=r(78163);function i(e){const t=(0,n.defaultTo)("");return{BankAccountName:t(e.name),BankAccountOwner:t(e.owner),BankAccountIBAN:t(e.IBAN),BankAccountBIC:t(e.BIC),BankAccountBank:t(e.bank)}}t.makeUpdatedBankAccount=async function(e,t){const r=(0,a.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,o.getUnixTimestamp)()});return{...t,...r,...i(e.content)}},t.makeNewBankAccount=async function(e){return{...(0,a.makeNewPersonalDataItemBase)(e),...i(e.content)}},t.makeBankAccountSpecificProps=i},13370:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBankAccount$=t.bankAccounts$=void 0;const n=r(18948),o=r(3343),a=r(55220),i=r(16018);t.bankAccounts$=(0,a.getLivePersonalInfo)(i.getLiveBankAccountsSelector),t.getBankAccount$=e=>{const t=(0,i.getViewedBankAccountSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},60931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBankAccountMappers=void 0;const n=r(83539);t.getBankAccountMappers=()=>({spaceId:e=>e.SpaceId,accountName:e=>e.BankAccountName,bankName:e=>e.BankAccountBank,lastUse:n.lastUseMapper,id:e=>e.Id})},53704:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bankAccountMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234);t.searchGetters=[(0,o.stringProp)("BankAccountName"),(0,o.stringProp)("BankAccountOwner"),(0,o.stringProp)("BankAccountBank")],t.bankAccountMatch=(0,n.match)(t.searchGetters)},16018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedBankAccountSelector=t.viewedBankAccountSelector=t.getLiveBankAccountsSelector=t.viewedQueriedBankAccountsSelector=t.queryBankAccountsSelector=t.bankAccountMappersSelector=t.bankAccountSelector=t.bankAccountsSelector=void 0;const n=r(16516),o=r(53704),a=r(62826),i=r(24589),s=r(63566),c=r(97006),u=r(49551),l=r(32034),d=r(60931),p=r(57989),f=r(40602);t.bankAccountsSelector=(0,l.createSelector)((e=>e.userSession.personalData.bankAccounts),p.quarantinedSpacesSelector,f.filterOutQuarantinedItems),t.bankAccountSelector=(e,r)=>{const n=(0,t.bankAccountsSelector)(e);return(0,u.findDataModelObject)(r,n)},t.bankAccountMappersSelector=e=>(0,d.getBankAccountMappers)();const g=()=>o.bankAccountMatch;t.queryBankAccountsSelector=(0,i.getQuerySelector)(t.bankAccountsSelector,g,t.bankAccountMappersSelector),t.viewedQueriedBankAccountsSelector=(0,n.compose)((0,s.viewListResults)(a.listView),t.queryBankAccountsSelector),t.getLiveBankAccountsSelector=(0,c.makeLiveSelectorGetter)(t.bankAccountsSelector,(()=>a.listView),g,t.bankAccountMappersSelector),t.viewedBankAccountSelector=(e,r)=>{const n=(0,t.bankAccountSelector)(e,r);return(0,a.detailView)(n)},t.getViewedBankAccountSelector=e=>{const r=(0,l.createSelector)(t.bankAccountsSelector,(t=>(0,u.findDataModelObject)(e,t)));return(0,l.createSelector)(r,a.detailView)}},3816:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateBankAccountResultErrorCode=t.AddBankAccountResultErrorCode=t.DeleteBankAccountErrorCode=void 0,function(e){e[e.NOT_AUTHORIZED=0]="NOT_AUTHORIZED",e[e.NOT_FOUND=1]="NOT_FOUND",e[e.INTERNAL_ERROR=2]="INTERNAL_ERROR"}(t.DeleteBankAccountErrorCode||(t.DeleteBankAccountErrorCode={})),function(e){e.EMPTY_BIC_AND_IBAN="EMPTY_BIC_AND_IBAN"}(t.AddBankAccountResultErrorCode||(t.AddBankAccountResultErrorCode={})),function(e){e.EMPTY_BIC_AND_IBAN="EMPTY_BIC_AND_IBAN"}(t.UpdateBankAccountResultErrorCode||(t.UpdateBankAccountResultErrorCode={}))},62826:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.detailView=void 0;const n=r(82043),o=r(92882),a=e=>{const t=(0,o.getBankInfoFromBankAccountData)(e);return{name:(0,o.defaultToEmptyString)(e.BankAccountName),owner:(0,o.defaultToEmptyString)(e.BankAccountOwner),IBAN:(0,o.defaultToEmptyString)(e.BankAccountIBAN),BIC:(0,o.defaultToEmptyString)(e.BankAccountBIC),bank:t.bank,country:t.country,bankCode:t.bankCode,bankLocalizedName:t.bankLocalizedName}};t.detailView=e=>({...(0,n.dataModelDetailView)(e),...a(e)}),t.itemView=e=>({...(0,n.dataModelItemView)(e),...a(e)}),t.listView=e=>e.map(t.itemView)},4914:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(21342),o=r(52283),a=r(44444);t.config={commands:{updateBreachStatus:{handler:a.updateBreachStatusHandler}},queries:{getBreach:{selector:n.viewedBreachSelector},getBreaches:{selector:n.viewedQueriedBreachesSelector},getBreachesPage:{selector:n.breachesPageSelector},getBreachesPaginationToken:{selector:n.breachesPaginationTokenSelector},getBreachesUpdateStatus:{selector:n.breachesUpdaterStatusSelector}},liveQueries:{liveBreach:{operator:o.getBreach$},liveBreaches:{operator:o.breaches$},liveBreachesBatch:{operator:o.breachesBatch$},liveBreachesUpdaterStatus:{operator:o.breachesUpdaterStatus$}}}},63499:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BreachesUpdaterStatus=t.BreachStatus=t.BreachLeakedDataType=void 0;var n=r(67083);Object.defineProperty(t,"BreachLeakedDataType",{enumerable:!0,get:function(){return n.BreachLeakedDataType}}),Object.defineProperty(t,"BreachStatus",{enumerable:!0,get:function(){return n.BreachStatus}});var o=r(95377);Object.defineProperty(t,"BreachesUpdaterStatus",{enumerable:!0,get:function(){return o.BreachesUpdaterStatus}})},95303:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearInstance=t.getInstance=void 0;const n=r(70252),o=r(90503),a=r(90622),i=r(16593),s=r(88205),c=r(36017),u=r(95377),l=r(75130),d=r(44331),p=r(38785),f=r(45291);class g{constructor(e,t,r,n){this.storeService=e,this.credentialVault=t,this.breachVault=r,this.gateway=n,this.lastRefreshTimestamp=0,this.refreshInProgress=!1}async refresh(e){try{if(this.refreshInProgress)return{vaultSyncNeeded:!1};this.refreshInProgress=!0,this.storeService.dispatch((0,f.updateBreachesUpdaterStatus)(u.BreachesUpdaterStatus.SYNCING));const t=Boolean(e&&e.forceRefresh);if(!this.isFeatureFlipped()||!this.isSessionOpened()||!this.isRefreshNeeded(t))return this.storeService.dispatch((0,f.updateBreachesUpdaterStatus)(u.BreachesUpdaterStatus.SKIPPED)),this.refreshInProgress=!1,{vaultSyncNeeded:!1};const{breachVault:r,credentialVault:n}=this,o=await this.fetchLatestPublicBreaches(),a=await this.fetchLatestPrivateBreaches();this.resetTimer();const i=n.getAllCredentials(),s=r.getAllBreaches(),l=[...o.breaches,...a.breaches],d=(0,c.getChangesFromIncomingBreaches)(i,s,l);await r.applyChangesFromSync(d,o.revision,a.refreshDate);const p=this.isVaultSyncNeeded(d);return this.storeService.dispatch((0,f.updateBreachesUpdaterStatus)(p?u.BreachesUpdaterStatus.UPDATED:u.BreachesUpdaterStatus.UNCHANGED)),{vaultSyncNeeded:p}}catch(e){this.storeService.dispatch((0,f.updateBreachesUpdaterStatus)(u.BreachesUpdaterStatus.ERROR));const t=new Error(`[Breaches] - refresh: ${e}`);return(0,n.sendExceptionLog)({error:t,code:o.ExceptionCriticality.WARNING}),{vaultSyncNeeded:!1}}finally{this.refreshInProgress=!1}}isFeatureFlipped(){const{storeService:e}=this,t=e.getState(),r=(0,s.featuresSelector)(t);return Boolean(r)&&r[g.BREACHES_REFRESH_FEATURE_FLIP]}isSessionOpened(){const{storeService:e}=this,t=e.getState(),r=(0,i.userLoginSelector)(t),n=(0,a.ukiSelector)(t);return Boolean(n&&r)}isRefreshNeeded(e){return e||Date.now()-this.lastRefreshTimestamp>=g.BREACHES_REFRESH_INTERVAL_MS}resetTimer(){this.lastRefreshTimestamp=Date.now()}isVaultSyncNeeded(e){return e.updates.length+e.deletions.length>0}async fetchLatestPublicBreaches(){const e=this.breachVault.getLatestPublicBreachesRevision();return this.gateway.getLatestPublicBreaches(e)}async fetchLatestPrivateBreaches(){const e=this.breachVault.getPrivateBreachesRefreshDate();let t,r=[];try{const n=await this.gateway.getLatestPrivateBreaches(e);n&&(r=n.breaches,t=n.refreshDate)}catch(e){const t=new Error(`[Breaches] - refresh: fetchPrivateBreaches error: ${e}`);(0,n.sendExceptionLog)({error:t,code:o.ExceptionCriticality.WARNING})}return{breaches:r,refreshDate:t}}}g.BREACHES_REFRESH_INTERVAL_MS=864e5,g.BREACHES_REFRESH_FEATURE_FLIP="breachesFetchWeb";let m=null;t.getInstance=(e,t)=>(null===m&&(m=new g(e,new d.CredentialVault(e),new l.BreachVault(e),new p.BreachesWS(t,e))),m),t.clearInstance=()=>{m=null}},36017:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChangesFromIncomingBreaches=void 0;const n=r(90073),o=r(67083),a=r(86715),i=r(25656),s=r(83480),c=e=>({updates:[e],deletions:[]}),u=e=>t=>{const r=(0,n.getDomainForCredential)(t)||"";return(e.domains||[]).includes(r)},l=e=>Boolean(e.Password),d=e=>Array.from(new Set(e)),p=(e,t)=>{const{content:r}=e,{leakedPasswords:n}=e;let a=n;if((0,s.hasBreachLeakedDataOfType)(r,o.BreachLeakedDataType.Password)){const{eventDate:e}=r,o=t.filter((e=>t=>1e3*(t.ModificationDatetime||t.CreationDatetime||0)<Date.parse(e))(e)).filter(l).map((e=>e.Password));a=[...n,...o]}return d(a||[])};t.getChangesFromIncomingBreaches=function(e,t,r){return r.reduce(((r,n)=>((e,t)=>({updates:[...e.updates,...t.updates],deletions:[...e.deletions,...t.deletions]}))(r,function(e,t,r){const{content:n}=r,l=(f=r,e.filter(u(f.content)));var f;const g=p(r,l);if(((e,t,r)=>{const n=!(0,a.isDataLeaksBreachContent)(e),o=r.length>0,i=(0,s.hasBreachLeakedPrivateInfo)(e),c=t.length>0;return n&&!o&&(!i||!c)})(n,l,g))return{updates:[],deletions:[]};const{id:m,lastModificationRevision:h}=n,y=(0,s.findByBreachId)(m,t);return y?h<=y.ContentRevision?{updates:[],deletions:[]}:(0,s.isBreachDeleted)(n)?{updates:[],deletions:[y.Id]}:c(((e,t,r)=>{const n=d(e.LeakedPasswords||[]),a=d([...e.LeakedPasswords,...r]),i=n.length!==a.length?o.BreachStatus.PENDING:e.Status;return{...e,Content:t,ContentRevision:t.lastModificationRevision,LeakedPasswords:a,Status:i}})(y,n,g)):c((0,i.makeBreachFromContent)(n,g))}(e,t,n))),{updates:[],deletions:[]})}},25656:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeBreachFromContent=void 0;const n=r(53576),o=r(78320),a=r(67083);t.makeBreachFromContent=(e,t)=>({kwType:n.DataModelType.KWSecurityBreach,LastBackupTime:0,Id:(0,o.generateItemUuid)(),AnonId:(0,o.generateItemUuid)(),BreachId:e.id,Content:e,ContentRevision:e.lastModificationRevision,Status:a.BreachStatus.PENDING,LeakedPasswords:t})},95377:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BreachesUpdaterStatus=void 0,function(e){e.UNKNOWN="unknown",e.SYNCING="syncing",e.SKIPPED="skipped",e.UNCHANGED="unchanged",e.UPDATED="updated",e.ERROR="error"}(t.BreachesUpdaterStatus||(t.BreachesUpdaterStatus={}))},44444:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateBreachStatus=t.updateBreachStatusHandler=void 0;const n=r(10203),o=r(48313),a=r(23136),i=r(70252),s=r(95623),c=r(21342);function u(e,t){if(!e.isAuthenticated())throw new Error("No session available to update Breach");const r=e.getState(),n=(0,c.breachSelector)(r,t.id);if(!n)throw new Error("Breach does not exist, cant update");const a={...n,Status:t.status};e.dispatch((0,o.savePersonalDataItem)(a,a.kwType))}t.updateBreachStatusHandler=async function(e,t){const{storeService:r,sessionService:o}=e;try{return u(r,t),(0,a.getDebounceSync)(r,o)({immediateCall:!0},n.Trigger.Save),{success:!0}}catch(e){return s.Debugger.error(e),(0,i.sendExceptionLog)({error:e}),{success:!1}}},t.updateBreachStatus=u},38785:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BreachesWS=void 0;const n=r(16516),o=r(14656),a=r(35587),i=r(36513),s=r(56984),c=r(72365),u=r(16038),l=r(32607),d=r(70252),p=r(90503),f=r(16593),g=r(88205),m=r(90622),h=r(64194),y=r(86715),S=r(83480),v=r(48162),E=r(56668);t.BreachesWS=class{constructor(e,t){this.wsService=e,this.storeService=t}async getLatestPublicBreaches(e){const t=this.storeService.getState(),r=(0,f.userLoginSelector)(t),n=(0,m.ukiSelector)(t);if(null===r||null===n)throw new Error("[Breaches] - getLatestPublicBreaches: no current authenticated user");const o=await this.wsService.breaches.get({login:r,uki:n,revision:e});if(!(0,l.isWSResponseSuccess)(o)){const e=`[Breaches] getLatestPublicBreaches: ${o.message}(statusCode: ${o.code})`;throw new Error(e)}const{content:a}=o,{latest:i,filesToDownload:s,revision:c}=a,u=[...i,...await this.downloadFileBreaches(s)].filter(y.isSupportedBreachContent);return{revision:c,breaches:(0,S.deduplicateBreachContents)(u).map((e=>(0,v.makeIncomingBreach)(e,[])))}}async getLatestPrivateBreaches(e){const t=this.storeService.getState(),r=(0,f.premiumStatusSelector)(t),n=(0,g.featuresSelector)(t);if(!(0,h.hasDarkWebMonitoringFeature)(n,r))return null;const o=(0,f.userLoginSelector)(t),a=(0,m.ukiSelector)(t);if(null===o||null===a)throw new Error("[Breaches] - getLatestPrivateBreaches: no current authenticated user");const i=await this.wsService.dataleaks.leaks({login:o,uki:a,wantsDetails:!0,includeDisabled:!1,lastUpdateDate:e});if(!(0,l.isWSResponseSuccess)(i)){if((0,v.isBreachesWSResponseNotModified)(i))return{breaches:[],refreshDate:e};const t=i.error&&i.error.code?`, code: ${i.error.code}`:"",r=`[Breaches] - getLatestPrivateBreaches: ${i.message} (statusCode: ${i.code}${t})`;throw new Error(r)}const{content:s}=i,{details:c,leaks:u,lastUpdateDate:d}=s,p=await this.extractLeakedPasswords(c),E=u.filter(y.isSupportedBreachContent);return{breaches:(0,S.deduplicateBreachContents)(E).map((e=>(0,v.makeIncomingBreach)(e,p[e.id]||[]))),refreshDate:d}}async downloadFileBreaches(e){return(0,n.flatten)(await(0,a.asyncMap)(e,this.downloadFileBreach))}async downloadFileBreach(e){try{const{data:t}=await(0,o.get)(e);return t.breaches}catch(e){const t=new Error(`[Breaches] - downloadFileBreach: ${e}`);return(0,d.sendExceptionLog)({error:t,code:p.ExceptionCriticality.ERROR}),[]}}async extractLeakedPasswords(e){try{if(!e||!e.cipheredKey||!e.cipheredInfo)return{};const t=this.storeService.getState(),r=(0,f.sharingKeysSelector)(t);if(!r||!r.publicKey||!r.privateKey)return{};const{privateKey:n}=r,o=(0,i.makeAsymmetricEncryption)({hashAlgorithm:s.HashAlgorithm.SHA_1}),a=await o.decrypt(n,e.cipheredKey),l=(0,c.makeDataEncryptorService)(this.storeService),d=(0,u.base64ToBuffer)(a),p=(0,u.arrayBufferToText)(d);l.setInstance({raw:p},"");const g=await l.getInstance().decrypt(e.cipheredInfo),m=(0,E.deflatedUtf8ToUtf16)(g,{skipInflate:!0}),h=JSON.parse(m);return(0,v.getLeakedPasswordFromIncomingDataLeakDetails)(h)}catch(e){const t=new Error(`[Breaches] - extractLeakedPasswords: ${e}`);return(0,d.sendExceptionLog)({error:t}),{}}}}},12756:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isIncomingDataLeakPasswordInfo=t.isIncomingDataLeakBreachDetails=void 0;const n=r(16516);t.isIncomingDataLeakBreachDetails=e=>(0,n.is)(Object,e)&&"string"==typeof e.breachId&&""!==e.breachId&&Array.isArray(e.data),t.isIncomingDataLeakPasswordInfo=e=>(0,n.is)(Object,e)&&"password"===e.type&&"plaintext"===e.hashMethod&&"string"==typeof e.value&&""!==e.value},48162:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBreachesWSResponseNotModified=t.getLeakedPasswordFromIncomingDataLeakDetails=t.makeIncomingBreach=void 0;const n=r(12756);t.makeIncomingBreach=(e,t)=>({content:e,leakedPasswords:t}),t.getLeakedPasswordFromIncomingDataLeakDetails=e=>{if(!Array.isArray(e))return{};const t=e=>(0,n.isIncomingDataLeakPasswordInfo)(e)?e.value:null;return e.reduce(((e,r)=>{if(!(0,n.isIncomingDataLeakBreachDetails)(r))return e;const{breachId:o,data:a}=r,i=a.map(t).filter(Boolean);return i.length?{...e,[o]:i}:e}),{})},t.isBreachesWSResponseNotModified=e=>304===e.code},75130:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BreachVault=void 0;const n=r(45291),o=r(12362),a=r(86691),i=r(21342);t.BreachVault=class{constructor(e){this.storeService=e}async applyChangesFromSync(e,t,r){const i=(0,n.breachesUpdated)(e,t,r);let s=null,c=null;const{updates:u,deletions:l}=e,d=u.length+l.length,p=(0,o.getInstance)(),f=(0,a.getInstance)();try{d&&(s=f.lockTopic("healthUpdates"),c=f.lockTopic("iconsUpdates"),await p.add("healthUpdates",{type:"breachUpdates"}),await p.add("iconsUpdates",{type:"breachUpdates",breachesIds:u.map((e=>e.Id))})),this.storeService.dispatch(i),d&&(f.releaseTopic("healthUpdates",s),f.releaseTopic("iconsUpdates",c))}catch(e){throw s&&f.releaseTopic("healthUpdates",s),c&&f.releaseTopic("iconsUpdates",c),e}}getAllBreaches(){const e=this.storeService.getState();return(0,i.breachesSelector)(e)}getLatestPublicBreachesRevision(){const e=this.storeService.getState();return(0,i.publicBreachesRevisionSelector)(e)}getPrivateBreachesRefreshDate(){const e=this.storeService.getState();return(0,i.privateBreachesLastUpdateTimestamp)(e)}}},44331:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CredentialVault=void 0;const n=r(51319);t.CredentialVault=class{constructor(e){this.storeService=e}getAllCredentials(){const e=this.storeService.getState();return(0,n.credentialsSelector)(e)}}},9335:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.detailItemView=void 0;const n=r(16516),o=r(88749),a=r(86715),i=r(90451),s=(0,n.defaultTo)([]);function c({name:e,domains:t}){if(e)return e;if(t.length>0){const[e]=t;return e}return""}function u(e,t){if(t&&0!==t.length)return(0,i.getIcon)(e)(t[0])}function l(e,t){const r=t.Content,n=(0,a.isDataLeaksBreach)(t)?t.Content.impactedEmails:[];return{domains:s(r.domains),breachType:(0,o.breachTypeMapper)(t),domainIcon:u(e,t.Content.domains),eventDate:r.eventDate,id:t.Id,impactedEmails:n,name:c(r),status:t.Status}}t.detailItemView=function(e,t,r){const n=r.Content,i=(0,a.isDataLeaksBreach)(r)?r.Content.impactedEmails:[],l=new Set;for(const e in t.credentialsHealth)t.credentialsHealth[e].credentialBreachIds.includes(r.BreachId)&&l.add(e);return{anonId:r.AnonId,breachType:(0,o.breachTypeMapper)(r),domains:s(n.domains),domainIcon:u(e,r.Content.domains),eventDate:n.eventDate,id:r.Id,impactedEmails:i,kwType:r.kwType,leakedData:s(n.leakedData),leakedPasswords:s(r.LeakedPasswords),name:c(n),status:r.Status,compromisedCredentialIds:[...l]}},t.itemView=l,t.listView=function(e,t){return t.map((t=>l(e,t)))}},83480:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasBreachLeakedPrivateInfo=t.hasBreachLeakedDataOfType=t.isBreachDeleted=t.findByBreachId=t.deduplicateBreachContents=void 0;const n=r(16516),o=r(67083),a=r(86715),i=(0,n.takeLast)(1);t.deduplicateBreachContents=(0,n.pipe)((0,n.groupBy)((0,n.prop)("id")),(0,n.mapObjIndexed)((0,n.sortBy)((0,n.prop)("lastModificationRevision"))),(0,n.mapObjIndexed)((e=>i(e))),n.values,n.flatten),t.findByBreachId=(e,t)=>t.find((t=>t.BreachId===e)),t.isBreachDeleted=e=>e.status===o.BreachEnvStatus.Deleted,t.hasBreachLeakedDataOfType=(e,t)=>(e.leakedData||[]).findIndex((e=>t===e))>=0,t.hasBreachLeakedPrivateInfo=e=>(0,a.isDataLeaksBreachContent)(e)||((e,t)=>(e.leakedData||[]).findIndex((e=>t.some((t=>t===e))))>=0)(e,[o.BreachLeakedDataType.Email,o.BreachLeakedDataType.Username,o.BreachLeakedDataType.CreditCard,o.BreachLeakedDataType.Phone,o.BreachLeakedDataType.Address,o.BreachLeakedDataType.SSN,o.BreachLeakedDataType.IP,o.BreachLeakedDataType.Location,o.BreachLeakedDataType.PersonalInfo,o.BreachLeakedDataType.SocialNetwork])},86715:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPublicBreach=t.isDataLeaksBreach=t.isDataLeaksBreachContent=t.isBreach=t.isSupportedBreach=t.isSupportedBreachContent=void 0;const n=r(16516),o=e=>(0,n.is)(Object,e);function a(e){return function(e){return o(e)&&"number"==typeof e.breachModelVersion}(e)&&1===e.breachModelVersion&&Array.isArray(e.domains)&&"string"==typeof e.eventDate&&"string"==typeof e.id}function i(e){return s(e)&&a(e.Content)}function s(e){return Boolean(e)&&"KWSecurityBreach"===e.kwType}function c(e){return function(e){return"impactedEmails"in e&&Array.isArray(e.impactedEmails)}(e)&&e.impactedEmails.length>0}t.isSupportedBreachContent=a,t.isSupportedBreach=i,t.isBreach=s,t.isDataLeaksBreachContent=c,t.isDataLeaksBreach=e=>i(e)&&c(e.Content),t.isPublicBreach=e=>i(e)&&!c(e.Content)},52283:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.breachesUpdaterStatus$=t.getBreach$=t.breaches$=t.breachesBatch$=void 0;const n=r(18948),o=r(3343),a=r(35893),i=r(33627),s=r(55220),c=r(21342);t.breachesBatch$=e=>{const t=(0,a.parseToken)(e),r=(0,c.getViewedBreachesBatchSelector)(t);return(0,n.pipe)((0,o.map)(r),(0,o.distinctUntilChanged)(i.sameBatch))},t.breaches$=(0,s.getLivePersonalInfo)(c.getLiveBreachesSelector),t.getBreach$=function(e){const t=(0,c.getViewedBreachSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.breachesUpdaterStatus$=()=>(0,n.pipe)((0,o.map)(c.breachesUpdaterStatusSelector),(0,o.distinctUntilChanged)())},88749:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBreachMappers=t.breachTypeMapper=void 0;const n=r(86715);function o(e){return(0,n.isDataLeaksBreach)(e)?"private":"public"}t.breachTypeMapper=o,t.getBreachMappers=()=>({breachType:e=>o(e),eventDate:e=>function({eventDate:e}){return Date.parse(e)}(e.Content),id:e=>e.Id,status:e=>e.Status})},69623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBreachesBatch=t.viewBreachesBatch=t.getBreachesFirstToken=t.getBreacheSortToken=t.getBreachesFilterToken=void 0;const n=r(16516),o=r(20553),a=r(9335);t.getBreachesFilterToken=({filterCriteria:e})=>({filterCriteria:e||[]}),t.getBreacheSortToken=({sortCriteria:e})=>({uniqField:"id",sortCriteria:e||[]}),t.getBreachesFirstToken=(e,t,r,n)=>(0,o.generateFirstToken)(e,t,r.initialBatchSize||30,n),t.viewBreachesBatch=(e,t)=>(0,a.listView)(e,t),t.getBreachesBatch=(0,n.curry)(((e,t,r)=>(0,o.getBatch)(r,e,t)))},37600:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.breachMatch=t.searchGetters=void 0;const n=r(64455);t.searchGetters=[],t.breachMatch=(0,n.match)(t.searchGetters)},21342:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.breachesUpdaterStatusSelector=t.getViewedBreachSelector=t.getViewedBreachesBatchSelector=t.getLiveBreachesSelector=t.fieldMappersSelector=t.breachesQuerySelector=t.breachesPaginationTokenSelector=t.breachesPageSelector=t.viewedQueriedBreachesSelector=t.breachMappersSelector=t.viewedBreachSelector=t.breachSelector=t.privateBreachesLastUpdateTimestamp=t.publicBreachesRevisionSelector=t.publicBreachesSelector=t.privateBreachesSelector=t.breachesSelector=void 0;const n=r(18948),o=r(32034),a=r(86715),i=r(49551),s=r(63566),c=r(24589),u=r(35893),l=r(20553),d=r(97006),p=r(9335),f=r(88749),g=r(37600),m=r(69623),h=r(91892),y=r(26766),S=e=>e.userSession.personalData.securityBreaches,v=(0,o.createSelector)(S,(e=>e.filter(a.isSupportedBreach)));function E(e,r){const n=(0,t.breachesSelector)(e);return(0,i.findDataModelObject)(r,n)}t.breachesSelector=(0,o.createSelector)(v,(e=>[...e.reduce(((e,t)=>{const r=e.get(t.BreachId);return(!r||r.LastBackupTime<t.LastBackupTime)&&e.set(t.BreachId,t),e}),new Map).values()])),t.privateBreachesSelector=(0,o.createSelector)(S,(e=>[...new Set(e.filter(a.isDataLeaksBreach))])),t.publicBreachesSelector=(0,o.createSelector)(S,(e=>[...new Set(e.filter(a.isPublicBreach))])),t.publicBreachesRevisionSelector=e=>e.userSession.personalData.securityBreachesMetadata.latestPublicBreachesRevision,t.privateBreachesLastUpdateTimestamp=e=>e.userSession.personalData.securityBreachesMetadata.latestDataLeaksBreachesUpdate,t.breachSelector=E,t.viewedBreachSelector=function(e,t){const r=(0,h.iconsSelector)(e),n=E(e,t),o=(0,y.healthSelector)(e);return(0,p.detailItemView)(r,o,n)},t.breachMappersSelector=e=>(0,f.getBreachMappers)();const A=()=>g.breachMatch,_=(0,c.getQuerySelector)(t.breachesSelector,A,t.breachMappersSelector),b=(0,o.createSelector)(h.iconsSelector,(e=>t=>(0,m.viewBreachesBatch)(e,t)));t.viewedQueriedBreachesSelector=(e,t)=>{const r=_(e,t),n=b(e);return(0,s.viewListResults)(n)(r)},t.breachesPageSelector=function(e,r){const n=(0,u.parseToken)(r),{sortToken:o,filterToken:a}=n,i={sortToken:o,filterToken:a},s=(0,f.getBreachMappers)(),c=(0,t.breachesQuerySelector)(e,i),d=b(e),p=(0,l.generateNextToken)(s,n,c),g=(0,l.generatePrevToken)(s,n,c),m=(0,l.getBatch)(s,n,c),h=(0,u.stringifyToken)(p),y=(0,u.stringifyToken)(g);return{batch:d(m),nextToken:h,prevToken:y}},t.breachesPaginationTokenSelector=(e,r)=>{const n=(0,m.getBreacheSortToken)(r),o=(0,m.getBreachesFilterToken)(r),a=(0,f.getBreachMappers)(),i={sortToken:n,filterToken:o},s=(0,t.breachesQuerySelector)(e,i),c=(0,m.getBreachesFirstToken)(a,i,r,s);return(0,u.stringifyToken)(c)};const T=(0,u.createOptimizedSortTokenSelector)(((e,{sortToken:t})=>t),n.identity),I=(0,u.createOptimizedFilterTokenSelector)(((e,{filterToken:t})=>t),n.identity);t.breachesQuerySelector=(0,o.createSelector)(f.getBreachMappers,A,T,I,t.breachesSelector,u.queryData),t.fieldMappersSelector=(0,o.createSelector)(t.breachesSelector,f.getBreachMappers),t.getLiveBreachesSelector=(0,d.makeLiveSelectorGetter)(t.breachesSelector,b,A,t.breachMappersSelector),t.getViewedBreachesBatchSelector=e=>{const{sortToken:r,filterToken:n}=e,a={sortToken:r,filterToken:n},i=(0,m.getBreachesBatch)(e),s=(0,o.createSelector)((e=>(0,t.breachesQuerySelector)(e,a)),t.fieldMappersSelector,i),c=(0,u.optimizeBatchSelector)(s);return(0,o.createSelector)(h.iconsSelector,c,m.viewBreachesBatch)},t.getViewedBreachSelector=function(e){const r=(0,o.createSelector)(t.breachesSelector,(t=>(0,i.findDataModelObject)(e,t)));return(0,o.createSelector)(h.iconsSelector,y.healthSelector,r,p.detailItemView)},t.breachesUpdaterStatusSelector=e=>e.userSession.personalData.breachesUpdaterStatus},79405:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(95303);t.setupSubscriptions=async function(e,t){const{storeService:r,wsService:o}=t;e.syncSuccess.on((()=>{(0,n.getInstance)(r,o).refresh({forceRefresh:!1})}))}},67083:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BreachCriticality=t.BreachEnvStatus=t.BreachLeakedDataType=t.BreachStatus=void 0,function(e){e.PENDING="PENDING",e.VIEWED="VIEWED",e.ACKNOWLEDGED="ACKNOWLEDGED"}(t.BreachStatus||(t.BreachStatus={})),function(e){e.Username="username",e.Password="password",e.Email="email",e.CreditCard="creditcard",e.Phone="phone",e.Address="address",e.SSN="ssn",e.IP="ip",e.Location="geolocation",e.PersonalInfo="personalinfo",e.SocialNetwork="social"}(t.BreachLeakedDataType||(t.BreachLeakedDataType={})),function(e){e.Legacy="legacy",e.Live="live",e.Staging="staging",e.Deleted="deleted"}(t.BreachEnvStatus||(t.BreachEnvStatus={})),function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(t.BreachCriticality||(t.BreachCriticality={}))},40220:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentData=t.getChangeSet=t.getChangedProperties=t.getChangedPropertiesForRemoval=void 0;const n=r(16516),o=r(78320),a=r(47408),i=r(15171),s={KWAuthentifiant:{Email:"",Login:"",Note:"",Password:"",SecondaryLogin:"",Title:"",Url:"",UserSelectedUrl:"",LinkedServices:{associated_domains:[]}},KWSecureNote:{Content:"",Title:""}};function c(e){const t=s[e.kwType];return Object.keys(t).filter((r=>"LinkedServices"===r?e[r]?.associated_domains&&e[r].associated_domains.length>0:e[r]&&e[r]!==t[r]))}function u(e,t){const r=s[e.kwType];return Object.keys(r).filter((r=>{if("LinkedServices"===r){const n=(e[r]?.associated_domains??[]).map((e=>e.domain)),o=(t[r]?.associated_domains??[]).map((e=>e.domain));return!(0,i.areStringListsEquivalent)(n,o)}return e[r]&&""!==e[r]&&e[r]!==t[r]}))}function l(e){return Object.keys(s[e.kwType]).reduce(((t,r)=>(t[r]="LinkedServices"===r?e[r]?.associated_domains?e[r]:{associated_domains:[]}:e[r]||"",t)),{})}t.getChangedPropertiesForRemoval=c,t.getChangedProperties=u,t.getChangeSet=function(e){const{change:t,deviceName:r,oldItem:i,userLogin:s,platformInfo:d}=e;if((0,n.isNil)(i))return null;const p="removal"===t.type?c(i):u(i,t.updatedItem);return 0===p.length?null:{kwType:"KWChangeSet",ChangedProperties:p,CurrentData:l(i),Id:(0,o.generateItemUuid)(),Platform:d.platformName,DeviceName:r||"",ModificationDate:(0,a.getUnixTimestamp)(),Removed:(0,n.defaultTo)(!1,"removal"===t.type),User:s}},t.getCurrentData=l},85225:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeRemovalChange=t.makeUpdateChange=void 0,t.makeUpdateChange=e=>({type:"update",updatedItem:e}),t.makeRemovalChange=e=>({type:"removal",itemId:e.Id,itemKwType:e.kwType})},73566:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUpdatedItemChangeHistory=t.isChangeHistoryCandidate=t.getEmptyChangeHistory=void 0;const n=r(16516),o=r(53576),a=r(78320),i=r(40220),s=r(84977),c=r(83638),u=r(49551);function l(e){const[t,r,n]="removal"===e.type?[e.itemId,e.itemKwType,""]:[e.updatedItem.Id,e.updatedItem.kwType,e.updatedItem.Title||""];return{kwType:"KWDataChangeHistory",ChangeSets:[],Id:(0,a.generateItemUuid)(),ObjectId:t,ObjectTitle:n,ObjectType:(0,c.getTransactionTypeFromDataModelType)(r),LastBackupTime:0}}t.getEmptyChangeHistory=l;t.isChangeHistoryCandidate=function(e){return(0,o.isCredential)(e)||(0,o.isNote)(e)},t.getUpdatedItemChangeHistory=function(e){const{deviceName:t,personalData:r,change:o,userLogin:a,platformInfo:c}=e,[d,p,f]="removal"===o.type?[o.itemId,o.itemKwType,""]:[o.updatedItem.Id,o.updatedItem.kwType,o.updatedItem.Title],g=s.default[p],m=(0,u.findDataModelObject)(d,r[g]),h=(0,i.getChangeSet)({deviceName:t,change:o,oldItem:m,userLogin:a,platformInfo:c});if(!h)return null;const y=r.changeHistories.find((e=>e?.ObjectId?.toUpperCase()===(d||"").toUpperCase())),S=y||l(o),v=(0,n.last)(S.ChangeSets);return v&&((e,t)=>(0,n.equals)(t.CurrentData,e.CurrentData))(v,h)?null:{...S,ObjectTitle:f,ChangeSets:S.ChangeSets.concat(h)}}},35385:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsHistoriesSelector=void 0;const n=r(32034),o=r(40602),a=r(83659),i=r(57989),s=r(83638),c=e=>e.ObjectType===s.TransactionType.AUTHENTIFIANT,u=(0,n.createSelector)((e=>e.userSession.personalData.changeHistories),(e=>e.filter(c)));t.credentialsHistoriesSelector=(0,n.createSelector)(u,i.quarantinedSpacesSelector,a.unsafeAllCredentialsSelector,o.filterOutQuarantinedItems)},43837:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(42682);t.config={commands:{addCollection:{handler:n.addCollectionHandler},deleteCollection:{handler:n.deleteCollectionHandler},removeItemsFromCollections:{handler:n.removeItemsFromCollectionsHandler},updateCollection:{handler:n.updateCollectionHandler}},queries:{},liveQueries:{}}},55740:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addCollectionHandler=t.getNewCollection=void 0;const n=r(53576),o=r(10203),a=r(23136),i=r(48313),s=r(47408),c=r(78320),u=r(70252),l=r(13675);function d(e){const t=(0,s.getUnixTimestamp)();return{kwType:"KWCollection",Id:(0,c.generateItemUuid)(),LastBackupTime:0,LastUse:t,LocaleFormat:n.Country.UNIVERSAL,AnonId:(0,c.generateItemUuid)(),SpaceId:e.spaceId,CreationDatetime:t,UserModificationDatetime:t,Name:e.name,VaultItems:e.vaultItems.map((e=>({Id:e.id,Type:e.type})))}}t.getNewCollection=d,t.addCollectionHandler=async function(e,t){try{const r=await async function({storeService:e,sessionService:t},r){if(!e.isAuthenticated())throw new Error("No session available to addCollection");const n=d((0,l.sanitizeInputPersonalData)(r));return e.dispatch((0,i.savePersonalDataItem)(n,n.kwType)),t.getInstance().user.persistPersonalData(),n.Id}(e,t);return(0,a.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},o.Trigger.Save),{success:!0,id:r}}catch(e){return(0,u.sendExceptionLog)({error:e}),{success:!1}}}},9833:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCollectionHandler=void 0;const n=r(10203),o=r(23136),a=r(70252),i=r(53576),s=r(45291);t.deleteCollectionHandler=async function(e,t){try{return await async function({storeService:e,sessionService:t},r){if(!e.isAuthenticated())throw new Error("No session available to deleteCollection");const n=(0,s.removePersonalItem)(i.DataModelType.KWCollection,r,null);e.dispatch(n),t.getInstance().user.persistPersonalData()}(e,t.id),(0,o.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),{success:!0}}catch(e){return(0,a.sendExceptionLog)({error:e}),{success:!1}}}},42682:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(55740),t),o(r(9833),t),o(r(73240),t),o(r(6366),t)},73240:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeItemsFromCollectionsHandler=void 0;const n=r(53626),o=r(6366);t.removeItemsFromCollectionsHandler=async function(e,t){const r=e.storeService.getState(),a=(0,n.collectionsSelector)(r),i=[];let s,c;if(a.forEach((e=>{s=e.VaultItems.length,e.VaultItems=e.VaultItems.filter((e=>!t.ids.includes(e.Id))),c=e.VaultItems.length,s!==c&&i.push(e)})),!i.length)return;const u=i.map((t=>(0,o.updateCollectionHandler)(e,{id:t.Id,name:t.Name,spaceId:t.SpaceId,vaultItems:t.VaultItems.map((e=>({id:e.Id,type:e.Type})))})));return{success:!(await Promise.all(u)).some((e=>!e.success))}}},6366:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCollectionHandler=void 0;const n=r(10203),o=r(23136),a=r(48313),i=r(47408),s=r(70252),c=r(13675),u=r(53626),l=e=>({LastUse:(0,i.getUnixTimestamp)(),Name:e.name,SpaceId:e.spaceId,VaultItems:e.vaultItems.map((e=>({Id:e.id,Type:e.type})))});t.updateCollectionHandler=async function(e,t){try{return await async function(e,t,r){if(!e.isAuthenticated())throw new Error("No session available to updateCollection");const n=function(e,t){const r=(0,u.collectionSelector)(e,t.id);if(!r)throw new Error("[updateCollection]: unable to find collection to update.");return{...r,...l(t)}}(e.getState(),(0,c.sanitizeInputPersonalData)(r));return e.dispatch((0,a.savePersonalDataItem)(n,n.kwType)),t.getInstance().user.persistPersonalData()}(e.storeService,e.sessionService,t),(0,o.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),{success:!0}}catch(e){return(0,s.sendExceptionLog)({error:e}),{success:!1}}}},10770:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(42682),t),o(r(53626),t),o(r(182),t)},53626:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectionSelector=t.collectionsSelector=void 0;const n=r(49551);t.collectionsSelector=e=>e.userSession.personalData.collections,t.collectionSelector=(e,r)=>{const o=(0,t.collectionsSelector)(e);return(0,n.findDataModelObject)(r,o)}},182:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCollectionNamesContainingVaultItemId=void 0,t.getCollectionNamesContainingVaultItemId=(e,t)=>t.flatMap((t=>t.VaultItems.some((t=>t.Id===e))?t.Name:[]))},49874:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(31887);t.config={commands:{setupDefaultCredentialsCategories:{handler:n.setupDefaultCredentialsCategoriesHandler}},queries:{},liveQueries:{}}},31887:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupDefaultCredentialsCategoriesHandler=void 0;const n=r(10203),o=r(95861),a=r(23136),i=r(45291),s=r(53966);t.setupDefaultCredentialsCategoriesHandler=async function(e,t){try{const{storeService:r,sessionService:c}=e;if(!r.isAuthenticated())return{success:!1};!function(e){const{storeService:t,sessionService:r,eventLoggerService:o}=e,c=t.getPersonalData().credentialCategories.filter((e=>e.CategoryName.startsWith("CATEGORY_CREDENTIAL"))).map((e=>{const t=(0,i.removePersonalItem)(e.kwType,e.Id,null);return o.logEvent(new n.UserUpdateVaultItemEvent({action:n.Action.Delete,itemId:e.Id,itemType:s.dataModelTypeToItemType[e.kwType],space:n.Space.All})),t}));c.forEach((e=>t.dispatch(e))),c.length>0&&(r.getInstance().user.persistPersonalData(),(0,a.getDebounceSync)(t,r)({immediateCall:!0},n.Trigger.Save))}(e);const u=r.getPersonalData().credentialCategories;return u&&0!==u.length||(t.categories.forEach((e=>{(0,o.saveCredentialCategory)(r,{name:e})})),c.getInstance().user.persistPersonalData(),(0,a.getDebounceSync)(r,c)({immediateCall:!0},n.Trigger.Save)),{success:!0}}catch(e){return{success:!1}}}},95861:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUpdatedCredentialCategory=t.getNewCredentialCategory=t.saveCredentialCategory=void 0;const n=r(45291),o=r(95623),a=r(78320),i=r(49551);function s(e){return o.Debugger.log(`[Data] Creating new Credential Category: ${e}`),{kwType:"KWAuthCategory",Id:(0,a.generateItemUuid)(),CategoryName:e.trim(),LastBackupTime:0}}function c(e,t){const r=(0,i.findDataModelObject)(t.id,e);if(!r)throw new Error("UI asks to update an unknown Credential Category");return o.Debugger.log(`[Data] Updating existing Credential Category ${t.id}`),{...r,CategoryName:t.name.trim()}}t.saveCredentialCategory=function(e,t){if(!e.isAuthenticated())return void o.Debugger.error("No session available to saveCredentialCategory");const r=e.getPersonalData().credentialCategories;if(!function(e,t){return"string"==typeof t&&""!==t.trim()&&!e.some((e=>e.CategoryName===t))}(r,t.name))return void o.Debugger.error(new Error("Can not save Category with this name: Empty or already used"));const a=t.id?c(r,t):s(t.name);return e.dispatch((0,n.saveCredentialCategory)(a)),a},t.getNewCredentialCategory=s,t.getUpdatedCredentialCategory=c},2946:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(8777),o=r(71806),a=r(7657),i=r(10043),s=r(35410),c=r(67900),u=r(355),l=r(80920),d=r(40557),p=r(2391),f=r(79895),g=r(60581),m=r(66663),h=r(28831),y=r(73567),S=r(9763),v=r(52109),E=r(39546),A=r(70853),_=r(8766),b=r(15171);t.config={commands:{addCredential:{handler:S.createCredential},deleteCredential:{handler:v.deleteCredentialHandler},deleteCredentialsInBulk:{handler:E.deleteCredentialsInBulkHandler},updateCredential:{handler:A.updateCredentialHandler},updateLinkedWebsites:{handler:b.updateLinkedWebsitesHandler}},queries:{canUserAddNewCredential:{selector:n.canUserAddNewCredentialSelector},getCredential:{selector:g.viewedCredentialSelector},getCredentialCategories:{selector:f.viewedCredentialCategoriesSelector},getCredentials:{selector:m.viewedQueriedCredentialsSelector},getCredentialsByDomain:{selector:h.viewedQueriedCredentialsByDomainSelector},getCredentialsCount:{selector:o.credentialsCountSelector},getCredentialLimitStatus:{selector:a.credentialLimitStatusSelector},getCredentialsPage:{selector:i.credentialsPageSelector},getCredentialsPaginationToken:{selector:s.credentialsPaginationTokenSelector},getCredentialsHealthScore:{selector:p.credentialsHealthScoreSelector},getCompromisedCredentialsCount:{selector:c.compromisedCredentialsCountSelector},getDashlaneDefinedLinkedWebsites:{selector:_.getDashlaneDefinedLinkedWebsitesSelector},getReusedCredentialsCount:{selector:u.reusedCredentialsCountSelector},getShouldShowRequireMasterPassword:{selector:l.shouldShowRequireMasterPasswordSelector},getWeakCredentialsCount:{selector:d.weakCredentialsCountSelector}},liveQueries:{liveCanUserAddNewCredential:{operator:y.canUserAddNewCredential$},liveCredentialLimitStatus:{operator:y.credentialLimitStatus$},liveCredential:{operator:y.getCredential$},liveCredentials:{operator:y.credentials$},liveCredentialsByDomain:{operator:y.credentialsByDomain$},liveCredentialsBatch:{operator:y.credentialsBatch$},liveCredentialsCount:{operator:y.credentialsCount$},liveCredentialsHealthScore:{operator:y.credentialsHealthScore$},liveCompromisedCredentialsCount:{operator:y.compromisedCredentialsCount$},liveReusedCredentialsCount:{operator:y.reusedCredentialsCount$},liveWeakCredentialsCount:{operator:y.weakCredentialsCount$}}}},98760:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(83690),t)},39373:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleLimitedSharedCredentialsPassword=t.removeCredentialsWithQuarantinedSpaces=t.fixCredentialsWithMissingTitles=t.fixCredentialWithMissingTitle=void 0;const n=r(52578),o=r(89489),a=r(90073);function i(e){return e.Title?e:Object.assign({},e,{Title:(0,a.getDomainForCredential)(e)})}t.fixCredentialWithMissingTitle=i,t.fixCredentialsWithMissingTitles=function(e){return e.map(i)},t.removeCredentialsWithQuarantinedSpaces=function(e,t){if(!e.spaces||0===e.spaces.length)return t;const r=[];return e.spaces.filter(n.isSpaceQuarantined).forEach((e=>{const o=e.details.info&&e.details.info.teamDomains?e.details.info.teamDomains:[];t.filter((e=>(0,n.isCredentialSmartCategorized)(e,o))).forEach((t=>{""!==t.SpaceId&&t.SpaceId===e.details.teamId&&r.push(t)}))})),t.filter((e=>!r.includes(e)))},t.handleLimitedSharedCredentialsPassword=function(e,t,r){const n=(0,o.getLimitedSharedItemIds)(t,r);return e.map((e=>n[e.Id]?Object.assign({},e,{Password:"************",limitedPermissions:!0}):e))}},36439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countCredentials=void 0;const n=r(35893);t.countCredentials=(e,t,r,o)=>(0,n.filterData)(e,t,r,o).length},90073:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDomainForCredential=void 0;const n=r(11814);t.getDomainForCredential=e=>n.url.getDomainForUrl(e.Url)},52109:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCredentialHandler=void 0;const n=r(10203),o=r(76496),a=r(23136),i=r(95623),s=r(70252);t.deleteCredentialHandler=async({sessionService:e,storeService:t,wsService:r,eventLoggerService:c},{credentialId:u})=>{try{return(await(0,o.deletePersonalDataItem)({storeService:t,wsService:r,eventLoggerService:c},u,{manualHealthUpdate:!0})).success?((0,a.getDebounceSync)(t,e)({immediateCall:!0},n.Trigger.Save),Promise.resolve({success:!0})):Promise.resolve({success:!1})}catch(e){const t=new Error(`[Credentials] - deleteCredentialHandler: ${e}`);return(0,s.sendExceptionLog)({error:t}),(0,i.logError)(t),Promise.resolve({success:!1})}}},39546:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCredentialsInBulkHandler=void 0;const n=r(28354),o=r(10203),a=r(10770),i=r(76496),s=r(23136),c=r(95623),u=r(70252),l=r(12362),d=r(57289),p=r(89438),f=r(16530);t.deleteCredentialsInBulkHandler=async(e,{credentialList:t})=>{const{sessionService:r,storeService:l,wsService:d,eventLoggerService:p,localStorageService:f,applicationModulesAccess:m}=e;try{let c=[];const u=(0,n.v4)(),h=t.map((e=>(0,i.deletePersonalDataItem)({storeService:l,wsService:d,eventLoggerService:p,applicationModulesAccess:m},e,{multiSelectId:u,manualHealthUpdate:!0}).then((t=>({...t,itemId:e})))));await Promise.all(h).then((e=>c=e.filter((e=>!e.success)))),(0,s.getDebounceSync)(l,r)({immediateCall:!0},o.Trigger.Save);const y=t.filter((e=>!c.some((t=>t.itemId===e))));return g(y,l,f,m),(0,a.removeItemsFromCollectionsHandler)(e,{ids:y}),c.length>0?Promise.resolve({success:!1,notRemoved:c.length}):Promise.resolve({success:!0})}catch(e){const t=new Error(`[Credentials] - deleteCredentialsInBulkHandler: ${e}`);return(0,u.sendExceptionLog)({error:t}),(0,c.logError)(t),Promise.resolve({success:!1})}};const g=async(e,t,r,n)=>{if(t.getPersonalFeatures().features.ims_web_ph_mv3_dev){const{commands:t}=n.createClients().vaultItemsCrud;return await t.emitTemporaryVaultItemEvent({ids:[...e],eventType:f.EventType.Deleted}),!0}if(e.length>50)try{const e=t.getState(),n=r.getInstance(),o=await(0,d.computeAllHealthState)(e),a=(0,p.healthStateUpdated)(o);t.dispatch(a),await n.storeHealth(o),await n.storeHealthWasComputed(!0)}catch(e){const t=`Failed to handle credential health updates with ${e}`;c.default.error(t);const r=new Error(t);return(0,u.sendExceptionLog)({error:r}),!1}else{const t={credentialIds:e,type:"credentialUpdates"};(0,l.getInstance)().add("healthUpdates",t)}return!0}},70853:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCredentialHandler=void 0;const n=r(95623),o=r(70252),a=r(88779);t.updateCredentialHandler=async function(e,t){const{storeService:r,sessionService:i,eventLoggerService:s,applicationModulesAccess:c}=e;try{return await(0,a.updateCredential)({storeService:r,sessionService:i,eventLoggerService:s,applicationModulesAccess:c},t),{success:!0}}catch(e){return(0,n.logError)(e),(0,o.sendExceptionLog)({error:e}),{success:!1}}}},23529:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialsDisplayTitles=void 0;const n=r(90073);t.getCredentialsDisplayTitles=function(e){const t=e.reduce(((e,t)=>{const{Id:r,Title:o}=t,a=o||(0,n.getDomainForCredential)(t);return e.concat([[r,a]])}),[]);return new Map(t)}},88542:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewCredential=t.afterCredentialSaved=t.notifySharersCredentialUpdated=t.makeCredentialSpecificProps=t.makeNewCredential=t.makeUpdatedCredential=t.beforeCredentialChange=t.sharedFields=t.SaveFrom=void 0;const n=r(16516),o=r(50415),a=r(53576),i=r(47975),s=r(11814),c=r(87496),u=r(61923),l=r(48313),d=r(47408);t.SaveFrom=(0,o.Enum)("MANUAL","SAVE_PASSWORD","DATACAPTURE","IMPORT");const p=r(70252),f=r(78163),g=r(43145),m=r(65968),h=r(83687),y=r(92307),S=r(43480),v=r(90451),E=r(53576);t.sharedFields=["Email","Login","Note","OtpSecret","OtpUrl","Password","SecondaryLogin","Title","Url","UseFixedUrl","UserSelectedUrl","LinkedServices"];const A=(0,n.defaultTo)("");function _(e,t){const r=t?.UserSelectedUrl??"",n=t?.UseFixedUrl??!1,o=t?.TrustedUrlGroup??[],i=e.origin===a.SaveOrigin.MANUAL,s=t?.Url!==e.content.url,u=(0,c.cleanUrlForPersonalData)(e.content.url,{keepQueryString:i}),l=i&&s?{UserSelectedUrl:u,UseFixedUrl:!0}:{UserSelectedUrl:r,UseFixedUrl:n};return{Url:u,TrustedUrlGroup:(0,c.getUpdatedTrustedUrlList)(o,u),...l}}async function b(e,t,r=(0,d.getUnixTimestamp)()){const{content:o}=e,{email:a,login:s,secondaryLogin:c}=(0,u.normalizeUsernames)(o.email,o.login,o.secondaryLogin),l={associated_domains:o.linkedWebsites?.addedByUser?.map((e=>({source:E.LinkedWebsiteSource.Manual,domain:e})))??[]},p=A(o.password),f=t&&t.Password===p?{}:{ModificationDatetime:r},g=function(e,t){return({itemField:r,existingItemField:o,defaultValue:a})=>(0,n.isNil)(e[r])?t&&!(0,n.isNil)(t[o])?t[o]:a:e[r]}(o,t);return{AutoLogin:g({itemField:"autoLogin",existingItemField:"AutoLogin",defaultValue:!0}),AutoProtected:g({itemField:"protectWithMasterPassword",existingItemField:"AutoProtected",defaultValue:!1}),Category:g({itemField:"category",existingItemField:"Category",defaultValue:""}),Checked:g({itemField:"checked",existingItemField:"Checked",defaultValue:!1}),Email:a,Login:s,Note:g({itemField:"note",existingItemField:"Note",defaultValue:""}),Password:p,SecondaryLogin:c,Status:"ACCOUNT_NOT_VERIFIED",Strength:p?await(0,i.evaluatePasswordStrength)(p):0,SubdomainOnly:Boolean(o.onlyForThisSubdomain),Title:g({itemField:"title",existingItemField:"Title",defaultValue:""}),..._(e,t),OtpSecret:g({itemField:"otpSecret",existingItemField:"OtpSecret",defaultValue:void 0}),OtpUrl:g({itemField:"otpUrl",existingItemField:"OtpUrl",defaultValue:void 0}),LinkedServices:l,...f}}t.beforeCredentialChange=function(e,t){const r=t.credentialCategories,n=e.content.category;if(!n)return e;if(r.find((e=>e.Id===n)))return e;const o=r.find((e=>e.CategoryName===n));return((e,t)=>({...e,content:{...e.content,category:t}}))(e,o?o.Id:"")},t.makeUpdatedCredential=async function(e,t){const r=(0,d.getUnixTimestamp)(),n=await b(e,t,r);return{...t,...(0,f.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:r}),...n}},t.makeNewCredential=async function(e){const t=(0,d.getUnixTimestamp)(),r=await b(e,null,t);return function(e){const{Title:t,Url:r}=e;return{...e,Title:t||A(s.url.getDomainForUrl(r))}}({...(0,f.makeNewPersonalDataItemBase)(e,t),...r})},t.makeCredentialSpecificProps=b,t.notifySharersCredentialUpdated=async function(e,r,o){!(0,n.equals)((0,n.pick)(t.sharedFields,r),(0,n.pick)(t.sharedFields,o))&&await(0,f.notifySharersOnUpdate)(e,o).catch((e=>{const t=new Error(`[Sharing] - notifySharersCredentialUpdated: ${e}`);(0,p.sendExceptionLog)({error:t})}))},t.afterCredentialSaved=function(e,t){(0,g.associateGeneratedPasswordsToCredential)(e.getPersonalData().generatedPasswords,t).forEach((t=>{e.dispatch((0,l.saveGeneratedPassword)(t))}))},t.viewCredential=function(e,t,r,n,o,a,i,s,c){if(!e)return;const u=(0,h.getSharingStatusDetail)(a,n,o),l=(0,v.getIcon)(s),d=(0,y.getCategory)(i),p=(0,S.getCredentialHealthView)(t,r,c),f=(0,y.getSmartCategorizedSpace)(c);return(0,m.detailView)(u,d,l,p,f,e)}},73567:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.weakCredentialsCount$=t.reusedCredentialsCount$=t.compromisedCredentialsCount$=t.credentialsHealthScore$=t.credentialLimitStatus$=t.canUserAddNewCredential$=t.credentialsByDomain$=t.credentials$=t.credentialsCount$=t.getCredential$=t.credentialsBatch$=void 0;const n=r(18948),o=r(3343),a=r(8777),i=r(7657),s=r(67900),c=r(71806),u=r(2391),l=r(61645),d=r(86685),p=r(78767),f=r(355),g=r(40557),m=r(65950),h=r(35893),y=r(33627),S=r(55220);t.credentialsBatch$=e=>{const t=(0,h.parseToken)(e),r=(0,p.getViewedCredentialsBatchSelector)(t);return(0,n.pipe)((0,o.map)(r),(0,o.distinctUntilChanged)(y.sameBatch))},t.getCredential$=e=>{const t=(0,d.getViewedCredentialSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.credentialsCount$=e=>{const t=(0,h.parseToken)(e);return(0,n.pipe)((0,o.map)((e=>(0,c.credentialsCountSelector)(e,t))),(0,o.distinctUntilChanged)())},t.credentials$=(0,S.getLivePersonalInfo)(l.getLiveCredentialsSelector),t.credentialsByDomain$=e=>{const{domain:t,...r}=(0,h.parseToken)(e),a=(0,m.getLiveCredentialsByDomainSelector)(t)(r);return(0,n.pipe)((0,o.map)(a),(0,o.distinctUntilChanged)(((e,t)=>e.matchingCount===t.matchingCount&&(0,y.sameBatch)(e.items,t.items))))},t.canUserAddNewCredential$=()=>(0,n.pipe)((0,o.map)(a.canUserAddNewCredentialSelector),(0,o.distinctUntilChanged)()),t.credentialLimitStatus$=()=>(0,n.pipe)((0,o.map)(i.credentialLimitStatusSelector),(0,o.distinctUntilChanged)()),t.credentialsHealthScore$=e=>{const t=(0,h.parseToken)(e);return(0,n.pipe)((0,o.map)((e=>(0,u.credentialsHealthScoreSelector)(e,t))),(0,o.distinctUntilChanged)())},t.compromisedCredentialsCount$=e=>{const t=(0,h.parseToken)(e);return(0,n.pipe)((0,o.map)((e=>(0,s.compromisedCredentialsCountSelector)(e,t))),(0,o.distinctUntilChanged)())},t.reusedCredentialsCount$=e=>{const t=(0,h.parseToken)(e);return(0,n.pipe)((0,o.map)((e=>(0,f.reusedCredentialsCountSelector)(e,t))),(0,o.distinctUntilChanged)())},t.weakCredentialsCount$=e=>{const t=(0,h.parseToken)(e);return(0,n.pipe)((0,o.map)((e=>(0,g.weakCredentialsCountSelector)(e,t))),(0,o.distinctUntilChanged)())}},94687:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialMappers=t.credentialCompromisedDateMapper=t.credentialRiskLevelMapper=t.credentialStrengthMapper=t.credentialNumberReusedMapper=t.isCredentialWeakMapper=t.isCredentialAtRiskMapper=t.isCredentialReusedMapper=t.isCredentialCompromisedMapper=void 0;const n=r(16516),o=r(83539),a=r(77201),i=r(12641),s=r(41494),c=r(69198),u=r(93650),l=r(62525),d=r(71646),p=(0,n.curry)(((e,t)=>e.get(t.Id)||"")),f=e=>!!e.Attachments&&e.Attachments.length>0,g=(0,n.curry)(((e,t)=>!!e[t.Id])),m=e=>"boolean"==typeof e.Checked&&e.Checked;t.isCredentialCompromisedMapper=(e,t)=>{const r=new Map;return n=>{const o=n.Id,a=r.get(o);if(a)return a;const s=(0,i.getCredentialCompromisedInfo)(n,e,t),u=(0,c.healthInfoHasValue)(s,!0);return r.set(o,u),u}},t.isCredentialReusedMapper=(e,t)=>{const r=new Map;return n=>{const o=n.Id,a=r.get(o);if(a)return a;const i=(0,s.getCredentialPasswordReusedInfo)(n,e,t),u=(0,c.healthInfoHasValue)(i,!0);return r.set(o,u),u}},t.isCredentialAtRiskMapper=(e,t,r)=>{const n=new Map;return o=>{const u=o.Id,l=n.get(u);if(l)return l;const d=(0,s.getCredentialPasswordReusedInfo)(o,t,r),p=(0,a.getCredentialPasswordIsWeakInfo)(o,e,r),f=(0,i.getCredentialCompromisedInfo)(o,e,r),g=(0,c.healthInfoHasValue)(d,!0),m=(0,c.healthInfoHasValue)(p,!0),h=(0,c.healthInfoHasValue)(f,!0),y=!!o.Checked||g||m||h;return n.set(u,y),y}},t.isCredentialWeakMapper=(e,t)=>{const r=new Map;return n=>{const o=n.Id,i=r.get(o);if(i)return i;const s=(0,a.getCredentialPasswordIsWeakInfo)(n,e,t),u=(0,c.healthInfoHasValue)(s,!0);return r.set(o,u),u}},t.credentialNumberReusedMapper=(e,t)=>{const r=new Map;return n=>{const o=n.Id,a=r.get(o);if(a)return a;const i=(0,s.getCredentialSimilarCountInfo)(n,e,t),u=(0,c.unwrapHealthInfoValueOr)(i,0);return r.set(o,u),u}},t.credentialStrengthMapper=(e,t)=>{const r=new Map;return n=>{const o=n.Id,a=r.get(o);if(a)return a;const i=(0,u.getCredentialStrengthInfo)(n,e,t),s=(0,c.unwrapHealthInfoValueOr)(i,0);return r.set(o,s),s}},t.credentialRiskLevelMapper=(e,t,r)=>{const n=new Map;return o=>{const u=o.Id,l=n.get(u);if(l)return l;const d=(0,i.getCredentialCompromisedInfo)(o,e,r),p=(0,s.getCredentialPasswordReusedInfo)(o,t,r),f=(0,a.getCredentialPasswordIsWeakInfo)(o,e,r);if((0,c.healthInfoHasValue)(d,!0)){const e=3;return n.set(u,e),e}if((0,c.healthInfoHasValue)(p,!0)){const e=2;return n.set(u,e),e}if((0,c.healthInfoHasValue)(f,!0)){const e=1;return n.set(u,e),e}return n.set(u,0),0}},t.credentialCompromisedDateMapper=(e,t,r)=>{const n=new Map;return o=>{const a=o.Id,i=n.get(a);if(i)return i;const s=(0,l.getCredentialCompromisedView)(e,t,r,o),u=(0,c.unwrapHealthInfoValueOr)(s,{isCompromised:!1});if(!u.isCompromised){const e=0;return n.set(a,e),e}const d=Date.parse(u.details.date);if(isNaN(d)){const e=0;return n.set(a,e),e}return n.set(a,d),d}};const h=(0,n.curry)(((e,t)=>{const r=t.Category,n=(e||[]).find((e=>e.Id===r));return n&&n.CategoryName?n.CategoryName:"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz"}));t.getCredentialMappers=(e,r,n,a,i,s,c,u,l)=>({category:h(e),groupIds:e=>(0,d.getItemUserGroupIds)(u,e.Id),sharingUserIds:e=>(0,d.getItemUserIds)(u,e.Id),compromisedDate:(0,t.credentialCompromisedDateMapper)(a,s,c),hasAttachments:f,id:e=>e.Id,isAtRisk:(0,t.isCredentialAtRiskMapper)(a,i,c),isCompromised:(0,t.isCredentialCompromisedMapper)(a,c),isExcluded:m,isLimited:g(r),isReused:(0,t.isCredentialReusedMapper)(i,c),isWeak:(0,t.isCredentialWeakMapper)(a,c),lastUse:o.lastUseMapper,login:e=>e.Login,numberReused:(0,t.credentialNumberReusedMapper)(i,c),numberUse:e=>e.NumberUse,spaceId:e=>e.SpaceId,riskLevel:(0,t.credentialRiskLevelMapper)(a,i,c),strength:(0,t.credentialStrengthMapper)(a,c),title:p(n),email:e=>e.Email,collectionIds:e=>((e,t)=>t.flatMap((t=>t.VaultItems.some((t=>t.Id===e))?t.Id:[])))(e.Id,l)})},25501:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialsBatch=t.viewCredentialsBatch=t.getCredentialsFirstToken=t.getCredentialsSortToken=t.getCredentialsFilterToken=void 0;const n=r(16516),o=r(20553),a=r(29179),i=r(83687),s=r(92307),c=r(43480),u=r(90451);t.getCredentialsFilterToken=({filterCriteria:e})=>({filterCriteria:e||[]}),t.getCredentialsSortToken=({sortCriteria:e})=>({uniqField:"id",sortCriteria:e||[]}),t.getCredentialsFirstToken=(e,t,r,n)=>(0,o.generateFirstToken)(e,t,r.initialBatchSize||30,n),t.viewCredentialsBatch=(e,t,r,n,o,l,d,p)=>{const f=(0,i.getSharingStatusItem)(t,r),g=(0,u.getIcon)(o),m=(0,s.getCategory)(n),h=(0,c.getCredentialHealthView)(l,d,p);return(0,a.listView)(f,m,g,h,e)},t.getCredentialsBatch=(0,n.curry)(((e,t,r)=>(0,o.getBatch)(r,e,t)))},31400:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialMatch=void 0;const n=r(64455),o=r(82234),a=r(6205),i=r(10770);t.getCredentialMatch=(e,t)=>(0,n.match)(((e,t)=>[(0,o.stringProp)("Email"),(0,o.stringProp)("Login"),(0,o.stringProp)("Title"),(0,o.stringProp)("Note"),(0,o.stringProp)("SecondaryLogin"),null===t?(0,o.stringProp)("CategoryName"):e=>(0,i.getCollectionNamesContainingVaultItemId)(e.Id,t).join(" "),e=>(0,a.getDashlaneDefinedLinkedWebsites)(e.Url).join(" "),t=>(0,a.getUserAddedLinkedWebsitesRootDomains)(t,e).join(" ")])(e,t))},8777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUserAddNewCredentialSelector=void 0;const n=r(32034),o=r(7657),a=r(37148);t.canUserAddNewCredentialSelector=(0,n.createSelector)(o.credentialLimitStatusSelector,(e=>e!==a.CredentialLimitStatus.AtOrAboveLimit))},67900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compromisedCredentialsCountSelector=void 0;const n=r(32034),o=r(9365),a=r(26766),i=r(7944),s=r(12641);t.compromisedCredentialsCountSelector=(0,n.createSelector)(o.credentialsQuerySelector,a.credentialsHealthSelector,i.spacesSelector,s.getCompromisedCredentialsCount)},74380:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countAllCredentialsSelector=void 0,t.countAllCredentialsSelector=e=>e.userSession.personalData.credentials.length},79895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewedCredentialCategoriesSelector=t.credentialCategoryNamesMapSelector=t.credentialCategoriesSelector=void 0;const n=r(32034),o=r(71120);t.credentialCategoriesSelector=e=>e.userSession.personalData.credentialCategories,t.credentialCategoryNamesMapSelector=(0,n.createSelector)([t.credentialCategoriesSelector],(e=>e.reduce(((e,t)=>(e[t.Id]=t.CategoryName,e)),{}))),t.viewedCredentialCategoriesSelector=(0,n.createSelector)(t.credentialCategoriesSelector,(e=>({items:(0,o.listView)(e),matchingCount:e.length})))},85505:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialMatchSelector=void 0;const n=r(53626),o=r(31400),a=r(51319);t.credentialMatchSelector=e=>{const t=(0,a.hasNewURLParserEnabledSelector)(e),r=(0,a.isCollectionsEnabledSelector)(e)?(0,n.collectionsSelector)(e):null;return(0,o.getCredentialMatch)(t,r)}},19736:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialSelector=void 0;const n=r(51319),o=r(49551);t.credentialSelector=(e,t)=>{const r=(0,n.credentialsSelector)(e);return(0,o.findDataModelObject)(t,r)}},88083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialsByDomainSelector=t.getCredentialByDomainMatchType=t.DomainMatchType=void 0;const n=r(32034),o=r(17509),a=r(83195),i=r(51319),s=r(6205);var c;!function(e){e.MainWebsite="MainWebsite",e.DashlaneDefinedLinkedWebsite="DashlaneDefinedLinkedWebsite",e.UserDefinedLinkedWebsite="UserDefinedLinkedWebsite",e.None="None"}(c=t.DomainMatchType||(t.DomainMatchType={})),t.getCredentialByDomainMatchType=(e,t,r=!1)=>e?e===(r?new a.ParsedURL(t.Url).getRootDomain():(0,o.extractRootDomain)(t.Url))?c.MainWebsite:(0,s.getDashlaneDefinedLinkedWebsites)(t.Url).includes(e)?c.DashlaneDefinedLinkedWebsite:(0,s.getUserAddedLinkedWebsitesRootDomains)(t,r).includes(e)?c.UserDefinedLinkedWebsite:c.None:c.None,t.getCredentialsByDomainSelector=e=>(0,n.createSelector)(i.credentialsSelector,i.hasNewURLParserEnabledSelector,((r,n)=>((e,r,n)=>e.filter((e=>{const o=(0,t.getCredentialByDomainMatchType)(r,e,n);return[c.MainWebsite,c.DashlaneDefinedLinkedWebsite,c.UserDefinedLinkedWebsite].includes(o)})))(r,e,n)))},71806:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsCountSelector=void 0;const n=r(32034),o=r(49960),a=r(51319),i=r(85505),s=r(36439),c=r(7439);t.credentialsCountSelector=(0,n.createSelector)(o.fieldMappersSelector,i.credentialMatchSelector,c.filterTokenSelector,a.credentialsSelector,s.countCredentials)},60463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialDisplayTitlesSelector=void 0;const n=r(32034),o=r(51319),a=r(23529);t.credentialDisplayTitlesSelector=(0,n.createSelector)(o.credentialsSelector,a.getCredentialsDisplayTitles)},2391:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsHealthScoreSelector=void 0;const n=r(32034),o=r(9365),a=r(26766),i=r(7944),s=r(65587);t.credentialsHealthScoreSelector=(0,n.createSelector)(o.credentialsQuerySelector,a.credentialsHealthSelector,a.similarPasswordsSelector,i.spacesSelector,s.getSecurityScore)},7657:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialLimitStatusSelector=void 0;const n=r(32034),o=r(37148),a=r(51319),i=r(16593);t.credentialLimitStatusSelector=(0,n.createSelector)(i.premiumStatusSelector,a.credentialsSelector,((e,t)=>{if(!e||!e.capabilities)return o.CredentialLimitStatus.AtOrAboveLimit;if(!e.capabilities?.passwordsLimit?.enabled)return o.CredentialLimitStatus.Unlimited;const r=t.length,n=e.capabilities?.passwordsLimit?.info?.limit;return r>=n?o.CredentialLimitStatus.AtOrAboveLimit:r>=n-5?o.CredentialLimitStatus.NearLimit:o.CredentialLimitStatus.UnderLimit}))},10043:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsPageSelector=void 0;const n=r(20553),o=r(35893),a=r(49960),i=r(9365),s=r(51443);t.credentialsPageSelector=(e,t)=>{const r=(0,o.parseToken)(t),{sortToken:c,filterToken:u}=r,l={sortToken:c,filterToken:u},d=(0,a.fieldMappersSelector)(e),p=(0,i.credentialsQuerySelector)(e,l),f=(0,s.listViewSelector)(e),g=(0,n.generateNextToken)(d,r,p),m=(0,n.generatePrevToken)(d,r,p),h=(0,n.getBatch)(d,r,p),y=(0,o.stringifyToken)(g),S=(0,o.stringifyToken)(m);return{batch:f(h),nextToken:y,prevToken:S}}},35410:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsPaginationTokenSelector=void 0;const n=r(25501),o=r(49960),a=r(9365),i=r(35893);t.credentialsPaginationTokenSelector=(e,t)=>{const r=(0,n.getCredentialsSortToken)(t),s=(0,n.getCredentialsFilterToken)(t),c=(0,o.fieldMappersSelector)(e),u={sortToken:r,filterToken:s},l=(0,a.credentialsQuerySelector)(e,u),d=(0,n.getCredentialsFirstToken)(c,u,t,l);return(0,i.stringifyToken)(d)}},9365:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsQuerySelector=void 0;const n=r(32034),o=r(49960),a=r(7439),i=r(92897),s=r(51319),c=r(85505),u=r(35893);t.credentialsQuerySelector=(0,n.createSelector)(o.fieldMappersSelector,c.credentialMatchSelector,i.sortTokenSelector,a.filterTokenSelector,s.credentialsSelector,u.queryData)},51319:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCollectionsEnabledSelector=t.hasNewURLParserEnabledSelector=t.credentialsSelector=void 0;const n=r(32034),o=r(83659),a=r(92888),i=r(57989),s=r(40602),c=r(88205),u=r(79895),l=(0,n.createSelector)([e=>(0,c.hasFeatureSelector)(e,"web_extension_credentialsDedupView")?(0,a.dedupedCredentialsSelector)(e):(0,o.unsafeAllCredentialsSelector)(e),u.credentialCategoryNamesMapSelector],((e,t)=>e.map((e=>({...e,CategoryName:t[e.Category]})))));t.credentialsSelector=(0,n.createSelector)(l,i.quarantinedSpacesSelector,s.filterOutQuarantinedItems),t.hasNewURLParserEnabledSelector=e=>(0,c.hasFeatureSelector)(e,"platform_web_new_url_parser_dev")||(0,c.hasFeatureSelector)(e,"platform_web_new_url_parser"),t.isCollectionsEnabledSelector=e=>(0,c.hasFeatureSelector)(e,"vault_web_collection_labelling_prod")||(0,c.hasFeatureSelector)(e,"vault_web_collection_labelling_dev")},92888:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dedupedCredentialsSelector=void 0;const n=r(32034),o=r(53682),a=r(66982),i=r(83659),s={Alias:a.genericMerge,Attachments:a.concatMerge,AutoLogin:a.strictEqual,AutoProtected:a.boolEqual,Category:a.genericMerge,Checked:a.strictEqual,ConnectionOptions:a.genericMerge,CreationDatetime:a.minMerge,Email:a.strictEqual,LastUse:a.maxMerge,LinkedServices:a.strictEqual,Login:a.strictEqual,ModificationDatetime:a.maxMerge,Note:a.genericMerge,NumberUse:a.sumMerge,OtpSecret:a.strictEqual,OtpUrl:a.strictEqual,Password:a.strictEqual,Port:a.genericMerge,SID:a.genericMerge,SecondaryLogin:a.strictEqual,Server:a.genericMerge,SharedObject:a.strictEqual,SpaceId:a.strictEqual,Status:a.strictEqual,Strength:a.strictEqual,SubdomainOnly:a.boolEqual,Title:a.strictEqual,TrustedUrlGroup:a.concatMerge,Url:a.strictEqual,UseFixedUrl:a.strictEqual,UserModificationDatetime:a.maxMerge,UserSelectedUrl:a.strictEqual,kwType:a.strictEqual,limitedPermissions:a.strictEqual};t.dedupedCredentialsSelector=(0,n.createSelector)(i.unsafeAllCredentialsSelector,(0,o.dedupItems)(["Password","Title","Url"],s))},49960:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fieldMappersSelector=void 0;const n=r(32034),o=r(94687),a=r(79895),i=r(60463),s=r(21342),c=r(26766),u=r(7944),l=r(91210),d=r(89698),p=r(10770);t.fieldMappersSelector=(0,n.createSelector)(a.credentialCategoriesSelector,l.limitedSharingItemsSelector,i.credentialDisplayTitlesSelector,c.credentialsHealthSelector,c.similarPasswordsSelector,s.breachesSelector,u.spacesSelector,d.acceptedItemGroupsSelector,p.collectionsSelector,o.getCredentialMappers)},7439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterTokenSelector=void 0;const n=r(16516),o=r(35893);t.filterTokenSelector=(0,o.createOptimizedFilterTokenSelector)(((e,{filterToken:t})=>t),n.identity)},8766:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDashlaneDefinedLinkedWebsitesSelector=void 0;const n=r(6205);t.getDashlaneDefinedLinkedWebsitesSelector=(e,t)=>(0,n.getDashlaneDefinedLinkedWebsites)(t)},65950:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLiveCredentialsByDomainSelector=void 0;const n=r(97006),o=r(51443),a=r(49960),i=r(85505),s=r(88083);t.getLiveCredentialsByDomainSelector=e=>(0,n.makeLiveSelectorGetter)((0,s.getCredentialsByDomainSelector)(e),o.listViewSelector,i.credentialMatchSelector,a.fieldMappersSelector)},61645:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLiveCredentialsSelector=void 0;const n=r(97006),o=r(51319),a=r(51443),i=r(49960),s=r(85505);t.getLiveCredentialsSelector=(0,n.makeLiveSelectorGetter)(o.credentialsSelector,a.listViewSelector,s.credentialMatchSelector,i.fieldMappersSelector)},80920:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldShowRequireMasterPasswordSelector=void 0;const n=r(38981);t.shouldShowRequireMasterPasswordSelector=e=>!(0,n.isSSOUserSelector)(e)},86685:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedCredentialSelector=void 0;const n=r(32034),o=r(26766),a=r(21342),i=r(52102),s=r(91210),c=r(51319),u=r(79895),l=r(91892),d=r(16593),p=r(49551),f=r(7944),g=r(88542);t.getViewedCredentialSelector=e=>{const t=(0,n.createSelector)(c.credentialsSelector,(t=>(0,p.findDataModelObject)(e,t)));return(0,n.createSelector)(t,o.healthSelector,a.breachesSelector,i.sharingDataSelector,d.userIdSelector,s.limitedSharingItemsSelector,u.credentialCategoriesSelector,l.iconsSelector,f.spacesSelector,g.viewCredential)}},78767:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedCredentialsBatchSelector=void 0;const n=r(32034),o=r(26766),a=r(21342),i=r(91210),s=r(80993),c=r(79895),u=r(9365),l=r(49960),d=r(91892),p=r(7944),f=r(25501),g=r(35893);t.getViewedCredentialsBatchSelector=e=>{const{sortToken:t,filterToken:r}=e,m={sortToken:t,filterToken:r},h=(0,f.getCredentialsBatch)(e),y=(0,n.createSelector)((e=>(0,u.credentialsQuerySelector)(e,m)),l.fieldMappersSelector,h),S=(0,g.optimizeBatchSelector)(y);return(0,n.createSelector)(S,s.sortedSharedItemIdsSelector,i.limitedSharingItemsSelector,c.credentialCategoriesSelector,d.iconsSelector,o.healthSelector,a.breachesSelector,p.spacesSelector,f.viewCredentialsBatch)}},51443:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listViewSelector=void 0;const n=r(32034),o=r(25501),a=r(80993),i=r(91210),s=r(79895),c=r(91892),u=r(26766),l=r(21342),d=r(7944);t.listViewSelector=(0,n.createSelector)(a.sortedSharedItemIdsSelector,i.limitedSharingItemsSelector,s.credentialCategoriesSelector,c.iconsSelector,u.healthSelector,l.breachesSelector,d.spacesSelector,((e,t,r,n,a,i,s)=>c=>(0,o.viewCredentialsBatch)(c,e,t,r,n,a,i,s)))},19325:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryByDomainSelector=void 0;const n=r(24589),o=r(49960),a=r(85505),i=r(88083);t.getQueryByDomainSelector=e=>(0,n.getQuerySelector)((0,i.getCredentialsByDomainSelector)(e),a.credentialMatchSelector,o.fieldMappersSelector)},41841:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.querySelector=void 0;const n=r(24589),o=r(51319),a=r(49960),i=r(85505);t.querySelector=(0,n.getQuerySelector)(o.credentialsSelector,i.credentialMatchSelector,a.fieldMappersSelector)},355:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reusedCredentialsCountSelector=void 0;const n=r(32034),o=r(9365),a=r(26766),i=r(7944),s=r(41494);t.reusedCredentialsCountSelector=(0,n.createSelector)(o.credentialsQuerySelector,a.similarPasswordsSelector,i.spacesSelector,s.getReusedCredentialsCount)},92897:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortTokenSelector=void 0;const n=r(16516),o=r(35893);t.sortTokenSelector=(0,o.createOptimizedSortTokenSelector)(((e,{sortToken:t})=>t),n.identity)},83659:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unsafeAllCredentialsSelector=void 0,t.unsafeAllCredentialsSelector=e=>e.userSession.personalData.credentials},60581:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewedCredentialSelector=void 0;const n=r(88542),o=r(91210),a=r(52102),i=r(19736),s=r(79895),c=r(16593),u=r(26766),l=r(21342),d=r(91892),p=r(7944);t.viewedCredentialSelector=(e,t)=>{const r=(0,i.credentialSelector)(e,t);if(!r)return;const f=(0,s.credentialCategoriesSelector)(e),g=(0,a.sharingDataSelector)(e),m=(0,c.userIdSelector)(e),h=(0,o.limitedSharingItemsSelector)(e),y=(0,d.iconsSelector)(e),S=(0,u.healthSelector)(e),v=(0,l.breachesSelector)(e),E=(0,p.spacesSelector)(e);return(0,n.viewCredential)(r,S,v,g,m,h,f,y,E)}},28831:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewedQueriedCredentialsByDomainSelector=void 0;const n=r(19325),o=r(51443),a=r(63566);t.viewedQueriedCredentialsByDomainSelector=(e,t)=>{const{domain:r,...i}=t,s=(0,n.getQueryByDomainSelector)(r)(e,i),c=(0,o.listViewSelector)(e);return(0,a.viewListResults)(c)(s)}},66663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewedQueriedCredentialsSelector=void 0;const n=r(63566),o=r(41841),a=r(51443);t.viewedQueriedCredentialsSelector=(e,t)=>{const r=(0,o.querySelector)(e,t),i=(0,a.listViewSelector)(e);return(0,n.viewListResults)(i)(r)}},40557:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.weakCredentialsCountSelector=void 0;const n=r(32034),o=r(9365),a=r(26766),i=r(7944),s=r(77201);t.weakCredentialsCountSelector=(0,n.createSelector)(o.credentialsQuerySelector,a.credentialsHealthSelector,i.spacesSelector,s.getWeakCredentialsCount)},9763:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCredential=t.createBaseCredentialModel=void 0;const n=r(11814),o=r(83195),a=r(51504),i=r(53576),s=r(61923),c=r(13675),u=r(47975),l=r(78320),d=r(47408),p=r(16516),f=r(90771),g=r(23439),m=r(78163);t.createBaseCredentialModel=(e=i.Country.NO_TYPE)=>{const t=(0,d.getUnixTimestamp)();return{kwType:"KWAuthentifiant",Id:(0,l.generateItemUuid)(),AnonId:(0,l.generateItemUuid)(),CreationDatetime:t,LastBackupTime:0,LastUse:t,LocaleFormat:e}},t.createCredential=async function({storeService:e,sessionService:r,eventLoggerService:l,applicationModulesAccess:d},h,y){if(!e.isAuthenticated())throw new Error("No session available to updateCredential");const S=(0,g.getUrlFields)(h.url,!0),{email:v,login:E,secondaryLogin:A}=(0,s.normalizeUsernames)(h.email,h.login,h.secondaryLogin),_=e.getPersonalData(),b=e.getPlatformInfo(),T=(0,g.getCategoryIdByName)(_,h.category),I=(0,p.defaultTo)("",h.password),w=(0,p.defaultTo)("",h.spaceId),C=I?await(0,u.evaluatePasswordStrength)(I):0,O=y||(()=>({})),D=e.getState().userSession.personalFeatures.features[a.NEW_URL_PARSER_FF]||e.getState().userSession.personalFeatures.features[a.NEW_URL_PARSER_FF_PROD]?new o.ParsedURL(h.url).getRootDomain():n.url.getDomainForUrl(h.url)??"",P=(0,c.sanitizeInputPersonalData)({...(0,t.createBaseCredentialModel)(i.Country[b.country]),AutoProtected:h.protectWithMasterPassword,Title:D,Email:v,Login:E,SubdomainOnly:h.onlyForThisSubdomain,SecondaryLogin:A,Password:I,Strength:C,Status:"ACCOUNT_NOT_VERIFIED",Category:T,SpaceId:w,AutoLogin:h.autoLogin??!0,...S,...O(h)});return(0,f.saveCredentialAsPersonalDataItem)({storeService:e,sessionService:r,eventLoggerService:l,applicationModulesAccess:d},P),d&&(0,m.shouldSendCreateOrModifiedCredentialAuditLog)(e,P)&&await(0,m.computeAndSendCreatedCredentialAuditLog)(d,{domainUrl:P.Url}),{credentialId:P.Id}}},23439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlFields=t.getCategoryIdByName=void 0;const n=r(87496);t.getCategoryIdByName=(e,t)=>{const r=e.credentialCategories;if(!t)return"";if(r.find((e=>e.Id===t)))return t;const n=r.find((e=>e.CategoryName===t));return n?.Id},t.getUrlFields=(e,t,r)=>{const o=r?.Url!==e,a=(0,n.cleanUrlForPersonalData)(e,{keepQueryString:t}),i=t&&o?{UserSelectedUrl:a,UseFixedUrl:!0}:{UserSelectedUrl:r?.UserSelectedUrl??"",UseFixedUrl:r?.UseFixedUrl??!1};return{Url:a,TrustedUrlGroup:(0,n.getUpdatedTrustedUrlList)(r?.TrustedUrlGroup??[],a),...i}}},90771:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveCredentialAsPersonalDataItem=void 0;const n=r(16530),o=r(10203),a=r(48313),i=r(12362),s=r(86691),c=r(56915),u=r(73566),l=r(85225),d=r(23136),p=r(88542),f=r(79980),g=r(51504);t.saveCredentialAsPersonalDataItem=async function({storeService:e,sessionService:t,eventLoggerService:r,applicationModulesAccess:m},h,y){y&&(0,p.notifySharersCredentialUpdated)(e,y,h);const S=e.getPersonalData(),v=(0,u.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:S,change:(0,l.makeUpdateChange)(h),userLogin:e.getUserLogin(),platformInfo:(0,c.platformInfoSelector)(e.getState())});let E=null,A=null;const _=(0,i.getInstance)(),b=(0,s.getInstance)();try{E=b.lockTopic("healthUpdates"),A=b.lockTopic("iconsUpdates"),e.dispatch((0,a.savePersonalDataItem)(h,h.kwType,v)),await t.getInstance().user.persistPersonalData(),(0,p.afterCredentialSaved)(e,h);const i={credentialIds:[h.Id],type:"credentialUpdates"},s={type:"credentialUpdates",credentialIds:[h.Id]};await _.add("healthUpdates",i),await _.add("iconsUpdates",s);const c=e.getState().userSession.personalFeatures.features[g.NEW_URL_PARSER_FF]||e.getState().userSession.personalFeatures.features[g.NEW_URL_PARSER_FF_PROD];if(y?(0,f.logEditVaultItem)(e,r,h,y,c):(0,f.logAddVaultItem)(e,r,h,c),e.getPersonalFeatures().features.ims_web_ph_mv3_dev){const{commands:e}=m.createClients().vaultItemsCrud;await e.emitTemporaryVaultItemEvent({ids:[h.Id],eventType:y?n.EventType.Updated:n.EventType.Created})}(0,d.getDebounceSync)(e,t)({immediateCall:!0},o.Trigger.Save)}finally{E&&b.releaseTopic("healthUpdates",E),A&&b.releaseTopic("iconsUpdates",A)}}},88779:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCredential=void 0;const n=r(19736),o=r(47408),a=r(90771),i=r(23439),s=r(78163);t.updateCredential=async function({storeService:e,sessionService:t,eventLoggerService:r,applicationModulesAccess:c},u,l){if(!e.isAuthenticated())throw new Error("No session available to updateCredential");const d=e.getState(),p=(0,n.credentialSelector)(d,u.id);if(!p)throw new Error("Credential does not exist, cant update");const f=u.update.url?(0,i.getUrlFields)(u.update.url,u.update.isUrlSelectedByUser,p):{},g=l||(()=>({})),m={...p,...f,Password:void 0!==u.update.password?u.update.password:p.Password,Email:u.update.email??p.Email,Login:u.update.login??p.Login,Checked:void 0!==u.update.isExcludedFromHealth?u.update.isExcludedFromHealth:p.Checked,LinkedServices:u.update.linkedServices??p.LinkedServices,ModificationDatetime:(0,o.getUnixTimestamp)(),...g(u)};(0,a.saveCredentialAsPersonalDataItem)({storeService:e,sessionService:t,eventLoggerService:r,applicationModulesAccess:c},m,p),c&&(0,s.shouldSendCreateOrModifiedCredentialAuditLog)(e,m)&&await(0,s.computeAndSendModifiedCredentialAuditLog)(c,{domainUrl:m.Url})}},83690:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CredentialLimitStatus=void 0,function(e){e.Unlimited="unlimited",e.UnderLimit="underLimit",e.NearLimit="nearLimit",e.AtOrAboveLimit="atOrAboveLimit"}(t.CredentialLimitStatus||(t.CredentialLimitStatus={}))},38786:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAmazonWebsite=void 0;const n=r(83195);t.isAmazonWebsite=e=>"amazon"===new n.ParsedURL(e).getRootDomainName()},87496:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUpdatedTrustedUrlList=t.cleanUrlForPersonalData=t.getGoToUrlForCredential=t.getBestUrl=t.getFirstTrustedUrl=t.getBaseTrustedUrls=void 0;const n=r(51121),o=r(16516),a=r(11814),i=r(38786),s=r(47408),c=e=>e.UseFixedUrl&&e.UserSelectedUrl?e.UserSelectedUrl:null,u=e=>/^[a-z]+:\/\//i.test(e)?e:["https://",e].join(""),l=e=>{if(/^(https?|ftps?):\/\/(.*)$/.test(e))return e;const t=(e=>{const t=e.match(/^(?:\w+:\/\/)?(.*)$/);return t&&t.length>=2?t[1]:""})(e);return`https://${t}`},d=(0,o.compose)((e=>{const{protocol:t,hostname:r,port:o}=(0,n.parse)(e);return t&&/^https?:/.test(t)?(0,n.format)({protocol:t,hostname:r,port:o}):null}),u,o.trim),p=e=>!(0,o.isNil)(e);function f(e,t){if(!e)return"";if((0,i.isAmazonWebsite)(e))return e;let r=e;return{keepQueryString:!1,...t}.keepQueryString||(r=function(e){const t=e.indexOf("?");return t>-1?e.slice(0,t):e}(r)),u(r)}t.getBaseTrustedUrls=(0,o.compose)((e=>e.filter(p)),(0,o.map)(d),(0,o.map)((0,o.defaultTo)("")),(0,o.map)((0,o.prop)("TrustedUrl")),(0,o.defaultTo)([])),t.getFirstTrustedUrl=e=>(0,o.defaultTo)("")((0,o.head)((0,t.getBaseTrustedUrls)(e.TrustedUrlGroup))),t.getBestUrl=e=>{const r=c(e);return r&&r.length?r:e.Url&&e.Url.length?e.Url:(0,t.getFirstTrustedUrl)(e)},t.getGoToUrlForCredential=e=>{const r=c(e);if(r&&r.length)return l(r);if(e.Url&&e.Url.length)return l(e.Url);const n=(0,t.getBaseTrustedUrls)(e.TrustedUrlGroup),o=n.filter((e=>e.startsWith("https")));return o[0]?o[0]:n[0]?n[0]:null},t.cleanUrlForPersonalData=f,t.getUpdatedTrustedUrlList=function(e,t){const r=f(t),n=a.url.getDomainForUrl(r),o=(e||[]).filter((e=>a.url.getDomainForUrl(e.TrustedUrl)===n));if(o.some((e=>e.TrustedUrl===r)))return o;const i=o.length>=20?o.length-20+1:0;return o.slice(i).concat({TrustedUrl:r,TrustedUrlExpire:(0,s.getUnixTimestamp)().toString()})}},61923:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeUsernames=void 0;const n=r(16516),o=r(28445);t.normalizeUsernames=function(e,t,r){const a=(0,n.defaultTo)("");let i=e,s=t;return(0,o.looksLikeEmail)(t)?(i=t,(0,o.looksLikeEmail)(e)?(i=e,s=""):s=e):(0,o.looksLikeEmail)(e)||((0,n.isEmpty)(e)||(s=e),(0,o.looksLikeEmail)(t)?i=t:((0,n.isEmpty)(t)||(s=t),i="")),{email:a(i),login:a(s),secondaryLogin:a(r)}}},71120:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const n=(0,r(16516).defaultTo)("");t.detailView=e=>{if(e)return{id:e.Id,categoryName:n(e.CategoryName)}},t.listView=e=>e.map(t.detailView)},65968:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detailView=void 0;const n=r(16516),o=r(82043),a=r(71120),i=r(90073),s=r(87496),c=r(6205),u=(0,n.defaultTo)(""),l=(0,n.defaultTo)(!1);t.detailView=(0,n.curry)(((e,t,r,n,d,p)=>{const f=n(p),g=t(p.Category),m=e(p.Id),h=r(p.Url),y=u(p.Password),S=d(p),v={addedByDashlane:(0,c.getDashlaneDefinedLinkedWebsites)(p.Url),addedByUser:(0,c.getUserAddedLinkedWebsiteDomains)(p)};return{...(0,o.dataModelDetailView)(p),autoLogin:p.AutoLogin||!1,autoProtected:l(p.AutoProtected),category:(0,a.detailView)(g),domainIcon:h,email:u(p.Email),health:f,isExcludedFromHealth:p.Checked,forceCategorizedSpace:S,linkedWebsites:v,login:u(p.Login),note:u(p.Note),hasOtp:Boolean(p.OtpSecret??p.OtpUrl),otpSecret:u(p.OtpSecret),otpUrl:u(p.OtpUrl),password:y,secondaryLogin:p.SecondaryLogin,sharingStatus:m,strength:p.Strength||0,subdomainOnly:p.SubdomainOnly||!1,title:u(p.Title||(0,i.getDomainForCredential)(p)),url:u(p.Url),redirectUrl:(0,s.getGoToUrlForCredential)(p)}}))},29179:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=void 0;const n=r(16516),o=r(82043),a=r(71120),i=r(90073),s=r(87496),c=(0,n.defaultTo)("");t.itemView=(0,n.curry)(((e,t,r,u,l)=>{const d=t(l.Category);return{...(0,o.dataModelItemView)(l),autoProtected:(0,n.defaultTo)(!1,l.AutoProtected),category:(0,a.detailView)(d),domainIcon:r(l.Url),email:c(l.Email),health:u(l),isExcludedFromHealth:l.Checked,login:c(l.Login),password:c(l.Password),sharingSatus:e(l.Id),title:c(l.Title||(0,i.getDomainForCredential)(l)),url:c(l.Url),redirectUrl:(0,s.getGoToUrlForCredential)(l)}})),t.listView=(e,r,n,o,a)=>{const i=(0,t.itemView)(e,r,n,o);return a.map(i)}},19065:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDataManagementController=void 0;const n=r(10203),o=r(35834),a=r(43629),i=r(76496),s=r(23136),c=r(84511),u=r(10770),l={immediateCall:!0};t.makeDataManagementController=e=>{const t=(0,s.getDebounceSync)(e.storeService,e.sessionService);return{savePaymentCardFromClient:r=>function(e,t,r){(0,o.savePaymentCard)(e,r),t(l,n.Trigger.Save)}({storeService:e.storeService,sessionService:e.sessionService,eventLoggerService:e.eventLoggerService},t,r),savePersonalDataItem:r=>async function(e,t,r){const{storeService:i,sessionService:s,eventLoggerService:u,applicationModulesAccess:d}=e;if("KWPaymentMean_creditCard"===r.kwType)return(0,o.savePaymentCard)({storeService:i,sessionService:s,eventLoggerService:u},r.content),t(l,n.Trigger.Save),Promise.resolve({success:!0,itemId:""});{const o=await(0,a.addPersonalDataItem)({storeService:i,sessionService:s,eventLoggerService:u,applicationModulesAccess:d},r),p=e.storeService.getState();return(0,c.isSharedSelector)(p,r.content.id)?await e.sessionService.getInstance().user.attemptSync(n.Trigger.SettingsChange):t(l,n.Trigger.Save),o}}({storeService:e.storeService,sessionService:e.sessionService,eventLoggerService:e.eventLoggerService,applicationModulesAccess:e.applicationModulesAccess},t,r),removePersonalDataItem:r=>function(e,t,r,o){return(0,i.deletePersonalDataItem)(e,o).then((a=>(a.success&&(r(l,n.Trigger.Save),(0,u.removeItemsFromCollectionsHandler)({storeService:e.storeService,sessionService:t},{ids:[o]})),a)))}({storeService:e.storeService,wsService:e.wsService,eventLoggerService:e.eventLoggerService,applicationModulesAccess:e.applicationModulesAccess},e.sessionService,t,r),updateMetadataItemFilledOnPage:(r,o,i)=>function(e,t,r,o,i){(0,a.updatePersonalDataUsageMetadata)(e,r,o,i),t({},n.Trigger.SaveMeta)}(e.storeService,t,r,o,i)}}},53682:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dedupItems=t.merge=void 0,t.merge=(e,t,r)=>{const n={};return Object.keys(r).every((o=>{const a=r[o](e[o],t[o]);return a.success&&(n[o]=a.result),a.success}))?{success:!0,result:{...e,...t,...n}}:{success:!1}},t.dedupItems=(e,r)=>n=>{const o=[],a={};for(const i of n){const n=e.reduce(((e,t)=>`${e}${i[t]}`),"");if(n in a){const e=a[n];let s=!1;for(const n of e){const e=o[n],a=(0,t.merge)(i,e,r);if(a.success){o[n]=a.result,s=!0;break}}s||(o.push(i),e.push(o.length-1))}else o.push(i),a[n]=[o.length-1]}return o}},66982:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatMerge=t.minMerge=t.maxMerge=t.sumMerge=t.genericMerge=t.boolEqual=t.strictEqual=void 0,t.strictEqual=(e,t)=>e===t?{success:!0,result:e}:{success:!1},t.boolEqual=(e,t)=>Boolean(e)===Boolean(t)?{success:!0,result:e}:{success:!1},t.genericMerge=(e,t)=>e===t?{success:!0,result:e}:e&&t?{success:!1}:{success:!0,result:e||t};const r=e=>(t,r)=>({success:!0,result:void 0===t&&void 0===r?void 0:e(t??0,r??0)});t.sumMerge=r(((e,t)=>e+t)),t.maxMerge=r(Math.max),t.minMerge=r(Math.min),t.concatMerge=(e,t)=>({success:!0,result:void 0===e&&void 0===t?void 0:[...e??[],...t??[]]})},45157:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRemoveChangeHistory=void 0;const n=r(73566),o=r(56915),a=r(16593),i=r(72678),s=r(85225);t.getRemoveChangeHistory=function(e,t){const r=e.getState(),c=(0,i.personalDataSelector)(r),u=(0,o.platformInfoSelector)(r),l=(0,a.userLoginSelector)(r),{localSettings:d}=e.getState().userSession,p=d.deviceName,f=(0,s.makeRemovalChange)(t);return(0,n.getUpdatedItemChangeHistory)({change:f,deviceName:p,personalData:c,userLogin:l,platformInfo:u})}},76496:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deletePersonalDataItem=t.findPersonalDataItemToDelete=void 0;const n=r(16516),o=r(53576),a=r(58107),i=r(71646),s=r(95623),c=r(45291),u=r(45157),l=r(49551),d=r(70252),p=r(36884),f=r(36513),g=r(63698),m=r(90622),h=r(16593),y=r(76089),S=r(12362),v=r(86691),E=r(79980),A=r(10203),_=r(51504),b=r(92310),T=r(78163),I=r(16530),w=["addresses","bankAccounts","companies","credentialCategories","credentials","driverLicenses","emails","fiscalIds","idCards","identities","noteCategories","notes","passports","paymentCards","paypalAccounts","personalWebsites","phones","secureFileInfo","socialSecurityIds"];function C(e,t){let r,o=0;const a=e.getPersonalData(),i=(0,n.pick)(w,a);for(const e of Object.keys(i))if(r=(0,l.findDataModelObject)(t,i[e]),r){o=i[e].length;break}return{itemToDelete:r,currentItemsCountForDataType:o}}t.findPersonalDataItemToDelete=C,t.deletePersonalDataItem=async function({storeService:e,wsService:t,eventLoggerService:r,applicationModulesAccess:n},l,w){const{FORBIDDEN_GROUP_ITEM:O,FORBIDDEN_LAST_ADMIN:D,INTERNAL_ERROR:P,LEAVE_SHARING_FAILED:N,NOT_AUTHORIZED:R,NOT_FOUND:U}=o.RemovePersonalDataItemFailureReason;let L=null,M=null;const k=(0,S.getInstance)(),B=(0,v.getInstance)();try{if(!e.isAuthenticated()){const e="No session available to delete personal item";return s.Debugger.log(e),{success:!1,reason:R,message:e}}const{itemToDelete:d}=C(e,l);if(!d){const e=`Unable to find personal item to delete: ${l}`;return s.Debugger.error(e),{success:!1,reason:U,message:e}}const S=(0,o.isCredential)(d);if(S||(0,o.isNote)(d)){const r=await(0,f.makeCryptoService)(),n=e.getUserLogin(),o=(0,m.ukiSelector)(e.getState()),{makeRefuseItemGroupEvent:s}=(0,p.makeItemGroupService)(t,r),{Id:c}=d,{userGroups:l,itemGroups:h}=e.getSharingData(),y=(0,i.findItemItemGroup)(c,h),S=w&&w.ignoreSharing;if(y&&!S){const t=(0,a.isUserLastAdmin)(y,n),r=(0,a.doesUserReceiveItemGroupViaGroup)(y,l,n);if(t||r)return{success:!1,reason:t?D:O,message:"Unshare the item before deleting it"};try{const{groupId:e,revision:t}=y,{refuseItemGroup:r}=(0,g.makeItemGroupWS)(),a=s(e,t,null);await r(n,o,a)}catch(e){return{success:!1,reason:N,message:`${e}`}}}L=(0,u.getRemoveChangeHistory)(e,d)}const v=e.getState().userSession.personalFeatures.features[_.NEW_URL_PARSER_FF]||e.getState().userSession.personalFeatures.features[_.NEW_URL_PARSER_FF_PROD];(0,E.logDeleteVaultItem)(e,r,d,v,A.UpdateCredentialOrigin.Manual,w?.multiSelectId||null);const P=(0,c.removePersonalItem)(d.kwType,d.Id,L);if(e.dispatch(P),S){const t=e.getState();if((0,h.isOnboardingNotificationShowingSelector)(t)){const t=(0,y.webOnboardingModeReset)();e.dispatch(t)}}if(!w?.manualHealthUpdate&&S){M=B.lockTopic("healthUpdates");const e={credentialIds:[d.Id],type:"credentialUpdates"};await k.add("healthUpdates",e)}if(n&&S&&(0,T.hasVaultAuditLogsFFActivated)(e)){const t=(0,b.currentTeamIdSelector)(e.getState());d.SpaceId===t&&await(0,T.computeAndSendDeletedCredentialAuditLog)(n,{domainUrl:d.Url})}const F=e.getPersonalFeatures().features.ims_web_ph_mv3_dev;if(n&&F&&!w?.manualHealthUpdate&&S){const{commands:e}=n.createClients().vaultItemsCrud;await e.emitTemporaryVaultItemEvent({ids:[d.Id],eventType:I.EventType.Deleted})}return{success:!0}}catch(e){const t=`[DataManagement] - deletePersonalDataItem: ${e}`,r=new Error(t);return(0,d.sendExceptionLog)({error:r}),{success:!1,reason:P,message:t}}finally{M&&B.releaseTopic("healthUpdates",M)}}},57779:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.duplicateNoteOrCredential=void 0;const n=r(53576),o=r(48313),a=r(78320),i=r(49551),s=r(12362),c=r(86691);t.duplicateNoteOrCredential=async function(e,t){let r=null,u=null;const l=(0,s.getInstance)(),d=(0,c.getInstance)(),{notes:p,credentials:f,changeHistories:g}=e.getPersonalData(),m=[...p,...f],h=(0,i.findDataModelObject)(t,m);if(!h)return null;const y=(0,a.generateItemUuid)(),S={...h,Id:y},v=g.find((e=>e.ObjectId.toUpperCase()===t.toUpperCase()));if((0,n.isCredential)(h)){r=d.lockTopic("healthUpdates"),u=d.lockTopic("iconsUpdates");const e={credentialIds:[y],type:"credentialUpdates"};await l.add("healthUpdates",e);const t={credentialIds:[y],type:"credentialUpdates"};await l.add("iconsUpdates",t)}const E=(0,o.savePersonalDataItem)(S,S.kwType,v);return e.dispatch(E),r&&d.releaseTopic("healthUpdates",r),u&&d.releaseTopic("iconsUpdates",u),y}},75912:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(41002),o=r(40086);t.config={commands:{getPersonalDataExport:{handler:n.getPersonalDataExport}},queries:{getIsForcedDomainsEnabled:{selector:o.isForcedDomainsEnabledSelector}},liveQueries:{}}},40086:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isForcedDomainsEnabledSelector=void 0;const n=r(16593);t.isForcedDomainsEnabledSelector=e=>{const t=(0,n.activeSpacesSelector)(e)[0];return t?.info?.forcedDomainsEnabled??!1}},49975:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCSVExport=void 0;const n=r(24675);n.configure({useWebWorkers:!1});const o=r(51045),a=r(6602),i=r(67879),s=r(91700),c=r(2174),u=[{filename:"credentials",generator:o.getCredentialsExport},{filename:"personalInfo",generator:c.getPersonalInfoExport},{filename:"securenotes",generator:a.getSecureNotes},{filename:"payments",generator:i.getPaymentsExport},{filename:"ids",generator:s.getIdsExport}];t.getCSVExport=async function(e){const t=new n.ZipWriter(new n.Data64URIWriter("application/zip")),r=[];for(const{filename:o,generator:a}of u){const i=a(e);r.push(t.add(`${o}.csv`,new n.BlobReader(new Blob([i],{type:"text/csv"}))))}return await Promise.all(r),await t.close()}},51045:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialsExport=void 0;const n=r(92307),o=r(41404),a=r(28780);t.getCredentialsExport=function(e){const t=e.credentials,r=e.credentialCategories,i=[{headerKey:"username",dataKey:"Email"},{headerKey:"username2",dataKey:"Login"},{headerKey:"username3",dataKey:"SecondaryLogin"},{headerKey:"title",dataKey:"Title"},{headerKey:"password",dataKey:"Password"},{headerKey:"note",dataKey:"Note"},{headerKey:"url",dataKey:"Url"},{headerKey:"category",dataKey:"Category"},{headerKey:"otpSecret",dataKey:"OtpSecret"}];return(0,a.formatDataToCSV)([(0,a.formatHeader)(i),(s=t,s.map((e=>{const t=[e.Email,e.Login,e.SecondaryLogin].filter((e=>void 0!==e&&""!==e)),[a="",s="",c=""]=t;return i.map((t=>{const i=e[t.dataKey]??"";if("Category"!==t.dataKey||""===i){if("Email"===t.dataKey)return(0,o.handleSpecialCharacter)(a);if("Login"===t.dataKey)return(0,o.handleSpecialCharacter)(s);if("SecondaryLogin"===t.dataKey)return(0,o.handleSpecialCharacter)(c);if("Note"===t.dataKey&&""!==i)return(0,o.handleSpecialCharacter)(i);if("Password"===t.dataKey){const e=`${i}`;return(0,o.handleSpecialCharacter)(e)}{const e=`${i}`;return(0,o.handleSpecialCharacter)(e)}}{const e=(0,n.getCategory)(r,i);if(void 0!==e)return(0,o.handleSpecialCharacter)(e.CategoryName)}})).join(",")}))).join("\r\n")]);var s}},83448:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDashlaneSecureExport=void 0;const n=r(16516),o=r(56668),a=r(61797);t.getDashlaneSecureExport=async function(e,t){const r=(0,n.join)(";",(0,n.pluck)("Id",t));t.forEach((e=>{delete e.Attachments}));const i=(0,a.getDashlaneXml)(t),s=(0,o.utf16ToDeflatedUtf8)(i),c=await e.encrypt(s);return(0,n.join)("\n",["-------------------- Dashlane Secured Export ----------------------","--------------------        Id BEGIN         ----------------------",r,"--------------------         Id END          ----------------------","--------------------       Data BEGIN        ----------------------",c,"--------------------        Data END         ----------------------","--------------------       Files BEGIN       ----------------------","--------------------        Files END        ----------------------\n"])}},91700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIdsExport=void 0;const n=r(72099),o=r(41404),a=r(28780);t.getIdsExport=function(e){const t=new Map;e.identities.forEach((e=>{t.set(e.Id,e)}));const r=e.idCards,i=e.passports,s=e.driverLicenses,c=e.socialSecurityIds,u=e.fiscalIds,l=[{headerKey:"type",dataKey:"type"},{headerKey:"number",dataKey:"Number"},{headerKey:"name",dataKey:"Fullname"},{headerKey:"issue_date",dataKey:"DeliveryDate"},{headerKey:"expiration_date",dataKey:"ExpireDate"},{headerKey:"place_of_issue",dataKey:"DeliveryPlace"},{headerKey:"state",dataKey:"State"}];return(0,a.formatDataToCSV)([(0,a.formatHeader)(l),(e=>(e=>e.map((e=>{const r=t.get(e.LinkedIdentity);return l.map((t=>{const a=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return"card";if("Fullname"===t.dataKey&&r){const e=(0,n.identityToName)(r)??a;return(0,o.handleSpecialCharacter)(e)}return(0,o.handleSpecialCharacter)(a)})).join(",")})))(e).join("\r\n"))(r),(e=>(e=>e.map((e=>{const r=t.get(e.LinkedIdentity);return l.map((t=>{const a=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return"passport";if("Fullname"===t.dataKey&&r){const e=(0,n.identityToName)(r)??a;return(0,o.handleSpecialCharacter)(e)}return(0,o.handleSpecialCharacter)(a)})).join(",")})))(e).join("\r\n"))(i),(e=>(e=>e.map((e=>{const r=t.get(e.LinkedIdentity);return l.map((t=>{const a=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return"license";if("Fullname"===t.dataKey&&r){const e=(0,n.identityToName)(r)??a;return(0,o.handleSpecialCharacter)(e)}return(0,o.handleSpecialCharacter)(a)})).join(",")})))(e).join("\r\n"))(s),(e=>(e=>e.map((e=>{const r=t.get(e.Id);return l.map((t=>{const a=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return"social_security";if("Number"===t.dataKey){const t=e.SocialSecurityNumber;return(0,o.handleSpecialCharacter)(t)}if("Fullname"===t.dataKey){const t=r?(0,n.identityToName)(r):e.SocialSecurityFullname;return(0,o.handleSpecialCharacter)(t)}return(0,o.handleSpecialCharacter)(a)})).join(",")})))(e).join("\r\n"))(c),(e=>(e=>e.map((e=>l.map((t=>{const r=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return(0,o.handleSpecialCharacter)("tax_number");if("Number"===t.dataKey){const t=e.FiscalNumber;return(0,o.handleSpecialCharacter)(t)}{const e=`${r}`;return(0,o.handleSpecialCharacter)(e)}})).join(","))))(e).join("\r\n"))(u)])}},67879:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPaymentsExport=void 0;const n=r(41404),o=r(28780);t.getPaymentsExport=function(e){const t=e.bankAccounts,r=e.paymentCards,a=[{headerKey:"type",dataKey:"Type"},{headerKey:"account_name",dataKey:"BankAccountName"},{headerKey:"account_holder",dataKey:"BankAccountOwner"},{headerKey:"cc_number",dataKey:"CardNumber"},{headerKey:"code",dataKey:"SecurityCode"},{headerKey:"expiration_month",dataKey:"ExpireMonth"},{headerKey:"expiration_year",dataKey:"ExpireYear"},{headerKey:"routing_number",dataKey:"BankAccountBIC"},{headerKey:"account_number",dataKey:"BankAccountIBAN"},{headerKey:"country",dataKey:"LocaleFormat"},{headerKey:"issuing_bank",dataKey:"BankAccountBank"},{headerKey:"note",dataKey:"CCNote"}];return(0,o.formatDataToCSV)([(0,o.formatHeader)(a),(s=t,(e=>e.map((e=>a.map((t=>{const r=`${e[t.dataKey]??""}`;if("Type"===t.dataKey)return(0,n.handleSpecialCharacter)("bank");{const e=`${r}`;return(0,n.handleSpecialCharacter)(e)}})).join(","))))(s).join("\r\n")),(i=r,(e=>e.map((e=>a.map((t=>{const r=`${e[t.dataKey]??""}`;if("Type"===t.dataKey)return(0,n.handleSpecialCharacter)("payment_card");if("BankAccountName"===t.dataKey){const t=e.OwnerName;return(0,n.handleSpecialCharacter)(t)}return(0,n.handleSpecialCharacter)(r)})).join(","))))(i).join("\r\n"))]);var i,s}},41002:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPersonalDataExport=void 0;const n=r(53576),o=r(83448),a=r(61969),i=r(72365),s=r(65675),c=r(49975),u=r(49901),l=r(40086),d=r(91210),p=r(72678),f=r(72883),g=(e,t)=>{const r=(0,l.isForcedDomainsEnabledSelector)(e),o=(0,d.limitedSharingItemsSelector)(e);return t.filter?.((e=>{let t=!1;const a=!!o[e.Id]||!!e.limitedPermissions;return r&&(0,n.isDataModelObject)(e)&&(t=e.SpaceId!==u.PERSONAL_SPACE_ID),!t&&!a}))??t};t.getPersonalDataExport=async function(e,t){const{storeService:r}=e,n=r.getState(),{exportType:u,password:l}=t,d=(e=>{const t=(0,p.personalDataSelector)(e);return Object.keys(t).reduce(((r,n)=>(0,f.isDataKeyVaultItem)(n)?{...r,[n]:g(e,t[n])}:r),{})})(n);switch(u){case"csv":return{success:!0,response:{filename:"dashlane-credential-export.zip",content:await(0,c.getCSVExport)(d)}};case"secure-dashlane":{if(!l)return{success:!1,error:{code:a.GetPersonalDataExportErrorMessage.UNDEFINED_PASSWORD_ERROR}};const e=(0,i.makeDataEncryptorService)(r),t=(0,s.makeFlexibleMarkerCryptoConfig)("argon2d");return e.setInstance({raw:l},"",t),{success:!0,response:{filename:"Dashlane Export.dash",content:await(0,o.getDashlaneSecureExport)(e.getInstance(),Object.values(d).flat())}}}default:return{success:!1,error:{code:a.GetPersonalDataExportErrorMessage.UNSUPPORTED_DATATYPE_ERROR}}}}},2174:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPersonalInfoExport=void 0;const n=r(33321),o=r(53576),a=r(41404),i=r(28780),s=e=>{const{LocaleFormat:t,Number:r}=e;if(t&&t!==o.Country.UNIVERSAL&&t!==o.Country.NO_TYPE&&(0,n.isSupportedCountry)(t)){const t=o.Country[e.LocaleFormat];return`+${(0,n.getCountryCallingCode)(t)}${r}`}return r};t.getPersonalInfoExport=function(e){const t=e.identities,r=e.emails,n=e.phones,o=e.addresses,c=e.companies,u=e.personalWebsites,l=[{headerKey:"type",dataKey:"type"},{headerKey:"title",dataKey:"Title"},{headerKey:"first_name",dataKey:"FirstName"},{headerKey:"middle_name",dataKey:"MiddleName"},{headerKey:"last_name",dataKey:"LastName"},{headerKey:"login",dataKey:"Pseudo"},{headerKey:"date_of_birth",dataKey:"BirthDate"},{headerKey:"place_of_birth",dataKey:"BirthPlace"},{headerKey:"email",dataKey:"Email"},{headerKey:"email_type",dataKey:"Type"},{headerKey:"item_name",dataKey:"Name"},{headerKey:"phone_number",dataKey:"Number"},{headerKey:"address",dataKey:"AddressFull"},{headerKey:"country",dataKey:"Country"},{headerKey:"state",dataKey:"State"},{headerKey:"city",dataKey:"City"},{headerKey:"zip",dataKey:"ZipCode"},{headerKey:"address_recipient",dataKey:"Receiver"},{headerKey:"address_building",dataKey:"Building"},{headerKey:"address_apartment",dataKey:"Door"},{headerKey:"address_floor",dataKey:"Floor"},{headerKey:"address_door_code",dataKey:"DigitCode"},{headerKey:"job_title",dataKey:"JobTitle"},{headerKey:"url",dataKey:"Website"}];return(0,i.formatDataToCSV)([(0,i.formatHeader)(l),(h=t,(e=>e.map((e=>l.map((t=>{const r=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return(0,a.handleSpecialCharacter)("name");{const e=`${r}`;return(0,a.handleSpecialCharacter)(e)}})).join(","))))(h).join("\r\n")),(m=r,(e=>e.map((e=>l.map((t=>{const r=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return(0,a.handleSpecialCharacter)("email");if("Type"===t.dataKey)return"PERSO"===r?(0,a.handleSpecialCharacter)("personal"):(0,a.handleSpecialCharacter)("business");if("Name"===t.dataKey){const t=e.EmailName??"";return(0,a.handleSpecialCharacter)(t)}{const e=`${r}`;return(0,a.handleSpecialCharacter)(e)}})).join(","))))(m).join("\r\n")),(g=n,(e=>e.map((e=>l.map((t=>{const r=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return(0,a.handleSpecialCharacter)("number");if("Type"===t.dataKey)return(0,a.handleSpecialCharacter)("");if("Name"===t.dataKey){const t=e.PhoneName??"";return(0,a.handleSpecialCharacter)(t)}if("Number"===t.dataKey){const t=s(e);return(0,a.handleSpecialCharacter)(t)}{const e=`${r}`;return(0,a.handleSpecialCharacter)(e)}})).join(","))))(g).join("\r\n")),(f=o,(e=>e.map((e=>l.map((t=>{const r=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return(0,a.handleSpecialCharacter)("address");if("Name"===t.dataKey){const t=e.AddressName??"";return(0,a.handleSpecialCharacter)(t)}{const e=`${r}`;return(0,a.handleSpecialCharacter)(e)}})).join(","))))(f).join("\r\n")),(p=c,(e=>e.map((e=>l.map((t=>{const r=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return(0,a.handleSpecialCharacter)("company");{const e=`${r}`;return(0,a.handleSpecialCharacter)(e)}})).join(","))))(p).join("\r\n")),(d=u,(e=>e.map((e=>l.map((t=>{const r=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return(0,a.handleSpecialCharacter)("website");{const e=`${r}`;return(0,a.handleSpecialCharacter)(e)}})).join(","))))(d).join("\r\n"))]);var d,p,f,g,m,h}},6602:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSecureNotes=void 0;const n=r(41404),o=r(28780);t.getSecureNotes=function(e){const t=e.notes,r=[{headerKey:"title",dataKey:"Title"},{headerKey:"note",dataKey:"Content"}];return(0,o.formatDataToCSV)([(0,o.formatHeader)(r),(e=>e.map((e=>r.map((t=>{const r=e[t.dataKey]??"";if("Content"===t.dataKey&&""!==r){const e=r.replaceAll("\n"," ");return(0,n.handleSpecialCharacter)(e)}{const e=`${r}`;return(0,n.handleSpecialCharacter)(e)}})).join(","))).join("\r\n"))(t)])}},41404:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleSpecialCharacter=void 0,t.handleSpecialCharacter=function(e){return void 0===e?"":e.match(/[,"\n\r]/g)?['"',...e.split("").map((e=>'"'===e?'""':e)),'"'].join(""):e}},28780:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatDataToCSV=t.formatHeader=void 0,t.formatHeader=e=>e.map((e=>e.headerKey)).join(","),t.formatDataToCSV=function(e){return e.filter((e=>e.length>0)).join("\r\n")}},61969:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetPersonalDataExportErrorMessage=void 0,function(e){e.UNSUPPORTED_DATATYPE_ERROR="Unsupported Data Export Type",e.UNDEFINED_PASSWORD_ERROR="Undefined Password"}(t.GetPersonalDataExportErrorMessage||(t.GetPersonalDataExportErrorMessage={}))},3474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(92598),o=r(47205),a=r(11507);t.config={commands:{saveGeneratedPassword:{handler:o.saveGeneratedPasswordHandler}},queries:{getGeneratedPassword:{selector:n.viewedGeneratedPasswordSelector},getGeneratedPasswordsCount:{selector:n.countAllGeneratedPasswordsSelector},getGeneratedPasswords:{selector:n.viewedQueriedGeneratedPasswordsSelector},getGeneratedPasswordsPage:{selector:n.generatedPasswordsPageSelector},getGeneratedPasswordsPaginationToken:{selector:n.generatedPasswordsPaginationTokenSelector}},liveQueries:{liveGeneratedPasswordsCount:{operator:a.generatedPasswordCount$},liveGeneratedPasswords:{operator:a.generatedPasswords$}}}},25:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},43145:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAssociatedCredential=t.associateGeneratedPasswordsToCredential=void 0;const n=r(90073);t.associateGeneratedPasswordsToCredential=function(e,t){return e.filter((e=>!e.AuthId&&e.Domain===(0,n.getDomainForCredential)(t)&&e.Password===t.Password)).map((e=>({...e,AuthId:t.Id})))},t.findAssociatedCredential=function(e,t){if(e?.AuthId)return(t||[]).find((t=>t.Id===e.AuthId))}},94170:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGeneratedPassword=void 0;const n=r(53576),o=r(78320),a=r(47408);t.createGeneratedPassword=({Id:e=(0,o.generateItemUuid)(),LastBackupTime:t=0,AuthId:r,Domain:i,GeneratedDate:s=(0,a.getUnixTimestamp)(),Password:c,SpaceId:u,Platform:l})=>({kwType:n.DataModelType.KWGeneratedPassword,AuthId:r,Domain:i,GeneratedDate:s,Id:e,SpaceId:u,Password:c,LastBackupTime:t,Platform:l})},47205:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveGeneratedPasswordHandler=void 0;const n=r(44908);t.saveGeneratedPasswordHandler=async function(e,t){const{storeService:r,sessionService:o}=e;return(0,n.saveGeneratedPassword)(r,o,t.password,t.url)}},44908:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateAndSavePassword=t.saveGeneratedPassword=t.generatePassword=t.fixIncoherentSettings=t.getDefaultPasswordGenerationSettings=t.passwordGeneratorDefaultSettings=t.associateGeneratedPasswordsToCredential=void 0;const n=r(28255),o=r(16516),a=r(85465),i=r(95623),s=r(78320),c=r(47408),u=r(48313),l=r(70252),d=r(90503),p=r(94170),f=r(56915);var g=r(43145);function m(e){const r=(0,o.reject)((e=>(0,o.isNil)(e)||(0,o.isEmpty)(e)))({length:e.GeneratorDefaultSize,digits:e.GeneratorDefaultDigits,letters:e.GeneratorDefaultLetters,symbols:e.GeneratorDefaultSymbols,avoidAmbiguous:e.GeneratorDefaultAvoidAmbiguousChars});return h((0,o.merge)(t.passwordGeneratorDefaultSettings,r))}function h(e){return e.digits||e.letters||e.symbols||(e.digits=!0,e.letters=!0,e.symbols=!0),(void 0===e.length||e.length<1)&&(e.length=t.passwordGeneratorDefaultSettings.length),e}function y(e,t){const r=(0,o.isNil)(t)?m(e):h(t);if(!r.digits&&!r.letters&&r.symbols){const n=new Error("Should not generate password from symbols only"),o={length:e.GeneratorDefaultSize,digits:e.GeneratorDefaultDigits,letters:e.GeneratorDefaultLetters,symbols:e.GeneratorDefaultSymbols,avoidAmbiguous:e.GeneratorDefaultAvoidAmbiguousChars},a=`customSettings = ${JSON.stringify(t)}\npersonalSettingsGeneratorDefaults = ${JSON.stringify(o)}`;i.default.error(n),(0,l.sendExceptionLog)({error:n,code:d.ExceptionCriticality.WARNING,precisions:a}),r.digits=!0,r.letters=!0,r.symbols=!0}return(0,a.generate)(r)}function S(e,t,r,n){const o=(0,p.createGeneratedPassword)({Domain:n??"",GeneratedDate:(0,c.getUnixTimestamp)(),Id:(0,s.generateItemUuid)(),Password:r,LastBackupTime:0,Platform:(0,f.platformInfoSelector)(e.getState()).platformName});e.dispatch(u.saveGeneratedPassword(o)),t.getInstance().user.persistPersonalData()}Object.defineProperty(t,"associateGeneratedPasswordsToCredential",{enumerable:!0,get:function(){return g.associateGeneratedPasswordsToCredential}}),t.passwordGeneratorDefaultSettings={length:16,digits:!0,letters:!0,symbols:!0,avoidAmbiguous:!0},t.getDefaultPasswordGenerationSettings=m,t.fixIncoherentSettings=h,t.generatePassword=y,t.saveGeneratedPassword=S,t.generateAndSavePassword=function(e,t,r){if(!e.isAuthenticated())return i.default.log("No session available to generateAndSavePassword"),null;const o=y(e.getPersonalSettings());return n((()=>{S(e,t,o,r)})),o}},11507:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generatedPasswords$=t.generatedPasswordCount$=void 0;const n=r(92598),o=r(55220),a=r(18948),i=r(3343);t.generatedPasswordCount$=()=>(0,a.pipe)((0,i.map)(n.countAllGeneratedPasswordsSelector),(0,i.distinctUntilChanged)()),t.generatedPasswords$=(0,o.getLivePersonalInfo)(n.getLiveGeneratedPasswordsSelector)},91329:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGeneratedPasswordMappers=void 0,t.getGeneratedPasswordMappers=()=>({id:e=>e.Id,domain:e=>e.Domain,generatedDate:e=>e.GeneratedDate})},45853:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewGeneratedPasswordsBatch=t.getGeneratedPasswordsFirstToken=t.getGeneratedPasswordsSortToken=t.getGeneratedPasswordsFilterToken=void 0;const n=r(20553),o=r(36407);t.getGeneratedPasswordsFilterToken=({filterCriteria:e})=>({filterCriteria:e||[]}),t.getGeneratedPasswordsSortToken=({sortCriteria:e})=>({uniqField:"id",sortCriteria:e||[]}),t.getGeneratedPasswordsFirstToken=(e,t,r,o)=>(0,n.generateFirstToken)(e,t,r.initialBatchSize||30,o),t.viewGeneratedPasswordsBatch=e=>(0,o.listView)(e)},9546:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generatedPasswordMatch=t.searchGetters=void 0;const n=r(82234),o=r(64455);t.searchGetters=[(0,n.stringProp)("Domain")],t.generatedPasswordMatch=(0,o.match)(t.searchGetters)},92598:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generatedPasswordsQuerySelector=t.generatedPasswordsPaginationTokenSelector=t.generatedPasswordsPageSelector=t.getLiveGeneratedPasswordsSelector=t.viewedQueriedGeneratedPasswordsSelector=t.queryGeneratedPasswordsSelector=t.getGeneratedPasswordMappersSelector=t.generatedPasswordMappersSelector=t.viewedGeneratedPasswordSelector=t.generatedPasswordSelector=t.generatedPasswordsSelector=t.countAllGeneratedPasswordsSelector=void 0;const n=r(16516),o=r(63566),a=r(36407),i=r(24589),s=r(9546),c=r(91329),u=r(45853),l=r(32034),d=r(35893),p=r(18948),f=r(20553),g=r(57989),m=r(97006),h=r(40602),y=r(83659),S=r(49551);t.countAllGeneratedPasswordsSelector=e=>e.userSession.personalData.generatedPasswords.length,t.generatedPasswordsSelector=(0,l.createSelector)((e=>e.userSession.personalData.generatedPasswords),g.quarantinedSpacesSelector,y.unsafeAllCredentialsSelector,h.filterOutQuarantinedItems),t.generatedPasswordSelector=(e,r)=>{const n=(0,t.generatedPasswordsSelector)(e);return(0,S.findDataModelObject)(r,n)},t.viewedGeneratedPasswordSelector=(e,r)=>{const n=(0,t.generatedPasswordSelector)(e,r);return(0,a.itemView)(n)},t.generatedPasswordMappersSelector=e=>(0,c.getGeneratedPasswordMappers)();const v=()=>s.generatedPasswordMatch,E=(0,c.getGeneratedPasswordMappers)();t.getGeneratedPasswordMappersSelector=()=>E,t.queryGeneratedPasswordsSelector=(0,i.getQuerySelector)(t.generatedPasswordsSelector,v,t.generatedPasswordMappersSelector),t.viewedQueriedGeneratedPasswordsSelector=(0,n.compose)((0,o.viewListResults)(a.listView),t.queryGeneratedPasswordsSelector),t.getLiveGeneratedPasswordsSelector=(0,m.makeLiveSelectorGetter)(t.generatedPasswordsSelector,(()=>a.listView),v,t.getGeneratedPasswordMappersSelector),t.generatedPasswordsPageSelector=(e,r)=>{const n=(0,d.parseToken)(r),{sortToken:o,filterToken:a}=n,i={sortToken:o,filterToken:a},s=(0,c.getGeneratedPasswordMappers)(),l=(0,t.generatedPasswordsQuerySelector)(e,i),p=(0,f.generateNextToken)(s,n,l),g=(0,f.generatePrevToken)(s,n,l),m=(0,f.getBatch)(s,n,l),h=(0,d.stringifyToken)(p),y=(0,d.stringifyToken)(g);return{batch:(0,u.viewGeneratedPasswordsBatch)(m),nextToken:h,prevToken:y}},t.generatedPasswordsPaginationTokenSelector=(e,r)=>{const n=(0,u.getGeneratedPasswordsSortToken)(r),o=(0,u.getGeneratedPasswordsFilterToken)(r),a=(0,c.getGeneratedPasswordMappers)(),i={sortToken:n,filterToken:o},s=(0,t.generatedPasswordsQuerySelector)(e,i),l=(0,u.getGeneratedPasswordsFirstToken)(a,i,r,s);return(0,d.stringifyToken)(l)};const A=(0,d.createOptimizedSortTokenSelector)(((e,{sortToken:t})=>t),p.identity),_=(0,d.createOptimizedFilterTokenSelector)(((e,{filterToken:t})=>t),p.identity);t.generatedPasswordsQuerySelector=(0,l.createSelector)(c.getGeneratedPasswordMappers,v,A,_,t.generatedPasswordsSelector,d.queryData)},36407:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=void 0;const n=(0,r(16516).defaultTo)("");t.itemView=e=>({domain:n(e.Domain),generatedDate:e.GeneratedDate,password:e.Password,id:e.Id,platform:e.Platform}),t.listView=e=>e.map(t.itemView)},64185:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeEmptyIconUrls=t.computeIconUrls=void 0,t.computeIconUrls=(e,t)=>t.reduce(((t,r)=>{const n=e.find((e=>e&&e.type===r));return t[r]=n?n.url:null,t}),{}),t.makeEmptyIconUrls=e=>(0,t.computeIconUrls)([],e)},56814:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedDomainsFromUrls=t.decryptIconsDomains=void 0;const n=r(16516),o=r(11814),a=r(46445);t.decryptIconsDomains=(e,t)=>{const r=Array.from(e.keys()),n=new Map,o=t.reduce(((e,t)=>(e[(0,a.computeHashMD5)(t)]=t,e)),{});return r.forEach((t=>{const r=o[t];n.set(r,e.get(t))})),n},t.getFormattedDomainsFromUrls=e=>(0,n.uniq)(e.map(o.url.getSafeDomainForUrl)).filter((e=>"string"==typeof e&&e.length))},44999:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearInstance=t.getInstance=t.setInstance=void 0;const n=r(35949),o=r(23381);let a=null;t.setInstance=(e,t,r)=>(a=a||new n.IconsUpdater(t,e,new o.IconsWS(r)),a),t.getInstance=()=>a,t.clearInstance=()=>{a&&a.teardown(),a=null}},35949:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconsUpdater=void 0;const n=r(18948),o=r(3343),a=r(28354),i=r(21342),s=r(19736),c=r(51319),u=r(95623),l=r(91892),d=r(16661),p=r(17825),f=r(19979),g=r(70252),m=r(541),h=r(28096),y=r(21726),S=r(41717);var v;!function(e){e.BreachesOperation="breachesOperation",e.CredentialsOperation="credentialsOperation",e.RefreshOperation="refreshOperation"}(v||(v={})),t.IconsUpdater=class{constructor(e,t,r){this.localStorageService=e,this.storeService=t,this.gateway=r,this._operation$=new n.Subject,this.subs=new Set,this.handleRefreshIcons=async()=>{const e=(0,a.v4)(),t=new Promise((t=>{const r=this._operationResults$.subscribe((n=>{n.id===e&&(t(n.success),r.unsubscribe(),this.subs.delete(r))}));this.subs.add(r)}));return this.triggerRefreshOperation(e),await t},this.handleCredentialUpdates=async e=>{const t=(0,a.v4)(),r=new Promise((e=>{const r=this._operationResults$.subscribe((n=>{n.id===t&&(e(n.success),r.unsubscribe(),this.subs.delete(r))}));this.subs.add(r)}));return this.triggerCredentialsOperation(t,e),await r},this.handleBreachesUpdates=async e=>{const t=(0,a.v4)(),r=new Promise((e=>{const r=this._operationResults$.subscribe((n=>{n.id===t&&(e(n.success),r.unsubscribe(),this.subs.delete(r))}));this.subs.add(r)}));return this.triggerBreachesOperation(t,e),await r},this.triggerCredentialsOperation=(e,t,r=S.defaultIconTypes)=>{this._operation$.next({credentialIds:t,id:e,type:v.CredentialsOperation,iconTypes:r})},this.triggerBreachesOperation=(e,t,r=S.defaultIconTypes)=>{this._operation$.next({breachesIds:t,id:e,type:v.BreachesOperation,iconTypes:r})},this.triggerRefreshOperation=(e,t=S.defaultIconTypes)=>{this._operation$.next({id:e,type:v.RefreshOperation,iconTypes:t})},this.handleOperation=async(e,t)=>{const{type:r,id:n}=t,o={id:n,type:r},a=this.localStorageService.getInstance(),i=this.storeService.getState();try{return await e(t),await a.storeIcons((0,l.iconsCacheSelector)(i)),{...o,success:!0}}catch(e){const r=`[Icons Updater] - handle operation: operation ${t.type} failed with ${e}`;u.default.error(r);const n=new Error(r);return(0,g.sendExceptionLog)({error:n}),console.error(n),{...o,success:!1}}},this.onOperation=async e=>{switch(e.type){case v.CredentialsOperation:return this.handleOperation(((e,t)=>async({credentialIds:r,iconTypes:n})=>{const o=e.getState(),a=r.map((e=>(0,s.credentialSelector)(o,e))).filter((e=>!!e)),i=await(0,f.fetchIconsForCredentials)(o,t,a,n);e.dispatch((0,d.iconsUpdated)(i)),(0,y.default)()&&i.length>0&&(0,h.reportDataUpdate)(e)})(this.storeService,this.gateway),e);case v.BreachesOperation:return this.handleOperation(((e,t)=>async({breachesIds:r,iconTypes:n})=>{const o=e.getState(),a=r.map((e=>(0,i.breachSelector)(o,e))).filter((e=>!!e)),s=await(0,f.fetchIconsForBreaches)(o,t,a,n);e.dispatch((0,d.iconsUpdated)(s))})(this.storeService,this.gateway),e);case v.RefreshOperation:return this.handleOperation(((e,t)=>async({iconTypes:r})=>{const n=e.getState(),o=(0,l.iconsCacheSelector)(n);if((0,m.isIconsCacheValid)(o))return;const a=(0,c.credentialsSelector)(n),s=(0,i.breachesSelector)(n),u=await(0,f.fetchIconsForAllItems)(t,a,s,r);e.dispatch((0,d.iconsRefreshed)(u)),(0,y.default)()&&(0,h.reportDataUpdate)(e)})(this.storeService,this.gateway),e);default:return(0,p.assertUnreachable)(e)}},this.setupOperationsHandling=()=>{const e=this._operation$.pipe((0,o.concatMap)(this.onOperation),(0,o.share)()),t=e.subscribe();this.subs.add(t),this._operationResults$=e},this.setupOperationsHandling()}teardown(){this.subs.forEach((e=>e.unsubscribe()))}}},541:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isIconsCacheValid=void 0;const n=r(47408),o=86400*(7+Math.random());t.isIconsCacheValid=e=>!(!e||!e.lastUpdateTimeSeconds)&&(0,n.getUnixTimestamp)()-e.lastUpdateTimeSeconds<o},41717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultIconTypes=void 0,t.defaultIconTypes=["46x30@2x","160x106@2x","118x98@2x"]},19979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchIconsForAllItems=t.fetchIconsForCredentials=t.getCredentialsWithWebsiteIcon=t.fetchIconsForBreaches=t.getIconsUrlsForBreaches=t.getIconsUrlsForCredentials=void 0;const n=r(16516),o=r(56814),a=r(91892),i=r(64185),s=r(11814);t.getIconsUrlsForCredentials=e=>e.map((e=>e.Url)),t.getIconsUrlsForBreaches=e=>e.reduce(((e,t)=>{const r=t.Content.domains;return r&&0!==r.length?[...e,r[0]]:e}),[]),t.fetchIconsForBreaches=async(e,r,i,s)=>{const c=(0,t.getIconsUrlsForBreaches)(i),u=(0,o.getFormattedDomainsFromUrls)(c),l=(0,o.decryptIconsDomains)((0,a.iconsSelector)(e),u),d=Array.from(l.keys()),p=(0,n.difference)(u,d);return r.getIcons(p,s)},t.getCredentialsWithWebsiteIcon=(e,t,r)=>{const o={backgroundColor:null,mainColor:null,urls:(0,i.makeEmptyIconUrls)(r)};return e.map((e=>{const r=t.get(s.url.getSafeDomainForUrl(e.Url)),a=(0,n.defaultTo)(o,r);return{...e,domainIcon:a}}))},t.fetchIconsForCredentials=async(e,r,i,s)=>{const c=(0,t.getIconsUrlsForCredentials)(i),u=(0,o.getFormattedDomainsFromUrls)(c),l=(0,o.decryptIconsDomains)((0,a.iconsSelector)(e),u),d=Array.from(l.keys()),p=(0,n.difference)(u,d);return r.getIcons(p,s)},t.fetchIconsForAllItems=async(e,r,n,a)=>{const i=[...(0,t.getIconsUrlsForBreaches)(n),...(0,t.getIconsUrlsForCredentials)(r)],s=(0,o.getFormattedDomainsFromUrls)(i);return e.getIcons(s,a)}},49352:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iconsUpdatesHook=void 0;const n=r(17825),o=r(44999);t.iconsUpdatesHook=async e=>{const t=(0,o.getInstance)();if(!t)return!1;switch(e.type){case"breachUpdates":return t.handleBreachesUpdates(e.breachesIds);case"credentialUpdates":return t.handleCredentialUpdates(e.credentialIds);case"refresh":return t.handleRefreshIcons();default:return(0,n.assertUnreachable)(e)}}},44816:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatFetchedIcons=t.makeIconDataWithDomain=t.getDomainsIconsToBeFetched=t.getDomainIconsToBeFetched=void 0;const n=r(16516),o=r(64185),a=(0,n.defaultTo)(null);t.getDomainIconsToBeFetched=(e,t)=>t.reduce(((t,r)=>[...t,{domain:e,type:r}]),[]),t.getDomainsIconsToBeFetched=(e,r)=>e.reduce(((e,n)=>[...e,...(0,t.getDomainIconsToBeFetched)(n,r)]),[]),t.makeIconDataWithDomain=(e,t)=>{const r=(0,n.head)(e)||{};return{urls:(0,o.computeIconUrls)(e,t),backgroundColor:a(r.backgroundColor),mainColor:a(r.mainColor),domain:a(r.domain)}},t.formatFetchedIcons=(e,r,n)=>{const o=r.length;return[...Array(n)].reduce(((n,a,i)=>{const s=i*o,c=s+o,u=e.slice(s,c);return[...n,(0,t.makeIconDataWithDomain)(u,r)]}),[])}},23381:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconsWS=void 0;const n=r(44816),o=r(32607);t.IconsWS=class{constructor(e){this.wsService=e}async getIcons(e,t){if(!e||!e.length)return[];const r=(0,n.getDomainsIconsToBeFetched)(e,t),a=await this.wsService.iconCrawler.getIcons(r);if(!(0,o.isWSResponseSuccess)(a)){const e=`[Icons] getIcons: ${a.message}(statusCode: ${a.code})`;throw new Error(e)}const{content:i}=a;return(0,n.formatFetchedIcons)(i,t,e.length)}}},90451:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIcon=void 0;const n=r(11814),o=r(46445);t.getIcon=e=>t=>{const r=n.url.getSafeDomainForUrl(t);if(!r)return;const a=(0,o.computeHashMD5)(r);return e.get(a)}},91892:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iconsSelector=t.iconsCacheSelector=void 0,t.iconsCacheSelector=e=>e.userSession.iconsCache,t.iconsSelector=e=>(0,t.iconsCacheSelector)(e).domains},8566:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(12362),o=r(86691),a=async()=>{const e=(0,n.getInstance)(),t=(0,o.getInstance)(),r=t.lockTopic("iconsUpdates");await e.add("iconsUpdates",{type:"refresh"}),t.releaseTopic("iconsUpdates",r)};t.setupSubscriptions=async function(e,t){e.syncSuccess.on((async()=>{await a()})),e.syncFailure.on((async()=>{await a()}))}},13648:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(9774),o=r(53795),a=r(8302);t.config={commands:{addDriverLicense:{handler:a.addDriverLicenseHandler},editDriverLicense:{handler:a.editDriverLicenseHandler},deleteDriverLicense:{handler:a.deleteDriverLicenseHandler}},queries:{getDriverLicense:{selector:n.viewedDriverLicenseSelector},getDriverLicenses:{selector:n.viewedQueriedDriverLicensesSelector}},liveQueries:{liveDriverLicense:{operator:o.getDriverLicense$},liveDriverLicenses:{operator:o.driverLicenses$}}}},26655:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(78373),t)},60445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addDriverLicenseHandler=void 0;const n=r(53576),o=r(72099),a=r(58452),i=({expirationDate:e,idNumber:t,issueDate:r,name:a,state:i})=>({DateOfBirth:"",DeliveryDate:(0,o.viewDateToVaultDate)(r),ExpireDate:(0,o.viewDateToVaultDate)(e),Fullname:a??"",LinkedIdentity:"",Number:t??"",kwType:n.DataModelType.KWDriverLicence,State:i??"",Sex:""});t.addDriverLicenseHandler=(e,t)=>(0,a.addIdHandler)(e,t,i)},38681:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteDriverLicenseHandler=void 0;const n=r(9979),o=r(9774);t.deleteDriverLicenseHandler=(e,t)=>(0,n.deleteIdHandler)(e,t,o.driverLicenseSelector)},63589:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.editDriverLicenseHandler=t.handleDriverLicenseFields=void 0;const n=r(9774),o=r(72099),a=r(22388);t.handleDriverLicenseFields=(e,t)=>({DeliveryDate:void 0===e.issueDate?t.DeliveryDate:(0,o.viewDateToVaultDate)(e.issueDate),ExpireDate:void 0===e.expirationDate?t.ExpireDate:(0,o.viewDateToVaultDate)(e.expirationDate),Fullname:e.name??t.Fullname,Number:e.idNumber??t.Number,State:e.state??t.State,LinkedIdentity:void 0===e.name?t.LinkedIdentity:"",Attachments:void 0===e.attachments?t.Attachments:e.attachments}),t.editDriverLicenseHandler=(e,r)=>(0,a.updateIdHandler)(e,r,t.handleDriverLicenseFields,n.driverLicenseSelector)},8302:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(60445),t),o(r(63589),t),o(r(38681),t)},53795:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDriverLicense$=t.driverLicenses$=void 0;const n=r(18948),o=r(3343),a=r(55220),i=r(9774);t.driverLicenses$=(0,a.getLivePersonalInfo)(i.getLiveDriverLicensesSelector),t.getDriverLicense$=e=>{const t=(0,i.getViewedDriverLicenseSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},91019:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDriverLicenseMappers=void 0;const n=r(83539),o=r(72099);t.getDriverLicenseMappers=()=>({spaceId:e=>e.SpaceId,name:e=>(0,o.identityToName)(e.identity)||e.Fullname,idNumber:e=>e.Number,lastUse:n.lastUseMapper,id:e=>e.Id,creationDate:e=>e.CreationDatetime})},50317:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.driverLicenseMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234),a=r(72099);t.searchGetters=[(0,o.stringProp)("Number"),e=>(0,a.identityToName)(e.identity)||e.Fullname],t.driverLicenseMatch=(0,n.match)(t.searchGetters)},9774:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedDriverLicenseSelector=t.viewedDriverLicenseSelector=t.getLiveDriverLicensesSelector=t.viewedQueriedDriverLicensesSelector=t.queryDriverLicensesSelector=t.driverLicenseWithIdentitySelector=t.driverLicensesWithIdentitySelector=t.driverLicenseMappersSelector=t.driverLicenseSelector=t.driverLicensesSelector=void 0;const n=r(16516),o=r(32034),a=r(50317),i=r(59553),s=r(24589),c=r(63566),u=r(97006),l=r(49551),d=r(91019),p=r(28074),f=r(40602),g=r(57989);t.driverLicensesSelector=(0,o.createSelector)((e=>e.userSession.personalData.driverLicenses),g.quarantinedSpacesSelector,f.filterOutQuarantinedItems),t.driverLicenseSelector=(e,r)=>{const n=(0,t.driverLicensesSelector)(e);return(0,l.findDataModelObject)(r,n)},t.driverLicenseMappersSelector=e=>(0,d.getDriverLicenseMappers)(),t.driverLicensesWithIdentitySelector=(0,o.createSelector)([t.driverLicensesSelector,p.identitiesByIdSelector],((e,t)=>e.map((e=>({...e,identity:t[e.LinkedIdentity]}))))),t.driverLicenseWithIdentitySelector=(0,o.createSelector)([t.driverLicenseSelector,e=>(0,p.identitiesByIdSelector)(e)],((e,t)=>({...e,identity:t[e.LinkedIdentity]})));const m=()=>a.driverLicenseMatch;t.queryDriverLicensesSelector=(0,s.getQuerySelector)(t.driverLicensesWithIdentitySelector,m,t.driverLicenseMappersSelector),t.viewedQueriedDriverLicensesSelector=(0,n.compose)((0,c.viewListResults)(i.listView),t.queryDriverLicensesSelector),t.getLiveDriverLicensesSelector=(0,u.makeLiveSelectorGetter)(t.driverLicensesWithIdentitySelector,(()=>i.listView),m,t.driverLicenseMappersSelector),t.viewedDriverLicenseSelector=(e,r)=>{const n=(0,t.driverLicenseWithIdentitySelector)(e,r);return(0,i.maybeDetailView)(n)},t.getViewedDriverLicenseSelector=e=>{const r=(0,o.createSelector)(t.driverLicensesSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,o.createSelector)(r,p.identitiesSelector,((e,t)=>(0,i.maybeDetailView)({...e,identity:(0,l.findDataModelObject)(e.LinkedIdentity,t)})))}},78373:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},59553:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(82043),o=r(72099),a=({DeliveryDate:e,ExpireDate:t,Fullname:r,LocaleFormat:n,Number:a,State:i,CreationDatetime:s,identity:c})=>({country:(0,o.vaultCountryToViewCountry)(n),expirationDate:(0,o.vaultDateToViewDate)(t),idNumber:a??"",issueDate:(0,o.vaultDateToViewDate)(e),name:(0,o.identityToName)(c)||r||"",state:i??"",creationDate:s??0});t.detailView=e=>({...(0,n.dataModelDetailView)(e),...a(e)}),t.maybeDetailView=(0,n.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,n.dataModelItemView)(e),...a(e)}),t.listView=e=>e.map(t.itemView)},15141:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(41092),o=r(53076),a=r(32813);t.config={commands:{addFiscalId:{handler:a.addFiscalIdHandler},editFiscalId:{handler:a.editFiscalIdHandler},deleteFiscalId:{handler:a.deleteFiscalIdHandler}},queries:{getFiscalId:{selector:n.viewedFiscalIdSelector},getFiscalIds:{selector:n.viewedQueriedFiscalIdsSelector}},liveQueries:{liveFiscalId:{operator:o.getFiscalId$},liveFiscalIds:{operator:o.fiscalIds$}}}},26763:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(23582),t)},46033:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addFiscalIdHandler=void 0;const n=r(53576),o=r(58452),a=({idNumber:e,teledeclarantNumber:t})=>({FiscalNumber:e??"",kwType:n.DataModelType.KWFiscalStatement,TeledeclarantNumber:t??""});t.addFiscalIdHandler=(e,t)=>(0,o.addIdHandler)(e,t,a)},98167:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteFiscalIdHandler=void 0;const n=r(9979),o=r(41092);t.deleteFiscalIdHandler=(e,t)=>(0,n.deleteIdHandler)(e,t,o.fiscalIdSelector)},9175:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.editFiscalIdHandler=t.handleFiscalIdFields=void 0;const n=r(41092),o=r(22388);t.handleFiscalIdFields=(e,t)=>({FiscalNumber:e.idNumber??t.FiscalNumber,TeledeclarantNumber:e.teledeclarantNumber??t.TeledeclarantNumber,Attachments:void 0===e.attachments?t.Attachments:e.attachments}),t.editFiscalIdHandler=(e,r)=>(0,o.updateIdHandler)(e,r,t.handleFiscalIdFields,n.fiscalIdSelector)},32813:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(46033),t),o(r(9175),t),o(r(98167),t)},53076:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFiscalId$=t.fiscalIds$=void 0;const n=r(18948),o=r(3343),a=r(55220),i=r(41092);t.fiscalIds$=(0,a.getLivePersonalInfo)(i.getLiveFiscalIdsSelector),t.getFiscalId$=e=>{const t=(0,i.getViewedFiscalIdSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},42143:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFiscalIdMappers=void 0;const n=r(83539);t.getFiscalIdMappers=()=>({spaceId:e=>e.SpaceId,idNumber:e=>e.FiscalNumber,teledeclarantNumber:e=>e.TeledeclarantNumber,lastUse:n.lastUseMapper,id:e=>e.Id,creationDate:e=>e.CreationDatetime})},91341:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fiscalIdMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234);t.searchGetters=[(0,o.stringProp)("FiscalNumber"),(0,o.stringProp)("TeledeclarantNumber")],t.fiscalIdMatch=(0,n.match)(t.searchGetters)},41092:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedFiscalIdSelector=t.viewedFiscalIdSelector=t.getLiveFiscalIdsSelector=t.viewedQueriedFiscalIdsSelector=t.queryFiscalIdsSelector=t.fiscalIdMappersSelector=t.fiscalIdSelector=t.fiscalIdsSelector=void 0;const n=r(16516),o=r(32034),a=r(91341),i=r(22127),s=r(24589),c=r(63566),u=r(97006),l=r(49551),d=r(42143),p=r(40602),f=r(57989);t.fiscalIdsSelector=(0,o.createSelector)((e=>e.userSession.personalData.fiscalIds),f.quarantinedSpacesSelector,p.filterOutQuarantinedItems),t.fiscalIdSelector=(e,r)=>{const n=(0,t.fiscalIdsSelector)(e);return(0,l.findDataModelObject)(r,n)},t.fiscalIdMappersSelector=e=>(0,d.getFiscalIdMappers)();const g=()=>a.fiscalIdMatch;t.queryFiscalIdsSelector=(0,s.getQuerySelector)(t.fiscalIdsSelector,g,t.fiscalIdMappersSelector),t.viewedQueriedFiscalIdsSelector=(0,n.compose)((0,c.viewListResults)(i.listView),t.queryFiscalIdsSelector),t.getLiveFiscalIdsSelector=(0,u.makeLiveSelectorGetter)(t.fiscalIdsSelector,(()=>i.listView),g,t.fiscalIdMappersSelector),t.viewedFiscalIdSelector=(e,r)=>{const n=(0,t.fiscalIdSelector)(e,r);return(0,i.maybeDetailView)(n)},t.getViewedFiscalIdSelector=e=>{const r=(0,o.createSelector)(t.fiscalIdsSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,o.createSelector)(r,i.maybeDetailView)}},23582:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},22127:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(82043),o=r(72099),a=({FiscalNumber:e,TeledeclarantNumber:t,LocaleFormat:r,CreationDatetime:n})=>({country:(0,o.vaultCountryToViewCountry)(r),idNumber:e??"",teledeclarantNumber:t??"",creationDate:n??0});t.detailView=e=>({...(0,n.dataModelDetailView)(e),...a(e)}),t.maybeDetailView=(0,n.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,n.dataModelItemView)(e),...a(e)}),t.listView=e=>e.map(t.itemView)},2282:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(23437),o=r(77849),a=r(17607);t.config={commands:{addIdCard:{handler:a.addIdCardHandler},editIdCard:{handler:a.editIdCardHandler},deleteIdCard:{handler:a.deleteIdCardHandler}},queries:{getIdCard:{selector:n.viewedIdCardSelector},getIdCards:{selector:n.viewedQueriedIdCardsSelector}},liveQueries:{liveIdCard:{operator:o.getIdCard$},liveIdCards:{operator:o.idCards$}}}},59198:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(97367),t)},38052:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addIdCardHandler=void 0;const n=r(53576),o=r(72099),a=r(58452),i=({expirationDate:e,idNumber:t,issueDate:r,name:a})=>({DateOfBirth:"",DeliveryDate:(0,o.viewDateToVaultDate)(r),ExpireDate:(0,o.viewDateToVaultDate)(e),Fullname:a??"",LinkedIdentity:"",Number:t??"",kwType:n.DataModelType.KWIDCard,Sex:""});t.addIdCardHandler=(e,t)=>(0,a.addIdHandler)(e,t,i)},19922:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteIdCardHandler=void 0;const n=r(9979),o=r(23437);t.deleteIdCardHandler=(e,t)=>(0,n.deleteIdHandler)(e,t,o.idCardSelector)},84260:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.editIdCardHandler=t.handleIdCardFields=void 0;const n=r(23437),o=r(72099),a=r(22388);t.handleIdCardFields=(e,t)=>({DeliveryDate:void 0===e.issueDate?t.DeliveryDate:(0,o.viewDateToVaultDate)(e.issueDate),ExpireDate:void 0===e.expirationDate?t.ExpireDate:(0,o.viewDateToVaultDate)(e.expirationDate),Fullname:e.name??t.Fullname,Number:e.idNumber??t.Number,LinkedIdentity:void 0===e.name?t.LinkedIdentity:"",Attachments:void 0===e.attachments?t.Attachments:e.attachments}),t.editIdCardHandler=(e,r)=>(0,a.updateIdHandler)(e,r,t.handleIdCardFields,n.idCardSelector)},17607:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(38052),t),o(r(84260),t),o(r(19922),t)},77849:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIdCard$=t.idCards$=void 0;const n=r(18948),o=r(3343),a=r(55220),i=r(23437);t.idCards$=(0,a.getLivePersonalInfo)(i.getLiveIdCardsSelector),t.getIdCard$=e=>{const t=(0,i.getViewedIdCardSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},75455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIdCardMappers=void 0;const n=r(83539),o=r(72099);t.getIdCardMappers=()=>({spaceId:e=>e.SpaceId,name:e=>(0,o.identityToName)(e.identity)||e.Fullname,idNumber:e=>e.Number,lastUse:n.lastUseMapper,id:e=>e.Id,creationDate:e=>e.CreationDatetime})},27062:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.idCardMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234),a=r(72099);t.searchGetters=[(0,o.stringProp)("Number"),e=>(0,a.identityToName)(e.identity)||e.Fullname],t.idCardMatch=(0,n.match)(t.searchGetters)},23437:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedIdCardSelector=t.viewedIdCardSelector=t.getLiveIdCardsSelector=t.viewedQueriedIdCardsSelector=t.queryIdCardsSelector=t.idCardMappersSelector=t.idCardWithIdentitySelector=t.idCardsWithIdentitySelector=t.idCardSelector=t.idCardsSelector=void 0;const n=r(16516),o=r(32034),a=r(27062),i=r(64439),s=r(24589),c=r(63566),u=r(97006),l=r(49551),d=r(75455),p=r(28074),f=r(40602),g=r(57989);t.idCardsSelector=(0,o.createSelector)((e=>e.userSession.personalData.idCards),g.quarantinedSpacesSelector,f.filterOutQuarantinedItems),t.idCardSelector=(e,r)=>{const n=(0,t.idCardsSelector)(e);return(0,l.findDataModelObject)(r,n)},t.idCardsWithIdentitySelector=(0,o.createSelector)([t.idCardsSelector,p.identitiesByIdSelector],((e,t)=>e.map((e=>({...e,identity:t[e.LinkedIdentity]}))))),t.idCardWithIdentitySelector=(0,o.createSelector)([t.idCardSelector,e=>(0,p.identitiesByIdSelector)(e)],((e,t)=>({...e,identity:t[e.LinkedIdentity]}))),t.idCardMappersSelector=e=>(0,d.getIdCardMappers)();const m=()=>a.idCardMatch;t.queryIdCardsSelector=(0,s.getQuerySelector)(t.idCardsWithIdentitySelector,m,t.idCardMappersSelector),t.viewedQueriedIdCardsSelector=(0,n.compose)((0,c.viewListResults)(i.listView),t.queryIdCardsSelector),t.getLiveIdCardsSelector=(0,u.makeLiveSelectorGetter)(t.idCardsWithIdentitySelector,(()=>i.listView),m,t.idCardMappersSelector),t.viewedIdCardSelector=(e,r)=>{const n=(0,t.idCardWithIdentitySelector)(e,r);return(0,i.maybeDetailView)(n)},t.getViewedIdCardSelector=e=>{const r=(0,o.createSelector)(t.idCardsSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,o.createSelector)(r,p.identitiesSelector,((e,t)=>(0,i.maybeDetailView)({...e,identity:(0,l.findDataModelObject)(e.LinkedIdentity,t)})))}},97367:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},64439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(82043),o=r(72099),a=({DeliveryDate:e,ExpireDate:t,Fullname:r,LocaleFormat:n,Number:a,CreationDatetime:i,identity:s})=>({country:(0,o.vaultCountryToViewCountry)(n),expirationDate:(0,o.vaultDateToViewDate)(t),idNumber:a??"",issueDate:(0,o.vaultDateToViewDate)(e),name:(0,o.identityToName)(s)||r||"",creationDate:i??0});t.detailView=e=>({...(0,n.dataModelDetailView)(e),...a(e)}),t.maybeDetailView=(0,n.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,n.dataModelItemView)(e),...a(e)}),t.listView=e=>e.map(t.itemView)},8453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(65401),o=r(56174),a=r(30476);t.config={commands:{addPassport:{handler:a.addPassportHandler},editPassport:{handler:a.editPassportHandler},deletePassport:{handler:a.deletePassportHandler}},queries:{getPassport:{selector:n.viewedPassportSelector},getPassports:{selector:n.viewedQueriedPassportsSelector}},liveQueries:{livePassport:{operator:o.getPassport$},livePassports:{operator:o.passports$}}}},80666:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(97894),t)},57237:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addPassportHandler=void 0;const n=r(53576),o=r(72099),a=r(58452),i=({expirationDate:e,idNumber:t,issueDate:r,name:a,deliveryPlace:i})=>({DateOfBirth:"",DeliveryDate:(0,o.viewDateToVaultDate)(r),ExpireDate:(0,o.viewDateToVaultDate)(e),Fullname:a??"",LinkedIdentity:"",Number:t??"",kwType:n.DataModelType.KWPassport,DeliveryPlace:i??"",Sex:""});t.addPassportHandler=(e,t)=>(0,a.addIdHandler)(e,t,i)},48518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deletePassportHandler=void 0;const n=r(9979),o=r(65401);t.deletePassportHandler=(e,t)=>(0,n.deleteIdHandler)(e,t,o.passportSelector)},29461:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.editPassportHandler=t.handlePassportFields=void 0;const n=r(65401),o=r(72099),a=r(22388);t.handlePassportFields=(e,t)=>({DeliveryDate:void 0===e.issueDate?t.DeliveryDate:(0,o.viewDateToVaultDate)(e.issueDate),ExpireDate:void 0===e.expirationDate?t.ExpireDate:(0,o.viewDateToVaultDate)(e.expirationDate),Fullname:e.name??t.Fullname,Number:e.idNumber??t.Number,DeliveryPlace:e.deliveryPlace??t.DeliveryPlace,LinkedIdentity:void 0===e.name?t.LinkedIdentity:"",Attachments:void 0===e.attachments?t.Attachments:e.attachments}),t.editPassportHandler=(e,r)=>(0,a.updateIdHandler)(e,r,t.handlePassportFields,n.passportSelector)},30476:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(57237),t),o(r(29461),t),o(r(48518),t)},56174:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPassport$=t.passports$=void 0;const n=r(18948),o=r(3343),a=r(55220),i=r(65401);t.passports$=(0,a.getLivePersonalInfo)(i.getLivePassportsSelector),t.getPassport$=e=>{const t=(0,i.getViewedPassportSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},94023:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPassportMappers=void 0;const n=r(83539),o=r(72099);t.getPassportMappers=()=>({spaceId:e=>e.SpaceId,name:e=>(0,o.identityToName)(e.identity)||e.Fullname,idNumber:e=>e.Number,lastUse:n.lastUseMapper,id:e=>e.Id,creationDate:e=>e.CreationDatetime})},39515:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passportMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234),a=r(72099);t.searchGetters=[(0,o.stringProp)("Number"),e=>(0,a.identityToName)(e.identity)||e.Fullname],t.passportMatch=(0,n.match)(t.searchGetters)},65401:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedPassportSelector=t.viewedPassportSelector=t.getLivePassportsSelector=t.viewedQueriedPassportsSelector=t.queryPassportsWithIdentitySelector=t.passportMappersSelector=t.passportWithIdentitySelector=t.passportsWithIdentitySelector=t.passportSelector=t.passportsSelector=void 0;const n=r(16516),o=r(32034),a=r(39515),i=r(90810),s=r(24589),c=r(63566),u=r(97006),l=r(49551),d=r(94023),p=r(28074),f=r(40602),g=r(57989);t.passportsSelector=(0,o.createSelector)((e=>e.userSession.personalData.passports),g.quarantinedSpacesSelector,f.filterOutQuarantinedItems),t.passportSelector=(e,r)=>{const n=(0,t.passportsSelector)(e);return(0,l.findDataModelObject)(r,n)},t.passportsWithIdentitySelector=(0,o.createSelector)([t.passportsSelector,p.identitiesByIdSelector],((e,t)=>e.map((e=>({...e,identity:t[e.LinkedIdentity]}))))),t.passportWithIdentitySelector=(0,o.createSelector)([t.passportSelector,e=>(0,p.identitiesByIdSelector)(e)],((e,t)=>({...e,identity:t[e.LinkedIdentity]}))),t.passportMappersSelector=e=>(0,d.getPassportMappers)();const m=()=>a.passportMatch;t.queryPassportsWithIdentitySelector=(0,s.getQuerySelector)(t.passportsWithIdentitySelector,m,t.passportMappersSelector),t.viewedQueriedPassportsSelector=(0,n.compose)((0,c.viewListResults)(i.listView),t.queryPassportsWithIdentitySelector),t.getLivePassportsSelector=(0,u.makeLiveSelectorGetter)(t.passportsWithIdentitySelector,(()=>i.listView),m,t.passportMappersSelector),t.viewedPassportSelector=(e,r)=>{const n=(0,t.passportWithIdentitySelector)(e,r);return(0,i.maybeDetailView)(n)},t.getViewedPassportSelector=e=>{const r=(0,o.createSelector)(t.passportsSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,o.createSelector)(r,p.identitiesSelector,((e,t)=>(0,i.maybeDetailView)({...e,identity:(0,l.findDataModelObject)(e.LinkedIdentity,t)})))}},97894:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},90810:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(82043),o=r(72099),a=({DeliveryDate:e,ExpireDate:t,Fullname:r,LocaleFormat:n,Number:a,DeliveryPlace:i,CreationDatetime:s,identity:c})=>({country:(0,o.vaultCountryToViewCountry)(n),expirationDate:(0,o.vaultDateToViewDate)(t),idNumber:a??"",issueDate:(0,o.vaultDateToViewDate)(e),name:(0,o.identityToName)(c)||r||"",deliveryPlace:i??"",creationDate:s??0});t.detailView=e=>({...(0,n.dataModelDetailView)(e),...a(e)}),t.maybeDetailView=(0,n.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,n.dataModelItemView)(e),...a(e)}),t.listView=e=>e.map(t.itemView)},57718:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(27147),o=r(25346),a=r(27753);t.config={commands:{addSocialSecurityId:{handler:a.addSocialSecurityIdHandler},editSocialSecurityId:{handler:a.editSocialSecurityIdHandler},deleteSocialSecurityId:{handler:a.deleteSocialSecurityIdHandler}},queries:{getSocialSecurityId:{selector:n.viewedSocialSecurityIdSelector},getSocialSecurityIds:{selector:n.viewedQueriedSocialSecurityIdsSelector}},liveQueries:{liveSocialSecurityId:{operator:o.getSocialSecurityId$},liveSocialSecurityIds:{operator:o.socialSecurityIds$}}}},80630:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(72299),t)},6702:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSocialSecurityIdHandler=void 0;const n=r(53576),o=r(58452),a=e=>({DateOfBirth:"",LinkedIdentity:"",SocialSecurityFullname:e.name??"",SocialSecurityNumber:e.idNumber??"",kwType:n.DataModelType.KWSocialSecurityStatement,Sex:""});t.addSocialSecurityIdHandler=(e,t)=>(0,o.addIdHandler)(e,t,a)},50725:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSocialSecurityIdHandler=void 0;const n=r(9979),o=r(27147);t.deleteSocialSecurityIdHandler=(e,t)=>(0,n.deleteIdHandler)(e,t,o.socialSecurityIdSelector)},96163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.editSocialSecurityIdHandler=t.handleSocialSecurityIdFields=void 0;const n=r(27147),o=r(22388);t.handleSocialSecurityIdFields=(e,t)=>({SocialSecurityFullname:e.name??t.SocialSecurityFullname,SocialSecurityNumber:e.idNumber??t.SocialSecurityNumber,LinkedIdentity:void 0===e.name?t.LinkedIdentity:"",Attachments:void 0===e.attachments?t.Attachments:e.attachments}),t.editSocialSecurityIdHandler=(e,r)=>(0,o.updateIdHandler)(e,r,t.handleSocialSecurityIdFields,n.socialSecurityIdSelector)},27753:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(6702),t),o(r(96163),t),o(r(50725),t)},25346:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSocialSecurityId$=t.socialSecurityIds$=void 0;const n=r(18948),o=r(3343),a=r(55220),i=r(27147);t.socialSecurityIds$=(0,a.getLivePersonalInfo)(i.getLiveSocialSecurityIdsSelector),t.getSocialSecurityId$=e=>{const t=(0,i.getViewedSocialSecurityIdSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},50147:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSocialSecurityIdMappers=void 0;const n=r(83539),o=r(72099);t.getSocialSecurityIdMappers=()=>({spaceId:e=>e.SpaceId,name:e=>(0,o.identityToName)(e.identity)||e.SocialSecurityFullname,idNumber:e=>e.SocialSecurityNumber,lastUse:n.lastUseMapper,id:e=>e.Id,creationDate:e=>e.CreationDatetime})},29989:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.socialSecurityIdMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234),a=r(72099);t.searchGetters=[(0,o.stringProp)("SocialSecurityNumber"),e=>(0,a.identityToName)(e.identity)||e.SocialSecurityFullname],t.socialSecurityIdMatch=(0,n.match)(t.searchGetters)},27147:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedSocialSecurityIdSelector=t.viewedSocialSecurityIdSelector=t.getLiveSocialSecurityIdsSelector=t.viewedQueriedSocialSecurityIdsSelector=t.querySocialSecurityIdsSelector=t.socialSecurityIdMappersSelector=t.socialSecurityIdWithIdentitySelector=t.socialSecurityIdsWithIdentitySelector=t.socialSecurityIdSelector=t.socialSecurityIdsSelector=void 0;const n=r(16516),o=r(32034),a=r(29989),i=r(71864),s=r(24589),c=r(63566),u=r(97006),l=r(49551),d=r(50147),p=r(28074),f=r(57989),g=r(40602);t.socialSecurityIdsSelector=(0,o.createSelector)((e=>e.userSession.personalData.socialSecurityIds),f.quarantinedSpacesSelector,g.filterOutQuarantinedItems),t.socialSecurityIdSelector=(e,r)=>{const n=(0,t.socialSecurityIdsSelector)(e);return(0,l.findDataModelObject)(r,n)},t.socialSecurityIdsWithIdentitySelector=(0,o.createSelector)([t.socialSecurityIdsSelector,p.identitiesByIdSelector],((e,t)=>e.map((e=>({...e,identity:t[e.LinkedIdentity]}))))),t.socialSecurityIdWithIdentitySelector=(0,o.createSelector)([t.socialSecurityIdSelector,e=>(0,p.identitiesByIdSelector)(e)],((e,t)=>({...e,identity:t[e.LinkedIdentity]}))),t.socialSecurityIdMappersSelector=e=>(0,d.getSocialSecurityIdMappers)();const m=()=>a.socialSecurityIdMatch;t.querySocialSecurityIdsSelector=(0,s.getQuerySelector)(t.socialSecurityIdsWithIdentitySelector,m,t.socialSecurityIdMappersSelector),t.viewedQueriedSocialSecurityIdsSelector=(0,n.compose)((0,c.viewListResults)(i.listView),t.querySocialSecurityIdsSelector),t.getLiveSocialSecurityIdsSelector=(0,u.makeLiveSelectorGetter)(t.socialSecurityIdsWithIdentitySelector,(()=>i.listView),m,t.socialSecurityIdMappersSelector),t.viewedSocialSecurityIdSelector=(e,r)=>{const n=(0,t.socialSecurityIdWithIdentitySelector)(e,r);return(0,i.maybeDetailView)(n)},t.getViewedSocialSecurityIdSelector=e=>{const r=(0,o.createSelector)(t.socialSecurityIdsSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,o.createSelector)(r,p.identitiesSelector,((e,t)=>(0,i.maybeDetailView)({...e,identity:(0,l.findDataModelObject)(e.LinkedIdentity,t)})))}},72299:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},71864:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(82043),o=r(72099),a=e=>({name:(0,o.identityToName)(e.identity)||e.SocialSecurityFullname||"",idNumber:e.SocialSecurityNumber??"",country:(0,o.vaultCountryToViewCountry)(e.LocaleFormat),creationDate:e.CreationDatetime??0});t.detailView=e=>({...(0,n.dataModelDetailView)(e),...a(e)}),t.maybeDetailView=(0,n.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,n.dataModelItemView)(e),...a(e)}),t.listView=e=>e.map(t.itemView)},58452:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addIdHandler=void 0;const n=r(10203),o=r(32921),a=r(23136),i=r(48313),s=r(47408),c=r(78320),u=r(95623),l=r(70252),d=r(13675),p=r(72099),f=r(79980),g=r(51504);t.addIdHandler=({sessionService:e,storeService:t,eventLoggerService:r},m,h)=>{if(""===m.idNumber)return Promise.resolve({success:!1,error:{code:o.AddIdResultErrorCode.MISSING_ID_NUMBER}});const y=({country:e,spaceId:t})=>{const r=(0,s.getUnixTimestamp)();return{AnonId:(0,c.generateItemUuid)(),CreationDatetime:r,Id:(0,c.generateItemUuid)(),LastBackupTime:0,LocaleFormat:(0,p.viewCountryToVaultCountry)(e),SpaceId:t??"",UserModificationDatetime:r}};try{if(!t.isAuthenticated())return Promise.resolve({success:!1,error:{code:o.IdErrorCode.NOT_AUTHENTICATED}});const s={...y(S=(0,d.sanitizeInputPersonalData)(m)),...h(S)},c=s.kwType;t.dispatch((0,i.savePersonalDataItem)(s,c)),e.getInstance().user.persistPersonalData(),(0,a.getDebounceSync)(t,e)({immediateCall:!0},n.Trigger.Save);const u=t.getState().userSession.personalFeatures.features[g.NEW_URL_PARSER_FF]||t.getState().userSession.personalFeatures.features[g.NEW_URL_PARSER_FF_PROD];return(0,f.logAddVaultItem)(t,r,s,u),Promise.resolve({success:!0})}catch(e){const t=new Error(`[IDs] - addIdHandler: ${e}`);return(0,l.sendExceptionLog)({error:t}),(0,u.logError)(t),Promise.resolve({success:!1,error:{code:o.IdErrorCode.INTERNAL_ERROR}})}var S}},9979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteIdHandler=void 0;const n=r(10203),o=r(32921),a=r(23136),i=r(45291),s=r(95623),c=r(70252),u=r(79980),l=r(51504);t.deleteIdHandler=({sessionService:e,storeService:t,eventLoggerService:r},{id:d},p)=>{const f=t.getState();try{if(!t.isAuthenticated())return Promise.resolve({success:!1,error:{code:o.IdErrorCode.NOT_AUTHENTICATED}});const s=p(f,d);if(!s)return Promise.resolve({success:!1,error:{code:o.IdErrorCode.NOT_FOUND}});const c=(0,i.removePersonalItem)(s.kwType,s.Id,null);t.dispatch(c),(0,a.getDebounceSync)(t,e)({immediateCall:!0},n.Trigger.Save);const g=t.getState().userSession.personalFeatures.features[l.NEW_URL_PARSER_FF]||t.getState().userSession.personalFeatures.features[l.NEW_URL_PARSER_FF_PROD];return(0,u.logDeleteVaultItem)(t,r,s,g),Promise.resolve({success:!0})}catch(e){const t=new Error(`[IDs] - deleteIdHandler: ${e}`);return(0,c.sendExceptionLog)({error:t}),(0,s.logError)(t),Promise.resolve({success:!1,error:{code:o.IdErrorCode.INTERNAL_ERROR}})}}},22388:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateIdHandler=void 0;const n=r(10203),o=r(32921),a=r(23136),i=r(48313),s=r(47408),c=r(95623),u=r(70252),l=r(13675),d=r(72099),p=r(79980),f=r(51504);t.updateIdHandler=({sessionService:e,storeService:t,eventLoggerService:r},g,m,h)=>{if(""===g.idNumber)return Promise.resolve({success:!1,error:{code:o.UpdateIdResultErrorCode.MISSING_ID_NUMBER}});const y=({country:e,spaceId:t},r)=>({SpaceId:t??r.SpaceId,LocaleFormat:void 0===e?r.LocaleFormat:(0,d.viewCountryToVaultCountry)(e)}),S=(e,t)=>({...y(e,t),...m(e,t)});try{if(!t.isAuthenticated())return Promise.resolve({success:!1,error:{code:o.IdErrorCode.NOT_AUTHENTICATED}});const c=t.getState(),u=(0,l.sanitizeInputPersonalData)(g),d=h(c,g.id);if(!d)return Promise.resolve({success:!1,error:{code:o.IdErrorCode.NOT_FOUND}});const m={...d,...S(u,d),UserModificationDatetime:(0,s.getUnixTimestamp)()},y=m.kwType;t.dispatch((0,i.savePersonalDataItem)(m,y)),e.getInstance().user.persistPersonalData(),(0,a.getDebounceSync)(t,e)({immediateCall:!0},n.Trigger.Save);const v=h(c,g.id),E=t.getState().userSession.personalFeatures.features[f.NEW_URL_PARSER_FF]||t.getState().userSession.personalFeatures.features[f.NEW_URL_PARSER_FF_PROD];return(0,p.logEditVaultItem)(t,r,m,v,E),Promise.resolve({success:!0})}catch(e){const t=new Error(`[IDs] - updateIdHandler: ${e}`);return(0,u.sendExceptionLog)({error:t}),(0,c.logError)(t),Promise.resolve({success:!1,error:{code:o.IdErrorCode.INTERNAL_ERROR}})}}},72099:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identityToName=t.viewCountryToVaultCountry=t.vaultCountryToViewCountry=t.vaultDateToViewDate=t.viewDateToVaultDate=t.epochToDate=t.ZERO_INDEX_BASED_MONTH_OFFSET=void 0;const n=r(53576);t.ZERO_INDEX_BASED_MONTH_OFFSET=1,t.epochToDate=e=>new Date(1e3*e),t.viewDateToVaultDate=e=>null===e?"":(e=>{const r=(0,t.epochToDate)(e);return`${r.getUTCFullYear()}-${r.getUTCMonth()+1}-${r.getUTCDate()}`})(e),t.vaultDateToViewDate=e=>{if(!e)return null;const t=(e=>{if(!e)return 0;const[t,r,n]=e.split(/[-/]/).map((e=>Number.parseInt(e,10))),o=new Date;o.setUTCHours(0,0,0,0);const a=o.setUTCFullYear(t,r-1,n);return Math.floor(a/1e3)})(e);return Number.isNaN(t)?null:t},t.vaultCountryToViewCountry=e=>{const t=n.Country[e];return void 0===t||t===n.Country.NO_TYPE?n.Country.UNIVERSAL:t},t.viewCountryToVaultCountry=t.vaultCountryToViewCountry,t.identityToName=e=>e?[e.FirstName,e.MiddleName,e.LastName,e.LastName2].filter(Boolean).join(" "):""},32921:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateIdResultErrorCode=t.AddIdResultErrorCode=t.IdErrorCode=void 0,function(e){e.INTERNAL_ERROR="INTERNAL_ERROR",e.NOT_AUTHENTICATED="NOT_AUTHENTICATED",e.NOT_FOUND="NOT_FOUND"}(t.IdErrorCode||(t.IdErrorCode={})),function(e){e.MISSING_ID_NUMBER="MISSING_ID_NUMBER"}(t.AddIdResultErrorCode||(t.AddIdResultErrorCode={})),function(e){e.MISSING_ID_NUMBER="MISSING_ID_NUMBER"}(t.UpdateIdResultErrorCode||(t.UpdateIdResultErrorCode={}))},11230:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importApiConfig=void 0;const n=r(56242),o=r(29613),a=r(17760),i=r(92083),s=r(8765);t.importApiConfig={commands:{importPersonalData:{handler:a.importPersonalDataHandler},previewPersonalData:{handler:i.previewPersonalDataHandler},dismissPersonalDataImportNotifications:{handler:s.dismissDataImportHandler}},queries:{getImportPersonalDataStatus:{selector:o.importPersonalDataStateSelector}},liveQueries:{liveImportPersonalDataStatus:{operator:n.importPersonalDataState$}}}},88815:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewPersonalDataErrorType=t.ImportPersonalDataStateType=t.ImportPersonalDataErrorType=t.ImportFormats=void 0,function(e){e.Csv="csv",e.Dash="dash"}(t.ImportFormats||(t.ImportFormats={})),function(e){e.Unavailable="unavailable",e.Unknown="unknown"}(t.ImportPersonalDataErrorType||(t.ImportPersonalDataErrorType={})),function(e){e.Idle="idle",e.Processing="processing",e.Success="success",e.Error="error"}(t.ImportPersonalDataStateType||(t.ImportPersonalDataStateType={})),function(e){e.BadPassword="bad_password",e.Unavailable="unavailable",e.InvalidFormat="invalid",e.Unknown="unknown"}(t.PreviewPersonalDataErrorType||(t.PreviewPersonalDataErrorType={}))},8765:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dismissDataImportHandler=t.dismissDataImport=void 0;const n=r(38250),o=r(43691);t.dismissDataImport=async e=>{await e.waitReady(),e.onNewState({status:n.ImportPersonalDataStateType.Idle})},t.dismissDataImportHandler=e=>(0,t.dismissDataImport)((0,o.makeImportService)(e))},17760:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importPersonalDataHandler=t.importPersonalData=void 0;const n=r(38250),o=r(95623),a=r(70252),i=r(43691);t.importPersonalData=async(e,t)=>{try{e.onNewState({status:n.ImportPersonalDataStateType.Processing,name:t.name});const r=t.content;return(async()=>{try{const o=await e.importPersonalDataItems(r);e.onNewState({status:n.ImportPersonalDataStateType.Success,name:t.name,totalCount:o.totalCount,successCount:o.successCount,duplicateCount:o.duplicateCount})}catch(r){const i=new Error(`[import] - importError: ${r}`);(0,a.sendExceptionLog)({error:i}),(0,o.logError)(i),e.onNewState({status:n.ImportPersonalDataStateType.Error,name:t.name})}})(),{success:!0}}catch(r){const i=new Error(`[import] - formatError: ${r}`);return(0,a.sendExceptionLog)({error:i}),(0,o.logError)(i),e.onNewState({status:n.ImportPersonalDataStateType.Error,name:t.name}),{success:!1,error:n.ImportPersonalDataErrorType.Unknown}}},t.importPersonalDataHandler=(e,r)=>(0,t.importPersonalData)((0,i.makeImportService)(e),r)},92083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.previewPersonalDataHandler=t.previewPersonalData=void 0;const n=r(38250),o=r(43691);t.previewPersonalData=async(e,t)=>{if(!e.canDoImport())return{success:!1,error:n.PreviewPersonalDataErrorType.Unavailable};try{return await e.previewPersonalDataArchive(t)}catch(e){return{success:!1,error:n.PreviewPersonalDataErrorType.InvalidFormat}}},t.previewPersonalDataHandler=(e,r)=>{const n=(0,o.makeImportService)(e);return(0,t.previewPersonalData)(n,r)}},56242:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importPersonalDataState$=void 0;const n=r(18948),o=r(3343),a=r(29613);t.importPersonalDataState$=()=>(0,n.pipe)((0,o.map)(a.importPersonalDataStateSelector,(0,o.distinctUntilChanged)()))},29613:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isImportPersonalDataAvailableSelector=t.importPersonalDataStateSelector=void 0;const n=r(38250),o=r(62844);t.importPersonalDataStateSelector=e=>e.userSession.importPersonalData.state??{status:n.ImportPersonalDataStateType.Idle},t.isImportPersonalDataAvailableSelector=e=>!(0,o.changeMPinProgressSelector)(e)&&(0,t.importPersonalDataStateSelector)(e).status!==n.ImportPersonalDataStateType.Processing},90537:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUniqueVaultItemIdentifier=void 0;const n=r(16516),o={Attachments:!1},a={...o,Title:!0,Email:!0,Login:!0,SecondaryLogin:!0,Password:!0,Strength:!1,Note:!0,Checked:!1,Status:!1,SharedObject:!1,ModificationDatetime:!1,Category:!1,Url:!0,UserSelectedUrl:!1,UseFixedUrl:!1,TrustedUrlGroup:!1,NumberUse:!1,AutoLogin:!1,AutoProtected:!1,SubdomainOnly:!1,Type:!1,Server:!1,Port:!1,Alias:!1,SID:!1,ConnectionOptions:!1,domainIcon:!1,limitedPermissions:!1,OtpSecret:!0,OtpUrl:!0,LinkedServices:!1},i={...o,Title:!0,Category:!1,Type:!1,limitedPermissions:!1,Content:!0,Secured:!1,CreationDate:!1,UpdateDate:!1},s={...o,LinkedIdentity:!1,Fullname:!0,Sex:!0,DateOfBirth:!0,Number:!0,ExpireDate:!0,DeliveryDate:!0},c={...o,Email:!0,Type:!1,EmailName:!0},u={...o,Type:!1,Number:!0,NumberNational:!0,NumberInternational:!0,PhoneName:!0,PersonalNote:!0},l={...o,Title:!0,FirstName:!0,MiddleName:!0,LastName:!0,LastName2:!0,Pseudo:!1,BirthDate:!0,BirthPlace:!0},d={...o,Counter:!1,CredentialId:!0,KeyAlgorithm:!0,PrivateKey:!0,RpId:!0,RpName:!0,UserDisplayName:!0,UserHandle:!0},p={...o,LinkedIdentity:!1,Fullname:!0,Sex:!0,DateOfBirth:!0,Number:!0,ExpireDate:!0,DeliveryDate:!0,DeliveryPlace:!0},f={...o,PersonalNote:!0,Name:!0,Website:!0},g={...o,Number:!0,LinkedIdentity:!1,Fullname:!0,Sex:!0,DateOfBirth:!0,DeliveryDate:!0,ExpireDate:!0,State:!0},m={...o,PersonalNote:!0,Name:!0,JobTitle:!0},h={...o,PersonalNote:!0,State:!0,AddressName:!0,Receiver:!0,AddressFull:!0,City:!0,ZipCode:!0,Country:!0,StreetNumber:!0,StreetTitle:!0,StreetName:!0,StateNumber:!0,StateLevel2:!0,Building:!0,Stairs:!0,Floor:!0,Door:!0,DigitCode:!0,LinkedPhone:!1},y={...o,Name:!0,CardNumber:!0,CardNumberLastDigits:!0,OwnerName:!0,SecurityCode:!0,ExpireMonth:!0,ExpireYear:!0,StartMonth:!0,StartYear:!0,IssueNumber:!0,Color:!1,Bank:!0,CCNote:!0,Type:!1},S={...o,BankAccountName:!0,BankAccountOwner:!0,BankAccountIBAN:!0,BankAccountBIC:!0,BankAccountBank:!0},v=e=>Object.keys(e).filter((t=>!!e[t])),E={KWAddress:v(h),KWAuthCategory:v({Attachments:!1,CategoryName:!0}),KWAuthentifiant:v(a),KWBankStatement:v(S),KWCollection:v({Attachments:!1,Name:!0,VaultItems:!0}),KWCompany:v(m),KWDataChangeHistory:[],KWDriverLicence:v(g),KWEmail:v(c),KWFiscalStatement:[],KWGeneratedPassword:[],KWIDCard:v(s),KWIdentity:v(l),KWMerchand:[],KWMiscData:[],KWPasskey:v(d),KWPassport:v(p),KWPaymentMean_creditCard:v(y),KWPaymentMean_paypal:[],KWPersonalWebsite:v(f),KWPhone:v(u),KWPurchaseAccount:[],KWPurchaseCategory:[],KWPurchasePaidBasket:[],KWPurchaseTrueArticle:[],KWSecureFileInfo:[],KWSecureNote:v(i),KWSecureNoteCategory:v({Attachments:!1,CategoryName:!0}),KWSecurityBreach:[],KWSettingsManagerApp:[],KWSocialSecurityStatement:[],KWWebSite:[]};t.getUniqueVaultItemIdentifier=e=>((e,t)=>{const r={};return e.forEach((e=>{r[e]=t[e]??""})),(0,n.isEmpty)(r)?"":JSON.stringify(r)})(E[e.kwType],e)},20485:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importPersonalDataItems=void 0;const n=r(53576),o=r(72678),a=r(13675),i=r(78163),s=r(90537),c=r(72883),u=r(88655),l=r(23136),d=r(10203),p=r(92310);t.importPersonalDataItems=async(e,t)=>{const{storeService:r,sessionService:f,localStorageService:g,applicationModulesAccess:m}=e,h=r.getState(),y=new Set,S=t.length,v=(0,l.getDebounceSync)(r,f);let E=0,A=0,_=0;const b=Object.entries(h.userSession.personalData).filter((([e])=>(0,c.isDataKeyVaultItem)(e))).reduce(((e,[t,r])=>({...e,[t]:r})),{});for(const e of Object.values(b))e.forEach((e=>{if((0,n.isDataModelObject)(e)){const t=(0,s.getUniqueVaultItemIdentifier)(e);t&&y.add(t)}}));const T=[];t.filter(u.isImportableDataModelObject).forEach((e=>{const t=(0,a.sanitizeInputPersonalData)((0,u.convertImportable)(e));y.has((0,s.getUniqueVaultItemIdentifier)(t))||T.push(t)})),_=S-T.length;const I=(0,u.groupByType)(T),w=(I.get(n.DataModelType.KWAuthentifiant)||[]).filter(n.isCredential),C=(0,u.makeCategoryIdMaps)(t,(0,o.personalDataSelector)(h));await Promise.all(w.map((e=>(0,u.prepareCredentialForImport)(e,C))));const O=(I.get(n.DataModelType.KWSecureNote)||[]).filter(n.isNote).map(u.prepareSecureNoteForImport);I.set(n.DataModelType.KWAuthentifiant,w),I.set(n.DataModelType.KWSecureNote,O);for(const[e,t]of I.entries())if((0,u.savePersonalDataItemsForImport)({storeService:r,sessionService:f,localStorageService:g,applicationModulesAccess:m},e,t),e!==n.DataModelType.KWCollection&&(E+=t.length),e===n.DataModelType.KWAuthentifiant&&(0,i.hasVaultAuditLogsFFActivated)(r)){const e=(0,p.currentTeamIdSelector)(h);A=t.filter((t=>t.SpaceId===e)).length,A>=1&&await(0,i.computeAndSendCSVImportAuditLog)(m,{domainUrl:null,importCount:A})}return v({immediateCall:!0},d.Trigger.Save),{successCount:E,totalCount:S,duplicateCount:_}}},88655:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.savePersonalDataItemsForImport=t.groupByType=t.prepareSecureNoteForImport=t.makeCategoryIdMaps=t.prepareCredentialForImport=t.convertImportable=t.isImportableDataModelObject=void 0;const n=r(53576),o=r(48313),a=r(56915),i=r(73566),s=r(85225),c=r(47408),u=r(23439),l=r(47975),d=r(78320),p=r(28207),f=r(57289),g=r(89438),m=r(70252),h=r(16530);t.isImportableDataModelObject=e=>(0,n.isDataModelObject)({SpaceId:"",...e}),t.convertImportable=e=>({...e,Id:e.Id?e.Id:(0,d.generateItemUuid)(),AnonId:(0,d.generateItemUuid)(),SpaceId:e.SpaceId??""}),t.prepareCredentialForImport=async(e,t)=>{e.Category=t.get(e.Category)??"",e.Strength=e.Password?await(0,l.evaluatePasswordStrength)(e.Password):0},t.makeCategoryIdMaps=(e,t)=>{const r=new Map;for(const o of e)if((0,n.isCredentialCategory)(o)){const e=(0,u.getCategoryIdByName)(t,o.CategoryName);e&&r.set(o.Id,e)}return r},t.prepareSecureNoteForImport=e=>{const t=(0,c.getUnixTimestamp)();return{...e,CreationDatetime:t,LocaleFormat:n.Country.US,UserModificationDatetime:t,LastBackupTime:0,Title:e.Title??`Untitled - ${t.toLocaleString()}`,Content:e.Content??"",Category:e.Category??"noCategory",Secured:e.Secured??!1,Type:n.NoteTypes.includes(e.Type)?e.Type:"GRAY",Attachments:e.Attachments??[]}},t.groupByType=e=>{const t=new Map;for(const r of e)t.has(r.kwType)||t.set(r.kwType,new Array),t.get(r.kwType).push(r);return t},t.savePersonalDataItemsForImport=({storeService:e,sessionService:t,localStorageService:r,applicationModulesAccess:c},u,l)=>{if(!l.length)return;const d=e.getPersonalData(),y=l.reduce(((t,r)=>{let o;return(0,i.isChangeHistoryCandidate)(r)&&(o=(0,i.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:d,change:(0,s.makeUpdateChange)(r),userLogin:e.getUserLogin(),platformInfo:(0,a.platformInfoSelector)(e.getState())})),{changeHistories:[...t.changeHistories,...o?[o]:[]],credentialIds:[...t.credentialIds,...(0,n.isCredential)(r)?[r.Id]:[]]}}),{changeHistories:[],credentialIds:[]});e.dispatch((0,o.savePersonalDataItems)(l,u,y.changeHistories)),t.getInstance().user.persistPersonalData(),(async(e,t,r,n)=>{if(!n.length)return;const o=e.getPersonalFeatures().features.ims_web_ph_mv3_dev;try{if(o){const{commands:e}=r.createClients().vaultItemsCrud;await e.emitTemporaryVaultItemEvent({ids:[...n],eventType:h.EventType.Created})}if(n.length>50){const r=e.getState(),a=t.getInstance();if(!o){const t=await(0,f.computeAllHealthState)(r),n=(0,g.healthStateUpdated)(t);e.dispatch(n),await a.storeHealth(t),await a.storeHealthWasComputed(!0)}p.carbonEventHooks.iconsUpdates({type:"credentialUpdates",credentialIds:n})}else o||p.carbonEventHooks.healthUpdates({type:"credentialUpdates",credentialIds:n}),p.carbonEventHooks.iconsUpdates({type:"credentialUpdates",credentialIds:n})}catch(e){const t=new Error(`Failed to handle health & credential health updates with ${e}`);return void(0,m.sendExceptionLog)({error:t})}})(e,r,c,y.credentialIds)}},43691:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeImportService=void 0;const n=r(53576),o=r(10203),a=r(38250),i=r(56915),s=r(17825),c=r(66102),u=r(3343),l=r(56242),d=r(29613),p=r(61655),f=r(20485),g=r(99474),m=r(32814),h={[a.ImportFormats.Csv]:o.BackupFileType.Csv,[a.ImportFormats.Dash]:o.BackupFileType.SecureVault},y={[a.ImportFormats.Csv]:o.ImportSource.SourceOther,[a.ImportFormats.Dash]:o.ImportSource.SourceDash};t.makeImportService=e=>{const{storeService:t}=e;return{previewPersonalDataArchive:e=>(async(e,t)=>{const r=(0,i.platformInfoSelector)(e.getState());switch(t.format){case a.ImportFormats.Csv:{const o=(0,g.getImportablePersonalData)(e,t.content,n.Country[r.country]);return 0===o.items.length?{success:!1,error:a.PreviewPersonalDataErrorType.InvalidFormat}:{success:!0,data:{items:o.items,headers:o.headers}}}case a.ImportFormats.Dash:{const r=(0,m.parseDashData)(t.content.data);return await(0,m.checkPassword)(e,r,t.password)?{success:!0,data:{items:(await(0,m.getSaveEventsFromDash)(e,r,t.password)).map((e=>({baseDataModel:e,rawData:{}}))),headers:[]}}:{success:!1,error:a.PreviewPersonalDataErrorType.BadPassword}}}(0,s.assertUnreachable)(t)})(t,e),canDoImport:()=>(0,d.isImportPersonalDataAvailableSelector)(t.getState()),importPersonalDataItems:t=>(0,f.importPersonalDataItems)(e,t),onNewState:e=>t.dispatch((0,p.notifyNewImportPersonalDataStateAction)(e)),waitReady:async()=>{await(0,l.importPersonalDataState$)()(t.getState$()).pipe((0,u.first)((e=>e.status!==a.ImportPersonalDataStateType.Processing))).toPromise()},log:async({format:t,success:r})=>{await(0,c.logEvent)(e,{event:new o.UserImportDataEvent({backupFileType:h[t],importDataStatus:r?o.ImportDataStatus.Success:o.ImportDataStatus.FailureDuringImport,importSource:y[t],importDataStep:o.ImportDataStep.Success})})}}}},92522:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKeeperImportHeaders=void 0,t.getKeeperImportHeaders=e=>{const t=["Folder","Title","Login","Password","Website Address","Notes","Shared Folder"],r=Math.max(0,e-t.length);return r&&t.push(...[...Array(r).keys()].map(((e,t)=>`Custom ${t+1}`))),t}},85803:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fieldProcessorForLastPass=t.itemTypeProcessorForLastPass=t.processAndPushLastPassNote=t.parseLastPassSecureNote=t.LPNoteTypeField=t.LastPassNoteType=t.LAST_PASS_SECURE_NOTE_URL=void 0;const n=r(53576),o=r(25424),a=r(97437),i=r(38959);var s,c;t.LAST_PASS_SECURE_NOTE_URL="http://sn",function(e){e.BankAccountType="Bank Account",e.PaymentCardType="Credit Card"}(t.LastPassNoteType||(t.LastPassNoteType={})),t.LPNoteTypeField={NoteType:"NoteType"},function(e){e.BankName="Bank Name",e.AccountType="Account Type",e.RoutingNumber="Routing Number",e.AccountNumber="Account Number",e.SWIFTCode="SWIFT Code",e.IBANNumber="IBAN Number",e.Pin="Pin",e.BranchAddress="Branch Address",e.BranchPhone="BranchPhone",e.Notes="Notes"}(s||(s={})),function(e){e.NameOnCard="Name on Card",e.Type="Type",e.Number="Number",e.SecurityCode="Security Code",e.StartDate="Start Date",e.ExpirationDate="Expiration Date",e.Notes="Notes",e.Language="Language"}(c||(c={})),t.parseLastPassSecureNote=e=>{const r={};try{switch(e.split("\n").forEach((e=>{const[t,n]=e.split(":");r[t]=n})),r.NoteType){case"Bank Account":return{type:"Bank Account",data:{BankAccountName:r["Bank Name"],BankAccountOwner:"",BankAccountIBAN:r["IBAN Number"]?r["IBAN Number"]:r["Account Number"],BankAccountBIC:r["SWIFT Code"]?r["SWIFT Code"]:r["Routing Number"],BankAccountBank:"",kwType:n.DataModelType.KWBankStatement}};case"Credit Card":{const e=r["Expiration Date"];let a,i;if(e){const[t,r]=e.split(",");a=`${(0,o.getMonth)(new Date(`${t} 1`))+1}`,a=a.length<=2?a:"",i=4!==r.length||isNaN(r)?"":r}const s={CardNumber:r.Number,OwnerName:r["Name on Card"],SecurityCode:r["Security Code"],ExpireMonth:a,ExpireYear:i,CCNote:r.Notes,kwType:n.DataModelType.KWPaymentMean_creditCard};delete r[t.LPNoteTypeField.NoteType],delete r["Expiration Date"],delete r.Language,r["Payment Type"]=r.Type,delete r[t.LPNoteTypeField.NoteType];const c=Object.keys(s),u=Object.values(s);return Object.keys(r).forEach((e=>{(c.includes(e)||u.includes(r[e]))&&delete r[e]})),{type:"Credit Card",data:{...r,...s}}}default:return null}}catch{return null}},t.processAndPushLastPassNote=(e,r,n,o,s)=>{if(e.url?.includes(t.LAST_PASS_SECURE_NOTE_URL)){delete e.url;const c=(0,t.parseLastPassSecureNote)(e.extra),u="Bank Account"===c?.type?a.BANK_ACCOUNT_HEADERS:"Credit Card"===c?.type?a.PAYMENT_CARD_HEADERS:a.SECURE_NOTES_HEADERS;switch(Object.keys(c?.data??{}).forEach((e=>{const t=Object.keys(u).find((t=>u[t].has(e.toLocaleLowerCase())));!s.has(e)&&e&&s.set(e,{original:e,matched:t??""})})),c?.type){case"Bank Account":{const t={baseDataModel:(0,i.buildBankAccountObj)(c.data,r,s),rawData:e};return void o.bankAccounts.push(t)}case"Credit Card":{const t={baseDataModel:(0,i.buildPaymentCardObj)(c.data,r,s,n),rawData:e};return void o.paymentCards.push(t)}default:{const t={baseDataModel:(0,i.buildNoteObj)(e,r,s),rawData:e};return void o.notes.push(t)}}}},t.itemTypeProcessorForLastPass=e=>{if(e.url?.includes(t.LAST_PASS_SECURE_NOTE_URL)){const r=e.extra.split("\n");let n="";for(let e=0;e<r.length;e++){const[o,a]=r[e]?r[e].split(":"):[];o===t.LPNoteTypeField.NoteType&&(n=a)}switch(n){case"Bank Account":return a.SupportedVaultTypes.BANK_ACCOUNT;case"Credit Card":return a.SupportedVaultTypes.PAYMENT_CARD;default:return a.SupportedVaultTypes.NOTE}}return null},t.fieldProcessorForLastPass=(e,t)=>{switch(e){case"fav":if(!t||t.includes("0"))return null;break;case"grouping":if(!t||t.includes("(none)"))return null}return t}},53669:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getItemTypeProcessor=t.getFieldLevelProcessor=void 0;const n=r(38250),o=r(85803),a=(e,t)=>{switch(e){case"Title":case"title":return null}return t},i=(e,t)=>{switch(e){case"reprompt":if(t.includes("0"))return null;break;case"name":if("--"===t)return null;break;case"type":return null}return t};t.getFieldLevelProcessor=e=>{switch(e){case n.ImportSource.Safari:return a;case n.ImportSource.Bitwarden:return i;case n.ImportSource.Lastpass:return o.fieldProcessorForLastPass;default:return null}},t.getItemTypeProcessor=e=>e===n.ImportSource.Lastpass?o.itemTypeProcessorForLastPass:null},99474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getImportablePersonalData=t.parseCSV=t.secureUrl=void 0;const n=r(17509),o=r(83195),a=r(16516),i=r(38250),s=r(51504),c=r(92522),u=r(85803),l=r(38959),d=r(97437),p=r(10770);function f(e,t,r,n){const o={baseDataModel:(0,l.buildNoteObj)(e,t,r),rawData:e};n.notes.push(o)}function g(e,t,r,n){const o={baseDataModel:(0,l.buildBankAccountObj)(t,e,n),rawData:t};r.bankAccounts.push(o)}function m(e,t,r,n,o){const a={baseDataModel:(0,l.buildPaymentCardObj)(t,e,o,r),rawData:t};n.paymentCards.push(a)}function h(e,r,a,i,s,c,u){const d={baseDataModel:(0,l.buildCredentialObj)(e,r,a,i,s),rawData:e};c&&d.baseDataModel.Category&&d.baseDataModel.Category.split(",").forEach((t=>{const r=u.collections.find((e=>e.baseDataModel.Name===t));if(r)r.baseDataModel.VaultItems.push({Id:d.baseDataModel.Id,Type:d.baseDataModel.kwType});else{const r={Name:d.baseDataModel.Category,baseDataModel:(0,p.getNewCollection)({name:t,vaultItems:[],spaceId:""}),rawData:e};u.collections.push(r),r.baseDataModel.VaultItems=[...r.baseDataModel.VaultItems,{Id:d.baseDataModel.Id,Type:d.baseDataModel.kwType}]}})),d.baseDataModel.Url&&(0,n.isUrl)(d.baseDataModel.Url)&&(d.baseDataModel.Url=s?new o.ParsedURL(d.baseDataModel.Url).getPIIStrippedURL():(0,t.secureUrl)(d.baseDataModel.Url)),u.credentials.push(d)}t.secureUrl=(0,a.compose)(n.omitCredentialsFromUrl,n.omitQueryStringFromUrl);const y=(e,t,r,n,o,a)=>{const s={credentials:[],notes:[],bankAccounts:[],paymentCards:[],collections:[]},c=new Map;for(let p=0;p<e.length;p++){const y=e[p].reduce(((e,r,n)=>(e[t[n]]=r,e)),{}),S=(0,l.determineBestItemType)(y,r);if((0,l.getHeadersAndIndexMap)(t,S).forEach((e=>{(!c.has(e.original)||!c.get(e.original)?.matched&&e.matched)&&c.set(e.original,e)})),[d.SupportedVaultTypes.BANK_ACCOUNT,d.SupportedVaultTypes.NOTE,d.SupportedVaultTypes.PAYMENT_CARD].includes(S)&&r===i.ImportSource.Lastpass)(0,u.processAndPushLastPassNote)(y,r,a,s,c);else switch(S){case d.SupportedVaultTypes.CREDENTIAL:h(y,r,c,a,n,o,s);break;case d.SupportedVaultTypes.PAYMENT_CARD:m(r,y,a,s,c);break;case d.SupportedVaultTypes.BANK_ACCOUNT:g(r,y,s,c);break;case d.SupportedVaultTypes.NOTE:default:f(y,r,c,s)}}return{...s,headers:[...c.values()]}};function S(e,t,r,n,o){const a={credentials:[],notes:[],paymentCards:[],bankAccounts:[],headers:[],collections:[]};if(!e)return a;const{csvHead:s,csvRows:u}=function(e,t){const r=/(,|\r?\n|\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^,\r\n]*))/gi,n=[[]];let o;for(;o=r.exec(e.trim());)o[1].length&&","!==o[1]&&n.push([]),n[n.length-1].push(void 0!==o[2]?o[2].replace(new RegExp('^"|"$|"(?=,")|(?<=",)"',"gi"),'"'):o[3]);if(t===i.ImportSource.Keeper){const e=n.reduce(((e,t)=>Math.max(e,t.length)),0);n.unshift((0,c.getKeeperImportHeaders)(e))}const[a,...s]=n;return{csvHead:a,csvRows:s}}(e,t),d=s.map((e=>e.toLowerCase()));return u.length&&(0,l.areHeadersValid)(d)?y(u,d,t,r,n,o):a}t.parseCSV=S,t.getImportablePersonalData=(e,t,r)=>{const n=e.getState(),o=n.userSession.personalFeatures.features[s.NEW_URL_PARSER_FF]||n.userSession.personalFeatures.features[s.NEW_URL_PARSER_FF_PROD],a=n.userSession.personalFeatures.features.vault_web_collection_labelling_prod||n.userSession.personalFeatures.features.vault_web_collection_labelling_dev,i=S(t.data,t.importSource,o,a,r),{headers:c,...u}=i;return{headers:c,items:Object.values(u).flat()}}},32814:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSaveEventsFromDash=t.getXmlData=t.checkPassword=t.parseDashData=void 0;const n=r(80469),o=r(53628),a=r(56668),i=r(72365),s=r(61797),c=r(95623),u=r(70252),l=e=>new RegExp(`-+\\s+${e} BEGIN\\s+-+\n(.+)\n-+\\s+${e} END`);t.parseDashData=e=>{const[t,r]=["Id","Data"].map(l).map((t=>t.exec(e))).map((e=>e[1]));return{ids:t.split(";"),encryptedData:r}},t.checkPassword=async(e,t,r)=>{const n=(0,i.makeDataEncryptorService)(e);n.setInstance({raw:r},"");try{return(0,a.deflatedUtf8ToUtf16)(await n.getInstance().decrypt(t.encryptedData)),!0}catch(e){const r=`[import] - checkPassword: ${e}, ${t.encryptedData}`,n=new Error(r);(0,u.sendExceptionLog)({error:n}),(0,c.logError)(n)}return!1},t.getXmlData=async(e,t,r)=>{const n=(0,i.makeDataEncryptorService)(e);n.setInstance({raw:r},"");const o=await n.getInstance().decrypt(t.encryptedData),c=(0,a.deflatedUtf8ToUtf16)(o),u=await(0,s.parseDashlaneXml)(c);return Array.isArray(u)?u:[u]},t.getSaveEventsFromDash=async(e,r,a)=>(await(0,t.getXmlData)(e,r,a)).map((e=>(0,o.fixPersonalDataItemFromExternalSource)((0,n.fixKwType)(e))))},97437:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE_MAPPINGS=t.TYPE_HEADERS=t.HEADER_MAPPINGS=t.BANK_ACCOUNT_HEADERS=t.PAYMENT_CARD_HEADERS=t.CREDENTIAL_HEADERS=t.SECURE_NOTES_HEADERS=t.SupportedVaultTypes=void 0,function(e){e.CREDENTIAL="credentials",e.NOTE="notes",e.PAYMENT_CARD="paymentCards",e.BANK_ACCOUNT="bankAccounts",e.COLLECTION="collections"}(r=t.SupportedVaultTypes||(t.SupportedVaultTypes={})),t.SECURE_NOTES_HEADERS={Title:new Set(["title","name"]),Content:new Set(["note","notes","comments","extra","content"])},t.CREDENTIAL_HEADERS={Title:new Set(["title","name","account","site name"]),Login:new Set(["username","login","login_username","login name","user name"]),Url:new Set(["url","website","domain","login_url","login url","login_uri","web site","website address"]),Email:new Set(["email"]),Password:new Set(["password","login_password"]),OtpSecret:new Set(["otpauth","otp","login_totp","totp","login_otp","otpsecret"]),Note:new Set(["note","notes","comments","extra"]),Category:new Set(["category","grouping","tags","folders","folder"])},t.PAYMENT_CARD_HEADERS={CardNumber:new Set(["number","cardnumber"]),CCNote:new Set(["notes","ccnote"]),OwnerName:new Set(["name on card","ownername"]),SecurityCode:new Set(["security code","securitycode"]),ExpireMonth:new Set(["exp_month","expiremonth"]),ExpireYear:new Set(["exp_year","expireyear"])},t.BANK_ACCOUNT_HEADERS={BankAccountName:new Set(["bank name","bankaccountname"]),BankAccountIBAN:new Set(["iban number","account number","bankaccountiban"]),BankAccountBIC:new Set(["swift code","routing number","bankaccountbic"])},t.HEADER_MAPPINGS={[r.CREDENTIAL]:t.CREDENTIAL_HEADERS,[r.NOTE]:t.SECURE_NOTES_HEADERS,[r.PAYMENT_CARD]:t.PAYMENT_CARD_HEADERS,[r.BANK_ACCOUNT]:t.BANK_ACCOUNT_HEADERS,[r.COLLECTION]:{}},t.TYPE_HEADERS=new Set(["type","item type"]),t.TYPE_MAPPINGS={[r.NOTE]:["securenote","note","secure note"],[r.CREDENTIAL]:["password","login","credential"],[r.BANK_ACCOUNT]:["bankaccount","bank"],[r.PAYMENT_CARD]:["paymentcard","creditcard","debitcard"],[r.COLLECTION]:[]}},38959:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areHeadersValid=t.determineBestItemType=t.getHeadersAndIndexMap=t.buildCredentialObj=t.buildBankAccountObj=t.buildPaymentCardObj=t.buildNoteObj=t.reduceVaultObj=t.constructBankAccount=t.constructPaymentCard=t.constructSecureNote=t.constructCredentialContent=t.buildNoteContent=void 0;const n=r(53576),o=r(17509),a=r(11814),i=r(9763),s=r(23439),c=r(35834),u=r(49293),l=r(8639),d=r(97437),p=r(53669),f=r(83195),g=r(99474);t.buildNoteContent=(e,t,r,o,a)=>{let i="";if((0,n.isCredential)(e))i=e.Note;else if((0,n.isNote)(e))e.Note&&(e.Content=e.Note,delete e.Note),i=e.Content;else{if(!(0,n.isPaymentCard)(e))return;i=e.CCNote}const s=!!i;let c=!1;const u={...e,...r};for(const e in u)o.includes(e)||t.get(e)?.matched||!u[e]||(a?a(e,u[e]):u[e])&&(i+=`${s&&!c?"\n\n\n":"\n"}${e}: ${u[e]}`,c=!0);i=i.trim(),(0,n.isCredential)(e)?e.Note=i:(0,n.isNote)(e)?e.Content=i:(0,n.isPaymentCard)(e)&&(e.CCNote=i)},t.constructCredentialContent=(e,t,r)=>({Title:"",Email:"",Login:"",Password:"",Note:"",...e,...(0,i.createBaseCredentialModel)(t),...(0,s.getUrlFields)(e.Url,!0),SpaceId:r??"",SubdomainOnly:!1,SecondaryLogin:"",Category:"",AutoLogin:!0,AutoProtected:!1,Strength:0}),t.constructSecureNote=(e,t)=>(0,u.noteFormatter)({content:e.Content||"",title:e.Title||"",category:"",secured:!1,type:void 0,spaceId:t||""}),t.constructPaymentCard=(e,t)=>(0,c.getNewPaymentCard)({ownerName:e.OwnerName,cardName:e.Name,cardNumber:e.CardNumber,securityCode:e.SecurityCode,expireMonth:e.ExpireMonth,expireYear:e.ExpireYear,...e,spaceId:t}),t.constructBankAccount=(e,t,r)=>(0,l.getNewBankAccount)({name:e.BankAccountName,owner:e.BankAccountOwner,IBAN:e.BankAccountIBAN,BIC:e.BankAccountBIC,bank:e.BankAccountBank,country:t,...e,spaceId:r}),t.reduceVaultObj=(e,r,n,o,a,i)=>{const s=(0,p.getFieldLevelProcessor)(n),c=Object.entries(e).reduce(((e,[t,r])=>(a.has(t)&&a.get(t).matched&&(e[a.get(t).matched]=s?s(t,"string"==typeof r?r:""):r),e)),r({},i));(0,t.buildNoteContent)(c,a,e,o,s);for(const e in c)o.includes(e)||delete c[e];return c},t.buildNoteObj=(e,r,o)=>{const a={Title:"",Content:"",Category:"",Secured:!1,Type:"GRAY",LocaleFormat:n.Country.NO_TYPE,AnonId:"",SpaceId:"",kwType:n.DataModelType.KWSecureNote,Id:"",LastBackupTime:0,CreationDate:0,UpdateDate:0,limitedPermissions:!1,CreationDatetime:0,UserModificationDatetime:0,LastUse:0,Attachments:[]},i=Object.keys(a);return(0,t.reduceVaultObj)(e,t.constructSecureNote,r,i,o)},t.buildPaymentCardObj=(e,r,o,a)=>{const i={Name:"",CardNumber:"",CardNumberLastDigits:"",OwnerName:"",SecurityCode:"",ExpireMonth:"",ExpireYear:"",StartMonth:"",StartYear:"",IssueNumber:"",Color:n.PaymentCardColor.SILVER,Bank:"",CCNote:"",Type:n.PaymentCardType.PAYMENT_TYPE_VISA,LocaleFormat:n.Country.NO_TYPE,AnonId:"",SpaceId:"",kwType:n.DataModelType.KWPaymentMean_creditCard,Id:"",LastBackupTime:0,CreationDatetime:0,UserModificationDatetime:0,LastUse:0,Attachments:[]},s=Object.keys(i);return(0,t.reduceVaultObj)(e,t.constructPaymentCard,r,s,o,a)},t.buildBankAccountObj=(e,r,o)=>{const a={BankAccountName:"",BankAccountOwner:"",BankAccountIBAN:"",BankAccountBIC:"",BankAccountBank:"",LocaleFormat:n.Country.NO_TYPE,AnonId:"",SpaceId:"",kwType:n.DataModelType.KWBankStatement,Id:"",LastBackupTime:0,CreationDatetime:0,UserModificationDatetime:0,LastUse:0,Attachments:[]},i=Object.keys(a);return(0,t.reduceVaultObj)(e,t.constructBankAccount,r,i,o)},t.buildCredentialObj=(e,r,i,s,c)=>{const u={Title:"",Email:"",Login:"",SecondaryLogin:"",Password:"",Strength:0,Category:"",Url:"",UseFixedUrl:!1,TrustedUrlGroup:[],LocaleFormat:n.Country.NO_TYPE,AnonId:"",SpaceId:"",kwType:n.DataModelType.KWAuthentifiant,Id:"",LastBackupTime:0,CreationDatetime:0,LastUse:0,Note:"",SubdomainOnly:!1,AutoLogin:!1,AutoProtected:!1,OtpSecret:"",UserSelectedUrl:"",Checked:!1,Status:"ACCOUNT_NOT_VERIFIED",SharedObject:!1,ModificationDatetime:0,NumberUse:0,Type:"WEB",Server:"",Port:"",Alias:"",SID:"",ConnectionOptions:"",domainIcon:void 0,limitedPermissions:!1,LinkedServices:{associated_domains:[],associated_android_apps:[]},UserModificationDatetime:0,Attachments:[],OtpUrl:""},l=Object.keys(u),d=(0,t.reduceVaultObj)(e,t.constructCredentialContent,r,l,i,s);return((e,t)=>{let r=e.Url;if(!(0,o.isUrl)(e.Url)&&e.Url.includes(",")){const[a,...i]=e.Url.split(",");r=a,e.LinkedServices={associated_domains:[]},i.forEach((r=>{let a="";a=t?new f.ParsedURL(r).getPIIStrippedURL():(0,g.secureUrl)(r),(0,o.isUrl)(a)&&e.LinkedServices.associated_domains.push({domain:a,source:n.LinkedWebsiteSource.Manual})}))}e.Url=(0,o.isUrl)(r)?r:"",e.Title&&!(0,o.isUrl)(e.Title)||(e.Title=a.url.getDomainForUrl(r)??"")})(d,c),d},t.getHeadersAndIndexMap=(e,t)=>{const r=((e,t)=>{const r=Object.keys(t),n={};return e.forEach(((e,o)=>{const a=r.find((r=>t[r].has(e)));n[a??e]={supported:!!a,index:o}})),n})(e,d.HEADER_MAPPINGS[t]),n=Object.entries(r).reduce(((e,[t,r])=>({...e,[r.index]:r.supported?t:""})),{});return e.map(((e,t)=>({original:e,matched:n[t]??""})))},t.determineBestItemType=(e,t)=>{let r=null;const n=(0,p.getItemTypeProcessor)(t);if(n&&(r=n(e)),!r){for(const t in e)if(d.TYPE_HEADERS.has(t)&&(r=Object.keys(d.TYPE_MAPPINGS).find((r=>d.TYPE_MAPPINGS[r]?.includes(e[t].toLocaleLowerCase()))),r))break;if(!r){const t=Object.keys(e).map((e=>e.toLocaleLowerCase())),n={};Object.entries(d.HEADER_MAPPINGS).forEach((([r,o])=>{Object.values(o).forEach((o=>{n[r]=(n[r]||0)+[...o].filter((r=>t.includes(r)&&e[r])).length}))})),r=Object.keys(n).reduce(((e,t)=>n[e]>n[t]?e:t))}}return r||d.SupportedVaultTypes.NOTE},t.areHeadersValid=e=>{if(!e.length)return!1;const t=Object.values(d.HEADER_MAPPINGS);return Object.values(t).reduce(((e,t)=>[...e,...Object.values(t).map((e=>Array.from(e)))]),[]).flat().some((t=>e.includes(t)))}},61655:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notifyNewImportPersonalDataStateAction=t.NOTIFY_NEW_PERSONAL_DATA_STATE=void 0,t.NOTIFY_NEW_PERSONAL_DATA_STATE="NOTIFY_NEW_PERSONAL_DATA_STATE",t.notifyNewImportPersonalDataStateAction=e=>({type:t.NOTIFY_NEW_PERSONAL_DATA_STATE,newState:e})},36784:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImportDataStateReducer=void 0;const n=r(38250),o=r(61655);t.ImportDataStateReducer=(e,t)=>t.type===o.NOTIFY_NEW_PERSONAL_DATA_STATE?{state:t.newState}:e??{state:{status:n.ImportPersonalDataStateType.Idle}}},15171:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateLinkedWebsitesHandler=t.areStringListsEquivalent=void 0;const n=r(53576),o=r(95623),a=r(70252),i=r(19736),s=r(88779),c=r(16298),u=r(6205);t.areStringListsEquivalent=(e,t)=>e.length===t.length&&e.sort().join("")===t.sort().join("");const l=(e,t,r)=>{var o;return[...(e.LinkedServices?.associated_domains??[]).filter((e=>r.includes(e.domain))),...(o=t,r.filter((e=>!o.includes(e))).map((e=>({domain:e,source:n.LinkedWebsiteSource.Manual}))))]};t.updateLinkedWebsitesHandler=async function(e,r){const{storeService:n,sessionService:d,eventLoggerService:p,applicationModulesAccess:f}=e,g=n.getState(),m=(0,i.credentialSelector)(g,r.credentialId),h=(0,u.getUserAddedLinkedWebsiteDomains)(m),y=(e=>[...new Set(e)].filter(Boolean))(r.updatedLinkedWebsitesDomainList);if((0,t.areStringListsEquivalent)(h,y))return{success:!0};const S=0===y.length?[]:l(m,h,y),v={...m.LinkedServices,associated_domains:S},E={id:r.credentialId,update:{linkedServices:v}};try{return await(0,s.updateCredential)({storeService:n,sessionService:d,eventLoggerService:p,applicationModulesAccess:f},E),{success:!0}}catch(e){const t=new Error(`[LinkedWebsites] - updateLinkedWebsitesHandler: ${e}`);return(0,o.logError)(t),(0,a.sendExceptionLog)({error:t}),{success:!1,error:c.UpdateLinkedWebsitesError.CredentialUpdateError}}}},6205:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserAddedLinkedWebsitesRootDomains=t.getUserAddedLinkedWebsiteDomains=t.getDashlaneDefinedLinkedWebsites=t.populateDashlaneDefinedLinkedWebsitesIndex=t.reduceLinkedDomainsLists=t.fromObjectToArray=void 0;const n=r(17030),o=r(32508),a=r(83036),i=r(17509),s=r(83195);function c(e){const t=[];return Object.keys(e).forEach((r=>{t.push([r].concat(e[r]))})),t}t.fromObjectToArray=c;const u=(e,t)=>{const r=[],n=[];e.forEach((e=>{return o=t,e.some((e=>o.includes(e)))?r.push(e):n.push(e);var o}));const o=r.concat([t]).flat();return n.concat([o])};function l(e){const t={};return e.forEach((e=>{e.forEach((r=>{t[r]=e}))})),t}t.reduceLinkedDomainsLists=(e,t,r)=>e.concat(t,r).reduce(u,[]),t.populateDashlaneDefinedLinkedWebsitesIndex=l;const d=l((0,t.reduceLinkedDomainsLists)(n,c(a),c(o)).map((e=>[...new Set(e)])));t.getDashlaneDefinedLinkedWebsites=function(e){const t=(0,i.getParsedUrl)(e).rootDomain;return t?d[t]||[t]:[]},t.getUserAddedLinkedWebsiteDomains=e=>(e.LinkedServices?.associated_domains??[]).map((e=>e.domain)).filter(Boolean)??[],t.getUserAddedLinkedWebsitesRootDomains=(e,r)=>(0,t.getUserAddedLinkedWebsiteDomains)(e).map((e=>r?new s.ParsedURL(e).getRootDomain():(0,i.extractRootDomain)(e)))},16298:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateLinkedWebsitesError=void 0,function(e){e.CredentialUpdateError="credentialUpdateError"}(t.UpdateLinkedWebsitesError||(t.UpdateLinkedWebsitesError={}))},81911:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(18665),o=r(85569),a=r(37215);t.config={commands:{addPasskey:{handler:a.addPasskeyHandler},updatePasskey:{handler:a.updatePasskeyHandler},deletePasskey:{handler:a.deletePasskeyHandler}},queries:{getPasskey:{selector:n.viewedPasskeySelector},getPasskeys:{selector:n.viewedQueriedPasskeysSelector},getPasskeysForDomain:{selector:n.viewedQueriedPasskeysForDomainSelector}},liveQueries:{livePasskey:{operator:o.getPasskey$},livePasskeys:{operator:o.passkeys$}}}},64801:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addPasskeyHandler=t.getNewPasskey=void 0;const n=r(10203),o=r(23136),a=r(48313),i=r(47408),s=r(78320),c=r(70252),u=r(13675),l=r(53576);function d(e){const t=(0,i.getUnixTimestamp)();return{kwType:"KWPasskey",Id:(0,s.generateItemUuid)(),LastBackupTime:0,LastUse:t,LocaleFormat:l.Country.UNIVERSAL,AnonId:(0,s.generateItemUuid)(),SpaceId:"",CreationDatetime:t,UserModificationDatetime:t,Counter:0,CredentialId:e.credentialId,KeyAlgorithm:e.keyAlgorithm,PrivateKey:e.privateKey,RpId:e.rpId,RpName:e.rpName,UserDisplayName:e.userDisplayName,UserHandle:e.userHandle}}t.getNewPasskey=d,t.addPasskeyHandler=async function(e,t){try{return await async function({storeService:e,sessionService:t},r){if(!e.isAuthenticated())throw new Error("No session available to savePasskey");const n=d((0,u.sanitizeInputPersonalData)(r));e.dispatch((0,a.savePersonalDataItem)(n,n.kwType)),t.getInstance().user.persistPersonalData()}(e,t),(0,o.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),{success:!0}}catch(e){return(0,c.sendExceptionLog)({error:e}),{success:!1}}}},20308:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deletePasskeyHandler=void 0;const n=r(10203),o=r(18665),a=r(93301),i=r(23136),s=r(45291),c=r(70252);t.deletePasskeyHandler=function(e,{id:t}){const r=(({storeService:e},t)=>{const r=e.getState();try{if(!e.isAuthenticated())return{success:!1,error:{code:a.DeletePasskeyErrorCode.NOT_AUTHORIZED}};const n=(0,o.passkeySelector)(r,t);if(!n)return{success:!1,error:{code:a.DeletePasskeyErrorCode.NOT_FOUND}};const i=(0,s.removePersonalItem)(n.kwType,n.Id,null);return e.dispatch(i),{success:!0}}catch(e){const t=new Error(`[Passkeys] - deletePasskey: ${e}`);return(0,c.sendExceptionLog)({error:t}),{success:!1,error:{code:a.DeletePasskeyErrorCode.INTERNAL_ERROR}}}})(e,t);return r.success&&(0,i.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve(r)}},37215:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(64801),t),o(r(89979),t),o(r(20308),t)},89979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updatePasskeyHandler=t.getUpdatedPasskey=t.getPasskeyModifiedProperties=void 0;const n=r(10203),o=r(18665),a=r(23136),i=r(48313),s=r(47408),c=r(70252),u=r(13675);function l(e,r){const n=(0,o.passkeySelector)(e,r.id);if(!n)throw new Error("[updatePasskey]: unable to find passkey to update.");return{...n,...(0,t.getPasskeyModifiedProperties)(r)}}t.getPasskeyModifiedProperties=e=>{const t=(0,s.getUnixTimestamp)();return{Counter:e.counter,LastUse:t}},t.getUpdatedPasskey=l,t.updatePasskeyHandler=function(e,t){try{const r=function({storeService:e,sessionService:t},r){if(!e.isAuthenticated())throw new Error("No session available to updatePasskey");const n=l(e.getState(),(0,u.sanitizeInputPersonalData)(r));return e.dispatch((0,i.savePersonalDataItem)(n,n.kwType)),t.getInstance().user.persistPersonalData(),{success:!0}}(e,t);return r.success?((0,a.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve({success:!0})):Promise.resolve(r)}catch(e){return(0,c.sendExceptionLog)({error:e}),Promise.resolve({success:!1})}}},85569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPasskey$=t.passkeys$=void 0;const n=r(18948),o=r(3343),a=r(55220),i=r(18665);t.passkeys$=(0,a.getLivePersonalInfo)(i.getLivePasskeysSelector),t.getPasskey$=e=>{const t=(0,i.getViewedPasskeySelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},62900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPasskeyMappers=void 0;const n=r(83539);t.getPasskeyMappers=()=>({lastUse:n.lastUseMapper,credentialId:e=>e.CredentialId,rpId:e=>e.RpId,rpName:e=>e.RpName,userDisplayName:e=>e.UserDisplayName,id:e=>e.Id})},96664:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passkeyMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234);t.searchGetters=[(0,o.stringProp)("RpId"),(0,o.stringProp)("RpName"),(0,o.stringProp)("CredentialId")],t.passkeyMatch=(0,n.match)(t.searchGetters)},18665:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewedQueriedPasskeysForDomainSelector=t.queryPasskeysByDomainSelector=t.getPasskeysByFullDomainSelector=t.getViewedPasskeySelector=t.viewedPasskeySelector=t.getLivePasskeysSelector=t.viewedQueriedPasskeysSelector=t.queryPasskeysSelector=t.passkeyMappersSelector=t.passkeySelector=t.passkeysSelector=void 0;const n=r(16516),o=r(17509),a=r(96664),i=r(40200),s=r(24589),c=r(63566),u=r(97006),l=r(49551),d=r(32034),p=r(62900),f=r(51319),g=r(83195),m=e=>e.userSession.personalData.passkeys;t.passkeysSelector=m,t.passkeySelector=(e,t)=>{const r=m(e);return(0,l.findDataModelObject)(t,r)},t.passkeyMappersSelector=e=>(0,p.getPasskeyMappers)();const h=()=>a.passkeyMatch;t.queryPasskeysSelector=(0,s.getQuerySelector)(t.passkeysSelector,h,t.passkeyMappersSelector),t.viewedQueriedPasskeysSelector=(0,n.compose)((0,c.viewListResults)(i.listView),t.queryPasskeysSelector),t.getLivePasskeysSelector=(0,u.makeLiveSelectorGetter)(t.passkeysSelector,(()=>i.listView),h,t.passkeyMappersSelector),t.viewedPasskeySelector=(e,r)=>{const n=(0,t.passkeySelector)(e,r);return(0,i.detailView)(n)},t.getViewedPasskeySelector=e=>{const r=(0,d.createSelector)(t.passkeysSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,d.createSelector)(r,i.detailView)},t.getPasskeysByFullDomainSelector=e=>(0,d.createSelector)(t.passkeysSelector,f.hasNewURLParserEnabledSelector,((t,r)=>((e,t,r)=>e.filter((e=>{let n="",a="";return r?(n=new g.ParsedURL(e.RpId).getHostname(),a=new g.ParsedURL(t).getHostname()):(n=(0,o.getParsedUrl)(e.RpId).fullDomain,a=(0,o.getParsedUrl)(t).fullDomain),a===n||a.endsWith(`.${n}`)})))(t,e,r))),t.queryPasskeysByDomainSelector=e=>(0,s.getQuerySelector)((0,t.getPasskeysByFullDomainSelector)(e),h,t.passkeyMappersSelector),t.viewedQueriedPasskeysForDomainSelector=(e,r)=>{const n=(0,t.queryPasskeysByDomainSelector)(r.domain)(e,r);return(0,c.viewListResults)(i.listView)(n)}},93301:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeletePasskeyErrorCode=void 0,function(e){e[e.NOT_AUTHORIZED=0]="NOT_AUTHORIZED",e[e.NOT_FOUND=1]="NOT_FOUND",e[e.INTERNAL_ERROR=2]="INTERNAL_ERROR"}(t.DeletePasskeyErrorCode||(t.DeletePasskeyErrorCode={}))},40200:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.detailView=void 0;const n=r(82043),o=e=>({credentialId:e.CredentialId,privateKey:e.PrivateKey,rpId:e.RpId,rpName:e.RpName,userDisplayName:e.UserDisplayName,userHandle:e.UserHandle}),a=e=>({privateKey:e.PrivateKey,rpId:e.RpId,rpName:e.RpName});t.detailView=e=>({...(0,n.dataModelDetailView)(e),...o(e),counter:e.Counter,keyAlgorithm:e.KeyAlgorithm}),t.itemView=e=>({...(0,n.dataModelItemView)(e),...a(e),counter:e.Counter,credentialId:e.CredentialId,keyAlgorithm:e.KeyAlgorithm,userDisplayName:e.UserDisplayName,userHandle:e.UserHandle}),t.listView=e=>e.map(t.itemView)},68728:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(83449),o=r(47205),a=r(58695);t.config={commands:{saveGeneratedPassword:{handler:o.saveGeneratedPasswordHandler}},queries:{getPasswordHistory:{selector:n.viewedQueriedPasswordHistorySelector},getPasswordHistoryPage:{selector:n.passwordHistoryPageSelector},getPasswordHistoryPaginationToken:{selector:n.passwordHistoryPaginationTokenSelector},getHasPasswordHistory:{selector:n.hasPasswordHistorySelector}},liveQueries:{livePasswordHistory:{operator:a.passwordHistory$},livePasswordHistoryBatch:{operator:a.passwordHistoryBatch$}}}},58695:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passwordHistoryBatch$=t.passwordHistory$=void 0;const n=r(18948),o=r(3343),a=r(83449),i=r(55220),s=r(35893),c=r(33627);t.passwordHistory$=(0,i.getLivePersonalInfo)(a.getLivePasswordHistorySelector),t.passwordHistoryBatch$=e=>{const t=(0,s.parseToken)(e),r=(0,a.getViewedPasswordHistoryBatchSelector)(t);return(0,n.pipe)((0,o.map)(r),(0,o.distinctUntilChanged)(c.sameBatch))}},87644:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPasswordHistoryMappers=void 0,t.getPasswordHistoryMappers=()=>({primaryInfo:e=>e.primaryInfo,timestamp:e=>e.timestamp,type:e=>e.type,id:e=>e.id,credentialId:e=>"credentialId"in e&&e.credentialId||""})},25294:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPasswordHistoryBatch=t.viewPasswordHistoryBatch=t.getPasswordHistoryFirstToken=t.getPasswordHistorySortToken=t.getPasswordHistoryFilterToken=void 0;const n=r(20553),o=r(2104),a=r(16516),i=r(83687),s=r(90451);t.getPasswordHistoryFilterToken=({filterCriteria:e})=>({filterCriteria:e||[]}),t.getPasswordHistorySortToken=({sortCriteria:e})=>({uniqField:"id",sortCriteria:e||[]}),t.getPasswordHistoryFirstToken=(e,t,r,o)=>(0,n.generateFirstToken)(e,t,r.initialBatchSize||30,o),t.viewPasswordHistoryBatch=(e,t,r,n)=>{const a=(0,i.getSharingStatusItem)(t,r),c=(0,s.getIcon)(n);return(0,o.listView)(a,c,e)},t.getPasswordHistoryBatch=(0,a.curry)(((e,t,r)=>(0,n.getBatch)(r,e,t)))},36859:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passwordHistoryItemMatch=t.searchGettersForGeneratedPassword=t.searchGettersForCredential=void 0;const n=r(82234),o=r(95175),a=r(64455),i=r(6205);t.searchGettersForCredential=[(0,n.stringProp)("primaryInfo"),(0,n.stringProp)("domain"),(0,n.stringProp)("email"),(0,n.stringProp)("login"),(0,n.stringProp)("secondaryLogin"),e=>(0,i.getDashlaneDefinedLinkedWebsites)(e.domain).join(" ")],t.searchGettersForGeneratedPassword=[(0,n.stringProp)("primaryInfo")],t.passwordHistoryItemMatch=(e,r)=>r.type===o.PasswordHistoryItemType.Credential?(0,a.match)(t.searchGettersForCredential)(e,r):(0,a.match)(t.searchGettersForGeneratedPassword)(e,r)},83449:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedPasswordHistoryBatchSelector=t.passwordHistoryQuerySelector=t.passwordHistoryPaginationTokenSelector=t.passwordHistoryPageSelector=t.getLivePasswordHistorySelector=t.viewedQueriedPasswordHistorySelector=t.passwordHistoryListViewSelector=t.getPasswordHistoryMappersSelector=t.passwordHistoryMappersSelector=t.hasPasswordHistorySelector=t.passwordHistorySelector=void 0;const n=r(11814),o=r(83195),a=r(32034),i=r(18948),s=r(24589),c=r(92598),u=r(35385),l=r(51319),d=r(36859),p=r(95175),f=r(63566),g=r(25294),m=r(87644),h=r(97006),y=r(35893),S=r(20553),v=r(80993),E=r(91210),A=r(91892),_=e=>"ChangedProperties"in e&&e.ChangedProperties.some((e=>"password"===e.toLowerCase())),b=(0,a.createSelector)(l.credentialsSelector,(e=>e.reduce(((e,t)=>e.set(t.Id,t)),new Map)));t.passwordHistorySelector=(0,a.createSelector)(c.generatedPasswordsSelector,u.credentialsHistoriesSelector,b,E.limitedSharingItemsSelector,l.hasNewURLParserEnabledSelector,((e,t,r,a,i)=>{const s=e.filter((e=>!e.AuthId)).map((e=>({type:p.PasswordHistoryItemType.Generated,primaryInfo:e.Domain??"",secondaryInfo:"",domain:e.Domain,password:e.Password,timestamp:e.GeneratedDate,id:e.Id,isProtected:!1}))),c=t.reduce(((e,t)=>{if(a[t.ObjectId]||!t.hasOwnProperty("ChangeSets"))return e;const s=r.get(t.ObjectId);if(!s)return e;const c=s?.Title,u=s?.Url,l=s?.Email,d=s?.Login,f=s?.AutoProtected||!1,g=t.ChangeSets.reduce(((e,t)=>{if(!_(t)||void 0===(r=t.CurrentData).Email&&void 0===r.Login||void 0===r.Url||void 0===r.Password)return e;var r;const a=i?new o.ParsedURL(u).getRootDomain():n.url.getDomainForUrl(u),g={type:p.PasswordHistoryItemType.Credential,primaryInfo:(c||a)??"",secondaryInfo:(l||d)??"",domain:u||t.CurrentData.Url,password:t.CurrentData.Password,timestamp:t.ModificationDate,id:t.Id,credentialId:s?.Id,isProtected:f,spaceId:s.SpaceId,email:s?.Email??"",login:s?.Login??"",secondaryLogin:s?.SecondaryLogin??""};return e.concat(g)}),[]);return e.concat(g)}),[]);return s.concat(c)})),t.hasPasswordHistorySelector=(e,t)=>{const r=(0,E.limitedSharingItemsSelector)(e);return(0,u.credentialsHistoriesSelector)(e).some((e=>{return e.ObjectId===t&&!((n=e.ObjectId)in r&&r[n])&&e.ChangeSets.filter(_).length>0;var n}))},t.passwordHistoryMappersSelector=e=>(0,m.getPasswordHistoryMappers)();const T=(0,m.getPasswordHistoryMappers)();t.getPasswordHistoryMappersSelector=()=>T;const I=()=>d.passwordHistoryItemMatch,w=(0,s.getQuerySelector)(t.passwordHistorySelector,I,t.passwordHistoryMappersSelector);t.passwordHistoryListViewSelector=(0,a.createSelector)(v.sortedSharedItemIdsSelector,E.limitedSharingItemsSelector,A.iconsSelector,t.passwordHistorySelector,((e,t,r)=>n=>(0,g.viewPasswordHistoryBatch)(n,e,t,r))),t.viewedQueriedPasswordHistorySelector=(e,r)=>{const n=w(e,r),o=(0,t.passwordHistoryListViewSelector)(e);return(0,f.viewListResults)(o)(n)},t.getLivePasswordHistorySelector=(0,h.makeLiveSelectorGetter)(t.passwordHistorySelector,t.passwordHistoryListViewSelector,I,t.getPasswordHistoryMappersSelector),t.passwordHistoryPageSelector=(e,r)=>{const n=(0,y.parseToken)(r),{sortToken:o,filterToken:a}=n,i=(0,m.getPasswordHistoryMappers)(),s=(0,t.passwordHistoryQuerySelector)(e,{sortToken:o,filterToken:a}),c=(0,t.passwordHistoryListViewSelector)(e),u=(0,S.generateNextToken)(i,n,s),l=(0,S.generatePrevToken)(i,n,s),d=(0,S.getBatch)(i,n,s),p=(0,y.stringifyToken)(u),f=(0,y.stringifyToken)(l);return{batch:c(d),nextToken:p,prevToken:f}},t.passwordHistoryPaginationTokenSelector=(e,r)=>{const n=(0,g.getPasswordHistorySortToken)(r),o=(0,g.getPasswordHistoryFilterToken)(r),a=(0,m.getPasswordHistoryMappers)(),i={sortToken:n,filterToken:o},s=(0,t.passwordHistoryQuerySelector)(e,i),c=(0,g.getPasswordHistoryFirstToken)(a,i,r,s);return(0,y.stringifyToken)(c)};const C=(0,a.createSelector)(t.passwordHistorySelector,m.getPasswordHistoryMappers),O=(0,y.createOptimizedSortTokenSelector)(((e,{sortToken:t})=>t),i.identity),D=(0,y.createOptimizedFilterTokenSelector)(((e,{filterToken:t})=>t),i.identity);t.passwordHistoryQuerySelector=(0,a.createSelector)(m.getPasswordHistoryMappers,I,O,D,t.passwordHistorySelector,y.queryData),t.getViewedPasswordHistoryBatchSelector=e=>{const{sortToken:r,filterToken:n}=e,o=(0,g.getPasswordHistoryBatch)(e),i=(0,a.createSelector)((e=>(0,t.passwordHistoryQuerySelector)(e,{filterToken:n,sortToken:r})),C,o),s=(0,y.optimizeBatchSelector)(i);return(0,a.createSelector)(s,v.sortedSharedItemIdsSelector,E.limitedSharingItemsSelector,A.iconsSelector,g.viewPasswordHistoryBatch)}},95175:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordHistoryItemType=void 0,function(e){e.Credential="credential",e.Generated="generated"}(t.PasswordHistoryItemType||(t.PasswordHistoryItemType={}))},2104:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=void 0;const n=r(95175);t.listView=(e,t,r)=>r.map((r=>r.type===n.PasswordHistoryItemType.Credential?{type:n.PasswordHistoryItemType.Credential,id:r.id,primaryInfo:r.primaryInfo,secondaryInfo:r.secondaryInfo,password:r.password,timestamp:r.timestamp,credentialId:r.credentialId,icons:t(r.domain),sharingStatus:e(r.credentialId),isProtected:r.isProtected,spaceId:r.spaceId}:{type:n.PasswordHistoryItemType.Generated,id:r.id,primaryInfo:r.primaryInfo,password:r.password,timestamp:r.timestamp}))},17025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(58235),o=r(7408),a=r(48121);t.config={commands:{addPaymentCard:{handler:a.addPaymentCardHandler},deletePaymentCard:{handler:a.deletePaymentCardHandler},updatePaymentCard:{handler:a.updatePaymentCardHandler}},queries:{getPaymentCard:{selector:n.viewedPaymentCardSelector},getPaymentCards:{selector:n.viewedQueriedPaymentCardsSelector}},liveQueries:{livePaymentCard:{operator:o.getPaymentCard$},livePaymentCards:{operator:o.paymentCards$}}}},42262:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(9092),t)},19738:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addPaymentCardHandler=t.getNewPaymentCard=void 0;const n=r(10203),o=r(53576),a=r(23136),i=r(42316),s=r(48313),c=r(47408),u=r(78320),l=r(70252),d=r(13675),p=r(9092),f=r(79980),g=r(51504);function m(e){e=(0,d.sanitizeInputPersonalData)(e);const t=(0,c.getUnixTimestamp)(),r=(0,i.defaultToEmptyString)(e.cardNumber).replace(/ /g,"");if(!r&&!e.securityCode)throw new i.RequestError("[addPaymentCard]: refusing to add a payment card without card number or security code.",p.PaymentCardSaveResultErrorCode.EMPTY_CARD_NUMBER_AND_SECURITY_CODE);return{kwType:"KWPaymentMean_creditCard",AnonId:(0,u.generateItemUuid)(),Bank:"US-NO_TYPE",CardNumber:r,CardNumberLastDigits:(0,i.getLastDigitsFromCardNumber)(r),CreationDatetime:t,Color:(0,i.defaultToFallbackColor)(e.color),ExpireMonth:(0,i.defaultToEmptyString)(e.expireMonth),ExpireYear:(0,i.defaultToEmptyString)(e.expireYear),Id:(0,u.generateItemUuid)(),IssueNumber:"",Name:(0,i.defaultToEmptyString)(e.name),OwnerName:(0,i.defaultToEmptyString)(e.ownerName),CCNote:(0,i.defaultToEmptyString)(e.personalNote),LocaleFormat:o.Country.US,SecurityCode:(0,i.defaultToEmptyString)(e.securityCode),SpaceId:(0,i.defaultToEmptyString)(e.spaceId),StartYear:"",StartMonth:"",Type:(0,i.getPaymentTypeFromCardNumber)(r),UserModificationDatetime:t,LastBackupTime:0}}t.getNewPaymentCard=m,t.addPaymentCardHandler=function(e,t){try{return function({storeService:e,sessionService:t,eventLoggerService:r},n){if(!e.isAuthenticated())throw new Error("No session available to addPaymentCard");const o=m(n),a=e.getState().userSession.personalFeatures.features[g.NEW_URL_PARSER_FF]||e.getState().userSession.personalFeatures.features[g.NEW_URL_PARSER_FF_PROD];(0,f.logAddVaultItem)(e,r,o,a),e.dispatch((0,s.savePersonalDataItem)(o,o.kwType)),t.getInstance().user.persistPersonalData()}(e,t),(0,a.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve({success:!0})}catch(e){return(0,l.sendExceptionLog)({error:e}),e instanceof i.RequestError&&void 0!==e.code?Promise.resolve({success:!1,error:{code:e.code}}):Promise.resolve({success:!1})}}},37028:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deletePaymentCardHandler=void 0;const n=r(10203),o=r(23136),a=r(58235),i=r(9092),s=r(70252),c=r(45291),u=r(79980),l=r(51504);t.deletePaymentCardHandler=function(e,{id:t}){const r=(({storeService:e,eventLoggerService:t},r)=>{const n=e.getState();try{if(!e.isAuthenticated())return{success:!1,error:{code:i.DeletePaymentCardErrorCode.NOT_AUTHORIZED}};const o=(0,a.paymentCardSelector)(n,r);if(!o)return{success:!1,error:{code:i.DeletePaymentCardErrorCode.NOT_FOUND}};const s=(0,c.removePersonalItem)(o.kwType,o.Id,null);e.dispatch(s);const d=e.getState().userSession.personalFeatures.features[l.NEW_URL_PARSER_FF]||e.getState().userSession.personalFeatures.features[l.NEW_URL_PARSER_FF_PROD];return(0,u.logDeleteVaultItem)(e,t,o,d),{success:!0}}catch(e){const t=new Error(`[PaymentCards] - deletePaymentCard: ${e}`);return(0,s.sendExceptionLog)({error:t}),{success:!1,error:{code:i.DeletePaymentCardErrorCode.INTERNAL_ERROR}}}})(e,t);return r.success&&(0,o.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve(r)}},48121:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(19738),t),o(r(37028),t),o(r(65468),t)},65468:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updatePaymentCardHandler=t.getUpdatedPaymentCard=void 0;const n=r(10203),o=r(58235),a=r(23136),i=r(42316),s=r(48313),c=r(47408),u=r(70252),l=r(13675),d=r(9092),p=r(79980),f=r(51504);function g(e,t){if(!e)throw new i.RequestError("[updatePaymentCard]: unable to find payment card to update.",d.PaymentCardSaveResultErrorCode.NOT_FOUND);t=(0,l.sanitizeInputPersonalData)(t);const r=(0,i.defaultToEmptyString)(t.cardNumber??e.CardNumber).replace(/ /g,""),n=(0,c.getUnixTimestamp)(),o={CardNumber:r,CardNumberLastDigits:(0,i.getLastDigitsFromCardNumber)(r),Color:t.color??e.Color,ExpireMonth:t.expireMonth??e.ExpireMonth,ExpireYear:t.expireYear??e.ExpireYear,Name:t.name??e.Name,OwnerName:t.ownerName??e.OwnerName,SecurityCode:t.securityCode??e.SecurityCode,SpaceId:t.spaceId??e.SpaceId,Type:(0,i.getPaymentTypeFromCardNumber)(r),UserModificationDatetime:n,CCNote:t.personalNote??e.CCNote},a={...e,...o};if(!r&&!a.SecurityCode)throw new i.RequestError("[updatePaymentCard]: refusing to add a payment card without card number or security code.",d.PaymentCardSaveResultErrorCode.EMPTY_CARD_NUMBER_AND_SECURITY_CODE);return a}t.getUpdatedPaymentCard=g,t.updatePaymentCardHandler=function(e,t){try{return function({storeService:e,sessionService:t,eventLoggerService:r},n){if(!e.isAuthenticated())throw new Error("No session available to updatePaymentCard");const a=(0,o.paymentCardSelector)(e.getState(),n.id),i=g(a,n),c=e.getState().userSession.personalFeatures.features[f.NEW_URL_PARSER_FF]||e.getState().userSession.personalFeatures.features[f.NEW_URL_PARSER_FF_PROD];(0,p.logEditVaultItem)(e,r,i,a,c),e.dispatch((0,s.savePersonalDataItem)(i,i.kwType)),t.getInstance().user.persistPersonalData()}(e,t),(0,a.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve({success:!0})}catch(e){return(0,u.sendExceptionLog)({error:e}),e instanceof i.RequestError&&void 0!==e.code?Promise.resolve({success:!1,error:{code:e.code}}):Promise.resolve({success:!1})}}},42316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestError=t.getPaymentTypeFromCardNumber=t.getLastDigitsFromCardNumber=t.defaultColor=t.defaultToFallbackColor=t.defaultToEmptyString=void 0;const n=r(16516),o=r(53576);t.defaultToEmptyString=(0,n.defaultTo)(""),t.defaultToFallbackColor=(0,n.defaultTo)(o.PaymentCardColor.BLUE_1),t.defaultColor="BLUE_1",t.getLastDigitsFromCardNumber=function(e){const r=(0,t.defaultToEmptyString)(e).trim();return r.length>=4?r.slice(-4):""},t.getPaymentTypeFromCardNumber=function(e){if(!e)return o.PaymentCardType.PAYMENT_TYPE_VISA;const t=(e,t)=>t.some((t=>e.startsWith(t)));return e.startsWith("4")?o.PaymentCardType.PAYMENT_TYPE_VISA:t(e,["34","37"])?o.PaymentCardType.PAYMENT_TYPE_AMEX:t(e,["50","51","52","53","54","55"])?o.PaymentCardType.PAYMENT_TYPE_MASTERCARD:t(e,["6011","65"])?o.PaymentCardType.PAYMENT_TYPE_DISCOVER:t(e,["300","301","302","303","304","305","36","38"])?o.PaymentCardType.PAYMENT_TYPE_DINERSCLUB:t(e,["2123","2131","1800","3"])?o.PaymentCardType.PAYMENT_TYPE_JCB:o.PaymentCardType.PAYMENT_TYPE_MASTERCARD};class a extends Error{constructor(e,t){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name="RequestError",this.code=t}}t.RequestError=a},35834:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUpdatedPaymentCard=t.getNewPaymentCard=t.savePaymentCard=void 0;const n=r(16516),o=r(53576),a=r(95623),i=r(45291),s=r(78320),c=r(47408),u=r(49551),l=r(42316),d=r(79980),p=r(51504);function f(e){a.default.log("[Data] Creating new Payment Card");const t=(0,c.getUnixTimestamp)(),r=(0,l.defaultToEmptyString)(e.cardNumber).replace(/ /g,"");return{kwType:"KWPaymentMean_creditCard",AnonId:(0,s.generateItemUuid)(),Bank:"US-NO_TYPE",CardNumber:r,CardNumberLastDigits:(0,l.getLastDigitsFromCardNumber)(r),CreationDatetime:t,Color:(0,n.defaultTo)(o.PaymentCardColor.BLUE_1,e.color),ExpireMonth:(0,l.defaultToEmptyString)(e.expireMonth),ExpireYear:(0,l.defaultToEmptyString)(e.expireYear),Id:(0,s.generateItemUuid)(),IssueNumber:"",Name:(0,n.defaultTo)("Card",e.cardName),OwnerName:(0,l.defaultToEmptyString)(e.ownerName),CCNote:(0,l.defaultToEmptyString)(e.personalNote),LocaleFormat:o.Country.US,SecurityCode:(0,l.defaultToEmptyString)(e.securityCode),SpaceId:e.spaceId||"",StartYear:"",StartMonth:"",Type:(0,l.getPaymentTypeFromCardNumber)(r),UserModificationDatetime:t,LastBackupTime:0}}function g(e,t){const r=(0,u.findDataModelObject)(t.id,e);if(!r)return void a.default.log("Client asks to update an unknown Payment Card");a.default.log(`[Data] Updating existing Payment Card ${t.id}`);const o=(0,c.getUnixTimestamp)(),i=(0,l.defaultToEmptyString)(t.cardNumber).replace(/ /g,""),s={CardNumber:i,CardNumberLastDigits:(0,l.getLastDigitsFromCardNumber)(i),Color:t.color?t.color:r.Color,ExpireMonth:(0,l.defaultToEmptyString)(t.expireMonth),ExpireYear:(0,l.defaultToEmptyString)(t.expireYear),Name:(0,n.defaultTo)("Card",t.cardName),OwnerName:(0,l.defaultToEmptyString)(t.ownerName),SecurityCode:(0,l.defaultToEmptyString)(t.securityCode),Type:(0,l.getPaymentTypeFromCardNumber)(t.cardNumber),UserModificationDatetime:o,CCNote:(0,l.defaultToEmptyString)(t.personalNote)};return{...r,...s}}t.savePaymentCard=function({storeService:e,sessionService:t,eventLoggerService:r},n){if(!e.isAuthenticated())return void a.default.log("No session available to savePaymentCard");const o=e.getPersonalData(),s=n.id?g(o.paymentCards,n):f(n),c=e.getState().userSession.personalFeatures.features[p.NEW_URL_PARSER_FF]||e.getState().userSession.personalFeatures.features[p.NEW_URL_PARSER_FF_PROD];if(n.id){const t=(0,u.findDataModelObject)(s.Id,o.paymentCards);(0,d.logEditVaultItem)(e,r,s,t,c)}else(0,d.logAddVaultItem)(e,r,s,c);e.dispatch((0,i.savePaymentCard)(s)),t.getInstance().user.persistPersonalData()},t.getNewPaymentCard=f,t.getUpdatedPaymentCard=g},7408:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPaymentCard$=t.paymentCards$=void 0;const n=r(18948),o=r(3343),a=r(55220),i=r(58235);t.paymentCards$=(0,a.getLivePersonalInfo)(i.getLivePaymentCardsSelector),t.getPaymentCard$=e=>{const t=(0,i.getViewedPaymentCardSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},91663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPaymentCardMappers=void 0;const n=r(83539);t.getPaymentCardMappers=()=>({spaceId:e=>e.SpaceId,name:e=>e.Name,lastUse:n.lastUseMapper,id:e=>e.Id})},38701:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.paymentCardMatch=t.searchGetters=void 0;const n=r(82234),o=r(64455);t.searchGetters=[(0,n.stringProp)("Name"),(0,n.stringProp)("OwnerName")],t.paymentCardMatch=(0,o.match)(t.searchGetters)},58235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedPaymentCardSelector=t.viewedPaymentCardSelector=t.getLivePaymentCardsSelector=t.viewedQueriedPaymentCardsSelector=t.queryPaymentCardsSelector=t.paymentCardMappersSelector=t.paymentCardSelector=t.paymentCardsSelector=void 0;const n=r(16516),o=r(38701),a=r(8818),i=r(24589),s=r(63566),c=r(97006),u=r(49551),l=r(32034),d=r(91663),p=r(40602),f=r(57989);t.paymentCardsSelector=(0,l.createSelector)((e=>e.userSession.personalData.paymentCards),f.quarantinedSpacesSelector,p.filterOutQuarantinedItems),t.paymentCardSelector=(e,r)=>{const n=(0,t.paymentCardsSelector)(e);return(0,u.findDataModelObject)(r,n)},t.paymentCardMappersSelector=e=>(0,d.getPaymentCardMappers)();const g=()=>o.paymentCardMatch;t.queryPaymentCardsSelector=(0,i.getQuerySelector)(t.paymentCardsSelector,g,t.paymentCardMappersSelector),t.viewedQueriedPaymentCardsSelector=(0,n.compose)((0,s.viewListResults)(a.listView),t.queryPaymentCardsSelector),t.getLivePaymentCardsSelector=(0,c.makeLiveSelectorGetter)(t.paymentCardsSelector,(()=>a.listView),g,t.paymentCardMappersSelector),t.viewedPaymentCardSelector=(e,r)=>{const n=(0,t.paymentCardSelector)(e,r);return(0,a.maybeDetailView)(n)},t.getViewedPaymentCardSelector=e=>{const r=(0,l.createSelector)(t.paymentCardsSelector,(t=>(0,u.findDataModelObject)(e,t)));return(0,l.createSelector)(r,a.maybeDetailView)}},9092:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeletePaymentCardErrorCode=t.PaymentCardSaveResultErrorCode=void 0,function(e){e.EMPTY_CARD_NUMBER_AND_SECURITY_CODE="EMPTY_CARD_NUMBER_AND_SECURITY_CODE",e.NOT_FOUND="NOT_FOUND"}(t.PaymentCardSaveResultErrorCode||(t.PaymentCardSaveResultErrorCode={})),function(e){e.NOT_AUTHORIZED="NOT_AUTHORIZED",e.NOT_FOUND="NOT_FOUND",e.INTERNAL_ERROR="INTERNAL_ERROR"}(t.DeletePaymentCardErrorCode||(t.DeletePaymentCardErrorCode={}))},8818:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(16516),o=r(82043),a=r(42316),i=(0,n.defaultTo)("");t.detailView=e=>({...(0,o.dataModelDetailView)(e),bank:i(e.Bank),cardNumber:i(e.CardNumber),cardNumberLastDigits:(0,a.getLastDigitsFromCardNumber)(e.CardNumber),color:e.Color||a.defaultColor,expireMonth:i(e.ExpireMonth),expireYear:i(e.ExpireYear),issueNumber:i(e.IssueNumber),name:i(e.Name),ownerName:i(e.OwnerName),personalNote:i(e.CCNote),securityCode:i(e.SecurityCode),startMonth:i(e.StartMonth),startYear:i(e.StartYear),type:e.Type}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,o.dataModelItemView)(e),cardNumber:i(e.CardNumber),cardNumberLastDigits:(0,a.getLastDigitsFromCardNumber)(e.CardNumber),color:e.Color||a.defaultColor,expireMonth:i(e.ExpireMonth),expireYear:i(e.ExpireYear),name:i(e.Name),ownerName:i(e.OwnerName),personalNote:i(e.CCNote),type:e.Type}),t.listView=e=>e.map(t.itemView)},43629:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePersonalDataItem=t.updatePersonalDataUsageMetadata=t.addPersonalDataItem=void 0;const n=r(53576),o=r(84977),a=r(87496),i=r(73566),s=r(85225),c=r(23136),u=r(70252),l=r(90503),d=r(47408),p=r(95623),f=r(48313),g=r(9951),m=r(49766),h=r(29565),y=r(91494),S=r(39732),v=r(49723),E=r(72079),A=r(88542),_=r(48931),b=r(12362),T=r(86691),I=r(13675),w=r(56915),C=r(79980),O=r(49551),D=r(51504),P=r(16530),N=r(78163),R={[n.DataModelType.KWAddress]:{create:v.makeNewAddress,update:v.makeUpdatedAddress},[n.DataModelType.KWAuthentifiant]:{beforeChange:A.beforeCredentialChange,create:A.makeNewCredential,update:A.makeUpdatedCredential,notifySharersOnUpdate:A.notifySharersCredentialUpdated,afterSave:A.afterCredentialSaved},[n.DataModelType.KWBankStatement]:{create:_.makeNewBankAccount,update:_.makeUpdatedBankAccount},[n.DataModelType.KWCompany]:{create:g.makeNewCompany,update:g.makeUpdatedCompany},[n.DataModelType.KWEmail]:{create:m.makeNewEmail,update:m.makeUpdatedEmail},[n.DataModelType.KWIdentity]:{create:y.makeNewIdentity,update:y.makeUpdatedIdentity},[n.DataModelType.KWPersonalWebsite]:{create:h.makeNewPersonalWebsite,update:h.makeUpdatedPersonalWebsite},[n.DataModelType.KWPhone]:{create:S.makeNewPhone,update:S.makeUpdatedPhone},[n.DataModelType.KWSecureNote]:{create:E.makeNewNote,update:E.makeUpdatedNote,notifySharersOnUpdate:E.notifySharersNoteUpdated}};async function U(e,t,r){t.content||(p.default.error(`[Data] PersonalInfoItem: ${t.kwType}, has no content`),u.sendExceptionLog({message:`[makePersonalDataItem] No content found for PersonalDataItem of kwType: ${t.kwType}`,code:l.ExceptionCriticality.WARNING}),t={...t,content:{}});let n=null;if(t.content.id){const e=(0,c.getCurrentItems)(t.kwType,r);n=(0,O.findDataModelObject)(t.content.id,e)}const o=R[t.kwType];if(!o)return p.default.error(`[Data] Could not make PersonalDataItem of kwType: ${t.kwType}`),null;let a;return t=function(e){return{...e,content:(0,I.sanitizeInputPersonalData)(e.content)}}(t),o.beforeChange&&(t=o.beforeChange(t,r)),n?(a=await o.update(t,n),o.notifySharersOnUpdate&&await o.notifySharersOnUpdate(e,n,a)):a=await o.create(t),a}t.addPersonalDataItem=async function({storeService:e,sessionService:t,eventLoggerService:r,applicationModulesAccess:a},c){if(!e.isAuthenticated())return p.default.log("No session available to addPersonalDataItem"),{success:!1,itemId:""};const u=e.getPersonalData(),l=await U(e,c,u);if(!l)return{success:!1,itemId:""};const d=Boolean(c?.content.id);let g=null,m=null;const h=(0,b.getInstance)(),y=(0,T.getInstance)(),S=e.getState().userSession.personalFeatures.features[D.NEW_URL_PARSER_FF]||e.getState().userSession.personalFeatures.features[D.NEW_URL_PARSER_FF_PROD];if(d){const t=o.default[l.kwType],n=(0,O.findDataModelObject)(l.Id,u[t]);(0,C.logEditVaultItem)(e,r,l,n,S)}else(0,C.logAddVaultItem)(e,r,l,S);const v=(0,w.platformInfoSelector)(e.getState()),E=(0,i.isChangeHistoryCandidate)(l)&&d?(0,i.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:u,change:(0,s.makeUpdateChange)(l),userLogin:e.getUserLogin(),platformInfo:v}):null;if(e.dispatch((0,f.savePersonalDataItem)(l,l.kwType,E)),(0,n.isCredential)(l)){g=y.lockTopic("healthUpdates"),m=y.lockTopic("iconsUpdates");const t={credentialIds:[l.Id],type:"credentialUpdates"};await h.add("healthUpdates",t);const r={credentialIds:[l.Id],type:"credentialUpdates"};if(await h.add("iconsUpdates",r),"************"===l?.Password&&(0,p.logWarn)({message:"Saving credentials using a placeholder",tag:"Credentials"}),e.getPersonalFeatures().features.ims_web_ph_mv3_dev){const{commands:e}=a.createClients().vaultItemsCrud;await e.emitTemporaryVaultItemEvent({ids:[l.Id],eventType:d?P.EventType.Updated:P.EventType.Created})}(0,N.shouldSendCreateOrModifiedCredentialAuditLog)(e,l,c.origin)&&(c.content.id?.length?await(0,N.computeAndSendModifiedCredentialAuditLog)(a,{domainUrl:c.content.url}):await(0,N.computeAndSendCreatedCredentialAuditLog)(a,{domainUrl:c.content.url}))}return R[c.kwType]?.afterSave&&R[c.kwType].afterSave(e,l),g&&y.releaseTopic("healthUpdates",g),m&&y.releaseTopic("iconsUpdates",m),t.getInstance().user.persistPersonalData(),{success:!0,itemId:l.Id}},t.updatePersonalDataUsageMetadata=function(e,t,r,i){const s=o.default[i],c=(0,a.cleanUrlForPersonalData)(r),g=e.getPersonalData()[s],m=Array.isArray(g)?(0,O.findDataModelObject)(t,g):null;if(!m)return void u.sendExceptionLog({message:`[PersonalData] - updatePersonalDataUsageMetadata: No ${s} found for provided ID to update usage metadata`,code:l.ExceptionCriticality.WARNING});p.default.log(`[Data] Updating ${s} ${t} usage metadata`);const h={...m,LastUse:(0,d.getUnixTimestamp)()};if((0,n.isCredential)(h)){const{NumberUse:e,TrustedUrlGroup:t}=h;h.NumberUse=("number"==typeof e?e:0)+1,h.TrustedUrlGroup=(0,a.getUpdatedTrustedUrlList)(t,c)}e.dispatch((0,f.savePersonalDataItem)(h,i))},t.makePersonalDataItem=U},79980:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logDeleteVaultItem=t.logAddVaultItem=t.logEditVaultItem=void 0;const n=r(10203),o=r(53576),a=r(17509),i=r(83195),s=r(49901),c=r(53966),u=r(10770),l=r(53626),d=(e,t,r,d,p,f,g,m)=>{const h=e.getState(),y=(0,l.collectionsSelector)(h),S=d.SpaceId===s.PERSONAL_SPACE_ID?n.Space.Personal:n.Space.Professional,v=void 0!==g?g.map((e=>(0,c.getHermesFieldFromProperty)(d,e))).filter((e=>e)):void 0,E=c.dataModelTypeToItemType[d.kwType],A=(0,u.getCollectionNamesContainingVaultItemId)(d.Id,y).length;if(t.logEvent(new n.UserUpdateVaultItemEvent({action:r,itemId:d.Id,itemType:E,fieldsEdited:v,space:S,collectionCount:A,multiSelectId:m??void 0,updateCredentialOrigin:f})),d.kwType===o.DataModelType.KWAuthentifiant){const e=d,o=p?new i.ParsedURL(e.Url).getRootDomain():(0,a.extractRootDomain)(e.Url),s="string"==typeof o?o:"";(0,n.hashDomain)(s).then((e=>{t.logEvent(new n.AnonymousUpdateCredentialEvent({action:r,domain:{id:e,type:n.DomainType.Web},fieldList:v,space:S}))}))}};t.logEditVaultItem=(e,t,r,o,a,i)=>{const s=(0,c.getUpdatedProperties)(r,o);d(e,t,n.Action.Edit,r,a,i,s)},t.logAddVaultItem=(e,t,r,o,a)=>d(e,t,n.Action.Add,r,o,a),t.logDeleteVaultItem=(e,t,r,o,a,i)=>d(e,t,n.Action.Delete,r,o,a,void 0,i)},53966:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUpdatedProperties=t.getHermesFieldFromProperty=t.dataModelTypeToItemType=void 0;const n=r(10203),o=r(53576);t.dataModelTypeToItemType={[o.DataModelType.KWAuthentifiant]:n.ItemType.Credential,[o.DataModelType.KWSecureNote]:n.ItemType.SecureNote,[o.DataModelType.KWIdentity]:n.ItemType.Identity,[o.DataModelType.KWEmail]:n.ItemType.Email,[o.DataModelType.KWPhone]:n.ItemType.Phone,[o.DataModelType.KWAddress]:n.ItemType.Address,[o.DataModelType.KWCompany]:n.ItemType.Company,[o.DataModelType.KWPersonalWebsite]:n.ItemType.Website,[o.DataModelType.KWPaymentMean_creditCard]:n.ItemType.CreditCard,[o.DataModelType.KWBankStatement]:n.ItemType.BankStatement,[o.DataModelType.KWIDCard]:n.ItemType.IdCard,[o.DataModelType.KWSocialSecurityStatement]:n.ItemType.SocialSecurity,[o.DataModelType.KWDriverLicence]:n.ItemType.DriverLicence,[o.DataModelType.KWPassport]:n.ItemType.Passport,[o.DataModelType.KWFiscalStatement]:n.ItemType.FiscalStatement};const a={Title:n.Field.Title,FirstName:n.Field.FirstName,MiddleName:n.Field.MiddleName,LastName:n.Field.LastName,BirthDate:n.Field.BirthDate,BirthPlace:n.Field.BirthPlace,Pseudo:n.Field.Pseudo,SpaceId:n.Field.Space},i={Email:n.Field.Email,Type:n.Field.Type,EmailName:n.Field.EmailName,SpaceId:n.Field.Space},s={Number:n.Field.Number,PhoneName:n.Field.PhoneName,Type:n.Field.Type,SpaceId:n.Field.Space},c={StreetNumber:n.Field.StreetNumber,StreetName:n.Field.StreetName,StreetTitle:n.Field.StreetTitle,City:n.Field.City,State:n.Field.State,StateLevel2:n.Field.StateLevel2,StateNumber:n.Field.StateNumber,ZipCode:n.Field.ZipCode,Country:n.Field.Country,AddressName:n.Field.AddressName,Receiver:n.Field.Receiver,Building:n.Field.Building,Floor:n.Field.Floor,Door:n.Field.Door,LinkedPhone:n.Field.LinkedPhone,PersonalNote:n.Field.Note,SpaceId:n.Field.Space},u={Name:n.Field.Name,JobTitle:n.Field.JobTitle,SpaceId:n.Field.Space},l={Website:n.Field.Website,Name:n.Field.Name,SpaceId:n.Field.Space},d={Name:n.Field.Name,OwnerName:n.Field.OwnerName,CardNumber:n.Field.CardNumber,SecurityCode:n.Field.SecurityCode,ExpireMonth:n.Field.ExpireDate,ExpireYear:n.Field.ExpireDate,Color:n.Field.Color,SpaceId:n.Field.Space},p={BankAccountName:n.Field.Name,BankAccountOwner:n.Field.Owner,BankAccountBIC:n.Field.Bic,BankAccountIBAN:n.Field.Iban,BankAccountBank:n.Field.Bank,SpaceId:n.Field.Space},f={Fullname:n.Field.Fullname,Number:n.Field.Number,DeliveryDate:n.Field.DeliveryDate,ExpireDate:n.Field.ExpireDate,LinkedIdentity:n.Field.LinkedIdentity,Sex:n.Field.Sex,DateOfBirth:n.Field.DateOfBirth,SpaceId:n.Field.Space},g={SocialSecurityFullname:n.Field.SocialSecurityFullname,SocialSecurityNumber:n.Field.SocialSecurityNumber,LinkedIdentity:n.Field.LinkedIdentity,Sex:n.Field.Sex,DateOfBirth:n.Field.DateOfBirth,SpaceId:n.Field.Space},m={Fullname:n.Field.Fullname,Number:n.Field.Number,DeliveryDate:n.Field.DeliveryDate,ExpireDate:n.Field.ExpireDate,State:n.Field.State,LinkedIdentity:n.Field.LinkedIdentity,Sex:n.Field.Sex,DateOfBirth:n.Field.DateOfBirth,SpaceId:n.Field.Space},h={Fullname:n.Field.Fullname,Number:n.Field.Number,DeliveryDate:n.Field.DeliveryDate,DeliveryPlace:n.Field.DeliveryPlace,ExpireDate:n.Field.ExpireDate,LinkedIdentity:n.Field.LinkedIdentity,Sex:n.Field.Sex,DateOfBirth:n.Field.DateOfBirth,SpaceId:n.Field.Space},y={FiscalNumber:n.Field.FiscalNumber,TeledeclarantNumber:n.Field.TeledeclarantNumber,SpaceId:n.Field.Space};t.getHermesFieldFromProperty=(e,t)=>{switch(e.kwType){case o.DataModelType.KWAuthentifiant:return((e,t)=>{switch(t){case"Email":return n.Field.Email;case"Login":return n.Field.Login;case"SecondaryLogin":return n.Field.SecondaryLogin;case"Password":return n.Field.Password;case"AutoLogin":return e.AutoLogin?n.Field.AutoLoginOn:n.Field.AutoLoginOff;case"AutoProtected":return e.AutoProtected?n.Field.MpProtectedOn:n.Field.MpProtectedOff;case"Url":return n.Field.Website;case"Category":return n.Field.Category;case"Note":return n.Field.Note;case"SubdomainOnly":return e.SubdomainOnly?n.Field.SubdomainOnlyOn:n.Field.SubdomainOnlyOff;case"Title":return n.Field.Title;case"SpaceId":return n.Field.Space}})(e,t);case o.DataModelType.KWSecureNote:return((e,t)=>{switch(t){case"Title":return n.Field.Title;case"Content":return n.Field.Content;case"Category":return n.Field.Category;case"SpaceId":return n.Field.Space;case"Secured":return e.Secured?n.Field.MpProtectedOn:n.Field.MpProtectedOff}})(e,t);case o.DataModelType.KWIdentity:return a[t];case o.DataModelType.KWEmail:return i[t];case o.DataModelType.KWPhone:return s[t];case o.DataModelType.KWAddress:return c[t];case o.DataModelType.KWCompany:return u[t];case o.DataModelType.KWPersonalWebsite:return l[t];case o.DataModelType.KWPaymentMean_creditCard:return d[t];case o.DataModelType.KWBankStatement:return p[t];case o.DataModelType.KWIDCard:return f[t];case o.DataModelType.KWSocialSecurityStatement:return g[t];case o.DataModelType.KWDriverLicence:return m[t];case o.DataModelType.KWPassport:return h[t];case o.DataModelType.KWFiscalStatement:return y[t]}},t.getUpdatedProperties=(e,t)=>Object.getOwnPropertyNames(e).filter((r=>{const n=void 0!==e[r],o=e[r]!==t[r];return n&&o}))},83539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lastUseMapper=void 0,t.lastUseMapper=e=>e.LastUse||-1},13675:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeInputPersonalData=void 0;const n=r(16516),o=e=>"string"==typeof e?e.replace(new RegExp("([^\t\n\r -퟿-�𐀀-􏿿])","gu"),""):e;t.sanitizeInputPersonalData=e=>(0,n.mapObjIndexed)(o,e)},72678:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.personalDataSelector=t.personalDataItemsOfTypeSelector=void 0;const n=r(84977);t.personalDataItemsOfTypeSelector=(e,t)=>e.userSession&&e.userSession.personalData&&t.reduce(((t,r)=>t.concat(e.userSession.personalData[n.default[r]])),[]),t.personalDataSelector=e=>e.userSession&&e.userSession.personalData},49551:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterDataModelObjects=t.findDataModelObject=void 0;const n=r(16516),o=r(84977);t.findDataModelObject=(e,t)=>{const r=(e||"").toUpperCase();return(t||[]).find((e=>!!e?.Id&&r===e.Id?.toUpperCase()))},t.filterDataModelObjects=(e,t,r)=>{const a=(0,n.unnest)((0,n.values)((0,n.omit)(r,(0,n.pick)(o.PERSONAL_DATA_COLLECTIONS_KEYS,e)))),i=(0,n.map)(n.toUpper,t),s=(0,n.propSatisfies)((e=>(0,n.contains)((e||"").toUpperCase(),i)),"Id");return(0,n.filter)(s,a)}},36351:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(99281),o=r(11127);t.config={commands:{},queries:{getAddress:{selector:n.viewedAddressSelector},getAddresses:{selector:n.viewedQueriedAddressesSelector}},liveQueries:{liveAddress:{operator:o.getAddress$},liveAddresses:{operator:o.addresses$}}}},33230:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(1570),t)},49723:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeAddressSpecificProps=t.makeNewAddress=t.makeUpdatedAddress=void 0;const n=r(16516),o=r(53576),a=r(78163),i=r(10360),s=r(47408),c=r(95623);function u(e,t){const r=(0,n.defaultTo)(""),a=t.content,s=(0,i.getLocaleFormat)(e,t);return{AddressFull:r(a.addressFull),AddressName:a.addressName||r(a.addressFull),Building:r(a.building),City:r(a.city),Country:o.Country[s].toLocaleLowerCase(),DigitCode:r(a.digitCode),Door:r(a.door),Floor:r(a.floor),LinkedPhone:r(a.linkedPhone),PersonalNote:r(a.personalNote),Receiver:r(a.receiver),Stairs:r(a.stairs),State:(0,i.getValidState)(s,a.state),StateLevel2:r(a.stateLevel2),StateNumber:r(a.stateNumber),StreetName:r(a.streetName),StreetNumber:r(a.streetNumber),StreetTitle:r(a.streetTitle),ZipCode:r(a.zipCode)}}t.makeUpdatedAddress=async function(e,t){return c.default.log(`[Data] Updating existing Address with id: ${t.Id}`),{...t,...(0,a.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,s.getUnixTimestamp)()}),...u(t,e)}},t.makeNewAddress=async function(e){return c.default.log("[Data] Adding new Address"),{...(0,a.makeNewPersonalDataItemBase)(e),...u(null,e)}},t.makeAddressSpecificProps=u},11127:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAddress$=t.addresses$=void 0;const n=r(18948),o=r(3343),a=r(55220),i=r(99281);t.addresses$=(0,a.getLivePersonalInfo)(i.getLiveAddressesSelector),t.getAddress$=e=>{const t=(0,i.getViewedAddressSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},83295:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAddressMappers=void 0;const n=r(83539);t.getAddressMappers=()=>({spaceId:e=>e.SpaceId,lastUse:n.lastUseMapper,id:e=>e.Id})},3179:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addressMatch=t.searchGetters=void 0;const n=r(82234),o=r(64455);t.searchGetters=[(0,n.stringProp)("AddressFull"),(0,n.stringProp)("AddressName"),(0,n.stringProp)("City"),(0,n.stringProp)("Receiver"),(0,n.stringProp)("StreetNumber"),(0,n.stringProp)("ZipCode")],t.addressMatch=(0,o.match)(t.searchGetters)},99281:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedAddressSelector=t.viewedAddressSelector=t.getLiveAddressesSelector=t.viewedQueriedAddressesSelector=t.queryAddressesSelector=t.addressMappersSelector=t.addressSelector=t.addressesSelector=void 0;const n=r(16516),o=r(3179),a=r(83295),i=r(84523),s=r(63566),c=r(24589),u=r(97006),l=r(49551),d=r(32034),p=r(40602),f=r(57989);t.addressesSelector=(0,d.createSelector)((e=>e.userSession.personalData.addresses),f.quarantinedSpacesSelector,p.filterOutQuarantinedItems),t.addressSelector=(e,r)=>{const n=(0,t.addressesSelector)(e);return(0,l.findDataModelObject)(r,n)},t.addressMappersSelector=e=>(0,a.getAddressMappers)();const g=()=>o.addressMatch;t.queryAddressesSelector=(0,c.getQuerySelector)(t.addressesSelector,g,t.addressMappersSelector),t.viewedQueriedAddressesSelector=(0,n.compose)((0,s.viewListResults)(i.listView),t.queryAddressesSelector),t.getLiveAddressesSelector=(0,u.makeLiveSelectorGetter)(t.addressesSelector,(()=>i.listView),g,t.addressMappersSelector),t.viewedAddressSelector=(e,r)=>{const n=(0,t.addressSelector)(e,r);return(0,i.maybeDetailView)(n)},t.getViewedAddressSelector=e=>{const r=(0,d.createSelector)(t.addressesSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,d.createSelector)(r,i.maybeDetailView)}},1570:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},84523:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(16516),o=r(82043),a=(0,n.defaultTo)("");t.detailView=e=>({...(0,o.dataModelDetailView)(e),addressFull:a(e.AddressFull),addressName:a(e.AddressName),building:a(e.Building),city:a(e.City),country:a(e.Country),digitCode:a(e.DigitCode),door:a(e.Door),floor:a(e.Floor),linkedPhone:a(e.LinkedPhone),personalNote:a(e.PersonalNote),receiver:a(e.Receiver),stairs:a(e.Stairs),state:a(e.State),stateLevel2:a(e.StateLevel2),stateNumber:a(e.StateNumber),streetName:a(e.StreetName),streetNumber:a(e.StreetNumber),streetTitle:a(e.StreetTitle),zipCode:a(e.ZipCode)}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,o.dataModelItemView)(e),addressName:a(e.AddressName),addressFull:a(e.AddressFull),city:a(e.City),streetNumber:a(e.StreetNumber),zipCode:a(e.ZipCode)}),t.listView=e=>e.map(t.itemView)},34130:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(33230),t),o(r(77418),t),o(r(57755),t),o(r(75690),t),o(r(91317),t),o(r(90609),t)},72580:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(80624),o=r(81071);t.config={commands:{},queries:{getCompany:{selector:n.viewedCompanySelector},getCompanies:{selector:n.viewedQueriedCompaniesSelector}},liveQueries:{liveCompanies:{operator:o.companies$},liveCompany:{operator:o.getCompany$}}}},77418:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(79662),t)},9951:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeCompanySpecificProps=t.makeNewCompany=t.makeUpdatedCompany=void 0;const n=r(16516),o=r(78163),a=r(47408),i=r(95623);function s(e){const t=(0,n.defaultTo)("");return{JobTitle:t(e.content.jobTitle),Name:t(e.content.name),PersonalNote:t(e.content.personalNote)}}t.makeUpdatedCompany=async function(e,t){return i.default.log(`[Data] Updating existing Company with id: ${t.Id}`),{...t,...(0,o.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,a.getUnixTimestamp)()}),...s(e)}},t.makeNewCompany=async function(e){return{...(0,o.makeNewPersonalDataItemBase)(e),...s(e)}},t.makeCompanySpecificProps=s},81071:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCompany$=t.companies$=void 0;const n=r(18948),o=r(3343),a=r(55220),i=r(80624);t.companies$=(0,a.getLivePersonalInfo)(i.getLiveCompaniesSelector),t.getCompany$=e=>{const t=(0,i.getViewedCompanySelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},6628:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCompanyMappers=void 0;const n=r(83539);t.getCompanyMappers=()=>({spaceId:e=>e.SpaceId,lastUse:n.lastUseMapper,id:e=>e.Id})},76475:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.companyMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234);t.searchGetters=[(0,o.stringProp)("JobTitle"),(0,o.stringProp)("Name")],t.companyMatch=(0,n.match)(t.searchGetters)},80624:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedCompanySelector=t.viewedCompanySelector=t.getLiveCompaniesSelector=t.viewedQueriedCompaniesSelector=t.queryCompaniesSelector=t.companyMappersSelector=t.companySelector=t.companiesSelector=void 0;const n=r(16516),o=r(76475),a=r(2849),i=r(6628),s=r(63566),c=r(24589),u=r(97006),l=r(49551),d=r(32034),p=r(40602),f=r(57989);t.companiesSelector=(0,d.createSelector)((e=>e.userSession.personalData.companies),f.quarantinedSpacesSelector,p.filterOutQuarantinedItems),t.companySelector=(e,r)=>{const n=(0,t.companiesSelector)(e);return(0,l.findDataModelObject)(r,n)},t.companyMappersSelector=e=>(0,i.getCompanyMappers)();const g=()=>o.companyMatch;t.queryCompaniesSelector=(0,c.getQuerySelector)(t.companiesSelector,g,t.companyMappersSelector),t.viewedQueriedCompaniesSelector=(0,n.compose)((0,s.viewListResults)(a.listView),t.queryCompaniesSelector),t.getLiveCompaniesSelector=(0,u.makeLiveSelectorGetter)(t.companiesSelector,(()=>a.listView),g,t.companyMappersSelector),t.viewedCompanySelector=(e,r)=>{const n=(0,t.companySelector)(e,r);return(0,a.maybeDetailView)(n)},t.getViewedCompanySelector=e=>{const r=(0,d.createSelector)(t.companiesSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,d.createSelector)(r,a.maybeDetailView)}},79662:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2849:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(16516),o=r(82043),a=(0,n.defaultTo)("");t.detailView=e=>({...(0,o.dataModelDetailView)(e),name:a(e.Name),jobTitle:a(e.JobTitle),personalNote:a(e.PersonalNote)}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,o.dataModelItemView)(e),name:a(e.Name),jobTitle:a(e.JobTitle)}),t.listView=e=>e.map(t.itemView)},64489:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(26147),o=r(99020);t.config={commands:{},queries:{getEmail:{selector:n.viewedEmailSelector},getEmails:{selector:n.viewedQueriedEmailsSelector}},liveQueries:{liveEmail:{operator:o.getEmail$},liveEmails:{operator:o.emails$}}}},57755:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(87681),t)},49766:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeEmailSpecificProps=t.makeNewEmail=t.makeUpdatedEmail=void 0;const n=r(16516),o=r(78163),a=r(47408),i=r(95623);function s(e){const t=(0,n.defaultTo)("");return{Email:t(e.content.email),EmailName:t(e.content.emailName),Type:e.content.type||"PERSO"}}t.makeUpdatedEmail=async function(e,t){return i.default.log(`[Data] Updating existing Email with id: ${t.Id}`),{...t,...(0,o.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,a.getUnixTimestamp)()}),...s(e)}},t.makeNewEmail=async function(e){return i.default.log("[Data] Adding new Email"),{...(0,o.makeNewPersonalDataItemBase)(e),...s(e)}},t.makeEmailSpecificProps=s},99020:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmail$=t.emails$=void 0;const n=r(18948),o=r(3343),a=r(55220),i=r(26147);t.emails$=(0,a.getLivePersonalInfo)(i.getLiveEmailsSelector),t.getEmail$=e=>{const t=(0,i.getViewedEmailSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},16384:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmailMappers=void 0;const n=r(83539);t.getEmailMappers=()=>({spaceId:e=>e.SpaceId,lastUse:n.lastUseMapper,id:e=>e.Id})},61808:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emailMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234);t.searchGetters=[(0,o.stringProp)("Email"),(0,o.stringProp)("EmailName")],t.emailMatch=(0,n.match)(t.searchGetters)},26147:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedEmailSelector=t.viewedEmailSelector=t.getLiveEmailsSelector=t.viewedQueriedEmailsSelector=t.queryEmailsSelector=t.emailMappersSelector=t.emailSelector=t.emailsSelector=t.countAllEmailsSelector=void 0;const n=r(16516),o=r(61808),a=r(16384),i=r(82864),s=r(63566),c=r(24589),u=r(97006),l=r(49551),d=r(32034),p=r(57989),f=r(40602);t.countAllEmailsSelector=e=>e.userSession.personalData.emails.length,t.emailsSelector=(0,d.createSelector)((e=>e.userSession.personalData.emails),p.quarantinedSpacesSelector,f.filterOutQuarantinedItems),t.emailSelector=(e,r)=>{const n=(0,t.emailsSelector)(e);return(0,l.findDataModelObject)(r,n)},t.emailMappersSelector=e=>(0,a.getEmailMappers)();const g=()=>o.emailMatch;t.queryEmailsSelector=(0,c.getQuerySelector)(t.emailsSelector,g,t.emailMappersSelector),t.viewedQueriedEmailsSelector=(0,n.compose)((0,s.viewListResults)(i.listView),t.queryEmailsSelector),t.getLiveEmailsSelector=(0,u.makeLiveSelectorGetter)(t.emailsSelector,(()=>i.listView),g,t.emailMappersSelector),t.viewedEmailSelector=(e,r)=>{const n=(0,t.emailSelector)(e,r);return(0,i.maybeDetailView)(n)},t.getViewedEmailSelector=e=>{const r=(0,d.createSelector)(t.emailsSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,d.createSelector)(r,i.maybeDetailView)}},87681:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},82864:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(16516),o=r(82043),a=(0,n.defaultTo)("");t.detailView=e=>({...(0,o.dataModelDetailView)(e),email:a(e.Email),name:a(e.EmailName),type:e.Type||"NO_TYPE"}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,o.dataModelItemView)(e),email:a(e.Email),name:a(e.EmailName),type:e.Type||"NO_TYPE"}),t.listView=e=>e.map(t.itemView)},95633:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(28074),o=r(50329);t.config={commands:{},queries:{getIdentities:{selector:n.viewedQueriedIdentitiesSelector},getIdentitiesCount:{selector:n.identitiesCountSelector},getIdentity:{selector:n.viewedIdentitySelector}},liveQueries:{liveIdentities:{operator:o.identities$},liveIdentitiesCount:{operator:o.identitiesCount$},liveIdentity:{operator:o.getIdentity$}}}},75690:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(10768),t)},91494:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeIdentitySpecificProps=t.makeNewIdentity=t.makeUpdatedIdentity=void 0;const n=r(16516),o=r(78163),a=r(95623),i=r(47408);function s(e){const t=(0,n.defaultTo)("");return{FirstName:t(e.content.firstName),MiddleName:t(e.content.middleName),LastName:t(e.content.lastName),LastName2:t(e.content.lastName2),Pseudo:t(e.content.pseudo),BirthDate:t(e.content.birthDate),BirthPlace:t(e.content.birthPlace),Title:t(e.content.title)}}t.makeUpdatedIdentity=async function(e,t){return a.Debugger.log(`[Data] Updating existing Identity with id: ${t.Id}`),{...t,...(0,o.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,i.getUnixTimestamp)()}),...s(e)}},t.makeNewIdentity=async function(e){return a.Debugger.log("[Data] Adding new Identity"),{...(0,o.makeNewPersonalDataItemBase)(e),...s(e)}},t.makeIdentitySpecificProps=s},50329:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIdentity$=t.identitiesCount$=t.identities$=void 0;const n=r(18948),o=r(3343),a=r(55220),i=r(28074);t.identities$=(0,a.getLivePersonalInfo)(i.getLiveIdentitiesSelector),t.identitiesCount$=()=>(0,n.pipe)((0,o.map)(i.identitiesCountSelector),(0,o.distinctUntilChanged)()),t.getIdentity$=e=>{const t=(0,i.getViewedIdentitySelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},15044:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIdentityMappers=void 0;const n=r(83539);t.getIdentityMappers=()=>({spaceId:e=>e.SpaceId,lastUse:n.lastUseMapper,id:e=>e.Id})},86052:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identityMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234);t.searchGetters=[(0,o.stringProp)("BirthDate"),(0,o.stringProp)("BirthPlace"),(0,o.stringProp)("FirstName"),(0,o.stringProp)("LastName"),(0,o.stringProp)("LastName2"),(0,o.stringProp)("MiddleName"),(0,o.stringProp)("Pseudo")],t.identityMatch=(0,n.match)(t.searchGetters)},28074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedIdentitySelector=t.viewedIdentitySelector=t.getLiveIdentitiesSelector=t.identitiesCountSelector=t.viewedQueriedIdentitiesSelector=t.queryIdentitiesSelector=t.identityMappersSelector=t.identitySelector=t.identitiesByIdSelector=t.identitiesSelector=void 0;const n=r(16516),o=r(86052),a=r(76652),i=r(63566),s=r(24589),c=r(97006),u=r(49551),l=r(32034),d=r(15044),p=r(40602),f=r(57989);t.identitiesSelector=(0,l.createSelector)((e=>e.userSession.personalData.identities),f.quarantinedSpacesSelector,p.filterOutQuarantinedItems),t.identitiesByIdSelector=(0,l.createSelector)(t.identitiesSelector,(e=>e.reduce(((e,t)=>(e[t.Id]=t,e)),{}))),t.identitySelector=(e,r)=>{const n=(0,t.identitiesSelector)(e);return(0,u.findDataModelObject)(r,n)},t.identityMappersSelector=e=>(0,d.getIdentityMappers)();const g=()=>o.identityMatch;t.queryIdentitiesSelector=(0,s.getQuerySelector)(t.identitiesSelector,g,t.identityMappersSelector),t.viewedQueriedIdentitiesSelector=(0,n.compose)((0,i.viewListResults)(a.listView),t.queryIdentitiesSelector),t.identitiesCountSelector=e=>e.userSession.personalData.identities?.length??0,t.getLiveIdentitiesSelector=(0,c.makeLiveSelectorGetter)(t.identitiesSelector,(()=>a.listView),g,t.identityMappersSelector),t.viewedIdentitySelector=(e,r)=>{const n=(0,t.identitySelector)(e,r);return(0,a.maybeDetailView)(n)},t.getViewedIdentitySelector=e=>{const r=(0,l.createSelector)(t.identitiesSelector,(t=>(0,u.findDataModelObject)(e,t)));return(0,l.createSelector)(r,a.maybeDetailView)}},10768:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},76652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(16516),o=r(82043),a=(0,n.defaultTo)("");t.detailView=e=>({...(0,o.dataModelDetailView)(e),birthDate:a(e.BirthDate),birthPlace:a(e.BirthPlace),firstName:a(e.FirstName),lastName2:a(e.LastName2),lastName:a(e.LastName),middleName:a(e.MiddleName),pseudo:a(e.Pseudo),title:e.Title}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,o.dataModelItemView)(e),birthDate:a(e.BirthDate),birthPlace:a(e.BirthPlace),firstName:a(e.FirstName),lastName2:a(e.LastName2),lastName:a(e.LastName),middleName:a(e.MiddleName),pseudo:a(e.Pseudo),title:e.Title}),t.listView=e=>e.map(t.itemView)},6210:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(81473),o=r(96055);t.config={commands:{},queries:{getPersonalWebsite:{selector:n.viewedPersonalWebsiteSelector},getPersonalWebsites:{selector:n.viewedQueriedPersonalWebsitesSelector}},liveQueries:{livePersonalWebsite:{operator:o.getPersonalWebsite$},livePersonalWebsites:{operator:o.personalWebsites$}}}},91317:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(44482),t)},29565:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePersonalWebsiteSpecificProps=t.makeNewPersonalWebsite=t.makeUpdatedPersonalWebsite=void 0;const n=r(16516),o=r(78163),a=r(47408),i=r(95623);function s(e){const t=(0,n.defaultTo)("");return{Website:t(e.content.website),Name:t(e.content.name)}}t.makeUpdatedPersonalWebsite=async function(e,t){return i.default.log(`[Data] Updating existing PersonalWebsite with id: ${t.Id}`),{...t,...(0,o.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,a.getUnixTimestamp)()}),...s(e)}},t.makeNewPersonalWebsite=async function(e){return i.default.log("[Data] Adding new PersonalWebsite"),{...(0,o.makeNewPersonalDataItemBase)(e),...s(e)}},t.makePersonalWebsiteSpecificProps=s},96055:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPersonalWebsite$=t.personalWebsites$=void 0;const n=r(18948),o=r(3343),a=r(55220),i=r(81473);t.personalWebsites$=(0,a.getLivePersonalInfo)(i.getLivePersonalWebsitesSelector),t.getPersonalWebsite$=e=>{const t=(0,i.getViewedPersonalWebsiteSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},93315:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPersonalWebsiteMappers=void 0;const n=r(83539);t.getPersonalWebsiteMappers=()=>({spaceId:e=>e.SpaceId,lastUse:n.lastUseMapper,id:e=>e.Id})},86963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.personalWebsiteMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234);t.searchGetters=[(0,o.stringProp)("Name"),(0,o.stringProp)("Website")],t.personalWebsiteMatch=(0,n.match)(t.searchGetters)},81473:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedPersonalWebsiteSelector=t.viewedPersonalWebsiteSelector=t.getLivePersonalWebsitesSelector=t.viewedQueriedPersonalWebsitesSelector=t.queryPersonalWebsitesSelector=t.personalWebsiteMappersSelector=t.personalWebsiteSelector=t.personalWebsitesSelector=void 0;const n=r(16516),o=r(32034),a=r(86963),i=r(70024),s=r(63566),c=r(24589),u=r(97006),l=r(49551),d=r(93315),p=r(40602),f=r(57989);t.personalWebsitesSelector=(0,o.createSelector)((e=>e.userSession.personalData.personalWebsites),f.quarantinedSpacesSelector,p.filterOutQuarantinedItems),t.personalWebsiteSelector=(e,r)=>{const n=(0,t.personalWebsitesSelector)(e);return(0,l.findDataModelObject)(r,n)},t.personalWebsiteMappersSelector=e=>(0,d.getPersonalWebsiteMappers)();const g=()=>a.personalWebsiteMatch;t.queryPersonalWebsitesSelector=(0,c.getQuerySelector)(t.personalWebsitesSelector,g,t.personalWebsiteMappersSelector),t.viewedQueriedPersonalWebsitesSelector=(0,n.compose)((0,s.viewListResults)(i.listView),t.queryPersonalWebsitesSelector),t.getLivePersonalWebsitesSelector=(0,u.makeLiveSelectorGetter)(t.personalWebsitesSelector,(()=>i.listView),g,t.personalWebsiteMappersSelector),t.viewedPersonalWebsiteSelector=(e,r)=>{const n=(0,t.personalWebsiteSelector)(e,r);return(0,i.maybeDetailView)(n)},t.getViewedPersonalWebsiteSelector=e=>{const r=(0,o.createSelector)(t.personalWebsitesSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,o.createSelector)(r,i.maybeDetailView)}},44482:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},70024:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(16516),o=r(82043),a=(0,n.defaultTo)("");t.detailView=e=>({...(0,o.dataModelDetailView)(e),name:a(e.Name),personalNote:a(e.PersonalNote),website:a(e.Website)}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,o.dataModelItemView)(e),name:a(e.Name),website:a(e.Website)}),t.listView=e=>e.map(t.itemView)},14037:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(82439),o=r(21264);t.config={commands:{},queries:{getPhone:{selector:n.viewedPhoneSelector},getPhones:{selector:n.viewedQueriedPhonesSelector}},liveQueries:{livePhone:{operator:o.getPhone$},livePhones:{operator:o.phones$}}}},90609:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(98013),t)},39732:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePhoneNumbers=t.makePhoneSpecificProps=t.makeNewPhone=t.makeUpdatedPhone=void 0;const n=r(16516),o=r(33321),a=r(53576),i=r(78163),s=r(86056),c=r(10360),u=r(47408),l=r(28445),d=r(95623);function p(e){const t=(0,n.defaultTo)(""),{Number:r,NumberInternational:o,NumberNational:i}=f(e);return{Number:r,NumberInternational:o,NumberNational:i,PersonalNote:t(e.content.personalNote),PhoneName:e.content.phoneName||i,Type:a.PhoneType[e.content.type]||a.PhoneType.PHONE_TYPE_ANY}}function f(e){const{localeFormat:t,number:r}=e.content;if(!r)return{Number:"",NumberInternational:"",NumberNational:""};const n=(0,c.isProposedLocaleLocalized)(t)&&a.Country[t]||a.Country[(0,s.getPlatformInfo)().country]||a.Country.US;if(!(n?(0,o.isValidNumber)(r,n):(0,o.isValidNumber)(r)))return{Number:(0,l.removeNonDigitCharacters)(r),NumberInternational:r,NumberNational:r};const i=(0,o.formatNumber)({country:n,phone:r},"National"),u=(0,o.formatNumber)({country:n,phone:r},"International");return{Number:(0,l.removeNonDigitCharacters)(r),NumberInternational:u,NumberNational:i}}t.makeUpdatedPhone=async function(e,t){return d.default.log(`[Data] Updating existing Phone with id: ${t.Id}`),{...t,...(0,i.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,u.getUnixTimestamp)()}),...p(e)}},t.makeNewPhone=async function(e){return d.default.log("[Data] Adding new Phone"),{...(0,i.makeNewPersonalDataItemBase)(e),...p(e)}},t.makePhoneSpecificProps=p,t.parsePhoneNumbers=f},21264:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPhone$=t.phones$=void 0;const n=r(18948),o=r(3343),a=r(55220),i=r(82439);t.phones$=(0,a.getLivePersonalInfo)(i.getLivePhonesSelector),t.getPhone$=e=>{const t=(0,i.getViewedPhoneSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},90076:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPhoneMappers=void 0;const n=r(83539);t.getPhoneMappers=()=>({spaceId:e=>e.SpaceId,lastUse:n.lastUseMapper,id:e=>e.Id})},41648:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.phoneMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234);t.searchGetters=[(0,o.stringProp)("Number"),(0,o.stringProp)("PhoneName")],t.phoneMatch=(0,n.match)(t.searchGetters)},82439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedPhoneSelector=t.viewedPhoneSelector=t.getLivePhonesSelector=t.viewedQueriedPhonesSelector=t.queryPhonesSelector=t.phoneMappersSelector=t.phoneSelector=t.phonesSelector=void 0;const n=r(16516),o=r(41648),a=r(83566),i=r(90076),s=r(63566),c=r(24589),u=r(97006),l=r(49551),d=r(32034),p=r(40602),f=r(57989);t.phonesSelector=(0,d.createSelector)((e=>e.userSession.personalData.phones),f.quarantinedSpacesSelector,p.filterOutQuarantinedItems),t.phoneSelector=(e,r)=>{const n=(0,t.phonesSelector)(e);return(0,l.findDataModelObject)(r,n)},t.phoneMappersSelector=e=>(0,i.getPhoneMappers)();const g=()=>o.phoneMatch;t.queryPhonesSelector=(0,c.getQuerySelector)(t.phonesSelector,g,t.phoneMappersSelector),t.viewedQueriedPhonesSelector=(0,n.compose)((0,s.viewListResults)(a.listView),t.queryPhonesSelector),t.getLivePhonesSelector=(0,u.makeLiveSelectorGetter)(t.phonesSelector,(()=>a.listView),g,t.phoneMappersSelector),t.viewedPhoneSelector=(e,r)=>{const n=(0,t.phoneSelector)(e,r);return(0,a.maybeDetailView)(n)},t.getViewedPhoneSelector=e=>{const r=(0,d.createSelector)(t.phonesSelector,(t=>(0,l.findDataModelObject)(e,t)));return(0,d.createSelector)(r,a.maybeDetailView)}},98013:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},83566:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(16516),o=r(82043),a=(0,n.defaultTo)(""),i=e=>a(e.NumberInternational||e.NumberNational||e.Number);t.detailView=e=>({...(0,o.dataModelDetailView)(e),displayNumber:i(e),name:a(e.PhoneName),number:a(e.Number),numberInternational:a(e.NumberNational),numberNational:a(e.NumberNational),personalNote:a(e.PersonalNote),type:e.Type}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,o.dataModelItemView)(e),displayNumber:i(e),name:a(e.PhoneName),numberInternational:a(e.NumberNational),number:a(e.Number),type:e.Type}),t.listView=e=>e.map(t.itemView)},55220:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLivePersonalInfo=void 0;const n=r(18948),o=r(3343),a=r(35893),i=r(33627);t.getLivePersonalInfo=e=>t=>{const r=(0,a.parseToken)(t),s=e(r);return(0,n.pipe)((0,o.map)(s),(0,o.distinctUntilChanged)(((e,t)=>(0,i.sameBatch)(e.items,t.items)&&e.matchingCount===t.matchingCount)))}},64455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.match=void 0;const n=r(97601);t.match=e=>(t,r)=>"string"==typeof t&&0!==t.length&&e.some((e=>{const o=e(r)||"";return(0,n.normalizeString)(o).includes(t)}))},82234:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringProp=void 0;const n=r(16516);t.stringProp=e=>(0,n.prop)(e)},63566:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewListResults=void 0,t.viewListResults=e=>({items:t,matchingCount:r})=>({items:e(t),matchingCount:r})},80529:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(24465),o=r(89642),a=r(37403),i=r(90489),s=r(81043),c=r(49006),u=r(27416),l=r(32818),d=r(9124),p=r(40409);t.config={commands:{downloadSecureFile:{handler:i.downloadSecureFileHandler},deleteSecureFile:{handler:c.deleteSecureFileHandler},addSecureFile:{handler:n.addSecureFileHandler},validateSecureFile:{handler:l.validateSecureFileHandler},commitSecureFile:{handler:s.commitSecureFileHandler},initSecureFilesStorageInfo:{handler:a.initSecureFilesStorageInfoHandler},chunkTransferDone:{handler:d.chunkTransferDoneHandler},clearSecureFilesState:{handler:p.clearSecureFileStateHandler}},queries:{getSecureFilesInfoList:{selector:o.secureFileInfoSelector},getSecureFilesQuota:{selector:o.secureFilesQuotaSelector},getFileDownloadProgress:{selector:o.secureFileDownloadSelector},getFileUploadProgress:{selector:o.secureFileUploadSelector}},liveQueries:{liveFileDownloadProgress:{operator:u.getFileDownloadProgress$},liveFileUploadProgress:{operator:u.getFileUploadProgress$},liveSecureFilesQuota:{operator:u.secureFilesQuota$}}}},60802:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(86562),t)},24465:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSecureFileHandler=t.createSecureFile=void 0;const n=r(28354),o=r(90622),a=r(16593),i=r(86562),s=r(69530),c=r(46445),u=r(65675),l=r(16038),d=r(55623),p=r(27993),f=r(20810),g=r(89642),m=r(99994),h={success:!1,error:{code:i.SecureFileResultErrorCode.SERVER_ERROR}},y=Math.pow(1024,2)/2,S=e=>{switch(e){case i.SecureFileResultErrorCode.MAX_CONTENT_LENGTH_EXCEEDED:return i.SecureFileResultErrorCode.MAX_CONTENT_LENGTH_EXCEEDED;case i.SecureFileResultErrorCode.QUOTA_EXCEEDED:return i.SecureFileResultErrorCode.QUOTA_EXCEEDED;default:return i.SecureFileResultErrorCode.SERVER_ERROR}},v=(e,t,r,o,a,i)=>{const s=`{${(0,n.v4)()}}`,c=Math.floor(Date.now()/1e3);return{kwType:"KWSecureFileInfo",Id:s,LastBackupTime:0,CryptoKey:(0,l.bufferToBase64)(t),DownloadKey:"",Filename:o,LocalSize:e.byteLength,RemoteSize:r.byteLength,Type:a,CreationDatetime:c,UserModificationDatetime:c,Owner:i}};async function E(e,t,r,n){try{const{cryptoConfig:o}=(0,u.parsePayload)("$1$noderivation$aes256$cbchmac$16$"),a=(0,d.getRandomValues)(32),i=await(0,c.hashAndSplitKey)(a),f=(0,p.generateIV)(),g=await(0,s.encryptAES256)({key:i.aes,iv:f,clearData:e}),m={salt:null,iv:f,hash:await(0,s.signHashHmacSHA256)({key:i.hmac,data:(0,l.concatBuffers)(f,g)}),cipheredContent:g,cryptoConfig:o},h=(0,u.convertDashlaneSecureDataFlexibleToTransportableData)(m);return{success:!0,secureFileDataBuffer:h,secureFileInfo:v(e,a,h,t,r,n)}}catch(e){return{success:!1}}}t.createSecureFile=E,t.addSecureFileHandler=async function({wsService:e,storeService:t},r){const n=(0,a.userIdSelector)(t.getState());if(!(0,m.validateSecureFile)(r.fileName,r.fileType))return{success:!1,error:{code:i.SecureFileResultErrorCode.INVALID_FILE_TYPE}};let s;t.dispatch((0,f.secureFileStartUploadAction)(r.serializedContent.length)),t.dispatch((0,f.secureFileStartCipheringAction)());try{const e=JSON.parse(r.serializedContent);s=new Uint8Array(e).buffer}catch(e){return{success:!1,error:{code:i.SecureFileResultErrorCode.INTERNAL_ERROR}}}const{secureFileDataBuffer:c,secureFileInfo:u}=await E(s,r.fileName,r.fileType,n);if((0,g.secureFilesQuotaSelector)(t.getState()).remaining<c.byteLength)return{success:!1,error:{code:i.SecureFileResultErrorCode.QUOTA_EXCEEDED}};const l=setInterval((()=>{t.dispatch((0,f.secureFileUploadChunkAction)(y))}),1e3);let d=null;try{d=await e.secureFile.getUploadLink({contentLength:u.RemoteSize,secureFileInfoId:u.Id,login:n,uki:(0,o.ukiSelector)(t.getState())})}catch(e){return clearInterval(l),t.dispatch((0,f.secureFileUploadErrorAction)()),(e=>"getAdditionalInfo"in e?{success:!1,error:{code:S(e.getAdditionalInfo().webServiceSubMessage)}}:h)(e)}return 200===d.code?(u.DownloadKey=d.content.key,await async function(e,t){try{const r=t.content.url,n=new FormData;for(const e of Object.keys(t.content.fields))n.append(e,t.content.fields[e]);return n.append("key",`${t.content.key}`),n.append("acl",`${t.content.acl}`),n.append("file",new Blob([e])),204===(await fetch(r,{method:"POST",body:n})).status}catch(e){return!1}}(c,d)?(t.dispatch((0,f.secureFileSetStorageInfoAction)(d.content.quota)),clearInterval(l),t.dispatch((0,f.secureFileUploadDoneAction)()),t.dispatch((0,f.secureFileUploadClearAction)()),{success:!0,secureFileInfo:u}):(clearInterval(l),h)):(clearInterval(l),t.dispatch((0,f.secureFileUploadErrorAction)()),h)}},9124:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chunkTransferDoneHandler=void 0;const n=r(20810);t.chunkTransferDoneHandler=async function({storeService:e},t){return e.dispatch((0,n.secureFileChunkReadyAction)(t)),Promise.resolve()}},40409:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearSecureFileStateHandler=void 0;const n=r(20810);t.clearSecureFileStateHandler=async function({storeService:e},t){return e.dispatch((0,n.secureFileClearAction)(t)),Promise.resolve()}},81043:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commitSecureFileHandler=void 0;const n=r(90622),o=r(16593),a=r(48313);t.commitSecureFileHandler=async function({wsService:e,sessionService:t,storeService:r},{secureFileInfo:i}){if(200!==(await e.secureFile.commit({key:i.DownloadKey,secureFileInfoId:i.Id,login:(0,o.userIdSelector)(r.getState()),uki:(0,n.ukiSelector)(r.getState())})).code)return{success:!1};try{return r.dispatch((0,a.savePersonalDataItem)(i,i.kwType)),t.getInstance().user.persistPersonalData(),{success:!0}}catch(e){return{success:!1}}}},49006:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSecureFileHandler=void 0;const n=r(53576),o=r(90622),a=r(76496),i=r(16593),s=r(86562),c=r(20810);t.deleteSecureFileHandler=async(e,t)=>{const{storeService:r,wsService:u,eventLoggerService:l}=e,d=r.getState(),p=(0,i.userIdSelector)(d),f=(0,o.ukiSelector)(d),g=await(0,a.deletePersonalDataItem)({storeService:r,wsService:u,eventLoggerService:l},t.id);if(!g.success&&g.reason!==n.RemovePersonalDataItemFailureReason.NOT_FOUND)return{success:!1,error:{code:s.SecureFileResultErrorCode.INTERNAL_ERROR}};let m=null;try{m=await u.secureFile.delete({login:p,uki:f,secureFileInfoId:t.id})}catch(e){return{success:!1,error:{code:s.SecureFileResultErrorCode.SERVER_ERROR}}}return g.reason===n.RemovePersonalDataItemFailureReason.NOT_FOUND?{success:!1,error:{code:s.SecureFileResultErrorCode.FILE_NOT_FOUND}}:200!==m.code?{success:!1,error:{code:s.SecureFileResultErrorCode.SERVER_ERROR}}:(r.dispatch((0,c.secureFileSetStorageInfoAction)(m.content.quota)),{success:!0})}},90489:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.downloadSecureFileHandler=void 0;const n=r(86562),o=r(16516),a=r(20810),i=r(22349),s=r(37104),c=r(71422),u={success:!1,error:{code:n.SecureFileResultErrorCode.INTERNAL_ERROR}},l=15*Math.pow(1024,2);t.downloadSecureFileHandler=async(e,t)=>{const r=await(0,c.getDownloadLink)(e,t);if(!r)return u;const n=await(0,s.downloadFileFromStorage)(e,r,t);if(!n.success)return e.storeService.dispatch((0,a.secureFileDownloadErrorAction)(t.downloadKey)),u;e.storeService.dispatch((0,a.secureFileStartDecipheringAction)(t.downloadKey));const d=await(0,i.decipherSecureFileContent)(n.chunks,t.cryptoKey);if(null===d)return e.storeService.dispatch((0,a.secureFileDownloadErrorAction)(t.downloadKey)),u;const p=new Uint8Array(d),f=JSON.stringify(Array.from(p)),g=f.length>l?(0,o.splitEvery)(l,f):[f];return e.storeService.dispatch((0,a.secureFileChunkReadyAction)(t.downloadKey,g)),{success:!0}}},37403:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initSecureFilesStorageInfoHandler=void 0;const n=r(28354),o=r(90622),a=r(16593),i=r(86562),s=r(20810);t.initSecureFilesStorageInfoHandler=async function({wsService:e,storeService:t}){const r=(0,a.userIdSelector)(t.getState());let c=null;try{c=await e.secureFile.getUploadLink({contentLength:0,secureFileInfoId:(0,n.v4)(),login:r,uki:(0,o.ukiSelector)(t.getState())})}catch(e){return{success:!1,error:{code:i.SecureFileResultErrorCode.SERVER_ERROR}}}return 200===c.code?(t.dispatch((0,s.secureFileSetStorageInfoAction)(c.content.quota)),{success:!0}):(t.dispatch((0,s.secureFileSetStorageInfoAction)(null)),{success:!1})}},32818:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSecureFileHandler=void 0;const n=r(38250),o=r(99994);t.validateSecureFileHandler=async function(e,t){return(0,o.validateSecureFile)(t.fileName,t.fileType)?{success:!0}:{success:!1,error:{code:n.SecureFileResultErrorCode.INVALID_FILE_TYPE}}}},27416:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.secureFilesQuota$=t.getFileUploadProgress$=t.getFileDownloadProgress$=void 0;const n=r(18948),o=r(3343),a=r(89642);t.getFileDownloadProgress$=e=>{const t=(0,a.getSecureFileDownloadSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.getFileUploadProgress$=()=>(0,n.pipe)((0,o.map)(a.secureFileUploadSelector),(0,o.distinctUntilChanged)()),t.secureFilesQuota$=()=>(0,n.pipe)((0,o.map)(a.secureFilesQuotaSelector),(0,o.distinctUntilChanged)())},89642:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.secureFilesQuotaSelector=t.getSecureFileDownloadSelector=t.secureFileUploadSelector=t.secureFileDownloadSelector=t.secureFileInfoSelector=void 0;const n=r(38250),o=r(16516);t.secureFileInfoSelector=e=>e.userSession.personalData.secureFileInfo,t.secureFileDownloadSelector=(e,t)=>{const r=e.userSession.secureFileStorageState.downloads[t];if(!r)return null;const a=r?.status===n.FileDownloadStatus.ChunkReady?{chunk:r.chunks[r.currentChunkIndex]}:{};return{...(0,o.omit)(["chunks","currentChunkIndex"],r),...a}},t.secureFileUploadSelector=e=>e.userSession.secureFileStorageState.upload,t.getSecureFileDownloadSelector=e=>r=>(0,t.secureFileDownloadSelector)(r,e),t.secureFilesQuotaSelector=e=>e.userSession.secureFileStorageState.quota},22349:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decipherSecureFileContent=void 0;const n=r(16038),o=r(46445),a=r(69530),i=r(65675);t.decipherSecureFileContent=async(e,t)=>{const r=(0,i.parseCipheredData)(e),s=r.cryptoConfig;if(!(0,i.isDashlaneSecureDataFlexible)(r)||!(0,i.isNoDerivation)(s.derivation))return null;const c=await(0,o.hashAndSplitKey)((0,n.base64ToBuffer)(t)),u=await(0,a.signHashHmacSHA256)({key:c.hmac,data:(0,n.concatBuffers)(r.iv,r.cipheredContent)});return(0,n.bufferToBase64)(u)!==(0,n.bufferToBase64)(r.hash)?null:await(0,a.decryptAES256)({key:c.aes,iv:r.iv,encryptedData:r.cipheredContent})}},37104:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.downloadFileFromStorage=void 0;const n=r(20810);t.downloadFileFromStorage=async(e,t,r)=>{try{const o=await fetch(t);if(!o.ok)return{success:!1};const a=o.body.getReader(),i=[],s=o.headers.get("Content-Length");e.storeService.dispatch((0,n.secureFileStartDownloadAction)(r.downloadKey,Number.parseInt(s,10)));let c=0,u=!0,l=0;for(;u;){const{done:t,value:o}=await a.read();u=!t,u&&(i.push(new Uint8Array(o)),c+=o.length,l+=o.length,l>1e5&&(e.storeService.dispatch((0,n.secureFileDownloadChunkAction)(r.downloadKey,l)),l=0))}let d=0;const p=new Uint8Array(c);return i.forEach((e=>{p.set(e,d),d+=e.length})),{success:!0,chunks:p}}catch(e){return{success:!1}}}},71422:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDownloadLink=void 0;const n=r(90622),o=r(95623),a=r(16593),i=r(20810);t.getDownloadLink=async(e,t)=>{const{storeService:r,wsService:s}=e,c=r.getState(),u=(0,a.userIdSelector)(c),l=(0,n.ukiSelector)(c);let d=null;try{d=await s.secureFile.getDownloadLink({login:u,uki:l,key:t.downloadKey})}catch(r){return(0,o.logDebug)({tag:["SecureFile"],message:"Error while getting S3 download link",details:{error:r}}),e.storeService.dispatch((0,i.secureFileDownloadErrorAction)(t.downloadKey)),null}return 200!==d.code?(e.storeService.dispatch((0,i.secureFileDownloadErrorAction)(t.downloadKey)),null):d.content.url}},99994:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSecureFile=void 0;const n=r(98337);t.validateSecureFile=(e,t)=>{const r=e.split(".").pop().toLowerCase();return((e,t)=>"rar"===e&&!t)(r,t)||(e=>(0,n.getSecureDocumentsAllowedMimeTypes)().includes(e))(t)&&(e=>(0,n.getSecureDocumentsAllowedExtensions)().includes(`.${e}`))(r)}},86562:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileUploadStatus=t.FileDownloadStatus=t.SecureFileResultErrorCode=void 0,function(e){e.MAX_CONTENT_LENGTH_EXCEEDED="MAX_CONTENT_LENGTH_EXCEEDED",e.QUOTA_EXCEEDED="QUOTA_EXCEEDED",e.INVALID_FILE_TYPE="INVALID_FILE_TYPE",e.INTERNAL_ERROR="INTERNAL_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.FILE_NOT_FOUND="FILE_NOT_FOUND"}(t.SecureFileResultErrorCode||(t.SecureFileResultErrorCode={})),function(e){e.Initial="Initial",e.Downloading="Downloading",e.Deciphering="Deciphering",e.Error="Error",e.ChunkReady="ChunkReady",e.ChunkDownloaded="ChunkDownloaded",e.TransferComplete="TransferComplete"}(t.FileDownloadStatus||(t.FileDownloadStatus={})),function(e){e.None="None",e.Initial="Initial",e.Uploading="Uploading",e.Ciphering="Ciphering",e.Done="Done",e.Error="Error"}(t.FileUploadStatus||(t.FileUploadStatus={}))},74172:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(94187);t.config={commands:{setupDefaultNoteCategories:{handler:n.setupDefaultNoteCategoriesHandler}},queries:{},liveQueries:{}}},94187:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupDefaultNoteCategoriesHandler=void 0;const n=r(10203),o=r(54565),a=r(23136);t.setupDefaultNoteCategoriesHandler=async function(e,t){try{const{storeService:r,sessionService:i}=e;if(!r.isAuthenticated())return{success:!1};const s=r.getPersonalData().noteCategories;return s&&0!==s.length||(t.categories.forEach((e=>{(0,o.saveNoteCategory)(r,{name:e})})),i.getInstance().user.persistPersonalData(),(0,a.getDebounceSync)(r,i)({immediateCall:!0},n.Trigger.Save)),{success:!0}}catch(e){return{success:!1}}}},54565:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveNoteCategory=t.getUpdatedNoteCategory=t.getNewNoteCategory=void 0;const n=r(45291),o=r(95623),a=r(78320),i=r(49551);function s(e){return{kwType:"KWSecureNoteCategory",Id:(0,a.generateItemUuid)(),CategoryName:e.trim(),LastBackupTime:0}}function c(e,t){const r=(0,i.findDataModelObject)(t.id,e);if(!r)throw new Error("UI asks to update an unknown Note Category");return{...r,CategoryName:t.name.trim()}}t.getNewNoteCategory=s,t.getUpdatedNoteCategory=c,t.saveNoteCategory=function(e,t){if(!e.isAuthenticated())return void(0,o.logError)({message:"No session available to save note category"});const r=e.getPersonalData().noteCategories;if(!function(e,t){return"string"==typeof t&&""!==t.trim()&&!e.some((e=>e.CategoryName===t))}(r,t.name))return void(0,o.logError)({message:"Category name is invalid"});const a=t.id?c(r,t):s(t.name);return e.dispatch((0,n.saveNoteCategory)(a)),a}},80818:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(81438),o=r(49293),a=r(77749);t.config={commands:{addSecureNote:{handler:o.addSecureNoteHandler},updateSecureNote:{handler:o.updateSecureNoteHandler},deleteSecureNote:{handler:o.deleteSecureNoteHandler}},queries:{getNote:{selector:n.viewedNoteSelector},getNoteCategories:{selector:n.viewedNoteCategoriesSelector},getNotes:{selector:n.viewedQueriedNotesSelector},getNotesCount:{selector:n.notesCountSelector},getNotesPage:{selector:n.notesPageSelector},getNotesPaginationToken:{selector:n.notesPaginationTokenSelector}},liveQueries:{liveNote:{operator:a.getNote$},liveNotes:{operator:a.notes$},liveNotesBatch:{operator:a.notesBatch$},liveNotesCount:{operator:a.notesCount$}}}},76707:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(13151),t)},46083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleLimitedSharedNotes=void 0;const n=r(89489);t.handleLimitedSharedNotes=function(e,t,r){const o=(0,n.getLimitedSharedItemIds)(t,r);return e.map((e=>({...e,...o[e.Id]?{limitedPermissions:!0}:{}})))}},67859:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSecureNoteHandler=t.noteFormatter=void 0;const n=r(10203),o=r(53576),a=r(23136),i=r(71141),s=r(48313),c=r(47408),u=r(78320),l=r(70252),d=r(13675),p=r(79980),f=r(73566),g=r(85225),m=r(56915),h=r(51504);function y(e){const t=(0,d.sanitizeInputPersonalData)(e),r=(0,c.getUnixTimestamp)();return{kwType:"KWSecureNote",AnonId:(0,u.generateItemUuid)(),CreationDatetime:r,Id:(0,u.generateItemUuid)(),LocaleFormat:o.Country.US,SpaceId:t.spaceId||"",UserModificationDatetime:r,LastBackupTime:0,Title:t.title||"Untitled note",Content:t.content||"",Category:t.category||"noCategory",Secured:t.secured||!1,Type:t.type||"GRAY",Attachments:t.attachments||[]}}t.noteFormatter=y,t.addSecureNoteHandler=function(e,t){try{return function({storeService:e,sessionService:t,eventLoggerService:r},n){const o=e.getPersonalData(),a=y(n),i=e.getState().userSession.personalFeatures.features[h.NEW_URL_PARSER_FF]||e.getState().userSession.personalFeatures.features[h.NEW_URL_PARSER_FF_PROD];(0,p.logAddVaultItem)(e,r,a,i);const c=(0,f.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:o,change:(0,g.makeUpdateChange)(a),userLogin:e.getUserLogin(),platformInfo:(0,m.platformInfoSelector)(e.getState())});e.dispatch((0,s.savePersonalDataItem)(a,a.kwType,c)),t.getInstance().user.persistPersonalData()}(e,t),(0,a.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve({success:!0})}catch(e){return(0,l.sendExceptionLog)({error:e}),e instanceof i.RequestError&&void 0!==e.code?Promise.resolve({success:!1,error:{code:e.code}}):Promise.resolve({success:!1})}}},5948:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSecureNoteHandler=void 0;const n=r(10203),o=r(23136),a=r(81438),i=r(13151),s=r(70252),c=r(45291),u=r(79980),l=r(36513),d=r(90622),p=r(36884),f=r(58107),g=r(71646),m=r(63698),h=r(45157),y=r(16593),S=r(52102),v=r(51504);t.deleteSecureNoteHandler=async function(e,{id:t}){const r=await(async({storeService:e,eventLoggerService:t,wsService:r},n)=>{const o=e.getState();try{let s=null;const E=(0,a.noteSelector)(o,n);if(!E)return{success:!1,error:{code:i.DeleteSecureNoteErrorCode.NOT_FOUND}};const A=await(0,l.makeCryptoService)(),_=(0,y.userLoginSelector)(o),b=(0,d.ukiSelector)(e.getState()),{makeRefuseItemGroupEvent:T}=(0,p.makeItemGroupService)(r,A),{Id:I}=E,{userGroups:w,itemGroups:C}=(0,S.sharingDataSelector)(o),O=(0,g.findItemItemGroup)(I,C);if(O){const t=(0,f.isUserLastAdmin)(O,_),r=(0,f.doesUserReceiveItemGroupViaGroup)(O,w,_);if(t||r)return{success:!1,error:{code:t?i.DeleteSecureNoteErrorCode.LEAVE_SHARING_FORBIDDEN_LAST_ADMIN:i.DeleteSecureNoteErrorCode.LEAVE_SHARING_FORBIDDEN_GROUP_ITEM}};try{const{groupId:e,revision:t}=O,{refuseItemGroup:r}=(0,m.makeItemGroupWS)(),n=await T(e,t,null);await r(_,b,n)}catch(e){return{success:!1,error:{code:i.DeleteSecureNoteErrorCode.LEAVE_SHARING_FAILED}}}}s=(0,h.getRemoveChangeHistory)(e,E);const D=(0,c.removePersonalItem)(E.kwType,E.Id,s);e.dispatch(D);const P=e.getState().userSession.personalFeatures.features[v.NEW_URL_PARSER_FF]||e.getState().userSession.personalFeatures.features[v.NEW_URL_PARSER_FF_PROD];return(0,u.logDeleteVaultItem)(e,t,E,P),{success:!0}}catch(e){const t=new Error(`[SecureNotes] - deleteSecureNote: ${e}`);return(0,s.sendExceptionLog)({error:t}),{success:!1,error:{code:i.DeleteSecureNoteErrorCode.INTERNAL_ERROR}}}})(e,t);return r.success&&(0,o.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve(r)}},49293:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(67859),t),o(r(71407),t),o(r(5948),t)},71407:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateSecureNoteHandler=t.getUpdatedSecureNote=void 0;const n=r(10203),o=r(81438),a=r(23136),i=r(71141),s=r(48313),c=r(47408),u=r(70252),l=r(13675),d=r(13151),p=r(79980),f=r(72079),g=r(73566),m=r(85225),h=r(56915),y=r(51504),S=r(84511);function v(e,t){if(!e)throw new i.RequestError("[updateSecureNote]: unable to find secure note to update.",d.SecureNoteSaveResultErrorCode.NOT_FOUND);const r=(0,l.sanitizeInputPersonalData)(t),n=(0,c.getUnixTimestamp)(),o={Title:r.title??e.Title,Content:r.content??e.Content,Category:r.category??e.Category,Secured:r.secured??e.Secured,Type:r.type??e.Type,SpaceId:r.spaceId??e.SpaceId,UserModificationDatetime:n,Attachments:r.attachments??e.Attachments};return{...e,...o}}t.getUpdatedSecureNote=v,t.updateSecureNoteHandler=async function(e,t){try{!function({storeService:e,sessionService:t,eventLoggerService:r},n){if(!e.isAuthenticated())throw new Error("No session available to updateSecureNote");const a=e.getPersonalData(),i=(0,o.noteSelector)(e.getState(),n.id),c=v(i,n);(0,f.notifySharersNoteUpdated)(e,i,c);const u=e.getState().userSession.personalFeatures.features[y.NEW_URL_PARSER_FF]||e.getState().userSession.personalFeatures.features[y.NEW_URL_PARSER_FF_PROD];(0,p.logEditVaultItem)(e,r,c,i,u);const l=(0,g.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:a,change:(0,m.makeUpdateChange)(c),userLogin:e.getUserLogin(),platformInfo:(0,h.platformInfoSelector)(e.getState())});e.dispatch((0,s.savePersonalDataItem)(c,c.kwType,l)),t.getInstance().user.persistPersonalData()}(e,t);const r=e.storeService.getState();return(0,S.isSharedSelector)(r,t.id)?await e.sessionService.getInstance().user.attemptSync(n.Trigger.SettingsChange):(0,a.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve({success:!0})}catch(e){return(0,u.sendExceptionLog)({error:e}),e instanceof i.RequestError&&void 0!==e.code?Promise.resolve({success:!1,error:{code:e.code}}):Promise.resolve({success:!1})}}},71141:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updatedAt=t.createdAt=t.getCategory=t.RequestError=void 0;const n=r(16516);class o extends Error{constructor(e,t){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name="RequestError",this.code=t}}t.RequestError=o,t.getCategory=(0,n.curry)(((e,t)=>e.find((e=>e.Id===t)))),t.createdAt=e=>(0,n.isNil)(e.CreationDatetime)?(0,n.isNil)(e.CreationDate)?0:e.CreationDate:e.CreationDatetime,t.updatedAt=e=>(0,n.isNil)(e.UserModificationDatetime)?(0,n.isNil)(e.UpdateDate)?0:e.UpdateDate:e.UserModificationDatetime},72079:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notifySharersNoteUpdated=t.makeNoteSpecificProps=t.makeNewNote=t.makeUpdatedNote=t.sharedFields=void 0;const n=r(16516),o=r(47408),a=r(70252),i=r(78163);function s(e,t){const r=t?t.CreationDate:(0,o.getUnixTimestamp)(),n=t?e.content!==t.Content?(0,o.getUnixTimestamp)():t.UpdateDate:r;return{Title:e.title||"Untitled note",Content:e.content||"",Category:e.category||"noCategory",Secured:e.secured||!1,Type:e.type||"GRAY",CreationDate:r,UpdateDate:n}}t.sharedFields=["Title","Content"],t.makeUpdatedNote=async function(e,t){return{...t,...(0,i.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,o.getUnixTimestamp)()}),...s(e.content,t)}},t.makeNewNote=async function(e){return{...(0,i.makeNewPersonalDataItemBase)(e),...s(e.content)}},t.makeNoteSpecificProps=s,t.notifySharersNoteUpdated=async function(e,r,o){!(0,n.equals)((0,n.pick)(t.sharedFields,r),(0,n.pick)(t.sharedFields,o))&&await(0,i.notifySharersOnUpdate)(e,o).catch((e=>{const t=new Error(`[Sharing] - notifySharersNoteUpdated: ${e}`);(0,a.sendExceptionLog)({error:t})}))}},77749:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notes$=t.notesCount$=t.getNote$=t.notesBatch$=void 0;const n=r(18948),o=r(3343),a=r(81438),i=r(35893),s=r(55220),c=r(33627);t.notesBatch$=e=>{const t=(0,i.parseToken)(e),r=(0,a.getViewedNotesBatchSelector)(t);return(0,n.pipe)((0,o.map)(r),(0,o.distinctUntilChanged)(c.sameBatch))},t.getNote$=e=>{const t=(0,a.getViewedNoteSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.notesCount$=e=>{const t=(0,i.parseToken)(e);return(0,n.pipe)((0,o.map)((e=>(0,a.notesCountSelector)(e,t))),(0,o.distinctUntilChanged)())},t.notes$=(0,s.getLivePersonalInfo)(a.getLiveNotesSelector)},3113:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNoteMappers=void 0;const n=r(16516),o=r(71141),a=r(83539),i=r(71646),s=(0,n.curry)(((e,t)=>{const r=t.Category,n=(e||[]).find((e=>e.Id===r));return n&&n.CategoryName?n.CategoryName:"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz"})),c=e=>!!e.Attachments&&e.Attachments.length>0,u=(0,n.curry)(((e,t)=>!!e[t.Id]));t.getNoteMappers=(e,t,r)=>({category:s(e),groupIds:e=>(0,i.getItemUserGroupIds)(r,e.Id),sharingUserIds:e=>(0,i.getItemUserIds)(r,e.Id),createdAt:o.createdAt,hasAttachments:c,id:e=>e.Id,isLimited:u(t),lastUse:a.lastUseMapper,spaceId:e=>e.SpaceId,title:e=>e.Title,updatedAt:o.updatedAt})},93534:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNotesBatch=t.viewNotesBatch=t.getNotesFirstToken=t.getNotesSortToken=t.getNotesFilterToken=void 0;const n=r(16516),o=r(20553),a=r(80010),i=r(83687),s=r(71141);t.getNotesFilterToken=({filterCriteria:e})=>({filterCriteria:e||[]}),t.getNotesSortToken=({sortCriteria:e})=>({uniqField:"id",sortCriteria:e||[]}),t.getNotesFirstToken=(e,t,r,n)=>(0,o.generateFirstToken)(e,t,r.initialBatchSize||30,n),t.viewNotesBatch=(e,t,r,n)=>{const o=(0,i.getSharingStatusItem)(t,r),c=(0,s.getCategory)(n);return(0,a.listView)(o,c,e)},t.getNotesBatch=(0,n.curry)(((e,t,r)=>(0,o.getBatch)(r,e,t)))},6024:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noteMatch=t.searchGetters=t.limitedSearchGetters=void 0;const n=r(64455),o=r(82234);t.limitedSearchGetters=[(0,o.stringProp)("Title")],t.searchGetters=[...t.limitedSearchGetters,(0,o.stringProp)("Content")],t.noteMatch=(e,r)=>{const o=r.Secured?t.limitedSearchGetters:t.searchGetters;return(0,n.match)(o)(e,r)}},81438:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notesCountSelector=t.viewedQueriedNotesSelector=t.queryNotesSelector=t.getViewedNoteSelector=t.getLiveNotesSelector=t.getViewedNotesBatchSelector=t.notesQuerySelector=t.fieldMappersSelector=t.viewedNoteCategoriesSelector=t.notesPaginationTokenSelector=t.notesPageSelector=t.viewedNoteSelector=t.noteSelector=t.noteCategoriesSelector=void 0;const n=r(16516),o=r(32034),a=r(93534),i=r(3113),s=r(23875),c=r(20553),u=r(35893),l=r(91210),d=r(80993),p=r(49551),f=r(6024),g=r(24589),m=r(63566),h=r(52102),y=r(16593),S=r(97006),v=r(26703),E=r(75705),A=r(89698);t.noteCategoriesSelector=e=>e.userSession.personalData.noteCategories,t.noteSelector=(e,t)=>{const r=(0,E.notesSelector)(e);return(0,p.findDataModelObject)(t,r)},t.viewedNoteSelector=(e,r)=>{const n=(0,t.noteSelector)(e,r);if(!n)return;const o=(0,t.noteCategoriesSelector)(e),a=(0,h.sharingDataSelector)(e),i=(0,y.userIdSelector)(e),c=(0,l.limitedSharingItemsSelector)(e);return(0,s.viewNote)(n,a,i,c,o)},t.notesPageSelector=(e,r)=>{const n=(0,u.parseToken)(r),{sortToken:o,filterToken:a}=n,i={sortToken:o,filterToken:a},s=(0,t.fieldMappersSelector)(e),l=(0,t.notesQuerySelector)(e,i),d=I(e),p=(0,c.generateNextToken)(s,n,l),f=(0,c.generatePrevToken)(s,n,l),g=(0,c.getBatch)(s,n,l),m=(0,u.stringifyToken)(p),h=(0,u.stringifyToken)(f);return{batch:d(g),nextToken:m,prevToken:h}},t.notesPaginationTokenSelector=(e,r)=>{const n=(0,a.getNotesSortToken)(r),o=(0,a.getNotesFilterToken)(r),i=(0,t.fieldMappersSelector)(e),s={sortToken:n,filterToken:o},c=(0,t.notesQuerySelector)(e,s),l=(0,a.getNotesFirstToken)(i,s,r,c);return(0,u.stringifyToken)(l)},t.viewedNoteCategoriesSelector=(0,o.createSelector)(t.noteCategoriesSelector,(e=>({items:(0,v.listView)(e),matchingCount:e.length}))),t.fieldMappersSelector=(0,o.createSelector)(t.noteCategoriesSelector,l.limitedSharingItemsSelector,A.acceptedItemGroupsSelector,i.getNoteMappers);const _=(0,u.createOptimizedSortTokenSelector)(((e,{sortToken:t})=>t),n.identity),b=(0,u.createOptimizedFilterTokenSelector)(((e,{filterToken:t})=>t),n.identity),T=()=>f.noteMatch;t.notesQuerySelector=(0,o.createSelector)(t.fieldMappersSelector,T,_,b,E.notesSelector,u.queryData),t.getViewedNotesBatchSelector=e=>{const{sortToken:r,filterToken:n}=e,i={sortToken:r,filterToken:n},s=(0,a.getNotesBatch)(e),c=(0,o.createSelector)((e=>(0,t.notesQuerySelector)(e,i)),t.fieldMappersSelector,s),p=(0,u.optimizeBatchSelector)(c);return(0,o.createSelector)(p,d.sortedSharedItemIdsSelector,l.limitedSharingItemsSelector,t.noteCategoriesSelector,a.viewNotesBatch)};const I=e=>{const r=(0,d.sortedSharedItemIdsSelector)(e),n=(0,l.limitedSharingItemsSelector)(e),o=(0,t.noteCategoriesSelector)(e);return e=>(0,a.viewNotesBatch)(e,r,n,o)};t.getLiveNotesSelector=(0,S.makeLiveSelectorGetter)(E.notesSelector,I,T,t.fieldMappersSelector),t.getViewedNoteSelector=e=>{const r=(0,o.createSelector)(E.notesSelector,(t=>(0,p.findDataModelObject)(e,t)));return(0,o.createSelector)(r,h.sharingDataSelector,y.userIdSelector,l.limitedSharingItemsSelector,t.noteCategoriesSelector,s.viewNote)},t.queryNotesSelector=(0,g.getQuerySelector)(E.notesSelector,T,t.fieldMappersSelector),t.viewedQueriedNotesSelector=(e,r)=>{const n=(0,t.queryNotesSelector)(e,r),o=I(e);return(0,m.viewListResults)(o)(n)},t.notesCountSelector=(0,o.createSelector)(t.fieldMappersSelector,T,b,E.notesSelector,((e,t,r,n)=>(0,u.filterData)(e,t,r,n).length))},75705:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notesSelector=void 0;const n=r(32034),o=r(40602),a=r(57989);t.notesSelector=(0,n.createSelector)((e=>e.userSession.personalData.notes),a.quarantinedSpacesSelector,o.filterOutQuarantinedItems)},13151:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteSecureNoteErrorCode=t.SecureNoteSaveResultErrorCode=void 0,function(e){e.NOT_FOUND="NOT_FOUND"}(t.SecureNoteSaveResultErrorCode||(t.SecureNoteSaveResultErrorCode={})),function(e){e.NOT_FOUND="NOT_FOUND",e.INTERNAL_ERROR="INTERNAL_ERROR",e.LEAVE_SHARING_FAILED="LEAVE_SHARING_FAILED",e.LEAVE_SHARING_FORBIDDEN_LAST_ADMIN="LEAVE_SHARING_FORBIDDEN_LAST_ADMIN",e.LEAVE_SHARING_FORBIDDEN_GROUP_ITEM="LEAVE_SHARING_FORBIDDEN_GROUP_ITEM"}(t.DeleteSecureNoteErrorCode||(t.DeleteSecureNoteErrorCode={}))},23875:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewNote=void 0;const n=r(83687),o=r(71141),a=r(83881);t.viewNote=function(e,t,r,i,s){if(!e)return;const c=(0,n.getSharingStatusDetail)(i,t,r),u=(0,o.getCategory)(s);return(0,a.detailView)(c,u,e)}},26703:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const n=(0,r(16516).defaultTo)("");t.detailView=e=>{if(e)return{id:e.Id,categoryName:n(e.CategoryName)}},t.listView=e=>e.map(t.detailView)},83881:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detailView=void 0;const n=r(16516),o=r(82043),a=r(26703),i=r(71141),s=(0,n.defaultTo)("");t.detailView=(0,n.curry)(((e,t,r)=>{const c=t(r.Category);return{...(0,o.dataModelDetailView)(r),category:(0,a.detailView)(c),color:r.Type,content:s(r.Content),createdAt:(0,i.createdAt)(r),secured:(0,n.defaultTo)(!1,r.Secured),sharingStatus:e(r.Id),title:s(r.Title),updatedAt:(0,i.updatedAt)(r)}}))},80010:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=void 0;const n=r(16516),o=r(82043),a=r(26703),i=r(71141),s=(0,n.defaultTo)("");t.itemView=(0,n.curry)(((e,t,r)=>{const n=t(r.Category),c=r.Secured?"*******":(e=>{if(e.length>30)return e.slice(0,27)+"…"})(s(r.Content));return{...(0,o.dataModelItemView)(r),abbrContent:c,category:(0,a.detailView)(n),color:r.Type,createdAt:(0,i.createdAt)(r),secured:r.Secured||!1,sharingStatus:e(r.Id),title:s(r.Title),updatedAt:(0,i.updatedAt)(r)}})),t.listView=(e,r,n)=>{const o=(0,t.itemView)(e,r);return n.map(o)}},60309:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(43767),o=r(16593),a=r(64717),i=r(17250);t.config={commands:{updateProtectPasswordsSetting:{handler:i.updateProtectPasswordsSettingHandler},toggleDashlane:{handler:i.toggleDashlaneHandler},updateAutofillSettings:{handler:i.updateAutofillSettingsHandler}},queries:{getAnonymousUserId:{selector:n.anonymousUserIdSelector},getIsUrlBanished:{selector:n.getIsUrlBanishedSelector},arePasswordsProtected:{selector:o.protectPasswordsSettingSelector}},liveQueries:{liveArePasswordsProtected:{operator:a.protectPasswordsSetting$}}}},17250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateAutofillSettingsHandler=t.toggleDashlaneHandler=t.updateProtectPasswordsSettingHandler=void 0;const n=r(10203),o=r(70252),a=r(90503),i=r(23136),s=r(29954),c=r(86903),u=r(51504),l=r(68857);t.updateProtectPasswordsSettingHandler=(e,t)=>{try{const r={ProtectPasswords:t};return(0,s.updatePersonalSettings)(e.storeService,e.sessionService,r),(0,c.sendUserSettingsLog)(e),Promise.resolve()}catch(e){const t=new Error(`updateProtectPasswordsSettingHandler: ${e}`);(0,o.sendExceptionLog)({error:t,code:a.ExceptionCriticality.WARNING})}},t.toggleDashlaneHandler=({sessionService:e,storeService:t},r)=>{const o=(0,i.getDebounceSync)(t,e),a=t.getState().userSession.personalFeatures.features[u.NEW_URL_PARSER_FF]||t.getState().userSession.personalFeatures.features[u.NEW_URL_PARSER_FF_PROD],c=t.getPersonalSettings(),d=(0,l.toggleDashlaneOnSiteToPersonalSettingsPartial)(c,r,a);(0,s.updatePersonalSettings)(t,e,d),o({immediateCall:!0},n.Trigger.SettingsChange)},t.updateAutofillSettingsHandler=({sessionService:e,storeService:t},r)=>{const o=(0,i.getDebounceSync)(t,e);(0,s.updatePersonalSettings)(t,e,{AutofillSettings:r.AutofillSettings}),o({immediateCall:!0},n.Trigger.SettingsChange)}},64717:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.protectPasswordsSetting$=void 0;const n=r(18948),o=r(3343),a=r(16593);t.protectPasswordsSetting$=()=>(0,n.pipe)((0,o.map)(a.protectPasswordsSettingSelector),(0,o.distinctUntilChanged)())},91315:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(80518),t)},68857:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleDashlaneOnSiteToPersonalSettingsPartial=void 0;const n=r(16516),o=r(17509),a=r(83195);t.toggleDashlaneOnSiteToPersonalSettingsPartial=function(e,t,r){const i=r?new a.ParsedURL(t.url).getRootDomain():(0,o.extractRootDomain)(t.url);let s=e.AutofillSettings;return s={...s,disabledDomains:t.autofill?(0,n.without)([i],e.AutofillSettings.disabledDomains):(0,n.uniq)(e.AutofillSettings.disabledDomains.concat(i))},{AutofillSettings:s}}},29954:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pickUpdatedPersonalSettings=t.isSaveCredentialDisabledOnDomain=t.signalSaveCredentialDisabled=t.updatePersonalSettings=void 0;const n=r(95623),o=r(17509),a=r(16516),i=r(27517),s=r(51504),c=r(83195);t.updatePersonalSettings=function(e,r,o){if(!e.isAuthenticated())return void n.default.log("No session available to updatePersonalSettings");const a=(0,t.pickUpdatedPersonalSettings)(e.getPersonalSettings(),o);e.dispatch((0,i.editPersonalSettings)(a)),r.getInstance().user.persistPersonalSettings()},t.signalSaveCredentialDisabled=function(e,t,r){if(!e.isAuthenticated())return void n.default.log("No session available, in theory this should not be called");const o=Array.isArray(e.getPersonalSettings().BanishedUrlsList)?e.getPersonalSettings().BanishedUrlsList:[];o.indexOf(r.fullDomain)>0||(e.dispatch((0,i.editPersonalSettings)({BanishedUrlsList:[...o,r.fullDomain]})),t.getInstance().user.persistPersonalSettings())},t.isSaveCredentialDisabledOnDomain=function(e,t){if(!e.isAuthenticated())return n.default.log("No session available, save credential is enabled by default"),!1;const r=Array.isArray(e.getPersonalSettings().BanishedUrlsList)?e.getPersonalSettings().BanishedUrlsList:[];return e.getState().userSession.personalFeatures.features[s.NEW_URL_PARSER_FF]||e.getState().userSession.personalFeatures.features[s.NEW_URL_PARSER_FF_PROD]?r.map((e=>new c.ParsedURL(e))).some((e=>e.getHostname()===t.fullDomain)):r.map(o.getParsedUrl).some((e=>e.fullDomain===t.fullDomain))},t.pickUpdatedPersonalSettings=(e,t)=>{const r=(0,a.pick)(Object.keys(t))(e),n=(0,a.unapply)(a.identity);return(0,a.mergeAll)((0,a.difference)(n(t),n(r)))}},43767:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIsUrlBanishedSelector=t.banishedUrlsListSelector=t.securedDataAutofillCreditcardSelector=t.anonymousUserIdSelector=void 0;const n=r(17509),o=r(83195),a=r(51504),i=r(16593);t.anonymousUserIdSelector=e=>e.userSession.personalSettings.AnonymousUserId,t.securedDataAutofillCreditcardSelector=e=>{const t=e.userSession.personalSettings.SecuredDataAutofillCreditcard;return"boolean"!=typeof t||t},t.banishedUrlsListSelector=e=>(0,i.personalSettingsSelector)(e).BanishedUrlsList??[],t.getIsUrlBanishedSelector=(e,r)=>{const i=e.userSession.personalFeatures.features[a.NEW_URL_PARSER_FF]||e.userSession.personalFeatures.features[a.NEW_URL_PARSER_FF_PROD],s=i?new o.ParsedURL(r).getHostname():(0,n.getParsedUrl)(r).fullDomain;return(0,t.banishedUrlsListSelector)(e).map((e=>i?new o.ParsedURL(e).getHostname():(0,n.getParsedUrl)(e).fullDomain)).some((e=>e===s))}},80518:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutofillOptions=t.AnalysisDisabledStatus=void 0,function(e){e.ANALYSIS_ENABLED="ANALYSIS_ENABLED",e.ANALYSIS_DISABLED_BY_USER="ANALYSIS_DISABLED_BY_USER",e.ANALYSIS_DISABLED_BY_B2B_ADMIN="ANALYSIS_DISABLED_BY_B2B_ADMIN",e.ANALYSIS_DISABLED_BY_KILLSWITCH="ANALYSIS_DISABLED_BY_KILLSWITCH",e.ANALYSIS_DISABLED_BY_2FA_ENFORCEMENT="ANALYSIS_DISABLED_BY_2FA_ENFORCEMENT"}(t.AnalysisDisabledStatus||(t.AnalysisDisabledStatus={})),function(e){e.ANALYSIS_ENABLED_ON_ALL_FORMS="ANALYSIS_ENABLED_ON_ALL_FORMS",e.ANALYSIS_ENABLED_ONLY_ON_LOGINS_AND_PASSWORDS="ANALYSIS_ENABLED_ONLY_ON_LOGINS_AND_PASSWORDS"}(t.AutofillOptions||(t.AutofillOptions={}))},68979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TeamDomainsMatchResult=void 0,r(84977),function(e){e[e.SomeFieldsMatch=0]="SomeFieldsMatch",e[e.NoFieldMatch=1]="NoFieldMatch"}(t.TeamDomainsMatchResult||(t.TeamDomainsMatchResult={}))},11700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isItemToForceCategorize=t.isItemForceCategorizable=t.pickBestTeamSpaceForForcedCategorization=t.ForceCategorizableKWTypes=t.isTeamSpaceAfterGracePeriod=t.isTeamSpaceQuarantined=void 0;const n=r(16516),o=r(53576),a=r(68979),i=r(87496),s=r(43145),c=r(6205),u=(e,t)=>(t||[]).some((t=>{if("string"!=typeof t)return!1;const r=t.toLowerCase();return(e||[]).some((e=>"string"==typeof e&&e.toLowerCase().includes(r)))})),l=e=>[e.Login,e.SecondaryLogin,e.Email,(0,i.getBestUrl)(e),...(0,c.getUserAddedLinkedWebsiteDomains)(e)],d=(e,t)=>{const r=[e.Domain],n=(0,s.findAssociatedCredential)(e,t);return[...r,...n?l(n):[]]},p={[o.DataModelType.KWAuthentifiant]:l,[o.DataModelType.KWGeneratedPassword]:d,[o.DataModelType.KWEmail]:e=>[e.Email]};function f(e){const t=p[e.kwType];return t?t(e):[]}t.isTeamSpaceQuarantined=e=>"revoked"===e.status,t.isTeamSpaceAfterGracePeriod=e=>(0,t.isTeamSpaceQuarantined)(e)&&Boolean(e.shouldDelete),t.ForceCategorizableKWTypes=[o.DataModelType.KWAuthentifiant,o.DataModelType.KWEmail,o.DataModelType.KWGeneratedPassword],t.pickBestTeamSpaceForForcedCategorization=(e,r,i)=>{const s=r.SpaceId,c=(0,o.isGeneratedPassword)(r)?d(r,i):f(r),l=e.reduce(((e,t)=>{const r=u(c,t.info.teamDomains);return{...e,[t.teamId]:r}}),{}),p=e.filter((e=>l[e.teamId]||(0,t.isTeamSpaceQuarantined)(e)&&e.teamId===s)),[g,m]=(0,n.partition)(t.isTeamSpaceQuarantined,p),[h,y]=(0,n.partition)(t.isTeamSpaceAfterGracePeriod,g),[S,v]=(0,n.partition)((e=>t=>e.SpaceId===t.teamId)(r),m),E=[...h,...y,...S,...v];if(0===E.length)return null;const A=E[0];return A.teamId!==r.SpaceId||(0,t.isTeamSpaceQuarantined)(A)?{teamSpace:A,domainsMatchResult:l[A.teamId]?a.TeamDomainsMatchResult.SomeFieldsMatch:a.TeamDomainsMatchResult.NoFieldMatch}:null},t.isItemForceCategorizable=function(e){return e.kwType in p},t.isItemToForceCategorize=(e,t)=>{if(!t?.info)return!1;const{forcedDomainsEnabled:r,teamDomains:n}=t.info;if(!r)return!1;const o=f(e);return u(o,n)}},57989:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.quarantinedSpacesSelector=t.forceCategorizableItemsSelector=t.spacesWithForcedCategorizationEnabledSelector=void 0;const n=r(32034),o=r(7944),a=r(11700),i=r(95458),s=r(72678);t.spacesWithForcedCategorizationEnabledSelector=e=>(e.userSession?.spaceData?.spaces||[]).filter((e=>e?.details?.info&&Array.isArray(e.details.info.teamDomains)&&e.details.info.teamDomains.length>0&&Boolean(e.details.info.forcedDomainsEnabled))),t.forceCategorizableItemsSelector=e=>(0,s.personalDataItemsOfTypeSelector)(e,a.ForceCategorizableKWTypes),t.quarantinedSpacesSelector=(0,n.createSelector)(o.spacesSelector,(e=>e.filter(i.isQuarantined)))},92307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSmartCategorizedSpace=t.getCategory=void 0;const n=r(16516),o=r(52578);t.getCategory=(0,n.curry)(((e,t)=>e.find((e=>e.Id===t)))),t.getSmartCategorizedSpace=e=>t=>{const r=(e=>e.filter((e=>"accepted"===e.details?.status&&e.details?.info?.forcedDomainsEnabled)))(e),n=r?.[0]?.details?.info?.teamDomains??[];return(0,o.isCredentialSmartCategorized)(t,n)?r[0]:null}},76226:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyTeamSpaceContentControlRules=void 0;const n=r(53576),o=r(70252),a=r(45291),i=r(12362),s=r(86691),c=r(24525),u=r(45962),l=r(90622);async function d(e,t,r){const{updates:n,deletions:o,changeHistories:i}=r,s=n.length>0,c=function({deletions:e}){return Object.keys(e).reduce(((t,r)=>t+e[r].length),0)}(r)>0;(s||c)&&(t.dispatch((0,a.teamSpaceContentControlApplied)(n,o,i)),await e.getInstance().user.persistPersonalData())}t.applyTeamSpaceContentControlRules=async function(e,t,r,a,p){let f=null;const g=(0,i.getInstance)(),m=(0,s.getInstance)();try{const o=(0,c.teamSpaceContentControlStateSelector)(r.getState()),i=(0,u.controlTeamSpacesContent)(o),s=i.deletions.KWAuthentifiant||[],h=i.updates.filter(n.isCredential).map((e=>e.Id)),y=i.hiddenItemIds,S=[...s,...h,...y];if(S.length>0){f=m.lockTopic("healthUpdates");const e={credentialIds:S,type:"credentialUpdates"};await g.add("healthUpdates",e)}await d(t,r,i),!function(e,t,r){const n=e.getUserLogin(),o=(0,l.ukiSelector)(e.getState());r.forEach((e=>{t.teamPlans.spaceDeleted({login:n,uki:o,teamId:Number(e.teamId)})}))}(r,a,o.spaces.filter((e=>e.details.shouldDelete))),function(e,t){const{deletions:r,hiddenItemIds:n,updates:o}=t,a={deletedItemIds:Object.keys(r).reduce(((e,t)=>[...e,...r[t]]),[]),hiddenItemIds:n,updatedItemIds:o.map((e=>e.Id))};e.teamSpaceContentControlDone(a)}(e,i),f&&m.releaseTopic("healthUpdates",f);const v=r.getPersonalFeatures().features.ims_web_ph_mv3_dev;if(S.length>0&&v){const{commands:e}=p.createClients().passwordHealth;e.recalculatePasswordHealth()}}catch(e){f&&m.releaseTopic("healthUpdates",f);const t=new Error(`[Spaces] - runTeamSpaceContentControlJob: ${e}`);(0,o.sendExceptionLog)({error:t})}}},45962:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.controlTeamSpacesContent=void 0;const n=r(53576),o=r(17825),a=r(49901),i=r(68979),s=r(11700),c=r(73566),u=r(85225);function l(e,t){return{...e,SpaceId:t}}function d(e,t,r,s){const{domainsMatchResult:d}=t;switch(d){case i.TeamDomainsMatchResult.SomeFieldsMatch:return function(e,t,r){const{deletions:o,changeHistories:a}=t,{deviceName:i,login:s,personalData:l,platformInfo:d}=e,{kwType:p}=r,f=(0,n.isCredential)(r)?(0,c.getUpdatedItemChangeHistory)({change:(0,u.makeRemovalChange)(r),deviceName:i,personalData:l,userLogin:s,platformInfo:d}):null;return{...t,deletions:{...o,[p]:o[p].concat(r.Id)},changeHistories:f?a.concat(f):a}}(e,s,r);case i.TeamDomainsMatchResult.NoFieldMatch:return function(e,t,r){const{updates:o,changeHistories:i}=t,{deviceName:s,login:d,personalData:p,platformInfo:f}=e,g=l(r,a.PERSONAL_SPACE_ID),m=(0,n.isCredential)(g)?(0,c.getUpdatedItemChangeHistory)({change:(0,u.makeUpdateChange)(g),deviceName:s,personalData:p,userLogin:d,platformInfo:f}):null;return{...t,updates:o.concat(g),changeHistories:m?i.concat(m):i}}(e,s,r);default:return(0,o.assertUnreachable)(d)}}const p=e=>e.info.removeForcedContentEnabled&&e.shouldDelete;t.controlTeamSpacesContent=function(e){const t={deletions:{KWAuthentifiant:[],KWEmail:[],KWGeneratedPassword:[]},updates:[],changeHistories:[],hiddenItemIds:[]};return 0===e.spaces.length?t:e.items.reduce(((t,r)=>function(e,t,r){const o=e.spaces.map((e=>e.details)),a=(0,s.pickBestTeamSpaceForForcedCategorization)(o,r,e.credentials);if(!a)return t;const{teamSpace:f}=a,{status:g}=f;switch(g){case"accepted":return function(e,t,r,o){const{updates:a,changeHistories:i}=t,{teamId:s}=r,{deviceName:d,login:p,personalData:f,platformInfo:g}=e,m=l(o,s),h=(0,n.isCredential)(m)?(0,c.getUpdatedItemChangeHistory)({change:(0,u.makeUpdateChange)(m),deviceName:d,personalData:f,userLogin:p,platformInfo:g}):null;return{...t,updates:a.concat(m),changeHistories:h?i.concat(h):i}}(e,t,f,r);case"revoked":return function(e,t,r,n){const{teamSpace:o,domainsMatchResult:a}=t,{hiddenItemIds:s}=n;return{...p(o)?d(e,t,r,n):n,hiddenItemIds:a===i.TeamDomainsMatchResult.SomeFieldsMatch?[...s,r.Id]:s}}(e,a,r,t);default:return t}}(e,t,r)),t)}},24525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.teamSpaceContentControlStateSelector=void 0;const n=r(56915),o=r(16593),a=r(73299),i=r(72678),s=r(7944),c=r(92598),u=r(26147),l=r(74380),d=r(83659),p=r(57989),f=e=>({KWAuthentifiant:(0,l.countAllCredentialsSelector)(e),KWEmail:(0,u.countAllEmailsSelector)(e),KWGeneratedPassword:(0,c.countAllGeneratedPasswordsSelector)(e)});t.teamSpaceContentControlStateSelector=e=>({anonymousSpaceIds:(0,s.anonymousSpaceIdsSelector)(e),credentials:(0,d.unsafeAllCredentialsSelector)(e),itemCountByType:f(e),items:(0,p.forceCategorizableItemsSelector)(e),spaces:(0,p.spacesWithForcedCategorizationEnabledSelector)(e),personalData:(0,i.personalDataSelector)(e),platformInfo:(0,n.platformInfoSelector)(e),login:(0,o.userLoginSelector)(e),deviceName:(0,a.deviceNameSelector)(e)})},67631:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(76226);t.setupSubscriptions=async function(e,t){const{sessionService:r,storeService:o,wsService:a,applicationModulesAccess:i}=t;e.sessionOpened.on((()=>{(0,n.applyTeamSpaceContentControlRules)(e,r,o,a,i)}))}},45817:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(7944);t.config={commands:{},queries:{getSpace:{selector:n.viewedSpaceSelector},getSpaces:{selector:n.viewedSpacesSelector}},liveQueries:{}}},52490:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},77163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.associateTeamSpaceId=void 0;const n=r(11700);t.associateTeamSpaceId=function(e,t,r){if(!(0,n.isItemForceCategorizable)(e)||!t||0===t.length)return e;const o=(e=>e.filter((e=>e.info.forcedDomainsEnabled&&e.info.teamDomains.length&&!(0,n.isTeamSpaceQuarantined)(e))))(t);if(!o.length)return e;const a=(0,n.pickBestTeamSpaceForForcedCategorization)(o,e,r);return a?{...e,SpaceId:a.teamSpace.teamId}:e}},49901:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PERSONAL_SPACE_ID=void 0,t.PERSONAL_SPACE_ID=""},69105:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultPersonalSpace=t.isSpaceItem=void 0;const n=r(53576),o=r(49901);t.isSpaceItem=e=>"SpaceId"in e&&"string"==typeof e.SpaceId,t.getDefaultPersonalSpace=()=>({associatedEmail:null,billingAdmins:[],color:"",companyName:null,info:{name:"",forcedDomainsEnabled:!1,teamDomains:[]},invitationDate:null,isBillingAdmin:!1,isSSOUser:!1,isTeamAdmin:!1,joinDate:null,letter:"",membersNumber:null,planType:null,revokeDate:null,status:n.SpaceStatus.Accepted,teamAdmins:[],teamId:o.PERSONAL_SPACE_ID,teamName:null,tier:n.SpaceTier.Free,shouldDelete:!1})},95458:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isQuarantined=t.isPremiumStatusSpaceQuarantined=void 0,t.isPremiumStatusSpaceQuarantined=e=>e?.status&&"accepted"!==e.status.toLowerCase()&&e.info&&Array.isArray(e.info.teamDomains)&&e.info.teamDomains.length>0&&Boolean(e.info.removeForcedContentEnabled),t.isQuarantined=e=>e&&(0,t.isPremiumStatusSpaceQuarantined)(e.details)},7944:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.anonymousSpaceIdsSelector=t.viewedSpaceSelector=t.viewedSpacesSelector=t.activeSpacesDetailsSelector=t.activeSpacesSelector=t.spacesSelector=void 0;const n=r(69105),o=r(664);t.spacesSelector=e=>e.userSession?.spaceData?.spaces??[],t.activeSpacesSelector=e=>((0,t.spacesSelector)(e)||[]).filter((e=>e.details&&"accepted"===e.details.status)),t.activeSpacesDetailsSelector=e=>(0,t.activeSpacesSelector)(e).map((e=>e.details)),t.viewedSpacesSelector=e=>(0,o.listView)([...(0,t.activeSpacesDetailsSelector)(e),(0,n.getDefaultPersonalSpace)()]),t.viewedSpaceSelector=(e,r)=>(0,t.viewedSpacesSelector)(e).find((e=>e.spaceId===r)),t.anonymousSpaceIdsSelector=e=>e.userSession.personalSettings.SpaceAnonIds},664:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=void 0,t.itemView=({color:e,letter:t,info:r,teamId:n,isSSOUser:o})=>({spaceId:n,displayName:r.name??"",color:e,letter:t,settings:{enableForcedCategorization:r.forcedDomainsEnabled,spaceForcedDomains:r.teamDomains},isSSOUser:o}),t.listView=e=>e.map(t.itemView)},16458:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vaultConfig=void 0;const n=r(98518),o=r(56316);t.vaultConfig={commands:{disableVaultItemProtection:{handler:n.disableVaultProtectionHandler}},queries:{getAutofillProtectionContext:{selector:o.autofillProtectionContextSelector}},liveQueries:{}}},15874:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VaultItemDisableProtectionMode=void 0,function(e){e[e.CannotDisable=0]="CannotDisable",e[e.DisableSpecificVaultItem=1]="DisableSpecificVaultItem",e[e.DisableGeneralSetting=2]="DisableGeneralSetting"}(t.VaultItemDisableProtectionMode||(t.VaultItemDisableProtectionMode={}))},98518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableVaultProtectionHandler=void 0;const n=r(19736),o=r(17250),a=r(18344),i=r(16593);t.disableVaultProtectionHandler=async(e,t)=>{const r=e.storeService.getState();if((0,n.credentialSelector)(r,t)){if((0,i.protectPasswordsSettingSelector)(r))return void(0,o.updateProtectPasswordsSettingHandler)(e,!1);(0,a.disableCredentialProtection)(e,t)}}},56316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autofillProtectionContextSelector=void 0;const n=r(38250),o=r(19736),a=r(27147),i=r(58235),s=r(43767),c=r(81846),u=r(16593);t.autofillProtectionContextSelector=(e,t)=>{if(!t)return{disableMode:n.VaultItemDisableProtectionMode.CannotDisable,isProtected:!1};const r=(0,c.areProtectedItemsUnlockedSelector)(e);if((0,i.paymentCardSelector)(e,t))return{disableMode:n.VaultItemDisableProtectionMode.CannotDisable,isProtected:(0,s.securedDataAutofillCreditcardSelector)(e)&&!r};if((0,a.socialSecurityIdSelector)(e,t))return{disableMode:n.VaultItemDisableProtectionMode.CannotDisable,isProtected:(0,s.securedDataAutofillCreditcardSelector)(e)&&!r};const l=(0,o.credentialSelector)(e,t);return l?(0,u.protectPasswordsSettingSelector)(e)?{disableMode:n.VaultItemDisableProtectionMode.DisableGeneralSetting,isProtected:!r}:{disableMode:n.VaultItemDisableProtectionMode.DisableSpecificVaultItem,isProtected:l.AutoProtected&&!r}:{disableMode:n.VaultItemDisableProtectionMode.CannotDisable,isProtected:!1}}},70660:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(76235);t.bootstrap=e=>{e.register(n.config)}},78163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeAndSendCSVImportAuditLog=t.computeAndSendDeletedCredentialAuditLog=t.computeAndSendModifiedCredentialAuditLog=t.computeAndSendCreatedCredentialAuditLog=t.shouldSendCreateOrModifiedCredentialAuditLog=t.hasVaultAuditLogsFFActivated=t.notifySharersOnUpdate=t.makeNewPersonalDataItemBase=t.makeUpdatedPersonalDataItemBase=void 0;const n=r(28354),o=r(53576),a=r(10294),i=r(98892),s=r(58107),c=r(36513),u=r(56915),l=r(16516),d=r(47408),p=r(78320),f=r(10360),g=r(50990),m=r(17509),h=r(92310),y=r(88205),S=r(11700),v=r(16593);function E(e){const t=(0,l.defaultTo)(""),r="MANUAL"===e.updatedItem.origin?{UserModificationDatetime:e.itemUpdateDate}:{};return{LocaleFormat:(0,f.getLocaleFormat)(e.existingItem,e.updatedItem),SpaceId:t(e.updatedItem.content.spaceId),Attachments:e.updatedItem.attachments,...r}}function A(e){return(0,y.hasFeatureSelector)(e.getState(),"audit_logs_vault")}function _(e){return async(t,r)=>{const o={domain_url:(0,m.extractRootDomain)(r.domainUrl)??""},a={import_count:r.importCount??0},i={category:g.AuditLogCategory.VaultPasswords,log_type:e,properties:e===g.AuditLogType.UserImportedCredentials?a:o,is_sensitive:e!==g.AuditLogType.UserImportedCredentials||void 0,date_time:(new Date).getTime(),schema_version:"1.0.0",uuid:`{${(0,n.v4)().toUpperCase()}}`};await t.createClients().auditLogs.commands.storeAuditLogs({auditLogs:[i]})}}t.makeUpdatedPersonalDataItemBase=E,t.makeNewPersonalDataItemBase=function(e,t=(0,d.getUnixTimestamp)()){return{kwType:e.kwType,Id:(0,p.generateItemUuid)(),AnonId:(0,p.generateItemUuid)(),CreationDatetime:t,LastBackupTime:0,LastUse:t,...E({updatedItem:e,itemUpdateDate:t})}},t.notifySharersOnUpdate=async function(e,t){const r=(0,a.makeItemService)(),n=(0,i.makeItemWS)(),o=e.getSharingData(),l=e.getUserLogin(),d=(0,u.ukiSelector)(e.getState()),{privateKey:p}=e.getUserSession().keyPair,f=(o.items||[]).find((e=>e.itemId===t.Id));if(!f)return;const g=(o.itemGroups||[]).find((e=>(e.items||[]).map((e=>e.itemId)).includes(t.Id)));if(!g)throw new Error("ItemGroup containing item not found in sharingData");const{timestamp:m}=f,h=await(0,s.getItemGroupKey)(g,o.userGroups,p,l);if(!h)throw new Error("Could not decipher itemGroupKey for itemGroup");const y=g.items.find((e=>e.itemId===t.Id));if(!y)throw new Error("Could not find itemKey for item in itemGroup");const S=await(0,c.makeSymmetricEncryption)().decryptAES256(h,y.itemKey),v=await r.makeUpdateItemEvent(m,S,{item:t});return n.updateItem(l,d,v)},t.hasVaultAuditLogsFFActivated=A,t.shouldSendCreateOrModifiedCredentialAuditLog=function(e,t,r){const n=(0,h.currentTeamIdSelector)(e.getState()),a=(0,v.activeSpacesSelector)(e.getState())[0],i=(0,S.isItemToForceCategorize)(t,a);return A(e)&&r!==o.SaveOrigin.IMPORT&&(t.SpaceId===n||i)},t.computeAndSendCreatedCredentialAuditLog=_(g.AuditLogType.UserCreatedCredential),t.computeAndSendModifiedCredentialAuditLog=_(g.AuditLogType.UserModifiedCredential),t.computeAndSendDeletedCredentialAuditLog=_(g.AuditLogType.UserDeletedCredential),t.computeAndSendCSVImportAuditLog=_(g.AuditLogType.UserImportedCredentials)},99293:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.setupSubscriptions=void 0;const n=r(38390);Object.defineProperty(t,"setupSubscriptions",{enumerable:!0,get:function(){return n.setupSubscriptions}});var o=r(70660);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},97006:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeLiveSelectorGetter=void 0;const n=r(32034),o=r(63566),a=r(24589);t.makeLiveSelectorGetter=(e,t,r,i)=>s=>(0,n.createSelector)(e,i,r,t,((e,t,r,n)=>(0,o.viewListResults)(n)((0,a.applyQuery)(r,t,s,e))))},40602:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterOutQuarantinedItems=t.itemIsNotQuarantined=void 0,t.itemIsNotQuarantined=(e,t)=>{const r=((e,t)=>{const r=t.find((t=>t.details&&t.teamId===e.SpaceId));return r?r.details:null})(t,e);return!r||!((e,t)=>e.SpaceId===t.teamId)(t,r)},t.filterOutQuarantinedItems=(e,r)=>0===r.length?e:e.filter((e=>(0,t.itemIsNotQuarantined)(r,e)))},24589:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyQuery=t.getQuerySelector=void 0;const n=r(35893),o=r(32541);t.getQuerySelector=(e,r,n)=>(o,a)=>{const i=e(o),s=n(o),c=r(o);return(0,t.applyQuery)(c,s,a,i)},t.applyQuery=(e,t,r,a)=>{const{sortToken:i,filterToken:s,limit:c}=r,u=(r=>(0,n.filterData)(t,e,s,r))(a),l=(e=>(0,o.sortData)(t,i,e))(u);return{items:c?l.slice(0,c):l,matchingCount:l.length}}},10360:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getValidState=t.isProposedLocaleLocalized=t.getLocaleFormat=void 0;const n=r(53576),o=r(38495),a=r(86056),i=r(95623);function s(e){return!!n.Country[e]&&[n.Country.NO_TYPE,n.Country.UNIVERSAL].every((t=>t!==e))}t.getLocaleFormat=function(e,t){if(!n.isObjectLocalized(t))return n.Country.UNIVERSAL;const r=n.Country[t.content.localeFormat],o=s(r),i=e&&e.LocaleFormat?e.LocaleFormat:n.Country[(0,a.getPlatformInfo)().country]||n.Country.US;return r&&o?r:i},t.isProposedLocaleLocalized=s,t.getValidState=function(e,t){return(0,o.isStateValid)(e,t)?t:(i.default.log(`[Data] Given value (${t}) is not a valid state value for country code ${e}`),"")}},38390:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(67631),o=r(79405),a=r(8566);t.setupSubscriptions=async function(e,t){(0,n.setupSubscriptions)(e,t),(0,o.setupSubscriptions)(e,t),(0,a.setupSubscriptions)(e,t)}},72883:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDataKeyVaultItem=t.PERSONAL_DATA_META_DATA=void 0,t.PERSONAL_DATA_META_DATA=["changeHistories","changesToUpload","generatedPasswords","securityBreaches","securityBreachesMetadata","breachesUpdaterStatus","versionedBreaches","secureFileInfo"],t.isDataKeyVaultItem=function(e){return!t.PERSONAL_DATA_META_DATA.includes(e)}},23136:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentItems=t.getDebounceSync=t.WAIT_MS_BEFORE_SYNC=t.nextTick=void 0;const n=r(28096),o=r(63311),a=r(95623),i=r(84977);t.nextTick=r(28255),t.WAIT_MS_BEFORE_SYNC=6e4,t.getDebounceSync=(e,r)=>(0,o.debounce)((o=>{a.Debugger.log("DebounceSync called => informClientsAndSyncPersonalDataChange()"),function(e,r,o){(0,n.reportDataUpdate)(e),(0,t.nextTick)((()=>{r.getInstance().user.attemptSync(o)}))}(e,r,o)}),t.WAIT_MS_BEFORE_SYNC),t.getCurrentItems=function(e,t){const r=i.default[e];return t&&t[r]||[]}},82043:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maybeDataModelDetailView=t.dataModelDetailView=t.dataModelItemView=void 0;const r=e=>({id:e.Id});t.dataModelItemView=e=>({...r(e),anonId:e.AnonId,hasAttachments:Array.isArray(e.Attachments)&&e.Attachments.length>0,kwType:e.kwType,lastUse:e.LastUse,localeFormat:e.LocaleFormat,spaceId:e.SpaceId});const n=e=>({id:e.Id});t.dataModelDetailView=e=>({...n(e),anonId:e.AnonId,attachments:e.Attachments||[],kwType:e.kwType,lastUse:e.LastUse,localeFormat:e.LocaleFormat,spaceId:e.SpaceId}),t.maybeDataModelDetailView=e=>t=>t?e(t):void 0},8581:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(5600);t.config={commands:{},queries:{getAnonymousComputerId:{selector:n.anonymousComputerIdSelector}},liveQueries:{}}},9486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerABTestingChanged=void 0;const n=r(19697);t.triggerABTestingChanged=function(e){(0,n.default)().abTestingChanged({version:e.version})}},88322:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadAnonymousApplicationId=t.ANONYMOUS_APPLICATION_ID_KEY=void 0;const n=r(28354),o=r(93564),a=r(95623),i=r(70252),s=r(12995);async function c(e){const r=e.getLocalStorage();if(await r.itemExists(t.ANONYMOUS_APPLICATION_ID_KEY)){const e=await r.readItem(t.ANONYMOUS_APPLICATION_ID_KEY);if("string"==typeof e)return e}const a=await async function(e){const r=(0,o.getWindowLocalStorage)();if(!r)return null;const n=r.getItem(t.ANONYMOUS_APPLICATION_ID_KEY);if(!n)return null;const a=n.replaceAll('"',"");return await e.writeItem(t.ANONYMOUS_APPLICATION_ID_KEY,a),a}(r);return a||(0,n.v4)()}t.ANONYMOUS_APPLICATION_ID_KEY="anonymousApplicationId",t.loadAnonymousApplicationId=async(e,t)=>{(0,a.log)({message:"Load anonymousApplicationId"});try{const r=await c(e);(0,a.logInfo)({message:"anonymousApplicationId has been fetched successfully"}),t.dispatch((0,s.loadedAnonymousComputerId)(r))}catch(e){const t=`An error occurred when trying to load anonymousApplicationId ${e} `;(0,i.sendExceptionLog)({message:t})}}},53439:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blacklistedDeviceKeys=void 0,t.blacklistedDeviceKeys=["remoteFile"]},3163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(8581);t.bootstrap=e=>{e.register(n.config)}},55861:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(3163);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},19399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.secureDeviceName=void 0,t.secureDeviceName=function(e){return e?e.replace(/https?:\/\//g," "):e}},5600:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.anonymousComputerIdSelector=void 0;const n=r(2246);t.anonymousComputerIdSelector=()=>(0,n.getCommonAppSetting)("anonymousComputerId")},12787:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventBusConnectors=void 0;const n=r(71796);t.EventBusConnectors={sessionOpened:(0,n.slot)(),syncFailure:(0,n.slot)(),syncSuccess:(0,n.slot)(),teamSpaceContentControlDone:(0,n.slot)(),sessionClosed:(0,n.slot)(),familyMemberLeft:(0,n.slot)(),remoteFileChanged:(0,n.slot)(),appInitialized:(0,n.slot)(),coreServicesReady:(0,n.slot)()}},73297:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.makeEventBusService=void 0;const a=r(71796),i=r(12787);t.makeEventBusService=()=>(0,a.createEventBus)({events:i.EventBusConnectors}),o(r(6775),t)},6775:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},28207:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.carbonEventHooks=void 0;const n=r(8812),o=r(49352);t.carbonEventHooks={healthUpdates:n.healthUpdatesHook,iconsUpdates:o.iconsUpdatesHook}},15660:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCarbonEventStore=void 0,t.defaultCarbonEventStore={healthUpdates:[],iconsUpdates:[]}},86691:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearInstance=t.getInstance=t.setInstance=void 0;const n=r(42898),o=r(28207);let a=null;t.setInstance=e=>{a=new n.EventStoreConsumer(e,o.carbonEventHooks)},t.getInstance=()=>{if(!a)throw new Error("Cannot get EventStoreConsumer instance");return a},t.clearInstance=()=>{a&&a.teardown(),a=null}},12362:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearInstance=t.getInstance=t.setInstance=void 0;let r=null;t.setInstance=e=>{r=e},t.getInstance=()=>{if(!r)throw new Error("Cannot get EventStore instance");return r},t.clearInstance=()=>{r&&r.teardown(),r=null}},46414:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(8821),o=r(306),a=r(99319);t.config={commands:{joinFamily:{handler:n.joinFamilyRequest},leaveFamily:{handler:a.leaveFamilyRequest},removeFamilyMember:{handler:n.removeFamilyMemberRequest},resetFamilyJoinToken:{handler:n.resetFamilyJoinTokenRequest},getFamilyDetails:{handler:o.getFamilyDetailsRequest}},queries:{},liveQueries:{}}},96463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FamilyRenewalPlatform=t.FamilyMemberRole=t.FamilyStatusCode=t.JoinFamilyUserStatus=void 0;var n=r(38443);Object.defineProperty(t,"JoinFamilyUserStatus",{enumerable:!0,get:function(){return n.JoinFamilyUserStatus}}),Object.defineProperty(t,"FamilyStatusCode",{enumerable:!0,get:function(){return n.FamilyStatusCode}}),Object.defineProperty(t,"FamilyMemberRole",{enumerable:!0,get:function(){return n.FamilyMemberRole}}),Object.defineProperty(t,"FamilyRenewalPlatform",{enumerable:!0,get:function(){return n.FamilyRenewalPlatform}})},59047:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(46414);t.bootstrap=e=>{e.register(n.config)}},49409:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0,o(r(96463),t);var a=r(59047);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return a.bootstrap}})},306:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFamilyDetailsRequest=void 0;const n=r(38443),o=r(66374),a=r(95623),i=r(46298),s=r(16593),c=r(4933);t.getFamilyDetailsRequest=async function(e){const{storeService:t}=e,r=(0,s.userLoginSelector)(t.getState());try{const e=await(0,i.getFamilyDetails)(t,r);if((0,i.isApiError)(e))return{success:!1,error:{code:(0,i.getCode)(e.code,[c.UserMustBeFamilyAdmin])}};const{name:a,id:s,joinToken:u,statusCode:l,members:d,maxMembers:p}=e;return{success:!0,response:{name:a,id:s,joinToken:u,statusCode:l,members:{admin:(0,o.getAdmin)(d),regular:(0,o.getMembersByRole)(d,n.FamilyMemberRole.REGULAR),removed:(0,o.getMembersByRole)(d,n.FamilyMemberRole.REMOVED)},spots:(0,o.getSpots)(d,p)}}}catch(e){return a.Debugger.error(`[Family] getFamilyDetailsRequest - Failed: ${e}`),{success:!1,error:{code:i.UnknownError}}}}},66374:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpots=t.getMembersCount=t.getMembersByRole=t.getAdmin=void 0;const n=r(38443);function o(e,t){return e.filter((e=>e.role===t))}function a(e){return o(e,n.FamilyMemberRole.ADMIN).length+o(e,n.FamilyMemberRole.REGULAR).length}t.getAdmin=function(e){return e.find((e=>e.role===n.FamilyMemberRole.ADMIN))},t.getMembersByRole=o,t.getMembersCount=a,t.getSpots=function(e,t){return t-a(e)}},3698:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRenewalInformation=void 0;const n=r(38443),o=r(46298);t.getRenewalInformation=e=>{if(!e||e.state===o.FamilyStopRenewalState.STOPPED)return{showRenewalMessage:!1};const t=(r=e.platform)===o.FamilyStopRenewalPlatform.IOS_APP_STORE?n.FamilyRenewalPlatform.IOS_APP_STORE:r===o.FamilyStopRenewalPlatform.MAC_STORE?n.FamilyRenewalPlatform.MAC_STORE:r===o.FamilyStopRenewalPlatform.PLAY_STORE?n.FamilyRenewalPlatform.PLAY_STORE:null;var r;return t?{showRenewalMessage:!0,platform:t}:{showRenewalMessage:!1}}},68385:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserStatus=void 0;const n=r(53576),o=r(38443);t.getUserStatus=(e,t)=>{switch(e){case n.PremiumStatusCode.NEW_USER:return o.JoinFamilyUserStatus.NEW_USER;case n.PremiumStatusCode.NO_PREMIUM:return t?o.JoinFamilyUserStatus.EXISTING_FREE_USER:o.JoinFamilyUserStatus.NEW_USER;case n.PremiumStatusCode.OLD_ACCOUNT:return o.JoinFamilyUserStatus.EXISTING_FREE_USER;case n.PremiumStatusCode.PREMIUM:case n.PremiumStatusCode.PREMIUM_CANCELLED:return o.JoinFamilyUserStatus.EXISTING_PREMIUM_USER;default:throw new Error("Family getUserStatus: impossible to identify user status")}}},8821:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(50794),t),o(r(98995),t),o(r(49828),t)},50794:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.joinFamilyRequest=void 0;const n=r(95623),o=r(46298),a=r(68385),i=r(3698),s=r(4933);t.joinFamilyRequest=async function(e,t){const{storeService:r}=e,{login:c,joinToken:u}=t;try{const e=await(0,o.joinFamily)(r,{login:c,joinToken:u});if((0,o.isApiError)(e))return{success:!1,error:{code:(0,o.getCode)(e.code,s.joinFamilyErrors)}};const{name:t,userExists:n,statusCode:l,stopRenewalResult:d}=e,p=(0,i.getRenewalInformation)(d);return{success:!0,response:{name:t,userExists:n,userStatus:(0,a.getUserStatus)(l,n),renewalInformation:p}}}catch(e){return n.Debugger.error(`[Family] joinFamilyRequest - Failed: ${e}`),{success:!1,error:{code:o.UnknownError}}}}},99319:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.leaveFamilyRequest=void 0;const n=r(95623),o=r(46298),a=r(16593),i=r(4933);t.leaveFamilyRequest=async function(e){const{storeService:t,eventBusService:r}=e,s=(0,a.userLoginSelector)(t.getState());try{const e=await(0,o.leaveFamily)(t,s);return(0,o.isApiError)(e)?{success:!1,error:{code:(0,o.getCode)(e.code,i.leaveFamilyErrors)}}:(r.familyMemberLeft(),{success:!0,response:{}})}catch(e){return n.Debugger.error(`[Family] leaveFamilyRequest - Failed: ${e}`),{success:!1,error:{code:o.UnknownError}}}}},98995:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeFamilyMemberRequest=void 0;const n=r(95623),o=r(46298),a=r(16593),i=r(4933);t.removeFamilyMemberRequest=async function(e,t){const{storeService:r}=e,s=(0,a.userLoginSelector)(r.getState());try{const e=await(0,o.removeFamilyMember)(r,s,{userId:t.userId});return(0,o.isApiError)(e)?{success:!1,error:{code:(0,o.getCode)(e.code,i.removeFamilyMemberErrors)}}:{success:!0,response:{}}}catch(e){return n.Debugger.error(`[Family] removeFamilyMemberRequest - Failed: ${e}`),{success:!1,error:{code:o.UnknownError}}}}},49828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetFamilyJoinTokenRequest=void 0;const n=r(95623),o=r(46298),a=r(16593),i=r(4933);t.resetFamilyJoinTokenRequest=async function(e){const{storeService:t}=e,r=(0,a.userLoginSelector)(t.getState());try{const e=await(0,o.resetFamilyJoinToken)(t,r);if((0,o.isApiError)(e))return{success:!1,error:{code:(0,o.getCode)(e.code,[i.UserMustBeFamilyAdmin])}};const{joinToken:n}=e;return{success:!0,response:{joinToken:n}}}catch(e){return n.Debugger.error(`[Family] resetFamilyJoinTokenRequest - Failed: ${e}`),{success:!1,error:{code:o.UnknownError}}}}},38443:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FamilyRenewalPlatform=t.FamilyMemberRole=t.FamilyStatusCode=t.JoinFamilyUserStatus=void 0,function(e){e.NEW_USER="NEW_USER",e.EXISTING_FREE_USER="EXISTING_FREE_USER",e.EXISTING_PREMIUM_USER="EXISTING_PREMIUM_USER"}(t.JoinFamilyUserStatus||(t.JoinFamilyUserStatus={})),function(e){e[e.DISCONTINUED=0]="DISCONTINUED",e[e.PREMIUM=1]="PREMIUM",e[e.PREMIUM_PLUS=2]="PREMIUM_PLUS"}(t.FamilyStatusCode||(t.FamilyStatusCode={})),function(e){e.ADMIN="admin",e.REGULAR="regular",e.REMOVED="removed"}(t.FamilyMemberRole||(t.FamilyMemberRole={})),function(e){e.IOS_APP_STORE="ios",e.MAC_STORE="mac",e.PLAY_STORE="playstore"}(t.FamilyRenewalPlatform||(t.FamilyRenewalPlatform={}))},57362:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(88205),o=r(7922);t.config={commands:{},queries:{getHasFeature:{selector:n.hasFeatureSelector},getFeatures:{selector:n.featuresSelector}},liveQueries:{liveHasFeature:{operator:o.hasFeature$}}}},7279:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},72175:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(57362);t.bootstrap=e=>{e.register(n.config)}},43542:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0,o(r(84846),t);var a=r(72175);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return a.bootstrap}})},7922:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasFeature$=void 0;const n=r(18948),o=r(3343),a=r(88205);t.hasFeature$=e=>(0,n.pipe)((0,o.map)((t=>(0,a.hasFeatureSelector)(t,e))),(0,o.distinctUntilChanged)())},88205:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasFeatureSelector=t.featuresSelector=void 0;const n=r(20314);t.featuresSelector=e=>e.userSession.personalFeatures.features||{},t.hasFeatureSelector=(e,r)=>{const o=(0,t.featuresSelector)(e);return(0,n.hasFeature)(o,r)}},20314:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasFeature=void 0,t.hasFeature=(e,t)=>e[t]},84846:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},88485:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(78671);t.config={commands:{setGlobalExtensionSettings:{handler:n.setGlobalExtensionSettings},getGlobalExtensionSettings:{handler:n.getGlobalExtensionSettings}},queries:{},liveQueries:{}}},17644:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setGlobalExtensionSettingsState=t.SET_GLOBAL_EXTENSION_SETTINGS=void 0,t.SET_GLOBAL_EXTENSION_SETTINGS="SET_GLOBAL_EXTENSION_SETTINGS",t.setGlobalExtensionSettingsState=e=>({type:t.SET_GLOBAL_EXTENSION_SETTINGS,extensionSettings:e})},45316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalExtensionSettingsReducer=void 0;var n=r(22018);Object.defineProperty(t,"globalExtensionSettingsReducer",{enumerable:!0,get:function(){return n.globalExtensionSettingsReducer}})},22018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalExtensionSettingsReducer=void 0;const n=r(17644);t.globalExtensionSettingsReducer=(e={},t)=>t.type===n.SET_GLOBAL_EXTENSION_SETTINGS?Object.assign({},e,{extensionSettings:t.extensionSettings}):e},84838:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(88485);t.bootstrap=e=>{e.register(n.config)}},78671:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setGlobalExtensionSettings=t.getGlobalExtensionSettings=void 0;const n=r(66102),o=r(17644),a=r(70252),i="consents",s={interactionDataConsent:"interactionData",personalDataConsent:"personalData"},c={interactionDataConsent:null,personalDataConsent:null};t.getGlobalExtensionSettings=async e=>{const t=e.storageService.getLocalStorage();try{return((e=null)=>{const t=JSON.parse(e);return!t||"object"!=typeof t||Array.isArray(t)?c:Object.values(s).every((e=>Object.prototype.hasOwnProperty.call(t,e)))?{interactionDataConsent:t[s.interactionDataConsent],personalDataConsent:t[s.personalDataConsent]}:c})(await t.readItem(i))}catch{return console.warn("failed parsing user consent values; proceeding as if they haven't been set."),{interactionDataConsent:null,personalDataConsent:null}}},t.setGlobalExtensionSettings=async(e,t)=>{const r=e.storageService.getLocalStorage();try{await r.writeItem(i,JSON.stringify({[s.interactionDataConsent]:t.interactionDataConsent,[s.personalDataConsent]:t.personalDataConsent})),e.storeService.dispatch((0,o.setGlobalExtensionSettingsState)(t)),(0,a.setAllowedToSendExceptionLog)(!1!==t.interactionDataConsent),(0,n.logToggleAnalyticsEvent)(e)}catch{return{success:!1}}return{success:!0}}},44389:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(84838);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},64090:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(47975);t.config={commands:{evaluatePassword:{handler:n.evaluatePassword}},queries:{},liveQueries:{}}},45968:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},54125:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCheckedCredentials=void 0,t.getCheckedCredentials=e=>e.filter((e=>e.Checked))},58356:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBreachedPasswords=void 0,t.getBreachedPasswords=e=>{const t={};return(e||[]).forEach((e=>{(e.LeakedPasswords||[]).forEach((r=>{t.hasOwnProperty(r)?t[r].push(e.BreachId):t[r]=[e.BreachId]}))})),t}},12641:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActiveBreachesCount=t.getCountOfCredentialsCompromisedByBreaches=t.getCompromisedCredentialsCount=t.getCompromisedCredentials=t.getCredentialCompromisedInfo=t.isCredentialCompromisedById=t.getCredentialBreachIdsInfo=t.getCredentialBreachIdsById=void 0;const n=r(70445),o=r(69198);t.getCredentialBreachIdsById=(e,t)=>{const r=t[e];return r?(0,o.computed)(r.credentialBreachIds):(0,o.notComputed)()},t.getCredentialBreachIdsInfo=(e,r,a)=>{if(!(0,n.isEligibleForHealth)(a,e))return(0,o.notEligible)();const i=(0,t.getCredentialBreachIdsById)(e.Id,r);return(0,o.eligible)(i)},t.isCredentialCompromisedById=(e,t)=>{const r=t[e];if(!r)return(0,o.notComputed)();const n=r.credentialBreachIds.length>0;return(0,o.computed)(n)},t.getCredentialCompromisedInfo=(e,r,a)=>{if(!(0,n.isEligibleForHealth)(a,e))return(0,o.notEligible)();const i=(0,t.isCredentialCompromisedById)(e.Id,r);return(0,o.eligible)(i)},t.getCompromisedCredentials=(e,r,n)=>e.filter((e=>{const a=(0,t.getCredentialCompromisedInfo)(e,r,n);return(0,o.healthInfoHasValue)(a,!0)})),t.getCompromisedCredentialsCount=(e,r,n)=>(0,t.getCompromisedCredentials)(e,r,n).length,t.getCountOfCredentialsCompromisedByBreaches=(e,t)=>{const r=e.map((e=>e.BreachId));return Object.values(t).filter((e=>e.some((e=>r.includes(e))))).length},t.getActiveBreachesCount=(e,t)=>e.filter((e=>Object.values(t).some((t=>t.some((t=>t===e.BreachId)))))).length},88411:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialLatestBreach=void 0,t.getCredentialLatestBreach=(e,t)=>0===e.length?null:e.map((e=>{const r=t.find((t=>t.BreachId===e));return r?r.Content:void 0})).filter((e=>void 0!==e)).reduce(((e,t)=>!e||Date.parse(t.eventDate)>Date.parse(e.eventDate)?t:e),null)},35419:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialBreachIds=void 0;const n=r(1651);t.getCredentialBreachIds=(e,t)=>[...Object.keys(t).reduce(((r,o)=>(0,n.arePasswordsSimilar)(o,e.Password)?new Set([...r,...t[o]]):r),new Set)]},62525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialCompromisedView=void 0;const n=r(12641),o=r(69198),a=r(88411);t.getCredentialCompromisedView=function(e,t,r,i){const s=(0,n.getCredentialBreachIdsInfo)(i,e,r);if("not-eligible"===s.type)return(0,o.notEligible)();if("not-computed"===s.value.type)return(0,o.eligible)((0,o.notComputed)());const c=(0,a.getCredentialLatestBreach)(s.value.value,t);return c?(0,o.eligible)((0,o.computed)({isCompromised:!0,details:{date:c.eventDate,title:c.name?c.name:c.domains.join(", ")}})):(0,o.eligible)((0,o.computed)({isCompromised:!1}))}},68046:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getImportantCorruptedCredentialsCount=t.getCorruptedCredentialsCount=t.getImportantCorruptedCredentials=t.getCorruptedCredentials=void 0;const n=r(39824),o=r(69198),a=r(44522);function i(e,t,r,a){return e.filter((e=>{const i=(0,n.getCredentialCorruptedInfo)(e,t,r,a);return(0,o.healthInfoHasValue)(i,!0)}))}function s(e,t,r,i){return e.filter((e=>{const s=(0,a.getCredentialIsImportantInfo)(e,t,i),c=(0,n.getCredentialCorruptedInfo)(e,t,r,i);return(0,o.healthInfoHasValue)(s,!0)&&(0,o.healthInfoHasValue)(c,!0)}))}t.getCorruptedCredentials=i,t.getImportantCorruptedCredentials=s,t.getCorruptedCredentialsCount=function(e,t,r,n){return i(e,t,r,n).length},t.getImportantCorruptedCredentialsCount=function(e,t,r,n){return s(e,t,r,n).length}},39824:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialCorruptedInfo=void 0;const n=r(12641),o=r(41494),a=r(77201),i=r(69198);t.getCredentialCorruptedInfo=function(e,t,r,s){const c=(0,o.getCredentialPasswordReusedInfo)(e,r,s,{reusedCount:1}),u=(0,a.getCredentialPasswordIsWeakInfo)(e,t,s),l=(0,n.getCredentialCompromisedInfo)(e,t,s);return"not-eligible"===c.type||"not-eligible"===u.type||"not-eligible"===l.type?(0,i.notEligible)():(0,i.healthInfoHasValue)(c,!0)||(0,i.healthInfoHasValue)(u,!0)||(0,i.healthInfoHasValue)(l,!0)?(0,i.eligible)((0,i.computed)(!0)):(0,i.healthInfoIsComputed)(c)||(0,i.healthInfoIsComputed)(u)||(0,i.healthInfoIsComputed)(l)?(0,i.eligible)((0,i.computed)(!1)):(0,i.eligible)((0,i.notComputed)())}},8812:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.healthUpdatesHook=void 0;const n=r(38474),o=r(17825);t.healthUpdatesHook=async e=>{const t=(0,n.getInstance)();if(!t)return!1;switch(e.type){case"breachUpdates":return t.handleBreachesUpdates();case"credentialUpdates":return t.handleCredentialUpdates(e.credentialIds);case"spaceUpdates":return t.handleSpaceUpdates(e.spaceIds);default:return(0,o.assertUnreachable)(e)}}},44522:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialIsImportantInfo=void 0;const n=r(70445),o=r(69198);t.getCredentialIsImportantInfo=function(e,t,r){return(0,n.isEligibleForHealth)(r,e)?(0,o.eligible)(((e,t)=>{const r=t[e];return r?(0,o.computed)(r.isImportant):(0,o.notComputed)()})(e.Id,t)):(0,o.notEligible)()}},12857:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCredentialImportant=void 0;const n=r(59890),o=r(2646),a=r(90073);let i=!1,s=e=>{},c=e=>{};const u=new Promise(((e,t)=>{s=e,c=t}));t.isCredentialImportant=async e=>{const t=(0,a.getDomainForCredential)(e);if(!t)return!1;i||(i=!0,(async()=>{const e=`${(0,o.getPublicPath)()}assets/domains/importantDomains.json`,t=await fetch(e),r=await t.json();if(!Array.isArray(r)){const e=new Error("[isCredentialImportant] - getImportantDomains: received unexpected file.");c(e)}s(r)})());const r=await u;return(0,n.binaryContains)(r,t)}},49316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSimilarPasswords=void 0;const n=r(1651),o=(e,t)=>{const r=new Set(e);return r.add(t),r};t.addSimilarPasswords=(e,t,r)=>r.reduce(((e,r)=>((e,t,r)=>{const a={...e},i=new Set;for(const e of t)e.Id!==r.Id&&(0,n.arePasswordsSimilar)(e.Password,r.Password)&&(i.add(e.Id),a[e.Id]=o(a[e.Id]||new Set,r.Id));return a[r.Id]=i,a})(e,t,r)),e)},1651:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arePasswordsSimilar=void 0;t.arePasswordsSimilar=function(e,t,r=3,n=5){const o=e.length,a=t.length;if(o<n||a<n)return e===t;if(e===t)return!0;if(Math.abs(o-a)>r)return!1;let i=new Array(a+1),s=new Array(a+1),c=!1;for(let e=0;e<a+1;e++)i[e]=e;for(let n=0;n<o;n++){s[0]=n+1,c=s[0]>r;for(let o=0;o<a;o++){const a=i[o+1]+1,u=s[o]+1;let l=i[o];e[n]!==t[o]&&l++,s[o+1]=Math.min(a,Math.min(u,l)),c=c&&s[o+1]>r}const o=i;if(i=s,s=o,c)break}return i[a]<=r}},46357:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSimilarPasswords=void 0;const n=r(1651);t.getSimilarPasswords=e=>{const t={};for(let r=0;r<e.length;r++){const o=e[r],a=o.Password,i=o.Id;t[i]||(t[i]=new Set);const s=t[i];for(let o=r+1;o<e.length;o++){const r=e[o].Id,c=e[o].Password,u=(0,n.arePasswordsSimilar)(a,c);t[r]||(t[r]=new Set);const l=t[r];u?(s.add(r),l.add(i)):(s.delete(r),l.delete(i))}}return t}},2730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeSimilarPasswords=void 0;const r=(e,t)=>{const r=new Set(e);for(const e of t)r.delete(e);return r};t.removeSimilarPasswords=(e,t)=>Object.keys(e).reduce(((n,o)=>t.includes(o)?n:{...n,[o]:r(e[o],t)}),{})},41494:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReusedCredentialsCount=t.getReusedCredentials=t.getCredentialSimilarCountInfo=t.getCredentialPasswordReusedInfo=t.getSimilarCredentialsCountById=t.isCredentialPasswordReusedById=void 0;const n=r(70445),o=r(69198);t.isCredentialPasswordReusedById=(e,t,r={reusedCount:1})=>t[e]?{type:"computed",value:t[e].size>=r.reusedCount}:{type:"not-computed"},t.getSimilarCredentialsCountById=(e,t)=>{const r=t[e];return r?{type:"computed",value:r.size}:{type:"not-computed"}},t.getCredentialPasswordReusedInfo=(e,r,a,i={reusedCount:1})=>{if(!(0,n.isEligibleForHealth)(a,e))return(0,o.notEligible)();const s=(0,t.isCredentialPasswordReusedById)(e.Id,r,i);return(0,o.eligible)(s)},t.getCredentialSimilarCountInfo=(e,r,o)=>(0,n.isEligibleForHealth)(o,e)?{type:"eligible",value:(0,t.getSimilarCredentialsCountById)(e.Id,r)}:{type:"not-eligible"},t.getReusedCredentials=(e,r,n)=>e.filter((e=>{const a=(0,t.getCredentialPasswordReusedInfo)(e,r,n);return(0,o.healthInfoHasValue)(a,!0)})),t.getReusedCredentialsCount=(e,r,n)=>(0,t.getReusedCredentials)(e,r,n).length},56591:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSafeCredentials=t.getCredentialSafetyInfo=t.isCredentialSafeById=void 0;const n=r(12641),o=r(41494),a=r(77201),i=r(70445),s=r(69198);t.isCredentialSafeById=(e,t,r)=>{const i=(0,n.isCredentialCompromisedById)(e,t),c=(0,o.isCredentialPasswordReusedById)(e,r),u=(0,a.isCredentialPasswordWeakById)(e,t);return"computed"!==i.type||"computed"!==c.type||"computed"!==u.type?(0,s.notComputed)():(0,s.computed)(!c.value&&!i.value&&!u.value)},t.getCredentialSafetyInfo=(e,r,n,o)=>{if(!(0,i.isEligibleForHealth)(o,e))return(0,s.notEligible)();const a=(0,t.isCredentialSafeById)(e.Id,r,n);return(0,s.eligible)(a)},t.getSafeCredentials=(e,r,n,o)=>e.filter((e=>{const a=(0,t.getCredentialSafetyInfo)(e,r,n,o);return(0,s.healthInfoHasValue)(a,!0)}))},66697:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeSecurityScore=t.MIN_SCORE=t.MIN_CREDENTIALS_COUNT=void 0,t.MIN_CREDENTIALS_COUNT=5;t.MIN_SCORE=.2,t.computeSecurityScore=function(e,r,n){if(n<t.MIN_CREDENTIALS_COUNT)return null;const o=.6*Math.pow(1-r/n,1),a=.4*Math.pow(1-e/n,1);return t.MIN_SCORE+(1-t.MIN_SCORE)*(o+a)}},65587:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSecurityScore=void 0;const n=r(68046),o=r(66697),a=r(70445);t.getSecurityScore=function(e,t,r,i){const s=e.filter((e=>(0,a.isEligibleForHealth)(i,e))),c=(0,n.getCorruptedCredentialsCount)(s,t,r,i),u=(0,n.getImportantCorruptedCredentialsCount)(s,t,r,i);return(e=>null===e?null:Math.round(100*e))((0,o.computeSecurityScore)(c,u,s.length))}},10925:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.load=void 0;const n=r(55539);t.load=async e=>{const{data:t}=await(0,n.httpGetUsingFetch)(`${e}assets/frequency_lists.json`);return t}},93650:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialStrengthInfo=t.getCredentialStrengthById=void 0;const n=r(70445);t.getCredentialStrengthById=(e,t)=>{const r=t[e];return r&&void 0!==r.strength?{type:"computed",value:r.strength}:{type:"not-computed"}},t.getCredentialStrengthInfo=(e,r,o)=>(0,n.isEligibleForHealth)(o,e)?{type:"eligible",value:(0,t.getCredentialStrengthById)(e.Id,r)}:{type:"not-eligible"}},47975:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.evaluatePassword=t.evaluatePasswordStrength=t.loadFrequencyLists=void 0;const n=r(85465),o=r(2646),a=r(10925);let i=()=>{};const s=new Promise((e=>{i=e}));t.loadFrequencyLists=async()=>{const e=(0,o.getPublicPath)(),t=await(0,a.load)(e);(0,n.setFrequencyLists)(t),i()};const c=async e=>(await s,(0,n.evaluate)(e));t.evaluatePasswordStrength=async e=>(await c(e)).score,t.evaluatePassword=async(e,t)=>{const{score:r,feedback:n}=await c(t.password);return{score:r,feedback:n}}},64948:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.evaluatePasswordStrengthOutOfFive=void 0;const n=r(47975);t.evaluatePasswordStrengthOutOfFive=async e=>{if(e)return await(0,n.evaluatePasswordStrength)(e)/25}},38474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearInstance=t.getInstance=t.setInstance=void 0;const n=r(22115);let o=null;t.setInstance=(e,t)=>(o=o||new n.HealthUpdater(e,t),o),t.getInstance=()=>o,t.clearInstance=()=>{o&&o.teardown(),o=null}},22115:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HealthUpdater=void 0;const n=r(18948),o=r(3343),a=r(28354),i=r(69319),s=r(81081),c=r(25334),u=r(51319),l=r(26766),d=r(95623),p=r(89438),f=r(7944),g=r(17825),m=r(21342),h="passwordHealthWebBackend";var y;!function(e){e.BreachesOperation="breachesOperation",e.CredentialsOperation="credentialsOperation",e.SpacesOperation="spacesOperation"}(y||(y={}));const S=async(e,t)=>{const{credentialIds:r}=t,n=(0,l.healthSelector)(e),o=(0,l.breachedPasswordsSelector)(e),a=(0,u.credentialsSelector)(e),i=(0,f.spacesSelector)(e);return await(0,s.updateHealthStateForCredentials)(n,a,i,o,r)},v=async(e,t)=>{const r=(0,l.healthSelector)(e),n=(0,u.credentialsSelector)(e),o=(0,f.spacesSelector)(e),a=(0,m.breachesSelector)(e);return(0,i.updateHealthStateForBreaches)(r,a,n,o)},E=async(e,t)=>{const{spaceIds:r}=t,n=(0,l.healthSelector)(e),o=(0,l.breachedPasswordsSelector)(e),a=(0,u.credentialsSelector)(e),i=(0,f.spacesSelector)(e);return await(0,c.updateHealthStateForSpaces)(n,a,i,o,r)};t.HealthUpdater=class{constructor(e,t){this.localStorageService=e,this.storeService=t,this._operation$=new n.Subject,this.subs=new Set,this.handleCredentialUpdates=async e=>{if(!this.storeService.getPersonalFeatures().features[h])return!0;const t=(0,a.v4)(),r=new Promise((e=>{const r=this._operationResults$.subscribe((n=>{n.id===t&&(e(n.success),r.unsubscribe(),this.subs.delete(r))}));this.subs.add(r)}));return this.triggerCredentialsOperation(t,e),await r},this.handleSpaceUpdates=async e=>{if(!this.storeService.getPersonalFeatures().features[h])return!0;const t=(0,a.v4)(),r=new Promise((e=>{const r=this._operationResults$.subscribe((n=>{n.id===t&&(e(n.success),r.unsubscribe(),this.subs.delete(r))}));this.subs.add(r)}));return this.triggerSpacesOperation(t,e),await r},this.handleBreachesUpdates=async()=>{if(!this.storeService.getPersonalFeatures().features[h])return!0;const e=(0,a.v4)(),t=new Promise((t=>{const r=this._operationResults$.subscribe((n=>{n.id===e&&(t(n.success),r.unsubscribe(),this.subs.delete(r))}));this.subs.add(r)}));return this.triggerBreachesOperation(e),await t},this.triggerCredentialsOperation=(e,t)=>{this._operation$.next({credentialIds:t,id:e,type:y.CredentialsOperation})},this.triggerSpacesOperation=(e,t)=>{this._operation$.next({id:e,spaceIds:t,type:y.SpacesOperation})},this.triggerBreachesOperation=e=>{this._operation$.next({id:e,type:y.BreachesOperation})},this.handleOperation=async(e,t)=>{const{type:r,id:n}=t,o={id:n,type:r},a=this.localStorageService.getInstance();if(this.storeService.getPersonalFeatures().features.ims_web_ph_mv3_dev)return{...o,success:!0};try{const r=this.storeService.getState(),n=await e(r,t);await a.storeHealth(n);const i=(0,p.healthStateUpdated)(n);return this.storeService.dispatch(i),{...o,success:!0}}catch(e){return d.Debugger.error(e),{...o,success:!1}}},this.onOperation=async e=>{switch(e.type){case y.CredentialsOperation:return this.handleOperation(S,e);case y.SpacesOperation:return this.handleOperation(E,e);case y.BreachesOperation:return this.handleOperation(v,e);default:return(0,g.assertUnreachable)(e)}},this.setupOperationsHandling=()=>{const e=this._operation$.pipe((0,o.concatMap)(this.onOperation),(0,o.share)()),t=e.subscribe();this.subs.add(t),this._operationResults$=e},this.setupOperationsHandling()}teardown(){this.subs.forEach((e=>e.unsubscribe()))}}},69319:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateHealthStateForBreaches=void 0;const n=r(35419),o=r(49551),a=r(70445),i=r(58356);t.updateHealthStateForBreaches=(e,t,r,s)=>{const{credentialsHealth:c}=e,u=(0,i.getBreachedPasswords)(t),l=Object.keys(c).reduce(((e,t)=>{const i=(0,o.findDataModelObject)(t,r);if(!i||!(0,a.isEligibleForHealth)(s,i))return e;const l={...c[t],credentialBreachIds:(0,n.getCredentialBreachIds)(i,u)};return{...e,[t]:l}}),{});return{...e,breachedPasswords:u,credentialsHealth:l}}},81081:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCredentialHealthForCredentials=t.updateSimilarPasswordsForCredentials=t.updateHealthStateForCredentials=void 0;const n=r(49316),o=r(2730),a=r(36489),i=r(70445),s=r(49551);t.updateHealthStateForCredentials=async(e,r,n,o,a)=>{const{credentialsHealth:i,similarPasswords:s}=e,c=await(0,t.updateCredentialHealthForCredentials)(i,r,n,o,a),u=await(0,t.updateSimilarPasswordsForCredentials)(s,r,n,a);return{...e,credentialsHealth:c,similarPasswords:u}},t.updateSimilarPasswordsForCredentials=async(e,t,r,a)=>{const c=t.filter((e=>(0,i.isEligibleForHealth)(r,e)));let u=e;const l=new Map;for(const e of a)l.set(e,(0,s.findDataModelObject)(e,c));const d=Array.from(l.entries()).reduce(((e,[t,r])=>({...e,...r?{toAdd:[...e.toAdd,t]}:{toRemove:[...e.toRemove,t]}})),{toRemove:[],toAdd:[]});d.toRemove.length&&(u=(0,o.removeSimilarPasswords)(u,d.toRemove));const p=[];for(const e of d.toAdd)p.push(l.get(e));return p.length&&(u=(0,n.addSimilarPasswords)(u,c,p)),u};const c=(e,t)=>{const{[t]:r,...n}=e;return n};t.updateCredentialHealthForCredentials=async(e,t,r,n,o)=>{let u={...e};const l=[];for(const e of o){u=c(u,e);const o=(0,s.findDataModelObject)(e,t);o&&(0,i.isEligibleForHealth)(r,o)&&l.push([o.Id,(0,a.getCredentialHealth)(n,o)])}const d=await Promise.all(l.map((([e,t])=>t))),p=l.reduce(((e,[t],r)=>({...e,[t]:d[r]})),{});return{...u,...p}}},25334:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateHealthStateForSpaces=void 0;const n=r(81081);t.updateHealthStateForSpaces=(e,t,r,o,a)=>{const i=t.filter((e=>e.SpaceId&&a.includes(e.SpaceId))).map((e=>e.Id));return(0,n.updateHealthStateForCredentials)(e,t,r,o,i)}},77201:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWeakCredentialsCount=t.getWeakCredentials=t.getCredentialPasswordIsWeakInfo=t.isCredentialPasswordWeakById=void 0;const n=r(70445),o=r(69198),a=r(71012);t.isCredentialPasswordWeakById=(e,t)=>{const r=t[e];return r&&void 0!==r.strength?{type:"computed",value:r.strength<a.minAcceptablePasswordStrength}:{type:"not-computed"}},t.getCredentialPasswordIsWeakInfo=(e,r,a)=>{if(!(0,n.isEligibleForHealth)(a,e))return(0,o.notEligible)();const i=(0,t.isCredentialPasswordWeakById)(e.Id,r);return(0,o.eligible)(i)},t.getWeakCredentials=(e,r,n)=>e.filter((e=>{const a=(0,t.getCredentialPasswordIsWeakInfo)(e,r,n);return(0,o.healthInfoHasValue)(a,!0)})),t.getWeakCredentialsCount=(e,r,n)=>(0,t.getWeakCredentials)(e,r,n).length},61566:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(64090);t.bootstrap=e=>{e.register(n.config)}},57289:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeAllHealthState=t.computeCredentialsHealth=t.computeSimilarPasswords=void 0;const n=r(36489),o=r(46357),a=r(70445),i=r(7944),s=r(51319),c=r(21342),u=r(58356);t.computeSimilarPasswords=(e,t)=>{const r=e.filter((e=>(0,a.isEligibleForHealth)(t,e)));return(0,o.getSimilarPasswords)(r)},t.computeCredentialsHealth=async(e,t,r)=>{const o=e.filter((e=>(0,a.isEligibleForHealth)(t,e)));return await(0,n.getCredentialsHealth)(r,o)},t.computeAllHealthState=async e=>{const r=(0,s.credentialsSelector)(e),n=(0,i.activeSpacesSelector)(e),o=(0,c.breachesSelector)(e),a=(0,u.getBreachedPasswords)(o);return{breachedPasswords:a,credentialsHealth:await(0,t.computeCredentialsHealth)(r,n,a),similarPasswords:(0,t.computeSimilarPasswords)(r,n)}}},70445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEligibleForHealth=void 0;const n=r(95458),o=r(40602);t.isEligibleForHealth=(e,t)=>!t.Checked&&!!t.Password&&((e,t)=>{if(!t.SpaceId)return!0;const r=e.filter(n.isQuarantined);return(0,o.itemIsNotQuarantined)(r,t)})(e,t)},36489:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialsHealth=t.getCredentialHealth=void 0;const n=r(12857),o=r(64948),a=r(35419);t.getCredentialHealth=async(e,t)=>{const r=await(0,o.evaluatePasswordStrengthOutOfFive)(t.Password),i=await(0,n.isCredentialImportant)(t);return{credentialBreachIds:(0,a.getCredentialBreachIds)(t,e),isImportant:i,strength:r}},t.getCredentialsHealth=async(e,r)=>{const n={};for(const o of r)n[o.Id]=await(0,t.getCredentialHealth)(e,o);return n}},69198:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isComputedWithValue=t.isComputedAndMatches=t.unwrapComputedValueOr=t.isComputed=t.isEligible=t.notComputed=t.computed=t.notEligible=t.eligible=t.healthInfoIsComputed=t.healthInfoHasValue=t.unwrapHealthInfoValueOr=void 0,t.unwrapHealthInfoValueOr=(e,t)=>"not-eligible"===e.type||"not-computed"===e.value.type?t:e.value.value,t.healthInfoHasValue=(e,t)=>"eligible"===e.type&&"computed"===e.value.type&&e.value.value===t,t.healthInfoIsComputed=e=>"eligible"===e.type&&"computed"===e.value.type,t.eligible=e=>({type:"eligible",value:e}),t.notEligible=()=>({type:"not-eligible"}),t.computed=e=>({type:"computed",value:e}),t.notComputed=()=>({type:"not-computed"}),t.isEligible=e=>"eligible"===e.type,t.isComputed=e=>"computed"===e.type,t.unwrapComputedValueOr=(e,t)=>"computed"===e.type?e.value:t,t.isComputedAndMatches=(e,t)=>"computed"===e.type&&t(e.value),t.isComputedWithValue=(e,r)=>(0,t.isComputedAndMatches)(e,(e=>e===r))},16359:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var a=r(61566);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return a.bootstrap}}),o(r(69198),t)},26766:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.breachedPasswordsSelector=t.similarPasswordsSelector=t.credentialsHealthSelector=t.healthSelector=void 0,t.healthSelector=e=>e.userSession.health,t.credentialsHealthSelector=e=>(0,t.healthSelector)(e).credentialsHealth,t.similarPasswordsSelector=e=>(0,t.healthSelector)(e).similarPasswords,t.breachedPasswordsSelector=e=>e.userSession.health.breachedPasswords},43480:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialHealthView=void 0;const n=r(56591),o=r(77201),a=r(41494),i=r(69198),s=r(62525),c=r(93650);t.getCredentialHealthView=({credentialsHealth:e,similarPasswords:t},r,u)=>l=>{const d=(0,o.getCredentialPasswordIsWeakInfo)(l,e,u),p=(0,c.getCredentialStrengthInfo)(l,e,u),f=(0,s.getCredentialCompromisedView)(e,r,u,l),g=(0,n.getCredentialSafetyInfo)(l,e,t,u),m=(0,a.getCredentialSimilarCountInfo)(l,t,u);if("not-eligible"===d.type||"not-eligible"===p.type||"not-eligible"===f.type||"not-eligible"===g.type||"not-eligible"===m.type)return(0,i.notEligible)();const h={compromised:f.value,isSafe:g.value,isWeak:d.value,similarCredentialsCount:m.value,strength:p.value};return(0,i.eligible)(h)}},17825:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertUnreachable=void 0,t.assertUnreachable=function(e,t="Didn't expect to reach this code."){throw new Error(t)}},32663:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncFilter=void 0,t.asyncFilter=async function(e,t){const r=await Promise.all(e.map(t));return e.filter(((e,t)=>r[t]))}},27627:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncMapLimit=void 0;const n=r(4939);t.asyncMapLimit=(e,t,r,o=e.length)=>{const a=e.length;let i=0;const s=[];let c=0;const u=n=>o=>{if(s[n]=o,i++,a===i)return r(s);c<a-1&&(c++,t(e[c],u(c)))},l=Math.max(Math.min(a,o),1);c=l-1;for(let r=0;r<l;r++)t(e[r],u(r)).catch((e=>(0,n.logWarn)({message:e.message})))}},63311:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0,t.debounce=function(e,t){let r;return function(n,...o){var a=this;clearTimeout(r),n.immediateCall?(r=null,e.apply(a,o)):r=setTimeout((function(){r=null,e.apply(a,o)}),t)}}},5851:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decipherDatabaseRules=void 0;const n=r(56668),o=r(83570);t.decipherDatabaseRules=(e,t)=>(async(e,t)=>{const r=await(0,n.decipherDashlaneSecureData)(t,e,"",(0,o.makeGetDerivateKeyWithCacheAndQueue)());return(0,n.deflatedUtf8ToUtf16)(r)})(e,t)},82761:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeTransactions=void 0,t.sanitizeTransactions=e=>e.filter(Boolean)},93564:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWindowLocalStorage=void 0,t.getWindowLocalStorage=function(){return self.localStorage||null}},96186:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inMemoryInterSessionUnsyncedSliceReducer=void 0;var n=r(75486);Object.defineProperty(t,"inMemoryInterSessionUnsyncedSliceReducer",{enumerable:!0,get:function(){return n.inMemoryInterSessionUnsyncedSliceReducer}})},16373:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetAllLoginNotification=t.addNewLoginNotification=t.RESET_ALL_LOGIN_NOTIFICATIONS=t.ADD_NEW_LOGIN_NOTIFICATION=void 0,t.ADD_NEW_LOGIN_NOTIFICATION="ADD_NEW_LOGIN_NOTIFICATION",t.RESET_ALL_LOGIN_NOTIFICATIONS="RESET_ALL_LOGIN_NOTIFICATIONS",t.addNewLoginNotification=e=>({type:t.ADD_NEW_LOGIN_NOTIFICATION,notification:e}),t.resetAllLoginNotification=()=>({type:t.RESET_ALL_LOGIN_NOTIFICATIONS})},71907:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(16373);t.default=(e=[],t)=>{switch(t.type){case n.ADD_NEW_LOGIN_NOTIFICATION:return[...e,t.notification];case n.RESET_ALL_LOGIN_NOTIFICATIONS:return[];default:return e}}},40042:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginNotificationType=void 0,function(e){e.RELOGIN_NEEDED="RELOGIN_NEEDED",e.SSO_FEATURE_BLOCKED="SSO_FEATURE_BLOCKED",e.SSO_SETUP_ERROR="SSO_SETUP_ERROR",e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(t.LoginNotificationType||(t.LoginNotificationType={}))},75486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inMemoryInterSessionUnsyncedSliceReducer=void 0;const n=r(98160),o=r(71907);t.inMemoryInterSessionUnsyncedSliceReducer=(0,n.combineReducers)({loginNotification:o.default})},96637:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TsEventBusCommandQueryBus=void 0;var n=r(42278);Object.defineProperty(t,"TsEventBusCommandQueryBus",{enumerable:!0,get:function(){return n.TsEventBusCommandQueryBus}})},42278:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TsEventBusCommandQueryBus=void 0;const n=r(71796),o=r(30137),a=r(7036);class i extends o.CommandQueryBus{constructor(e,t,r){super(e),this.bus=r,r||(this.bus=(0,n.createEventBus)({events:t}))}registerCommand(e,t){this.bus[e].on(t)}registerQuery(e,t){this.bus[e].on(t)}registerLiveQuery(e,t){(0,a.connectLazySlot)(this.bus[e],t)}}t.TsEventBusCommandQueryBus=i},76901:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageEventStore=void 0;const n=r(33968),o=r(15660);class a extends n.EventStore{constructor(e){super(),this.localStorageService=e}async store(e){await this.localStorageService.getInstance().storeEventStore(e)}async retrieve(){const e=await this.localStorageService.getInstance().getEventStore();return null===e?o.defaultCarbonEventStore:{healthUpdates:e.healthUpdates||o.defaultCarbonEventStore.healthUpdates,iconsUpdates:e.iconsUpdates||o.defaultCarbonEventStore.iconsUpdates}}}t.LocalStorageEventStore=a},42898:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventStoreConsumer=void 0;const n=r(28354);t.EventStoreConsumer=class{constructor(e,t){this.eventStore=e,this.hooks=t,this.liveConsumptionSubs={},this.lockIds={},this.startTopic=e=>{this.startLiveConsumption(e),this.consumeTopic(e)},this.lockTopic=e=>{this.stopLiveConsumption(e);const t=(0,n.v4)();return this.lockIds[e]=(this.lockIds[e]||new Set).add(t),t},this.releaseTopic=(e,t)=>{const r=this.lockIds[e];r&&r.delete(t),r&&0!==r.size||this.startTopic(e)},this.teardown=()=>{Object.keys(this.liveConsumptionSubs).forEach(this.stopLiveConsumption)},this.consumeTopic=async e=>{const t=await this.eventStore.getItems(e);for(const r of t)this.handleItem(e,r)},this.startLiveConsumption=e=>{this.liveConsumptionSubs[e]||(this.liveConsumptionSubs[e]=this.eventStore.newItems$(e).subscribe((t=>this.handleItem(e,t))))},this.stopLiveConsumption=e=>{this.liveConsumptionSubs[e]&&(this.liveConsumptionSubs[e].unsubscribe(),delete this.liveConsumptionSubs[e])},this.handleItem=async(e,t)=>{const r=this.hooks[e];r||await this.eventStore.remove(e,t.id),await r(t.event)&&await this.eventStore.remove(e,t.id)}}}},36606:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebugConnector=void 0;const n=r(71796);t.DebugConnector={log:(0,n.slot)(),info:(0,n.slot)(),warning:(0,n.slot)(),error:(0,n.slot)()}},44261:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},92231:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(44261),t),o(r(36606),t)},31335:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(78759),o=r(91296);t.config={commands:{},queries:{getIsBrazeContentDisabled:{selector:n.disableBrazeContentCardsSelector},getIsLoginFlowMigrationDisabled:{selector:n.disableLoginFlowMigrationSelector},getIsAutoSSOLoginDisabled:{selector:n.disableAutoSSOLoginSelector}},liveQueries:{liveIsBrazeContentDisabled:{operator:o.disableBrazeContentCardsOperator$},liveIsLoginFlowMigrationDisabled:{operator:o.disableLoginFlowMigrationOperator$},liveIsAutoSSOLoginDisabled:{operator:o.disableAutoSSOLoginOperator$}}}},19469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(31335);t.bootstrap=e=>{e.register(n.config)}},13240:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestedKillSwitches=void 0,function(e){e.DisableAutofill="disableAutofill",e.BrazeContentCardsDisabled="brazeContentCardsDisabled",e.DisableLoginFlowMigration="disableLoginFlowMigration",e.DisableAutoSSOLogin="disableAutoSSOLogin"}(t.RequestedKillSwitches||(t.RequestedKillSwitches={}))},36641:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerKillswitchCron=void 0;const n=r(55030);let o=null;t.triggerKillswitchCron=function(e){return o||((0,n.updateKillswitchState)(e),o=setInterval((()=>{try{(0,n.updateKillswitchState)(e)}catch{}}),36e5)),o}},61:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(19469);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},55030:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateKillswitchState=void 0;const n=r(66677),o=r(46298),a=r(10857),i=r(13240);t.updateKillswitchState=async e=>{const t=Object.values(i.RequestedKillSwitches),r=await(0,n.getKillSwitches)(e,t);if((0,o.isApiError)(r))throw new Error(`[Killswitch] - updateKillswitchState : ${r.message} (${r.code})`);e.dispatch((0,a.killswitchStateUpdated)({disableAutofill:r.disableAutofill||!1,brazeContentCardsDisabled:r.brazeContentCardsDisabled||!1,disableLoginFlowMigration:r.disableLoginFlowMigration||!1,disableAutoSSOLogin:r.disableAutoSSOLogin||!1}))}},91296:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableAutoSSOLoginOperator$=t.disableLoginFlowMigrationOperator$=t.disableBrazeContentCardsOperator$=void 0;const n=r(18948),o=r(3343),a=r(78759);t.disableBrazeContentCardsOperator$=()=>(0,n.pipe)((0,o.map)(a.disableBrazeContentCardsSelector),(0,o.distinctUntilChanged)()),t.disableLoginFlowMigrationOperator$=()=>(0,n.pipe)((0,o.map)(a.disableLoginFlowMigrationSelector),(0,o.distinctUntilChanged)()),t.disableAutoSSOLoginOperator$=()=>(0,n.pipe)((0,o.map)(a.disableAutoSSOLoginSelector),(0,o.distinctUntilChanged)())},78759:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableAutoSSOLoginSelector=t.disableLoginFlowMigrationSelector=t.disableBrazeContentCardsSelector=t.disableAutofillSelector=t.killswitchSelector=void 0;const n=r(79390);t.killswitchSelector=e=>e.userSession.killswitch||(0,n.getEmptyKillswitchState)(),t.disableAutofillSelector=e=>(0,t.killswitchSelector)(e).disableAutofill||!1,t.disableBrazeContentCardsSelector=e=>(0,t.killswitchSelector)(e).brazeContentCardsDisabled||!1,t.disableLoginFlowMigrationSelector=e=>(0,t.killswitchSelector)(e).disableLoginFlowMigration||!1,t.disableAutoSSOLoginSelector=e=>(0,t.killswitchSelector)(e).disableAutoSSOLogin},23299:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(36641);t.setupSubscriptions=function(e,t){e.appInitialized.on((()=>{const{storeService:e}=t;(0,n.triggerKillswitchCron)(e)}))}},89855:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBackupCryptError=t.BackupCryptError=t.BackupCryptErrorMessages=t.BackupCryptErrorCode=void 0;const n=r(92263);var o;!function(e){e[e.TRANSACTION_CLEAR_CONTENT_EMPTY=0]="TRANSACTION_CLEAR_CONTENT_EMPTY",e[e.EMPTY_CLEAR_FULL_BACKUP_FILE_XML=1]="EMPTY_CLEAR_FULL_BACKUP_FILE_XML",e[e.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY=2]="CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY",e[e.EMPTY_FULL_BACKUP_FILE=3]="EMPTY_FULL_BACKUP_FILE",e[e.NULL_FULL_BACKUP_FILE_MAP=4]="NULL_FULL_BACKUP_FILE_MAP",e[e.EMPTY_FULL_BACKUP_FILE_MAP=5]="EMPTY_FULL_BACKUP_FILE_MAP",e[e.EMPTY_CLEAR_FULL_BACKUP_FILE=6]="EMPTY_CLEAR_FULL_BACKUP_FILE",e[e.CLEAR_FULL_BACKUP_FILE_NOT_XML=7]="CLEAR_FULL_BACKUP_FILE_NOT_XML",e[e.FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE=8]="FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE",e[e.FULL_BACKUP_FILE_ITEM_WITHOUT_ID=9]="FULL_BACKUP_FILE_ITEM_WITHOUT_ID",e[e.TRANSACTION_CONTENT_NOT_XML=10]="TRANSACTION_CONTENT_NOT_XML"}(o=t.BackupCryptErrorCode||(t.BackupCryptErrorCode={})),t.BackupCryptErrorMessages={[o.TRANSACTION_CLEAR_CONTENT_EMPTY]:"Empty transaction content",[o.EMPTY_CLEAR_FULL_BACKUP_FILE_XML]:"Empty full backup file XML",[o.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY]:"Full backup file XML not resolved as an array",[o.EMPTY_FULL_BACKUP_FILE]:"Empty full backup file",[o.NULL_FULL_BACKUP_FILE_MAP]:"Null full backup file map",[o.EMPTY_FULL_BACKUP_FILE_MAP]:"Empty full backup file map",[o.EMPTY_CLEAR_FULL_BACKUP_FILE]:"Deciphered full backup file content is empty",[o.CLEAR_FULL_BACKUP_FILE_NOT_XML]:"WRONG_PASSWORD",[o.FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE]:"Full backup file item without kwType",[o.FULL_BACKUP_FILE_ITEM_WITHOUT_ID]:"Full backup file item without Id",[o.TRANSACTION_CONTENT_NOT_XML]:"WRONG_PASSWORD"},t.BackupCryptError={codes:o,name:"BackupCryptError",messages:t.BackupCryptErrorMessages},t.isBackupCryptError=e=>(0,n.isCarbonError)(e,t.BackupCryptError)},46e3:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decryptFullBackupFile=void 0;const n=r(80469),o=r(89855),a=r(83638),i=r(56668),s=r(92263),c=r(61797),u=r(70252),l=r(58582),d=async(e,t)=>{try{const e=await(0,c.parseDashlaneXml)(t);if(!e)throw new s.CarbonError(o.BackupCryptError,o.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE_XML);if(!Array.isArray(e))throw new s.CarbonError(o.BackupCryptError,o.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY);return e}catch(t){throw e(l.announcements.decipherFullBackupParseFailed(t)),t}},p=(e,t,r)=>{if(null==t)return e(l.announcements.decipherFullBackupSkipped()),!1;if(""===t)throw new s.CarbonError(o.BackupCryptError,o.BackupCryptErrorCode.EMPTY_FULL_BACKUP_FILE);if(null===r)throw new s.CarbonError(o.BackupCryptError,o.BackupCryptErrorCode.NULL_FULL_BACKUP_FILE_MAP);if(t&&0===r.size)throw new s.CarbonError(o.BackupCryptError,o.BackupCryptErrorCode.EMPTY_FULL_BACKUP_FILE_MAP);return!0},f=async(e,t,r)=>{try{const t=await e.decrypt(r),n=(0,i.deflatedUtf8ToUtf16)(t);if(!n){const e=new s.CarbonError(o.BackupCryptError,o.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE);throw u.sendExceptionLog({error:e}),e}if("string"==typeof n&&!n.trim().startsWith("<"))throw new s.CarbonError(o.BackupCryptError,o.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_NOT_XML);return n}catch(o){const a=(0,n.attemptReadCryptoPayload)(e,r);throw t(l.announcements.decipherFullBackupDecipherFailed(o,a)),o}},g=(e,t,r)=>{const{Id:n,kwType:i}=t,c=r.get(n);if(void 0===c)return e(l.announcements.decipherFullBackupItemSkipped(new Error("Transaction not in full backup list skipped"),{itemType:i,itemId:n})),null;const u=t instanceof Object?Object.keys(t):[];if(!i){const t=new s.CarbonError(o.BackupCryptError,o.BackupCryptErrorCode.FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE);throw e(l.announcements.decipherFullBackupItemReadFailed(t.addAdditionalInfo({itemId:n,itemKeys:u}),n)),t}return n?(e(l.announcements.decipherFullBackupItemRead(i,n,c)),{type:(0,a.getTransactionTypeFromDataModelType)(i),backupDate:c,action:"BACKUP_EDIT",identifier:n,content:t}):(e(l.announcements.decipherFullBackupItemSkipped(new Error("Transaction without id skipped"),{itemType:i})),null)};t.decryptFullBackupFile=async function(e,t,r,a){try{if(!p(t,r,a))return[];t(l.announcements.decipherFullBackupStarted());const o=await f(e,t,r),i=await d(t,o),s=((e,t,r)=>{const n=t.length,o=[],a=new Set;for(let i=0;i<n;++i){const n=t[i];n.Id&&a.add(n.Id);const s=g(e,n,r);s&&o.push(s)}return((e,t,r)=>{for(const n in t.keys())r.has(n)||e(l.announcements.decipherFullBackupItemSkipped(new Error("Missing full backup item content"),{itemId:n}))})(e,r,a),o})(t,(0,n.fixKwType)(i),a);return t(l.announcements.decipherFullBackupFinished(s.length)),s}catch(e){if(t(l.announcements.decipherFullBackupFailed(e)),(0,s.isCarbonError)(e,o.BackupCryptError,o.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE))return[];throw e}}},63713:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encryptSingleTransaction=t.decrypt=void 0;const n=r(16516),o=r(46e3),a=r(16859);Object.defineProperty(t,"encryptSingleTransaction",{enumerable:!0,get:function(){return a.encryptSingleTransaction}});const i=r(59700),s=r(58582),c=e=>(0,n.partition)((e=>"SETTINGS"===e.type),e),u=e=>(0,n.partition)((e=>!!e.content),e);t.decrypt=async function(e,t,r,n,l){if(null===l)throw new Error("null transactions");const d=Number(r&&n.size);t(s.announcements.decipherStarted(d));const p=await(0,o.decryptFullBackupFile)(e,t,r,n);t(s.announcements.decipherTransactionsStarted());const[f,g]=c(l),m=await(0,a.decryptSingleTransactions)(e,t,f),[h,y]=u(g),S=(0,i.makeOpenSessionProgressService)();S.init(h.length);const v=await(0,a.decryptSingleTransactions)(e,t,h,S),E=(e=>e.map((e=>({...e,content:null}))))(y);t(s.announcements.decipherTransactionsFinished());const A=[...p,...m,...E,...v];return t(s.announcements.decipherFinished(A)),A}},59700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeOpenSessionProgressService=void 0;const n=r(19697);t.makeOpenSessionProgressService=()=>{let e,t,r,o;const a=(a=!1)=>{const i=(0,n.default)();if(!i)return;const s=t/e*100;(a||Date.now()-o>=500&&s!==r)&&(r=s,o=Date.now(),i.openSessionProgressChanged({statusDescription:"percentage of work done before session opening",statusProgress:r}))};return{init(n){e=n,t=0,r=0,o=Date.now(),a(!0)},incrementJobsDone(){if(void 0===e)throw new Error("openSessionProgressService must be initialized before begin used");t++,a()},decrementJobsTodo(){e--}}}},16859:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encryptSingleTransaction=t.decryptSingleTransactions=t.decryptSingleTransaction=t.parseTransactionContentXml=t.decryptTransactionContent=void 0;const n=r(53576),o=r(80469),a=r(89855),i=r(92263),s=r(61797),c=r(70252),u=r(56668),l=r(58582);t.decryptTransactionContent=async(e,t,{content:r})=>{try{const t=await e.decrypt(r);return(0,u.deflatedUtf8ToUtf16)(t)}catch(n){const a=(0,o.attemptReadCryptoPayload)(e,r);throw t(l.announcements.decipherTransactionDecipherFailed(n,a)),n}},t.parseTransactionContentXml=async(e,t)=>{try{return(e=>{if(!e){const e=new i.CarbonError(a.BackupCryptError,a.BackupCryptErrorCode.TRANSACTION_CLEAR_CONTENT_EMPTY);throw c.sendExceptionLog({error:e}),e}})(t),(e=>{if("string"==typeof e&&!e.trim().startsWith("<"))throw new i.CarbonError(a.BackupCryptError,a.BackupCryptErrorCode.TRANSACTION_CONTENT_NOT_XML)})(t),await(0,s.parseDashlaneXml)(t)}catch(t){throw e(l.announcements.decipherTransactionParseFailed(t)),t}};const d=(e,t)=>Object.assign({},e,{content:t});async function p(e,r,i){try{r(l.announcements.decipherTransactionStarted(i));const n=await(0,t.decryptTransactionContent)(e,r,i),a=await(0,t.parseTransactionContentXml)(r,n),s=(0,o.fixKwType)(a),c=d(i,s);return r(l.announcements.decipherTransactionFinished(i)),c}catch(e){const{type:t}=i;if((0,a.isBackupCryptError)(e)){const{action:r,backupDate:o,identifier:a}=i,s=(0,n.getDataModelTypeFromTransactionType)(t);e.addAdditionalInfo({itemId:a,itemType:s,action:r,backupDate:o})}if(r(l.announcements.decipherTransactionFailed(e,i)),"SETTINGS"===t)throw e;return null}}t.decryptSingleTransaction=p,t.decryptSingleTransactions=async function(e,t,r,n){const o=r.map((async r=>{const o=await p(e,t,r);return n&&n.incrementJobsDone(),o}));return(await Promise.all(o)).filter(Boolean)},t.encryptSingleTransaction=async function(e,t,r={}){const n=(0,u.utf16ToDeflatedUtf8)(t.content),o=await e.getInstance().encrypt(n,r);return{...t,content:o}}},80469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fixKwType=t.attemptReadCryptoPayload=void 0;const n=r(54218);t.attemptReadCryptoPayload=(e,t)=>{try{return e.readCryptoPayload(t)}catch(e){}return""},t.fixKwType=function e(t){return Array.isArray(t)?t.map((t=>e(t))):(0,n.default)(t)?Object.keys(t).reduce(((r,n)=>{const o=t[n];return"__type__"===n?r.kwType=o:r[n]=e(o),r}),{}):t}},17936:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(44317),t)},44317:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDiagnosticReportMonitor=void 0;const n=r(53576),o=r(54034),a=r(92263),i=r(89855);t.makeDiagnosticReportMonitor=()=>{let e="",t="";const r="fullBackupFile";return(s,{timestamp:c})=>{switch(s.type){case"DecipherFullBackupStarted":(0,o.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:"[decryptFullBackupFile] - Start Decryption"});break;case"DecipherFullBackupItemRead":{const{itemId:e}=s;(0,o.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:`[fullBackupFileItemsContent] - ${e} succeed`,status:"succeed"})}break;case"DecipherFullBackupItemSkipped":{const{itemId:e}=s;(0,o.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:e?`[fullBackupFileItemsContent] - ${e} does not have backupDate => return null`:"[fullBackupFileItemsContent] - does not have id => return null",status:"failed"})}break;case"DecipherFullBackupParseFailed":{const{error:t}=s;e=(0,a.isCarbonError)(t,i.BackupCryptError,i.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE_XML)?"parseXml does not failed but result nothing => reject err: WRONG_PASSWORD":(0,a.isCarbonError)(t,i.BackupCryptError,i.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY)?"parseXml result not an Array => reject err: fullBackupFileItemsContent is not an Array":`parseXml failed => reject err: ${t}`}break;case"DecipherFullBackupDecipherFailed":{const{error:t}=s;e=(0,a.isCarbonError)(t,i.BackupCryptError,i.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_NOT_XML)?'decrypt result with xml string which does not start with "<" => throw new Error WRONG_PASSWORD':(0,a.isCarbonError)(t,i.BackupCryptError,i.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE)?"decrypt result with empty xml => throw new Error (Decrypt FullBackupFile empty result)":"failed to decipher fullBackupFile"}break;case"DecipherFullBackupFailed":(0,o.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:`[decryptFullBackupFile] - ${e}: null`,status:"failed"});break;case"DecipherFullBackupFinished":(0,o.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:`[decryptFullBackupFile] - ${e}: null`,status:"succeed"});break;case"DecipherTransactionStarted":{const{identifier:e,action:r,backupDate:a,time:i,transactionType:u}=s;t=e,(0,o.triggerSendTransactionDecipheringDiagnosticLog)({identifier:e,action:r,backupDate:a,time:i,type:n.TransactionType[u],date:c,message:"[decryptSingleTransaction] - Start Decryption"})}break;case"DecipherTransactionDecipherFailed":{const{error:t}=s;e=(0,a.isCarbonError)(t,i.BackupCryptError,i.BackupCryptErrorCode.TRANSACTION_CONTENT_NOT_XML)?'decrypt resolve with xml string that does not start with "<"':(0,a.isCarbonError)(t,i.BackupCryptError,i.BackupCryptErrorCode.TRANSACTION_CLEAR_CONTENT_EMPTY)?"decrypt resolve empty xml content":"Decryption failed with error"}break;case"DecipherTransactionParseFailed":e="failed to parse XML content";break;case"DecipherTransactionFailed":(0,o.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:t,message:`[decryptSingleTransaction] - ${e}: null`,status:"failed"});break;case"DecipherTransactionFinished":(0,o.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:t,message:"[decryptSingleTransaction] - Success",status:"succeed"})}}}},91453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatStep=void 0;const n=r(2695),o=r(17825);t.formatStep=e=>{switch(e){case n.SyncLoggerStep.Main:return"[Sync]";case n.SyncLoggerStep.Chronological:return"[Sync|Chrono]";case n.SyncLoggerStep.Latest:return"[Sync|Latest]";case n.SyncLoggerStep.Decipher:return"[Sync|Decipher]";case n.SyncLoggerStep.DecipherFullBackup:return"[Sync|Decipher|FullBackup]";case n.SyncLoggerStep.DecipherTransactions:return"[Sync|Decipher|Transactions]";case n.SyncLoggerStep.Duplicate:return"[Sync|Duplicate]";case n.SyncLoggerStep.Cipher:return"[Sync|Cipher]";case n.SyncLoggerStep.Upload:return"[Sync|Upload]";case n.SyncLoggerStep.Save:return"[Sync|Save]";case n.SyncLoggerStep.TreatProblem:return"[Sync|TreatProblem]";case n.SyncLoggerStep.TreatProblemSummary:return"[Sync|TreatProblem|Summary]";case n.SyncLoggerStep.Sharing:return"[Sync|Sharing]";case n.SyncLoggerStep.TeamAdminData:return"[Sync|TeamAdminData]";default:(0,o.assertUnreachable)(e)}}},92221:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(71044),t)},71369:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logSyncVerbose=t.logSyncDebug=t.logSyncInfo=t.logSyncWarn=t.logSyncError=void 0;const n=r(95623),o=(0,n.withTag)("Sync");t.logSyncError=o(n.logError),t.logSyncWarn=o(n.logWarn),t.logSyncInfo=o(n.logInfo),t.logSyncDebug=o(n.logDebug),t.logSyncVerbose=o(n.logVerbose)},71044:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeSyncLoggerMonitor=void 0;const n=r(58582),o=r(2695),a=r(90635),i=r(91453),s=r(71369);t.makeSyncLoggerMonitor=()=>{let e=null;const t=e=>"object"==typeof e&&e.message||`${e}`,r=(e,t)=>`${(0,i.formatStep)(e)} ${t}`;return(i,{timestamp:c})=>{switch(i.type){case"SyncStarted":{const{syncType:t}=i;e=c,(0,s.logSyncInfo)({message:r(o.SyncLoggerStep.Main,"Start"),details:{step:o.SyncLoggerStep.Main,Type:(0,a.syncTypeForSyncLogger)(t)}})}break;case"ChronologicalSyncStarted":{const{updatesCount:t,deletesCount:n}=i;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Chronological,"Start"),details:{step:o.SyncLoggerStep.Chronological,Timestamp:e,Update:t,Delete:n}})}break;case"LatestRequested":{const{lock:t,needsKeys:n}=i;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Latest,"Request"),details:{step:o.SyncLoggerStep.Latest,Timestamp:e,Lock:t,SharingKeys:n}})}break;case"LatestSucceeded":{const{updatesCount:t,deletesCount:n,fullBackupSize:a}=i;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Latest,"Success"),details:{step:o.SyncLoggerStep.Latest,Timestamp:e,Update:t,Delete:n,FullBackup:a}})}break;case"LatestFailed":{const{error:e}=i;(0,s.logSyncWarn)({message:r(o.SyncLoggerStep.Latest,"Error"),details:{step:o.SyncLoggerStep.Latest,Cause:t(e)}})}break;case"DecipherStarted":{const{fullBackupFileSize:e}=i;(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.Decipher,"Start"),details:{step:o.SyncLoggerStep.Decipher,Count:e}})}break;case"DecipherFullBackupSkipped":(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.DecipherFullBackup,"Skip"),details:{step:o.SyncLoggerStep.DecipherFullBackup}});break;case"DecipherFullBackupStarted":(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.DecipherFullBackup,"Start"),details:{step:o.SyncLoggerStep.DecipherFullBackup}});break;case"DecipherFullBackupItemRead":{const{itemType:e,itemId:t,backupDate:n}=i;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.DecipherFullBackup,"Transaction"),details:{step:o.SyncLoggerStep.DecipherFullBackup,Type:e,Id:t,Date:n}})}break;case"DecipherFullBackupItemSkipped":{const{error:e,itemType:n,itemId:a}=i;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.DecipherFullBackup,"TransactionSkipped"),details:{step:o.SyncLoggerStep.DecipherFullBackup,Type:n,Id:a,Cause:t(e)}})}break;case"DecipherFullBackupFinished":{const{itemsCount:e}=i;(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.DecipherFullBackup,"Done"),details:{step:o.SyncLoggerStep.DecipherFullBackup,Count:e}})}break;case"DecipherFullBackupFailed":{const{error:e}=i;(0,s.logSyncWarn)({message:r(o.SyncLoggerStep.DecipherFullBackup,"Error"),details:{step:o.SyncLoggerStep.DecipherFullBackup,Cause:t(e)}})}break;case"DecipherTransactionsStarted":(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.DecipherTransactions,"Start"),details:{step:o.SyncLoggerStep.DecipherTransactions}});break;case"DecipherTransactionFinished":{const{action:e,transactionType:t,identifier:n,backupDate:a}=i;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.DecipherTransactions,"Transaction"),details:{step:o.SyncLoggerStep.DecipherTransactions,Action:e,Type:t,Id:n,Date:a}})}break;case"DecipherTransactionFailed":{const{error:e,transactionType:n,identifier:a,backupDate:c}=i;(0,s.logSyncWarn)({message:r(o.SyncLoggerStep.DecipherTransactions,"Error"),details:{step:o.SyncLoggerStep.DecipherTransactions,Cause:t(e),Type:n,Id:a,Date:c}})}break;case"DecipherTransactionsFinished":(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.DecipherTransactions,"Done"),details:{step:o.SyncLoggerStep.DecipherTransactions}});break;case"DecipherFinished":{const{updatesCount:e,deletesCount:t}=i;(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.Decipher,"Done"),details:{step:o.SyncLoggerStep.Decipher,Transactions:e+t}})}break;case"TransactionDuplicated":{const{transactionType:e,identifier:t,backupDate:n}=i;(0,s.logSyncWarn)({message:r(o.SyncLoggerStep.Duplicate,"Transaction"),details:{step:o.SyncLoggerStep.Duplicate,Type:e,Id:t,Date:n}})}break;case"CipherStarted":(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.Cipher,"Start"),details:{step:o.SyncLoggerStep.Cipher}});break;case"TransactionCiphered":{const{transactionType:e,itemId:t,backupDate:n}=i;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Cipher,"Transaction"),details:{step:o.SyncLoggerStep.Cipher,Type:e,Id:t,Date:n}})}break;case"CipherFinished":(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.Cipher,"Done"),details:{step:o.SyncLoggerStep.Cipher}});break;case"UploadRequested":{const{updatedCount:e,deletedCount:t}=i;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Upload,"Request"),details:{step:o.SyncLoggerStep.Upload,Update:e,Delete:t}})}break;case"UploadSucceeded":{const{timestamp:e}=i;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Upload,"Success"),details:{step:o.SyncLoggerStep.Upload,Timestamp:e}})}break;case"UploadFailed":{const{error:e}=i;(0,s.logSyncWarn)({message:r(o.SyncLoggerStep.Upload,"Error"),details:{step:o.SyncLoggerStep.Upload,Cause:t(e)}})}break;case"SaveStarted":(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.Save,"Start"),details:{step:o.SyncLoggerStep.Save}});break;case"SaveFinished":(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.Save,"Done"),details:{step:o.SyncLoggerStep.Save}});break;case"ChronologicalSyncFinished":{const{summarySize:e}=i;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Chronological,"Done"),details:{step:o.SyncLoggerStep.Chronological,Summary:e}})}break;case"TreatProblemStarted":(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.TreatProblem,"Start"),details:{step:o.SyncLoggerStep.TreatProblem}});break;case"TreatProblemSummaryStarted":{const{localItemsCount:e,remoteItemsCount:t}=i;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.TreatProblemSummary,"Start"),details:{step:o.SyncLoggerStep.TreatProblemSummary,Local:e,Remote:t}})}break;case"TreatProblemSummaryCompared":{const{result:e,cause:t,transactionType:a,identifier:c,localDate:u,remoteDate:l}=i,d=void 0!==l?{RemoteDate:l}:{},p=t?{Cause:n.TreatProblemSummaryComparedCause[t]}:{},f=u?{LocalDate:u}:{};(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.TreatProblemSummary,"Comparison"),details:{step:o.SyncLoggerStep.TreatProblemSummary,Result:n.TreatProblemSummaryComparedResult[e],...p,Type:a,Id:c,...f,...d}})}break;case"TreatProblemSummaryFinished":(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.TreatProblemSummary,"Done"),details:{step:o.SyncLoggerStep.TreatProblemSummary}});break;case"TreatProblemDiffComputed":{const{transactionsToDownloadCount:e,transactionsToUploadCount:t}=i;0===e&&0===t?(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.TreatProblem,"Diff UpToDate"),details:{step:o.SyncLoggerStep.TreatProblem}}):(0,s.logSyncWarn)({message:r(o.SyncLoggerStep.TreatProblem,"Diff"),details:{step:o.SyncLoggerStep.TreatProblem,Download:e,Upload:t}})}break;case"TreatProblemFinished":(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.TreatProblem,"Done"),details:{step:o.SyncLoggerStep.TreatProblem}});break;case"TeamAdminDataSyncStarted":(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.TeamAdminData,"Start"),details:{step:o.SyncLoggerStep.TeamAdminData}});break;case"TeamAdminDataSyncFinished":(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.TeamAdminData,"Done"),details:{step:o.SyncLoggerStep.TeamAdminData}});break;case"SharingSyncStarted":(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Sharing,"Start"),details:{step:o.SyncLoggerStep.Sharing}});break;case"SharingSyncFinished":(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Sharing,"Done"),details:{step:o.SyncLoggerStep.Sharing}});break;case"SyncFinished":(0,s.logSyncInfo)({message:r(o.SyncLoggerStep.Main,"Done"),details:{step:o.SyncLoggerStep.Main}});break;case"SyncFailed":{const{error:e}=i;(0,s.logSyncError)({message:r(o.SyncLoggerStep.Main,"Failed"),details:{step:o.SyncLoggerStep.Main,Cause:t(e)}})}}}}},2695:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncLoggerStep=void 0,function(e){e[e.Main=0]="Main",e[e.Chronological=1]="Chronological",e[e.Latest=2]="Latest",e[e.Decipher=3]="Decipher",e[e.DecipherFullBackup=4]="DecipherFullBackup",e[e.DecipherTransactions=5]="DecipherTransactions",e[e.Duplicate=6]="Duplicate",e[e.Cipher=7]="Cipher",e[e.Upload=8]="Upload",e[e.Save=9]="Save",e[e.TreatProblem=10]="TreatProblem",e[e.TreatProblemSummary=11]="TreatProblemSummary",e[e.Sharing=12]="Sharing",e[e.TeamAdminData=13]="TeamAdminData"}(t.SyncLoggerStep||(t.SyncLoggerStep={}))},90635:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.syncTypeForSyncLogger=void 0;const n=r(37898),o=r(17825);t.syncTypeForSyncLogger=e=>{switch(e){case n.SyncType.LIGHT_SYNC:return"Light";case n.SyncType.FULL_SYNC:return"Full";case n.SyncType.FIRST_SYNC:return"Initial";default:(0,o.assertUnreachable)(e)}}},98083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.treatProblemSummaryFinished=t.treatProblemSummaryCompared=t.treatProblemSummaryStarted=t.transactionDuplicated=t.decipherTransactionFinished=t.decipherTransactionFailed=t.decipherTransactionParseFailed=t.decipherTransactionDecipherFailed=t.decipherTransactionStarted=t.decipherFullBackupFinished=t.decipherFullBackupFailed=t.decipherFullBackupItemReadFailed=t.decipherFullBackupItemSkipped=t.decipherFullBackupItemRead=t.decipherFullBackupDecipherFailed=t.decipherFullBackupParseFailed=t.decipherFullBackupStarted=t.decipherFullBackupSkipped=t.cipherFinished=t.transactionCiphered=t.cipherStarted=t.uploadFailed=t.uploadSucceeded=t.uploadRequested=t.syncTypeChanged=t.syncFailed=t.syncFinished=t.decipherTransactionsFinished=t.decipherTransactionsStarted=t.decipherFinished=t.decipherStarted=t.latestFailed=t.latestSucceeded=t.latestRequested=t.teamAdminDataSyncFinished=t.teamAdminDataSyncFailed=t.teamAdminDataSyncStarted=t.sharingSyncFinished=t.sharingSyncFailed=t.sharingSyncInvalidSyncData=t.sharingSyncStarted=t.treatSharingKeysFailed=t.treatProblemFinished=t.treatProblemDiffComputed=t.treatProblemFailed=t.treatProblemStarted=t.chronologicalSyncFinished=t.chronologicalSyncFailed=t.chronologicalSyncStarted=t.syncStarted=void 0,t.saveFinished=t.saveStarted=void 0;const n=r(31982),o=r(90826),a=r(1347),i=r(63002);t.syncStarted=(e,t)=>({type:"SyncStarted",trigger:e,syncType:t}),t.chronologicalSyncStarted=e=>({type:"ChronologicalSyncStarted",updatesCount:(0,i.countEditionUploadChanges)(e?.changesToUpload||[]),deletesCount:(0,i.countDeletionUploadChanges)(e?.changesToUpload||[])}),t.chronologicalSyncFailed=e=>({type:"ChronologicalSyncFailed",error:e}),t.chronologicalSyncFinished=(e,t)=>({type:"ChronologicalSyncFinished",summarySize:(0,n.countSyncSummaryTransactions)(e),fullBackupFileSize:t}),t.treatProblemStarted=()=>({type:"TreatProblemStarted"}),t.treatProblemFailed=e=>({type:"TreatProblemFailed",error:e}),t.treatProblemDiffComputed=(e,t)=>({type:"TreatProblemDiffComputed",transactionsToDownloadCount:e,transactionsToUploadCount:t}),t.treatProblemFinished=()=>({type:"TreatProblemFinished"}),t.treatSharingKeysFailed=e=>({type:"TreatSharingKeysFailed",error:e}),t.sharingSyncStarted=()=>({type:"SharingSyncStarted"}),t.sharingSyncInvalidSyncData=(e,t)=>({type:"SharingSyncInvalidSyncData",itemGroupId:e,errorName:t}),t.sharingSyncFailed=e=>({type:"SharingSyncFailed",error:e}),t.sharingSyncFinished=()=>({type:"SharingSyncFinished"}),t.teamAdminDataSyncStarted=()=>({type:"TeamAdminDataSyncStarted"}),t.teamAdminDataSyncFailed=e=>({type:"TeamAdminDataSyncFailed",error:e}),t.teamAdminDataSyncFinished=()=>({type:"TeamAdminDataSyncFinished"}),t.latestRequested=(e,t)=>({type:"LatestRequested",lock:"nolock"!==e,needsKeys:t}),t.latestSucceeded=e=>({type:"LatestSucceeded",updatesCount:(0,o.countEditionTransactions)(e.transactionList),deletesCount:(0,o.countRemoveTransactions)(e.transactionList),fullBackupSize:(e.fullBackupFileList||[]).length}),t.latestFailed=e=>({type:"LatestFailed",error:e}),t.decipherStarted=e=>({type:"DecipherStarted",fullBackupFileSize:e}),t.decipherFinished=e=>({type:"DecipherFinished",updatesCount:(0,o.countEditionTransactions)(e),deletesCount:(0,o.countRemoveTransactions)(e)}),t.decipherTransactionsStarted=()=>({type:"DecipherTransactionsStarted"}),t.decipherTransactionsFinished=()=>({type:"DecipherTransactionsFinished"}),t.syncFinished=()=>({type:"SyncFinished"}),t.syncFailed=e=>({type:"SyncFailed",error:e}),t.syncTypeChanged=e=>({type:"SyncTypeChanged",syncType:e}),t.uploadRequested=(e,t)=>({type:"UploadRequested",updatedCount:e,deletedCount:t}),t.uploadSucceeded=(e,t,r)=>({type:"UploadSucceeded",updatedCount:e,deletedCount:t,timestamp:r}),t.uploadFailed=e=>({type:"UploadFailed",error:e}),t.cipherStarted=()=>({type:"CipherStarted"}),t.transactionCiphered=(e,t,r)=>({type:"TransactionCiphered",transactionType:e,itemId:t,backupDate:r}),t.cipherFinished=()=>({type:"CipherFinished"}),t.decipherFullBackupSkipped=()=>({type:"DecipherFullBackupSkipped"}),t.decipherFullBackupStarted=()=>({type:"DecipherFullBackupStarted"}),t.decipherFullBackupParseFailed=e=>({type:"DecipherFullBackupParseFailed",error:e}),t.decipherFullBackupDecipherFailed=(e,t)=>({type:"DecipherFullBackupDecipherFailed",error:e,cryptoPayload:t}),t.decipherFullBackupItemRead=(e,t,r)=>({type:"DecipherFullBackupItemRead",itemType:e,itemId:t,backupDate:r}),t.decipherFullBackupItemSkipped=(e,t)=>({type:"DecipherFullBackupItemSkipped",itemType:t?.itemType,itemId:t?.itemId,error:e}),t.decipherFullBackupItemReadFailed=(e,t)=>({type:"DecipherFullBackupItemReadFailed",error:e,itemId:t}),t.decipherFullBackupFailed=e=>({type:"DecipherFullBackupFailed",error:e}),t.decipherFullBackupFinished=e=>({type:"DecipherFullBackupFinished",itemsCount:e}),t.decipherTransactionStarted=({action:e,backupDate:t,identifier:r,time:n,type:o})=>({type:"DecipherTransactionStarted",time:n,action:e,backupDate:t,identifier:r,transactionType:o}),t.decipherTransactionDecipherFailed=(e,t)=>({type:"DecipherTransactionDecipherFailed",error:e,cryptoPayload:t}),t.decipherTransactionParseFailed=e=>({type:"DecipherTransactionParseFailed",error:e}),t.decipherTransactionFailed=(e,{backupDate:t,identifier:r,type:n})=>({type:"DecipherTransactionFailed",error:e,transactionType:n,identifier:r,backupDate:t}),t.decipherTransactionFinished=({action:e,backupDate:t,identifier:r,type:n})=>({type:"DecipherTransactionFinished",action:e,transactionType:n,identifier:r,backupDate:t}),t.transactionDuplicated=(e,t,r)=>({type:"TransactionDuplicated",transactionType:e,identifier:t,backupDate:r}),t.treatProblemSummaryStarted=(e,t)=>({type:"TreatProblemSummaryStarted",localItemsCount:(0,a.countPersonalDataItems)(e),remoteItemsCount:(0,n.countSyncSummaryTransactions)(t)}),t.treatProblemSummaryCompared=(e,t,r,n)=>({type:"TreatProblemSummaryCompared",result:e,transactionType:t,identifier:r,...n?.cause?{cause:n.cause}:{},...n?.localDate?{localDate:n.localDate}:{},...n?.remoteDate?{remoteDate:n.remoteDate}:{}}),t.treatProblemSummaryFinished=()=>({type:"TreatProblemSummaryFinished"}),t.saveStarted=()=>({type:"SaveStarted"}),t.saveFinished=()=>({type:"SaveFinished"})},58582:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.announcements=void 0;const a=r(98083);t.announcements=a,o(r(76921),t)},76921:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TreatProblemSummaryComparedCause=t.TreatProblemSummaryComparedResult=void 0,function(e){e[e.UpToDate=0]="UpToDate",e[e.Upload=1]="Upload",e[e.Download=2]="Download"}(t.TreatProblemSummaryComparedResult||(t.TreatProblemSummaryComparedResult={})),function(e){e[e.OutOfDate=0]="OutOfDate",e[e.Missing=1]="Missing"}(t.TreatProblemSummaryComparedCause||(t.TreatProblemSummaryComparedCause={}))},32523:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateLocalDuplicates=void 0;const n=r(16516),o=r(17509),a=r(70705),i=r(49551),s=r(78320),c=r(30144),u=r(75270),l=r(53628),d=r(83195),p=(e,t,r)=>{const n=a.mergingRules[t.type];if(!n||0===n.length)return!1;if(!t.content)return!1;const i=(0,l.fixPersonalDataItemFromExternalSource)(t.content,t.identifier);for(const{property:a,canonize:s}of n){let n=e[a],u=i[a];if("Domain"===a&&"AUTHENTIFIANT"===t.type&&n&&u&&(n=r?new d.ParsedURL(e.Url).getRootDomain():(0,o.getParsedUrl)(e.Url).rootDomain,u=r?new d.ParsedURL(i.Url).getRootDomain():(0,o.getParsedUrl)(i.Url).rootDomain),(s?(0,c.canonizeText)(n):n)!==(s?(0,c.canonizeText)(u):u))return!0}return!1};t.generateLocalDuplicates=function(e,t,r,o){return(0,i.filterDataModelObjects)(t,e,["changeHistories"]).reduce(((e,t)=>{const a=(e=>{const t=(0,u.findTransaction)(e.Id,r);return!t||(0,u.isRemovalTransaction)(t)?null:p(e,t,o)?{duplicate:{...(0,n.clone)(e),AnonId:(0,s.generateItemUuid)(),Id:(0,s.generateItemUuid)()},duplicatedFromId:e.Id}:null})(t);return a?(e.push(a),e):e}),[])}},70705:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergingRules=void 0,t.mergingRules={ADDRESS:[{property:"AddressFull",canonize:!1},{property:"City",canonize:!1},{property:"ZipCode",canonize:!0}],AUTH_CATEGORY:[{property:"CategoryName",canonize:!1}],AUTHENTIFIANT:[{property:"Domain",canonize:!1},{property:"Email",canonize:!1},{property:"Login",canonize:!1},{property:"Note",canonize:!1},{property:"OtpSecret",canonize:!1},{property:"OtpUrl",canonize:!1},{property:"Password",canonize:!1},{property:"SubdomainOnly",canonize:!1},{property:"Title",canonize:!1},{property:"TrustedUrl",canonize:!1},{property:"UseFixedUrl",canonize:!1}],BANKSTATEMENT:[{property:"BankAccountIBAN",canonize:!0}],COMPANY:[{property:"Name",canonize:!1},{property:"JobTitle",canonize:!1}],DATA_CHANGE_HISTORY:[{property:"ObjectId",canonize:!0}],DRIVERLICENCE:[{property:"Number",canonize:!0}],EMAIL:[{property:"Email",canonize:!0}],FISCALSTATEMENT:[{property:"FiscalNumber",canonize:!0},{property:"TeledeclarantNumber",canonize:!0}],GENERATED_PASSWORD:[{property:"Domain",canonize:!1},{property:"GeneratedDate",canonize:!1},{property:"Password",canonize:!1}],IDCARD:[{property:"Number",canonize:!0}],IDENTITY:[{property:"FirstName",canonize:!1},{property:"LastName",canonize:!1}],PASSPORT:[{property:"Number",canonize:!0}],PAYMENTMEAN_PAYPAL:[{property:"Login",canonize:!1},{property:"Password",canonize:!1}],PAYMENTMEANS_CREDITCARD:[{property:"Bank",canonize:!0},{property:"CardNumber",canonize:!0},{property:"CardNumberLastDigits",canonize:!0},{property:"ExpireMonth",canonize:!0},{property:"ExpireYear",canonize:!0},{property:"OwnerName",canonize:!0}],PERSONALWEBSITE:[{property:"Website",canonize:!1}],PHONE:[{property:"Number",canonize:!0}],PURCHASE_CATEGORY:[{property:"CategoryName",canonize:!1}],PURCHASEBASKET:[{property:"Id",canonize:!1}],PURCHASEPAIDBASKET:[{property:"AutoTitle",canonize:!1},{property:"Comment",canonize:!1},{property:"DeliveryAddressDescription",canonize:!1},{property:"DeliveryAddressName",canonize:!1},{property:"MerchantDomain",canonize:!0},{property:"PaymentMeanDescription",canonize:!1},{property:"PaymentMeanName",canonize:!1},{property:"PurchaseDate",canonize:!0},{property:"TotalAmount",canonize:!0},{property:"UserTitle",canonize:!1}],SECURENOTE:[{property:"Title",canonize:!1},{property:"Content",canonize:!1}],SECURENOTE_CATEGORY:[{property:"CategoryName",canonize:!1}],SOCIALSECURITYSTATEMENT:[{property:"SocialSecurityNumber",canonize:!0}]}},96457:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeChangeHistories=void 0;const n=r(16516);t.mergeChangeHistories=function(e,t){const r=(0,n.eqBy)((0,n.prop)("Id")),o=(0,n.ascend)((0,n.prop)("ModificationDate")),a=(0,n.unionWith)(r,e.ChangeSets,t.ChangeSets);return{...e,ChangeSets:(0,n.sort)(o,a)}}},1947:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeLocalAndRemote=t.getMergeableTransactions=t.supportedTransactionTypesForMerge=t.unMergeableTransaction=void 0;const n=r(16516),o=r(96457),a=r(75270);t.unMergeableTransaction=["DEFAULT_AUTHENTIFIANT","DEFAULT_CONFIDENTIAL","DEFAULT_IDENTITY","DEFAULT_PAYMENTMEANS","DEFAULT_MISC","DEFAULT_REWARDCARD","POINTS","SETTINGS","SECURITYALERTS"],t.supportedTransactionTypesForMerge=["DATA_CHANGE_HISTORY"],t.getMergeableTransactions=function(e,r){const o=(0,n.map)((0,n.prop)("itemId"),r);return e.filter((e=>!t.unMergeableTransaction.includes(e.type))).filter((e=>"BACKUP_REMOVE"!==e.action)).filter((e=>o.includes(e.identifier))).filter((e=>t.supportedTransactionTypesForMerge.includes(e.type)))},t.mergeLocalAndRemote=function(e,t){const r=[],n=e.changeHistories.map((e=>{const n=(0,a.findTransaction)(e.Id,t),i=o.mergeChangeHistories(e,n.content);return r.push({...n,content:i}),i}));return{personalData:{...e,changeHistories:n},remoteTransactions:r}}},37744:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(16516),o=r(95623),a=r(1347),i=r(70252),s=r(90503),c=r(1947),u=r(63002),l=r(75270),d=r(83638),p=r(32523),f=r(58582),g=r(51064);t.default=function(e,t,r,m,h){const{changesToUpload:y,editConflicts:S,transactionsToDownload:v}=function(e,t,r){if(0===t.length)return{changesToUpload:e,transactionsToDownload:t,editConflicts:[]};const o=(0,n.intersection)((0,n.pluck)("identifier",t),(0,n.pluck)("itemId",e));if(0===e.filter((e=>o.includes(e.itemId))).length)return{changesToUpload:e,transactionsToDownload:t,editConflicts:[]};const a=(0,n.reject)((e=>(0,u.isRemovalUploadChange)(e)&&o.includes(e.itemId)),e),i=(0,n.reject)((e=>((0,l.isRemovalTransaction)(e)||r.has(e.identifier))&&o.includes(e.identifier)),t);return{changesToUpload:a,transactionsToDownload:i,editConflicts:(0,n.intersection)((0,n.pluck)("identifier",i),(0,n.pluck)("itemId",a))}}(t.changesToUpload,m,r);if(0===S.length)return{personalData:{...t,changesToUpload:y},remoteTransactions:[...v]};const E=`[Sync] conflict on local/remote changes, ${S.length} conflicts`;o.default.log(E),(0,i.sendExceptionLog)({error:new Error(E),code:s.ExceptionCriticality.WARNING});const{duplicateObjects:A,uploadChangesWithDuplicates:_,usableRemoteTransactions:b}=function(e,t,r,n,o,a){if(0===o.length)return{uploadChangesWithDuplicates:r,usableRemoteTransactions:n,duplicateObjects:[]};const i=(0,p.generateLocalDuplicates)(o,t,n,a),s=i.map((e=>e.duplicate)),c=s.map((e=>({action:"BACKUP_EDIT",backupDate:0,identifier:e.Id,objectType:"transaction",time:Date.now(),type:(0,d.getTransactionTypeFromDataModelType)(e.kwType),content:e})));c.forEach((({backupDate:t,identifier:r,type:n})=>{e(f.announcements.transactionDuplicated(n,r,t))}));const u=i.map((e=>e.duplicatedFromId));return{uploadChangesWithDuplicates:r.filter((e=>!u.includes(e.itemId))).concat(s.map(g.createUploadChangeForItem)),duplicateObjects:s,usableRemoteTransactions:n.filter((e=>!o.includes(e.identifier)||u.includes(e.identifier))).concat(c)}}(e,t,y,v,S,h),T=(0,a.saveObjects)(t,A),I=c.getMergeableTransactions(b,_);if(0===I.length)return{personalData:{...T,changesToUpload:_},remoteTransactions:[...b]};const w=c.mergeLocalAndRemote(T,I);return{personalData:{...w.personalData,changesToUpload:_},remoteTransactions:[...b,...w.remoteTransactions]}}},67805:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSyncEventErrorName=t.getSyncEventExtent=t.createInitialSyncEvent=void 0;const n=r(37898),o=r(25576),a=r(17825),i=r(92263),s=r(14656),c=r(20750),u=r(10203);t.createInitialSyncEvent=(e,r,n)=>({extent:(0,t.getSyncEventExtent)(e),trigger:r,timestamp:n,duration:{sync:0,chronological:0,treat_problem:0,sharing:0}}),t.getSyncEventExtent=e=>{switch(e){case n.SyncType.LIGHT_SYNC:return u.Extent.Light;case n.SyncType.FULL_SYNC:return u.Extent.Full;case n.SyncType.FIRST_SYNC:return u.Extent.Initial;default:(0,a.assertUnreachable)(e)}},t.getSyncEventErrorName=function(e){let t=u.ErrorName.Other;return(0,i.isCarbonError)(e)&&(e.errorType===s.HttpError?t=(({errorCode:e})=>e===s.HttpErrorCode.CLIENT_ERROR||e===s.HttpErrorCode.SERVER_ERROR||e===s.HttpErrorCode.STATUS_CODE)(e)?u.ErrorName.HttpStatus:u.ErrorName.HttpIo:e.errorType===c.WSError&&(t=u.ErrorName.ResponseContent)),e instanceof Error&&e?.message&&void 0!==o.AuthenticationCode[e.message]&&(t=u.ErrorName.Authentication),t}},41007:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(37729),t)},37729:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeEventLoggerSyncMonitor=void 0;const n=r(75439),o=r(10203);t.makeEventLoggerSyncMonitor=(e,t={sendLogOnSyncComplete:!0})=>{let r=(0,n.getEmptyState)();return{monitor:async(a,i)=>{r=(0,n.reduceState)(r,a,i);const{syncEvent:s}=r,c=t.sendLogOnSyncComplete;switch(a.type){case"SharingSyncInvalidSyncData":await e.logSync(new o.UserSyncEvent({errorStep:o.ErrorStep.Sharing,errorName:a.errorName,itemGroupId:a.itemGroupId,duration:s.duration,error:s.error,extent:s.extent,fullBackupSize:s.fullBackupSize,incomingDeleteCount:s.incomingDeleteCount,incomingUpdateCount:s.incomingUpdateCount,outgoingDeleteCount:s.outgoingDeleteCount,outgoingUpdateCount:s.outgoingUpdateCount,timestamp:s.timestamp,trigger:s.trigger,treatProblem:s.treatProblem}));break;case"SyncFinished":case"SyncFailed":c&&(await e.logSync(new o.UserSyncEvent({duration:s.duration,error:s.error,extent:s.extent,fullBackupSize:s.fullBackupSize,incomingDeleteCount:s.incomingDeleteCount,incomingUpdateCount:s.incomingUpdateCount,outgoingDeleteCount:s.outgoingDeleteCount,outgoingUpdateCount:s.outgoingUpdateCount,timestamp:s.timestamp,trigger:s.trigger,treatProblem:s.treatProblem})),e.flushEventQueue())}},getSyncEvent:()=>r.syncEvent}}},75439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reduceState=t.getEmptyState=void 0;const n=r(67805),o=r(10203),a=(e,t)=>({...e,syncEvent:{...e.syncEvent,...t}}),i=(e,t)=>e>0&&t>0?o.TreatProblem.UploadAndDownload:t>0?o.TreatProblem.Upload:e>0?o.TreatProblem.Download:o.TreatProblem.NotNeeded,s=e=>Date.now()-e;t.getEmptyState=()=>({syncStartTimestamp:null,chronologicalStartTimestamp:null,treatProblemStartTimestamp:null,sharingSyncStartTimestamp:null,syncEvent:null}),t.reduceState=(e,t,r)=>{switch(t.type){case"SyncStarted":return((e,{trigger:t,syncType:r},{timestamp:o})=>({...e,syncStartTimestamp:o,syncEvent:(0,n.createInitialSyncEvent)(r,t,Math.floor(o/1e3))}))(e,t,r);case"ChronologicalSyncStarted":return((e,{timestamp:t})=>({...e,chronologicalStartTimestamp:t}))(e,r);case"ChronologicalSyncFinished":return((e,{fullBackupFileSize:t})=>a(e,{duration:{...e.syncEvent.duration,chronological:s(e.chronologicalStartTimestamp)},fullBackupSize:t||0}))(e,t);case"ChronologicalSyncFailed":return(e=>a(e,{duration:{...e.syncEvent.duration,chronological:s(e.chronologicalStartTimestamp)},error:{step:o.ErrorStep.Chronological,name:o.ErrorName.Other}}))(e);case"TreatProblemStarted":return((e,{timestamp:t})=>({...e,treatProblemStartTimestamp:t}))(e,r);case"TreatProblemDiffComputed":return((e,{transactionsToDownloadCount:t,transactionsToUploadCount:r})=>a(e,{treatProblem:i(t,r)}))(e,t);case"TreatProblemFinished":return(e=>a(e,{duration:{...e.syncEvent.duration,treat_problem:s(e.treatProblemStartTimestamp)}}))(e);case"TreatProblemFailed":return(e=>a(e,{duration:{...e.syncEvent.duration,treat_problem:s(e.treatProblemStartTimestamp)},error:{step:o.ErrorStep.TreatProblem,name:o.ErrorName.Other}}))(e);case"TreatSharingKeysFailed":return(e=>a(e,{error:{step:o.ErrorStep.TreatProblem,name:o.ErrorName.Other}}))(e);case"SharingSyncStarted":return((e,{timestamp:t})=>({...e,sharingSyncStartTimestamp:t}))(e,r);case"SharingSyncFinished":return(e=>a(e,{duration:{...e.syncEvent.duration,sharing:s(e.sharingSyncStartTimestamp)}}))(e);case"SharingSyncFailed":return(e=>a(e,{duration:{...e.syncEvent.duration,sharing:s(e.sharingSyncStartTimestamp)},error:{step:o.ErrorStep.Sharing,name:o.ErrorName.Other}}))(e);case"DecipherFinished":return((e,{updatesCount:t,deletesCount:r})=>{const n=e.syncEvent.incomingUpdateCount||0,o=e.syncEvent.incomingDeleteCount||0;return a(e,{incomingUpdateCount:n+t,incomingDeleteCount:o+r})})(e,t);case"UploadSucceeded":return((e,{updatedCount:t,deletedCount:r})=>{const n=e.syncEvent.outgoingUpdateCount||0,o=e.syncEvent.outgoingDeleteCount||0;return a(e,{outgoingUpdateCount:n+t,outgoingDeleteCount:o+r})})(e,t);case"SyncFinished":return(e=>a(e,{duration:{...e.syncEvent.duration,sync:s(e.syncStartTimestamp)}}))(e);case"SyncFailed":return((e,{error:t})=>a(e,{duration:{...e.syncEvent.duration,sync:s(e.syncStartTimestamp)},error:{...e.syncEvent.error,name:(0,n.getSyncEventErrorName)(t)}}))(e,t);case"SyncTypeChanged":return((e,{syncType:t})=>a(e,{extent:(0,n.getSyncEventExtent)(t)}))(e,t)}return e}},75270:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findTransaction=t.isRemovalTransaction=t.isEditionTransaction=t.createNewTransaction=t.getTransactionXml=t.supportedForUploadKwTypeToTransactionTypeMap=t.supportedDataTypesForUpload=void 0;const n=r(16516),o=r(83638),a=r(95623),i=r(70252),s=r(90503),c=r(47408),u=r(56668),l=r(61797),d=r(58582);function p(e){return t.supportedForUploadKwTypeToTransactionTypeMap[e.kwType]?(0,l.getDashlaneXml)(e):(a.default.error(`Unsupported kwType "${e.kwType}" for transformation to XML`),"")}t.supportedDataTypesForUpload=["KWAddress","KWAuthCategory","KWAuthentifiant","KWBankStatement","KWCollection","KWCompany","KWDataChangeHistory","KWDriverLicence","KWEmail","KWFiscalStatement","KWGeneratedPassword","KWIdentity","KWIDCard","KWPasskey","KWPassport","KWPaymentMean_creditCard","KWPersonalWebsite","KWPhone","KWSecureFileInfo","KWSecureNote","KWSecureNoteCategory","KWSecurityBreach","KWSettingsManagerApp","KWSocialSecurityStatement"],t.supportedForUploadKwTypeToTransactionTypeMap=(0,n.pick)(t.supportedDataTypesForUpload,o.DATAMODEL_TYPE_TO_TRANSACTION_TYPE),t.getTransactionXml=p,t.createNewTransaction=async function(e,r,n){try{const{itemId:o,kwType:a,content:i}=n,s=t.supportedForUploadKwTypeToTransactionTypeMap[a];if("REMOVE"===n.action){const e={type:s,action:"BACKUP_REMOVE",identifier:o,objectType:"transaction",time:(0,c.getUnixTimestamp)(),backupDate:0,content:""};return Promise.resolve(e)}const l=(0,u.utf16ToDeflatedUtf8)(p(i)),f=await e.encrypt(l),g=0,m={type:s,action:"BACKUP_EDIT",identifier:o,objectType:"transaction",time:(0,c.getUnixTimestamp)(),backupDate:g,content:f};return r(d.announcements.transactionCiphered(s,o,g)),m}catch(e){const t=new Error(`[Sync] - upload: failed to create transaction. ${e}`);return(0,i.sendExceptionLog)({error:t,code:s.ExceptionCriticality.ERROR}),null}};const f=(0,n.propEq)("identifier");t.isEditionTransaction=(0,n.propEq)("action","BACKUP_EDIT"),t.isRemovalTransaction=(0,n.propEq)("action","BACKUP_REMOVE"),t.findTransaction=(0,n.curry)(((e,t)=>(0,n.find)(f(e),t)))},83638:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionType=t.getTransactionTypeFromDataModelType=t.getDataModelTypeFromTransactionType=t.DATAMODEL_TYPE_TO_TRANSACTION_TYPE=void 0;const n=r(53576);Object.defineProperty(t,"DATAMODEL_TYPE_TO_TRANSACTION_TYPE",{enumerable:!0,get:function(){return n.DATAMODEL_TYPE_TO_TRANSACTION_TYPE}}),Object.defineProperty(t,"getDataModelTypeFromTransactionType",{enumerable:!0,get:function(){return n.getDataModelTypeFromTransactionType}}),Object.defineProperty(t,"getTransactionTypeFromDataModelType",{enumerable:!0,get:function(){return n.getTransactionTypeFromDataModelType}}),Object.defineProperty(t,"TransactionType",{enumerable:!0,get:function(){return n.TransactionType}})},90826:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countRemoveTransactions=t.countEditionTransactions=void 0;const r=(e,t)=>e.reduce(((e,r)=>r.identifier&&r.action===t?e+1:e),0);t.countEditionTransactions=e=>r(e,"BACKUP_EDIT"),t.countRemoveTransactions=e=>r(e,"BACKUP_REMOVE")},58217:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMissingIdentifiers=void 0;const n=r(53576),o=r(16516),a=r(84977),i=r(58582),s=r(51064);t.getMissingIdentifiers=function(e,t,r){e(i.announcements.treatProblemSummaryStarted(t,r));const c=n.transactionTypes.reduce(((c,u)=>{return l=c,d=function(e,t,r,c){const u=n.TRANSACTION_TYPE_TO_DATAMODEL_TYPE[t];if(!u||!a.default[u])return{missingLocally:[],missingRemotely:[]};const l=a.default[u];if(!r[l])return{missingLocally:[],missingRemotely:[]};const d=c.transactions[t]||{},p=new Set(r.changesToUpload.filter((({kwType:e})=>e===u)).map((({itemId:e})=>e))),f=r[l].filter((({Id:e})=>!p.has(e))),g=Object.keys(d).filter((e=>!p.has(e))),m=(0,o.difference)(g,(0,o.pluck)("Id",f));m.forEach((r=>{e(i.announcements.treatProblemSummaryCompared(i.TreatProblemSummaryComparedResult.Download,t,r,{cause:i.TreatProblemSummaryComparedCause.Missing,remoteDate:d[r]}))}));const h=i.announcements.treatProblemSummaryCompared;return f.reduce(((r,{Id:n,LastBackupTime:o})=>{const a=d[n],c=1e3*o;if(!a||a/1e3<o){const o=a?{remoteDate:a}:{};e(h(i.TreatProblemSummaryComparedResult.Upload,t,n,{cause:a?i.TreatProblemSummaryComparedCause.OutOfDate:i.TreatProblemSummaryComparedCause.Missing,localDate:c,...o}));const l=(0,s.createUploadChange)({action:"EDIT",kwType:u,itemId:n});return{missingLocally:r.missingLocally,missingRemotely:[...r.missingRemotely,l]}}return a/1e3>o?(e(h(i.TreatProblemSummaryComparedResult.Download,t,n,{cause:i.TreatProblemSummaryComparedCause.OutOfDate,localDate:c,remoteDate:a})),{missingLocally:[...r.missingLocally,n],missingRemotely:r.missingRemotely}):(e(h(i.TreatProblemSummaryComparedResult.UpToDate,t,n,{localDate:c})),r)}),{missingLocally:m,missingRemotely:[]})}(e,u,t,r),{missingLocally:[...l.missingLocally,...d.missingLocally],missingRemotely:[...l.missingRemotely,...d.missingRemotely]};var l,d}),{missingLocally:[],missingRemotely:[]});return e(i.announcements.treatProblemSummaryFinished()),c}},63002:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUploadChangesWithoutSettings=t.isSettingUploadChange=t.countDeletionUploadChanges=t.countEditionUploadChanges=t.findUploadChange=t.isRemovalUploadChange=t.isEditionUploadChange=void 0;const n=r(16516),o=(0,n.propEq)("itemId");t.isEditionUploadChange=(0,n.propEq)("action","EDIT"),t.isRemovalUploadChange=(0,n.propEq)("action","REMOVE"),t.findUploadChange=(0,n.curry)(((e,t)=>(0,n.find)(o(e),t))),t.countEditionUploadChanges=e=>e.filter((e=>(0,t.isEditionUploadChange)(e))).length,t.countDeletionUploadChanges=e=>e.filter((e=>(0,t.isRemovalUploadChange)(e))).length,t.isSettingUploadChange=(0,n.propEq)("kwType","KWSettingsManagerApp"),t.getUploadChangesWithoutSettings=e=>(0,n.reject)(t.isSettingUploadChange,e)},39048:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UploadChangeStatus=void 0,function(e){e.ReadyForNextSync="ReadyForNextSync",e.ScheduledForSync="ScheduledForSync"}(t.UploadChangeStatus||(t.UploadChangeStatus={}))},62210:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markChangeAsReadyForNextSync=t.markChangeAsScheduled=t.filterOutUploadedChanges=void 0;const n=r(39048);t.filterOutUploadedChanges=(e,t)=>e.filter((({itemId:e,status:r})=>!t.includes(e)||r!==n.UploadChangeStatus.ScheduledForSync));const o=e=>t=>({...t,status:e});t.markChangeAsScheduled=o(n.UploadChangeStatus.ScheduledForSync),t.markChangeAsReadyForNextSync=o(n.UploadChangeStatus.ReadyForNextSync)},51064:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUploadChangeForDeletion=t.createUploadChangeForItem=t.createUploadChange=void 0;const n=r(39048);t.createUploadChange=({itemId:e,kwType:t,action:r="EDIT",status:o=n.UploadChangeStatus.ReadyForNextSync})=>({itemId:e,kwType:t,action:r,status:o}),t.createUploadChangeForItem=e=>(0,t.createUploadChange)((e=>({itemId:e.Id,kwType:e.kwType}))(e)),t.createUploadChangeForDeletion=e=>r=>(0,t.createUploadChange)({itemId:r,kwType:e,action:"REMOVE"})},26632:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUploadNeeded=t.upload=t.gatherContentsToUpload=void 0;const n=r(16516),o=r(63002),a=r(75270),i=r(90826),s=r(84977),c=r(58582),u=Object.keys(a.supportedForUploadKwTypeToTransactionTypeMap),l=(0,n.flip)(n.contains)(u),d=(0,n.compose)(n.uniq,(0,n.filter)((0,n.propSatisfies)(l,"kwType")),(0,n.filter)((0,n.propSatisfies)(Boolean,"itemId")),(0,n.defaultTo)([]));function p(e,t){return d(e.changesToUpload).map((r=>{const{action:a,kwType:i,itemId:c}=r,u=s.default[i];if((0,o.isRemovalUploadChange)(r))return{action:a,kwType:i,itemId:c,content:null};if("KWSettingsManagerApp"===r.kwType&&"SETTINGS_userId"===c)return{action:a,kwType:i,itemId:c,content:t};const l=(0,n.find)((0,n.propEq)("Id",c),e[u]);return l?{action:a,kwType:i,itemId:c,content:l}:null})).filter(n.identity)}t.gatherContentsToUpload=p;const f=async(e,t,r)=>{t(c.announcements.cipherStarted());const n=r.map((r=>(0,a.createNewTransaction)(e,t,r))),o=await Promise.all(n);return t(c.announcements.cipherFinished()),o.filter(Boolean)};t.upload=async function(e){const{announce:t,cryptoCenterService:r,personalData:n,personalSettings:o}=e,a=p(n,o),s=await f(r,t,a);if(0===s.length)return{uploadedTransactionsId:[]};try{const r=(0,i.countEditionTransactions)(s),n=(0,i.countRemoveTransactions)(s);t(c.announcements.uploadRequested(r,n));const o=await e.ws.backup.upload({login:e.login,uki:e.uki,lock:e.lock,transactions:s,privateKey:e.privateKey,publicKey:e.publicKey}),a=s.reduce(((e,t)=>(t.identifier&&e.push(t.identifier),e)),[]);return t(c.announcements.uploadSucceeded(r,n,o.timestamp)),{uploadedTransactionsId:a,lastSyncTimestamp:Number(o.timestamp),summary:o.summary}}catch(e){throw t(c.announcements.uploadFailed(e)),e}},t.isUploadNeeded=function(e){const t=(0,n.propOr)([],"changesToUpload",e);return 0!==t.length&&d(t).length>0}},31982:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countSyncSummaryTransactions=void 0,t.countSyncSummaryTransactions=function(e){return e?Object.keys(e.transactions).reduce(((t,r)=>t+(Object.keys(e.transactions[r])||[]).length),0):0}},25963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastSuccessfulSyncTimestamp=t.sync=t.MAX_SYNC_TIMESTAMP=t.MIN_SYNC_TIMESTAMP=void 0;const n=r(16516),o=r(37898),a=r(36081),i=r(26632),s=r(88205),c=r(37744),u=r(95623),l=r(62844),d=r(58582),p=r(35668),f=r(63002),g=r(45291),m=r(70252),h=r(92263),y=r(51504);function S(e,t){const r=Number(t);return""===t||(0,n.isNil)(t)||isNaN(r)?e:r}t.MIN_SYNC_TIMESTAMP=999999999999,t.MAX_SYNC_TIMESTAMP=2070753783e3,t.sync=async function(e){const{announce:r,storeService:v}=e;let E;try{const A=v.getState(),_=(0,s.featuresSelector)(A);!function(e){switch(e.syncType){case o.SyncType.FIRST_SYNC:{if(0!==e.lastSyncTimestamp)throw new Error("Sync Error: lastSyncTimestamp should be 0 on First Sync");const t=(0,f.getUploadChangesWithoutSettings)(e.personalData?.changesToUpload??[]);if(t?.length)throw new Error("Sync Error: should not have changes to upload on First Sync");break}case o.SyncType.LIGHT_SYNC:case o.SyncType.FULL_SYNC:if(null===e.lastSyncTimestamp||e.lastSyncTimestamp<t.MIN_SYNC_TIMESTAMP||e.lastSyncTimestamp>t.MAX_SYNC_TIMESTAMP){const t=new Error("Sync Error: non valid lastSyncTimestamp"),r=h.CarbonError.fromAnyError(t).addContextInfo("SYNC","verifySyncArgs").addAdditionalInfo({libError:`lastSyncTimestamp: ${e.lastSyncTimestamp}`});throw(0,m.sendExceptionLog)({error:r}),t}break;default:{const t=new Error("Sync Error: unexpected syncType"),r=h.CarbonError.fromAnyError(t).addContextInfo("SYNC","verifySyncArgs").addAdditionalInfo({libError:`syncType: ${e.syncType}`});throw(0,m.sendExceptionLog)({error:r}),t}}}(e);const b=e.personalData||v.getPersonalData(),{isUploadEnabled:T}=v.getSyncStatus();u.Debugger.log(`[Sync] User allowed to Upload: ${T}`),T&&(0,i.isUploadNeeded)(b)&&(u.Debugger.log("[Sync] Found local data to upload"),e.syncType=o.SyncType.FULL_SYNC,r(d.announcements.syncTypeChanged(e.syncType))),v.dispatch((0,g.scheduleChangesForSync)()),E=await(0,a.latest)(e);const I=()=>({...(0,n.dissoc)("lock",E),syncType:e.syncType,isUploadEnabled:E.isUploadEnabled,lastSyncTimestamp:S(e.lastSyncTimestamp,E.lastSyncTimestamp),uploadedTransactions:[],summary:E.summary});if((0,l.changeMPinProgressSelector)(A))return I();if(e.syncType!==o.SyncType.FULL_SYNC||!E.isUploadEnabled)return E.isUploadEnabled&&(0,p.unlock)(e,E.lock),I();const w=((e,t)=>{const r=new Set,n=e&&e.items||[];for(const e of n)e&&"object"==typeof e&&e.id&&r.add(e.id);for(const e of t.items)e&&"object"==typeof e&&e.itemId&&r.add(e.itemId);return r})(E.sharing2,v.getSharingData()),C=_[y.NEW_URL_PARSER_FF]||_[y.NEW_URL_PARSER_FF_PROD],{personalData:O,remoteTransactions:D}=(0,c.default)(r,b,w,E.clearTransactions,C),P=(0,n.isNil)(e.pushKeysToServer)?null:{publicKey:e.pushKeysToServer.public,privateKey:e.pushKeysToServer.private},N={login:e.login,uki:e.uki,lock:E.lock,ws:e.ws,cryptoCenterService:e.dataEncryptorService.getInstance(),personalData:O,personalSettings:v.getPersonalSettings(),...P,announce:r},R=await(0,i.upload)(N);return 0===R.uploadedTransactionsId.length&&(0,p.unlock)(e,E.lock),v.dispatch((0,g.clearUploadedChanges)(R.uploadedTransactionsId)),{...(0,n.dissoc)("lock",E),clearTransactions:D,syncType:e.syncType,isUploadEnabled:E.isUploadEnabled,uploadedTransactions:R.uploadedTransactionsId,lastSyncTimestamp:S(e.lastSyncTimestamp,R.lastSyncTimestamp),summary:R.summary||E.summary}}catch(t){throw E&&(0,p.unlock)(e,E.lock),t&&t.message,t}finally{v.dispatch((0,g.unscheduleRemainingChanges)())}},t.getLastSuccessfulSyncTimestamp=S},36081:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildFullBackupFileMap=t.buildLatestArgs=t.latest=void 0;const n=r(28354),o=r(16516),a=r(63713),i=r(95623),s=r(25576),c=r(37898),u=r(58582),l=r(35668),d=r(92263),p=r(70252);function f(e){const{lastSyncTimestamp:t,login:r,needsKeys:o,storeService:a,syncType:i,transactionIds:s,uki:u}=e,l=s&&s.length,f={lock:i===c.SyncType.FULL_SYNC||l?(0,n.v4)():"nolock",login:r,needsKeys:o,sharing2:!0,teamAdminGroups:!0,timestamp:t,version:a.getPlatform().info.appVersion,uki:u};switch(s&&(f.transactions=s),i){case c.SyncType.FIRST_SYNC:if(0!==f.timestamp)throw new Error("timestamp should be null for FIRST_SYNC");break;case c.SyncType.LIGHT_SYNC:case c.SyncType.FULL_SYNC:if(isNaN(f.timestamp))f.timestamp=0;else if(null===f.timestamp||f.timestamp<999999999999||f.timestamp>2070753783e3){const e=new Error("non valid lastSyncTimestamp"),t=d.CarbonError.fromAnyError(e).addContextInfo("SYNC","buildLatestArgs").addAdditionalInfo({libError:`lastSyncTimestamp: ${f.timestamp}`});throw(0,p.sendExceptionLog)({error:t}),e}break;default:{const e=new Error("unexpected syncType"),t=d.CarbonError.fromAnyError(e).addContextInfo("SYNC","buildLatestArgs").addAdditionalInfo({libError:`syncType: ${i}`});throw(0,p.sendExceptionLog)({error:t}),e}}return f}function g(e){const t=new Map;return e&&e.forEach((e=>{t.set(e.identifier,e.backupDate)})),t}t.latest=async function(e){const t=f(e),{announce:r}=e;let n;try{const{lock:o,needsKeys:a}=t;if(r(u.announcements.latestRequested(o,a)),n=await e.ws.backup.latest(t),"message"===n.objectType)throw"Incorrect authentification"===n.content?new Error(s.AuthenticationCode[s.AuthenticationCode.INVALID_UKI]):"Temporarily disabled"===n.content?new Error("Sync service unavailable"):new Error(s.AuthenticationCode[s.AuthenticationCode.UNKNOWN_SYNC_ERROR]);if(void 0!==n.objectType)throw new Error("unexpected objectType");if(!n.transactionList)throw i.default.log("Backup sync failed"),new Error("Backup sync failed");if(!function(e){return!e.find((e=>!e.backupDate||e.backupDate<999999999999||e.backupDate>2070753783e3))}(n.transactionList))throw new Error("wrongly formatted backupDate")}catch(e){throw r(u.announcements.latestFailed(e)),e}r(u.announcements.latestSucceeded(n));const c=g(n.fullBackupFileList);try{return{clearTransactions:await a.decrypt(e.dataEncryptorService.getInstance(),r,n.fullBackupFile,c,n.transactionList),sharing2:n.sharing2,lastSyncTimestamp:n.timestamp,lock:t.lock,keys:n.keys,isUploadEnabled:(0,o.defaultTo)(!1,n.uploadEnabled),summary:n.summary,fullBackupFileSize:c.size}}catch(r){throw(0,l.unlock)(e,t.lock),r}},t.buildLatestArgs=f,t.buildFullBackupFileMap=g},37898:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncType=void 0,function(e){e[e.FIRST_SYNC=0]="FIRST_SYNC",e[e.LIGHT_SYNC=1]="LIGHT_SYNC",e[e.FULL_SYNC=2]="FULL_SYNC"}(t.SyncType||(t.SyncType={}))},35668:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unlock=void 0;const n=r(95623);t.unlock=async function(e,t){if(!function(e){return e&&"nolock"!==e}(t))return;const{login:r,ws:o,uki:a}=e;try{await o.backup.unlock({login:r,uki:a,lock:t})}catch(e){(0,n.logWarn)({tag:"Sync",message:`Unlock failed: ${e}`})}}},59890:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.binaryFindLastIndex=t.binaryFindIndex=t.binaryContains=void 0;const n=r(16516);t.binaryContains=(0,n.curry)((function e(t,r){const n=t.length;if(0===n)return!1;const o=Math.floor(n/2),a=t[o];return a===r||e(a<r?t.slice(o+1,n):t.slice(0,o),r)})),t.binaryFindIndex=function e(t,r,n){const o=t.length;if(0===o)return-1;const a=n?Math.min(n,o-1):Math.floor(o/2);if(r(t[a])){const n=e(t.slice(0,a),r);return-1===n?a:n}{const n=e(t.slice(a+1,o),r);return-1===n?-1:a+n+1}},t.binaryFindLastIndex=function e(t,r,n){const o=t.length;if(0===o)return-1;const a=n?Math.min(n,o-1):Math.floor(o/2);if(r(t[a])){const n=e(t.slice(a+1,o),r);return-1===n?a:a+n+1}return e(t.slice(0,a),r)}},72365:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDataEncryptorService=t.setObfuscatingKey=void 0;const n=r(56668);t.setObfuscatingKey=function(e){return e.setInstance({raw:[214,238,100,106,146,140,114].concat([110,232,72,104,108,100,204]).map((e=>e/2)).map((e=>String.fromCharCode(e))).join("")},""),e},t.makeDataEncryptorService=function(e){let t=null;return{setInstance:(r,o,a)=>{t=(0,n.makeCryptoCenterService)(r,o,e,a)},getInstance:()=>{if(!t)throw new Error("makeDataEncryptorService: you must call setInstance(password,serverKey) before getting the instance");return t},close:()=>{t=null},hasBeenSet:()=>Boolean(t)}}},56584:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertDashlaneSecureDataKWC3ToTransportableData=void 0;const n=r(16038);t.convertDashlaneSecureDataKWC3ToTransportableData=e=>{const t=e.salt,r=(0,n.utf8ToBase64Buffer)(e.version),o=e.encryptedData;return(0,n.concatBuffers)(t,r,o)}},16038:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertBufferToHex=t.deflateBuffer=t.removeQtCompressionHeader=t.addQtCompressHeader=t.isBase64Encoded=t.getSubDataByteArray=t.concatBuffers=t.ab2str=t.str2ab=t.base64ToBigInteger=t.pemToSpki=t.spkitoPem=t.pkcs8toPem=t.CrlfToLF=t.pemTopkcs8=t.base64BufferToText=t.utf8ToBase64=t.base64ToUtf8=t.utf8ToBase64Buffer=t.base64BufferToUtf8=t.arrayBufferToText=t.uint8ArrayToText=t.utf8ChunkDecode=t.utf8ChunkEncode=t.base64ToBuffer=t.bufferToBase64=t.applyXorOnBuffers=void 0;const n=r(93513),o=r(63969),a=r(63290),i=r(97224),s=r(10001),c=r(93347),u=r(30543),l=16383,d=Math.pow(10,6),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=new Uint8Array(256);for(let e=0;e<p.length;e++)f[p.charCodeAt(e)]=e;function g(e){const t=e.length,r=[];for(let n=0;n<t;n+=3)r.push(p[e[n]>>2]),r.push(p[(3&e[n])<<4|e[n+1]>>4]),r.push(p[(15&e[n+1])<<2|e[n+2]>>6]),r.push(p[63&e[n+2]]);return r.join("")}function m(e,t=d){const r=new Uint8Array(e),n=r.length,o=t%3,a=0===o?t:t+(3-o),i=Math.ceil(n/a);let s="",c=-1;for(;c++<i;){const e=c*a,t=c===i-1?n:(c+1)*a,o=g(r.slice(e,t));s=s.concat(o)}return n%3==2?s.substring(0,s.length-1)+"=":n%3==1?s.substring(0,s.length-2)+"==":s}function h(e){let t=.75*e.length;const r=e.length;let n,o,a,i,s,c=0;e.endsWith("=")&&(t--,"="===e[e.length-2]&&t--);const u=new ArrayBuffer(t),l=new Uint8Array(u);for(n=0;n<r;n+=4)o=f[e.charCodeAt(n)],a=f[e.charCodeAt(n+1)],i=f[e.charCodeAt(n+2)],s=f[e.charCodeAt(n+3)],l[c++]=o<<2|a>>4,l[c++]=(15&a)<<4|i>>2,l[c++]=(3&i)<<6|63&s;return u}function y(e,t=d){const r=e.length;if(0===r)return"";let n="",o=0,a=Math.min(o+t,r);for(;a<=r;){const i=e.charCodeAt(a-1);if(i>=55296&&i<=56319){if(a++,a>r)throw new Error("Invalid string provided to utf8ChunkEncode");continue}const s=e.slice(o,a),c=u.encode(s);if(n=n.concat(c),a===r)break;o=a,a=Math.min(o+t,r)}return n}function S(e){return e>>6==2}function v(e,t=d){const r=e.length;if(0===r)return"";let n="",o=0,a=Math.min(o+t,r);for(;a<=r;){if((S(i=e.charCodeAt(a-1))||function(e){return e>>5==6||e>>4==14||e>>3==30}(i))&&a<r&&S(e.charCodeAt(a))){a++;continue}const s=e.slice(o,a),c=u.decode(s);if(n=n.concat(c),a===r)break;o=a,a=Math.min(o+t,r)}var i;return n}function E(e){const t=new Uint16Array(e),r=t.length;let n="",o=l;for(let e=0;e<r;e+=o)e+o>r&&(o=r-e),n+=String.fromCharCode.apply(null,t.subarray(e,e+o));return n}function A(e){return E(new Uint8Array(e))}function _(e){const t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let t=0;t<e.length;++t)r[t]=e.charCodeAt(t);return t}function b(...e){const t=e.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(t);return e.reduce(((e,t)=>(r.set(new Uint8Array(t),e),e+t.byteLength)),0),r.buffer}t.applyXorOnBuffers=function(e,t){if(e.byteLength!==t.byteLength)throw new Error("xorBuffer: buffers are not same length");const r=new Uint8Array(e),n=new Uint8Array(t),o=e.byteLength,a=new Uint8Array(o);for(let e=0;e<o;e++)a[e]=r[e]^n[e];return a.buffer},t.bufferToBase64=m,t.base64ToBuffer=h,t.utf8ChunkEncode=y,t.utf8ChunkDecode=v,t.uint8ArrayToText=E,t.arrayBufferToText=A,t.base64BufferToUtf8=function(e){const t=m(e);return v(n.decode(t))},t.utf8ToBase64Buffer=function(e){const t=y(e);return h(n.encode(t))},t.base64ToUtf8=function(e){return v(n.decode(e))},t.utf8ToBase64=function(e){const t=y(e);return n.encode(t)},t.base64BufferToText=function(e){const t=m(e);return n.decode(t)},t.pemTopkcs8=function(e){const t=o.privateKeyFromPem(e),r=o.privateKeyToAsn1(t),n=o.wrapRsaPrivateKey(r);return _(s.toDer(n).getBytes())},t.CrlfToLF=e=>e.replace(/(?:\\[r]|[\r\n]+)+/g,"\n"),t.pkcs8toPem=function(e){const r=new a.ByteBuffer(e),n=s.fromDer(r),i=o.privateKeyFromAsn1(n),c=o.privateKeyToPem(i);return(0,t.CrlfToLF)(c)},t.spkitoPem=function(e){const r=new a.ByteBuffer(e),n=s.fromDer(r),i=o.publicKeyFromAsn1(n),c=o.publicKeyToRSAPublicKeyPem(i);return(0,t.CrlfToLF)(c)},t.pemToSpki=function(e){const t=o.publicKeyFromPem(e),r=o.publicKeyToAsn1(t);return _(s.toDer(r).getBytes())},t.base64ToBigInteger=function(e){const t=(e+"===".slice((e.length+3)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=a.decode64(t);return new i.BigInteger(a.bytesToHex(r),16)},t.str2ab=_,t.ab2str=A,t.concatBuffers=b,t.getSubDataByteArray=function(e,t,r){return e.slice(t,r)},t.isBase64Encoded=function(e){return e&&/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/.test(e)},t.addQtCompressHeader=function(e){var t;return b((t=e.byteLength,new Uint8Array([(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]).buffer),e)},t.removeQtCompressionHeader=function(e){return e.slice(4)},t.deflateBuffer=function(e){return c.deflate(new Uint8Array(e),{level:7}).buffer},t.convertBufferToHex=function(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}},55623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomValues=void 0;const n=r(97588),o=r(81106);t.getRandomValues=function(e){const t=(0,o.getWebCrypto)();return t?t.getRandomValues(new Uint8Array(e)):(0,n.generateRandomValues)(e)}},3678:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jwkToSpki=t.evpBytesToKey=void 0;const n=r(63969),o=r(10001),a=r(46445),i=r(16038);t.evpBytesToKey=async function(e){const{derivedKey:t,salt:r,keyLength:n,ivLength:o}=e,s=(0,i.concatBuffers)(t,r.slice(0,8)),c=await(0,a.computeHashSha1)(s),u=await(0,a.computeHashSha1)((0,i.concatBuffers)(c,s)),l=await(0,a.computeHashSha1)((0,i.concatBuffers)(u,s)),d=(0,i.concatBuffers)(c,u,l);return Promise.resolve(d.slice(n,n+o))},t.jwkToSpki=e=>{const{modulus:t,exponent:r}=e,a=n.setRsaPublicKey((0,i.base64ToBigInteger)(t),(0,i.base64ToBigInteger)(r)),s=n.publicKeyToAsn1(a),c=o.toDer(s).getBytes();return(0,i.str2ab)(c)}},64910:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNoDerivationCryptoConfig=void 0;const n=r(65675),o=r(91301);t.getNoDerivationCryptoConfig=function(){return(0,n.parsePayload)(o.CRYPTO_NODERIVATION_HMAC64).cryptoConfig}},81106:(e,t)=>{"use strict";function r(){return self.crypto||null}Object.defineProperty(t,"__esModule",{value:!0}),t.getWebCryptoSubtle=t.getWebCrypto=void 0,t.getWebCrypto=r,t.getWebCryptoSubtle=function(){const e=r();return e?e.subtle?e.subtle:e.webkitSubtle?e.webkitSubtle:null:null}},33769:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateLocalkeyAndSetupEncryptorService=t.getEncryptionKeyBuffer=void 0;const n=r(64910),o=r(16038),a=r(69530),i=r(16356),s=r(25576);t.getEncryptionKeyBuffer=function(e,t,r){if(r.skipDerivation){if(e.byteLength<64)throw new Error(`createEncryptionKey: password should be at least 64 bytes long but is: ${e.byteLength}`);return(0,o.applyXorOnBuffers)(e,t)}return(0,o.concatBuffers)(t,e)},t.generateLocalkeyAndSetupEncryptorService=async function(e,t,r,c){const u=await(0,a.generate64BytesKey)(),l=(0,o.base64BufferToText)(u),d=(0,n.getNoDerivationCryptoConfig)();e.setInstance({raw:l},"",d),t.dispatch((0,i.updateLocalKey)(l)),c===s.PersistData.PERSIST_DATA_YES&&await r.getInstance().user.persistLocalKey(l)}},83570:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeGetDerivateKeyWithCacheAndQueue=void 0;const n=r(65675),o=r(16038),a=r(86723),i=r(46445);t.makeGetDerivateKeyWithCacheAndQueue=function(){const e=new Map,t=new Map;function r(t){return e.get(t)}function s(r,n){const o=t.get(r);o&&o.forEach((({resolve:e})=>e(n))),t.set(r,[]),e.set(r,n)}function c(r,n,o,i){return new Promise(((c,u)=>{const l=t.get(r)||[];l.push({resolve:c,reject:u}),t.set(r,l);const d=e.get(r);d?s(r,d):1===l.length&&{pbkdf2:a.deriveKeyWithPBKDF2,argon2d:a.deriveKeyWithArgon2d}[i.method](n,o,i).then((e=>{s(r,e)})).catch((n=>{!function(r,n){const o=t.get(r);o&&o.forEach((({reject:e})=>e(n))),t.set(r,[]),e.delete(r)}(r,n)}))}))}return(e,t,a)=>function(e,t,r,a,s){return function(e,t,r){if((0,n.isNoDerivation)(r))return Promise.resolve((0,o.arrayBufferToText)(e));const a=(0,n.isPbkdf2Derivation)(r)?r.iterations:r.t_cost;return new Promise(((n,s)=>{(0,i.computeHashSha256)((0,o.str2ab)(`${(0,o.arrayBufferToText)(e)}_${(0,o.arrayBufferToText)(t)}_${r.method}_${a}`)).then((e=>(0,o.arrayBufferToText)(e))).then(n,s)}))}(r,a,s).then((n=>e(n)||t(n,r,a,s)))}(r,c,e,t,a)}},56984:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verify=t.sign=t.decrypt=t.encrypt=t.generateRsaOaepKeyPair=t.DefaultAsymmetricOptions=t.HashAlgorithm=t.RSASA_PKCS1=t.RSA_OAEP=void 0;const n=r(16038);t.RSA_OAEP="RSA-OAEP",t.RSASA_PKCS1="RSASSA-PKCS1-v1_5";const o=new Uint8Array([1,0,1]);var a;!function(e){e.SHA_1="SHA-1",e.SHA_256="SHA-256"}(a=t.HashAlgorithm||(t.HashAlgorithm={})),t.DefaultAsymmetricOptions={hashAlgorithm:a.SHA_256};const i=e=>({name:t.RSASA_PKCS1,hash:{name:e}}),s=e=>({name:t.RSA_OAEP,hash:{name:e}});t.generateRsaOaepKeyPair=async(e=a.SHA_256)=>{const r=await self.crypto.subtle.generateKey({name:t.RSA_OAEP,modulusLength:2048,publicExponent:o,hash:{name:e}},!0,["encrypt","decrypt"]),{publicKey:i,privateKey:s}=await async function({privateKey:e,publicKey:t}){return{privateKey:await self.crypto.subtle.exportKey("pkcs8",e),publicKey:await self.crypto.subtle.exportKey("spki",t)}}({...r});return function({publicKey:e,privateKey:t}){return{publicKey:(0,n.spkitoPem)(e),privateKey:(0,n.pkcs8toPem)(t)}}({publicKey:i,privateKey:s})},t.encrypt=async function({publicKey:e,data:r,options:n=t.DefaultAsymmetricOptions}){const o=await self.crypto.subtle.importKey("spki",e,s(n.hashAlgorithm),!1,["encrypt"]);return await self.crypto.subtle.encrypt(s(n.hashAlgorithm),o,r)},t.decrypt=async function({privateKey:e,data:r,options:n=t.DefaultAsymmetricOptions}){const o=await self.crypto.subtle.importKey("pkcs8",e,s(n.hashAlgorithm),!1,["decrypt"]);return await self.crypto.subtle.decrypt(s(n.hashAlgorithm),o,r)},t.sign=async function({privateKey:e,data:r,options:n=t.DefaultAsymmetricOptions}){const o=await self.crypto.subtle.importKey("pkcs8",e,i(n.hashAlgorithm),!1,["sign"]);return await self.crypto.subtle.sign(i(n.hashAlgorithm),o,r)},t.verify=async function({publicKey:e,signature:r,data:n,options:o=t.DefaultAsymmetricOptions}){const a=await self.crypto.subtle.importKey("spki",e,i(o.hashAlgorithm),!1,["verify"]);return await self.crypto.subtle.verify(i(o.hashAlgorithm),a,r,n)}},73626:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKeyWithArgon2d=void 0;const n=r(11814),o=r(95623),a=r(70252),i=r(35558);t.deriveKeyWithArgon2d=async(e,t,r)=>{try{if(null===e||null===t||null===r)throw new Error("deriveKeyWithArgon2d parameters are null");if(!n.env.isBrowserEnvironment()&&!n.env.isWorkerEnvironment())throw new Error("Environment is not supported");return(async(e,t,r)=>{const n={argon2d:i.ArgonType.Argon2d,argon2i:i.ArgonType.Argon2i},{hash:o}=await(0,i.hash)({pass:new Uint8Array(e),salt:new Uint8Array(t),time:r.t_cost,mem:r.m_cost,hashLen:32,parallelism:r.parallelism,type:n[r.method]});return o})(e,t,r)}catch(e){const t=new Error(`[Derivation] - deriveKeyWithArgon2d: ${e}`);throw o.Debugger.error(t),(0,a.sendExceptionLog)({error:t}),e}}},86723:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKeyWithArgon2d=t.deriveKeyWithPBKDF2=void 0;var n=r(33713);Object.defineProperty(t,"deriveKeyWithPBKDF2",{enumerable:!0,get:function(){return n.deriveKeyWithPBKDF2}});var o=r(73626);Object.defineProperty(t,"deriveKeyWithArgon2d",{enumerable:!0,get:function(){return o.deriveKeyWithArgon2d}})},33713:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKeyWithPBKDF2=void 0;const n=r(81106),o=r(97588),a=r(975),i=r(95623),s=r(4673),c={sha1:"SHA-1",sha256:"SHA-256"};t.deriveKeyWithPBKDF2=async(e,t,r)=>{if(null===e||null===t||null===r)throw new Error("deriveKeyWithPBKDF2 parameters are null");const u=(0,s.getPlugins)().pbkdf2Plugin;if(u)return new Promise((n=>{n(u.deriveKey(new Uint8Array(e),new Uint8Array(t),r.iterations,r.hashMethod?c[r.hashMethod]:"SHA-256",32).buffer)}));const l=(0,n.getWebCryptoSubtle)();if(!l)return(0,o.deriveKeyPolyfill)(e,t,r);try{const n=await l.importKey("raw",e,"PBKDF2",!1,["deriveKey"]);return await l.deriveKey({name:"PBKDF2",salt:t,iterations:r.iterations,hash:{name:r.hashMethod?c[r.hashMethod]:"SHA-256"}},n,{name:a.AES_CBC,length:256},!0,["encrypt","decrypt"]).then((e=>l.exportKey("raw",e)))}catch(n){return(n=>{const a=new Error(`[Derivation] - deriveKeyWithPBKDF2: ${n}`);return i.Debugger.error(a),(0,o.deriveKeyPolyfill)(e,t,r)})(n)}}},46445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hashAndSplitKey=t.computeHashMD5=t.computeHashSha512=t.computeHashSha256=t.computeHashSha1=void 0;const n=r(30960),o=r(16038);async function a({hashAlgorithm:e,data:t}){return await self.crypto.subtle.digest({name:e},t)}async function i(e){return await a({hashAlgorithm:"SHA-512",data:e})}t.computeHashSha1=async function(e){return await a({hashAlgorithm:"SHA-1",data:e})},t.computeHashSha256=async function(e){return await a({hashAlgorithm:"SHA-256",data:e})},t.computeHashSha512=i,t.computeHashMD5=e=>{const t=n.create();return t.update(e),t.digest().toHex()},t.hashAndSplitKey=async function(e){const t=await i(e),r=t.byteLength,n=(0,o.getSubDataByteArray)(new Uint8Array(t),0,r/2),a=(0,o.getSubDataByteArray)(new Uint8Array(t),r/2,r);return{aes:n.buffer,hmac:a.buffer}}},69530:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyHashHmacSHA256=t.signHashHmacSHA256=t.decryptAES256=t.encryptAES256=t.importKeyAES256=t.generate64BytesKey=t.generateAESKey=void 0;const n=r(16038),o="AES-CBC",a=256,i={name:"HMAC",hash:{name:"SHA-256"}};async function s(){const e=await self.crypto.subtle.generateKey({name:o,length:a},!0,["encrypt","decrypt"]);return await self.crypto.subtle.exportKey("raw",e)}async function c(e){return await self.crypto.subtle.importKey("raw",e,o,!1,["encrypt","decrypt"])}async function u(e){return await self.crypto.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!0,["sign","verify"])}t.generateAESKey=s,t.generate64BytesKey=async function(){const e=await s(),t=await s();return(0,n.concatBuffers)(e,t)},t.importKeyAES256=c,t.encryptAES256=async function({key:e,iv:t,clearData:r}){const n=await c(e);return await self.crypto.subtle.encrypt({name:o,iv:t},n,r)},t.decryptAES256=async function({key:e,iv:t,encryptedData:r}){const n=await c(e);return await self.crypto.subtle.decrypt({name:o,iv:t},n,r)},t.signHashHmacSHA256=async function({key:e,data:t}){const r=await u(e);return await self.crypto.subtle.sign(i,r,t)},t.verifyHashHmacSHA256=async function({key:e,signature:t,data:r}){const n=await u(e);return await self.crypto.subtle.verify(i,n,t,r)}},975:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AES_KEY_SIZE=t.AES_CBC=void 0,t.AES_CBC="AES-CBC",t.AES_KEY_SIZE=32},97588:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyRsa=t.signRSA=t.decryptRSA=t.encryptRSA=t.generateRsaKeyPair=t.deriveKeyPolyfill=t.verifyHashHmacSHA256=t.signHashHmacSHA256=t.decryptAES256=t.encryptAES256=t.generateAESKey=t.computeHashSha512=t.computeHashSha256=t.computeHashSha1=t.generateRandomValues=t.arrayBufferToBuffer=void 0;const n=r(61384),o=r(16038),a=r(95623),i=r(56984),s=r(975),c=r(63969),u=r(59018),l=r(58654),d=r(63290),p=r(11087),f=r(85469),g=r(33803),m=r(15313).Buffer;function h(e){const t=new m(e.byteLength),r=new Uint8Array(e);for(let e=0;e<t.length;++e)t[e]=r[e];return t}t.arrayBufferToBuffer=h,t.generateRandomValues=function(e){const t=u.getBytesSync(e);return(0,o.str2ab)(t)},t.computeHashSha1=e=>new Promise(((t,r)=>{try{const r=(0,o.base64BufferToText)(e),n=p.sha1.create();return n.update(r),t((0,o.str2ab)(n.digest().data))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [computeHashSha1]",e),r(e)}})),t.computeHashSha256=e=>new Promise(((t,r)=>{try{const r=(0,o.base64BufferToText)(e),n=p.sha256.create();return n.update(r),t((0,o.str2ab)(n.digest().data))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [computeHashSha256]",e),r(e)}})),t.computeHashSha512=e=>new Promise(((t,r)=>{try{const r=(0,o.base64BufferToText)(e),n=p.sha512.create();return n.update(r),t((0,o.str2ab)(n.digest().data))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [computeHashSha512]",e),r(e)}})),t.generateAESKey=()=>new Promise(((e,t)=>{try{u.getBytes(s.AES_KEY_SIZE,(function(r,n){return r?t(r):e((0,o.str2ab)(n))}))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [generateAESKey]",e),t(e)}})),t.encryptAES256=(e,t,r)=>new Promise(((n,i)=>{try{const a=new d.ByteBuffer(e),i=new d.ByteBuffer(t),c=new d.ByteBuffer(r),u=l.createCipher(s.AES_CBC,a);u.start({iv:i}),u.update(c),u.finish();const p=u.output.data;return n((0,o.str2ab)(p))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [encryptAES256]",e),i(e)}})),t.decryptAES256=(e,t,r)=>new Promise(((n,i)=>{try{const a=new d.ByteBuffer(e),i=new d.ByteBuffer(t),c=new d.ByteBuffer(r),u=l.createDecipher(s.AES_CBC,a);u.start({iv:i}),u.update(c),u.finish();const p=u.output.data;return n((0,o.str2ab)(p))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [decryptAES256]",e),i(e)}})),t.signHashHmacSHA256=(e,t)=>new Promise(((r,n)=>{try{const n=(0,o.base64BufferToText)(t),a=(0,o.base64BufferToText)(e),i=f.create();return i.start("sha256",a),i.update(n),r((0,o.str2ab)(i.digest().data))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [signHashHmacSHA256]",e),n(e)}})),t.verifyHashHmacSHA256=(e,r)=>{try{return(0,t.signHashHmacSHA256)(e,r).then((e=>e==e))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [verifyHashHmacSHA256]",e),Promise.reject(e)}},t.deriveKeyPolyfill=(e,t,r)=>new Promise(((o,i)=>{try{const a=(0,n.getWorkerPath)("pbkdf2PolyfillWorker");if(void 0===a){const n=h(e),a=h(t);return void g.pbkdf2(n,a,r.iterations,32,r.hashMethod,((e,t)=>{e?i(e):o(t.buffer)}))}(0,n.getWorker)(a).then((a=>{a.onmessage=function(e){o(e.data),(0,n.freeWorker)(a)},a.onerror=function(e){i(new Error(`[WebCryptoPolyfill] - deriveKeyPolyfill: ${e.message}`)),(0,n.freeWorker)(a)},a.postMessage([e,t,r.iterations,32,r.hashMethod])}))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [deriveKeyFrom]",e),void i(e)}})),t.generateRsaKeyPair=()=>new Promise(((e,t)=>{try{const r=(0,n.getWorkerPath)("WebCryptoPolyfill");c.rsa.generateKeyPair({bits:2048,workers:-1,workerScript:r},(function(r,n){if(r)return t(r);const a={publicKey:(0,o.CrlfToLF)(c.publicKeyToRSAPublicKeyPem(n.publicKey)),privateKey:(0,o.CrlfToLF)(c.privateKeyToPem(n.privateKey))};return e(a)}))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [generateRsaKeyPair]",e),t(e)}})),t.encryptRSA=(e,t)=>new Promise(((r,n)=>{try{const n=(0,o.spkitoPem)(e),a=c.publicKeyFromPem(n),s=(0,o.base64BufferToText)(t),u=a.encrypt(s,i.RSA_OAEP,{md:p.sha256.create()});return r((0,o.str2ab)(u))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [encryptRSA]",e),n(e)}})),t.decryptRSA=(e,t,r=i.HashAlgorithm.SHA_256)=>new Promise(((n,s)=>{try{const a=(0,o.pkcs8toPem)(e),s=c.privateKeyFromPem(a),u=(0,o.base64BufferToText)(t),l=s.decrypt(u,i.RSA_OAEP,{md:r===i.HashAlgorithm.SHA_256?p.sha256.create():p.sha1.create()});return n((0,o.str2ab)(l))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [decryptRSA]",e),s(e)}})),t.signRSA=(e,t)=>new Promise(((r,n)=>{try{const n=(0,o.pkcs8toPem)(e),a=c.privateKeyFromPem(n),i=(0,o.base64BufferToText)(t),s=p.sha256.create();s.update(i);const u=a.sign(s);return r((0,o.str2ab)(u))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [signRSA]",e),n(e)}})),t.verifyRsa=(e,t,r)=>new Promise(((n,i)=>{try{const a=(0,o.spkitoPem)(e),i=c.publicKeyFromPem(a),s=(0,o.base64BufferToText)(r),u=(0,o.base64BufferToText)(t),l=p.sha256.create();return l.update(s),n(i.verify(l.digest().bytes(),u))}catch(e){return a.Debugger.log("Error while using Webcrypto  Polyfill - [verifyRsa]",e),i(e)}}))},36513:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeAsymmetricEncryption=t.makeSymmetricEncryption=t.makeCryptoService=void 0;const n=r(93347),o=r(56668),a=r(53576),i=r(61797),s=r(69530),c=r(27993),u=r(56984),l=r(16038),d=r(3678),p=r(46445),f=r(63985);async function g(e,t){const r=(0,l.base64ToBuffer)(t),n=(0,l.base64ToBuffer)(e),o=await(0,p.hashAndSplitKey)(n),a=(0,c.parseDashlaneKw5SecureData)(new Uint8Array(r)),i=(0,l.concatBuffers)(a.iv,a.secured),u=await(0,s.signHashHmacSHA256)({key:o.hmac,data:i});if((0,l.bufferToBase64)(u)!==(0,l.bufferToBase64)(a.hash))throw new Error("Sharing - Data has been tampered with");return(0,s.decryptAES256)({key:o.aes,iv:a.iv,encryptedData:a.secured})}t.makeCryptoService=()=>({symmetricEncryption:(0,t.makeSymmetricEncryption)(),asymmetricEncryption:(0,t.makeAsymmetricEncryption)()}),t.makeSymmetricEncryption=()=>({generateNewAESKey:()=>(0,s.generateAESKey)().then(l.bufferToBase64),encryptAES256:async(e,t)=>{const r=(0,l.base64ToBuffer)(t),n=(0,l.base64ToBuffer)(e),o=await(0,p.hashAndSplitKey)(n),a=(0,c.generateIV)();return(0,s.encryptAES256)({key:o.aes,iv:a,clearData:r}).then((async e=>{const t=(0,l.concatBuffers)(a,e),n=await(0,s.signHashHmacSHA256)({key:o.hmac,data:t}),i=(0,c.makeKWC5DashlaneSecureData)(r,e,a,n),u=(0,c.convertKw5ToTransportableData)(i);return(0,l.bufferToBase64)(u)}))},encryptSharingItem:async(e,r)=>{const o=(0,t.makeSymmetricEncryption)(),a=(0,i.getDashlaneXml)(r),s=(0,l.utf8ToBase64)(a),c=(0,l.base64ToBuffer)(s),u=n.deflate(new Uint8Array(c)).buffer,d=(0,l.addQtCompressHeader)(u),p=(0,l.bufferToBase64)(d);return o.encryptAES256(e,p)},decryptAES256:async(e,t)=>{const r=await g(e,t);let n="";try{n=(0,l.base64BufferToUtf8)(r)}catch{n=(0,l.bufferToBase64)(r)}return n},decryptSharingItem:async(e,t)=>{const r=await g(e,t);try{const e=new Uint8Array(r),t=(0,l.uint8ArrayToText)(e);return JSON.parse(t)}catch{const e=(0,o.deflatedUtf8ToUtf16)(r),{__type__:t,...n}=await(0,i.parseDashlaneXml)(e),s={...n,kwType:n.kwType||t};return(0,a.isCredential)(s)?(0,f.fixCredentialTypesFromTransaction)(s):(0,a.isNote)(s)?(0,f.fixNoteTypesFromTransaction)(s):s}},signHmacSHA256:(e,t)=>{const r=(0,l.base64ToBuffer)(t),n=(0,l.base64ToBuffer)(e);return(0,s.signHashHmacSHA256)({key:n,data:r}).then((e=>(0,l.bufferToBase64)(e)))},verifyHmacSHA256:(e,t,r)=>{const n=(0,l.base64ToBuffer)(r),o=(0,l.base64ToBuffer)(e),a=(0,l.base64ToBuffer)(t);return(0,s.verifyHashHmacSHA256)({key:o,signature:a,data:n})}}),t.makeAsymmetricEncryption=(e=u.DefaultAsymmetricOptions)=>({generateRsaKeyPair:()=>(0,u.generateRsaOaepKeyPair)(e.hashAlgorithm),encrypt:(t,r)=>{const n=(0,l.base64ToBuffer)(r),o=(0,l.pemToSpki)(t);return(0,u.encrypt)({publicKey:o,data:n,options:e}).then(l.bufferToBase64)},decrypt:(t,r)=>{const n=(0,l.base64ToBuffer)(r),o=(0,l.pemTopkcs8)(t);return(0,u.decrypt)({privateKey:o,data:n,options:e}).then(l.bufferToBase64)},sign:(t,r)=>{const n=(0,l.pemTopkcs8)(t),o=(0,l.base64ToBuffer)(r);return(0,u.sign)({privateKey:n,data:o,options:e}).then(l.bufferToBase64)},verify:(t,r,n)=>{const o=(0,l.pemToSpki)(t),a=(0,l.base64ToBuffer)(n),i=(0,l.base64ToBuffer)(r);return(0,u.verify)({publicKey:o,signature:i,data:a,options:e})},verifyJwk:(t,r,n)=>{const o=(0,d.jwkToSpki)(t),a=(0,l.base64ToBuffer)(r),i=(0,l.base64ToBuffer)(n);return(0,u.verify)({publicKey:o,signature:a,data:i,options:e})}})},1860:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeKeyBasedCrypto=t.makeKeyDataEncryptorService=t.DATA_TAMPERED_ERROR=void 0;const n=r(95623),o=r(70252),a=r(16038),i=r(46445),s=r(27993),c=r(69530);t.DATA_TAMPERED_ERROR="KeyBasedCrypto - Data has been tampered with",t.makeKeyDataEncryptorService=function(){let e=null;return{setInstance:r=>{e=(0,t.makeKeyBasedCrypto)(r)},getInstance:()=>{if(!e)throw new Error("makeKeyDataEncryptorService: you must call setInstance(password,serverKey) before getting the instance");return e},close:()=>{e=null},hasBeenSet:()=>Boolean(e)}},t.makeKeyBasedCrypto=e=>{const r=function(e){return e.raw&&(0,a.isBase64Encoded)(e.raw)?(0,a.base64ToBuffer)(e.raw):e.raw?(0,a.str2ab)(e.raw):e.buffer}(e);return{isKey:()=>{throw new Error("makeKeyBasedCrypto:isKey not implemented")},encrypt:e=>Promise.resolve().then((()=>(0,i.hashAndSplitKey)(r).then((t=>{const r=(0,s.generateIV)();return(0,c.encryptAES256)({key:t.aes,iv:r,clearData:e}).then((n=>{const o=(0,a.concatBuffers)(r,n);return(0,c.signHashHmacSHA256)({key:t.hmac,data:o}).then((t=>{const o=(0,s.makeKWC5DashlaneSecureData)(e,n,r,t),i=(0,s.convertKw5ToTransportableData)(o);return(0,a.bufferToBase64)(i)}))}))})))).catch((e=>(function(e,t){const r=new Error(`[makeKeyBasedCrypto] - Error while encrypting data.: ${t}`);throw(0,o.sendExceptionLog)({error:r}),n.Debugger.log(r),r}(0,e),null))),decrypt:e=>Promise.resolve().then((()=>{const n=(0,a.base64ToBuffer)(e);return(0,i.hashAndSplitKey)(r).then((e=>{const r=(0,s.parseDashlaneKw5SecureData)(new Uint8Array(n)),o=(0,a.concatBuffers)(r.iv,r.secured);return(0,c.signHashHmacSHA256)({key:e.hmac,data:o}).then((n=>{if((0,a.bufferToBase64)(n)!==(0,a.bufferToBase64)(r.hash))throw new Error(t.DATA_TAMPERED_ERROR);return(0,c.decryptAES256)({key:e.aes,iv:r.iv,encryptedData:r.secured})}))}))})),prepareCrypto:()=>Promise.resolve(),readCryptoPayload:e=>{const t=(0,a.base64ToBuffer)(e);return(0,s.parseDashlaneKw5SecureData)(new Uint8Array(t)).version}}}},91301:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRYPTO_NODERIVATION_HMAC64=void 0,t.CRYPTO_NODERIVATION_HMAC64="$1$noderivation$aes256$cbchmac64$16$"},56668:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareCrypto=t.deflatedUtf8ToUtf16=t.utf16ToDeflatedUtf8=t.inflateUtf16=t.deflateUtf16=t.cipherDashlaneSecureData=t.decipherDashlaneSecureData=t.makeCryptoCenterService=t.PBKDF2_DEFAULT_PAYLOAD=t.ARGON2_DEFAULT_PAYLOAD=void 0;const n=r(93347),o=r(62802),a=r(16038),i=r(3678),s=r(65675);Object.defineProperty(t,"ARGON2_DEFAULT_PAYLOAD",{enumerable:!0,get:function(){return s.ARGON2_DEFAULT_PAYLOAD}}),Object.defineProperty(t,"PBKDF2_DEFAULT_PAYLOAD",{enumerable:!0,get:function(){return s.PBKDF2_DEFAULT_PAYLOAD}});const c=r(69530),u=r(46445),l=r(55623),d=r(56584),p=r(83570),f=r(95623),g=r(16356),m=r(27517);function h(e,t,r){const n=t+r;return(0,s.isCryptoConfigKWC3)(e.derivation)?(0,a.str2ab)(n):(0,a.utf8ToBase64Buffer)(n)}t.makeCryptoCenterService=function(e,r,n,o){const i=(0,p.makeGetDerivateKeyWithCacheAndQueue)(),c=e.raw,u=(0,a.str2ab)(r+c);return{isKey:(e,t)=>e+t===r+c,decrypt:(e,n={})=>(0,t.decipherDashlaneSecureData)(e,c,r,i,n),encrypt:(e,a={})=>{const{cryptoConfig:s}=a,u=s||o,l={...a,cryptoConfig:u};return(0,t.cipherDashlaneSecureData)(c,r,e,n,i,l)},prepareCrypto:()=>_(n,u,i,o),readCryptoPayload:e=>(0,s.readCryptoPayload)(e)}},t.decipherDashlaneSecureData=async(e,t,r,n,o={})=>{const{forceKeyKWC5:i,forceSalt:u}=o,l=(0,a.base64ToBuffer)(e),d=(0,s.parseCipheredData)(new Uint8Array(l)),p=d.cryptoConfig;let f,g;if(((0,s.isDashlaneSecureDataFlexible)(d)||(0,s.isDashlaneSecureDataKWC3)(d))&&(f=u||d.salt),(0,s.isDashlaneSecureDataKWC5)(d)&&i)g=i;else if((0,s.isNoDerivation)(p.derivation))g=(0,a.str2ab)(t);else{const e=h(p,r,t);g=await n(e,f,p.derivation)}const m=await async function(e,t,r){return"evpByteToKey"===e.cryptoConfig.ciphering.options.ivGeneration.method?y(e.cryptoConfig,t,r):(0,s.isDashlaneSecureDataFlexible)(e)||(0,s.isDashlaneSecureDataKWC5)(e)?e.iv:void 0}(d,f,g),{signatureKey:E,cipheringKey:A}=await S(d.cryptoConfig,g);return await v(d,E,m),await(0,c.decryptAES256)({key:A,iv:m,encryptedData:d.cipheredContent})};const y=async(e,t,r)=>{const n={derivedKey:r,salt:t,keyLength:32,ivLength:e.ciphering.options.ivLength};return(0,i.evpBytesToKey)(n)},S=async(e,t)=>{if("skip"===e.signature.method)return{signatureKey:new ArrayBuffer(0),cipheringKey:t};const r="hmac64"===e.signature.method?t:await(0,u.computeHashSha512)(t);if(64!==r.byteLength)throw new Error(`[cryptoCenter][prepareKeys] - cryptoKey's length must be 64B but is ${r.byteLength}B`);return{cipheringKey:(0,a.getSubDataByteArray)(new Uint8Array(r),0,r.byteLength/2).buffer,signatureKey:(0,a.getSubDataByteArray)(new Uint8Array(r),r.byteLength/2,r.byteLength).buffer}},v=(e,t,r)=>{if("skip"===e.cryptoConfig.signature.method)return Promise.resolve();const n=(0,a.concatBuffers)(r,e.cipheredContent),o=e;return(0,c.signHashHmacSHA256)({key:t,data:n}).then((e=>{if((0,a.bufferToBase64)(e)!==(0,a.bufferToBase64)(o.hash))throw new Error("[decipherFlexibleMarker] Data are corrupted: HMAC signature cannot be verified")}))};t.cipherDashlaneSecureData=async(e,t,r,n,o,i={})=>{const{cryptoConfig:u,forceSalt:d,forceIv:p}=i,f=u||(0,s.getCryptoConfig)(n);let g,m;if((0,s.isNoDerivation)(f.derivation))g=(0,a.str2ab)(e);else{m=d||b(n,f.derivation);const r=h(f,t,e);g=await o(r,m,f.derivation)}const v=p||await async function(e,t,r){return"evpByteToKey"===e.ciphering.options.ivGeneration.method?y(e,t,r):(0,l.getRandomValues)(e.ciphering.options.ivLength)}(f,m,g),{signatureKey:_,cipheringKey:T}=await S(f,g),I=await(0,c.encryptAES256)({key:T,iv:v,clearData:r}),w=await E(I,f,_,v);return A(m,v,w,I,f)},t.deflateUtf16=e=>n.deflate(e,{level:7}),t.inflateUtf16=e=>{const t=new Uint8Array(e);return n.inflate(t,{to:"string"})},t.utf16ToDeflatedUtf8=(e,t={})=>{const{skipDeflate:r,skipUtf8Encoding:n}=t,o=n?e:(0,a.utf8ChunkEncode)(e),i=(0,a.str2ab)(o);return r?i:(0,a.addQtCompressHeader)((0,a.deflateBuffer)(i))},t.deflatedUtf8ToUtf16=(e,t={})=>{const{skipUtf8Decoding:r,skipInflate:i,unescapeXml:s}=t,c=new Uint8Array(e),u=i?c:(e=>{const t=(0,a.removeQtCompressionHeader)(e),r=Math.pow(2,14)-1,i=new n.Inflate({chunkSize:r});if(i.push(t,o.Z_FINISH),i.err)throw new Error(`[Crypto] - postTreatData: unable to uncompress data - ${i.msg} (code ${i.err})`);return i.result})(c);let l=(0,a.uint8ArrayToText)(u);if(s&&(l=decodeURI(l)),!r)try{l=(0,a.utf8ChunkDecode)(l)}catch(e){f.Debugger.log("Cannot utf8.decode "+e)}return l};const E=(e,t,r,n)=>{if("skip"===t.signature.method)return Promise.resolve().then((()=>new ArrayBuffer(0)));const o=(0,a.concatBuffers)(n,e);return(0,c.signHashHmacSHA256)({key:r,data:o})},A=(e,t,r,n,o)=>{if((0,s.isCryptoConfigKWC3)(o.derivation)){const t=(0,d.convertDashlaneSecureDataKWC3ToTransportableData)({encryptedData:n,salt:e,version:"KWC3"});return(0,a.bufferToBase64)(t)}const i={salt:e,iv:t,hash:r,cipheredContent:n,cryptoConfig:o},c=(0,s.convertDashlaneSecureDataFlexibleToTransportableData)(i);return(0,a.bufferToBase64)(c)};async function _(e,t,r,n){const o=n??(0,s.getCryptoConfig)(e),a=o.derivation;if("noderivation"===a.method)return;const i=b(e,o.derivation);await r(t,i,a)}function b(e,t){return(0,s.isCryptoConfigKWC3)(t)?function(e){if(e.getUserSession().cryptoKwc3FixedSalt)return(0,a.base64ToBuffer)(e.getUserSession().cryptoKwc3FixedSalt);const t=(0,l.getRandomValues)(32),r=(0,a.bufferToBase64)(t);return e.dispatch((0,g.updateCryptoKwc3FixedSalt)(r)),t}(e):function(e){if(e.getPersonalSettings().CryptoFixedSalt)return(0,a.base64ToBuffer)(e.getPersonalSettings().CryptoFixedSalt);const t=(0,l.getRandomValues)(16),r={CryptoFixedSalt:(0,a.bufferToBase64)(t)};return e.dispatch((0,m.editPersonalSettings)(r)),t}(e)}t.prepareCrypto=_},27993:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeKWC5DashlaneSecureData=t.generateIV=t.parseDashlaneKw5SecureData=t.convertKw5ToTransportableData=void 0;const n=r(55623),o=r(16038);t.convertKw5ToTransportableData=e=>{let t=new ArrayBuffer(32);if("KWC5"!==e.version)throw new Error("Version must be KWC5");if(null===e.hash)throw new Error("hmacSha2 from DashlaneSecureData is null");if(null===e.iv)throw new Error("iv from DashlaneSecureData is null");e.iv&&(t=(0,o.concatBuffers)(e.iv,(0,n.getRandomValues)(16)));const r=(0,o.utf8ToBase64Buffer)(e.version);return(0,o.concatBuffers)(t,r,e.hash,e.secured)},t.parseDashlaneKw5SecureData=e=>{if(e.byteLength<36)throw new Error(`Data length should be at least 36 long but was ${e.byteLength}`);let t=0;const r=(0,o.getSubDataByteArray)(e,t,16).buffer;t+=32;const n=(0,o.getSubDataByteArray)(e,t,t+4),a=(0,o.uint8ArrayToText)(n);if("KWC5"!==a)throw new Error("Version must be KWC5");t+=4;const i=(0,o.getSubDataByteArray)(e,t,t+32).buffer;return t+=32,{iv:r,version:a,hash:i,secured:(0,o.getSubDataByteArray)(e,t,e.byteLength).buffer}},t.generateIV=()=>(0,n.getRandomValues)(16),t.makeKWC5DashlaneSecureData=(e,t,r,n)=>({version:"KWC5",clearData:e,secured:t,iv:r,hash:n})},65675:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PBKDF2_DEFAULT_PAYLOAD=t.ARGON2_DEFAULT_PAYLOAD=t.KWC3_DEFAULT_PAYLOAD=t.getUserCryptoPayload=t.getCryptoUserPayload=t.getCryptoConfig=t.makeFlexibleMarkerCryptoConfig=t.makeFlexibleMarkerPbkdf2Config=t.makeFlexibleMarkerArgon2dConfig=t.makeKWC3CryptoConfig=t.convertDashlaneSecureDataFlexibleToTransportableData=t.makeFlexibleMarkerPayloadBuffer=t.makeFlexibleMarkerPayloadString=t.makeFlexibleCryptoConfig=t.readCryptoPayload=t.parseCipheredData=t.getFlexibleSecureData=t.getLegacySecureData=t.getLegacyMarker=t.getLegacyCryptoConfig=t.parsePayload=t.getSignatureConfig=t.getCipheringConfiguration=t.getDerivationConfiguration=t.getPbkdf2DerivationConfig=t.getArgon2DerivationConfig=t.extractNextPayloadComponent=t.isDashlaneSecureDataFlexible=t.isDashlaneSecureDataKWC5=t.isDashlaneSecureDataKWC3=t.DashlaneCipherVersion=t.isSupportedAESMode=t.isSupportedDerivationMethod=t.isCryptoConfigKWC3=t.isNoDerivation=t.isArgon2Derivation=t.isPbkdf2Derivation=void 0;const n=r(16516),o=r(50415),a=r(16038);function i(e){return"pbkdf2"===e.method}function s(e){return"noderivation"===e.method||"skip"===e.method}function c(e){return Boolean(["argon2d","pbkdf2","noderivation","skip"].find((t=>t===e)))}function u(e){return Boolean(["cbchmac","cbchmac64","cbc","gcm"].find((t=>t===e)))}function l(e){return{derivation:"argon2d"===e?{method:"argon2d",saltLength:16,t_cost:3,m_cost:32768,parallelism:2}:{method:"pbkdf2",saltLength:16,iterations:2e5,hashMethod:"sha256"},signature:{method:"hmac"},ciphering:{method:"aes256",options:{mode:"cbchmac",ivLength:16,ivGeneration:{method:"data"}}}}}function d(e){return e.getPersonalSettings().CryptoUserPayload||t.ARGON2_DEFAULT_PAYLOAD}t.isPbkdf2Derivation=i,t.isArgon2Derivation=function(e){return"argon2d"===e.method},t.isNoDerivation=s,t.isCryptoConfigKWC3=function(e){return i(e)&&10204===e.iterations&&"sha1"===e.hashMethod},t.isSupportedDerivationMethod=c,t.isSupportedAESMode=u,t.DashlaneCipherVersion=(0,o.Enum)("KWC3","KWC5"),t.isDashlaneSecureDataKWC3=e=>e.marker===t.DashlaneCipherVersion.KWC3,t.isDashlaneSecureDataKWC5=e=>e.marker===t.DashlaneCipherVersion.KWC5,t.isDashlaneSecureDataFlexible=e=>void 0!==e.iv,t.extractNextPayloadComponent=e=>{if(null===e)return"";let t=e;return t.startsWith("$")&&(t=t.substring(1,e.length)),t.substring(0,t.indexOf("$"))},t.getArgon2DerivationConfig=e=>{let r=0;const n={};if(n.saltLength=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=n.saltLength.toString().length+1,n.t_cost=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=n.t_cost.toString().length+1,n.m_cost=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=n.m_cost.toString().length+1,n.parallelism=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=n.parallelism.toString().length+1,isNaN(n.saltLength)||0===n.saltLength||isNaN(n.t_cost)||0===n.t_cost||isNaN(n.m_cost)||0===n.m_cost||isNaN(n.parallelism)||0===n.parallelism)throw new Error("Wrong parameters in payload");return n},t.getPbkdf2DerivationConfig=e=>{let r=0;const n={};if(n.saltLength=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=n.saltLength.toString().length+1,n.iterations=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=n.iterations.toString().length+1,n.hashMethod=String((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=n.hashMethod.length+1,isNaN(n.saltLength)||isNaN(n.iterations))throw new Error("Wrong parameters in payload");return n},t.getDerivationConfiguration=e=>{let r=0,n={};const o=String((0,t.extractNextPayloadComponent)(e.substring(r,e.length)));if(!c(o))throw new Error("Derivation method not supported");if(n.method=o,"noderivation"===o||"skip"===o)return n;if(r+=n.method.length+1,"argon2d"===n.method){const o=(0,t.getArgon2DerivationConfig)(e.substring(r,e.length));n={...n,...o}}if("pbkdf2"===n.method){const o=(0,t.getPbkdf2DerivationConfig)(e.substring(r,e.length));n={...n,...o}}return n},t.getCipheringConfiguration=e=>{const r={options:{}};let n=0;if(r.method=String((0,t.extractNextPayloadComponent)(e.substring(n,e.length))),n+=r.method.length+1,"aes256"!==r.method)throw new Error(`[getCipheringConfiguration]: Wrong ciphering method expected "aes256" but get ${r.method}`);{const o=String((0,t.extractNextPayloadComponent)(e.substring(n,e.length)));if(!u(o))throw new Error("[getCipheringConfiguration]: unsupported AES mode");if(r.options.mode=o,n+=r.options.mode.length+1,r.options.ivLength=Number((0,t.extractNextPayloadComponent)(e.substring(n,e.length))),isNaN(r.options.ivLength)||0===r.options.ivLength)throw new Error("[getCipheringConfiguration]: Wrong parameters in payload")}return r},t.getSignatureConfig=e=>{const t={method:"skip"};return"cbchmac"===e&&(t.method="hmac"),"cbchmac64"===e&&(t.method="hmac64"),t},t.parsePayload=e=>{if(null===e)throw new Error("parsePayload: No payload to parse");if(e.startsWith("$")){let r=0;const o=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length)));if(1!==o)throw new Error(`parsePayload: version should be 1 but is ${o}`);r+=o.toString().length+1;const a=(0,t.getDerivationConfiguration)(e.substring(r,e.length)),i=(0,n.reduce)(((e,t)=>e+(`${t}`.length+1)));r=i(r,(0,n.values)(a));const s=(0,t.getCipheringConfiguration)(e.substring(r,e.length));r+=String(s.method).length+1,r=i(r,(0,n.values)(s.options));const c={method:"data"};return{cryptoConfig:{derivation:a,signature:(0,t.getSignatureConfig)(s.options.mode),ciphering:{method:s.method,options:{...s.options,ivGeneration:c}}},payloadLength:r+1}}throw new Error("parsePayload: Unable to parse payload")},t.getLegacyCryptoConfig=e=>{if("KWC3"===e)return{derivation:{method:"pbkdf2",saltLength:32,iterations:10204,hashMethod:"sha1"},signature:{method:"skip"},ciphering:{method:"aes256",options:{mode:"cbc",ivLength:16,ivGeneration:{method:"evpByteToKey"}}}};if("KWC5"===e)return{derivation:{method:"skip"},signature:{method:"hmac"},ciphering:{method:"aes256",options:{mode:"cbchmac",ivLength:16,ivGeneration:{method:"data"}}}};throw new Error("Wrong marker")},t.getLegacyMarker=e=>{const r=(0,a.getSubDataByteArray)(e,32,36),n=(0,a.uint8ArrayToText)(r);return n===t.DashlaneCipherVersion.KWC3||n===t.DashlaneCipherVersion.KWC5?n:null},t.getLegacySecureData=(e,r)=>{if(e===t.DashlaneCipherVersion.KWC3)return{marker:e,salt:(0,a.getSubDataByteArray)(r,0,32).buffer,cipheredContent:(0,a.getSubDataByteArray)(r,36,r.byteLength).buffer,cryptoConfig:(0,t.getLegacyCryptoConfig)(e)};if(e===t.DashlaneCipherVersion.KWC5){const n=16,o=32;return{marker:e,iv:(0,a.getSubDataByteArray)(r,0,n).buffer,hash:(0,a.getSubDataByteArray)(r,36,36+o).buffer,cipheredContent:(0,a.getSubDataByteArray)(r,36+o,r.byteLength).buffer,cryptoConfig:(0,t.getLegacyCryptoConfig)(e)}}throw new Error("Wrong marker")},t.getFlexibleSecureData=e=>{const r=(0,a.uint8ArrayToText)(e),{cryptoConfig:n,payloadLength:o}=(0,t.parsePayload)(r);let i=o;const c=s(n.derivation)?0:n.derivation.saltLength,u=n.ciphering.options.ivLength,l=(0,a.getSubDataByteArray)(e,i,i+c).buffer;i+=c;const d=(0,a.getSubDataByteArray)(e,i,i+u).buffer;i+=u;const p=(0,a.getSubDataByteArray)(e,i,i+32).buffer;return i+=32,{salt:l,iv:d,hash:p,cipheredContent:(0,a.getSubDataByteArray)(e,i,e.length).buffer,cryptoConfig:n}},t.parseCipheredData=e=>{const r=(0,t.getLegacyMarker)(e);if(r)return(0,t.getLegacySecureData)(r,e);if("$"===(0,a.uint8ArrayToText)((0,a.getSubDataByteArray)(e,0,1)))return(0,t.getFlexibleSecureData)(e);throw new Error("Unable to parse ciphered data")},t.readCryptoPayload=e=>{const r=(0,a.base64ToBuffer)(e),n=new Uint8Array(r),o=(0,t.getLegacyMarker)(n);if(o)return o;const i=(0,a.uint8ArrayToText)(n),{payloadLength:s}=(0,t.parsePayload)(i);return i.substr(0,s)},t.makeFlexibleCryptoConfig=e=>e.cryptoConfig,t.makeFlexibleMarkerPayloadString=e=>{let t="$1";const r=(0,n.reduce)(((e,t)=>"string"==typeof t||"number"==typeof t?e+`$${String(t)}`:e));return t=r(t,(0,n.values)(e.derivation)),t=r(t,[e.ciphering.method]),t=r(t,(0,n.values)((0,n.omit)(["ivGeneration"],e.ciphering.options))),t+="$",t},t.makeFlexibleMarkerPayloadBuffer=e=>{const r=(0,t.makeFlexibleMarkerPayloadString)(e);return(0,a.str2ab)(r)},t.convertDashlaneSecureDataFlexibleToTransportableData=e=>{const{cipheredContent:r,cryptoConfig:n,hash:o,iv:i,salt:c}=e,u=(0,t.makeFlexibleMarkerPayloadBuffer)(n);return s(n.derivation)?(0,a.concatBuffers)(u,i,o,r):(0,a.concatBuffers)(u,c,i,o,r)},t.makeKWC3CryptoConfig=function(){return{derivation:{method:"pbkdf2",saltLength:32,iterations:10204,hashMethod:"sha1"},signature:{method:"skip"},ciphering:{method:"aes256",options:{mode:"cbc",ivLength:16,ivGeneration:{method:"evpByteToKey"}}}}},t.makeFlexibleMarkerArgon2dConfig=function(){return{method:"argon2d",saltLength:16,t_cost:3,m_cost:32768,parallelism:2}},t.makeFlexibleMarkerPbkdf2Config=function(){return{method:"pbkdf2",saltLength:16,iterations:2e5,hashMethod:"sha256"}},t.makeFlexibleMarkerCryptoConfig=l,t.getCryptoConfig=function(e){const r=d(e);return(0,n.isNil)(r)?l("argon2d"):"KWC3"===r?{derivation:{method:"pbkdf2",saltLength:32,iterations:10204,hashMethod:"sha1"},signature:{method:"skip"},ciphering:{method:"aes256",options:{mode:"cbc",ivLength:16,ivGeneration:{method:"evpByteToKey"}}}}:(0,t.parsePayload)(r).cryptoConfig},t.getCryptoUserPayload=d,t.getUserCryptoPayload=e=>{if("pbkdf2_kwc3"===e)return{CryptoUserPayload:t.KWC3_DEFAULT_PAYLOAD};const r="argon2"===e?"argon2d":"pbkdf2";return{CryptoUserPayload:(0,n.compose)(a.base64BufferToUtf8,t.makeFlexibleMarkerPayloadBuffer,l)(r)}},t.KWC3_DEFAULT_PAYLOAD="KWC3",t.ARGON2_DEFAULT_PAYLOAD="$1$argon2d$16$3$32768$2$aes256$cbchmac$16$",t.PBKDF2_DEFAULT_PAYLOAD="$1$pbkdf2$16$200000$sha256$aes256$cbchmac$16$"},15215:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeCanonicalRequest=void 0;const n=r(16516);t.makeCanonicalRequest=e=>{const t=e=>e.toLowerCase(),r=o(e.headers),a=e.headersToSign?n.pick(n.map(t,n.values(e.headersToSign)),n.mapObjIndexed(t,r)):r,l=i(e.uri),d=s(e.query),p=c(a),f=u(a);return{canonicalRequest:[e.method,l,d,p,f,e.hashedPayload].join("\n"),signedHeaders:f}};const o=e=>n.pipe(n.toPairs,n.map((([e,t])=>[e.toLowerCase(),t])),l)(e),a=e=>e.replace(/[^A-Za-z0-9_.~\-]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())),i=e=>(e=>e.split("/").map((e=>a(e))).join("/"))(e),s=e=>n.pipe((e=>n.toPairs(e)),n.sortBy((e=>e[0])),n.map((([e,t])=>((e,t)=>{const r=a(e),o=Array.isArray(t)?t:[t];return n.pipe(n.map((e=>a(e))),n.map((e=>[r,e])),n.sortBy(n.reduce(n.concat,"")))(o)})(e,t))),n.unnest,n.map((([e,t])=>`${e}=${t}`)),n.join("&"))(e),c=e=>n.pipe((e=>n.toPairs(e)),n.sortBy((e=>e[0].toLowerCase())),n.map((([e,t])=>((e,t)=>e.toLowerCase()+":"+t.trim().replace(/\s+/g," ")+"\n")(e,t))),n.join(""))(e),u=e=>n.pipe(n.keys,n.map((e=>e.toLowerCase())),n.sortBy(n.identity),n.join(";"))(e),l=e=>{const t={};for(let r=0;r<e.length;++r)t[e[r][0]]=e[r][1];return t}},51907:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getApiCredentials=void 0;const n=r(56915),o=r(17825),a=r(45956);t.getApiCredentials=function(e,t){if(t.authenticationType===a.ApiAuthType.None)return{type:t.authenticationType};const r={appKeys:(0,n.appKeysSelector)(e)};switch(t.authenticationType){case a.ApiAuthType.App:return{type:a.ApiAuthType.App,...r};case a.ApiAuthType.UserDevice:return{type:a.ApiAuthType.UserDevice,...r,login:t.login,deviceKeys:(0,n.deviceKeysSelector)(e)};case a.ApiAuthType.Session:return{type:a.ApiAuthType.Session,...r,login:t.login,sessionKeys:(0,n.sessionKeysSelector)(e),deviceId:(0,n.getDeviceIdSelector)(e,t.login)};case a.ApiAuthType.TeamDevice:return{type:a.ApiAuthType.TeamDevice,...r,teamUuid:t.teamUuid,deviceKeys:(0,n.deviceKeysSelector)(e)};default:(0,o.assertUnreachable)(t.authenticationType)}}},90338:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareApiEndpoint=void 0;const n=r(45956),o=r(55730);t.prepareApiEndpoint=function(e){const{authenticationType:t,endpoint:r,group:a,method:i,version:s,accept:c,responseType:u}=e,l=`/${n.ApiVersion[s]}/${a}/${r}`;return(0,o.getMakeApiRequest)(l,t,i,u??"json",c)}},27054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeSafeDeviceName=t.makeSafeLanguage=t.makeSafeCountry=void 0;t.makeSafeCountry=function(e){return!e||e.length<2||e.length>5?"ZZ":e};t.makeSafeLanguage=function(e){return!e||e.length<2||e.length>5?"und":e};t.makeSafeDeviceName=function(e){return e||"Device"}},2978:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCode=void 0;const n=r(45956);t.getCode=(e,t)=>{const r=t.indexOf(e);return r<0?n.UnknownError:t[r]}},56020:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(27054),t),o(r(85188),t),o(r(2978),t)},85188:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isExtraDeviceTokenValid=t.isEmailTokenValid=void 0,t.isEmailTokenValid=function(e){return/^\d{6}$/.test(e)},t.isExtraDeviceTokenValid=function(e){return/^[A-Za-z0-9+/]{64}$/.test(e)}},46298:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownError=t.isApiErrorOfType=t.isApiError=void 0;var a=r(45956);Object.defineProperty(t,"isApiError",{enumerable:!0,get:function(){return a.isApiError}}),Object.defineProperty(t,"isApiErrorOfType",{enumerable:!0,get:function(){return a.isApiErrorOfType}}),Object.defineProperty(t,"UnknownError",{enumerable:!0,get:function(){return a.UnknownError}}),o(r(91503),t),o(r(56020),t)},55730:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getApiClientAgentHeader=t.validateStatus=t.makeApiResponse=t.getMethodParams=t.getAuthParams=t.getMakeApiRequest=void 0;const n=r(47408),o=r(17825),a=r(86056),i=r(14656),s=r(56915),c=r(45956),u=r(78577),l=r(51907),d=r(48749),p=r(45800);function f(e,{login:t,teamUuid:r}){switch(e){case c.ApiAuthType.App:case c.ApiAuthType.None:return{authenticationType:e};case c.ApiAuthType.UserDevice:case c.ApiAuthType.Session:return{authenticationType:e,login:t};case c.ApiAuthType.TeamDevice:return{authenticationType:e,teamUuid:r};default:(0,o.assertUnreachable)(e)}}function g(e,t){switch(e){case c.ApiRequestMethod.GET:return{method:e};case c.ApiRequestMethod.POST:return{method:e,payload:t};default:(0,o.assertUnreachable)(e)}}function m(e){const t=function({errors:e}){return Array.isArray(e)&&e.length>0?e[0]:null}(e);return t||function(e){return{code:"success",data:e.data?null:e,...e.data}}(e)}function h(e){return JSON.stringify({platform:e.platformName,version:e.appVersion})}t.getMakeApiRequest=function(e,r,y,S,v){return async(E,A)=>{const _={login:"",teamUuid:"",payload:{},...A||{}},b=g(y,_.payload),T=f(r,{login:_.login,teamUuid:_.teamUuid}),I=(0,l.getApiCredentials)(E.getState(),T),w={Accept:v??"application/json","Content-Type":"application/json; charset=UTF-8","dashlane-client-agent":h((0,a.getPlatformInfo)())},C={...w,Host:new URL(d.config.DASHLANE_API_HOST_WITH_SCHEME).hostname},O=await async function(e,t,r,a,i){if(r.type===c.ApiAuthType.None)return{};const l=(0,s.dashlaneServerDeltaTimestampSelector)(e.getState())||0,d=Math.round((0,n.getUnixTimestamp)()-l),p=function(e){switch(e.method){case c.ApiRequestMethod.GET:return"";case c.ApiRequestMethod.POST:return JSON.stringify(e.payload);default:(0,o.assertUnreachable)(e)}}(i),{method:f}=i,g={pathname:t,method:f,rawBody:p,headers:a};return{Authorization:await(0,u.signRequest)({request:g,timestamp:d,credentials:r})}}(E,e,I,C,b),D={...w,...O,...(0,p.getCloudflareHeaders)()},P=`${d.config.DASHLANE_API_HOST_WITH_SCHEME}${e}`,{data:N}=await function(e,r,n,a){const s={headers:n,validateStatus:t.validateStatus,responseType:a};switch(e.method){case c.ApiRequestMethod.GET:return(0,i.get)(r,s);case c.ApiRequestMethod.POST:return(0,i.post)(r,e.payload,s);default:(0,o.assertUnreachable)(e)}}(b,P,D,S);return m(N)}},t.getAuthParams=f,t.getMethodParams=g,t.makeApiResponse=m,t.validateStatus=e=>e>=100&&e<=500,t.getApiClientAgentHeader=h},41075:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAndEvaluateForUser=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.abtesting,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetAndEvaluateForUser"},i=(0,o.prepareApiEndpoint)(a);t.getAndEvaluateForUser=async function(e,t,r){return i(e,{login:t,payload:r})}},14651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accountInfo=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.account,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"AccountInfo"},i=(0,n.prepareApiEndpoint)(a);t.accountInfo=async function(e,t){return i(e,{login:t,payload:{}})}},45468:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUserWithSSO=void 0;const n=r(90338),o=r(45956),a={authenticationType:o.ApiAuthType.App,endpoint:"CreateUserWithSSO",group:o.ApiEndpointGroups.account,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},i=(0,n.prepareApiEndpoint)(a);t.createUserWithSSO=async function(e,t){return i(e,{payload:t})}},55710:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUser=t.MissingContactPhone=void 0;const n=r(90338),o=r(45956);t.MissingContactPhone="missing_contact_phone";const a={group:o.ApiEndpointGroups.account,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"CreateUser"},i=(0,n.prepareApiEndpoint)(a);t.createUser=async function(e,t){return i(e,{payload:t})}},25011:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPremiumStatus=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.premium,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetPremiumStatus"},i=(0,n.prepareApiEndpoint)(a);t.getPremiumStatus=function(e,t){return i(e,{login:t,payload:{}}).then((e=>e))}},31375:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSubscriptionInformation=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.premium,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetSubscriptionInfo"},i=(0,n.prepareApiEndpoint)(a);t.getSubscriptionInformation=function(e,t){return i(e,{login:t,payload:{}}).then((e=>e))}},97421:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestAccountCreation=t.AccountExistsStatus=void 0;const n=r(90338),o=r(45956);!function(e){e.AccountExists="yes",e.AccountDoesntExist="no",e.AccountDoesntExistInvalid="no_invalid",e.AccountDoesntExistUnlikely="no_unlikely"}(t.AccountExistsStatus||(t.AccountExistsStatus={}));const a={group:o.ApiEndpointGroups.account,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"RequestAccountCreation"},i=(0,n.prepareApiEndpoint)(a);t.requestAccountCreation=function(e,t){return i(e,{payload:t})}},63339:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateContactInfo=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.account,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"UpdateContactInfo"},i=(0,n.prepareApiEndpoint)(a);t.updateContactInfo=async function(e,t,r){return i(e,{login:t,payload:r})}},34957:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExistingSecureRemembermeSession=t.MismatchedSessionSecurity=t.SessionNotFound=t.AuthenticatorNotAvailableOnDevice=t.AuthenticationTypeNotSupported=t.AuthenticatorNotRegistered=t.AssertionRejected=t.AttestationRejected=t.ChallengeVerificationFailed=t.ChallengeExpired=t.ChallengeNotFound=t.UserHasNoActiveAuthenticator=t.FailedToContactAuthenticatorDevice=t.VerificationMethodDisabled=t.VerificationFailed=t.ClientVersionDoesNotSupportSSOMigration=t.SSOBlocked=t.UserNotFound=t.U2fBadRequest=t.InvalidOTPBlocked=t.InvalidOTPAlreadyUsed=t.DeviceNotFound=t.DeviceDeactivated=void 0,t.DeviceDeactivated="device_deactivated",t.DeviceNotFound="device_not_found",t.InvalidOTPAlreadyUsed="invalid_otp_already_used",t.InvalidOTPBlocked="invalid_otp_blocked",t.U2fBadRequest="u2f_bad_request",t.UserNotFound="user_not_found",t.SSOBlocked="SSO_BLOCKED",t.ClientVersionDoesNotSupportSSOMigration="CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION",t.VerificationFailed="verification_failed",t.VerificationMethodDisabled="verification_method_disabled",t.FailedToContactAuthenticatorDevice="FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE",t.UserHasNoActiveAuthenticator="USER_HAS_NO_ACTIVE_AUTHENTICATOR",t.ChallengeNotFound="CHALLENGE_NOT_FOUND",t.ChallengeExpired="CHALLENGE_EXPIRED",t.ChallengeVerificationFailed="CHALLENGE_VERIFICATION_FAILED",t.AttestationRejected="ATTESTATION_REJECTED",t.AssertionRejected="ASSERTION_REJECTED",t.AuthenticatorNotRegistered="AUTHENTICATOR_NOT_REGISTERED",t.AuthenticationTypeNotSupported="AUTHENTICATION_TYPE_NOT_SUPPORTED",t.AuthenticatorNotAvailableOnDevice="AUTHENTICATOR_NOT_AVAILABLE_ON_DEVICE",t.SessionNotFound="SESSION_NOT_FOUND",t.MismatchedSessionSecurity="MISMATCHED_SESSION_SECURITY",t.ExistingSecureRemembermeSession="EXISTING_SECURE_REMEMBERME_SESSION"},8124:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeDeviceRegistrationWithAuthTicket=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"CompleteDeviceRegistrationWithAuthTicket"},i=(0,o.prepareApiEndpoint)(a);t.completeDeviceRegistrationWithAuthTicket=async function(e,t){return i(e,{payload:t})}},67747:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeExtraDeviceRegistrationWithToken=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"CompleteExtraDeviceRegistrationWithToken"},i=(0,o.prepareApiEndpoint)(a);t.completeExtraDeviceRegistrationWithToken=async function(e,t){return i(e,{payload:t})}},62712:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeLoginWithAuthTicket=void 0;const n=r(45956),o=r(90338),a={authenticationType:n.ApiAuthType.App,endpoint:"CompleteLoginWithAuthTicket",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},i=(0,o.prepareApiEndpoint)(a);t.completeLoginWithAuthTicket=async function(e,t){return i(e,{payload:t})}},13271:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeRememberMeOpenSession=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.Session,endpoint:"CompleteRememberMeOpenSession"},i=(0,o.prepareApiEndpoint)(a);t.completeRememberMeOpenSession=async function(e,t,r){return i(e,{login:t,payload:r})}},51837:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeRememberMeRegistration=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"CompleteRememberMeRegistration"},i=(0,o.prepareApiEndpoint)(a);t.completeRememberMeRegistration=async function(e,t,r){return i(e,{login:t,payload:r})}},34569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeTotpActivation=void 0;const n=r(45956),o=r(90338),a={authenticationType:n.ApiAuthType.UserDevice,endpoint:"CompleteTOTPActivation",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},i=(0,o.prepareApiEndpoint)(a);t.completeTotpActivation=async function(e,t,r){return i(e,{login:t,payload:r})}},61054:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeWebAuthnAuthenticatorRegistration=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"CompleteWebAuthnAuthenticatorRegistration"},i=(0,o.prepareApiEndpoint)(a);t.completeWebAuthnAuthenticatorRegistration=async function(e,t,r){return i(e,{login:t,payload:r})}},8111:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateRememberMe=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"DeactivateRememberMe"},i=(0,o.prepareApiEndpoint)(a);t.deactivateRememberMe=async function(e,t,r){return i(e,{login:t,payload:r})}},39446:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTotpVerification=void 0;const n=r(45956),o=r(90338),a={authenticationType:n.ApiAuthType.UserDevice,endpoint:"DeactivateTOTP",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},i=(0,o.prepareApiEndpoint)(a);t.deactivateTotpVerification=async function(e,t,r){return i(e,{login:t,payload:r})}},36602:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateWebAuthnAuthenticator=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"DeactivateWebAuthnAuthenticator"},i=(0,o.prepareApiEndpoint)(a);t.deactivateWebAuthnAuthenticator=async function(e,t,r){return i(e,{login:t,payload:r})}},32924:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAuthenticationTokenForCardUpdate=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"CreateTokenExtAuth"},i=(0,n.prepareApiEndpoint)(a);t.getAuthenticationTokenForCardUpdate=function(e,t,r){return i(e,{login:t,payload:r})}},60132:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAvailableWebAuthnAuthenticators=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.Session,endpoint:"GetAvailableWebAuthnAuthenticators"},i=(0,o.prepareApiEndpoint)(a);t.getAvailableWebAuthnAuthenticators=async function(e,t){return i(e,{login:t,payload:{}})}},12407:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMasterPasswordCipheringKey=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.Session,endpoint:"GetMasterPasswordCipheringKey"},i=(0,n.prepareApiEndpoint)(a);t.getMasterPasswordCipheringKey=async function(e,t){return i(e,{login:t,payload:{}})}},56736:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTokens=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.GET,authenticationType:o.ApiAuthType.App,endpoint:"GetTokens"},i=(0,n.prepareApiEndpoint)(a);t.getTokens=async function(e){return i(e)}},80585:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTwoFactorAuthenticationStatus=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"Get2FAStatus"},i=(0,n.prepareApiEndpoint)(a);t.getTwoFactorAuthenticationStatus=function(e,t){return i(e,{login:t,payload:{}})}},6862:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getU2FDevices=void 0;const n=r(45956),o=r(90338),a={authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetU2FDevices",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},i=(0,o.prepareApiEndpoint)(a);t.getU2FDevices=async function(e,t){return i(e,{login:t,payload:{}})}},48974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUnauthorizedProfiles=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"GetUnauthorizedProfiles"},i=(0,o.prepareApiEndpoint)(a);t.getUnauthorizedProfiles=async function(e,t){return i(e,{payload:t})}},97343:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserSSOInfo=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.TeamDevice,endpoint:"GetUserSSOInfo"},i=(0,o.prepareApiEndpoint)(a);t.getUserSSOInfo=async function(e,t){const{login:r,teamUuid:n,userServiceProviderKey:o}=t;return i(e,{login:r,teamUuid:n,payload:{login:r,userServiceProviderKey:o}})}},99850:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWebAuthnAuthenticators=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetWebAuthnAuthenticators"},i=(0,o.prepareApiEndpoint)(a);t.getWebAuthnAuthenticators=async function(e,t){return i(e,{login:t,payload:{}})}},43339:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initRememberMasterPassword=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"InitRememberMasterPassword"},i=(0,n.prepareApiEndpoint)(a);t.initRememberMasterPassword=async function(e,t,r){return i(e,{login:t,payload:r})}},71336:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performDashlaneAuthenticatorVerification=t.verificationTimeoutError=void 0;const n=r(59821),o=r(45956),a=r(90338);t.verificationTimeoutError={code:n.VerificationTimeout,message:"The authentication request has timed out",type:n.BusinessError};const i={authenticationType:o.ApiAuthType.App,endpoint:"PerformDashlaneAuthenticatorVerification",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},s=(0,a.prepareApiEndpoint)(i);t.performDashlaneAuthenticatorVerification=async function(e,t){return s(e,{payload:t})}},87992:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performDuoPushVerification=void 0;const n=r(45956),o=r(90338),a={authenticationType:n.ApiAuthType.App,endpoint:"PerformDuoPushVerification",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},i=(0,o.prepareApiEndpoint)(a);t.performDuoPushVerification=async function(e,t){return i(e,{payload:t})}},4685:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performEmailTokenVerification=void 0;const n=r(45956),o=r(90338),a={authenticationType:n.ApiAuthType.App,endpoint:"PerformEmailTokenVerification",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},i=(0,o.prepareApiEndpoint)(a);t.performEmailTokenVerification=async function(e,t){return i(e,{payload:t})}},78876:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performSsoVerification=void 0;const n=r(45956),o=r(90338),a={authenticationType:n.ApiAuthType.App,endpoint:"PerformSsoVerification",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},i=(0,o.prepareApiEndpoint)(a);t.performSsoVerification=async function(e,t){return i(e,{payload:t})}},96425:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performTotpVerification=void 0;const n=r(45956),o=r(90338),a={authenticationType:n.ApiAuthType.App,endpoint:"PerformTotpVerification",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},i=(0,o.prepareApiEndpoint)(a);t.performTotpVerification=async function(e,t){return i(e,{payload:t})}},99289:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performU2FVerification=void 0;const n=r(45956),o=r(90338),a={authenticationType:n.ApiAuthType.App,endpoint:"PerformU2FVerification",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},i=(0,o.prepareApiEndpoint)(a);t.performU2FVerification=async function(e,t){return i(e,{payload:t})}},88077:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestDeviceRegistration=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"RequestDeviceRegistration"},i=(0,o.prepareApiEndpoint)(a);t.requestDeviceRegistration=async function(e,t){return i(e,{payload:t})}},58539:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestExternalDeviceRegistration=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"RequestExternalDeviceRegistration"},i=(0,n.prepareApiEndpoint)(a);t.requestExternalDeviceRegistration=async function(e,t){return i(e,{payload:t})}},1371:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestExtraDeviceRegistration=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"RequestExtraDeviceRegistration"},i=(0,o.prepareApiEndpoint)(a);t.requestExtraDeviceRegistration=async function(e,t){return i(e,{login:t,payload:{tokenType:"shortLived"}})}},9439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestLogin=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"RequestLogin"},i=(0,o.prepareApiEndpoint)(a);t.requestLogin=async function(e,t){return i(e,{payload:t})}},51296:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestTOTPActivation=t.RequestTOTPActivationError=void 0;const n=r(45956),o=r(90338);!function(e){e.INTERNAL_ERROR="internal_error",e.CANNOT_SEED_FOR_USER_WITH_TOTP_ENABLED="cannot_seed_for_user_with_TOTP_enabled",e.OTP_FAILED="otp_failed",e.TOTP_TYPE_IS_NOT_SET_TO_EMAIL_TOKEN="totp_type_is_not_set_to_email_token",e.PHONE_VALIDATION_FAILED="phone_validation_failed"}(t.RequestTOTPActivationError||(t.RequestTOTPActivationError={}));const a={authenticationType:n.ApiAuthType.UserDevice,endpoint:"RequestTOTPActivation",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},i=(0,o.prepareApiEndpoint)(a);t.requestTOTPActivation=async function(e,t,r){return i(e,{login:t,payload:r})}},48253:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeU2FAuthenticator=t.U2FAuthenticatorRemovalBusinessErrors=void 0;const n=r(90338),o=r(45956);!function(e){e.VERIFICATION_METHOD_INVALID="verification_method_invalid",e.INVALID_AUTH_TICKET="invalid_auth_ticket",e.NO_KEYHANDLE_FOUND="NO_KEYHANDLE_FOUND"}(t.U2FAuthenticatorRemovalBusinessErrors||(t.U2FAuthenticatorRemovalBusinessErrors={}));const a={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateU2FDevice"},i=(0,n.prepareApiEndpoint)(a);t.removeU2FAuthenticator=async function(e,t,r){return i(e,{login:t,payload:r})}},48730:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestWebauthnOpenSession=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.Session,endpoint:"RequestWebauthnOpenSession"},i=(0,o.prepareApiEndpoint)(a);t.requestWebauthnOpenSession=async function(e,t){return i(e,{login:t,payload:{}})}},24925:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestWebauthnRegistration=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"RequestWebauthnRegistration"},i=(0,o.prepareApiEndpoint)(a);t.requestWebauthnRegistration=async function(e,t){return i(e,{login:t,payload:{}})}},31197:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addPrivateBreach=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.dataleakQA,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"AddTestLeak"},i=(0,o.prepareApiEndpoint)(a);t.addPrivateBreach=async function(e,t){return i(e,{payload:{...t}})}},77074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createOrUpdateDarkWebBreach=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.dataleakQA,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"SetTestDataBreach"},i=(0,o.prepareApiEndpoint)(a);t.createOrUpdateDarkWebBreach=async function(e,t){return i(e,{payload:{...t}})}},72579:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPublicBreach=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.breachesQA,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"CreateTestBreach"},i=(0,o.prepareApiEndpoint)(a);t.createPublicBreach=async function(e,t){return i(e,{payload:t})}},72911:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSubscriptionTokens=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.dataleak,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"GetSubscriptionTokens"},i=(0,o.prepareApiEndpoint)(a);t.getSubscriptionTokens=async function(e){return i(e,{payload:{}})}},82512:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDarkWebInsightReport=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetDarkWebInsightsReportDetails"},i=(0,o.prepareApiEndpoint)(a);t.getDarkWebInsightReport=async function(e,t,r){return i(e,{login:t,payload:r})}},19667:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDarkWebInsightsSummaryRequest=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetDarkWebInsightsSummary"},i=(0,o.prepareApiEndpoint)(a);t.getDarkWebInsightsSummaryRequest=async function(e,t){return i(e,{login:t,payload:{}})}},91063:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateDevices=t.CLIENT_STILL_OVERFLOWING=t.PAIRING_GROUPS_NOT_FOUND=t.CLIENT_DEVICES_NOT_FOUND=void 0;const n=r(45956),o=r(90338);t.CLIENT_DEVICES_NOT_FOUND="CLIENT_DEVICES_NOT_FOUND",t.PAIRING_GROUPS_NOT_FOUND="PAIRING_GROUPS_NOT_FOUND",t.CLIENT_STILL_OVERFLOWING="CLIENT_STILL_OVERFLOWING";const a={group:n.ApiEndpointGroups.devices,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"DeactivateDevices"},i=(0,o.prepareApiEndpoint)(a);t.deactivateDevices=async function(e,t,r){return i(e,{login:t,payload:r})}},18625:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listDevices=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.devices,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ListDevices"},i=(0,o.prepareApiEndpoint)(a);t.listDevices=async function(e,t){return i(e,{login:t,payload:{}})}},59821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidTeamDeviceLogin=t.BasicConfigNotFound=t.DeactivatedTeamDevice=t.DeviceKeyNotFound=t.DeviceAccountMappingAlreadyExists=t.B2bSsoUserNotFound=t.NoFreeSlot=t.NotProposedNeitherAccepted=t.InvalidSsoToken=t.InvalidUser=t.DomainNotValidForTeam=t.TotpActiveOrNotSeeded=t.ConfigurationNotFound=t.TeamDeviceEncryptedConfigNotFound=t.InvalidTOTPStatus=t.VerificationMethodInvalid=t.InvalidAuthTicket=t.WrongPublicKey=t.VerificationTimeout=t.VerificationRequiresRequest=t.VerificationFailedTooManyTimes=t.UpdateOfVerificationMethodNotSupported=t.UnexpectedError=t.UnchangedPrivateKey=t.TwofaSettingSameAsCurrent=t.TwofaServerKeyProvidedIncorrectly=t.TwofaServerKeyNotProvided=t.TeamDoesNotExist=t.TemporaryDisabled=t.NoMpEncryptionKey=t.NotAdmin=t.NoSharingKeys=t.NothingToUpdate=t.NoExternalToken=t.MissingSettingsTransaction=t.InvalidSessionAccessKey=t.InvalidKey=t.InsufficientTier=t.ExternalTokenSignatureNotAvailableForPartner=t.Current2faSettingCannotBeChangedAtUpload=t.ConflictingUpload=t.AccountBlockedContactSupport=t.ServerError=t.RateLimitError=t.InvalidRequestError=t.InjectedError=t.BusinessError=void 0,t.BusinessError="business_error",t.InjectedError="injected_error",t.InvalidRequestError="invalid_request_error",t.RateLimitError="rate_limit_error",t.ServerError="server_error",t.AccountBlockedContactSupport="account_blocked_contact_support",t.ConflictingUpload="conflicting_upload",t.Current2faSettingCannotBeChangedAtUpload="current_2fa_setting_cannot_be_changed_at_upload",t.ExternalTokenSignatureNotAvailableForPartner="external_token_signature_not_available_for_partner",t.InsufficientTier="INSUFFICIENT_TIER",t.InvalidKey="invalid_key",t.InvalidSessionAccessKey="invalid_session_access_key",t.MissingSettingsTransaction="MISSING_SETTINGS_TRANSACTION",t.NoExternalToken="no_external_token",t.NothingToUpdate="NOTHING_TO_UPDATE",t.NoSharingKeys="NO_SHARING_KEYS",t.NotAdmin="NOT_ADMIN",t.NoMpEncryptionKey="no_mp_encryption_key",t.TemporaryDisabled="temporary_disabled",t.TeamDoesNotExist="TEAM_DOES_NOT_EXIST",t.TwofaServerKeyNotProvided="2fa_server_key_not_provided",t.TwofaServerKeyProvidedIncorrectly="2fa_server_key_provided_incorrectly",t.TwofaSettingSameAsCurrent="2fa_setting_same_as_current",t.UnchangedPrivateKey="UNCHANGED_PRIVATE_KEY",t.UnexpectedError="unexpected_error",t.UpdateOfVerificationMethodNotSupported="UPDATE_OF_VERIFICATION_METHOD_NOT_SUPPORTED",t.VerificationFailedTooManyTimes="verification_failed_too_many_times",t.VerificationRequiresRequest="verification_requires_request",t.VerificationTimeout="verification_timeout",t.WrongPublicKey="WRONG_PUBLIC_KEY",t.InvalidAuthTicket="invalid_auth_ticket",t.VerificationMethodInvalid="verification_method_invalid",t.InvalidTOTPStatus="invalid_totp_status",t.TeamDeviceEncryptedConfigNotFound="TEAM_DEVICE_CONFIGURATION_NOT_FOUND",t.ConfigurationNotFound="TEAM_DEVICE_CONFIGURATION_NOT_FOUND",t.TotpActiveOrNotSeeded="totp_active_or_not_seeded",t.DomainNotValidForTeam="DOMAIN_NOT_VALID_FOR_TEAM",t.InvalidUser="invalid_user",t.InvalidSsoToken="invalid_sso_token",t.NotProposedNeitherAccepted="not_proposed_neither_accepted",t.NoFreeSlot="no_free_slot",t.B2bSsoUserNotFound="B2B_SSO_USER_NOT_FOUND",t.DeviceAccountMappingAlreadyExists="DEVICE_ACCOUNT_MAPPING_ALREADY_EXISTS",t.DeviceKeyNotFound="DEVICE_KEY_NOT_FOUND",t.DeactivatedTeamDevice="DEACTIVATED_TEAM_DEVICE",t.BasicConfigNotFound="BASIC_CONFIGURATION_NOT_FOUND",t.InvalidTeamDeviceLogin="INVALID_TEAM_DEVICE_LOGIN"},4933:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeFamilyMemberErrors=t.leaveFamilyErrors=t.joinFamilyErrors=t.UserMustCancelPremiumPlusRenewalToDowngradeToFamily=t.UserNotMemberOfFamily=t.CannotRemoveFamilyAdmin=t.UserMustBeFamilyAdmin=t.FamilyHasBeenDiscontinued=t.UserSubscriptionIsUpForRenewal=t.JoinFamilyTokenNotFound=t.AlreadyJoinedThisFamily=t.CannotJoinMultipleFamilies=t.FamilyFull=t.BadLogin=void 0,t.BadLogin="BAD_LOGIN",t.FamilyFull="FAMILY_FULL",t.CannotJoinMultipleFamilies="CANNOT_JOIN_MULTIPLE_FAMILIES",t.AlreadyJoinedThisFamily="ALREADY_JOINED_THIS_FAMILY",t.JoinFamilyTokenNotFound="JOIN_FAMILY_TOKEN_NOT_FOUND",t.UserSubscriptionIsUpForRenewal="USER_SUBSCRIPTION_IS_UP_FOR_RENEWAL",t.FamilyHasBeenDiscontinued="FAMILY_HAS_BEEN_DISCONTINUED",t.UserMustBeFamilyAdmin="USER_MUST_BE_FAMILY_ADMIN",t.CannotRemoveFamilyAdmin="CANNOT_REMOVE_FAMILY_ADMIN",t.UserNotMemberOfFamily="USER_NOT_MEMBER_OF_FAMILY",t.UserMustCancelPremiumPlusRenewalToDowngradeToFamily="USER_MUST_CANCEL_PREMIUM_PLUS_RENEWAL_TO_DOWNGRADE_TO_FAMILY",t.joinFamilyErrors=[t.BadLogin,t.FamilyFull,t.CannotJoinMultipleFamilies,t.AlreadyJoinedThisFamily,t.JoinFamilyTokenNotFound,t.UserSubscriptionIsUpForRenewal,t.FamilyHasBeenDiscontinued,t.UserMustCancelPremiumPlusRenewalToDowngradeToFamily],t.leaveFamilyErrors=[t.CannotRemoveFamilyAdmin,t.UserNotMemberOfFamily],t.removeFamilyMemberErrors=[t.UserMustBeFamilyAdmin,t.CannotRemoveFamilyAdmin,t.UserNotMemberOfFamily]},53e3:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFamilyDetails=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.familyplan,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetFamilyDetails"},i=(0,n.prepareApiEndpoint)(a);t.getFamilyDetails=async function(e,t){return i(e,{login:t,payload:{}})}},11560:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.joinFamily=t.FamilyStopRenewalPlatform=t.FamilyStopRenewalState=void 0;const n=r(90338),o=r(45956);!function(e){e.STOPPED="stopped",e.NOT_STOPPED="not_stopped"}(t.FamilyStopRenewalState||(t.FamilyStopRenewalState={})),function(e){e.IOS_APP_STORE="ios",e.MAC_STORE="mac",e.PLAY_STORE="playstore",e.PAYPAL="paypal",e.STRIPE="stripe",e.PROCESSOUT="processout"}(t.FamilyStopRenewalPlatform||(t.FamilyStopRenewalPlatform={}));const a={group:o.ApiEndpointGroups.familyplan,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"JoinFamily"},i=(0,n.prepareApiEndpoint)(a);t.joinFamily=async function(e,t){return i(e,{payload:t})}},86661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.leaveFamily=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.familyplan,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"LeaveFamily"},i=(0,n.prepareApiEndpoint)(a);t.leaveFamily=async function(e,t){return i(e,{login:t,payload:{}})}},15244:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeFamilyMember=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.familyplan,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"RemoveFamilyMember"},i=(0,n.prepareApiEndpoint)(a);t.removeFamilyMember=async function(e,t,r){return i(e,{login:t,payload:r})}},29591:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetFamilyJoinToken=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.familyplan,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ResetJoinToken"},i=(0,n.prepareApiEndpoint)(a);t.resetFamilyJoinToken=async function(e,t){return i(e,{login:t,payload:{}})}},64272:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGetFilesMetaSuccess=t.getFilesMeta=t.endpoint=void 0;const n=r(90338),o=r(45956);t.endpoint="GetFileMeta";const a={group:o.ApiEndpointGroups.file,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:t.endpoint},i=(0,n.prepareApiEndpoint)(a);t.getFilesMeta=(e,t,r)=>i(e,{login:t,payload:r}),t.isGetFilesMetaSuccess=e=>"success"===e.code},91503:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(59821),t),o(r(97421),t),o(r(55710),t),o(r(63339),t),o(r(45468),t),o(r(91063),t),o(r(18625),t),o(r(11560),t),o(r(53e3),t),o(r(15244),t),o(r(29591),t),o(r(86661),t),o(r(34957),t),o(r(8124),t),o(r(67747),t),o(r(62712),t),o(r(13271),t),o(r(51837),t),o(r(61054),t),o(r(39446),t),o(r(8111),t),o(r(36602),t),o(r(60132),t),o(r(12407),t),o(r(56736),t),o(r(80585),t),o(r(6862),t),o(r(99850),t),o(r(48974),t),o(r(43339),t),o(r(87992),t),o(r(4685),t),o(r(78876),t),o(r(96425),t),o(r(99289),t),o(r(71336),t),o(r(88077),t),o(r(1371),t),o(r(58539),t),o(r(9439),t),o(r(48253),t),o(r(51296),t),o(r(24925),t),o(r(48730),t),o(r(3278),t),o(r(71633),t),o(r(19336),t),o(r(13445),t),o(r(49481),t),o(r(86680),t),o(r(18959),t),o(r(98802),t),o(r(36420),t),o(r(32042),t),o(r(42216),t),o(r(54268),t),o(r(8499),t),o(r(56026),t),o(r(81926),t),o(r(28974),t),o(r(46583),t),o(r(43775),t),o(r(9161),t),o(r(34252),t),o(r(92006),t),o(r(80474),t),o(r(10554),t),o(r(41780),t),o(r(25094),t),o(r(3330),t),o(r(80359),t),o(r(74895),t)},66677:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKillSwitches=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.killswitch,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"GetKillSwitches"},i=(0,n.prepareApiEndpoint)(a);t.getKillSwitches=async function(e,t){return i(e,{payload:{requestedKillswitches:t}})}},3330:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestPairing=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.pairing,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"RequestPairing"},i=(0,n.prepareApiEndpoint)(a);t.requestPairing=async function(e,t){return i(e,{login:t,payload:{}})}},48008:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCustomerInvoice=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.payments,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetCustomerInvoice",accept:"application/pdf",responseType:"arraybuffer"},i=(0,n.prepareApiEndpoint)(a);t.getCustomerInvoice=async function(e,t,r){return i(e,{login:t,payload:r})}},36273:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listInvoices=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.payments,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ListInvoices"},i=(0,n.prepareApiEndpoint)(a);t.listInvoices=async function(e,t){return i(e,{login:t,payload:{}})}},48523:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.grantFullRefundAndCancelSubscription=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.payments,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GrantFullRefundAndCancelSubscription"},i=(0,n.prepareApiEndpoint)(a);t.grantFullRefundAndCancelSubscription=async function(e,t,r){return i(e,{login:t,payload:r})}},80359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHashes=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.pwleak,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"GetHashes"},i=(0,n.prepareApiEndpoint)(a);t.getHashes=async function(e,t){return i(e,{payload:t})}},3278:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.confirmMasterPasswordChangeDone=void 0;const n=r(45956),o=r(90338),a={authenticationType:n.ApiAuthType.UserDevice,endpoint:"ConfirmMasterPasswordChangeDone",group:n.ApiEndpointGroups.sync,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},i=(0,o.prepareApiEndpoint)(a);t.confirmMasterPasswordChangeDone=async function(e,t,r){return i(e,{login:t,payload:r})}},71633:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDataForMasterPasswordChange=void 0;const n=r(45956),o=r(90338),a={authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetDataForMasterPasswordChange",group:n.ApiEndpointGroups.sync,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},i=(0,o.prepareApiEndpoint)(a);t.getDataForMasterPasswordChange=async function(e,t,r){return i(e,{login:t,payload:r})}},19336:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLatestContent=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.sync,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetLatestContent"},i=(0,o.prepareApiEndpoint)(a);t.getLatestContent=async function(e,t,r){return i(e,{login:t,payload:r})}},69214:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uploadDataForCryptoChange=void 0;const n=r(90338),o=r(45956),a={authenticationType:o.ApiAuthType.UserDevice,endpoint:"UploadDataForCryptoUpdate",group:o.ApiEndpointGroups.sync,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},i=(0,n.prepareApiEndpoint)(a);t.uploadDataForCryptoChange=async function(e,t,r){return await i(e,{login:t,payload:r})}},13445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uploadDataForMasterPasswordChange=void 0;const n=r(45956),o=r(90338),a={authenticationType:n.ApiAuthType.UserDevice,endpoint:"UploadDataForMasterPasswordChange",group:n.ApiEndpointGroups.sync,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},i=(0,o.prepareApiEndpoint)(a);t.uploadDataForMasterPasswordChange=async function(e,t,r){return i(e,{login:t,payload:r})}},49481:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lastADSyncDate=t.lastADSyncDateErrors=void 0;const n=r(46298),o=r(90338),a=r(45956);t.lastADSyncDateErrors=[n.NotAdmin,n.InsufficientTier,n.UnknownError];const i={group:a.ApiEndpointGroups.teams,version:a.ApiVersion.v1,method:a.ApiRequestMethod.POST,authenticationType:a.ApiAuthType.UserDevice,endpoint:"LastADSyncDate"},s=(0,o.prepareApiEndpoint)(i);t.lastADSyncDate=function(e,t){return s(e,{login:t,payload:{}})}},11848:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSeatsRequest=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"AddSeats"},i=(0,o.prepareApiEndpoint)(a);t.addSeatsRequest=async function(e,t,r){return await i(e,{login:t,payload:{seats:r}})}},18959:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAuditLogsQueryResults=t.InternalErrorCode=t.NotAdminErrorCode=void 0;const n=r(90338),o=r(45956);t.NotAdminErrorCode="NOT_ADMIN",t.InternalErrorCode="internal_error";const a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetAuditLogQueryResults"},i=(0,n.prepareApiEndpoint)(a);t.getAuditLogsQueryResults=function(e,t,r){return i(e,{login:t,payload:r})}},86680:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startAuditLogsQuery=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"StartAuditLogsQuery"},i=(0,n.prepareApiEndpoint)(a);t.startAuditLogsQuery=function(e,t,r){return i(e,{login:t,payload:r})}},38115:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeTierMidCycleRequest=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ChangeTierMidCycle"},i=(0,o.prepareApiEndpoint)(a);t.changeTierMidCycleRequest=async function(e,t,r,n,o,a,s,c){return await i(e,{login:t,payload:{amountToPay:r,taxes:n,planId:o,couponCode:a,seatsToAdd:s,billingContactEmail:c}})}},21712:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computePlanPricingRequest=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ComputePlanPricing"},i=(0,o.prepareApiEndpoint)(a);t.computePlanPricingRequest=async function(e,t,r){return await i(e,{login:t,payload:{seats:r}})}},81926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listTeamDevicesErrors=t.getTeamDeviceErrors=t.createTeamDeviceAccountErrors=t.deactivateTeamDeviceErrors=t.registerTeamDeviceErrors=t.TeamDevicePlatform=void 0;const n=r(59821),o=r(45956);!function(e){e.SSO_CONNECTOR="sso_connector",e.ENCRYPTION_SERVICE="encryption_service",e.NITRO="nitro_encryption_service"}(t.TeamDevicePlatform||(t.TeamDevicePlatform={})),t.registerTeamDeviceErrors=[n.NotAdmin,o.UnknownError],t.deactivateTeamDeviceErrors=[n.NotAdmin,o.UnknownError,n.DeviceKeyNotFound,n.DeactivatedTeamDevice],t.createTeamDeviceAccountErrors=[n.NotAdmin,o.UnknownError,n.DeviceAccountMappingAlreadyExists,n.InvalidTeamDeviceLogin],t.getTeamDeviceErrors=[n.NotAdmin,o.UnknownError],t.listTeamDevicesErrors=[n.NotAdmin,o.UnknownError]},28974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTeamDeviceAccount=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"CreateTeamDeviceAccount"},i=(0,n.prepareApiEndpoint)(a);t.createTeamDeviceAccount=(e,t,r)=>i(e,{login:t,payload:r})},43775:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTeamDevice=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateTeamDevice"},i=(0,n.prepareApiEndpoint)(a);t.deactivateTeamDevice=function(e,t,r){return i(e,{login:t,payload:r})}},9161:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDevice=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetTeamDevice"},i=(0,n.prepareApiEndpoint)(a);t.getTeamDevice=async function(e,t,r){return await i(e,{login:t,payload:r})}},34252:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listTeamDevices=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ListTeamDevices"},i=(0,n.prepareApiEndpoint)(a);t.listTeamDevices=async(e,t)=>await i(e,{login:t,payload:{}})},46583:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTeamDevice=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"RegisterTeamDevice"},i=(0,n.prepareApiEndpoint)(a);t.registerTeamDevice=function(e,t,r){return i(e,{login:t,payload:r})}},98802:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DomainStatusResponse=void 0,function(e){e.pending="pending",e.valid="valid",e.expired="expired",e.invalid="invalid"}(t.DomainStatusResponse||(t.DomainStatusResponse={}))},36420:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeDomainRegistrationErrors=t.completeDomainRegistration=void 0;const n=r(90338),o=r(45956),a=r(59821),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"CompleteDomainsRegistration"},s=(0,n.prepareApiEndpoint)(i);t.completeDomainRegistration=async function(e,t){return s(e,{login:t,payload:{}})},t.completeDomainRegistrationErrors=[a.NotAdmin]},32042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateDomain=t.deactivateDomainErrors=void 0;const n=r(90338),o=r(45956),a=r(59821);t.deactivateDomainErrors=[a.NotAdmin,a.DomainNotValidForTeam];const i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateDomain"},s=(0,n.prepareApiEndpoint)(i);t.deactivateDomain=async function(e,t,r){return s(e,{login:t,payload:r})}},42216:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listDomains=t.listDomainErrors=void 0;const n=r(90338),o=r(45956),a=r(59821);t.listDomainErrors=[a.ServerError,a.InvalidRequestError];const i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ListDomains"},s=(0,n.prepareApiEndpoint)(i);t.listDomains=async function(e,t){return s(e,{login:t,payload:{}})}},54268:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestDomainRegistration=t.requestDomainRegistrationErrors=t.DomainContainsNonTeamUsers=t.InvalidPublicDomain=t.DomainAlreadyExists=void 0;const n=r(90338),o=r(45956),a=r(59821);t.DomainAlreadyExists="DOMAIN_ALREADY_EXISTS",t.InvalidPublicDomain="INVALID_PUBLIC_DOMAIN",t.DomainContainsNonTeamUsers="DOMAIN_CONTAINS_EXISTING_NONTEAM_USERS",t.requestDomainRegistrationErrors=[a.TeamDoesNotExist,t.DomainAlreadyExists,a.NotAdmin,t.InvalidPublicDomain,t.DomainContainsNonTeamUsers];const i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"RequestDomainRegistration"},s=(0,n.prepareApiEndpoint)(i);t.requestDomainRegistration=function(e,t,r){return s(e,{login:t,payload:r})}},30782:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExpectedTaxInformationRequest=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetExpectedTaxInformation"},i=(0,o.prepareApiEndpoint)(a);t.getExpectedTaxInformationRequest=async function(e,t,r){return await i(e,{login:t,payload:{priceInCents:r}})}},78607:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMidCycleTierUpgradePriceRequest=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetMidCycleTierUpgradePrice"},i=(0,o.prepareApiEndpoint)(a);t.getMidCycleTierUpgradePriceRequest=async function(e,t,r,n){return await i(e,{login:t,payload:{numberOfSeats:n,newPlan:r}})}},47115:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamOffersRequest=void 0;const n=r(45956),o=r(90338),a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetTeamOffers"},i=(0,o.prepareApiEndpoint)(a);t.getTeamOffersRequest=async function(e,t,r){return await i(e,{login:t,payload:{couponCode:r,withStarterOffer:!0}})}},93934:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeInviteLinkTeamKey=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ChangeTeamKey"},i=(0,n.prepareApiEndpoint)(a);t.changeInviteLinkTeamKey=(e,t,r)=>i(e,{login:t,payload:r})},5928:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLinkErrors=void 0;const n=r(38250);t.getInviteLinkErrors=[n.InviteLinkResponseErrorCode.NotAdmin,n.InviteLinkResponseErrorCode.InviteLinkNotFound,n.InviteLinkResponseErrorCode.TeamKeyNotFound,n.InviteLinkResponseErrorCode.UserInviteLinkNotFound]},32811:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInviteLink=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"CreateTeamSignUpPage"},i=(0,n.prepareApiEndpoint)(a);t.createInviteLink=(e,t,r)=>i(e,{login:t,payload:r})},44609:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLinkForAdmin=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetTeamSignUpPageForAdmin"},i=(0,n.prepareApiEndpoint)(a);t.getInviteLinkForAdmin=(e,t,r)=>i(e,{login:t,payload:r})},6563:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLink=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"GetTeamSignUpPage"},i=(0,n.prepareApiEndpoint)(a);t.getInviteLink=(e,t)=>i(e,{payload:t})},41780:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(5928),t),o(r(93934),t),o(r(32811),t),o(r(6563),t),o(r(44609),t),o(r(92020),t),o(r(25731),t)},25731:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestInviteLinkToken=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"RequestTeamInviteToken"},i=(0,n.prepareApiEndpoint)(a);t.requestInviteLinkToken=(e,t)=>i(e,{payload:t})},92020:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleInviteLink=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ToggleTeamSignUpPage"},i=(0,n.prepareApiEndpoint)(a);t.toggleInviteLink=(e,t,r)=>i(e,{login:t,payload:r})},74528:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRecoveryCodesAsTeamCaptain=t.GetRecoveryCodesAsTeamCaptainInternalErrorCode=t.GetRecoveryCodesAsTeamCaptainNotAdminErrorCode=void 0;const n=r(90338),o=r(45956);t.GetRecoveryCodesAsTeamCaptainNotAdminErrorCode="not_billing_admin",t.GetRecoveryCodesAsTeamCaptainInternalErrorCode="internal_error";const a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetRecoveryCodesAsTeamCaptain"},i=(0,n.prepareApiEndpoint)(a);t.getRecoveryCodesAsTeamCaptain=function(e,t,r){return i(e,{login:t,payload:r})}},95375:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamMembers=t.GetTeamMembersInternalErrorCode=t.GetTeamMembersInvalidLimitErrorCode=void 0;const n=r(90338),o=r(45956);t.GetTeamMembersInvalidLimitErrorCode="invalid_limit",t.GetTeamMembersInternalErrorCode="internal_error";const a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetTeamMembers"},i=(0,n.prepareApiEndpoint)(a);t.getTeamMembers=function(e,t,r){return i(e,{login:t,payload:r})}},8499:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.report=t.reportErrors=void 0;const n=r(90338),o=r(45956),a=r(59821);t.reportErrors=[a.InvalidRequestError,a.NotAdmin,a.ServerError,o.UnknownError];const i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"Report"},s=(0,n.prepareApiEndpoint)(i);t.report=async function(e,t,r){return s(e,{login:t,payload:void 0!==r?r:{}})}},92006:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamDeviceEncryptedConfigErrors=t.getTeamDeviceEncryptedConfigErrors=void 0;const n=r(59821),o=r(45956);t.getTeamDeviceEncryptedConfigErrors=[n.TeamDeviceEncryptedConfigNotFound,n.NotAdmin,o.UnknownError],t.updateTeamDeviceEncryptedConfigErrors=[n.NotAdmin,o.UnknownError,n.DeviceAccountMappingAlreadyExists,n.DeviceKeyNotFound]},80474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDeviceEncryptedConfig=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetTeamDeviceEncryptedConfiguration"},i=(0,n.prepareApiEndpoint)(a);t.getTeamDeviceEncryptedConfig=(e,t,r)=>i(e,{login:t,payload:r})},10554:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamDeviceEncryptedConfig=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"UpdateTeamDeviceEncryptedConfiguration"},i=(0,n.prepareApiEndpoint)(a);t.updateTeamDeviceEncryptedConfig=(e,t,r)=>i(e,{login:t,payload:r})},56026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.teamStatus=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"TeamStatus"},i=(0,n.prepareApiEndpoint)(a);t.teamStatus=function(e,t){return i(e,{login:t,payload:{}})}},25094:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRemoteTime=void 0;const n=r(90338),o=r(45956),a={group:o.ApiEndpointGroups.time,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.None,endpoint:"GetRemoteTime"},i=(0,n.prepareApiEndpoint)(a);t.getRemoteTime=async function(e,t){return i(e,{payload:t??{}})}},74895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateCredential=t.GetVpnCredentialBusinessErrors=void 0;const n=r(90338),o=r(45956);!function(e){e.USER_DOESNT_HAVE_VPN_CAPABILITY="USER_DOESNT_HAVE_VPN_CAPABILITY",e.USER_ALREADY_HAS_AN_ACCOUNT="USER_ALREADY_HAS_AN_ACCOUNT",e.USER_ALREADY_HAS_AN_ACCOUNT_FOR_PROVIDER="USER_ALREADY_HAS_AN_ACCOUNT_FOR_PROVIDER",e.USER_ALREADY_HAVE_ACTIVE_VPN_SUBSCRIPTION="USER_ALREADY_HAVE_ACTIVE_VPN_SUBSCRIPTION"}(t.GetVpnCredentialBusinessErrors||(t.GetVpnCredentialBusinessErrors={}));const a={group:o.ApiEndpointGroups.vpn,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetCredentials"},i=(0,n.prepareApiEndpoint)(a);t.generateCredential=async(e,t,r)=>await i(e,{login:t,payload:r})},78577:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.signRequest=t.allowedUnsignedHeaders=t.allowedUnsignedProxyHeaders=t.allowedUnsignedClientHeaders=t.signatureAlgorithm=void 0;const n=r(16516),o=r(46445),a=r(16038),i=r(69530),s=r(47408),c=r(45956),u=r(15215),l=r(17825);function d(e){const{appKeys:t}=e,r=["AppAccessKey="+t.accessKey];switch(e.type){case c.ApiAuthType.App:return r;case c.ApiAuthType.UserDevice:{const{login:t,deviceKeys:n}=e;return[`Login=${t}`,...r,`DeviceAccessKey=${n.accessKey}`]}case c.ApiAuthType.Session:{const{deviceId:t,login:n,sessionKeys:o}=e;return[`Login=${n}`,...r,`SessionAccessKey=${o.accessKey}`,`DeviceAccessKey=${t}`]}case c.ApiAuthType.TeamDevice:{const{teamUuid:t,deviceKeys:n}=e;return[`TeamUuid=${t}`,...r,`DeviceAccessKey=${n.accessKey}`]}default:(0,l.assertUnreachable)(e)}}t.signatureAlgorithm="DL1-HMAC-SHA256",t.allowedUnsignedClientHeaders=["origin","content-length","content-encoding","authorization","user-agent","accept-encoding"],t.allowedUnsignedProxyHeaders=["x-forwarded-for","x-forwarded-proto","x-forwarded-port","x-amzn-trace-id"],t.allowedUnsignedHeaders=[...t.allowedUnsignedClientHeaders,...t.allowedUnsignedProxyHeaders],t.signRequest=async e=>{const{request:r,credentials:p,headersToSign:f,timestamp:g=(0,s.getUnixTimestamp)()}=e,{method:m,pathname:h,headers:y,query:S={},rawBody:v}=r,E=e=>Promise.resolve(e),A=(0,n.compose)(a.str2ab,a.utf8ChunkEncode),_=(0,n.composeP)((0,n.compose)(E,a.convertBufferToHex),o.computeHashSha256,(0,n.compose)(E,A)),b=await _(v),{canonicalRequest:T,signedHeaders:I}=(0,u.makeCanonicalRequest)({method:m,uri:h,headers:y,query:S,hashedPayload:b,headersToSign:f}),w=await _(T),C=[t.signatureAlgorithm,g,w].join("\n"),O=function(e){const{appKeys:t}=e;switch(e.type){case c.ApiAuthType.App:return t.secretKey;case c.ApiAuthType.UserDevice:{const{deviceKeys:r}=e;return`${t.secretKey}\n${r.secretKey}`}case c.ApiAuthType.Session:{const{sessionKeys:r}=e;return`${t.secretKey}\n${r.secretKey}`}case c.ApiAuthType.TeamDevice:{const{deviceKeys:r}=e;return`${t.secretKey}\n${r.secretKey}`}default:(0,l.assertUnreachable)(e)}}(p),D=A(C),P=await(0,i.signHashHmacSHA256)({key:(0,a.str2ab)(O),data:D}),N=(0,a.convertBufferToHex)(P);return t.signatureAlgorithm+" "+[...d(p),`Timestamp=${g}`,`SignedHeaders=${I}`,`Signature=${N}`].join(",")}},45956:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isApiErrorOfType=t.isApiError=t.UnknownError=t.ApiEndpointGroups=t.ApiVersion=t.ApiRequestMethod=t.ApiAuthType=void 0,t.ApiAuthType={App:"App",UserDevice:"UserDevice",None:"None",Session:"Session",TeamDevice:"TeamDevice"},t.ApiRequestMethod={GET:"GET",POST:"POST"},function(e){e[e.v1=0]="v1"}(t.ApiVersion||(t.ApiVersion={})),function(e){e.abtesting="abtesting",e.account="account",e.authentication="authentication",e.breachesQA="breaches-qa",e.dataleak="dataleak",e.dataleakQA="dataleak-qa",e.darkwebinsights="darkwebinsights",e.devices="devices",e.familyplan="familyplan",e.file="file",e.killswitch="killswitch",e.pairing="pairing",e.premium="premium",e.pwleak="pwleak",e.sync="sync",e.teams="teams",e.time="time",e.payments="payments",e.vpn="vpn"}(t.ApiEndpointGroups||(t.ApiEndpointGroups={})),t.UnknownError="UNKNOWN_ERROR",t.isApiError=function(e){return"object"==typeof e&&"success"!==e.code},t.isApiErrorOfType=function(e,t){return"object"==typeof t&&t.type===e}},90190:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownError=t.UnknownErrorMessages=t.UnknownErrorCode=void 0,function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR"}(r=t.UnknownErrorCode||(t.UnknownErrorCode={})),t.UnknownErrorMessages={[r.UNKNOWN_ERROR]:"Unknown error"},t.UnknownError={codes:r,name:"UnknownError",messages:t.UnknownErrorMessages}},92263:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.isCarbonError=t.CarbonError=void 0;const a=r(90190);class i extends Error{constructor(e,t){super(e.messages[t]),this.errorType=e,this.errorCode=t,this.additionalInfo={},Object.setPrototypeOf(this,i.prototype),this.name="CarbonError",Error.captureStackTrace&&Error.captureStackTrace(this,i)}errorTypeName(){return this.errorType.name}stringErrorCode(){const{errorType:{codes:e,name:t},errorCode:r}=this;return`${t}#${e[r]}`}addAdditionalInfo(e){return this.additionalInfo={...this.additionalInfo,...e},this}getAdditionalInfo(){return this.additionalInfo}addContextInfo(e,t){const{errorCode:r,errorType:n}=this;return this.message=`[${e}] - ${t}: ${n.messages[r]}`,this}toString(){return`CarbonError: ${this.message} (code ${this.stringErrorCode()})`}static fromAnyError(e,t,r){if(s(e))return e;const n=new i(t||a.UnknownError,void 0===r?a.UnknownErrorCode.UNKNOWN_ERROR:r);return s(n,a.UnknownError,a.UnknownErrorCode.UNKNOWN_ERROR)&&(n.message=e.message||`${e}`),e.stack&&(n.stack=e.stack),n}}function s(e,t,r){return e instanceof Error&&"CarbonError"===e.name&&(void 0===t||t===e.errorType)&&(void 0===r||r===e.errorCode)}t.CarbonError=i,t.isCarbonError=s,o(r(35706),t)},35706:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},45800:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCloudflareHeaders=t.setCloudflareHeaders=void 0;let r={};t.setCloudflareHeaders=(e,t)=>{if(Object.isFrozen(r))throw new Error("Trying to set Cloudflare headers after initialization");e&&t&&(r={"CF-Access-Client-Id":e,"CF-Access-Client-Secret":t},Object.freeze(r))},t.getCloudflareHeaders=()=>Object.isFrozen(r)?r:{}},39266:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isHttpError=t.HttpError=t.HttpErrorMessages=t.HttpErrorCode=void 0;const n=r(92263);var o;!function(e){e[e.CLIENT_ERROR=0]="CLIENT_ERROR",e[e.SERVER_ERROR=1]="SERVER_ERROR",e[e.STATUS_CODE=2]="STATUS_CODE",e[e.CONNECTION_ABORTED=3]="CONNECTION_ABORTED",e[e.CONNECTION_TIMED_OUT=4]="CONNECTION_TIMED_OUT",e[e.NETWORK_ERROR=5]="NETWORK_ERROR",e[e.NO_RESPONSE=6]="NO_RESPONSE",e[e.SETUP_FAILED=7]="SETUP_FAILED"}(o=t.HttpErrorCode||(t.HttpErrorCode={})),t.HttpErrorMessages={[o.CLIENT_ERROR]:"Http response with client error status",[o.SERVER_ERROR]:"Http response with server error status",[o.STATUS_CODE]:"Http response with non-succesful status",[o.CONNECTION_ABORTED]:"Connection aborted",[o.CONNECTION_TIMED_OUT]:"Connection timed out",[o.NETWORK_ERROR]:"Network error",[o.NO_RESPONSE]:"No response to Http request",[o.SETUP_FAILED]:"Failed to setup Http request"},t.HttpError={codes:o,name:"HttpError",messages:t.HttpErrorMessages},t.isHttpError=(e,r)=>(0,n.isCarbonError)(e,t.HttpError,r)},62628:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=void 0;const n=r(55539);t.get=function(e,t={}){return(0,n.httpGetUsingFetch)(e,t)}},55539:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.httpGetUsingFetch=void 0;const n=r(87248);t.httpGetUsingFetch=async function(e,t={}){const r=(0,n.setTimeoutAbort)();try{const o={credentials:"omit",signal:r},a=t.headers?{...o,headers:t.headers}:o,i=await fetch(e,a);if((t.validateStatus&&!t.validateStatus(i.status))??!i.ok){const t=new n.FetchError(`HTTP ${i.status} - ${e}`);throw t.response=i,t}const s=await(0,n.getResponseBody)(i,t.responseType);return{headers:i.headers,data:s,status:i.status,statusText:i.statusText}}catch(e){throw(0,n.getCarbonHttpError)(e,r)}}},87248:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCarbonHttpError=t.FetchError=t.setTimeoutAbort=t.getResponseBody=t.HttpStatusCode=void 0;const n=r(17825),o=r(92263),a=r(39266);!function(e){e[e.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT"}(t.HttpStatusCode||(t.HttpStatusCode={})),t.getResponseBody=async function(e,t="json"){switch(t){case"json":return e.json();case"text":return e.text();case"arraybuffer":return e.arrayBuffer();default:(0,n.assertUnreachable)(t)}},t.setTimeoutAbort=function(e=6e4){const t=new AbortController;return setTimeout((()=>t.abort()),e),t.signal};class i extends Error{constructor(e){super(e),this.response=void 0}}t.FetchError=i,t.getCarbonHttpError=(e,t)=>{let r=null;if(function(e){return e instanceof i}(e)&&e.response){const{response:t}=e,{status:n}=t;r=n>=400&&n<500?new o.CarbonError(a.HttpError,a.HttpErrorCode.CLIENT_ERROR):n>=500?new o.CarbonError(a.HttpError,a.HttpErrorCode.SERVER_ERROR):new o.CarbonError(a.HttpError,a.HttpErrorCode.STATUS_CODE),r.addAdditionalInfo({response:t})}else r="AbortError"===e.name&&t.aborted?new o.CarbonError(a.HttpError,a.HttpErrorCode.CONNECTION_TIMED_OUT):"AbortError"===e.name?new o.CarbonError(a.HttpError,a.HttpErrorCode.CONNECTION_ABORTED):self?.navigator?.onLine?new o.CarbonError(a.HttpError,a.HttpErrorCode.SETUP_FAILED):new o.CarbonError(a.HttpError,a.HttpErrorCode.NETWORK_ERROR);return r.addAdditionalInfo({libError:e.message}),r}},14656:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.post=t.get=void 0;var a=r(62628);Object.defineProperty(t,"get",{enumerable:!0,get:function(){return a.get}});var i=r(68109);Object.defineProperty(t,"post",{enumerable:!0,get:function(){return i.post}}),o(r(39266),t)},68109:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.post=void 0;const n=r(80057);t.post=function(e,t,r={}){return(0,n.httpPostUsingFetch)(e,t,r)}},80057:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.httpPostUsingFetch=void 0;const n=r(87248);t.httpPostUsingFetch=async function(e,t,r={}){const o=(0,n.setTimeoutAbort)();try{const a=r.headers||{},i=function(e,t="application/json"){const r=t.trim().toLowerCase();if(r.startsWith("application/json"))return JSON.stringify(e);if(r.startsWith("application/x-www-form-urlencoded"))return new URLSearchParams(function(e){return"string"==typeof e?e:Object.keys(e).reduce(((t,r)=>{const n=e[r];return void 0===n||(t[r]="string"==typeof n?n:JSON.stringify(n)),t}),{})}(e));if(r.startsWith("multipart/form-data")){const t=new FormData;for(const[r,n]of Object.entries(e))t.append(r,n);return t}if((r.startsWith("text/plain")||r.startsWith("application/x-jsonlines"))&&"string"==typeof e)return e;throw new Error("Unsupported Content-Type for HTTP POST")}(t,a["Content-Type"]),s={method:"POST",headers:a,body:i,credentials:"omit",signal:o},c=await fetch(e,s);if((r.validateStatus&&!r.validateStatus(c.status))??!c.ok){const t=new n.FetchError(`HTTP ${c.status} - ${e}`);throw t.response=c,t}const u=await(0,n.getResponseBody)(c,r.responseType);return{headers:c.headers,data:u,status:c.status,statusText:c.statusText}}catch(e){throw(0,n.getCarbonHttpError)(e,o)}}},73439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateOtpFromSecret=void 0;const n=r(68243),o=r(95623),a=r(70252);t.generateOtpFromSecret=function(e){try{const t=e.toUpperCase().replace(/[^A-Z2-7=]/g,"");return n.authenticator.generate(t)}catch(e){const t=new Error(`[Otp] - generateOtpFromSecret: ${e}`);return o.Debugger.log(t),(0,a.sendExceptionLog)({error:t}),""}}},36540:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},89021:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBatch=void 0;const n=r(78912),o=r(59890);t.getBatch=function(e,t,r){const a="zero"===t.startCursor.type?0:(0,o.binaryFindIndex)(r,(r=>(0,n.isAfterTokenStart)(e,t,!1,r)));if(-1===a)return[];const i=r.slice(a),s="infinite"===t.endCursor.type?i.length:(0,o.binaryFindIndex)(i,(r=>(0,n.isAfterTokenEnd)(e,t,!1,r)),t.initialBatchSize),c=-1===s?i.length:s;return i.slice(0,c)}},20553:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBatch=t.generatePrevToken=t.generateNextToken=t.generateFirstToken=void 0;var n=r(93669);Object.defineProperty(t,"generateFirstToken",{enumerable:!0,get:function(){return n.generateFirstToken}}),Object.defineProperty(t,"generateNextToken",{enumerable:!0,get:function(){return n.generateNextToken}}),Object.defineProperty(t,"generatePrevToken",{enumerable:!0,get:function(){return n.generatePrevToken}});var o=r(89021);Object.defineProperty(t,"getBatch",{enumerable:!0,get:function(){return o.getBatch}})},78912:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBeforeTokenStart=t.isAfterTokenEnd=t.isBeforeTokenEnd=t.isAfterTokenStart=void 0;const n=r(16516),o=r(35893);function a(e,t){return e>t}function i(e,t){return e<t}function s(e,t){return(0,n.compose)(o.normalizeStringMapper,e[t])}const c=(0,n.curry)((function(e,t,{0:r,1:n}){const{direction:c,field:u}=r,l=s(e,u);return(e=>"ascend"===e?a:i)(c)(l(t),(0,o.normalizeStringMapper)(n))})),u=(0,n.curry)((function(e,t,{0:r,1:n}){const{direction:o,field:c}=r,u=s(e,c);return(e=>"ascend"===e?i:a)(o)(u(t),n)})),l=(0,n.curry)((function(e,t,{0:r,1:n}){const{field:o}=r;return s(e,o)(t)===n}));function d(e){return void 0!==e&&[!0,!1].includes(e)}function p(e){return{direction:"ascend",field:e}}const f=(e,t)=>(r,o,a,i)=>{const{sortCriteria:s,uniqField:f}=o.sortToken,g="start"===t?o.startCursor:o.endCursor;if("zero"===g.type)return"after"===e;if("infinite"===g.type)return"before"===e;const m=l(r,i),h=((e,t)=>r=>r.reduce(((r,n)=>d(r)?r:function(e,t,r){return!!e(r)||!!t(r)&&void 0}(e,t,n)),void 0))("before"===e?u(r,i):c(r,i),m),y=h((0,n.zip)(s,g.sortValues));if(d(y))return y;const S=h([{0:p(f),1:g.uniqValue}]);return d(S)?S:!a};t.isAfterTokenStart=f("after","start"),t.isBeforeTokenEnd=f("before","end"),t.isAfterTokenEnd=f("after","end"),t.isBeforeTokenStart=f("before","start")},33627:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sameBatch=void 0;const n=r(16516);t.sameBatch=function(e,t){return e.length===t.length&&e.every(((e,r)=>(0,n.equals)(t[r],e)))}},93669:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateFirstToken=t.generatePrevToken=t.generateNextToken=t.zeroCursor=t.infiniteCursor=void 0;const n=r(16516),o=r(35893),a=r(59890),i=r(78912);function s(e,t,r){return r.sortCriteria.map((r=>{const{field:a}=r;return(0,n.compose)(o.normalizeStringMapper,e[a])(t)}))}function c(e,r,n,o,a){const i=o+n-1;if(i>=a.length-1)return t.infiniteCursor;const c=a[i];return{type:"positional",sortValues:s(e,c,r),uniqValue:String(e[r.uniqField](c))}}function u(e,r,n){const{initialBatchSize:o,startCursor:c,sortToken:u}=r;if("zero"===c.type)throw new Error("Cannot generate cursor before zero start cursor.");const l=(0,a.binaryFindLastIndex)(n,(t=>(0,i.isBeforeTokenStart)(e,r,!0,t)));if(-1===l)return t.zeroCursor;const d=function(e,r,n,o,a){const i=o-n+1;if(i<0)return t.zeroCursor;const c=a[i];return{type:"positional",sortValues:s(e,c,r),uniqValue:String(e[r.uniqField](c))}}(e,u,o,l,n);return d}t.infiniteCursor={type:"infinite"},t.zeroCursor={type:"zero"},t.generateNextToken=function(e,r,n){if("infinite"===r.endCursor.type)return;const o=function(e,r,n){const{initialBatchSize:o,endCursor:s,sortToken:u}=r;if("infinite"===s.type)throw new Error("Cannot generate cursor after infinite end cursor.");const l=(0,a.binaryFindIndex)(n,(t=>(0,i.isAfterTokenEnd)(e,r,!1,t)));return-1===l?t.infiniteCursor:c(e,u,o,l,n)}(e,r,n);return{...r,startCursor:r.endCursor,endCursor:o}},t.generatePrevToken=function(e,t,r){if("zero"===t.startCursor.type)return;const n=u(e,t,r);return{...t,startCursor:n,endCursor:t.startCursor}},t.generateFirstToken=function(e,r,n,o){const{sortToken:a,filterToken:i}=r,s=c(e,a,n,0,o);return{sortToken:a,filterToken:i,initialBatchSize:n,startCursor:t.zeroCursor,endCursor:s}}},4673:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPlugins=t.setPlugins=void 0;let r={};t.setPlugins=function(e){r=e},t.getPlugins=function(){return r}},60946:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(74211),t),o(r(20378),t)},20378:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupProbe=void 0;const n=r(16516),o=r(95623);t.setupProbe=(...e)=>(...t)=>{const r={timestamp:Date.now()};(0,n.forEach)(((e,t)=>r=>(0,n.forEach)(((e,t)=>r=>{try{e(r,t)}catch(e){(0,o.logWarn)({message:`Monitor raised an error on announcement ${r.type}`,tag:"Probe",details:{error:e}})}})(r,t),e))(t,r),e)}},74211:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},59865:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterData=void 0;const n=r(16516),o=r(2974),a=r(17825);t.filterData=function(e,t,r,i){return r.filterCriteria.reduce(((r,i)=>{const s=function(e,t,r){const{value:i}=r,s=(0,o.normalizeStringMapper)(i),c=t=>(0,n.compose)(o.normalizeStringMapper,e[t]);switch(r.type){case"equals":return e=>c(r.field)(e)===s;case"differs":return e=>c(r.field)(e)!==s;case"matches":return e=>t(s,e);case"in":return e=>{const t=c(r.field)(e);return s.indexOf(t)>-1};case"contains":return e=>{const t=c(r.field)(e);if(!Array.isArray(t))throw new Error("[Query] - filter: expected an array");return t.includes(s)};default:(0,a.assertUnreachable)(r)}}(e,t,i);return r.filter(s)}),i)}},35893:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeStringMapper=t.queryData=t.sortData=t.filterData=t.stringifyToken=t.parseToken=t.optimizeBatchSelector=t.createOptimizedSortTokenSelector=t.createOptimizedFilterTokenSelector=void 0;var n=r(23736);Object.defineProperty(t,"createOptimizedFilterTokenSelector",{enumerable:!0,get:function(){return n.createOptimizedFilterTokenSelector}}),Object.defineProperty(t,"createOptimizedSortTokenSelector",{enumerable:!0,get:function(){return n.createOptimizedSortTokenSelector}}),Object.defineProperty(t,"optimizeBatchSelector",{enumerable:!0,get:function(){return n.optimizeBatchSelector}});var o=r(54410);Object.defineProperty(t,"parseToken",{enumerable:!0,get:function(){return o.parseToken}}),Object.defineProperty(t,"stringifyToken",{enumerable:!0,get:function(){return o.stringifyToken}});var a=r(59865);Object.defineProperty(t,"filterData",{enumerable:!0,get:function(){return a.filterData}});var i=r(32541);Object.defineProperty(t,"sortData",{enumerable:!0,get:function(){return i.sortData}});var s=r(7994);Object.defineProperty(t,"queryData",{enumerable:!0,get:function(){return s.queryData}});var c=r(2974);Object.defineProperty(t,"normalizeStringMapper",{enumerable:!0,get:function(){return c.normalizeStringMapper}})},2974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeStringMapper=void 0;const n=r(16516),o=r(97601),a=(0,n.compose)(o.normalizeString,n.toLower);t.normalizeStringMapper=e=>"string"==typeof e?a(e):Array.isArray(e)?e.map(t.normalizeStringMapper):e},7994:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryData=void 0;const n=r(59865),o=r(32541);t.queryData=function(e,t,r,a,i){const s=(0,n.filterData)(e,t,a,i);return(0,o.sortData)(e,r,s)}},23736:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optimizeBatchSelector=t.createOptimizedFilterTokenSelector=t.createOptimizedSortTokenSelector=void 0;const n=r(16516),o=r(32034);t.createOptimizedSortTokenSelector=(0,o.createSelectorCreator)(o.defaultMemoize,((e,t)=>e.uniqField===t.uniqField&&e.sortCriteria.length===t.sortCriteria.length&&e.sortCriteria.every(((e,r)=>Object.keys(e).every((n=>e[n]===t.sortCriteria[r][n])))))),t.createOptimizedFilterTokenSelector=(0,o.createSelectorCreator)(o.defaultMemoize,((e,t)=>e.filterCriteria.length===t.filterCriteria.length&&e.filterCriteria.every(((e,r)=>Object.keys(e).every((n=>e[n]===t.filterCriteria[r][n]))))));const a=(0,o.createSelectorCreator)(o.defaultMemoize,((e,t)=>e.length===t.length&&e.every(((e,r)=>t[r]===e))));t.optimizeBatchSelector=e=>a(e,n.identity)},32541:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortData=void 0;const n=r(2974),o=r(16516);function a(e,t){const{direction:r}=t,a=function(e,t){const{field:r}=t;return(0,o.compose)(n.normalizeStringMapper,e[r])}(e,t);return function(e){return"ascend"===e?o.ascend:o.descend}(r)(a)}t.sortData=function(e,t,r){const n=(0,o.compose)(String,e[t.uniqField]),i=[...t.sortCriteria.map((t=>a(e,t))),(0,o.ascend)(n)];return(0,o.sortWith)(i)(r)}},54410:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyToken=t.parseToken=void 0;const n=r(16038),o=r(93513);t.parseToken=function(e){const t=o.decode(e),r=(0,n.utf8ChunkDecode)(t);return JSON.parse(r)},t.stringifyToken=function(e){if(void 0===e)return"";const t=JSON.stringify(e),r=(0,n.utf8ChunkEncode)(t);return o.encode(r)}},74752:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeAutoLoginService=t.loadMPFromStorageToStore=t.shouldTrigger=t.createMasterPasswordCipheringKey=t.AUTOLOGIN_EXPIRATION_DATE=void 0;const n=r(11814),o=r(69530),a=r(16038),i=r(16356),s=r(47408),c=r(70252),u=r(95623),l=r(56915),d=r(46298),p=r(16593),f=r(61740),g=r(98226),m=r(93564);t.AUTOLOGIN_EXPIRATION_DATE=1209600,t.createMasterPasswordCipheringKey=()=>(0,o.generateAESKey)();const h=()=>{try{const e=(()=>{const e=(0,m.getWindowLocalStorage)();return n.env.isBrowserEnvironment()&&e?parseInt(e["QA.EXTENSION-1474.expirationTimeSeconds"],10):void 0})();if(Number.isSafeInteger(e)&&e<t.AUTOLOGIN_EXPIRATION_DATE)return e}catch(e){(0,u.logError)(e)}return t.AUTOLOGIN_EXPIRATION_DATE};t.shouldTrigger=async(e,t,r)=>{try{if(t.setInstance(r),e.isAuthenticated())return!1;if(!await(0,f.hasSessionKeysInStorage)(t))return!1;await(0,f.loadSessionKeysToStore)(e,t);const n=(0,l.sessionKeysSelector)(e.getState());return!!(0,f.areSessionKeysValid)(n)&&t.getInstance().doesMasterPasswordExist()}catch(e){if(e.message!==f.RememberMeErrorCode.EMPTY_SESSION_KEYS){const t=new Error(`[Autologin] - shouldTrigger: ${e}`);(0,c.sendExceptionLog)({error:t}),(0,u.logError)(e)}return!1}},t.loadMPFromStorageToStore=async(e,t,r,n)=>{const o=await(0,d.getMasterPasswordCipheringKey)(e,n);if((0,d.isApiError)(o))throw new Error(o.message);t.setInstance({raw:o.rememberMasterPasswordCipheringKey},"");const a=await r.getInstance().getMasterPassword();e.dispatch((0,i.updateMasterPassword)(a))},t.makeAutoLoginService=e=>({initialize:()=>(async e=>{try{const{storeService:r,localStorageService:n}=e;if(!r.isAuthenticated())throw new Error(f.RememberMeErrorCode.USER_NOT_AUTHENTICATED);const o=r.getState(),c=(0,l.deviceKeysSelector)(o),u=(0,l.ukiSelector)(o),m=(0,l.sessionKeysSelector)(o),y=(0,p.userLoginSelector)(o);if(!c||!u)throw new Error(f.RememberMeErrorCode.EMPTY_DEVICE_KEYS);if((0,f.areSessionKeysValid)(m))return;const S=await(0,t.createMasterPasswordCipheringKey)(),v=(0,a.bufferToBase64)(S),E=await(0,d.initRememberMasterPassword)(r,y,{rememberMasterPasswordCipheringKey:v});if((0,d.isApiError)(E))throw new Error(E.code);const A=(0,s.getUnixTimestamp)()+h(),_={accessKey:E.sessionAccessKey,secretKey:E.sessionSecretKey,expirationTimeSeconds:A};r.dispatch((0,i.loadSessionKeys)(_)),await n.getInstance().storeAuthenticationKeys(_),e.autoLoginEncryptorService.setInstance({raw:null,buffer:S},"");const b=(0,p.masterPasswordSelector)(o);await n.getInstance().storeMasterPassword(b),await(0,f.persistLocalAccountRememberMeType)(r,"autologin"),r.dispatch((0,g.setRememberMeTypeAction)("autologin"))}catch(e){const t=new Error(`[Autologin] - initialize: ${e}`);(0,c.sendExceptionLog)({error:t}),(0,u.logError)(t)}})(e),process:r=>(async(e,r)=>{try{const{storeService:n,autoLoginEncryptorService:o,localStorageService:a}=e;if(!await(0,t.shouldTrigger)(n,a,r))return;return await(0,t.loadMPFromStorageToStore)(n,o,a,r)}catch(e){const t=new Error(`[Autologin] - processAutoLogin: ${e}`);(0,c.sendExceptionLog)({error:t}),(0,u.logError)(t)}})(e,r),shouldTrigger:r=>(0,t.shouldTrigger)(e.storeService,e.localStorageService,r)})},93990:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWebAuthnAuthenticationService=t.shouldTrigger=void 0;const n=r(16038),o=r(95623),a=r(69530),i=r(56915),s=r(46298),c=r(16593),u=r(16356),l=r(70252),d=r(64910),p=r(61740),f=r(98226);t.shouldTrigger=async(e,t,r)=>{try{if(t.setInstance(r),(0,c.isAuthenticatedSelector)(e.getState()))return!1;if(!await(0,p.hasSessionKeysInStorage)(t))return!1;await(0,p.loadSessionKeysToStore)(e,t);const n=(0,i.sessionKeysSelector)(e.getState());return!!(0,p.areSessionKeysValid)(n)&&t.getInstance().doesMasterPasswordExist()}catch(e){if(e.message!==p.RememberMeErrorCode.EMPTY_SESSION_KEYS){const t=new Error(`[WebAuthnAuthentication] - shouldTrigger: ${e}`);(0,l.sendExceptionLog)({error:t}),(0,o.logError)(t)}return!1}},t.makeWebAuthnAuthenticationService=e=>({initialize:t=>(async(e,t)=>{try{const{storeService:r,localStorageService:o,webAuthnAuthenticationEncryptorService:i}=e,l=r.getState(),g=(0,c.userLoginSelector)(l),m=await(0,a.generate64BytesKey)(),h=(0,n.bufferToBase64)(m),y=atob(h),S=await(0,s.completeRememberMeRegistration)(r,g,{masterPasswordEncryptionKey:h,authenticator:t});if((0,s.isApiError)(S))throw new Error(S.code);const v={accessKey:S.sessionAccessKey,secretKey:S.sessionSecretKey,expirationTimeSeconds:S.sessionExpirationDateUnix};r.dispatch((0,u.loadSessionKeys)(v)),await o.getInstance().storeAuthenticationKeys(v);const E="",A=(0,d.getNoDerivationCryptoConfig)();i.setInstance({raw:y},E,A);const _=(0,c.masterPasswordSelector)(l);return await o.getInstance().storeWebAuthnMasterPassword(_),await(0,p.persistLocalAccountRememberMeType)(r,"webauthn"),r.dispatch((0,f.setRememberMeTypeAction)("webauthn")),!0}catch(e){const t=new Error(`[WebAuthnAuthentication] - initialize: ${e}`);return(0,l.sendExceptionLog)({error:t}),(0,o.logError)(t),!1}})(e,t),process:(t,r)=>(async(e,t,r)=>{try{const{storeService:n,webAuthnAuthenticationEncryptorService:o,localStorageService:a}=e,i=await(0,s.completeRememberMeOpenSession)(n,t,{authenticator:r});if((0,s.isApiError)(i))throw new Error(i.message);const c="",l=(0,d.getNoDerivationCryptoConfig)(),p=i.masterPasswordEncryptionKey,f=atob(p);o.setInstance({raw:f},c,l);const g=await a.getInstance().getWebAuthnMasterPassword();n.dispatch((0,u.updateMasterPassword)(g))}catch(e){const t=new Error(`[WebAuthnAuthentication] - processWebAuthnAuthentication: ${e}`);(0,l.sendExceptionLog)({error:t}),(0,o.logError)(t)}})(e,t,r),shouldTrigger:r=>(0,t.shouldTrigger)(e.storeService,e.localStorageService,r),deactivate:t=>(async(e,t)=>{const{storeService:r,localStorageService:n}=e,o=(0,i.deviceKeysSelector)(r.getState());if(!o)return!1;const a=await(0,s.deactivateRememberMe)(r,t,{deviceAccessKey:o.accessKey});return!(0,s.isApiError)(a)&&(await n.getInstance().cleanAuthenticationKey(),await(0,p.persistLocalAccountRememberMeType)(r,"disabled"),r.dispatch((0,f.setRememberMeTypeAction)("disabled")),!0)})(e,t)})},61740:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areSessionKeysValid=t.loadSessionKeysToStore=t.hasSessionKeysInStorage=t.shouldAskMasterPassword=t.cleanRememberMeStorageData=t.getLocalAccountRememberMeType=t.persistLocalAccountRememberMeType=t.RememberMeErrorCode=void 0;const n=r(2246),o=r(63739),a=r(25576),i=r(1860),s=r(16356),c=r(47408),u=r(16593),l=r(46298),d=r(56915),p=r(92263),f=r(70252),g=r(95623);var m;!function(e){e.USER_NOT_AUTHENTICATED="USER_NOT_AUTHENTICATED",e.EMPTY_DEVICE_KEYS="EMPTY_DEVICE_KEYS",e.EMPTY_SESSION_KEYS="EMPTY_SESSION_KEYS"}(m=t.RememberMeErrorCode||(t.RememberMeErrorCode={})),t.persistLocalAccountRememberMeType=async(e,t)=>{const{login:r,persistData:o}=e.getAccountInfo();o===a.PersistData.PERSIST_DATA_YES&&await(0,n.storeUserPublicSetting)(r,"rememberMeType",t)},t.getLocalAccountRememberMeType=e=>(0,n.getUserPublicSetting)(e,"rememberMeType"),t.cleanRememberMeStorageData=async(e,r)=>{const n=(0,u.userLoginSelector)(e.getState()),a=[(0,o.removeData)(r,n,"authenticationKeys"),(0,o.removeData)(r,n,"registry"),(0,t.persistLocalAccountRememberMeType)(e,"disabled")];if("disabled"!==(0,d.rememberMeTypeSelector)(e.getState())){const t=new Promise((t=>{(async(e,t)=>{const r=(0,d.deviceKeysSelector)(e.getState());r&&await(0,l.deactivateRememberMe)(e,t,{deviceAccessKey:r.accessKey})})(e,n).then(t).catch((e=>{const r=p.CarbonError.fromAnyError(e).addContextInfo("RememberMe","cleanRememberMeStorageData");(0,g.logError)({message:"Error when deactivating remember me server side"}),(0,f.sendExceptionLog)({error:r}),t()}))}));a.push(t)}await Promise.all(a)},t.shouldAskMasterPassword=e=>{const t=(0,n.getUserPublicSetting)(e,"lastMasterPasswordOpenSessionTimestamp")||void 0;if(t)return Date.now()-t>12096e5},t.hasSessionKeysInStorage=async e=>await e.getInstance().doesAuthenticationKeysExist(),t.loadSessionKeysToStore=async(e,r)=>{try{if(!(0,t.hasSessionKeysInStorage)(r))throw new Error(m.EMPTY_SESSION_KEYS);const n=await r.getInstance().getAuthenticationKeys();e.dispatch((0,s.loadSessionKeys)(n))}catch(e){throw e.message.indexOf(i.DATA_TAMPERED_ERROR)>-1&&r.getInstance().cleanAuthenticationKey(),e}},t.areSessionKeysValid=e=>e?.expirationTimeSeconds>(0,c.getUnixTimestamp)()},31937:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restoreLastAuthenticatedUser=void 0;const n=r(95623),o=r(88610),a=r(70252),i=r(48990),s=r(52968),c=r(35924),u=r(78759);t.restoreLastAuthenticatedUser=async function(e,t){try{const{applicationModulesAccess:r}=e,n=t.find((e=>e.isLastSuccessfulLogin));if(!n||n.hasLoginOtp)return;if(e.storeService.getState().userSession.ssoSettings.ssoUser)return;const a=n.login,l=e.storeService.getState().authentication.localUsers;if(void 0!==l[a]&&l[a].ssoActivatedUser)return void((0,u.disableAutoSSOLoginSelector)(e.storeService.getState())||(e.storeService.dispatch((0,c.updateLoginStepInfoLogin)(a)),"sso"===n.rememberMeType&&await r.createClients().authenticationFlow.commands.initiateAutologinWithSSO({login:a??""})));if("webauthn"===n.rememberMeType)return void function({storeService:e}){try{document.featurePolicy.features().includes("publickey-credentials-get")&&e.dispatch((0,i.reactivationStatusUpdated)(s.ReactivationStatus.WEBAUTHN))}catch(t){e.dispatch((0,i.reactivationStatusUpdated)(s.ReactivationStatus.CLASSIC))}}(e);const d=await e.autoLoginService.shouldTrigger(a),p=(0,o.makeLoginController)(e);if(!d)return void p.openSession(a);await e.autoLoginService.process(a);const f=e.storeService.getUserSession().masterPassword;if(!f)return;await p.openSessionWithMasterPassword(a,f,{triggeredByRememberMeType:"autologin"})}catch(e){const t=`[index] - restoreLastAuthenticatedUser: ${e}`,r=new Error(t);(0,n.logError)({message:t,details:{error:r}}),(0,a.sendExceptionLog)({error:r})}}},98416:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeLocalStorageService=void 0;const n=r(63739);t.makeLocalStorageService=e=>{let t=null;return{setInstance:r=>{t=(0,n.makeUserLocalDataService)(e,r)},getInstance:()=>{if(!t)throw new Error("makeLocalStorageService: You must call setInstance(login: string) before getting the instance");return t}}}},63739:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserLocalDataService=t.deleteAllLocalUserData=t.isDataStored=t.removeData=t.getStorageDebugKey=t.getStorageKey=t.STORAGE_VERSION=t.StoredUserDataTypeEnum=void 0;const n=r(95623),o=r(25576),a=r(41265),i=r(16038),s=r(16593),c=r(10897),u=r(19695),l=r(56668),d=r(1110),p=r(93513);t.StoredUserDataTypeEnum=["abTests","authentication","authenticationKeys","darkWebMonitoring","dataLeaksEmailStatusList","eventStore","health","healthWasComputed","icons","localDataBackupLastLoginSuccessful","localDataBackupTmp","localKey","localSettings","notificationsStatus","personalData","personalFeatures","personalSettings","recoveryData","recoveryLocalKey","recoverySessionCredential","registry","remoteFileContent","remoteFileMeta","sharingData","sharingSync","teamAdminData","userActivity","vaultReport","analyticsIds","userAutofillCorrections","userAutofillCorrectionsMigrated"],t.STORAGE_VERSION="v1",t.getStorageKey=(e,r,n=t.STORAGE_VERSION)=>`${e}.${r}.${n}`,t.getStorageDebugKey=(e,r,n=t.STORAGE_VERSION)=>(0,t.getStorageKey)(e,r,n)+".clear";const f=(e,t)=>`${e}.${t}`,g=async(e,t,r)=>{const n=await e.getLocalStorage().readItem(r);if("string"!=typeof n||0===n.length)throw new Error(`value ${t} undefined`);return n},m=async(e,r,a,s)=>{const c=r.getLocalStorage(),u=(0,t.getStorageKey)(a,s);if(await c.itemExists(u))return(async(e,t,r,n)=>{const o=await g(t,r,n),a=await e.getInstance().decrypt(o),i=(0,l.inflateUtf16)(a);return JSON.parse(i)})(e,r,s,u);const d=f(a,s);if(await c.itemExists(d))return(async(e,t,r,a)=>{const s=await g(t,r,a),c=await e.getInstance().decrypt(s),u=(0,l.deflatedUtf8ToUtf16)(c,{skipUtf8Decoding:!0});if(0===u.length)throw new Error(o.AuthenticationCode[o.AuthenticationCode.WRONG_PASSWORD]);const d=p.decode(u);try{const e=(0,i.utf8ChunkDecode)(d);return JSON.parse(e)}catch(e){return n.default.log(e),d}})(e,r,s,d);const m=new Error("value "+s+" undefined");throw n.default.error(m),m},h=async(e,r,o,i,s)=>{try{const n=e.getLocalStorage(),c=(0,t.getStorageKey)(r,i);if(await n.writeItem(c,o),(0,a.isInternalTestUser)(r)&&s){const n=(0,t.getStorageDebugKey)(r,i);await e.getLocalStorage().writeItem(n,s)}}catch(e){const t=new Error(`[storeData] failed for dataType: ${i} with error: ${e}`);throw n.default.error(t),t}},y=async(e,t,r,n,o)=>{const a=JSON.stringify(n),i=(0,l.deflateUtf16)(a),s=await e.getInstance().encrypt(i);await h(t,r,s,o,n)};t.removeData=async(e,r,n)=>{const o=(0,t.getStorageKey)(r,n),i=f(r,n),s=(0,t.getStorageDebugKey)(r,n),c=((e,t)=>f(e,t)+".clear")(r,n),u=e.getLocalStorage(),l=[u.removeItem(o),u.removeItem(i),...(0,a.isInternalTestUser)(r)?[u.removeItem(s),u.removeItem(c)]:[]];await Promise.all(l)},t.isDataStored=async(e,r,n)=>{const o=e.getLocalStorage(),a=(0,t.getStorageKey)(r,n);if(await o.itemExists(a))return!0;const i=f(r,n);return await o.itemExists(i)},t.deleteAllLocalUserData=async function(e,r,n){const o=n.trim();await Promise.all([...t.StoredUserDataTypeEnum,...d.FileNamesList].map((async r=>{await(0,t.removeData)(e,o,r)}))),await async function(e,t){await e.commands.mitigationDeleteGrapheneUserData({login:t})}(r.createClients()["carbon-legacy"],n)},t.makeUserLocalDataService=(e,r)=>{const o=()=>{const{storeService:t,masterPasswordEncryptorService:r,localDataEncryptorService:n}=e;return(0,s.isLocalKeyActivatedSelector)(t.getState())?n:r};return{storePersonalData:t=>y(o(),e.storageService,r,t,"personalData"),getPersonalData:()=>(n.default.log("Load Personal Data"),m(o(),e.storageService,r,"personalData")),doesPersonalDataExist:()=>(n.default.log("Check Personal Data existence"),(0,t.isDataStored)(e.storageService,r,"personalData")),storeLocalSettings:t=>y(o(),e.storageService,r,t,"localSettings"),getLocalSettings:()=>(n.default.log("Load Local Settings"),m(o(),e.storageService,r,"localSettings")),storePersonalSettings:t=>y(o(),e.storageService,r,t,"personalSettings"),getPersonalSettings:()=>(n.default.log("Load Personal Settings"),m(o(),e.storageService,r,"personalSettings")),storePersonalFeatures:t=>y(o(),e.storageService,r,t,"personalFeatures"),getPersonalFeatures:()=>(n.default.log("Load Personal Features"),m(o(),e.storageService,r,"personalFeatures")),storeNotificationsStatus:t=>y(o(),e.storageService,r,t,"notificationsStatus"),doesNotificationStatusExist:()=>(n.default.log("Check Notification Status existence"),(0,t.isDataStored)(e.storageService,r,"notificationsStatus")),getNotificationStatus:()=>(n.default.log("Load Notifications Status"),m(o(),e.storageService,r,"notificationsStatus")),storeFeatures:t=>y(o(),e.storageService,r,t,"personalFeatures"),getFeatures:()=>(n.default.log("Load Feature Flipping"),m(o(),e.storageService,r,"personalFeatures")),storeSharingData:t=>y(o(),e.storageService,r,t,"sharingData"),getSharingData:()=>(n.default.log("Load Sharing Data"),m(o(),e.storageService,r,"sharingData")),storeSharingSync:t=>y(o(),e.storageService,r,t,"sharingSync"),getSharingSync:()=>(n.default.log("Load Sharing Sync"),m(o(),e.storageService,r,"sharingSync")),doesSharingSyncExist:()=>(0,t.isDataStored)(e.storageService,r,"sharingSync"),storeTeamAdminData:t=>y(o(),e.storageService,r,t,"teamAdminData"),getTeamAdminData:()=>(n.default.log("Load Team Admin Data"),m(o(),e.storageService,r,"teamAdminData")),storeAuthenticationKeys:t=>y(e.authorizationKeysEncryptorService,e.storageService,r,t,"authenticationKeys"),getAuthenticationKeys:()=>(n.default.log("Load Authentication Keys"),m(e.authorizationKeysEncryptorService,e.storageService,r,"authenticationKeys").then((e=>e))),doesAuthenticationKeysExist:()=>(n.default.log("Check Authentication Keys existence"),(0,t.isDataStored)(e.storageService,r,"authenticationKeys")),cleanAuthenticationKey:()=>(0,t.removeData)(e.storageService,r,"authenticationKeys"),storeAuthenticationData:t=>y(o(),e.storageService,r,t,"authentication"),getAuthenticationData:()=>m(o(),e.storageService,r,"authentication"),hasAuthenticationData:()=>(0,t.isDataStored)(e.storageService,r,"authentication"),doesMasterPasswordExist:()=>(n.default.log("Check Master Password Keys existence"),(0,t.isDataStored)(e.storageService,r,"registry")),getMasterPassword:()=>(n.default.log("Load Master Password via Auto login"),m(e.autoLoginEncryptorService,e.storageService,r,"registry")),storeMasterPassword:t=>(n.default.log("Store Master Password via Auto login"),y(e.autoLoginEncryptorService,e.storageService,r,t,"registry")),getWebAuthnMasterPassword:()=>(n.default.log("Load Master Password via WebAuthn login"),m(e.webAuthnAuthenticationEncryptorService,e.storageService,r,"registry")),storeWebAuthnMasterPassword:t=>(n.default.log("Store Master Password via WebAuthn login"),y(e.webAuthnAuthenticationEncryptorService,e.storageService,r,t,"registry")),getLocalKey:()=>m(e.masterPasswordEncryptorService,e.storageService,r,"localKey"),doesLocalKeyExist:()=>(0,t.isDataStored)(e.storageService,r,"localKey"),storeLocalKey:t=>y(e.masterPasswordEncryptorService,e.storageService,r,t,"localKey"),doesLocalDataExist:()=>Promise.all(["localSettings","personalData","personalSettings"].map((n=>(0,t.isDataStored)(e.storageService,r,n)))).then((e=>e.every((e=>e)))),storeUserABTests:t=>y(o(),e.storageService,r,t,"abTests"),getUserABTests:()=>(n.default.log("Load User AB Tests"),m(o(),e.storageService,r,"abTests")),doesDarkWebExist:()=>(0,t.isDataStored)(e.storageService,r,"darkWebMonitoring"),storeDarkWeb:t=>y(o(),e.storageService,r,t,"darkWebMonitoring"),getDarkWeb:()=>(n.default.log("Load Dark Web Monitoring"),m(o(),e.storageService,r,"darkWebMonitoring")),storeHealth:t=>{if(!e.storeService.getPersonalFeatures().features.ims_web_ph_mv3_dev){const n=(0,c.healthToStorage)(t);return y(o(),e.storageService,r,n,"health")}return null},getHealth:async()=>{if(!await(0,t.isDataStored)(e.storageService,r,"health"))return null;const n=await m(o(),e.storageService,r,"health");return(0,c.healthFromStorage)(n)},storeIcons:async t=>{const n=(0,u.iconsToStorage)(t);return y(o(),e.storageService,r,n,"icons")},getIcons:async()=>{if(!await(0,t.isDataStored)(e.storageService,r,"icons"))return null;const n=await m(o(),e.storageService,r,"icons");return(0,u.iconsFromStorage)(n)},doesUserActivityExist:()=>(0,t.isDataStored)(e.storageService,r,"userActivity"),storeUserActivity:t=>y(o(),e.storageService,r,t,"userActivity"),getUserActivity:()=>m(o(),e.storageService,r,"userActivity"),doesVaultReportExist:()=>(0,t.isDataStored)(e.storageService,r,"vaultReport"),storeVaultReport:t=>y(o(),e.storageService,r,t,"vaultReport"),getVaultReport:()=>m(o(),e.storageService,r,"vaultReport"),storeEventStore:t=>y(o(),e.storageService,r,t,"eventStore"),getEventStore:async()=>await(0,t.isDataStored)(e.storageService,r,"eventStore")?m(o(),e.storageService,r,"eventStore"):null,storeHealthWasComputed:t=>y(o(),e.storageService,r,t,"healthWasComputed"),getHealthWasComputed:async()=>!!await(0,t.isDataStored)(e.storageService,r,"healthWasComputed")&&m(o(),e.storageService,r,"healthWasComputed"),storeRecoveryLocalKey:async t=>{const n=e.storageService;return h(n,r,t,"recoveryLocalKey")},getRecoveryLocalKey:async()=>{const n=(0,t.getStorageKey)(r,"recoveryLocalKey");return await g(e.storageService,"recoveryLocalKey",n)},storeRecoverySessionCredential:t=>y(o(),e.storageService,r,t,"recoverySessionCredential"),getRecoverySessionCredential:async()=>m(o(),e.storageService,r,"recoverySessionCredential"),doesRecoverySessionCredentialExist:async()=>(0,t.isDataStored)(e.storageService,r,"recoverySessionCredential"),cleanRecoverySetupData:async()=>{const n=e.storageService;return await(0,t.removeData)(n,r,"recoverySessionCredential"),await(0,t.removeData)(n,r,"recoveryLocalKey")},doesRecoveryLocalKeyExist:async()=>(0,t.isDataStored)(e.storageService,r,"recoveryLocalKey"),cleanRecoveryData:async()=>{const n=e.storageService;return await(0,t.removeData)(n,r,"recoveryData")},storeRecoveryData:async t=>{const n=e.storageService;return await h(n,r,t,"recoveryData")},getRecoveryData:async()=>{const n=(0,t.getStorageKey)(r,"recoveryData");return await g(e.storageService,"recoveryData",n)},doesRecoveryDataExist:()=>(0,t.isDataStored)(e.storageService,r,"recoveryData"),storeAnalyticsIds:t=>y(o(),e.storageService,r,t,"analyticsIds"),getAnalyticsIds:()=>((0,n.log)({message:"Load Analytics IDs"}),m(o(),e.storageService,r,"analyticsIds")),doesAnalyticsIdsExist:()=>((0,n.log)({message:"Check Analytics IDs existence"}),(0,t.isDataStored)(e.storageService,r,"analyticsIds")),storeRemoteFileContent:(t,n)=>y(o(),e.storageService,r,n,t),storeRemoteFileMeta:t=>y(o(),e.storageService,r,t,"remoteFileMeta"),getRemoteFileMeta:()=>m(o(),e.storageService,r,"remoteFileMeta"),getRemoteFileContent:t=>m(o(),e.storageService,r,t),cleanAllRemoteFiles:async()=>{const n=e.storageService;await(0,t.removeData)(n,r,"remoteFileMeta");for(const e of d.FileNamesList)await(0,t.removeData)(n,r,e)},cleanSingleFileStorage:async n=>{const a=e.storageService;await(0,t.removeData)(a,r,n);const i=await m(o(),e.storageService,r,"remoteFileMeta");return delete i[n],y(o(),e.storageService,r,i,"remoteFileMeta")},isRemoteFileMetaDataExist:()=>(0,t.isDataStored)(e.storageService,r,"remoteFileMeta"),isRemoteFileContentExist:n=>(0,t.isDataStored)(e.storageService,r,n)}}},18539:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeStorageService=t.CarbonLocalStorage=void 0;const n=r(95623);t.CarbonLocalStorage=class{constructor(e){this._storage=e}itemExists(e){return this._storage.itemExists(e)}readItem(e){return this._storage.readItem(e)}async writeItem(e,t){const r=await this.backupItem(e);try{await this._storage.writeItem(e,t),r&&await r.clean()}catch(e){n.Debugger.error("CarbonLocalStorage:writeItem error:",e),r?(n.Debugger.error("CarbonLocalStorage couldn't save data, reverting to backup version"),await r.restoreAndClean()):n.Debugger.error("CarbonLocalStorage couldn't save data and no backup version to restore")}}removeItem(e){return this._storage.removeItem(e)}async getSuitableBackupKey(e){const t=t=>e+"."+t;let r=1;for(;await this._storage.itemExists(t(r));)r++;return t(r)}async backupItem(e){if(!await this._storage.itemExists(e))return null;const t=await this.getSuitableBackupKey(e),r=await this._storage.readItem(e);await this._storage.writeItem(t,r);const n=this._storage;async function o(){return await n.removeItem(t)}return{clean:o,restoreAndClean:async function(){const r=await n.readItem(t);return await n.writeItem(e,r),await o()}}}},t.makeStorageService=()=>{let e=null;return{setInstance:t=>{e=t},getLocalStorage:()=>{if(!e)throw new Error("makeStorageService: You must call setInstance(instance: AsyncStorage) before getting the instance");return e}}}},97601:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeString=void 0,t.normalizeString=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()},45570:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStyxApiCredentials=void 0;const n=r(45956),o=r(39261);t.getStyxApiCredentials=function(e,t){if(t.authenticationType!==n.ApiAuthType.App)return{type:n.ApiAuthType.None};const r={appKeys:(0,o.styxKeysSelector)(e)};return{type:n.ApiAuthType.App,...r}}},76330:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMakeStyxApiRequest=t.getEventsPayload=void 0;const n=r(56915),o=r(55730),a=r(45956),i=r(47408),s=r(48749),c=r(14656),u=r(17825),l=r(45570),d=r(41265),p=r(30913),f=r(59600),g=r(78577);t.getEventsPayload=function(e){return e.map((e=>JSON.stringify(e))).join("\n")},t.getMakeStyxApiRequest=function(e,t,r){return async(m,h)=>{const y={login:"",teamUuid:"",payload:"",...h||{}},S=(0,o.getMethodParams)(r,y.payload),v=(0,o.getAuthParams)(t,{login:y.login,teamUuid:y.teamUuid}),E="POST"===S.method?S.payload:"",A=(0,n.dashlaneServerDeltaTimestampSelector)(m.getState())||0,_=Math.round((0,i.getUnixTimestamp)()-A),b=(0,l.getStyxApiCredentials)(m.getState(),v),T=(0,n.platformInfoSelector)(m.getState()),I={"Content-Type":"application/x-jsonlines","X-TIMESTAMP":_.toString()},w={"dashlane-client-agent":(0,o.getApiClientAgentHeader)(T)},C=function(e){const t=e.getAccountInfo().login,r=t&&(0,d.isInternalTestUser)(t),n=(0,p.applicationBuildTypeSelector)(e.getState()),o=n===f.ApplicationBuildType.DEV||n===f.ApplicationBuildType.QA;return r||o}(m);C&&(I["X-DL-TEST"]="true");const O=Object.keys(w),D=await async function(e,t,r,o,s,c){if(r.type===a.ApiAuthType.None)return{};const u=(0,n.dashlaneServerDeltaTimestampSelector)(e.getState())||0,l=Math.round((0,i.getUnixTimestamp)()-u),d={pathname:t,method:"POST",rawBody:c,headers:o};return{Authorization:await(0,g.signRequest)({request:d,timestamp:l,credentials:r,headersToSign:s})}}(m,e,b,{...w,...I},O,E),P={...w,...D,...I},N=`${s.config.DASHLANE_STYX_HOST_WITH_SCHEME}${e}`,{data:R}=await function(e,t,r){const n={headers:r,validateStatus:o.validateStatus};switch(e.method){case a.ApiRequestMethod.GET:return(0,c.get)(t,n);case a.ApiRequestMethod.POST:return(0,c.post)(t,e.payload,n);default:(0,u.assertUnreachable)(e)}}(S,N,P);return R}}},72636:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SendTokenStatus=t.makeWSAuthentication=void 0;const n=r(66646),o="authentication";var a;function i(e){if("string"!=typeof e){const t=JSON.stringify(e);throw new Error(`unsupported_response - ${t}`)}}t.makeWSAuthentication=()=>({askServerToSendToken:e=>function(e){return(0,n._makeRequest)(o,7,"sendtoken",e,{responseType:"text"}).then((e=>{if(i(e),void 0===a[e])throw new Error(`unknown_status - ${e}`);return a[e]}))}(e),registerUki:e=>function(e){return(0,n._makeRequest)(o,7,"registeruki",e,{responseType:"text"}).then((e=>{if(i(e),"ERROR"===e)throw new Error("Error: Failed to register the UKI");return e}))}(e),getTemporaryToken:e=>function(e){return(0,n._makeRequest)(o,7,"getTemporaryToken",e).then((e=>(i(e.token),e.token)))}(e),validity:e=>function(e){return(0,n._makeRequest)(o,7,"validity",e,{responseType:"text"})}(e)}),function(e){e[e.ERROR=0]="ERROR",e[e.SUCCESS=1]="SUCCESS",e[e.OTP_NEEDED=2]="OTP_NEEDED",e[e.UNKNOWN_USER=3]="UNKNOWN_USER"}(a=t.SendTokenStatus||(t.SendTokenStatus={}))},32239:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSBackup=void 0;const n=r(66646),o="backup";t.makeWSBackup=()=>({latest:e=>a(e),upload:e=>i(e),unlock:e=>s(e),erase:e=>c(e)});const a=e=>(0,n._makeRequest)(o,12,"latest",Object.assign({},e,{sharingTimestamp:0})),i=e=>(0,n._makeRequest)(o,12,"upload",e),s=e=>(0,n._makeRequest)(o,12,"unlock",e),c=e=>(0,n._makeRequest)(o,12,"erase",e)},33633:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSBreaches=void 0;const n=r(66646);t.makeWSBreaches=()=>({get:e=>(0,n._makeRequest)("breaches",1,"get",e)})},5692:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSContactInfo=void 0;const n=r(66646);t.makeWSContactInfo=()=>({getContactInfo:e=>function(e){return(0,n._makeRequest)("contactinfos",1,"get",{login:e.login,uki:e.uki})}(e)})},69376:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSCountry=void 0;const n=r(66646);t.makeWSCountry=()=>({getCurrentCountry:(e={})=>function(e){return(0,n._makeRequest)("country",1,"get",e).then((e=>e.content))}(e)})},32868:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWSDataLeaksEmailErrorCode=t.isWSDataLeaksEmailResponseSuccess=t.makeWSDataLeaks=void 0;const n=r(28445),o=r(92263),a=r(20750),i=r(48749),s="dataleak",c=1;function u(e){return g(s,c,"optin",e)}function l(e){return g(s,c,"optout",e)}function d(e){return g(s,c,"status",e)}function p(e){return g(s,c,"leaks",e)}function f(e){return g(s,c,"confirm",e)}async function g(e,t,r,s){const c=`${i.config.DASHLANE_WS_HOST_WITH_SCHEME}/${t}/${e}/${r}`,{data:u}=await(0,n.postDataToUrl)(c,s);return function(e,t){if(429===t.code||t.error&&-32600===t.error.code)throw new o.CarbonError(a.WSError,a.WSErrorCode.THROTTLED).addAdditionalInfo({webService:e});return t}(c,u)}t.makeWSDataLeaks=()=>({confirm:f,optin:u,optout:l,status:d,leaks:p}),t.isWSDataLeaksEmailResponseSuccess=function(e){return 200===e.code},t.getWSDataLeaksEmailErrorCode=function(e){return e.content&&e.content.results.length>0?e.content.results[0].result:""}},35595:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSDevices=void 0;const n=r(66646),o="devices";t.makeWSDevices=()=>({list:e=>a(e),deactivate:e=>i(e),changeName:e=>s(e)});const a=e=>(0,n._makeRequest)(o,1,"list",{login:e.login,uki:e.uki}).then((e=>e.content)),i=e=>(0,n._makeRequest)(o,1,"deactivate",{login:e.login,uki:e.uki,deviceId:e.deviceId}),s=e=>(0,n._makeRequest)(o,1,"changename",{login:e.login,uki:e.uki,deviceId:e.deviceId,updatedName:e.updatedDeviceName})},20750:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.WSError=t.WSErrorMessages=t.WSErrorCode=void 0,function(e){e[e.THROTTLED=0]="THROTTLED",e[e.REQUEST_FAILED=1]="REQUEST_FAILED"}(r=t.WSErrorCode||(t.WSErrorCode={})),t.WSErrorMessages={[r.THROTTLED]:"THROTTLED",[r.REQUEST_FAILED]:"WebService responded with error code in payload"},t.WSError={codes:r,name:"WSError",messages:t.WSErrorMessages}},66316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSFeatures=void 0;const n=r(66646);t.makeWSFeatures=()=>({fetchFeatures:e=>function(e){return(0,n._makeRequest)("features",1,"getForUser",e).then((e=>e.content))}(e)})},56776:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSIconCrawler=void 0;const n=r(66646);t.makeWSIconCrawler=()=>({getIcons:o});const o=async e=>(0,n._makeRequest)("iconcrawler",2,"getIcons",{domainsInfo:e})},1577:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewCardToken=void 0;const n=r(66646);t.NewCardToken=function(e,t){return(0,n._makeRequest)(t.name,t.version,"getNewCardToken",{login:e.login,uki:e.uki,teamId:e.teamId??null})}},87327:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDirectPayment=t.makeWSPremium=void 0;const n=r(66646),o="premium";t.makeWSPremium=()=>({status:e=>function(e){return(0,n._makeRequest)(o,3,"status",{login:e.login,uki:e.uki,billingInformation:e.billingInformation,spaces:e.spaces,autoRenewal:e.autoRenewal,familyInformation:e.familyInformation,previousPlan:e.previousPlan,needsAutoRenewalFailed:e.needsAutoRenewalFailed,teamInformation:!1,capabilities:!0}).then((e=>{if(!e.success)throw new Error("failed fetching premium status");return e.hasOwnProperty("billingInformation")&&(e.billingInformation=function(e){if(e)return{cardExpirationYear:Number(e.card_exp_year),cardExpirationMonth:Number(e.card_exp_month),cardLast4Digits:Number(e.card_last4),cardType:e.card_type}}(e.billingInformation)),e}))}(e),setAutoRenewal:e=>function(e){return(0,n._makeRequest)(o,3,"setAutoRenewal",{login:e.login,uki:e.uki,enabled:e.enabled})}(e),updateCardToken:e=>function(e){return(0,n._makeRequest)(o,3,"updateCardToken",{login:e.login,uki:e.uki,tokenId:e.tokenId,stripeAccount:e.stripeAccount})}(e),getABTestingVersionDetails:e=>function(e){return(0,n._makeRequest)(o,3,"getABTestingVersionDetails",e)}(e),getSubscriptionCode:e=>function({login:e,uki:t}){return(0,n._makeRequest)(o,3,"getSubscriptionCode",{login:e,uki:t})}(e)}),t.getDirectPayment=function(e){return(0,n._makeRequest)(o,3,"directpayment",{login:e})}},55898:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSQA=void 0;const n=r(66646);t.makeWSQA=()=>({tokens:e=>function(e){return(0,n._makeRequest)("qa",1,"tokens",e)}(e)})},56692:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSRecovery=void 0;const n=r(66646),o="recovery";t.makeWSRecovery=()=>({getSetupRequisites:e=>async function(e){return(0,n._makeRequest)(o,1,"getSetupRequisites",e)}(e),setRecoveryClientKeys:e=>async function(e){return(0,n._makeRequest)(o,1,"setRecoveryClientKeys",e)}(e),request:e=>async function(e){return(0,n._makeRequest)(o,1,"request",e)}(e),getPendingRequests:e=>async function(e){const{content:t}=await(0,n._makeRequest)(o,1,"getPendingRequests",e);return t}(e),acceptRequest:e=>async function(e){return(0,n._makeRequest)(o,1,"accept",e)}(e),refuseRequest:e=>async function(e){return(0,n._makeRequest)(o,1,"refuse",e)}(e),cancelRequest:e=>async function(e){return(0,n._makeRequest)(o,1,"cancel",e)}(e)})},90732:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSSecureFile=void 0;const n=r(66646),o=1,a="securefile";function i(e){return(0,n._makeRequest)(a,o,"getDownloadLink",e)}function s(e){return(0,n._makeRequest)(a,o,"delete",e)}function c(e){return(0,n._makeRequest)(a,o,"getUploadLink",e)}function u(e){return(0,n._makeRequest)(a,o,"commit",e)}t.makeWSSecureFile=()=>({getDownloadLink:i,getUploadLink:c,commit:u,delete:s})},66696:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setTeamSettings=t.getTeamSettings=t.makeWSSettings=void 0;const n=r(66646),o=1,a="teamPlans";function i(e){return(0,n._makeRequest)(a,o,"status",e)}function s(e){return(0,n._makeRequest)(a,o,"editSettings",e)}t.makeWSSettings=()=>({getTeamSettings:e=>i(e),setTeamSettings:e=>s(e)}),t.getTeamSettings=i,t.setTeamSettings=s},64528:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeSharingWS=t.get=void 0;const n=r(66646),o=2,a="sharing";function i(e,t,r){const i={login:e,uki:t,action:JSON.stringify(r)};return(0,n._makeRequest)(a,o,"get",i).then((({content:e})=>e))}t.get=i,t.makeSharingWS=()=>({get:(e,t,r)=>i(e,t,r)})},98892:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemWS=void 0;const n=r(66646);t.makeItemWS=()=>({updateItem:(e,t,r)=>function(e,t,r){const o={login:e,uki:t,action:JSON.stringify(r)};return(0,n._makeRequest)("sharing",2,"performItemGroupAction",o).then((e=>{const t=e.content,r=t.itemErrors;if(r&&r.length>0)throw new Error(r[0].message);return t}))}(e,t,r)})},63698:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemGroupWS=void 0;const n=r(66646),o=2,a="sharing",i="performItemGroupAction";function s(e,t,r){const s={login:e,uki:t,action:JSON.stringify(r)};return(0,n._makeRequest)(a,o,i,s).then((e=>{const t=e.content,r=t.itemGroupErrors;if(r&&r.length>0)throw new Error(r[0].message);const{itemGroups:n,items:o}=t;return{itemGroups:n,items:o}}))}t.makeItemGroupWS=()=>({createSpecialItemGroup:(e,t,r)=>s(e,t,r).then((({itemGroups:e})=>e&&e[0])),createItemGroup:s,deleteGroup:(e,t,r)=>s(e,t,r),addItems:(e,t,r)=>s(e,t,r),updateItem:(e,t,r)=>s(e,t,r),removeItems:(e,t,r)=>s(e,t,r),acceptItemGroup:s,refuseItemGroup:s,inviteItemGroupMembers:s,revokeItemGroupMembers:s,updateItemGroupMembers:s})},52931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserGroupWS=void 0;const n=r(66646),o=1,a="userGroup",i="performUserGroupAction";function s(e,t,r){const s={login:e,uki:t,action:JSON.stringify(r)};return(0,n._makeRequest)(a,o,i,s).then((e=>{const{itemGroups:t,items:r,userGroupErrors:n,userGroups:o}=e.content;if(n&&n.length>0)throw new Error(n[0].message);return{itemGroups:t,items:r,userGroups:o}}))}t.makeUserGroupWS=()=>({create:(e,t,r)=>s(e,t,r),delete:(e,t,r)=>s(e,t,r),rename:(e,t,r)=>s(e,t,r),invite:(e,t,r)=>s(e,t,r),revoke:(e,t,r)=>s(e,t,r),update:(e,t,r)=>s(e,t,r),accept:(e,t,r)=>s(e,t,r),refuse:(e,t,r)=>s(e,t,r)})},12832:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckChangePasswordStatus=t.makeWSStrongAuth=void 0;const n=r(66646),o=r(95623);var a;t.makeWSStrongAuth=()=>({checkChangeMasterPassword:e=>function({login:e,otp:t,deviceId:r}){return(0,n._makeRequest)("strongauth",3,"getServerKey",{login:e,otp:t,deviceID:r,isMxAware:!0}).then((e=>{if(o.default.log("checkChangeMasterPassword: "+(e?JSON.stringify(e):"response null")),!e||!e.message)throw new Error("Unknown response from server");if(void 0===a[e.message])throw new Error(`unknown_message - ${JSON.stringify(e)}`);return{status:a[e.message],content:e.content}}))}(e)}),function(e){e[e.Unauthorized=0]="Unauthorized",e[e.OK=1]="OK"}(a=t.CheckChangePasswordStatus||(t.CheckChangePasswordStatus={}))},42883:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSTeamPlans=void 0;const n=r(66646),o="teamPlans";t.makeWSTeamPlans=()=>({findUserGroups:e=>function(e){return(0,n._makeRequest)(o,1,"findUserGroups",e)}(e),proposeMembers:e=>function(e){return(0,n._makeRequest)(o,1,"proposeMembers",e)}(e),acceptTeam:e=>function(e){return(0,n._makeRequest)(o,1,"acceptTeam",e)}(e),addTeamAdmin:e=>function(e){return(0,n._makeRequest)(o,1,"addTeamCaptain",e)}(e),removeTeamAdmin:e=>function(e){return(0,n._makeRequest)(o,1,"removeTeamCaptain",e)}(e),registerFreeTrial:e=>function(e){return(0,n._makeRequest)(o,1,"registerFreeTrial",e)}(e),confirmFreeTrial:e=>function(e){return(0,n._makeRequest)(o,1,"confirmFreeTrial",e)}(e),getDirectorySyncRequest:e=>function(e){return(0,n._makeRequest)(o,1,"getDirectorySyncRequest",e)}(e),updateDirectorySyncRequestStatus:e=>function(e){return(0,n._makeRequest)(o,1,"updateDirectorySyncRequestStatus",e)}(e),spaceDeleted:e=>function(e){return(0,n._makeRequest)(o,1,"spaceDeleted",e)}(e)})},85870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.makeWSUserActivity=void 0;const n=r(66646),o="useractivity",a=2;async function i(e){return await(0,n._makeRequest)(o,a,"create",e)}t.makeWSUserActivity=()=>({create:i}),t.create=i},50141:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSUserAlias=void 0;const n=r(66646);t.makeWSUserAlias=()=>({findUsersByAliases:e=>function(e){return(0,n._makeRequest)("userAlias",1,"findUsers",{login:e.login,uki:e.uki,aliases:e.aliases}).then((e=>e.content))}(e)})},32607:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWSResponseSuccess=void 0,t.isWSResponseSuccess=function(e){return 200===e.code}},89016:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSService=void 0;const n=r(72636),o=r(5692),a=r(69376),i=r(32868),s=r(35595),c=r(66316),u=r(87327),l=r(56692),d=r(12832),p=r(42883),f=r(50141),g=r(66696),m=r(63698),h=r(55898),y=r(64528),S=r(32239),v=r(33633),E=r(52931),A=r(85870),_=r(56776),b=r(90732);t.makeWSService=()=>({authentication:(0,n.makeWSAuthentication)(),backup:(0,S.makeWSBackup)(),breaches:(0,v.makeWSBreaches)(),contactInfo:(0,o.makeWSContactInfo)(),country:(0,a.makeWSCountry)(),dataleaks:(0,i.makeWSDataLeaks)(),devices:(0,s.makeWSDevices)(),features:(0,c.makeWSFeatures)(),iconCrawler:(0,_.makeWSIconCrawler)(),itemGroup:(0,m.makeItemGroupWS)(),premium:(0,u.makeWSPremium)(),recovery:(0,l.makeWSRecovery)(),settings:(0,g.makeWSSettings)(),strongAuth:(0,d.makeWSStrongAuth)(),teamPlans:(0,p.makeWSTeamPlans)(),userAlias:(0,f.makeWSUserAlias)(),sharing:(0,y.makeSharingWS)(),userGroup:(0,E.makeUserGroupWS)(),qa:(0,h.makeWSQA)(),userActivity:(0,A.makeWSUserActivity)(),secureFile:(0,b.makeWSSecureFile)()})},66646:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._makeRequest=t.WsError=void 0;const n=r(28445),o=r(92263),a=r(45800),i=r(20750),s=r(48749);!function(e){e[e.THROTTLED=-999]="THROTTLED"}(t.WsError||(t.WsError={})),t._makeRequest=function(e,t,r,c,u){const l=`${s.config.DASHLANE_WS_HOST_WITH_SCHEME}/${t}/${e}/${r}`,d={...u,headers:{...(0,a.getCloudflareHeaders)()}};return(0,n.postDataToUrl)(l,c,d).then((e=>{const t="string"==typeof e?e:e.data;return function(e,t){if("string"==typeof t)return t;if(429===t.code||t.error&&-32600===t.error.code)throw new o.CarbonError(i.WSError,i.WSErrorCode.THROTTLED).addAdditionalInfo({webService:e});if("code"in t&&200!==t.code||"success"in t&&!t.success||"error"in t&&t.error)throw new o.CarbonError(i.WSError,i.WSErrorCode.REQUEST_FAILED).addAdditionalInfo({webService:e,message:t.message,webServiceSubMessage:t.content?.message||t.content?.error||t.content,code:t.code});return t}(l,t)}))}},61384:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.freeWorker=t.getWorker=t.getWorkerPath=t.setWorkerPath=t.setWorkersPath=void 0;const n=r(11814);let o={};t.setWorkersPath=function(e){o=e},t.setWorkerPath=function(e,t){o[e]=t},t.getWorkerPath=function(e){return o[e]};const a=[],i=[];function s(e){const t=new Worker(e);return a.push(t),t}t.getWorker=function(e){return new Promise((t=>{a.length<function(){const e=n.navigator.getNavigator();return e&&e.hardwareConcurrency?e.hardwareConcurrency:4}()?t(s(e)):i.push({resolve:t,path:e})}))},t.freeWorker=function(e){const t=a.indexOf(e);if(t<0)console.error("freeWorker: trying to terminate a worker that does not exist");else if(e.terminate(),a.splice(t,1),i.length>0){const{resolve:e,path:t}=i.shift();e(s(t))}}},81885:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.KWXMLError=t.KWXMLErrorMessages=t.KWXMLErrorCode=void 0,function(e){e[e.PARSING_FAILED=0]="PARSING_FAILED"}(r=t.KWXMLErrorCode||(t.KWXMLErrorCode={})),t.KWXMLErrorMessages={[r.PARSING_FAILED]:"Failed to parse Dashlane XML"},t.KWXMLError={codes:r,name:"KWXMLError",messages:t.KWXMLErrorMessages}},61797:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAllKWXMLElementsOfType=t.removeNamespace=t.getDashlaneXml=t.parseDashlaneXml=void 0;const n=r(16516),o=r(44015),a=r(92263),i=r(81885),s=r(54218),c=r(51104),u=r(63985);function l(e){const t={KWAuthentifiant:u.fixCredentialTypesFromStore,KWSecureNote:u.fixNoteTypesFromStore,KWSecurityBreach:u.fixBreachTypesFromStore,KWSettingsManagerApp:c.fixPersonalSettingTypes.fromStore};let r=(0,n.compose)((0,n.reject)(n.isNil),(0,n.omit)((0,n.defaultTo)([],{KWAuthentifiant:["domainIcon"],KWSettingsManagerApp:["kwType","LastBackupTime","Id"]}[e.kwType])))(function(e,t){return function t(r){return(0,s.default)(r)?Object.keys(r).reduce(((o,a)=>{const i=e[a]||a,c=r[a];return Array.isArray(c)?o[i]=c.map((0,n.unary)(t)):(0,s.default)(c)?o[i]=t(c):o[i]=c,o}),{}):r}(t)}({kwType:"__type__"},e));return t[e.kwType]&&(r=t[e.kwType](r)),r}function d(e){if(e.includes(":")){const t=e.indexOf(":");return e.substring(t+1,e.length)}return e}t.parseDashlaneXml=async function(e){try{return await new Promise(((t,r)=>{(0,o.parseXml)(((e,n)=>e?r(e):t(n)),e,{fixType:!1})}))}catch(e){throw new a.CarbonError(i.KWXMLError,i.KWXMLErrorCode.PARSING_FAILED).addAdditionalInfo({libError:`${e}`})}},t.getDashlaneXml=function(e){const t=Array.isArray(e)?(0,n.map)(l,e):l(e);return(0,o.toXml)(t,{pretty:!1,allowEmpty:!0})},t.removeNamespace=d,t.findAllKWXMLElementsOfType=function e(t,r,n=[]){if(d(t.__type__)===r&&n.push(t),t.__children__&&t.__children__.length>0)for(let a=0;a<t.__children__.length;a++){const i=t.__children__[a];(0,o.isKWXMLElement)(i)&&e(i,r,n)}return n}},46430:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(9639),o=r(81080),a=r(18039),i=r(15876),s=r(63093),c=r(36172),u=r(69718);t.config={commands:{abortDeviceLimitFlow:{handler:c.abortDeviceLimitFlow},loginViaSSO:{handler:n.loginViaSSO},addLoginNotification:{handler:u.addLoginNotification},unlinkPreviousDevice:{handler:a.unlinkPreviousDevice},unlinkMultipleDevices:{handler:i.unlinkMultipleDevices}},queries:{getLoginDeviceLimitFlow:{selector:o.viewedLoginDeviceLimitFlowSelector}},liveQueries:{liveLoginDeviceLimitFlow:{operator:s.loginDeviceLimitFlowView$}}}},6629:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.LoginDeviceLimitFlowStage=t.USER_STILL_OVERFLOWING=t.AuthenticationCode=t.SsoMigrationServerMethod=t.LoginViaSsoCode=void 0;var a=r(92029);Object.defineProperty(t,"LoginViaSsoCode",{enumerable:!0,get:function(){return a.LoginViaSsoCode}}),Object.defineProperty(t,"SsoMigrationServerMethod",{enumerable:!0,get:function(){return a.SsoMigrationServerMethod}});var i=r(25576);Object.defineProperty(t,"AuthenticationCode",{enumerable:!0,get:function(){return i.AuthenticationCode}});var s=r(93841);Object.defineProperty(t,"USER_STILL_OVERFLOWING",{enumerable:!0,get:function(){return s.USER_STILL_OVERFLOWING}});var c=r(31240);Object.defineProperty(t,"LoginDeviceLimitFlowStage",{enumerable:!0,get:function(){return c.LoginDeviceLimitFlowStage}}),o(r(37888),t),o(r(10137),t),o(r(39460),t),o(r(61268),t)},20938:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unlinkMultipleDevicesErrorReached=t.multipleDevicesLimitStillReached=t.oneDeviceLimitStillReached=t.sessionOpenedAfterDeviceLimitRemoval=t.refreshDeviceLimitStatusFailed=t.deviceLimitRemoved=t.deviceLimitStatusUpdated=t.unlinkingSucceeded=t.unlinkingFailed=t.unlinkingMultipleDevicesRequested=t.unlinkPreviousDeviceRequested=t.multipleDevicesLimitReached=t.oneDeviceLimitReached=t.UNLINK_MULTIPLE_DEVICES_ERROR=t.UNLINKING_SUCCEEDED=t.UNLINKING_FAILED=t.UNLINK_MULTIPLE_DEVICES_REQUESTED=t.UNLINK_PREVIOUS_DEVICE_REQUESTED=t.SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL=t.REFRESH_DEVICE_LIMIT_STATUS_FAILED=t.MULTIPLE_DEVICES_LIMIT_STILL_REACHED=t.MULTIPLE_DEVICES_LIMIT_REACHED=t.ONE_DEVICE_LIMIT_STILL_REACHED=t.ONE_DEVICE_LIMIT_REACHED=t.DEVICE_LIMIT_STATUS_UPDATED=t.DEVICE_LIMIT_REMOVED=void 0,t.DEVICE_LIMIT_REMOVED="DEVICE_LIMIT_REMOVED",t.DEVICE_LIMIT_STATUS_UPDATED="DEVICE_LIMIT_STATUS_UPDATED",t.ONE_DEVICE_LIMIT_REACHED="ONE_DEVICE_LIMIT_REACHED",t.ONE_DEVICE_LIMIT_STILL_REACHED="ONE_DEVICE_LIMIT_STILL_REACHED",t.MULTIPLE_DEVICES_LIMIT_REACHED="MULTIPLE_DEVICES_LIMIT_REACHED",t.MULTIPLE_DEVICES_LIMIT_STILL_REACHED="MULTIPLE_DEVICES_LIMIT_STILL_REACHED",t.REFRESH_DEVICE_LIMIT_STATUS_FAILED="REFRESH_DEVICE_LIMIT_STATUS_FAILED",t.SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL="SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL",t.UNLINK_PREVIOUS_DEVICE_REQUESTED="UNLINK_PREVIOUS_DEVICE_REQUESTED",t.UNLINK_MULTIPLE_DEVICES_REQUESTED="UNLINK_MULTIPLE_DEVICES_REQUESTED",t.UNLINKING_FAILED="UNLINKING_FAILED",t.UNLINKING_SUCCEEDED="UNLINKING_SUCCEEDED",t.UNLINK_MULTIPLE_DEVICES_ERROR="UNLINK_MULTIPLE_DEVICES_ERROR",t.oneDeviceLimitReached=e=>({type:t.ONE_DEVICE_LIMIT_REACHED,deviceLimitStatus:e.deviceLimitStatus,login:e.login,subscriptionCode:e.subscriptionCode}),t.multipleDevicesLimitReached=e=>({type:t.MULTIPLE_DEVICES_LIMIT_REACHED,deviceLimitStatus:e.deviceLimitStatus,login:e.login,subscriptionCode:e.subscriptionCode}),t.unlinkPreviousDeviceRequested=()=>({type:t.UNLINK_PREVIOUS_DEVICE_REQUESTED}),t.unlinkingMultipleDevicesRequested=()=>({type:t.UNLINK_MULTIPLE_DEVICES_REQUESTED}),t.unlinkingFailed=()=>({type:t.UNLINKING_FAILED}),t.unlinkingSucceeded=()=>({type:t.UNLINKING_SUCCEEDED}),t.deviceLimitStatusUpdated=()=>({type:t.DEVICE_LIMIT_STATUS_UPDATED}),t.deviceLimitRemoved=()=>({type:t.DEVICE_LIMIT_REMOVED}),t.refreshDeviceLimitStatusFailed=()=>({type:t.REFRESH_DEVICE_LIMIT_STATUS_FAILED}),t.sessionOpenedAfterDeviceLimitRemoval=()=>({type:t.SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL}),t.oneDeviceLimitStillReached=e=>({type:t.ONE_DEVICE_LIMIT_STILL_REACHED,updatedDeviceLimitStatus:e.updatedDeviceLimitStatus}),t.multipleDevicesLimitStillReached=e=>({type:t.MULTIPLE_DEVICES_LIMIT_STILL_REACHED,updatedDeviceLimitStatus:e.updatedDeviceLimitStatus}),t.unlinkMultipleDevicesErrorReached=e=>({type:t.UNLINK_MULTIPLE_DEVICES_ERROR,retryPayload:e.retryPayload})},15868:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyLoginDeviceLimitFlowState=void 0;const n=r(20938),o=r(31240),a=r(10984),i=r(17825),s=(e,t)=>t.type===n.ONE_DEVICE_LIMIT_REACHED?(0,a.atOneDeviceLimitReachedStage)({login:t.login,subscriptionCode:t.subscriptionCode,deviceLimitStatus:t.deviceLimitStatus}):t.type===n.MULTIPLE_DEVICES_LIMIT_REACHED?(0,a.atMultipleDevicesLimitReachedStage)({login:t.login,subscriptionCode:t.subscriptionCode,deviceLimitStatus:t.deviceLimitStatus}):e,c=(e,t)=>{switch(t.type){case n.UNLINK_PREVIOUS_DEVICE_REQUESTED:return(0,a.atUnlinkingAndOpeningSessionStage)(e);case n.DEVICE_LIMIT_STATUS_UPDATED:return(0,a.atRefreshingDeviceLimitStatusStage)(e)}return e},u=(e,t)=>{switch(t.type){case n.UNLINK_MULTIPLE_DEVICES_REQUESTED:return(0,a.atUnlinkingAndOpeningSessionStage)(e);case n.DEVICE_LIMIT_STATUS_UPDATED:return(0,a.atRefreshingDeviceLimitStatusStage)(e)}return e},l=(e,t)=>{switch(t.type){case n.UNLINK_MULTIPLE_DEVICES_ERROR:return(0,a.atUnlinkMultipleDevicesErrorStage)({...e,retryPayload:t.retryPayload});case n.UNLINK_MULTIPLE_DEVICES_REQUESTED:return(0,a.atUnlinkingAndOpeningSessionStage)(e);case n.UNLINKING_SUCCEEDED:return(0,a.atDeviceLimitDoneStage)(e)}return e},d=e=>{const{deviceLimitStatus:t}=e;switch(t._tag){case"limitedToOneDevice":return(0,a.atOneDeviceLimitReachedStage)({...e,deviceLimitStatus:t});case"limitedToMultipleDevices":return(0,a.atMultipleDevicesLimitReachedStage)({...e,deviceLimitStatus:t});default:(0,i.assertUnreachable)(t)}},p=(e,t)=>{switch(t.type){case n.ONE_DEVICE_LIMIT_STILL_REACHED:return(0,a.atOneDeviceLimitReachedStage)({...e,deviceLimitStatus:t.updatedDeviceLimitStatus});case n.MULTIPLE_DEVICES_LIMIT_STILL_REACHED:return(0,a.atMultipleDevicesLimitReachedStage)({...e,deviceLimitStatus:t.updatedDeviceLimitStatus});case n.REFRESH_DEVICE_LIMIT_STATUS_FAILED:return d(e);case n.DEVICE_LIMIT_REMOVED:return(0,a.atOpeningSessionAfterDeviceLimitRemovalStage)(e)}return e},f=(e,t)=>{switch(t.type){case n.UNLINKING_SUCCEEDED:return(0,a.atDeviceLimitDoneStage)(e);case n.UNLINKING_FAILED:return d(e);case n.UNLINK_MULTIPLE_DEVICES_ERROR:return(0,a.atUnlinkMultipleDevicesErrorStage)({...e,retryPayload:t.retryPayload})}return e};t.default=(e={flow:null},t)=>{if(null===e.flow)return{flow:s(null,t)};switch(e.flow.name){case o.LoginDeviceLimitFlowStage.OneDeviceLimitReached:return{flow:c(e.flow,t)};case o.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError:return{flow:l(e.flow,t)};case o.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached:return{flow:u(e.flow,t)};case o.LoginDeviceLimitFlowStage.RefreshingDeviceLimitStatus:return{flow:p(e.flow,t)};case o.LoginDeviceLimitFlowStage.UnlinkingAndOpeningSession:return{flow:f(e.flow,t)};case o.LoginDeviceLimitFlowStage.OpeningSessionAfterDeviceLimitRemoval:case o.LoginDeviceLimitFlowStage.DeviceLimitDone:return e;default:return(0,i.assertUnreachable)(e.flow)}},t.getEmptyLoginDeviceLimitFlowState=function(){return{flow:null}}},36172:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.abortDeviceLimitFlow=void 0;const n=r(34029),o=r(20698),a=r(70252);t.abortDeviceLimitFlow=async function(e){const{sessionService:t}=e;try{return await t.getInstance().user.closeSession(),{success:!0}}catch(e){const t=(0,o.augmentDeviceLimitError)(e,"abortDeviceLimitFlow");return(0,a.sendExceptionLog)({error:t}),{success:!1,error:{code:n.AbortDeviceLimitFlowError.UnexpectedError}}}}},31859:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPairingGroupDevices=t.findMyPairingGroup=t.isDevicePartOfPairingGroup=t.isDesktopPlatform=void 0;const n=r(58470);t.isDesktopPlatform=e=>e===n.Platform.DesktopLegacyWindows||e===n.Platform.DesktopLegacyMacOS||e===n.Platform.DesktopUWP,t.isDevicePartOfPairingGroup=(e,t)=>t.devices.includes(e.deviceId),t.findMyPairingGroup=(e,t)=>e.find((e=>e.pairingGroupUUID===t)),t.getPairingGroupDevices=(e,t)=>t.filter((({deviceId:t})=>e.devices.includes(t)))},32573:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDeviceInfoService=void 0;const n=r(16516),o=r(46298),a=r(58470),i={[a.Platform.Android]:"server_android",[a.Platform.CarbonSimulator]:"server_carbon_simulator",[a.Platform.CarbonTests]:"server_carbon_tests",[a.Platform.CarbonUnknown]:"server_carbon_unknown",[a.Platform.DesktopLegacyMacOS]:"server_macosx",[a.Platform.DesktopLegacyWindows]:"server_win",[a.Platform.DesktopUWP]:"desktop_win",[a.Platform.IPad]:"server_ipad",[a.Platform.IPhone]:"server_iphone",[a.Platform.IPod]:"server_ipod",[a.Platform.StandaloneExtension]:"server_standalone",[a.Platform.TeamAdminConsole]:"server_tac",[a.Platform.WebApp]:"server_leeloo",[a.Platform.WebAppDev]:"server_leeloo_dev"},s=(0,n.invertObj)(i),c=e=>{return{deviceId:e.deviceId,deviceName:e.deviceName,devicePlatform:(t=e.devicePlatform,s[t]),lastActivityDate:e.lastActivityDateUnix,isBucketOwner:e.isBucketOwner,temporary:e.temporary};var t},u=e=>({pairingGroupUUID:e.pairingGroupUUID,devices:e.devices,isBucketOwner:e.isBucketOwner});t.makeDeviceInfoService=e=>({getDevicesInfo:t=>(async(e,t)=>{const r=await o.listDevices(e,t);if(o.isApiError(r))throw new Error(`Failed to get devices: ${r.message}`);return{devices:r.devices.map(c),pairingGroups:r.pairingGroups.map(u)}})(e,t)})},58470:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Platform=void 0,function(e){e[e.Android=0]="Android",e[e.CarbonSimulator=1]="CarbonSimulator",e[e.CarbonTests=2]="CarbonTests",e[e.CarbonUnknown=3]="CarbonUnknown",e[e.DesktopLegacyMacOS=4]="DesktopLegacyMacOS",e[e.DesktopLegacyWindows=5]="DesktopLegacyWindows",e[e.DesktopUWP=6]="DesktopUWP",e[e.IPad=7]="IPad",e[e.IPhone=8]="IPhone",e[e.IPod=9]="IPod",e[e.StandaloneExtension=10]="StandaloneExtension",e[e.TeamAdminConsole=11]="TeamAdminConsole",e[e.WebApp=12]="WebApp",e[e.WebAppDev=13]="WebAppDev"}(t.Platform||(t.Platform={}))},89961:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPlatformView=void 0;const n=r(58470),o=r(10137),a={[n.Platform.Android]:o.PlatformView.Android,[n.Platform.CarbonSimulator]:o.PlatformView.Other,[n.Platform.CarbonTests]:o.PlatformView.Other,[n.Platform.CarbonUnknown]:o.PlatformView.Other,[n.Platform.DesktopLegacyMacOS]:o.PlatformView.DesktopMacOS,[n.Platform.DesktopLegacyWindows]:o.PlatformView.DesktopWindows,[n.Platform.DesktopUWP]:o.PlatformView.DesktopWindows,[n.Platform.IPad]:o.PlatformView.IPad,[n.Platform.IPhone]:o.PlatformView.IPhone,[n.Platform.IPod]:o.PlatformView.IPod,[n.Platform.StandaloneExtension]:o.PlatformView.StandaloneExtension,[n.Platform.TeamAdminConsole]:o.PlatformView.TeamAdminConsole,[n.Platform.WebApp]:o.PlatformView.WebApp,[n.Platform.WebAppDev]:o.PlatformView.WebApp};t.toPlatformView=e=>a[e]},10137:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformView=void 0,function(e){e.Android="android",e.DesktopMacOS="macosx",e.DesktopWindows="windows",e.IPad="ipad",e.IPhone="iphone",e.IPod="ipod",e.Other="other",e.StandaloneExtension="saex",e.TeamAdminConsole="tac",e.WebApp="webapp"}(t.PlatformView||(t.PlatformView={}))},49154:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceLimitCapabilityEventBus=void 0,t.DeviceLimitCapabilityEventBus=class{constructor(e,t){this.services=e,this.connector=t}register(e){const t=[];return Object.keys(e).forEach((r=>{const{handler:n}=e[r],o=this.connector[r].on((()=>n(this.services)));t.push(o)})),()=>{t.forEach((e=>e()))}}}},27479:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceLimitFlowEventsManager=t.DeviceLimitFlowEventsManager=void 0;const n=r(28354),o=r(63093),a=r(3343);class i{constructor(e){this.registrations=[],e.getState$().pipe((0,o.loginDeviceLimitFlow$)(),(0,a.pairwise)()).subscribe(this.onTransition.bind(this))}addEventListener(e,t){const r=(0,n.v4)();return this.registrations.push({id:r,event:e,listener:t}),r}removeTransitionEventListener(e){this.registrations=this.registrations.filter((t=>t.id!==e))}onTransition([e,t]){this.registrations.forEach((({event:r,listener:n})=>{("exit"===r.type&&r.from===e?.name||"entry"===r.type&&r.to===t?.name)&&n(r)}))}}let s;t.DeviceLimitFlowEventsManager=i,t.getDeviceLimitFlowEventsManager=e=>(s||(s=new i(e)),s)},10984:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.atUnlinkMultipleDevicesErrorStage=t.atDeviceLimitDoneStage=t.atRefreshingDeviceLimitStatusStage=t.atOpeningSessionAfterDeviceLimitRemovalStage=t.atUnlinkingAndOpeningSessionStage=t.atMultipleDevicesLimitReachedStage=t.atOneDeviceLimitReachedStage=void 0;const n=r(31240);t.atOneDeviceLimitReachedStage=e=>({...e,name:n.LoginDeviceLimitFlowStage.OneDeviceLimitReached}),t.atMultipleDevicesLimitReachedStage=e=>({...e,name:n.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached}),t.atUnlinkingAndOpeningSessionStage=e=>({...e,name:n.LoginDeviceLimitFlowStage.UnlinkingAndOpeningSession}),t.atOpeningSessionAfterDeviceLimitRemovalStage=e=>({...e,name:n.LoginDeviceLimitFlowStage.OpeningSessionAfterDeviceLimitRemoval}),t.atRefreshingDeviceLimitStatusStage=e=>({...e,name:n.LoginDeviceLimitFlowStage.RefreshingDeviceLimitStatus}),t.atDeviceLimitDoneStage=e=>({...e,name:n.LoginDeviceLimitFlowStage.DeviceLimitDone}),t.atUnlinkMultipleDevicesErrorStage=e=>({...e,deviceLimitStatus:e.deviceLimitStatus,name:n.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError})},63093:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loginDeviceLimitFlowView$=t.loginDeviceLimitFlow$=void 0;const n=r(18948),o=r(3343),a=r(81080);t.loginDeviceLimitFlow$=()=>(0,n.pipe)((0,o.map)(a.loginDeviceLimitFlowSelector),(0,o.distinctUntilChanged)(((e,t)=>e?.name===t?.name))),t.loginDeviceLimitFlowView$=()=>(0,n.pipe)((0,o.map)(a.viewedLoginDeviceLimitFlowSelector),(0,o.distinctUntilChanged)(((e,t)=>e?.name===t?.name)))},81080:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewedLoginDeviceLimitFlowSelector=t.loginDeviceLimitFlowSelector=void 0;const n=r(46802);t.loginDeviceLimitFlowSelector=e=>e.userSession.loginDeviceLimitFlow.flow,t.viewedLoginDeviceLimitFlowSelector=e=>{const r=(0,t.loginDeviceLimitFlowSelector)(e);return r?(0,n.toLoginDeviceLimitFlowView)(r):null}},31240:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginDeviceLimitFlowStage=void 0,function(e){e.OneDeviceLimitReached="OneDeviceLimitReached",e.MultipleDevicesLimitReached="MultipleDevicesLimitReached",e.UnlinkingAndOpeningSession="UnlinkingAndOpeningSession",e.UnlinkingMultipleDevicesError="UnlinkingMultipleDevicesError",e.RefreshingDeviceLimitStatus="RefreshingDeviceLimitStatus",e.OpeningSessionAfterDeviceLimitRemoval="OpeningSessionAfterDeviceLimitRemoval",e.DeviceLimitDone="DeviceLimitDone"}(t.LoginDeviceLimitFlowStage||(t.LoginDeviceLimitFlowStage={}))},46802:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toLoginDeviceLimitFlowView=t.toMultipleDevicesLimitErrorStageView=t.toMultipleDevicesLimitReachedStageView=void 0;const n=r(31240),o=r(35520),a=r(88068),i=r(17825);t.toMultipleDevicesLimitReachedStageView=e=>({name:n.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached,login:e.login,devicesToDeactivate:e.deviceLimitStatus.devices.map(a.toDeviceToDeactivateInfoView),subscriptionCode:e.subscriptionCode}),t.toMultipleDevicesLimitErrorStageView=e=>({name:n.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError,login:e.login,retryPayload:e.retryPayload,subscriptionCode:e.subscriptionCode}),t.toLoginDeviceLimitFlowView=e=>{switch(e.name){case n.LoginDeviceLimitFlowStage.OneDeviceLimitReached:return r=e,{name:n.LoginDeviceLimitFlowStage.OneDeviceLimitReached,login:r.login,previousDevice:(0,o.toPreviousDeviceInfo)(r.deviceLimitStatus.bucketOwner),subscriptionCode:r.subscriptionCode};case n.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached:return(0,t.toMultipleDevicesLimitReachedStageView)(e);case n.LoginDeviceLimitFlowStage.UnlinkingAndOpeningSession:case n.LoginDeviceLimitFlowStage.DeviceLimitDone:case n.LoginDeviceLimitFlowStage.RefreshingDeviceLimitStatus:case n.LoginDeviceLimitFlowStage.OpeningSessionAfterDeviceLimitRemoval:return{name:e.name,login:e.login};case n.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError:return(0,t.toMultipleDevicesLimitErrorStageView)(e);default:return(0,i.assertUnreachable)(e)}var r}},37888:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},85822:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startDeviceLimitFlow=t.getDeviceLimitStatus=t.attemptGetDeviceLimitStatus=void 0;const n=r(88205),o=r(16593),a=r(15718),i=r(82652),s=r(22589),c=r(32573),u=r(36077),l=r(20938),d=r(90622),p=r(56915),f=r(38981),g=r(92263),m=r(14656);t.attemptGetDeviceLimitStatus=async e=>{try{return await Promise.race([(0,t.getDeviceLimitStatus)(e),new Promise((e=>setTimeout((()=>e((0,u.noDeviceLimit)())),3e3)))])}catch(e){return(e=>{if(!(0,g.isCarbonError)(e,m.HttpError,m.HttpErrorCode.NETWORK_ERROR)&&!(0,g.isCarbonError)(e,m.HttpError,m.HttpErrorCode.CONNECTION_ABORTED)&&!(0,g.isCarbonError)(e,m.HttpError,m.HttpErrorCode.CONNECTION_TIMED_OUT))throw e;return(0,u.noDeviceLimit)()})(e)}},t.getDeviceLimitStatus=async e=>{const{storeService:t}=e,r=t.getState();if((0,f.isSSOUserSelector)(r))return(0,u.noDeviceLimit)();const l=(0,n.featuresSelector)(r),g=(0,a.pairingIdSelector)(r),m=(0,o.premiumStatusSelector)(r),h=(0,o.userLoginSelector)(r),y=(0,c.makeDeviceInfoService)(t),S=await y.getDevicesInfo(h),v=(0,p.getDeviceIdSelector)(r,h),E=(0,d.deviceKeysSelector)(t.getState()),A=(0,i.isOneDeviceLimitApplicable)(l,g,S,v,m);if("limitedToOneDevice"===A._tag)return(0,u.limitedToOneDevice)(A.bucketOwner);const _=(0,s.isMultipleDevicesLimitApplicable)(S,m,E);return"limitedToMultipleDevices"===_._tag?(0,u.limitedToMultipleDevices)(_.devices):(0,u.noDeviceLimit)()},t.startDeviceLimitFlow=async(e,t)=>{const{sessionService:r,storeService:n}=e,a=n.getState(),i=(0,o.userLoginSelector)(a),s=r.getInstance().user,c=await s.fetchSubscriptionCode();if("limitedToOneDevice"===t._tag){const e=(0,l.oneDeviceLimitReached)({deviceLimitStatus:t,subscriptionCode:c,login:i});n.dispatch(e)}else if("limitedToMultipleDevices"===t._tag){const e=(0,l.multipleDevicesLimitReached)({deviceLimitStatus:t,subscriptionCode:c,login:i});n.dispatch(e)}}},36077:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noDeviceLimit=t.limitedToMultipleDevices=t.limitedToOneDevice=void 0,t.limitedToOneDevice=e=>({_tag:"limitedToOneDevice",bucketOwner:e}),t.limitedToMultipleDevices=e=>({_tag:"limitedToMultipleDevices",devices:e}),t.noDeviceLimit=()=>({_tag:"noDeviceLimit"})},34029:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbortDeviceLimitFlowError=void 0,function(e){e.UnexpectedError="UNEXPECTED_ERROR"}(t.AbortDeviceLimitFlowError||(t.AbortDeviceLimitFlowError={}))},75903:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshDeviceLimitStatus=void 0;const n=r(70252),o=r(88610),a=r(20698),i=r(20938),s=r(85822);t.refreshDeviceLimitStatus=async e=>{const{sessionService:t,storeService:r}=e;try{const c=t.getInstance().user;await c.refreshSessionData();const u=await(0,s.getDeviceLimitStatus)(e);if("noDeviceLimit"===u._tag)r.dispatch((0,i.deviceLimitRemoved)()),await(async e=>{const{sessionService:t,storeService:r}=e;try{await(0,o.sessionDidOpen)(e),r.dispatch((0,i.sessionOpenedAfterDeviceLimitRemoval)())}catch(r){(0,a.notifyDeviceLimitError)(e,r);const o=(0,a.augmentDeviceLimitError)(r,"openSessionAfterDeviceLimitRemoval");(0,n.sendExceptionLog)({error:o}),t.close()}})(e);else if("limitedToOneDevice"===u._tag){const e=(0,i.oneDeviceLimitStillReached)({updatedDeviceLimitStatus:u});r.dispatch(e)}else if("limitedToMultipleDevices"===u._tag){const e=(0,i.multipleDevicesLimitStillReached)({updatedDeviceLimitStatus:u});r.dispatch(e)}}catch(e){r.dispatch((0,i.refreshDeviceLimitStatusFailed)());const t=(0,a.augmentDeviceLimitError)(e,"refreshDeviceLimitStatus");(0,n.sendExceptionLog)({error:t})}}},20698:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.augmentDeviceLimitError=t.notifyDeviceLimitError=void 0;const n=r(16373),o=r(40042),a=e=>"object"==typeof e&&e instanceof Error,i=e=>a(e)?e.message:"No valid error reported";t.notifyDeviceLimitError=async function(e,t){const{storeService:r}=e,a=(0,n.addNewLoginNotification)({type:o.LoginNotificationType.UNKNOWN_ERROR,message:i(t)});r.dispatch(a)},t.augmentDeviceLimitError=function(e,t){const r=`[DeviceLimit] - ${t}: ${i(e)}`,n=new Error(r);return a(e)&&(n.stack=e.stack),n}},22589:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMultipleDevicesLimitApplicable=void 0;const n=r(87314),o=(e,t)=>t.lastActivityDate-e.lastActivityDate;t.isMultipleDevicesLimitApplicable=(e,t,r)=>{if((t?.capabilities?.devicesLimit?.info?.limit||0)<=1)return(0,n.notLimitedToMultipleDevices)();const{nonPairedDevices:a,pairingGroups:i}=(({pairingGroups:e,devices:t})=>{const r=t.filter((t=>!e.find((e=>e.devices.includes(t.deviceId)))&&t),[]);return{pairingGroups:e,nonPairedDevices:r}})(e);if(t.capabilities.devicesLimit.info.limit<a.length+i.length){const t=(({pairingGroups:e,devices:t,nonPairedDevices:r,deviceKeys:n})=>{const a=[...t].sort(o),i=[];for(const r of e){let e;e=r.devices.includes(n?.accessKey)?{...t.find((e=>e.deviceId===n?.accessKey)),isCurrentDevice:!0}:a.find((e=>r.devices.includes(e.deviceId))),i.push({...e,deviceId:r.pairingGroupUUID,isPairingGroup:!0})}const s=r.map((e=>e.deviceId===n?.accessKey?{...e,isCurrentDevice:!0}:e));return[...i,...s].sort(o)})({devices:e.devices,nonPairedDevices:a,pairingGroups:i,deviceKeys:r});return(0,n.limitedToMultipleDevices)(t)}return(0,n.notLimitedToMultipleDevices)()}},87314:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.limitedToMultipleDevices=t.notLimitedToMultipleDevices=void 0,t.notLimitedToMultipleDevices=()=>({_tag:"notLimitedToMultipleDevices"}),t.limitedToMultipleDevices=e=>({_tag:"limitedToMultipleDevices",devices:e})},93841:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UNEXPECTED_ERROR=t.USER_STILL_OVERFLOWING=void 0,t.USER_STILL_OVERFLOWING="USER_STILL_OVERFLOWING",t.UNEXPECTED_ERROR="UNEXPECTED_ERROR"},88068:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toDeviceToDeactivateInfoView=void 0;const n=r(89961),o=r(10137);t.toDeviceToDeactivateInfoView=e=>({...e,platform:e.devicePlatform?(0,n.toPlatformView)(e.devicePlatform):o.PlatformView.Other})},61268:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},82652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMonoBucketOwner=t.isOneDeviceLimitApplicable=void 0;const n=r(16516),o=r(31859),a=r(44179);function i(e){const{devices:t,pairingGroups:r}=e;let a=null,i=t.find((e=>e.isBucketOwner))??null;if(!i&&(a=r.find((e=>e.isBucketOwner))??null,a)){const e=(0,o.getPairingGroupDevices)(a,t),r=(e,t)=>e.lastActivityDate-t.lastActivityDate;e.sort(r);const s=e=>Boolean(e.devicePlatform&&(0,o.isDesktopPlatform)(e.devicePlatform)),c=(0,n.partition)(s,e);i=(0,n.unnest)(c)[0]||null}return{bucketOwner:i,bucketOwnerPairingGroup:a}}t.isOneDeviceLimitApplicable=function(e,t,r,n,s){const{bucketOwner:c,bucketOwnerPairingGroup:u}=i(r),{pairingGroups:l}=r;if(!e||!e.MonoBucket_carbon_release)return(0,a.notLimitedToOneDevice)();if(!Boolean(1===s?.capabilities?.devicesLimit?.info?.limit))return(0,a.notLimitedToOneDevice)();const d=!(!u||!t)&&u.pairingGroupUUID===t,p=(0,o.findMyPairingGroup)(l,t??""),f=!(!c||!p)&&(0,o.isDevicePartOfPairingGroup)(c,p);return!c||c.deviceId===n||d||f?(0,a.notLimitedToOneDevice)():(0,a.limitedToOneDevice)(c)},t.getMonoBucketOwner=i},44179:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notLimitedToOneDevice=t.limitedToOneDevice=void 0,t.limitedToOneDevice=e=>({_tag:"limitedToOneDevice",bucketOwner:e}),t.notLimitedToOneDevice=()=>({_tag:"notLimitedToOneDevice"})},93298:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnlinkPreviousDeviceError=void 0,function(e){e.UnexpectedError="UNEXPECTED_ERROR"}(t.UnlinkPreviousDeviceError||(t.UnlinkPreviousDeviceError={}))},35520:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPreviousDeviceInfo=void 0;const n=r(89961),o=r(10137);t.toPreviousDeviceInfo=({deviceName:e,devicePlatform:t,lastActivityDate:r})=>({name:e??"",platform:t?(0,n.toPlatformView)(t):o.PlatformView.Other,lastActive:r})},39460:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},57634:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupDeviceLimitEventBus=void 0;const n=r(31240),o=r(75903),a=r(20938),i={deviceLimitCapabilityUpdated:{handler:e=>{const t=(0,a.deviceLimitStatusUpdated)();e.storeService.dispatch(t),(0,o.refreshDeviceLimitStatus)(e)}}},s={type:"entry",to:n.LoginDeviceLimitFlowStage.OneDeviceLimitReached},c={type:"exit",from:n.LoginDeviceLimitFlowStage.OneDeviceLimitReached},u={type:"entry",to:n.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached},l={type:"exit",from:n.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached};t.setupDeviceLimitEventBus=(e,t)=>{let r;const n=()=>r=e.register(i),o=()=>r();t.addEventListener(s,n),t.addEventListener(c,o),t.addEventListener(u,n),t.addEventListener(l,o)}},15876:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unlinkMultipleDevices=void 0;const n=r(16593),o=r(46298),a=r(22589),i=r(88610),s=r(16373),c=r(38250),u=r(32573),l=r(20938),d=r(20698),p=r(70252),f=r(93841),g=r(90622);t.unlinkMultipleDevices=async(e,t)=>{const{storeService:r,sessionService:m}=e,h=r.getState(),y=(0,n.userLoginSelector)(h);r.dispatch((0,l.unlinkingMultipleDevicesRequested)());const S=await(async(e,t,r)=>{const{storeService:n}=e,a=e=>{const t=(0,l.unlinkMultipleDevicesErrorReached)({retryPayload:r});return n.dispatch(t),{success:!1,error:{code:e.code}}};try{const e=await(0,o.deactivateDevices)(n,t,r);if((0,o.isApiError)(e)&&e.code!==o.CLIENT_DEVICES_NOT_FOUND&&e.code!==o.PAIRING_GROUPS_NOT_FOUND)return a(e)}catch(e){return a(e)}})(e,y,t);if(S)return S;const v=await(async(e,t)=>{const{storeService:r}=e,o=r.getState(),i=(0,n.premiumStatusSelector)(o),d=(0,u.makeDeviceInfoService)(r),p=await d.getDevicesInfo(t),m=(0,g.deviceKeysSelector)(r.getState()),h=(0,a.isMultipleDevicesLimitApplicable)(p,i,m);if("limitedToMultipleDevices"===h._tag){r.dispatch((0,l.deviceLimitStatusUpdated)());const e=(0,s.addNewLoginNotification)({type:c.LoginNotificationType.UNKNOWN_ERROR,message:`${f.USER_STILL_OVERFLOWING}`});r.dispatch(e);const t=(0,l.multipleDevicesLimitStillReached)({updatedDeviceLimitStatus:{_tag:"limitedToMultipleDevices",devices:h.devices}});return r.dispatch(t),{success:!1,error:{code:f.USER_STILL_OVERFLOWING}}}return!1})(e,y);if(v)return v;try{return await(0,i.sessionDidOpen)(e),r.dispatch((0,l.unlinkingSucceeded)()),{success:!0}}catch(t){return m.close(),(0,d.notifyDeviceLimitError)(e,t),r.dispatch((0,l.unlinkingFailed)()),(0,p.sendExceptionLog)({error:(0,d.augmentDeviceLimitError)(t,"unlinkMultipleDevices")}),{success:!1,error:{code:f.UNEXPECTED_ERROR}}}}},18039:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unlinkPreviousDevice=void 0;const n=r(88610),o=r(20938),a=r(93298),i=r(20698),s=r(70252);t.unlinkPreviousDevice=async function(e){const{storeService:t}=e;try{return t.dispatch((0,o.unlinkPreviousDeviceRequested)()),await(0,n.sessionDidOpen)(e),t.dispatch((0,o.unlinkingSucceeded)()),{success:!0}}catch(r){t.dispatch((0,o.unlinkingFailed)()),(0,i.notifyDeviceLimitError)(e,r);const n=(0,i.augmentDeviceLimitError)(r,"unlinkPreviousDevice");return(0,s.sendExceptionLog)({error:n}),{success:!1,error:{code:a.UnlinkPreviousDeviceError.UnexpectedError}}}}},88610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DifferentLoginAuthorized=t.sessionDidOpen=t.openSessionWithMasterPassword=t.updateSessionUponLoginAction=t.makeLoginController=void 0;const n=r(10203),o=r(53576),a=r(28096),i=r(70414),s=r(28287),c=r(89160),u=r(28096),l=r(16356),d=r(86797),p=r(59489),f=r(2246),g=r(25576),m=r(5464),h=r(76089),y=r(28445),S=r(64910),v=r(33769),E=r(19399),A=r(56915),_=r(62844),b=r(52653),T=r(75226),I=r(71938),w=r(63739),C=r(658),O=r(15606),D=r(16593),P=r(38981),N=r(29303),R=r(27885),U=r(61740),L=r(7624),M=r(17825),k=r(69763),B=r(15718),F=r(85822),x=r(61259),G=r(35924),j=r(33831),K=r(46298),$=r(98226);async function V(e,t,r,n){const{storeService:o,sessionService:i}=e;if(oe(o))throw new Error(a.AuthenticationCode[a.AuthenticationCode.SESSION_ALREADY_OPENED]);if(""===t)throw new Error(a.AuthenticationCode[a.AuthenticationCode.EMPTY_LOGIN]);if(!(0,y.isValidLogin)(t))throw new Error(a.AuthenticationCode[a.AuthenticationCode.INVALID_LOGIN]);if(o.dispatch((0,G.updateLoginStepInfoLogin)(t)),""===r)throw new Error(a.AuthenticationCode[a.AuthenticationCode.EMPTY_MASTER_PASSWORD]);let s=se.FORBIDDEN;if(n&&void 0!==n.authorizeDifferentLogin&&(s=n.authorizeDifferentLogin),o.getUserLogin()&&o.getUserLogin()!==t&&(o.isAuthenticated()&&await i.close(),s===se.FORBIDDEN))throw new Error(a.AuthenticationCode[a.AuthenticationCode.DIFFERENT_LOGIN_PROVIDED_WITH_TOKEN_OR_OTP]);o.hasSessionId()&&o.getUserLogin()===t&&r&&o.dispatch((0,l.updateMasterPassword)(r));const c=n&&n.serverKey;if(c&&o.dispatch((0,l.updateServerKey)(c)),o.getUserLogin()!==t||void 0===r){const e=(0,P.ssoSettingsSelector)(o.getState());await i.close(),i.setInstance(t,r),e.ssoToken&&o.dispatch((0,L.storeSSOSettings)(e))}}async function H(e,t,r,n,s,c,l){try{const{storeService:d,sessionService:p}=e,f=(0,y.normalizeEmail)(t);if(await V(e,f,r),await ae(n),await p.getInstance().user.accountExistsLocally())throw new Error("Unexpected local account presence during OTP1 step");if(await i.registerDevice(d,s,(0,g.makeOTP)(n),l??!1,c)!==a.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from device registration");return r?W(e,f,r,{isDataPersisted:s}):(u.triggerAskMasterPassword(f),o.LoginResultEnum.MasterPasswordMissing)}catch(t){throw te(t)&&(0,C.sendOTPForNewDeviceErrorLog)(e,l),u.triggerOpenSessionFailed(t),t}}async function W(e,t,r,n,s){try{const{storeService:u,sessionService:d,masterPasswordEncryptorService:p,localDataEncryptorService:f,remoteDataEncryptorService:m,localStorageService:h}=e;let E=n&&n.isDataPersisted;s?.(`isDataPersisted? ${E}`),void 0===E&&(E=u.getAccountInfo().persistData);const A=n&&n.serverKey;s?.(`serverKey null, undefined, or empty? ${!A}`);const _=Boolean(n&&n.rememberMasterPassword);s?.(`rememberMasterPassword? ${_}`);const b=Boolean(n?.shouldRememberMeForSSO);t=(0,y.normalizeEmail)(t),s?.("updateSessionUponLoginAction START"),await V(e,t,r,{authorizeDifferentLogin:se.AUTHORIZED,serverKey:A}),s?.("updateSessionUponLoginAction SUCCESS");const T=await d.getInstance().user.accountExistsLocally();if(s?.(`accountExistLocally? ${T}`),T){const r=h.getInstance(),n=await r.doesLocalKeyExist();if(s?.(`doesLocalKeyExist? ${n}`),n)try{const e=await r.getLocalKey();e.length<64&&(s?.("localKeyMigrationRequired? true"),u.dispatch((0,l.updateIsLocalKeyMigrationRequired)(!0)));const t="";s?.("set localDataEncryptorService START");const n=(0,S.getNoDerivationCryptoConfig)();f.setInstance({raw:e},t,n),s?.("set localDataEncryptorService SUCCESS"),s?.("updateLocalKey START"),u.dispatch((0,l.updateLocalKey)(e)),s?.("updateLocalKey SUCCESS")}catch(t){throw(0,C.sendMasterPasswordLoginErrorLog)(e,!1),new Error(a.AuthenticationCode[a.AuthenticationCode.WRONG_PASSWORD])}s?.("loadLocalData START"),await c.loadLocalData(d,u,p),s?.("loadLocalData SUCCESS")}else{const e=u.getState(),t=(0,D.isRemoteKeyActivatedSelector)(e)&&m?m:p;s?.("validateMasterPassword START"),await i.validateMasterPassword(u,t),s?.("validateMasterPassword SUCCESS")}return s?.("rememberMasterPasswordUpdated START"),n?.rememberMasterPassword&&u.dispatch((0,l.rememberMasterPasswordUpdated)(_)),s?.("rememberMasterPasswordUpdated SUCCESS"),b&&u.dispatch((0,l.shouldRememberMeForSSOUpdated)(b)),T?(s?.("initLocalSession START"),(0,C.sendLoginSuccessEventLog)({services:e,isInitial:!1,isSsoLogin:n?.isSsoLogin,rememberMeType:n?.triggeredByRememberMeType??"disabled"}),await async function(e,t){const{sessionService:r,storeService:n,localDataEncryptorService:a}=e,i=r.getInstance().user,s=n.getState();(0,D.isLocalKeyMigrationRequiredSelector)(s)&&(await(0,v.generateLocalkeyAndSetupEncryptorService)(a,n,r,g.PersistData.PERSIST_DATA_YES),await i.persistAllData()),await i.refreshSessionData(),t?.requiredPermissions&&await z(n,r,t.requiredPermissions);const c=await(0,F.attemptGetDeviceLimitStatus)(e);return"noDeviceLimit"!==c._tag?(await(0,F.startDeviceLimitFlow)(e,c),o.LoginResultEnum.DeviceLimitFlow):J(e,t)}(e,n)):(s?.("initInitialSession START"),(0,C.sendLoginSuccessEventLog)({services:e,isInitial:!0,isSsoLogin:n?.isSsoLogin}),await X(e,E,n))}catch(t){throw t.message&&t.message===a.AuthenticationCode[a.AuthenticationCode.WRONG_PASSWORD]&&(0,C.sendMasterPasswordLoginErrorLog)(e,!0),u.triggerOpenSessionFailed(t),t}}t.makeLoginController=e=>({openSession:(t,r)=>async function(e,t,r){const{storeService:i,sessionService:s,wsService:c,storageService:l,applicationModulesAccess:p}=e;t=(0,y.normalizeEmail)(t);try{const f=r&&r.password;await V(e,t,f,{authorizeDifferentLogin:se.AUTHORIZED});let m=await s.getInstance().user.accountExistsLocally();switch(await ne(i,l,p,c,m)){case a.AuthenticationCode.SSO_LOGIN_BYPASS:return(0,C.sendAskSSOAuthenticationEventLog)(e,n.VerificationMode.None),u.triggerOpenSessionSsoRedirectionToIdpRequired((0,x.triggerServiceProviderUrlRedirect)(i.getState(),t),(0,P.ssoProviderInfoSelector)(i.getState()).isNitroProvider),o.LoginResultEnum.SSOLogin;case a.AuthenticationCode.ASK_MASTER_PASSWORD:if(!m)throw new Error("checkLogin should never return ASK_MASTER_PASSWORD for remote accounts");return f?W(e,t,f):((0,C.sendAskAuthenticationEventLog)(e,n.VerificationMode.None),i.dispatch((0,G.updateLoginStepInfoStep)(j.LoginStep.Password)),u.triggerAskMasterPassword(t),o.LoginResultEnum.MasterPasswordMissing);case a.AuthenticationCode.ASK_OTP:return(0,C.sendAskAuthenticationEventLog)(e,n.VerificationMode.Otp2),i.dispatch((0,G.updateLoginStepInfoStep)(j.LoginStep.OTP2)),u.triggerOpenSessionOTPSent({hasU2F:!1}),o.LoginResultEnum.OTPMissing;case a.AuthenticationCode.ASK_OTP_FOR_NEW_DEVICE:const{otpType:r}=i.getAccountInfo();return(0,C.sendAskAuthenticationEventLog)(e,r===d.OtpType.OTP_NEW_DEVICE?n.VerificationMode.Otp1:n.VerificationMode.Otp2),i.dispatch((0,G.updateLoginStepInfoStep)(j.LoginStep.OTP1)),u.triggerOpenSessionOTPForNewDeviceRequired(),o.LoginResultEnum.OTPMissing;case a.AuthenticationCode.ASK_TOKEN:if(m=await s.getInstance().user.accountExistsLocally(),m)throw new Error("Unexpected local account presence during email token step");return(0,C.sendAskAuthenticationEventLog)(e,n.VerificationMode.EmailToken),i.dispatch((0,G.updateLoginStepInfoStep)(j.LoginStep.OTPToken)),u.triggerOpenSessionTokenSent({isResendAction:!1}),o.LoginResultEnum.TokenMissing;case a.AuthenticationCode.USE_LOCAL_UKI:if((0,A.ukiSelector)(i.getState()))return X(e,g.PersistData.PERSIST_DATA_YES);throw new Error(a.AuthenticationCode[a.AuthenticationCode.UNKNOWN_UKI]);case a.AuthenticationCode.ASK_DASHLANE_AUTHENTICATOR:if(m=await s.getInstance().user.accountExistsLocally(),m)throw new Error("Unexpected local account presence during dashlane authenticator step");return(0,C.sendAskAuthenticationEventLog)(e,n.VerificationMode.AuthenticatorApp),i.dispatch((0,G.updateLoginStepInfoStep)(j.LoginStep.DashlaneAuthenticator)),u.triggerOpenSessionDashlaneAuthenticator(),o.LoginResultEnum.DashlaneAuthenticatorApprovalMissing;default:throw new Error(a.AuthenticationCode[a.AuthenticationCode.UNKNOWN_ERROR])}}catch(e){if(u.getAuthenticationCodeFromError(e)===a.AuthenticationCode.USER_DOESNT_EXIST){let r;try{r=await(0,K.requestAccountCreation)(i,{login:t})}catch{}if(void 0!==r&&!(0,K.isApiError)(r)&&r.ssoServiceProviderUrl){const e=new Error(a.AuthenticationCode[a.AuthenticationCode.USER_DOESNT_EXIST_SSO]);u.triggerOpenSessionFailed(e)}else u.triggerOpenSessionFailed(e)}else u.triggerOpenSessionFailed(e);throw e}}(e,t,r),openSessionWithToken:(t,r,n,s,c)=>async function(e,t,r,n,s,c){try{const{storeService:l,sessionService:d}=e;if(t=(0,y.normalizeEmail)(t),await V(e,t,r),await ie(n),await d.getInstance().user.accountExistsLocally())throw new Error(a.AuthenticationCode[a.AuthenticationCode.TOKEN_PROVIDED_FOR_LOCAL_SESSION]);if(await i.registerDevice(l,s,(0,g.makeEmailToken)(n),!1,c)!==a.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from verifyOtpOrToken");return r?W(e,t,r,{isDataPersisted:s}):(u.triggerAskMasterPassword(t),o.LoginResultEnum.MasterPasswordMissing)}catch(t){throw te(t)&&(0,C.sendEmailTokenErrorLog)(e),u.triggerOpenSessionFailed(t),t}}(e,t,r,n,s,c),openSessionWithDashlaneAuthenticator:(t,r,n,s)=>async function(e,t,r,n,s){try{const{storeService:c,sessionService:l}=e;if(t=(0,y.normalizeEmail)(t),await V(e,t,r),await l.getInstance().user.accountExistsLocally())throw new Error(a.AuthenticationCode[a.AuthenticationCode.DASHLANE_AUTHENTICATOR_ASKED_FOR_LOCAL_SESSION]);const d=await i.registerDeviceWithDashlaneAuthenticator(c,n,s);if(d===a.AuthenticationCode.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED)return(0,C.sendDashlaneAuthenticatorErrorLog)(e),o.LoginResultEnum.DashlaneAuthenticatorApprovalCancelled;if(d!==a.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from verifyDashlaneAuthenticatorPush");return r?W(e,t,r,{isDataPersisted:n}):(u.triggerAskMasterPassword(t),o.LoginResultEnum.MasterPasswordMissing)}catch(t){re(t)&&(0,C.sendDashlaneAuthenticatorErrorLog)(e),u.triggerOpenSessionFailed(t)}}(e,t,r,n,s),cancelDashlaneAuthenticatorRegistration:()=>i.cancelRegistrationWithDashlaneAuthenticator(),openSessionWithOTP:(t,r,n,i,p)=>async function(e,t,r,n,i,p){const{storageService:f,storeService:m,sessionService:h,applicationModulesAccess:S}=e;try{if(t=(0,y.normalizeEmail)(t),await V(e,t,r),await ae(n),!await h.getInstance().user.accountExistsLocally())return H(e,t,r,n,i,void 0,p);if(m.dispatch((0,l.updateisUsingBackupCode)(p)),m.getAccountInfo().otpType!==d.OtpType.OTP_LOGIN)throw new Error(a.AuthenticationCode[a.AuthenticationCode.OTP_PROVIDED_FOR_LOCAL_NON_OTP_SESSION]);const v=await(0,s.convertTokenToAuthTicket)(m,(0,g.makeOTP)(n));if(!1===v.success){const{error:{code:e,message:t}}=v;if(e===a.AuthenticationCode.BUSINESS_ERROR)throw new Error(t);throw new Error(a.AuthenticationCode[e])}const E=v.authTicket;if(await c.completeLogin(m,f,S,E,p??!1)!==a.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from verifyOtpOrToken");return r?W(e,t,r,{isDataPersisted:i}):(u.triggerAskMasterPassword(t),o.LoginResultEnum.MasterPasswordMissing)}catch(t){if(ee(t)){const e=await(0,T.getLocalAccounts)(m,f);u.sendLocalAccounts(e)}throw te(t)&&(0,C.sendOTPErrorLog)(e,p),u.triggerOpenSessionFailed(t),t}}(e,t,r,n,i,p),openSessionWithOTPForNewDevice:(t,r,n,o,a,i)=>H(e,t,r,n,o,a,i),openSessionWithMasterPassword:(t,r,n)=>W(e,t,r,n),openSessionResendToken:t=>async function(e,t){await i.askServerToSendToken(e,t),u.triggerOpenSessionTokenSent({isResendAction:!0})}(e.wsService,t),loadAccountCreationInfos:(t,r,n,o,a,i)=>async function(e,t,r,n,o,a,i){const s=(0,E.secureDeviceName)(n);await V(e,t,r),e.storeService.dispatch((0,b.deviceRegistered)((0,b.makeDeviceRegistrationKeys)(o.accessKey,o.secretKey),i,t)),e.storeService.dispatch((0,h.registerDeviceName)(s)),e.storeService.dispatch((0,h.registerLastSync)(a))}(e,t,r,n,o,a,i),openExtraDeviceSession:(t,r)=>async function(e,t,r){try{const{sessionService:n}=e;t=(0,y.normalizeEmail)(t);const i=r&&r.password,s=r&&r.serverKey;await V(e,t,i,{authorizeDifferentLogin:se.AUTHORIZED,serverKey:s});const c=await n.getInstance().user.accountExistsLocally(),l=ce(c);switch(l){case a.AuthenticationCode.PROVIDE_EXTRA_DEVICE_TOKEN:return u.triggerOpenSessionExtraDeviceTokenRequired(),o.LoginResultEnum.ExtraDeviceTokenMissing;case a.AuthenticationCode.ASK_MASTER_PASSWORD:return i?W(e,t,i,{serverKey:s}):(u.triggerAskMasterPassword(t),o.LoginResultEnum.MasterPasswordMissing);default:(0,M.assertUnreachable)(l)}}catch(e){throw u.triggerOpenSessionFailed(e),e}}(e,t,r),openSessionWithExtraDeviceToken:(t,r,n,s)=>async function(e,t,r,n,s){try{const{storeService:c,sessionService:l}=e;t=(0,y.normalizeEmail)(t);const d=s&&s.password;if(await V(e,t,d,{authorizeDifferentLogin:se.AUTHORIZED}),await ie(r),await l.getInstance().user.accountExistsLocally())throw new Error(a.AuthenticationCode[a.AuthenticationCode.TOKEN_PROVIDED_FOR_LOCAL_SESSION]);const p=s&&s.deviceName;return await i.registerDevice(c,n,(0,g.makeExtraDeviceToken)(r),!1,p),d?W(e,t,d):(u.triggerAskMasterPassword(t),o.LoginResultEnum.MasterPasswordMissing)}catch(e){throw u.triggerOpenSessionFailed(e),e}}(e,t,r,n,s)}),t.updateSessionUponLoginAction=V,t.openSessionWithMasterPassword=W;const z=async(e,t,r)=>{const n=(0,R.hasTACAccessInCurrentSpace)(e);if(o.possibleAdminPermissions.includes(r)&&!n)throw e.isAuthenticated()&&await t.close(),new Error(a.AuthenticationCode[a.AuthenticationCode.USER_UNAUTHORIZED])},q=async(e,t,r)=>{const n=e.getState(),o=(0,B.pairingIdSelector)(n);u.triggerSessionOpened(e,t,r,o)},Y=(e,t)=>{const{login:r,persistData:n,sessionStartTime:o}=e.getAccountInfo();n===g.PersistData.PERSIST_DATA_YES&&((0,f.storeUserPublicSetting)(r,"lastSuccessfulLoginTime",o),void 0!==t?.triggeredByRememberMeType&&"disabled"!==t?.triggeredByRememberMeType||(0,f.storeUserPublicSetting)(r,"lastMasterPasswordOpenSessionTimestamp",o))},Q=async e=>{await e.accountExistsLocally()?await e.attemptSync(n.Trigger.Login):await e.sync(n.Trigger.InitialLogin)},Z=async e=>{const{sessionService:t,storeService:r}=e,n=t.getInstance().user,o=r.getState(),i=(0,N.recoveryInProgressSelector)(o);if(void 0!==(0,P.ssoMigrationInfoSelector)(o).migration||i)return!0;const s=!await n.accountExistsLocally(),c=(0,_.changeMPinProgressSelector)(o);if(s||c){try{await Q(n)}catch(e){throw new Error(a.AuthenticationCode[a.AuthenticationCode.UNKNOWN_SYNC_ERROR])}return!0}return!1};async function X(e,t,r){const{localDataEncryptorService:n,sessionService:a,storageService:i,storeService:s,applicationModulesAccess:c}=e,{login:u,otpType:l}=s.getAccountInfo();await(0,w.deleteAllLocalUserData)(i,c,u),await(0,v.generateLocalkeyAndSetupEncryptorService)(n,s,a,t),t===g.PersistData.PERSIST_DATA_YES&&(l===d.OtpType.OTP_LOGIN&&(0,f.storeUserPublicSetting)(s.getAccountInfo().login,"otp2",!0),await(0,k.persistLocalUsersAuthenticationData)(i,s));const p=a.getInstance().user;await p.refreshSessionData(),r?.requiredPermissions&&await z(s,a,r.requiredPermissions);const m=await(0,F.getDeviceLimitStatus)(e);return"noDeviceLimit"!==m._tag?(await(0,F.startDeviceLimitFlow)(e,m),o.LoginResultEnum.DeviceLimitFlow):J(e,r)}async function J(e,t){try{const{autoLoginService:r,eventBusService:n,sessionService:i,storeService:s,storageService:c,wsService:u}=e,d=i.getInstance().user,f=s.getState(),g=(0,D.userLoginSelector)(f);s.dispatch((0,p.confirmUserAuthentication)()),Y(s,t);const h=(0,N.recoveryInProgressSelector)(f),y=await Z(e);if(!h){const e=await(0,m.getAndTriggerRefreshAccountInfo)(s,i,u);q(s,c,e)}if(!1===y)try{await Q(d)}catch(e){throw new Error(a.AuthenticationCode[a.AuthenticationCode.UNKNOWN_SYNC_ERROR])}const S=await(0,T.getLocalAccounts)(s,c);(0,a.sendLocalAccounts)(S);const v="webauthn"!==(0,U.getLocalAccountRememberMeType)(g);return s.getUserSession().rememberMasterPassword&&v&&r.initialize(),s.getUserSession().shouldRememberMeForSSO&&v&&(await(0,U.persistLocalAccountRememberMeType)(s,"sso"),s.dispatch((0,$.setRememberMeTypeAction)("sso"))),n.sessionOpened({login:g}),"autologin"!==t?.triggeredByRememberMeType&&s.dispatch((0,l.updateLastMasterPasswordCheck)()),d.startPeriodic2FAInfoRefresh(),(0,I.refreshTwoFactorAuthenticationInfoService)(s,u),s.dispatch((0,l.updateSessionDidOpen)(!0)),o.LoginResultEnum.LoggedIn}catch(t){const{storeService:r}=e;throw r.dispatch((0,p.userAuthenticationFailed)()),r.dispatch((0,l.updateSessionDidOpen)(!1)),t}}t.sessionDidOpen=J;const ee=e=>e&&"object"==typeof e&&e.message===a.AuthenticationCode[a.AuthenticationCode.DEVICE_NOT_REGISTERED],te=e=>e?.message&&O.TokenOrOTPErrorCode.includes(e.message),re=e=>e?.message&&O.DashlaneAuthenticatorErrorCode.includes(e.message),ne=async(e,t,r,n,o)=>{if(o)try{return await c.checkLogin(e,t,r)}catch(e){if(!ee(e))throw e}const a=(0,A.ukiSelector)(e.getState());return a?i.checkLoginWithUki(e,n,a):i.requestDeviceRegistration(e)},oe=e=>e.getAccountInfo().isAuthenticated;function ae(e){if(!e||0===e.length)throw new Error(a.AuthenticationCode[a.AuthenticationCode.EMPTY_OTP])}function ie(e){if(!e||0===e.length)throw new Error(a.AuthenticationCode[a.AuthenticationCode.EMPTY_TOKEN])}var se;!function(e){e[e.AUTHORIZED=0]="AUTHORIZED",e[e.FORBIDDEN=1]="FORBIDDEN"}(se=t.DifferentLoginAuthorized||(t.DifferentLoginAuthorized={}));const ce=e=>e?a.AuthenticationCode.ASK_MASTER_PASSWORD:a.AuthenticationCode.PROVIDE_EXTRA_DEVICE_TOKEN},9639:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loginViaSSO=void 0;const n=r(35105),o=r(751),a=r(56915),i=r(50058),s=r(16373),c=r(40042),u=r(28445),l=r(88610),d=r(19399),p=r(64910),f=r(33769),g=r(16038),m=r(56668),h=r(46298),y=r(92029),S=r(25576),v=r(16356),E=r(70414),A=r(25576),_=r(16593),b=r(38981),T=r(17387),I=r(62712),w=r(61259),C=r(19083),O=r(61380),D=r(28287),P=r(86797),N=r(7624),R=r(658);t.loginViaSSO=async function(e,t){const{sessionService:r,storeService:a}=e,{ssoServiceProviderKey:i,exist:l,ssoToken:p,consents:f,currentAuths:g=y.SsoMigrationServerMethod.SSO,expectedAuths:m=y.SsoMigrationServerMethod.SSO,inStore:h,anonymousUserId:S}=t,v=(0,u.normalizeEmail)(t.login),E=(0,d.secureDeviceName)(t.deviceName),A={...t,login:v,deviceName:E};if(!(i&&v||h))return a.dispatch((0,s.addNewLoginNotification)({type:c.LoginNotificationType.SSO_SETUP_ERROR})),(0,w.makeReturnErrorObject)(y.LoginViaSsoCode.EMPTY_LOGIN);try{if(!l){const t={ssoServiceProviderKey:i,login:v,deviceName:E,ssoToken:p,consents:f,anonymousUserId:S};return await(0,o.createSSOAccount)(e,t)}if(!(0,w.isSupportedTransitionFlow)(g,m))return a.dispatch((0,s.addNewLoginNotification)({type:c.LoginNotificationType.SSO_SETUP_ERROR})),(0,w.makeReturnErrorObject)(y.LoginViaSsoCode.UNSUPPORTED_TRANSITION);if(g===y.SsoMigrationServerMethod.MP&&m===y.SsoMigrationServerMethod.SSO)return await U(e,A);if(g===y.SsoMigrationServerMethod.SSO&&m===y.SsoMigrationServerMethod.MP){const e={ssoUser:!0,migration:n.SSOMigrationType.SSO_TO_MP};a.dispatch((0,N.storeSSOSettings)(e)),A.requiredPermissions=null}return r.setInstance(v,void 0),await r.getInstance().user.accountExistsLocally()?await L(e,A):await M(e,A)}catch(t){return(0,R.sendSsoLoginErrorLog)(e),a.dispatch((0,s.addNewLoginNotification)({type:c.LoginNotificationType.UNKNOWN_ERROR,message:t.message})),(0,w.makeReturnErrorObject)(y.LoginViaSsoCode.UNKNOWN_ERROR,t.message)}};const U=async(e,t)=>{const{storeService:r}=e;let{ssoServiceProviderKey:o,ssoToken:a}=t;const{login:i}=t,{isAuthenticated:u,otpType:d}=r.getAccountInfo();if(t.inStore){const e=(0,b.ssoSettingsSelector)(r.getState());if(o=e.ssoServiceProviderKey,a=e.ssoToken,!o||!a)return r.dispatch((0,s.addNewLoginNotification)({type:c.LoginNotificationType.SSO_SETUP_ERROR})),(0,w.makeReturnErrorObject)(y.LoginViaSsoCode.SSO_VERIFICATION_FAILED)}if(!u){const t={ssoUser:!0,serviceProviderUrl:"",ssoServiceProviderKey:o,ssoToken:a,migration:n.SSOMigrationType.MP_TO_SSO};return r.dispatch((0,N.storeSSOSettings)(t)),(0,l.makeLoginController)(e).openSession(i),r.dispatch((0,s.addNewLoginNotification)({type:c.LoginNotificationType.RELOGIN_NEEDED})),(0,w.makeReturnErrorObject)(y.LoginViaSsoCode.INNACTIVE_SESSION)}if(d===P.OtpType.NO_OTP){const{success:e}=await(0,D.convertTokenToAuthTicket)(r,(0,T.makeSsoToken)(a));if(!e)return r.dispatch((0,s.addNewLoginNotification)({type:c.LoginNotificationType.SSO_SETUP_ERROR})),(0,w.makeReturnErrorObject)(y.LoginViaSsoCode.SSO_VERIFICATION_FAILED)}const p={newPassword:o,flow:O.ChangeMPFlowPath.MP_TO_SSO},f=await(0,C.changeMasterPassword)(e,p);return!1===f.success?(r.dispatch((0,s.addNewLoginNotification)({type:c.LoginNotificationType.UNKNOWN_ERROR,message:f.error.code})),f):(r.dispatch((0,N.resetSSOSettings)()),(0,w.successResponse)())},L=async(e,{login:t,ssoServiceProviderKey:r,ssoToken:n,requiredPermissions:o,shouldRememberMeForSSO:i})=>{const{storeService:u}=e,d=(0,a.getDeviceIdSelector)(u.getState(),t);if(null===d)throw new Error(S.AuthenticationCode[S.AuthenticationCode.DEVICE_NOT_REGISTERED]);const E=await(0,D.convertTokenToAuthTicket)(u,(0,T.makeSsoToken)(n));if(!1===E.success){const{error:{message:e}}=E;return u.dispatch((0,s.addNewLoginNotification)({type:c.LoginNotificationType.SSO_SETUP_ERROR})),(0,w.makeReturnErrorObject)(y.LoginViaSsoCode.SSO_VERIFICATION_FAILED,e)}const _=E.authTicket,b=await(0,I.completeLoginWithAuthTicket)(u,{login:t,deviceAccessKey:d,authTicket:_});if((0,h.isApiError)(b))return(0,w.formatAPIError)(b);const{masterPasswordEncryptorService:C,remoteDataEncryptorService:O}=e,{ssoServerKey:P,remoteKeys:N}=b,R=(0,g.base64ToBuffer)(P),U=N.filter((e=>"sso"===e.type))[0];let L;try{const e=(0,g.base64ToBuffer)(r),t=(0,f.getEncryptionKeyBuffer)(e,R,{skipDerivation:!0});L=(0,g.arrayBufferToText)(t);const n=(0,p.getNoDerivationCryptoConfig)();C.setInstance({raw:L},"",n);const o=await C.getInstance().decrypt(U.key),a=(0,m.deflatedUtf8ToUtf16)(o,{skipUtf8Decoding:!0,skipInflate:!0});O.setInstance({raw:a},"",n),u.dispatch((0,v.updateRemoteKey)(a))}catch(e){return{success:!1,error:{code:y.LoginViaSsoCode.WRONG_PASSWORD}}}const M=A.PersistData.PERSIST_DATA_YES;return await(0,l.openSessionWithMasterPassword)(e,t,L,{isDataPersisted:M,serverKey:"",requiredPermissions:o,isSsoLogin:!0,shouldRememberMeForSSO:i}),(0,w.successResponse)()},M=async(e,t)=>{const{storeService:r,masterPasswordEncryptorService:n,remoteDataEncryptorService:o}=e,{deviceName:a,ssoToken:s,login:c,ssoServiceProviderKey:u,requiredPermissions:d,shouldRememberMeForSSO:p}=t;r.dispatch((0,i.updateLocalUserInfo)(c,{ssoActivatedUser:!0}));const f=A.PersistData.PERSIST_DATA_YES,g={masterPasswordEncryptorService:n,remoteDataEncryptorService:o,ssoServiceProviderKey:u};await(0,E.registerDevice)(r,f,(0,T.makeSsoToken)(s),!1,a,g);const m=e.storeService.getState(),h=(0,_.masterPasswordSelector)(m);return await(0,l.openSessionWithMasterPassword)(e,c,h,{isDataPersisted:f,serverKey:"",requiredPermissions:d,isSsoLogin:!0,shouldRememberMeForSSO:p}),(0,w.successResponse)()}},92029:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginViaSsoCode=t.SsoMigrationServerMethod=void 0,function(e){e.SSO="sso",e.MP="master_password"}(t.SsoMigrationServerMethod||(t.SsoMigrationServerMethod={})),function(e){e.SUCCESS="SUCCESS",e.ASK_NEW_MP="ASK_NEW_MP",e.EMPTY_LOGIN="EMPTY_LOGIN",e.INNACTIVE_SESSION="INNACTIVE_SESSION",e.SSO_VERIFICATION_FAILED="SSO_VERIFICATION_FAILED",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.UNSUPPORTED_TRANSITION="UNSUPPORTED_TRANSITION",e.WRONG_PASSWORD="WRONG_PASSWORD"}(t.LoginViaSsoCode||(t.LoginViaSsoCode={}))},61259:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerServiceProviderUrlRedirect=t.successResponse=t.makeReturnErrorObject=t.formatAPIError=t.isSupportedTransitionFlow=void 0;const n=r(92029),o=r(46298),a=r(81228),i=r(38981);t.isSupportedTransitionFlow=(e,t)=>e===n.SsoMigrationServerMethod.SSO?t===n.SsoMigrationServerMethod.SSO||t===n.SsoMigrationServerMethod.MP:e===n.SsoMigrationServerMethod.MP&&t===n.SsoMigrationServerMethod.SSO,t.formatAPIError=e=>{switch(e.code){case o.B2bSsoUserNotFound:case o.InvalidSsoToken:case o.DeviceNotFound:case o.InvalidAuthTicket:return(0,t.makeReturnErrorObject)(n.LoginViaSsoCode.SSO_VERIFICATION_FAILED,e.message);default:return(0,t.makeReturnErrorObject)(n.LoginViaSsoCode.UNKNOWN_ERROR,e.message)}},t.makeReturnErrorObject=(e,t)=>({success:!1,error:{code:e,message:t}}),t.successResponse=(e=n.LoginViaSsoCode.SUCCESS)=>({success:!0,code:e}),t.triggerServiceProviderUrlRedirect=function(e,t){const r=`${(0,i.serviceProviderUrlSelector)(e)}?username=${t}`;return(0,a.emitServiceProviderUrl)(r),r}},30322:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(46430),o=r(57634),a=r(49154),i=r(27479);t.bootstrap=(e,t,r)=>{if(e.register(n.config),r.connectors.deviceLimit){const e=new a.DeviceLimitCapabilityEventBus(t,r.connectors.deviceLimit),n=(0,i.getDeviceLimitFlowEventsManager)(t.storeService);(0,o.setupDeviceLimitEventBus)(e,n)}}},658:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendMasterPasswordLoginErrorLog=t.sendSsoLoginErrorLog=t.sendBiometricLoginErrorLog=t.sendDashlaneAuthenticatorErrorLog=t.sendOTPErrorLog=t.sendOTPForNewDeviceErrorLog=t.sendEmailTokenErrorLog=t.sendLoginSuccessEventLog=t.sendAskSSOAuthenticationEventLog=t.sendAskBiometricAuthenticationEventLog=t.sendAskAuthenticationEventLog=void 0;const n=r(10203),o=r(66102),a=r(86797);var i;!function(e){e.AUTOLOGIN="autologin",e.WEBAUTHN="webauthn",e.DISABLED="disabled"}(i||(i={}));const s=(e,t,r)=>{switch(e){case a.OtpType.NO_OTP:return t?r?n.VerificationMode.AuthenticatorApp:n.VerificationMode.EmailToken:n.VerificationMode.None;case a.OtpType.OTP_NEW_DEVICE:return n.VerificationMode.Otp1;case a.OtpType.OTP_LOGIN:return n.VerificationMode.Otp2;default:return n.VerificationMode.None}},c=async(e,t,r)=>{await(0,o.logEvent)(t,{event:new n.UserAskAuthenticationEvent({mode:e,reason:n.Reason.Login,verificationMode:r})})};t.sendAskAuthenticationEventLog=c.bind(null,n.Mode.MasterPassword),t.sendAskBiometricAuthenticationEventLog=c.bind(null,n.Mode.Biometric),t.sendAskSSOAuthenticationEventLog=c.bind(null,n.Mode.Sso),t.sendLoginSuccessEventLog=async({services:e,isInitial:t,isSsoLogin:r,rememberMeType:a})=>{r?await(async(e,t)=>{await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.Sso,status:n.Status.Success,isFirstLogin:t,isBackupCode:!1,verificationMode:n.VerificationMode.None})})})(e,t):a&&a===i.WEBAUTHN?await(async e=>{await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.Biometric,status:n.Status.Success,isFirstLogin:!1,isBackupCode:!1,verificationMode:n.VerificationMode.None})})})(e):a&&a===i.DISABLED&&await(async(e,t)=>{const{otpType:r}=e.storeService.getAccountInfo(),{isUsingBackupCode:a,isUsingDashlaneAuthenticator:i}=e.storeService.getUserSession(),c=s(r,t,i);await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.MasterPassword,status:n.Status.Success,isFirstLogin:t,isBackupCode:a,verificationMode:c})})})(e,t)},t.sendEmailTokenErrorLog=async e=>{await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.MasterPassword,status:n.Status.ErrorWrongOtp,isFirstLogin:!0,isBackupCode:!1,verificationMode:n.VerificationMode.EmailToken})})},t.sendOTPForNewDeviceErrorLog=async(e,t)=>{const{otpType:r}=e.storeService.getAccountInfo();await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.MasterPassword,status:n.Status.ErrorWrongOtp,isFirstLogin:!0,isBackupCode:t,verificationMode:r===a.OtpType.OTP_LOGIN?n.VerificationMode.Otp2:n.VerificationMode.Otp1})})},t.sendOTPErrorLog=async(e,t)=>{await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.MasterPassword,status:n.Status.ErrorWrongOtp,isFirstLogin:!1,isBackupCode:t,verificationMode:n.VerificationMode.Otp2})})},t.sendDashlaneAuthenticatorErrorLog=async e=>{await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.MasterPassword,status:n.Status.ErrorWrongOtp,isFirstLogin:!0,isBackupCode:!1,verificationMode:n.VerificationMode.AuthenticatorApp})})},t.sendBiometricLoginErrorLog=async e=>{await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.Biometric,status:n.Status.ErrorUnknown,isFirstLogin:!1,isBackupCode:!1,verificationMode:n.VerificationMode.None})})},t.sendSsoLoginErrorLog=async e=>{await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.Sso,status:n.Status.ErrorInvalidSso,isBackupCode:!1,verificationMode:n.VerificationMode.None})})},t.sendMasterPasswordLoginErrorLog=async(e,t)=>{const{otpType:r}=e.storeService.getAccountInfo(),{isUsingBackupCode:a,isUsingDashlaneAuthenticator:i}=e.storeService.getUserSession(),c=s(r,t,i);await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.MasterPassword,status:n.Status.ErrorWrongPassword,isFirstLogin:t,isBackupCode:a,verificationMode:c})})}},69718:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLoginNotification=void 0;const n=r(16373);t.addLoginNotification=async function(e,t){const{storeService:r}=e;r.dispatch((0,n.addNewLoginNotification)(t))}},40588:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(30322);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},24579:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(28096),o=r(1965),a=r(90622),i=r(48990),s=r(31937),c=r(18216);t.setupSubscriptions=function(e,t){e.appInitialized.on((async e=>{if(e.initMode===c.InitMode.FirstInit){const{storageService:e,storeService:r,applicationModulesAccess:c}=t;await(0,o.deviceRemoteDeletion)(r,e,c);const u=await(0,a.getLocalAccounts)(r,e);await(0,s.restoreLastAuthenticatedUser)(t,u),(0,n.sendLocalAccounts)(u),t.storeService.dispatch((0,i.localAccountsListUpdated)(u))}}))}},15606:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DashlaneAuthenticatorErrorCode=t.TokenOrOTPErrorCode=void 0;const n=r(6629);t.TokenOrOTPErrorCode=[n.AuthenticationCode.TOKEN_EXPIRED,n.AuthenticationCode.TOKEN_NOT_VALID,n.AuthenticationCode.TOKEN_TOO_MANY_ATTEMPTS,n.AuthenticationCode.EMPTY_TOKEN,n.AuthenticationCode.OTP_ALREADY_USED,n.AuthenticationCode.OTP_NOT_VALID,n.AuthenticationCode.OTP_TOO_MANY_ATTEMPTS,n.AuthenticationCode.EMPTY_OTP,n.AuthenticationCode.BACKUP_CODE_NOT_VALID],t.DashlaneAuthenticatorErrorCode=[n.AuthenticationCode.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED,n.AuthenticationCode.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED,n.AuthenticationCode.FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE]},13465:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(90822),o=r(96205),a=r(85316);t.config={commands:{clearAllStoredLoginNotification:{handler:o.clearAllStoredLoginNotification}},queries:{getLoginNotifications:{selector:n.loginNotificationListSelector}},liveQueries:{liveLoginNotifications:{operator:a.loginNotificationList$}}}},97046:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(13465);t.bootstrap=e=>{e.register(n.config)}},39952:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(97046);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},85316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loginNotificationList$=void 0;const n=r(18948),o=r(3343),a=r(90822);t.loginNotificationList$=()=>(0,n.pipe)((0,o.map)(a.loginNotificationListSelector),(0,o.distinctUntilChanged)())},90822:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loginNotificationListSelector=void 0,t.loginNotificationListSelector=e=>e.inMemoryInterSessionUnsynced.loginNotification},96205:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearAllStoredLoginNotification=void 0;const n=r(16373);t.clearAllStoredLoginNotification=async e=>(e.storeService.dispatch((0,n.resetAllLoginNotification)()),{success:!0})},2207:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginNotificationType=void 0;var n=r(40042);Object.defineProperty(t,"LoginNotificationType",{enumerable:!0,get:function(){return n.LoginNotificationType}})},90014:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(16088),o=r(85493),a=r(93069),i=r(6737);t.config={commands:{updateLoginStepInfo:{handler:a.updateLoginStepInfoHandler},resetLoginStepInfo:{handler:i.resetLoginStepInfoHandler}},queries:{getLoginStepInfo:{selector:n.loginStepInfoSelector}},liveQueries:{liveLoginStepInfo:{operator:o.liveLoginStepInfo$}}}},74536:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginStep=void 0;var n=r(33831);Object.defineProperty(t,"LoginStep",{enumerable:!0,get:function(){return n.LoginStep}})},35924:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetLoginStepInfo=t.updateLoginStepInfoStep=t.updateLoginStepInfoLogin=t.RESET_LOGIN_STEP_INFO=t.UPDATE_LOGIN_STEP_INFO_STEP=t.UPDATE_LOGIN_STEP_INFO_LOGIN=void 0,t.UPDATE_LOGIN_STEP_INFO_LOGIN="UPDATE_LOGIN_STEP_INFO_LOGIN",t.UPDATE_LOGIN_STEP_INFO_STEP="UPDATE_LOGIN_STEP_INFO_STEP",t.RESET_LOGIN_STEP_INFO="RESET_LOGIN_STEP_INFO",t.updateLoginStepInfoLogin=e=>({type:t.UPDATE_LOGIN_STEP_INFO_LOGIN,login:e}),t.updateLoginStepInfoStep=e=>({type:t.UPDATE_LOGIN_STEP_INFO_STEP,step:e}),t.resetLoginStepInfo=()=>({type:t.RESET_LOGIN_STEP_INFO})},16088:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loginStepInfoSelector=void 0,t.loginStepInfoSelector=e=>{const t=e.userSession.localSettings.loginStepInfo;return t?.step?t:null}},24413:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(90014);t.bootstrap=e=>{e.register(n.config)}},6737:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetLoginStepInfoHandler=void 0;const n=r(35924);t.resetLoginStepInfoHandler=e=>(e.storeService.dispatch((0,n.resetLoginStepInfo)()),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},93069:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateLoginStepInfoHandler=void 0;const n=r(35924);t.updateLoginStepInfoHandler=(e,t)=>(void 0!==t.login&&e.storeService.dispatch((0,n.updateLoginStepInfoLogin)(t.login)),void 0!==t.step&&e.storeService.dispatch((0,n.updateLoginStepInfoStep)(t.step)),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},37824:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(24413);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},85493:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.liveLoginStepInfo$=void 0;const n=r(18948),o=r(3343),a=r(16088);t.liveLoginStepInfo$=()=>(0,n.pipe)((0,o.map)(a.loginStepInfoSelector),(0,o.distinctUntilChanged)())},33831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginStep=void 0,function(e){e.Email="email",e.Welcome="welcome",e.OTP1="OTP1",e.OTP2="OTP2",e.BackupCodeOTP1="backupCodeOTP1",e.BackupCodeOTP2="backupCodeOTP2",e.OTPToken="token",e.Password="password",e.SSO="SSO",e.ActivateSSO="activateSSO",e.WebAuthn="webAuthn",e.WebAuthnError="webAuthnError",e.DeviceLimitReached="deviceLimitReached",e.DashlaneAuthenticator="dashlaneAuthenticator"}(t.LoginStep||(t.LoginStep={}))},82413:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Debugger=void 0;const n=r(4939),o=r(4407),a=([e,...t])=>{let r="",n=[];"string"==typeof e?r=e:n=[e],n=[...n,...t];const o=(e=>e.reduce(((e,t)=>{const r=Object.keys(e).length;return{...e,[r]:t}}),{}))(n);return{message:r,details:o}},i=function(){const e=e=>(...t)=>{const r={...a(t),level:e};(0,n.log)(r)};return{log:e(o.LogLevel.Debug),info:e(o.LogLevel.Info),warn:e(o.LogLevel.Warn),error:e(o.LogLevel.Error)}}();t.Debugger=i,t.default=i},4939:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.redirectConsoleLogs=t.logVerbose=t.logDebug=t.logInfo=t.logWarn=t.logError=t.log=void 0;const n=r(16516),o=r(48749),a=r(43051),i=r(4407),s=r(82569),c=r(17825),u=r(32588);let l=null;const d=e=>t=>{const{level:r=i.LogLevel.Error}=t,n=(e=>{switch(e){case i.LogLevel.Error:return console.error;case i.LogLevel.Warn:return console.warn;case i.LogLevel.Info:return console.info;case i.LogLevel.Verbose:return console.log;case i.LogLevel.Debug:return console.debug;default:return(0,c.assertUnreachable)(e)}})(r),o=e(t);n.call(this,o)},p=(0,s.formatLogEntry)(s.formatLogEntryDetail),f=(e,t)=>r=>n=>t(n[e])&&r(n),g=f("tag",((e=[])=>{const t=o.config.LOG_TAGS||[],r="string"==typeof t?[t]:[...t],n="string"==typeof e?[e]:[...e];return!r.length||r.some((e=>n.includes(e)))})),m=f("level",(e=>e>=o.config.LOG_LEVEL)),h=(0,n.pipe)((e=>t=>(l||d(e))(t)),m,g)(p);h({message:"~~~ Logs activated ~~~",level:i.LogLevel.Info,tag:[u.LOGS_LOG_TAG,u.DEBUGGER_LOG_TAG]}),t.log=h,t.logError=(0,a.withErrorLevel)(h),t.logWarn=(0,a.withWarnLevel)(h),t.logInfo=(0,a.withInfoLevel)(h),t.logDebug=(0,a.withDebugLevel)(h),t.logVerbose=(0,a.withVerboseLevel)(h),t.redirectConsoleLogs=e=>(l=e,()=>{l=null})},43051:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withVerboseLevel=t.withDebugLevel=t.withInfoLevel=t.withWarnLevel=t.withErrorLevel=t.withTag=t.withLevel=void 0;const n=r(4407),o=(e,t)=>r=>n=>r({[e]:t,...n});t.withLevel=e=>o("level",e),t.withTag=e=>o("tag",e),t.withErrorLevel=(0,t.withLevel)(n.LogLevel.Error),t.withWarnLevel=(0,t.withLevel)(n.LogLevel.Warn),t.withInfoLevel=(0,t.withLevel)(n.LogLevel.Info),t.withDebugLevel=(0,t.withLevel)(n.LogLevel.Debug),t.withVerboseLevel=(0,t.withLevel)(n.LogLevel.Verbose)},82569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatLogEntryDetail=t.formatLogEntry=void 0;const n=r(92263),o=r(4407);function a(e){const{stack:t}=e;let r=`${e}`;return t&&"string"==typeof t&&t.substr(0,t.indexOf("\n"))===r&&(r=""),`${r}${r?`\n${t}`:t}`}const i={[o.LogLevel.Error]:"(e)",[o.LogLevel.Warn]:"(w)",[o.LogLevel.Info]:"(i)",[o.LogLevel.Debug]:"(d)",[o.LogLevel.Verbose]:"(v)"};t.formatLogEntry=e=>t=>{const{details:r={},level:n=o.LogLevel.Debug,message:a,tag:s=[]}=t,c=function(e){const t=Array.isArray(e)?e:[e];return t.length?` [${t.join("|")}]`:""}(s),u=i[n],l=Boolean(a),d=l?` ${a}`:"",p=function(e,t,r){return Object.keys(t).reduce(((n,o)=>!Number.isInteger(parseInt(o,10))&&r?`${n} ${o}:${e(t[o])}`:`${n} ${e(t[o])}`),"")}(e,r,l);return`${u}${c}${d}${p}`},t.formatLogEntryDetail=e=>(0,n.isCarbonError)(e)?function(e){const t=JSON.stringify(e.getAdditionalInfo()),r=t?`\n${t}`:"";return`${a(e)}${r}`}(e):e instanceof Error?a(e):"object"==typeof e?JSON.stringify(e):String(e)},95623:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.withWarnLevel=t.withVerboseLevel=t.withTag=t.withLevel=t.withInfoLevel=t.withErrorLevel=t.withDebugLevel=t.Silent=t.LogLevel=t.redirectConsoleLogs=t.logWarn=t.logVerbose=t.logInfo=t.logError=t.logDebug=t.log=void 0;const a=r(82413);t.default=a.Debugger;var i=r(4939);Object.defineProperty(t,"log",{enumerable:!0,get:function(){return i.log}}),Object.defineProperty(t,"logDebug",{enumerable:!0,get:function(){return i.logDebug}}),Object.defineProperty(t,"logError",{enumerable:!0,get:function(){return i.logError}}),Object.defineProperty(t,"logInfo",{enumerable:!0,get:function(){return i.logInfo}}),Object.defineProperty(t,"logVerbose",{enumerable:!0,get:function(){return i.logVerbose}}),Object.defineProperty(t,"logWarn",{enumerable:!0,get:function(){return i.logWarn}}),Object.defineProperty(t,"redirectConsoleLogs",{enumerable:!0,get:function(){return i.redirectConsoleLogs}}),o(r(82413),t);var s=r(4407);Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return s.LogLevel}}),Object.defineProperty(t,"Silent",{enumerable:!0,get:function(){return s.Silent}});var c=r(43051);Object.defineProperty(t,"withDebugLevel",{enumerable:!0,get:function(){return c.withDebugLevel}}),Object.defineProperty(t,"withErrorLevel",{enumerable:!0,get:function(){return c.withErrorLevel}}),Object.defineProperty(t,"withInfoLevel",{enumerable:!0,get:function(){return c.withInfoLevel}}),Object.defineProperty(t,"withLevel",{enumerable:!0,get:function(){return c.withLevel}}),Object.defineProperty(t,"withTag",{enumerable:!0,get:function(){return c.withTag}}),Object.defineProperty(t,"withVerboseLevel",{enumerable:!0,get:function(){return c.withVerboseLevel}}),Object.defineProperty(t,"withWarnLevel",{enumerable:!0,get:function(){return c.withWarnLevel}})},4407:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Silent=t.LogLevel=void 0,function(e){e[e.Verbose=0]="Verbose",e[e.Debug=10]="Debug",e[e.Info=20]="Info",e[e.Warn=30]="Warn",e[e.Error=40]="Error"}(t.LogLevel||(t.LogLevel={})),t.Silent=100},59398:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(66102);t.config={commands:{logEvent:{handler:n.logEvent},logPageView:{handler:n.logPageView},flushQueue:{handler:n.flushQueue}},queries:{},liveQueries:{}}},82481:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyxApiResult=void 0,function(e){e[e.AllBatchesSent=0]="AllBatchesSent",e[e.SomeBatchesSent=1]="SomeBatchesSent",e[e.NoBatchesSent=2]="NoBatchesSent"}(t.StyxApiResult||(t.StyxApiResult={}))},38912:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateEventLoggerVirtualStoreState=t.UPDATE_EVENT_LOGGER_STATE=t.createEventLoggerVirtualStore=t.CREATE_EVENT_LOGGER_VIRTUAL_STORE=void 0,t.CREATE_EVENT_LOGGER_VIRTUAL_STORE="CREATE_EVENT_LOGGER_VIRTUAL_STORE",t.createEventLoggerVirtualStore=({storeName:e,initialState:r})=>({type:t.CREATE_EVENT_LOGGER_VIRTUAL_STORE,storeName:e,initialState:r}),t.UPDATE_EVENT_LOGGER_STATE="UPDATE_EVENT_LOGGER_STATE",t.updateEventLoggerVirtualStoreState=({storeName:e,updater:r})=>({type:t.UPDATE_EVENT_LOGGER_STATE,storeName:e,updater:r})},52895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(59398);t.bootstrap=(e,t)=>{e.register(n.config),t.eventLoggerService.initRepository()}},87911:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decryptEvents=t.encryptEvents=void 0;const n=r(72365),o=r(91301),a=r(65675),i=r(56668);t.encryptEvents=async function(e,t,r){const s=JSON.stringify(t),c=(0,i.deflateUtf16)(s);return await async function({storeService:e,encryptionKey:t,data:r}){const i=(0,n.makeDataEncryptorService)(e),{cryptoConfig:s}=(0,a.parsePayload)(o.CRYPTO_NODERIVATION_HMAC64);i.setInstance({raw:t},"",s);const c=await i.getInstance().encrypt(r);return i.close(),c}({storeService:e,encryptionKey:r,data:c})},t.decryptEvents=async function(e,t,r){const o=await async function({storeService:e,encryptedData:t,encryptionKey:r}){const o=(0,n.makeDataEncryptorService)(e);o.setInstance({raw:r},"");const a=await o.getInstance().decrypt(t);return o.close(),a}({storeService:e,encryptedData:t,encryptionKey:r}),a=(0,i.inflateUtf16)(o);return JSON.parse(a)}},26415:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chunkArray=t.getOsContext=t.getOsVersion=t.getOsType=t.getBrowserContext=t.getAppContext=t.applicationBuildTypeToHermesBuildType=t.platformStringToAppPlatform=t.createLogger=void 0;const n=r(10203),o=r(11814),a=r(48749),i=r(59600);t.createLogger=e=>{const{eventLoggerService:t}=e,r=t.getRepository();return{logger:r.createLogger(),logRepository:r}},t.platformStringToAppPlatform=e=>{switch(e){case"server_standalone":case"server_carbon_simulator":case"server_carbon_unknown":case"server_carbon_tests":return n.Platform.Saex;case"server_leeloo_dev":case"server_leeloo":case"server_tac":return n.Platform.Web;case"desktop_win":throw new Error(`Hermes Web SDK: Unsupported platform "${e}" detected. This platform is not supported by the Hermes Web SDK or Styx API.`)}},t.applicationBuildTypeToHermesBuildType=e=>{switch(e){case i.ApplicationBuildType.DEV:return n.BuildType.Dev;case i.ApplicationBuildType.QA:return n.BuildType.Qa;case i.ApplicationBuildType.NIGHTLY:return n.BuildType.Nightly;default:return n.BuildType.Production}},t.getAppContext=e=>{const r=e.getPlatformInfo(),n=e.getState().device.application.settings.buildType;return{platform:(0,t.platformStringToAppPlatform)(r.platformName),version:(o=r.appVersion,i=a.config.MANIFEST_VERSION,i?o+"-mv"+i:o),build_type:(0,t.applicationBuildTypeToHermesBuildType)(n)};var o,i},t.getBrowserContext=()=>({name:o.browser.getBrowserName(),version:o.browser.getBrowserVersion(),user_agent:o.navigator.getNavigator().userAgent}),t.getOsType=e=>{let t=n.OsType.Other;const r=e.os.toLowerCase().replace(/[ -/]+/g,"_");return Object.values(n.OsType).map((e=>e.toString())).includes(r)&&(t=r),t},t.getOsVersion=e=>{const t="Mac OS"===e.os?e.osVersion.replace("OS_X_","").replace(/_/g,"."):e.osVersion,r=/([0-9]{1,3}(?:\.[0-9]{0,4}){0,2})/.exec(t);return r&&r.length>=2?r[1]:"0"},t.getOsContext=e=>{const r=e.getPlatformInfo();return{type:(0,t.getOsType)(r),version:(0,t.getOsVersion)(r),locale:r.lang}},t.chunkArray=function e(t,r){return t.length<=r?[t]:[t.slice(0,r),...e(t.slice(r),r)]}},74412:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeEventLoggerService=t.bootstrap=void 0;const n=r(10203),o=r(48749),a=r(26415),i=r(2246),s=r(87564),c=r(10460),u=r(78671),l=r(99921);var d=r(52895);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return d.bootstrap}}),t.makeEventLoggerService=e=>{let t=null;const r=()=>{if(!t)throw new Error("makeEventLoggerService: You must call initRepository() before getting the repository instance");const r=e.storeService.getUserSession();return(r.analyticsIds?.userAnalyticsId||r.analyticsIds?.deviceAnalyticsId)&&t.setTrackingInfo(r.analyticsIds.userAnalyticsId,r.analyticsIds.deviceAnalyticsId),t};return{initRepository:()=>{const r=e.storeService,s=(0,a.getAppContext)(r),c=(0,a.getOsContext)(r),u=(0,a.getBrowserContext)(),d=(0,i.getCommonAppSetting)("installationId"),p=new l.EventLoggerStoreFactory(r);t=new n.LogRepository(s,c,u,d,void 0,!1,p);const f=r.getUserSession();(f.analyticsIds?.userAnalyticsId||f.analyticsIds?.deviceAnalyticsId)&&t.setTrackingInfo(f.analyticsIds.userAnalyticsId,f.analyticsIds.deviceAnalyticsId),3===o.config.MANIFEST_VERSION&&t.setServiceWorkerStartTime((new Date).toISOString())},getRepository:r,logEvent:async n=>{const{interactionDataConsent:o}=await(0,u.getGlobalExtensionSettings)(e);if(!1!==o)return r().createLogger().logEvent(n),(0,c.storeEventsInQueue)(e,t)},logSync:async n=>{const{interactionDataConsent:o}=await(0,u.getGlobalExtensionSettings)(e);if(!1!==o)return r().createLogger().logEvent(n),(0,c.storeEventsInQueue)(e,t)},flushEventQueue:()=>(0,s.sendEventQueueToStyx)(e)}}},4296:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.immediatelySendEvents=t.queueEvents=t.queueLogRepositoryEvents=void 0;const n=r(59600),o=r(30913),a=r(82481),i=r(87564),s=r(10460);async function c(e,t){const r=t.logStorage.containsPriorityEvent();try{return await(0,s.storeEventsInQueue)(e,t),r?await(0,i.sendEventQueueToStyx)(e):{success:!0,result:a.StyxApiResult.NoBatchesSent}}catch(e){return{success:!1,result:a.StyxApiResult.NoBatchesSent}}}async function u(e,t){try{return await(0,i.immediatelySendEventsToStyx)(e,t)}catch(e){return{success:!1,result:a.StyxApiResult.NoBatchesSent}}}t.queueLogRepositoryEvents=async function(e,t){return(0,o.applicationBuildTypeSelector)(e.storeService.getState())===n.ApplicationBuildType.QA?u(e,t):c(e,t)},t.queueEvents=c,t.immediatelySendEvents=u},19764:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.eventLoggerReducer=void 0;const n=r(38912);t.eventLoggerReducer=(e={},t)=>{switch(t.type){case n.CREATE_EVENT_LOGGER_VIRTUAL_STORE:return{[t.storeName]:t.initialState};case n.UPDATE_EVENT_LOGGER_STATE:return{[t.storeName]:t.updater(e[t.storeName])};default:return e}}},39261:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.styxKeysSelector=void 0,t.styxKeysSelector=e=>e.userSession.sdkAuthentication.styxKeys},87564:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.immediatelySendEventsToStyx=t.sendEventQueueToStyx=void 0;const n=r(2246),o=r(45956),a=r(76330),i=r(38250),s=r(87911),c=r(26415),u=r(10460),l=450;let d=!1;async function p(e,t,r){let n=[];if(!t||0===t.length)return n;const i=(0,a.getMakeStyxApiRequest)(r,o.ApiAuthType.App,o.ApiRequestMethod.POST),s=(0,c.chunkArray)(t,l);try{for(const t of s){if(!(await i(e,{payload:(0,a.getEventsPayload)(t)})).success)break;n=n.concat(t.map((({id:e})=>e)))}}catch{return n}return n}t.sendEventQueueToStyx=async function(e){if(!0===d)return{success:!0,result:i.StyxApiResult.NoBatchesSent};d=!0;const{storageService:t,storeService:r}=e,o=t.getLocalStorage(),a=(0,n.getCommonAppSetting)("eventLoggerQueueKey");if(!await o.itemExists(u.EVENT_QUEUE_STORAGE_KEY))return d=!1,{success:!0,result:i.StyxApiResult.NoBatchesSent};const c=await o.readItem(u.EVENT_QUEUE_STORAGE_KEY);if(!c)return d=!1,{success:!0,result:i.StyxApiResult.NoBatchesSent};if("string"!=typeof c)throw new Error("value of EventLogger.eventQueue is expected to be a string");const l=await(0,s.decryptEvents)(r,c,a),f=l.filter((e=>"anonymous"===e.category)),g=l.filter((e=>"user"===e.category)),m=await p(r,f,"/v1/event/anonymous"),h=await p(r,g,"/v1/event/user"),y=await o.readItem(u.EVENT_QUEUE_STORAGE_KEY);if("string"!=typeof y)throw new Error("value of EventLogger.eventQueue is expected to be a string");const S=(await(0,s.decryptEvents)(r,y,a)).filter((({id:e})=>!(m.includes(e)||h.includes(e)))),v=await(0,s.encryptEvents)(r,S,a);await o.writeItem(u.EVENT_QUEUE_STORAGE_KEY,v);const E=m.length>0||h.length>0,A=0===v.length;let _=i.StyxApiResult.NoBatchesSent;return A?_=i.StyxApiResult.AllBatchesSent:E&&(_=i.StyxApiResult.SomeBatchesSent),d=!1,{success:!0,result:_}},t.immediatelySendEventsToStyx=async function(e,t){const{storeService:r}=e,n=t.logStorage.copy();t.logStorage.removeEvents(n.map((e=>e.id)));const o=n.filter((e=>"anonymous"===e.category)),a=n.filter((e=>"user"===e.category)),s=await p(r,o,"/v1/event/anonymous"),c=await p(r,a,"/v1/event/user"),u=s.length>0||c.length>0,l=s.length+c.length===n.length;let d=i.StyxApiResult.NoBatchesSent;return l?d=i.StyxApiResult.AllBatchesSent:u&&(d=i.StyxApiResult.SomeBatchesSent),{success:!0,result:d}}},66102:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flushQueue=t.logToggleAnalyticsEvent=t.logPageView=t.logEvent=void 0;const n=r(10203),o=r(78671),a=r(82481),i=r(26415),s=r(4296),c=r(87564),u=r(10460);t.logEvent=async function(e,t){const{interactionDataConsent:r}=await(0,o.getGlobalExtensionSettings)(e);if(!1===r)return{result:a.StyxApiResult.NoBatchesSent,success:!1};const{logger:n,logRepository:c}=(0,i.createLogger)(e);return n.logEvent(t.event),(0,s.queueLogRepositoryEvents)(e,c)},t.logPageView=async function(e,t){const{interactionDataConsent:r}=await(0,o.getGlobalExtensionSettings)(e);if(!1===r)return{result:a.StyxApiResult.NoBatchesSent,success:!1};const{logger:n,logRepository:c}=(0,i.createLogger)(e);return n.logView(t.pageView,t.browseComponent),(0,s.queueLogRepositoryEvents)(e,c)},t.logToggleAnalyticsEvent=async function(e){const{interactionDataConsent:t}=await(0,o.getGlobalExtensionSettings)(e),{logger:r,logRepository:a}=(0,i.createLogger)(e),c=!1!==t;if(c||(0,u.clearEventQueue)(e,a),r.logEvent(new n.UserToggleAnalyticsEvent({isAnalyticsEnabled:c})),!t)try{return(0,s.immediatelySendEvents)(e,a)}catch{return(0,s.queueLogRepositoryEvents)(e,a)}return(0,s.queueLogRepositoryEvents)(e,a)},t.flushQueue=function(e){return(0,c.sendEventQueueToStyx)(e)}},10460:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearEventQueue=t.storeEventsInQueue=t.EVENT_QUEUE_STORAGE_KEY=void 0;const n=r(2246),o=r(87911);t.EVENT_QUEUE_STORAGE_KEY="EventLogger.eventQueue",t.storeEventsInQueue=async function(e,r){const{storageService:a,storeService:i}=e,s=a.getLocalStorage(),c=(0,n.getCommonAppSetting)("eventLoggerQueueKey"),u=r.logStorage.copy();let l=[];const d=[];if(await s.itemExists(t.EVENT_QUEUE_STORAGE_KEY)){const e=await s.readItem(t.EVENT_QUEUE_STORAGE_KEY);if("string"!=typeof e)throw new Error("value of EventLogger.eventQueue is expected to be a string");e&&(l=await(0,o.decryptEvents)(i,e,c))}l=l.concat(u),l.map((e=>d.filter((t=>t.id===e.id)).length>0?null:d.push(e)));const p=await(0,o.encryptEvents)(i,d,c);await s.writeItem(t.EVENT_QUEUE_STORAGE_KEY,p);const f=u.map((e=>e.id));r.logStorage.removeEvents(f)},t.clearEventQueue=async function(e,r){const{storageService:a,storeService:i}=e,s=a.getLocalStorage(),c=(0,n.getCommonAppSetting)("eventLoggerQueueKey"),u=await(0,o.encryptEvents)(i,[],c);await s.writeItem(t.EVENT_QUEUE_STORAGE_KEY,u);const l=r.logStorage.copy().map((e=>e.id));r.logStorage.removeEvents(l)}},99921:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventLoggerStoreFactory=void 0;const n=r(38912);t.EventLoggerStoreFactory=class{constructor(e){this.storeService=e}createStore(e,t){const{storeService:r}=this;return r.dispatch((0,n.createEventLoggerVirtualStore)({storeName:e,initialState:t.initialState})),this.makeStore(e)}getStore(e){if(!this.hasStore(e))throw new Error(`Store ${e} was not found`);return this.makeStore(e)}hasStore(e){const{storeService:t}=this;return e in t.getState().device.eventLogger}makeStore(e){const{storeService:t}=this;return{getState:()=>t.getState().device.eventLogger[e],updateState:r=>t.dispatch((0,n.updateEventLoggerVirtualStoreState)({storeName:e,updater:r}))}}}},33341:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(14414);t.config={commands:{logException:{handler:n.logException}},liveQueries:{},queries:{}}},69335:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},55101:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(33341);t.bootstrap=e=>{e.register(n.config)}},70252:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendTypedExceptionLog=t.sendExceptionLog=t.setAllowedToSendExceptionLog=t.bootstrap=void 0;const n=r(60790),o=r(12126),a=r(95623);var i=r(55101);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return i.bootstrap}});let s=!0;t.setAllowedToSendExceptionLog=e=>s=e,t.sendExceptionLog=async function(e){if(s)try{await(0,n.default)((0,o.default)("carbonException",e))}catch(e){a.Debugger.error(`[Exception] - sendExceptionLog: ${e.message||e}`)}},t.sendTypedExceptionLog=async function(e,t){if(s)try{await(0,n.default)((0,o.default)(e,t))}catch(e){a.Debugger.error(`[Exception] - sendTypedExceptionLog: ${e.message||e}`)}}},12126:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.anonymousSessionId=void 0;const n=r(28354),o=r(86056),a=r(90503),i=r(92263),s=r(48749);function c(e){const r=function(e){const t={...e,codeName:s.config.CODE_NAME,manifestVersion:s.config.MANIFEST_VERSION};return JSON.stringify(t)}(e.additionalInfo);return{action:"logOnline",code:e.code===a.ExceptionCriticality.WARNING?a.ExceptionCriticality.WARNING:a.ExceptionCriticality.ERROR,message:e.message||"",exceptiontype:e.type,functionName:e.funcName,file:e.fileName,legacy:Boolean(e.legacy),line:e.line,stack:e.precisions,sessionId:t.anonymousSessionId,additionalInfo:r,errorCount:1,featureFlips:[],initialUseCaseModule:e.initialUseCaseModule??"carbon",initialUseCaseName:e.initialUseCaseName,useCaseStacktrace:e.useCaseStacktrace??[]}}function u(e,t){const r=t;if(r.error){const t=r.error.precisions&&"string"==typeof r.error.precisions?`${r.error.message}\n${r.error.precisions}`:r.error.message,n=(0,i.isCarbonError)(r.error)?r.error.getAdditionalInfo():{};return c({type:e,message:t,code:r.code||r.error.errorLevel,precisions:r.error.stack,additionalInfo:n,initialUseCaseModule:"carbon",initialUseCaseName:""})}return c(Object.assign({type:e},t))}t.anonymousSessionId=(0,n.v4)(),t.default=function(e,t){return{...(r=(0,o.getPlatformInfo)(),{type:r.platformName,version:r.appVersion,osVersion:r.osVersion,browser:r.browser,browserVersion:r.browserVersion,os:r.os}),...u(e,t)};var r}},60790:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXCEPTION_LOG_ENDPOINT=void 0;const n=r(28445),o=r(95623);t.EXCEPTION_LOG_ENDPOINT="https://kck3hlb9.dashlane.com/1/softwarelog/create";t.default=function(e){return function(e,t,r){const n=e.message||e.functionName||e.file||"UNKNOWN_EXCEPTION";return a[n]=a[n]||0,a[n]++,a[n]>10?Promise.resolve():r()}(e,0,(()=>(0,n.postDataToUrl)(t.EXCEPTION_LOG_ENDPOINT,e).then((()=>{})).catch((e=>o.default.log(e)))))};const a={}},14414:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logException=void 0;const n=r(70252);t.logException=async function(e,t){return await(0,n.sendTypedExceptionLog)(t.exceptionType,t.log),{success:!0}}},90503:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExceptionCriticality=void 0,function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR"}(t.ExceptionCriticality||(t.ExceptionCriticality={}))},32588:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXCEPTION_LOG_TAG=t.DEBUGGER_LOG_TAG=t.LOGS_LOG_TAG=void 0,t.LOGS_LOG_TAG="Logs",t.DEBUGGER_LOG_TAG="Debugger",t.EXCEPTION_LOG_TAG="Exception"},88393:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(24375),o=r(55111),a=r(90235),i=r(26972),s=r(56857);t.config={commands:{markNotificationAsInteracted:{handler:n.markNotificationAsInteracted},markNotificationAsSeen:{handler:o.markNotificationAsSeen},markNotificationAsUnseen:{handler:a.markNotificationAsUnseen}},queries:{getNotificationStatus:{selector:s.notificationsStatusSelector}},liveQueries:{liveNotificationStatus:{operator:i.notificationsStatus$}}}},66869:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationStatus=t.NotificationName=void 0;var n=r(82028);Object.defineProperty(t,"NotificationName",{enumerable:!0,get:function(){return n.NotificationName}}),Object.defineProperty(t,"NotificationStatus",{enumerable:!0,get:function(){return n.NotificationStatus}})},42122:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(88393);t.bootstrap=e=>{e.register(n.config)}},70530:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(42122);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},24375:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markNotificationAsInteracted=void 0;const n=r(34287),o=r(56857);t.markNotificationAsInteracted=async(e,t)=>{const{storeService:r,localStorageService:a}=e;r.dispatch((0,n.markAsInteracted)(t));const i=(0,o.notificationsStatusSelector)(r.getState());a.getInstance().storeNotificationsStatus(i)}},55111:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markNotificationAsSeen=void 0;const n=r(34287),o=r(56857);t.markNotificationAsSeen=async(e,t)=>{const{storeService:r,localStorageService:a}=e;r.dispatch((0,n.markAsSeen)(t));const i=(0,o.notificationsStatusSelector)(r.getState());a.getInstance().storeNotificationsStatus(i)}},90235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markNotificationAsUnseen=void 0;const n=r(34287),o=r(56857);t.markNotificationAsUnseen=async(e,t)=>{const{storeService:r,localStorageService:a}=e;r.dispatch((0,n.markAsUnseen)(t));const i=(0,o.notificationsStatusSelector)(r.getState());a.getInstance().storeNotificationsStatus(i)}},82028:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationStatus=t.NotificationName=void 0,function(e){e.PaymentFailureChurning="paymentFailureChurning",e.PaymentFailureChurned="paymentFailureChurned",e.IdsPromotion="idsPromotion",e.SwitchToMlAnalysisEngine="switchToMlAnalysisEngine",e.DWMb2bAutoEnrollTooltip="dWMb2bAutoEnrollTooltip",e.VpnProviderIsNowHotspot="vpnProviderIsNowHotspot",e.VpnHostpotshieldInstalled="vpnHostpotshieldInstalled",e.PopupIncomingTabPayments="popupIncomingTabPayments",e.PopupIncomingTabSecureNotes="popupIncomingTabSecureNotes",e.PopupIncomingTabPersonalInfo="popupIncomingTabPersonalInfo",e.PopupIncomingTabIDs="popupIncomingTabIDs",e.NewAccountMenuTooltip="newAccountMenuTooltip",e.TacGetTheExtensionBanner="tacGetTheExtensionBanner",e.TacEnableAccountRecoveryBanner="tacEnableAccountRecoveryBanner",e.TacOnlyOneAdminBanner="tacOnlyOneAdminBanner",e.TacDarkWebInsightsNewBadge="tacDarkWebInsightsNewBadge",e.PasswordHistoryBanner="passwordHistoryBanner",e.SharingCenterDisabledBanner="sharingCenterDisabledBanner",e.MultiselectGuideDelete="multiselectGuideDelete",e.MultiselectGuideShift="multiselectGuideShift",e.AccountRecoveryAvailableAdminTooltip="accountRecoveryAvailableAdminTooltip",e.AccountRecoveryAvailableEmployeeDialog="accountRecoveryAvailableEmployeeDialog",e.ActivateInviteLink="activateInviteLink"}(t.NotificationName||(t.NotificationName={})),function(e){e.Interacted="interacted",e.Seen="seen",e.Unseen="unseen"}(t.NotificationStatus||(t.NotificationStatus={}))},62952:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(57470),o=r(45709),a=r(91880);t.config={commands:{generatePassword:{handler:n.generatePasswordHandler},generateAndSavePassword:{handler:n.generateAndSavePasswordHandler},savePasswordGenerationSettings:{handler:o.savePasswordGenerationSettingsHandler}},queries:{getPasswordGenerationSettings:{selector:a.passwordGenerationSettingsSelector}},liveQueries:{}}},64811:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(62952);t.bootstrap=e=>{e.register(n.config)}},57470:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateAndSavePasswordHandler=t.generatePasswordHandler=void 0;const n=r(47975),o=r(95623),a=r(70252),i=r(5464);t.generatePasswordHandler=async function(e,t){try{const r=(0,i.makeSessionController)(e).generatePassword(t.settings);return{success:!0,password:r,strength:await(0,n.evaluatePasswordStrength)(r)}}catch(e){return(0,o.logError)(e),(0,a.sendExceptionLog)({error:e}),{success:!1}}},t.generateAndSavePasswordHandler=async function(e,t){try{const r=(0,i.makeSessionController)(e).generateAndSavePassword(t.url);return{success:!0,password:r,strength:await(0,n.evaluatePasswordStrength)(r)}}catch(e){return(0,o.logError)(e),(0,a.sendExceptionLog)({error:e}),{success:!1}}}},45709:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.savePasswordGenerationSettingsHandler=void 0;const n=r(10203),o=r(95623),a=r(70252),i=r(44908),s=r(29954),c=r(23136);t.savePasswordGenerationSettingsHandler=async function(e,t){try{const o={GeneratorDefaultSize:(r=(0,i.fixIncoherentSettings)(t)).length,GeneratorDefaultAvoidAmbiguousChars:r.avoidAmbiguous,GeneratorDefaultDigits:r.digits,GeneratorDefaultLetters:r.letters,GeneratorDefaultSymbols:r.symbols};(0,s.updatePersonalSettings)(e.storeService,e.sessionService,o),(0,c.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.SettingsChange)}catch(e){(0,o.logError)(e),(0,a.sendExceptionLog)({error:e})}var r}},91880:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passwordGenerationSettingsSelector=void 0;const n=r(16593),o=r(44908);t.passwordGenerationSettingsSelector=function(e){const t=(0,n.personalSettingsSelector)(e);return(0,o.getDefaultPasswordGenerationSettings)(t)}},73496:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordLeakErrors=void 0,function(e){e.GET_LAST_CHECK_TIMESTAMP="GET_LAST_CHECK_TIMESTAMP",e.GET_IS_MP_LEAKED="GET_IS_MP_LEAKED"}(t.PasswordLeakErrors||(t.PasswordLeakErrors={}))},76860:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkPasswordLeaked=void 0;const n=r(18948),o=r(10203),a=r(58807),i=r(73496);t.checkPasswordLeaked=async function(e,t){const{password:r}=t,{eventLoggerService:s,applicationModulesAccess:c}=e,{queries:{lastCheckTimestamp:u,isMasterPasswordLeaked:l},commands:{temporaryCheckMasterPassword:d}}=c.createClients().masterPasswordSecurity,p=await(0,n.firstValueFrom)(u());if((0,a.isFailure)(p))return{success:!1,error:{code:i.PasswordLeakErrors.GET_LAST_CHECK_TIMESTAMP}};await d({password:r});const f=await(0,n.firstValueFrom)(u());if((0,a.isFailure)(f))return{success:!1,error:{code:i.PasswordLeakErrors.GET_LAST_CHECK_TIMESTAMP}};const g=await(0,n.firstValueFrom)(l());if((0,a.isFailure)(g))return{success:!1,error:{code:i.PasswordLeakErrors.GET_IS_MP_LEAKED}};const{data:m}=g;return p.data!==f.data&&await s.logEvent(new o.AnonymousMasterPasswordHealthReportEvent({isLeaked:m})),{success:!0,response:{isLeaked:m}}}},43057:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(20478);t.setupSubscriptions=async function(e,t){e.sessionOpened.on((()=>(0,n.triggerMasterPasswordLeakCheck)(t)))}},20478:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerMasterPasswordLeakCheck=void 0;const n=r(76860),o=r(16593),a=r(38981);t.triggerMasterPasswordLeakCheck=async function(e){const t=e.storeService.getState();if((0,a.isSSOUserSelector)(t))return;const r=(0,o.masterPasswordSelector)(t);(0,n.checkPasswordLeaked)(e,{password:r})}},34161:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(30467),o=r(53264),a=r(18693),i=r(97475),s=r(50893);t.config={commands:{cancelAutoRenew:{handler:a.cancelAutoRenew},downloadCustomerInvoice:{handler:o.downloadCustomerInvoice},fetchInvoiceList:{handler:i.fetchInvoiceList},requestRefund:{handler:s.requestRefund}},queries:{getInvoicesCount:{selector:n.allInvoicesLengthSelector},getInvoiceList:{selector:n.viewedQueriedInvoicesSelector},getInvoiceListYears:{selector:n.invoiceListYearsSelector}},liveQueries:{}}},83042:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrderDir=void 0,function(e){e.ascending="ascending",e.descending="descending"}(t.OrderDir||(t.OrderDir={}))},78025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(34161);t.bootstrap=e=>{e.register(n.config)}},18693:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelAutoRenew=void 0;const n=r(70252);t.cancelAutoRenew=async function(e){const{sessionService:t,storeService:r}=e;if(!r.isAuthenticated())return{success:!1};try{return await t.getInstance().payment.cancelPremiumSubscription(),{success:!0}}catch(e){const t=`[SessionController] - cancelPremiumSubscription: ${e}`,r=new Error(t);return(0,n.sendExceptionLog)({error:r}),{success:!1,error:{code:t}}}}},53264:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.downloadCustomerInvoice=void 0;const n=r(46298),o=r(48008);t.downloadCustomerInvoice=async function(e,t){const{storeService:r}=e,a=r.getUserLogin(),i=await(0,o.getCustomerInvoice)(r,a,t);return(0,n.isApiError)(i)?{success:!1}:{success:!0,data:JSON.stringify({data:Array.apply(null,new Uint8Array(i.data))})}}},97475:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchInvoiceList=void 0;const n=r(46298),o=r(36273),a=r(95944);t.fetchInvoiceList=async function(e){const{storeService:t}=e,r=t.getUserLogin();if(!t.isAuthenticated())return{success:!1};try{const e=await(0,o.listInvoices)(t,r);return(0,n.isApiError)(e)?{success:!1}:(t.dispatch((0,a.receivedInvoiceList)(e.invoices)),{success:!0})}catch(e){return{success:!1}}}},50893:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestRefund=void 0;const n=r(46298),o=r(48523),a=r(5464);t.requestRefund=async function(e,t){const{sessionService:r,storeService:i,wsService:s}=e,c=i.getUserLogin();if(!i.isAuthenticated())return{success:!1};try{const e=await(0,o.grantFullRefundAndCancelSubscription)(i,c,t);return(0,n.isApiError)(e)?{success:!1}:(t&&!t.dryRun&&(0,a.refeshAccountInfo)(i,r,s),{success:!0})}catch(e){return{success:!1}}}},7753:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(78025);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},98584:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInvoiceMappers=void 0;const n=r(25424);t.getInvoiceMappers=()=>({amountPaid:e=>e.amountPaid,invoiceId:e=>e.invoiceId,planName:e=>(e=>"advanced"===e.planFeature?"ADVANCED":"essentials"===e.planFeature?"ESSENTIALS":["family_created","family_renewed"].includes(e.eventType)?"FAMILY":"sync"===e.planFeature?"PREMIUM":"OTHER")(e),startDate:e=>e.startDate,startYear:e=>(e=>(0,n.fromUnixTime)(e.startDate).getFullYear().toString())(e)})},73938:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(28903),o=r(64331),a=r(81846),i=r(84547);t.config={commands:{unlockProtectedItems:{handler:n.unlockProtectedItems},disableCredentialProtection:{handler:i.disableCredentialProtectionHandler}},queries:{areProtectedItemsUnlocked:{selector:a.areProtectedItemsAvailableSelector}},liveQueries:{liveAreProtectedItemsUnlocked:{operator:o.areProtectedItemsUnlocked$}}}},18982:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unlockProtectedItemsWrongPasswordError=t.UnlockProtectedItemsStatus=t.DisableCredentialProtectionStatus=void 0;var n=r(64966);Object.defineProperty(t,"DisableCredentialProtectionStatus",{enumerable:!0,get:function(){return n.DisableCredentialProtectionStatus}}),Object.defineProperty(t,"UnlockProtectedItemsStatus",{enumerable:!0,get:function(){return n.UnlockProtectedItemsStatus}}),Object.defineProperty(t,"unlockProtectedItemsWrongPasswordError",{enumerable:!0,get:function(){return n.unlockProtectedItemsWrongPasswordError}})},28903:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unlockProtectedItems=void 0;const n=r(64966),o=r(28287);t.unlockProtectedItems=async function(e,t){const{storeService:r,masterPasswordEncryptorService:a}=e;return await(0,o.validateMasterPassword)(r,a,t)?{status:n.UnlockProtectedItemsStatus.SUCCESS}:{status:n.UnlockProtectedItemsStatus.ERROR,error:{code:n.unlockProtectedItemsWrongPasswordError}}}},64710:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(73938);t.bootstrap=e=>{e.register(n.config)}},84547:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableCredentialProtectionHandler=void 0;const n=r(38250),o=r(18344);t.disableCredentialProtectionHandler=async function(e,{credentialId:t}){const{storeService:r,sessionService:a,eventLoggerService:i,applicationModulesAccess:s}=e;try{return await(0,o.disableCredentialProtection)({storeService:r,sessionService:a,eventLoggerService:i,applicationModulesAccess:s},t),{status:n.DisableCredentialProtectionStatus.SUCCESS}}catch(e){return{status:n.DisableCredentialProtectionStatus.ERROR}}}},18344:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableCredentialProtection=void 0;const n=r(19736),o=r(88779),a=({update:{autoprotected:e}})=>({AutoProtected:e});t.disableCredentialProtection=async function({storeService:e,sessionService:t,eventLoggerService:r,applicationModulesAccess:i},s){const c=e.getState();if(!(0,n.credentialSelector)(c,s))throw new Error("Credential does not exist, cant update");(0,o.updateCredential)({storeService:e,sessionService:t,eventLoggerService:r,applicationModulesAccess:i},{id:s,update:{autoprotected:!1}},a)}},88530:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var a=r(64710);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return a.bootstrap}}),o(r(18982),t)},64331:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areProtectedItemsUnlocked$=void 0;const n=r(18948),o=r(81846),a=r(3343);t.areProtectedItemsUnlocked$=()=>(0,n.pipe)((0,a.map)((e=>(0,n.interval)(1e3).pipe((0,a.map)((()=>e))))),(0,a.switchMap)((e=>e)),(0,a.map)(o.areProtectedItemsAvailableSelector),(0,a.distinctUntilChanged)())},81846:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areProtectedItemsAvailableSelector=t.areProtectedItemsUnlockedSelector=void 0;const n=r(38981),o=r(16593);t.areProtectedItemsUnlockedSelector=e=>Date.now()-(0,o.lastMasterPasswordCheckSelector)(e)<(e=>/^kw_test_auto_fmpc_.*/.test((0,o.userLoginSelector)(e))?5e3:3e5)(e),t.areProtectedItemsAvailableSelector=e=>(0,t.areProtectedItemsUnlockedSelector)(e)||(0,n.isSSOUserSelector)(e)},64966:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisableCredentialProtectionStatus=t.unlockProtectedItemsWrongPasswordError=t.UnlockProtectedItemsStatus=void 0,function(e){e.SUCCESS="success",e.ERROR="error"}(t.UnlockProtectedItemsStatus||(t.UnlockProtectedItemsStatus={})),t.unlockProtectedItemsWrongPasswordError="WRONG PASSWORD",function(e){e.SUCCESS="success",e.ERROR="error"}(t.DisableCredentialProtectionStatus||(t.DisableCredentialProtectionStatus={}))},20054:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(85423),o=r(97810),a=r(43591),i=r(16593),s=r(18191);t.config={commands:{activateAccountRecovery:{handler:o.activateAccountRecovery},setupMasterPasswordForRecovery:{handler:a.setupMasterPasswordForRecovery},deactivateAccountRecovery:{handler:o.deactivateAccountRecovery},registerDeviceForRecovery:{handler:a.registerDeviceForRecovery},startAccountRecovery:{handler:a.startAccountRecovery},sendRecoveryRequest:{handler:a.sendRecoveryRequest},cancelRecoveryRequest:{handler:a.cancelRecoveryRequest},checkRecoveryRequestStatus:{handler:a.checkRecoveryRequestStatus},recoverUserData:{handler:a.recoverUserData},checkDoesLocalRecoveryKeyExist:{handler:a.checkDoesLocalRecoveryKeyExist},isRecoveryRequestPending:{handler:o.isRecoveryRequestPending}},queries:{getRecoveryOptInSetting:{selector:i.accountRecoveryOptInSelector},getShouldShowFeatureActivationModal:{selector:n.shouldShowFeatureActivationModalSelector},getAccountRecoveryRequestCount:{selector:n.accountRecoveryRequestsCountSelector}},liveQueries:{liveAccountRecoveryRequestCount:{operator:s.accountRecoveryRequestsCount$}}}},41346:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},15444:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeRecoveryController=void 0;const n=r(36513),o=r(95623),a=r(70252),i=r(34376),s=r(43927);function c(e,t,r){return(0,a.sendExceptionLog)({error:t}),o.Debugger.log(e,t),{error:{message:t.message,action:r}}}t.makeRecoveryController=(e,t)=>({getMasterPasswordResetDemandList:r=>function(e,t,r,n){const o=n.teamId;return t.recovery.getPendingRequests({login:r.login,uki:r.uki,teamId:o}).then((t=>{const n=e.getTeamAdminData(),a=Object.assign({},n),i=t.filter((e=>e.login!==r.login));return a.teams[o]&&(a.teams[o].notifications={accountRecoveryRequests:i},(0,s.updateTeamAdminData)(e,a)),{demands:i}})).catch((e=>({demands:[],error:c("Master Password Reset: Error while getPendingRequests",e,n).error})))}(e,t,(0,i.getCurrentUserInfo)(e),r),acceptMasterPasswordResetDemand:r=>function(e,t,r){const o=(0,n.makeAsymmetricEncryption)();return o.decrypt(t.privateKey,r.recoveryKey).then((e=>o.encrypt(r.userPublicKey,e))).then((n=>e.recovery.acceptRequest({login:t.login,uki:t.uki,sourceLogin:r.login,payload:n}))).then((()=>({}))).catch((e=>c("Master Password Reset: Error while acceptRequest",e,r)))}(t,(0,i.getCurrentUserInfo)(e),r),declineMasterPasswordResetDemand:r=>function(e,t,r){return e.recovery.refuseRequest({login:t.login,uki:t.uki,sourceLogin:r.login}).then((()=>({}))).catch((e=>c("Master Password Reset: Error while refuseRequest",e,r)))}(t,(0,i.getCurrentUserInfo)(e),r)})},63395:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(20054);t.bootstrap=e=>{e.register(n.config)}},76569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(63395);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},18191:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accountRecoveryRequestsCount$=void 0;const n=r(18948),o=r(3343),a=r(85423);t.accountRecoveryRequestsCount$=function(){return(0,n.pipe)((0,o.map)((e=>(0,a.accountRecoveryRequestsCountSelector)(e))),(0,o.distinctUntilChanged)())}},85423:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accountRecoveryRequestsCountSelector=t.selectTeamAdminData=t.recoveryHashFromPremiumStatusSelector=t.recoveryHashFromPersonalSettingsSelector=t.shouldShowFeatureActivationModalSelector=void 0;const n=r(88205),o=r(26634),a=r(38981),i=r(16593),s=r(27885);t.shouldShowFeatureActivationModalSelector=e=>{const t=(0,n.hasFeatureSelector)(e,"SAEXAccountRecoveryv3"),r=(0,o.isRecoveryEnabledSelector)(e),i="boolean"==typeof e.userSession.personalSettings.RecoveryOptIn,s=(0,a.isSSOUserSelector)(e),c=e.userSession.session.isFirstSessionAfterAccountCreation;return!s&&t&&r&&!i&&!c},t.recoveryHashFromPersonalSettingsSelector=e=>(0,i.personalSettingsSelector)(e).RecoveryHash||"",t.recoveryHashFromPremiumStatusSelector=e=>(0,i.premiumStatusSelector)(e).recoveryHash||"",t.selectTeamAdminData=e=>e.userSession.teamAdminData??{teams:{}},t.accountRecoveryRequestsCountSelector=e=>{const r=(0,s.getCurrentTeamId)(e.userSession.spaceData);if(!r)return 0;const{teams:n}=(0,t.selectTeamAdminData)(e);return Number(n[r]?.notifications?.accountRecoveryRequests?.length??0)}},43591:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recoverUserData=t.checkDoesLocalRecoveryKeyExist=t.cancelRecoveryRequest=t.checkRecoveryRequestStatus=t.sendRecoveryRequest=t.setupMasterPasswordForRecovery=t.registerDeviceForRecovery=t.startAccountRecovery=void 0;const n=r(53576),o=r(33476),a=r(70252),i=r(70414),s=r(25576),c=r(87855),u=r(36513),l=r(46298),d=r(88077),p=r(29303),f=r(16593),g=r(16356),m=r(28096),h=r(95363),y=r(88610),S=r(47820);t.startAccountRecovery=async function(e,t){const{storeService:r}=e,{login:n}=t,a=await(0,d.requestDeviceRegistration)(r,{login:n});return(0,l.isApiError)(a)?{success:!1,error:{code:o.ApiErrorType.StartAccountRecoveryFailed,message:`Start account recovery failed: ${a.message}`}}:(r.dispatch((0,h.saveRecoverySessionData)({verificationMethod:a.verification})),{success:!0,verification:a.verification})},t.registerDeviceForRecovery=async function(e,t){try{const{token:r,login:n}=t,{storeService:a,wsService:u}=e,f=a.getState(),g=a.getPlatformInfo().platformName,m=!0,y=await(0,d.requestDeviceRegistration)(a,{login:n});if((0,l.isApiError)(y))return{success:!1,error:{code:o.ApiErrorType.RegisterDeviceFailed,message:"Recovery Device request registration failed"}};const S=(0,p.recoveryIsOtpSelector)(f),v=await(0,c.ensureDeviceId)(),E=(0,i.generateUki)(v),A={uki:E,login:n,platform:g,temporary:s.PersistData.PERSIST_DATA_NO,recovery:m},_=S?{otp:r}:{token:r};if("SUCCESS"!==await u.authentication.registerUki({...A,..._}))return{success:!1,error:{code:o.ApiErrorType.RegisterDeviceFailed,message:"Recovery Device registration failed"}};a.dispatch((0,h.saveRecoverySessionData)({recoveryUki:E}))}catch(e){return(0,a.sendExceptionLog)({error:e}),{success:!1,error:{code:o.ApiErrorType.RegisterDeviceFailed,message:e.message}}}return{success:!0}},t.setupMasterPasswordForRecovery=async function(e,t){let r="[Account Recovery PI] - Setup Master Password For Recovery ";const n=e=>{r+=`- ${e} \n`};try{const{storeService:i,localStorageService:s}=e,{masterPassword:c}=t,l=i.getState();n("recoveryUki select START");const d=(0,p.recoveryUkiSelector)(l);if(!d){const e={code:o.ApiErrorType.SetupMasterPasswordForRecoveryFailed,message:"recoveryUki does not exist"};return n(`setupMasterPasswordForRecovery failed with error: ${e.code} ${e.message}`),(0,a.sendExceptionLog)({message:r,funcName:"setupMasterPasswordForRecovery"}),{success:!1,error:e}}n("recoveryUki select SUCCESS"),n("dispatch updateMasterPassword START"),i.dispatch((0,g.updateMasterPassword)(c)),n("dispatch updateMasterPassword SUCCESS"),n("makeCyptoService START");const f=(0,u.makeCryptoService)();n("makeCyptoService SUCCESS"),n("generateRsaKeyPair START");const{publicKey:m,privateKey:y}=await f.asymmetricEncryption.generateRsaKeyPair();n("generateRsaKeyPair SUCCESS"),n("dispatch saveRecoverySessionData START"),i.dispatch((0,h.saveRecoverySessionData)({publicKey:m})),n("dispatch saveRecoverySessionData SUCCESS"),n("encryptUkiAndPrivateKey START");const v=await(0,S.encryptUkiAndPrivateKey)(d,y,c,i);return n("encryptUkiAndPrivateKey SUCCESS"),n("storeRecoveryData START"),await s.getInstance().storeRecoveryData(v),n("storeRecoveryData SUCCESS"),{success:!0}}catch(e){return n(`setupMasterPasswordForRecovery failed with error: ${e}`),(0,a.sendExceptionLog)({message:r,funcName:"setupMasterPasswordForRecovery",precisions:e.stack}),{success:!1,error:{code:o.ApiErrorType.SetupMasterPasswordForRecoveryFailed,message:e.message}}}},t.sendRecoveryRequest=async function(e){try{const{storeService:t,wsService:r}=e;return await(0,S.sendRecoveryRequestToAdmin)(t,r),{success:!0}}catch(e){return(0,a.sendExceptionLog)({error:e}),{success:!1,error:{code:o.ApiErrorType.RecoveryRequestFailed,message:e.message}}}},t.checkRecoveryRequestStatus=async function(e,t){try{const{storeService:r,localStorageService:n,wsService:a}=e,{masterPassword:i}=t,s=r.getState(),c=(0,f.userLoginSelector)(s);if(!c)return{success:!1,error:{code:o.ApiErrorType.CheckRecoveryStatusFailed,message:"Missing login"}};r.dispatch((0,g.updateMasterPassword)(i));const u=await(0,S.retrieveRecoveryUkiFromStorage)(r,n,i),{content:{status:l,payload:d,recoveryServerKey:p}}=await a.recovery.request({login:c,uki:u});return d&&p&&r.dispatch((0,h.saveRecoverySessionData)({userServerProtectedSymmetricalKey:d,recoveryServerKeyBase64:p})),{success:!0,response:{status:l}}}catch(e){return{success:!1,error:{code:o.ApiErrorType.CheckRecoveryStatusFailed,message:e.message}}}},t.cancelRecoveryRequest=async function(e){try{const{storeService:t,localStorageService:r,wsService:n}=e,o=t.getState(),a=(0,f.userLoginSelector)(o),i=(0,f.masterPasswordSelector)(o),s=await(0,S.retrieveRecoveryUkiFromStorage)(t,r,i);return await n.recovery.cancelRequest({login:a,uki:s}),await r.getInstance().cleanRecoveryData(),{success:!0}}catch(e){return{success:!1,error:{code:o.ApiErrorType.CancelRecoveryRequestFailed,message:e.message}}}},t.checkDoesLocalRecoveryKeyExist=async function(e){try{const{localStorageService:t}=e,r=t.getInstance();return{success:!0,doesExist:await r.doesRecoveryLocalKeyExist()}}catch(e){return{success:!1,error:{code:o.ApiErrorType.CheckLocalRecoveryKeyFailed,message:e.message}}}},t.recoverUserData=async function(e,t){const{localStorageService:r,storeService:i,sessionService:c}=e,l=i.getState(),d=r.getInstance(),g=await(0,S.validateInitialData)(l,d);let v="[Account Recovery PI] - Recover User Data ";const E=e=>{v+=`- ${e} \n`};if(!g.success)return g;const{masterPassword:A}=t;try{E("Extract PrKey START");const t=await(0,S.extractPrivateKeyFromRecoveryData)(e,A,E);E("Extract PrKey SUCCESS");const{userServerProtectedSymmetricalKey:r}=(0,p.recoveryDataSelector)(l),c=await(0,u.makeAsymmetricEncryption)();E("Decrypt user protected key START");const g=await c.decrypt(t,r);E("Decrypt user protected key SUCCESS"),E("Decrypt server protected key START");const m=await(0,S.extractRecoveryKey)(i,g,E);E("Decrypt server protected key SUCCESS"),E("Extract local Key START");const _=await(0,S.extractLocalKey)(e,m,E);E("Extract local Key SUCCESS"),await(0,S.prepareLocalDataEncryptorService)(e,_),E("Get recovery credentials START");const b=await d.getRecoverySessionCredential();E("Get recovery credentials SUCCESS");const{masterPassword:T}=JSON.parse(atob(b)),I=(0,f.userLoginSelector)(l),w=s.PersistData.PERSIST_DATA_YES;i.dispatch((0,h.saveRecoverySessionData)({recoveryInProgress:!0})),E("Open session START");const C=await(0,y.openSessionWithMasterPassword)(e,I,T,{isDataPersisted:w,serverKey:(0,f.serverKeySelector)(l)},E);if(E("Open session SUCCESS"),C!==n.LoginResultEnum.LoggedIn)return E("Open session SUCCESS but user not logged in"),(0,a.sendExceptionLog)({message:v,funcName:"recoverUserData"}),(0,S.recoveryFlowError)(o.ApiErrorType.RecoverUserDataFailed,`Unable to login with ${C}`);i.dispatch((0,h.saveRecoverySessionData)({recoveryInProgress:!1,currentPassword:T}))}catch(e){return E(`Recovery failed with error: ${e}`),(0,a.sendExceptionLog)({message:v,funcName:"recoverUserData",precisions:e.stack}),i.dispatch((0,h.resetRecoverySessionData)()),await c.close(),(0,m.triggerOpenSessionFailed)(new Error(m.AuthenticationCode[m.AuthenticationCode.WRONG_PASSWORD])),(0,S.recoveryFlowError)(o.ApiErrorType.RecoverUserDataFailed,"Unable to decipher data")}return{success:!0}}},47820:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.storeSessionCredentialForRecovery=t.prepareLocalDataEncryptorService=t.extractLocalKey=t.extractRecoveryKey=t.extractPrivateKeyFromRecoveryData=t.validateInitialData=t.recoveryFlowError=t.retrieveRecoveryUkiFromStorage=t.triggerCleanOrSetupAccountRecovery=t.isARFeatureActivatedForUser=t.isARAvailableForUser=t.sendRecoveryRequestToAdmin=t.encryptUkiAndPrivateKey=t.resetAdminProtectedSymmetricalKeys=t.sendAdminProtectedSymmetricalKeys=t.getAdminProtectedSymmetricalKeys=t.encryptRecoveryData=t.getRecoveryKey=t.getSetupRequisitesData=void 0;const n=r(90622),o=r(56668),a=r(72365),i=r(16038),s=r(69530),c=r(64910),u=r(36513),l=r(65675),d=r(70252),p=r(16593),f=r(38981),g=r(95363),m=r(16356),h=r(29303),y=r(25576),S=r(26634),v=r(97810),E=r(33476),A=r(85423);function _(e){const t=e.getState(),r=(0,p.activeSpacesSelector)(t)[0],o=r?.teamId;if(!o)throw new Error("[getSetupRequisitesData] - user should be part of a team to activate Account Recovery");const a=Number(o),i=(0,p.userLoginSelector)(t),s=(0,n.ukiSelector)(t);if(!i||!s)throw new Error("[getSetupRequisitesData] - missing login or uki");return{teamId:a,login:i,uki:s}}async function b({storeService:e,encryptionKey:t,data:r}){const n=(0,a.makeDataEncryptorService)(e),o=(0,l.getCryptoConfig)(e);n.setInstance({raw:t},"",o);const i=await n.getInstance().encrypt(r);return n.close(),i}async function T({storeService:e,encryptedData:t,encryptionKey:r}){const n=(0,a.makeDataEncryptorService)(e),{cryptoConfig:o}=(0,l.parsePayload)(l.ARGON2_DEFAULT_PAYLOAD);n.setInstance({raw:r},"",o);const i=await n.getInstance().decrypt(t,{logging:!0});return n.close(),i}function I(e){const t=(0,f.isSSOUserSelector)(e),r=(0,S.isRecoveryEnabledSelector)(e);return!t&&r}function w(e){const t=I(e),r=(0,p.accountRecoveryOptInSelector)(e);return t&&r}t.getSetupRequisitesData=async function(e,t){try{const{teamId:r,login:n,uki:o}=_(e),{content:a}=await t.recovery.getSetupRequisites({login:n,uki:o,teamId:r});return a}catch(e){throw new Error(`[getSetupRequisitesData] - getSetupRequisites failed with error ${e}`)}},t.getRecoveryKey=async function(e){const t=e.getState();let r,n=(0,p.recoveryKeySelector)(t);return n?r=(0,i.base64ToBuffer)(n):(r=await(0,s.generateAESKey)(),n=(0,i.bufferToBase64)(r)),{recoveryKeyBufferClear:r,recoveryKeyBase64Clear:n,recoveryKeyRawClear:atob(n)}},t.encryptRecoveryData=b,t.getAdminProtectedSymmetricalKeys=async function(e,t){const r=(0,u.makeAsymmetricEncryption)(),n=[];for(const o of e){const{login:e,publicKey:a}=o,i=await r.encrypt(a,t);n.push({login:e,key:i})}return n},t.sendAdminProtectedSymmetricalKeys=async function(e,t,r){try{const n=JSON.stringify(r),{teamId:o,login:a,uki:i}=_(e);return void await t.recovery.setRecoveryClientKeys({login:a,uki:i,recoveryClientKeys:n,teamId:o})}catch(e){throw new Error(`[sendAdminProtectedSymmetricalKeys] - setRecoveryClientKeys failed with error ${e}`)}},t.resetAdminProtectedSymmetricalKeys=async function(e,t){try{const{teamId:r,login:n,uki:o}=_(e),a=JSON.stringify([]);return void await t.recovery.setRecoveryClientKeys({login:n,uki:o,recoveryClientKeys:a,teamId:r})}catch(e){throw new Error(`[resetAdminProtectedSymmetricalKeys] - setRecoveryClientKeys failed with error ${e}`)}},t.encryptUkiAndPrivateKey=async function(e,t,r,n){const a=JSON.stringify({recoveryUki:e,privateKey:t}),i=(0,o.deflateUtf16)(a);return await b({storeService:n,encryptionKey:r,data:i})},t.sendRecoveryRequestToAdmin=async function(e,t){try{const r=e.getState(),n=(0,p.userLoginSelector)(r),{recoveryUki:o,publicKey:a}=(0,h.recoveryDataSelector)(r);if(!n||!o||!a)throw new Error("Missing recoveryUki or publicKey");return void await t.recovery.request({login:n,uki:o,publicKey:a})}catch(e){throw new Error(`[sendAccountRecoveryRequest] - failed with error ${e}`)}},t.isARAvailableForUser=I,t.isARFeatureActivatedForUser=w,t.triggerCleanOrSetupAccountRecovery=async function(e){const{storeService:t,localStorageService:r,wsService:n}=e,o=t.getState();(0,h.recoveryInProgressSelector)(o)||(await r.getInstance().cleanRecoveryData(),await async function(e,t){const r=e.getState();if(!w(r))return Promise.resolve(!1);const{persistData:n}=e.getAccountInfo();if(n===y.PersistData.PERSIST_DATA_NO)return Promise.resolve(!1);const o=!!(0,p.recoveryKeySelector)(r),a=!!await t.getInstance().doesRecoveryLocalKeyExist();return!o||!a||(0,A.recoveryHashFromPersonalSettingsSelector)(r)!==(0,A.recoveryHashFromPremiumStatusSelector)(r)}(t,r)?await(0,v.setupAccountRecoveryForDevice)(t,r,n):await async function(e,t){const r=w(e.getState()),n=t.getInstance(),o=!!await n.doesRecoveryLocalKeyExist(),a=!!await n.doesRecoverySessionCredentialExist();return!r&&(o||a)}(t,r)&&await r.getInstance().cleanRecoverySetupData())},t.retrieveRecoveryUkiFromStorage=async function(e,t,r){try{const n=await t.getInstance().getRecoveryData(),a=await T({storeService:e,encryptedData:n,encryptionKey:r}),i=(0,o.inflateUtf16)(a),{recoveryUki:s}=JSON.parse(i);return s}catch(e){const t=`retrieveRecoveryUkiFromStorage failed with error ${e.message}`;throw new Error(t)}},t.recoveryFlowError=(e,t)=>{const r=new Error(`[AccountRecovery]: ${e} ${t}`);return(0,d.sendExceptionLog)({error:r}),{success:!1,error:{code:e,message:t}}},t.validateInitialData=async function(e,r){if(!await r.doesRecoveryLocalKeyExist()||!await r.doesRecoveryDataExist()||!await r.doesRecoverySessionCredentialExist())return(0,t.recoveryFlowError)(E.ApiErrorType.RecoverUserDataFailed,"Missing local data");const{userServerProtectedSymmetricalKey:n,recoveryServerKeyBase64:o}=(0,h.recoveryDataSelector)(e);return n&&o?{success:!0}:(0,t.recoveryFlowError)(E.ApiErrorType.RecoveryRequestFailed,"missing payload")},t.extractPrivateKeyFromRecoveryData=async function(e,t,r){const{localStorageService:n,storeService:a}=e,s=n.getInstance();r("extractPrivateKeyFromRecoveryData - getRecoveryData");const c=await s.getRecoveryData(),u=a.getPlatformInfo();r(`[extra] platform: ${u.platformName}`),r(`[extra] browser: ${u.browser} @ ${u.browserVersion}`);const d=(0,i.base64ToBuffer)(c),p=(0,l.parseCipheredData)(new Uint8Array(d));r(`[extra] cryptoConfig derivation: ${JSON.stringify(p.cryptoConfig)}`),r("extractPrivateKeyFromRecoveryData - decryptRecoveryData");const f=await T({storeService:a,encryptedData:c,encryptionKey:t});r("extractPrivateKeyFromRecoveryData - inflateUtf16 data");const m=(0,o.inflateUtf16)(f);r("extractPrivateKeyFromRecoveryData - parse JSON data");const{recoveryUki:h,privateKey:y}=JSON.parse(m);return a.dispatch((0,g.saveRecoverySessionData)({recoveryUki:h})),y},t.extractRecoveryKey=async function(e,t,r){const n=e.getState(),{recoveryServerKeyBase64:o}=(0,h.recoveryDataSelector)(n);if(!o)throw new Error("Missing payload");const a=atob(o),s=e.getPlatformInfo();r(`[extra] platform: ${s.platformName}`),r(`[extra] browser: ${s.browser} @ ${s.browserVersion}`);const c=(0,i.base64ToBuffer)(t),u=(0,l.parseCipheredData)(new Uint8Array(c));r(`[extra] cryptoConfig derivation: ${JSON.stringify(u.cryptoConfig)}`),r("extractRecoveryKey - decryptRecoveryData");const d=await T({storeService:e,encryptedData:t,encryptionKey:a});return r("extractRecoveryKey - arrayBufferToText"),(0,i.arrayBufferToText)(d)},t.extractLocalKey=async function(e,t,r){const{storeService:n,localStorageService:a}=e,s=a.getInstance();r("extractLocalKey - getRecoveryLocalKey");const c=await s.getRecoveryLocalKey(),u=e.storeService.getPlatformInfo();r(`[extra] platform: ${u.platformName}`),r(`[extra] browser: ${u.browser} @ ${u.browserVersion}`);const d=(0,i.base64ToBuffer)(c),p=(0,l.parseCipheredData)(new Uint8Array(d));r(`[extra] cryptoConfig derivation: ${JSON.stringify(p.cryptoConfig)}`),r("extractLocalKey - decryptRecoveryData");const f=await T({storeService:n,encryptedData:c,encryptionKey:t});return r("extractLocalKey - inflateUtf16 localKey"),(0,o.inflateUtf16)(f)},t.prepareLocalDataEncryptorService=async function(e,t){const{localDataEncryptorService:r,storeService:n}=e,o=e.storeService.getUserSession().serverKey,a=(0,c.getNoDerivationCryptoConfig)();r.setInstance({raw:t},o,a),await r.getInstance().prepareCrypto(),n.dispatch((0,m.updateLocalKey)(t))},t.storeSessionCredentialForRecovery=async function(e,t){const r=e.getState(),n=(0,p.masterPasswordSelector)(r);if(w(r)&&n){const e={masterPassword:n,recoveryKey:null},r=btoa(JSON.stringify(e));await t.getInstance().storeRecoverySessionCredential(r)}}},97810:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRecoveryRequestPending=t.deactivateAccountRecovery=t.setupAccountRecoveryForDevice=t.activateAccountRecovery=void 0;const n=r(56668),o=r(47820),a=r(33476),i=r(5464),s=r(16593),c=r(27517);async function u(e,t,r){const{hash:a,recipients:i,recoveryServerKey:s}=await(0,o.getSetupRequisitesData)(e,r),{recoveryKeyBufferClear:u,recoveryKeyBase64Clear:l,recoveryKeyRawClear:d}=await(0,o.getRecoveryKey)(e),p=t.getInstance(),f=await p.getLocalKey(),g=(0,n.deflateUtf16)(f),m=await(0,o.encryptRecoveryData)({storeService:e,encryptionKey:d,data:g});t.getInstance().storeRecoveryLocalKey(m);const h=atob(s),y=await(0,o.encryptRecoveryData)({storeService:e,encryptionKey:h,data:u}),S=await(0,o.getAdminProtectedSymmetricalKeys)(i,y);await(0,o.sendAdminProtectedSymmetricalKeys)(e,r,S);const v={RecoveryHash:a,RecoveryKey:l};e.dispatch((0,c.editPersonalSettings)(v)),await(0,o.storeSessionCredentialForRecovery)(e,t)}t.activateAccountRecovery=async function(e){const{sessionService:t,storeService:r,localStorageService:n,wsService:l}=e,d=r.getState();if(!(0,o.isARAvailableForUser)(d))return{success:!1,error:{code:a.ApiErrorType.AccountRecoveryNotAvailableError}};(0,s.accountRecoveryOptInSelector)(d)||r.dispatch((0,c.editPersonalSettings)({RecoveryOptIn:!0}));try{await u(r,n,l),await t.getInstance().user.persistPersonalSettings(),await(0,i.sessionForceSync)(t)}catch(e){return{success:!1,error:{code:a.ApiErrorType.RecoverySetupFailed,message:e.message}}}return{success:!0}},t.setupAccountRecoveryForDevice=u,t.deactivateAccountRecovery=async function(e){const{sessionService:t,storeService:r,localStorageService:n,wsService:i}=e,s=r.getState();if(!(0,o.isARAvailableForUser)(s))return{success:!1,error:{code:a.ApiErrorType.AccountRecoveryNotAvailableError}};const u={RecoveryKey:"",RecoveryHash:"",RecoveryOptIn:!1};try{r.dispatch((0,c.editPersonalSettings)(u)),await t.getInstance().user.persistPersonalSettings(),await n.getInstance().cleanRecoverySetupData(),await(0,o.resetAdminProtectedSymmetricalKeys)(r,i)}catch(e){return{success:!1,error:{code:a.ApiErrorType.RecoveryDeactivationFailed,message:e.message}}}return{success:!0}},t.isRecoveryRequestPending=async function(e){try{return{success:!0,response:await e.localStorageService.getInstance().doesRecoveryDataExist()}}catch(e){return{success:!1,error:{code:a.ApiErrorType.IsRecoveryRequestPendingFailed,message:e}}}}},63678:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(47820);t.setupSubscriptions=function(e,t){e.sessionOpened.on((()=>(0,n.triggerCleanOrSetupAccountRecovery)(t))),e.syncSuccess.on((()=>(0,n.triggerCleanOrSetupAccountRecovery)(t)))}},33476:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestStatus=t.ApiErrorType=void 0,function(e){e.CheckRecoveryStatusFailed="CHECK_RECOVERY_STATUS_FAILED",e.RecoverySetupFailed="RECOVERY_SETUP_FAILED",e.RecoveryDeactivationFailed="RECOVERY_DEACTIVATION_FAILED",e.RecoveryRequestFailed="RECOVERY_REQUEST_FAILED",e.RegisterDeviceFailed="REGISTER_DEVICE_FAILED",e.SetupMasterPasswordForRecoveryFailed="SETUP_MASTERPASSWORD_FOR_RECOVERY_FAILED",e.CancelRecoveryRequestFailed="CANCEL_RECOVERY_REQUEST_FAILED",e.RecoverUserDataFailed="RECOVER_REQUEST_FAILED",e.CheckLocalRecoveryKeyFailed="CHECK_LOCAL_RECOVERY_KEY_FAILED",e.StartAccountRecoveryFailed="START_ACCOUNT_RECOVERY_FAILED",e.AccountRecoveryNotAvailableError="ACCOUNT_RECOVERY_NOT_AVAILABLE_ERROR",e.IsRecoveryRequestPendingFailed="IS_RECOVERY_REQUEST_PENDING_FAILED"}(t.ApiErrorType||(t.ApiErrorType={})),function(e){e.PENDING="PENDING",e.APPROVED="APPROVED",e.REFUSED="REFUSED",e.OVERRIDDEN="OVERRIDDEN",e.CANCELED="CANCELED"}(t.RequestStatus||(t.RequestStatus={}))},47390:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(66961),o=r(89122),a=r(96405);t.config={commands:{decipherRemoteFile:{handler:n.decipherRemoteFileHandler}},queries:{getFileContent:{selector:a.fileContentStrSelector}},liveQueries:{liveFileMeta:{operator:o.fileMetaUpdate$}}}},64438:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(47390);t.bootstrap=e=>{e.register(n.config)}},1110:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FILE_SETTINGS=t.FileNamesList=t.REMOTE_FILE_KEY_PROD=t.REMOTE_FILE_KEY_DEV=void 0,t.REMOTE_FILE_KEY_DEV="-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAzOFwZBlj8livLhzIN8xm\ny/c+gn9FpUNOEIPoiN7kcAlj+oIlWqW5TgRZLqvyA0WxhTcG7icTpC+UwBXvENdV\n3nTzmuB8W6ZnRTjrtAlSxqp0Yfr2eQEGZFTlfBFUneqq4RZ6e/B3nIRHG1sEkVhd\noBbenPWou+WHqaqnah0AZVfxx4bJq1wor1LpH7gxELthvsThBelQz4Lmns4hCjzq\nRCDjQ1PG9HpDwwRHyi9xJYWoLR6C3rHZ1mmldg7TS41cCWkKsPDiIrIzEN+94dGG\nqSAx4kti0ltRcjLcBuJhQ3FHaAU7ksSubEg+l0W8PWAKjNbhUpFXduqXjxZ9nhuS\n2sxETZoadgU6YDEyqk3W7c+dhpTioMZEsJXpBVdC2jbblPHBRXBTmdOdb7xlBrGQ\nzoyPpS0PcI9oa8o9na9J8DSqnEbLwXdOlv4TUoxrswD6nmnR31/W+C4PSC8yEUEx\nESiG6IfAakFICxVESBp1VZA7NUbT6JkrhQaz//AVuGAyMoDuXorRGQPit+9DgF2l\neSr0zLzO2MVfMXXKBnueZmjNLvYy2Q2e8QX1jsuvwFhDBt1QmfisdiGSPC7jp0rO\nXdu5eCQuHVYeApipVKry58So783jimUa+mpA0/NUyiYaON7zndtZlQv/y+dqvseT\na2iA73nMVy4y9F95mwdG8ykCAwEAAQ==\n-----END PUBLIC KEY-----",t.REMOTE_FILE_KEY_PROD="-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAvlEdqD2jCU30/OembiWY\nJKxrjiZuRgweXtV2e7yF1T5XyHkqDZ31a9W0rLWrVRbjr1qDdwU94L1iW/8RrUPK\n2ue+2XH/8e8EH44Y9HYBeIUTciBKU6dqyqflaxY/wm3VO5af303ba564BVzv/31S\nJiHa7QkeVqjY/Za1rv1ZOIwsYBC/SPIK+ofU7qSi6eY8PNe8bje0CFPcwfWRRkNB\nZLQwUwIED1w7playTR8boX5iju+TagAjKSphkj6u+fIkYPdFQgFjSTGu8OwTAerC\nxqAWDSVy7fMxLdrDNrdwMTuQvlUIWiK+1CRHm1r6AXGywqCmrndw6q1LvFcwOgI1\n2brPOx1BdDabUwau26lICDgPqA67Sk7GLTCv3hA2bHvJhK7E0c260u96hRwjDk/L\n8tspQAYGzosyIMTmN29fEtBMlPwClZPqSVa7I7b3Csx4lhRkXI76WxAOmxf5dNQI\n2O6dlrxumdfpM8O6ye3iq51D7ZNNegelee/BIrZEcJZzymvkrDDZHJs6oFQ7bERd\np+nJlr4xoiFd9BPCus6z994/8j7lNTvLanNwsdUYRP/tQJZqlhZ7vY+KpyXn+RGw\nMYFeWXuH3cG05NwryH6676tcOrkboxbxMCMBUMvZK1CWS57noH/iztYivKNyItxf\ni8uoqgc+vDOPPsdujlsgOkcCAwEAAQ==\n-----END PUBLIC KEY-----",t.FileNamesList=["overrides.json","phishing_urls_test.json"],t.FILE_SETTINGS={"overrides.json":{},"phishing_urls_test.json":{isLoadedWhileLoggedOut:!0}}},66961:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decipherRemoteFileHandler=void 0;const n=r(10174),o=r(16593);t.decipherRemoteFileHandler=async({storeService:e},t)=>({decipheredFile:await(0,n.decipherRemoteFileUpdate)(t.cipheredFileContent,t.fileMetaData,(0,o.sharingKeysSelector)(e.getState()).privateKey)})},97890:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.downloadRemoteFileHandler=t.fetchFile=void 0;const n=r(46298),o=r(64272),a=r(10174),i=r(85845),s=r(87993),c=r(56523),u=r(19601),l=r(96405),d=r(16593),p=r(55539),f=r(23201),g=r(10203),m=r(76905);async function h(e){try{return(await(0,p.httpGetUsingFetch)(e,{responseType:"arraybuffer"})).data}catch(e){throw new u.RemoteFileError(g.RemoteFileUpdateError.DownloadError,e.message)}}function y(e,t,r){const{storeService:n,eventBusService:o}=e;n.dispatch((0,i.updateFileContentAction)({[r.name]:r})),n.dispatch((0,i.updateFileMetaAction)({[r.name]:t})),o.remoteFileChanged(r.name)}async function S(e,[t,r]){const{storeService:n,eventLoggerService:o}=e;if(!function(e){switch(e.status){case c.UPDATE_AVAILABLE_HTTP_STATUS:return!0;case c.NO_CURRENT_UPDATE_HTTP_STATUS:case c.FILE_NOT_FOUND_HTTP_STATUS:case c.SERVER_ERROR_HTTP_STATUS:default:return!1}}(r))return{fileName:t,isUpdated:!1,fileMetaData:r};try{const o=await async function(e,t,r){const n=await h(t.url);if(!t.key)return new m.DownloadedFile(e,n);const o=await(0,a.decipherRemoteFileUpdate)(n,t,(0,d.sharingKeysSelector)(r.getState()).privateKey);return new m.DownloadedFile(e,o)}(t,r,n);y(e,r.revision,o)}catch(e){return(0,u.assertRemoteFileError)(o,e),{fileName:t,isUpdated:!1,fileMetaData:r}}return{fileName:t,isUpdated:!0,fileMetaData:r}}t.fetchFile=h,t.downloadRemoteFileHandler=async(e,t)=>{const{storeService:r}=e,a=await async function(e,t){const r=await(0,s.retrieveFileMetaDataFromCipheredLocalStorage)(e);return Object.entries(t).reduce(((e,[t,n])=>(e[t]=null!==r&&t in r?n.revision??r[t]:0,e)),{})}(e,t);try{const t=await async function(e,t){const r=await(0,o.getFilesMeta)(e,(0,d.userLoginSelector)(e.getState()),t);if((0,o.isGetFilesMetaSuccess)(r)){const{code:e,data:t,...n}=r;return n}if((0,n.isApiError)(r))throw new u.RemoteFileError(g.RemoteFileUpdateError.ServerError,r.message)}(r,a);if(0!==Object.keys(t).length){const n=await(c=t,p=e,Promise.all(Object.entries(c).map((e=>S(p,e))))),o=await async function(e,t){const{eventLoggerService:r}=e;return await Promise.all(t.filter((({isUpdated:e})=>e)).map((async({fileName:t})=>{try{return await(0,s.writeFileInLocalStorage)(e,t),(0,f.logReceiveRemoteFileSuccess)(r),[t,!0]}catch(e){return(0,u.assertRemoteFileError)(r,e),[t,!1]}})))}(e,n),l=o.filter((([e,t])=>!t)).map((([e,t])=>e));r.dispatch((0,i.deleteFileMetaAction)(l)),await function(e,t,r){const n=e.localStorageService.getInstance();return Promise.all(t.filter((({isUpdated:e})=>!e)).map((async({fileName:t})=>{if(!n.isRemoteFileContentExist(t))return;const o=await(0,s.readFileFromLocalStorage)(e,t);null!==o&&y(e,r[t],o)})))}(e,n,a),await(0,s.persistFileMetaInCipheredLocalStorage)(e)}}catch(t){(0,u.assertRemoteFileError)(e.eventLoggerService,t)}var c,p;return(0,l.fileMetaUpdateSelector)(r.getState())}},16179:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadFilesAtInit=t.loadFileContentAtInit=void 0;const n=r(1110),o=r(87993),a=r(19601),i=r(85845);async function s(e,t){const r=await(0,o.readFileFromLocalStorage)(e,t);return null!==r&&(e.storeService.dispatch((0,i.updateFileContentAction)({[t]:r})),!0)}t.loadFileContentAtInit=s,t.loadFilesAtInit=async function(e){await Object.keys(n.FILE_SETTINGS).map((async t=>{if(n.FILE_SETTINGS[t].isLoadedWhileLoggedOut)try{await s(e,t)&&e.eventBusService.remoteFileChanged(t)}catch(t){(0,a.assertRemoteFileError)(e.eventLoggerService,t)}}))}},76905:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadedFile=void 0;const n=r(16038);class o{constructor(e,t){this._buf=t,this.name=e}static fromBase64Str(e,t){return new o(e,(0,n.base64ToBuffer)(t))}toBlob(){return new Blob([this._buf])}toString(){return(0,n.ab2str)(this._buf)}toBase64String(){return(0,n.bufferToBase64)(this._buf)}}t.DownloadedFile=o},10174:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decipherRemoteFileUpdate=t.decipherFileIntoBlob=t.verifyRemoteFileSignature=t.decipherDecryptionKey=t.computePublicKeyForSignature=void 0;const n=r(56668),o=r(83570),a=r(16038),i=r(56984),s=r(36513),c=r(1110),u=r(19601),l=r(10203),d=r(93513),p="https://static.dashlane.com/runtime-resources/ci/";async function f(e,t){const r=(0,s.makeAsymmetricEncryption)({hashAlgorithm:i.HashAlgorithm.SHA_1});try{return d.decode(await r.decrypt(t,e))}catch(e){throw new u.RemoteFileError(l.RemoteFileUpdateError.DecipherError,"Invalid encryption on deciphering key")}}async function g(e,{signature:r,url:n},o){const a=(0,t.computePublicKeyForSignature)(n);return await e.verify(a,r,o)}async function m(e,t){try{return(0,a.str2ab)((0,n.deflatedUtf8ToUtf16)(await(0,n.decipherDashlaneSecureData)(e,t,"",(0,o.makeGetDerivateKeyWithCacheAndQueue)()),{skipInflate:!0}))}catch(e){throw new u.RemoteFileError(l.RemoteFileUpdateError.DecipherError,"Invalid encryption on file")}}t.computePublicKeyForSignature=e=>{if((e=>e.startsWith(p+"prod/"))(e))return c.REMOTE_FILE_KEY_PROD;if((e=>e.startsWith(p+"dev/"))(e))return c.REMOTE_FILE_KEY_DEV;throw new u.RemoteFileError(l.RemoteFileUpdateError.DecipherError,"The file URL is not matching production or dev environnement")},t.decipherDecryptionKey=f,t.verifyRemoteFileSignature=g,t.decipherFileIntoBlob=m,t.decipherRemoteFileUpdate=async function(e,t,r){const n=(0,a.bufferToBase64)(e),o=await f(t.key,r),c=(0,s.makeAsymmetricEncryption)({hashAlgorithm:i.HashAlgorithm.SHA_256});if(!await g(c,t,n))throw new u.RemoteFileError(l.RemoteFileUpdateError.DecipherError,"Invalid signature detected on file");return await m(n,o)}},91313:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(64438);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},89122:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileMetaUpdate$=void 0;const n=r(18948),o=r(3343),a=r(96405);t.fileMetaUpdate$=()=>(0,n.pipe)((0,o.map)(a.fileMetaUpdateSelector),(0,o.distinctUntilChanged)())},23201:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logReceiveRemoteFileError=t.logReceiveRemoteFileSuccess=void 0;const n=r(10203),o=(e,t,r=undefined)=>{e.logEvent(new n.UserReceiveRemoteFileUpdateEvent({flowStep:t,remoteFileUpdateError:r}))};t.logReceiveRemoteFileSuccess=e=>o(e,n.FlowStep.Complete),t.logReceiveRemoteFileError=(e,t)=>o(e,n.FlowStep.Error,t)},87993:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeFileInLocalStorage=t.readFileFromLocalStorage=t.retrieveFileContentFromNonCipheredLocalStorage=t.retrieveFileContentFromCipheredLocalStorage=t.retrieveFileMetaDataFromCipheredLocalStorage=t.persistSingleFileInNonCipheredLocalStorage=t.persistSingleFileContentInCipheredLocalStorage=t.persistFileMetaInCipheredLocalStorage=void 0;const n=r(25576),o=r(96405),a=r(1110),i=r(19601),s=r(10203),c=r(76905),u=e=>{if(!e)throw new i.RemoteFileError(s.RemoteFileUpdateError.LocalStorageError,"LocalStorageService is not initalized")};async function l({localStorageService:e,storeService:t},r){const{persistData:a,isAuthenticated:c}=t.getAccountInfo(),l=e.getInstance();if(!c||a===n.PersistData.PERSIST_DATA_NO)return;u(l);const d=await(0,o.fileSelector)(t.getState(),r);try{await l.storeRemoteFileContent(r,d.toBase64String())}catch(e){throw new i.RemoteFileError(s.RemoteFileUpdateError.LocalStorageError,`Cannot persist ${r} content in local storage`)}}async function d({storeService:e,storageService:t},r){const{persistData:a,isAuthenticated:c}=e.getAccountInfo();if(!c||a===n.PersistData.PERSIST_DATA_NO)return;const l=t.getLocalStorage();u(l);const d=await(0,o.fileSelector)(e.getState(),r);try{await l.writeItem(r,d.toBase64String())}catch(e){throw new i.RemoteFileError(s.RemoteFileUpdateError.LocalStorageError,`Cannot persist ${r} content in local storage`)}}async function p(e,t){const r=e.getInstance();return u(r),await r.isRemoteFileContentExist(t)?c.DownloadedFile.fromBase64Str(t,await r.getRemoteFileContent(t)):Promise.resolve(null)}async function f(e,t){const r=e.getLocalStorage();return u(r),await r.itemExists(t)?c.DownloadedFile.fromBase64Str(t,await r.readItem(t)):Promise.resolve(null)}t.persistFileMetaInCipheredLocalStorage=async function({localStorageService:e,storeService:t}){e.getInstance();const{persistData:r,isAuthenticated:a}=t.getAccountInfo();if(!a||r===n.PersistData.PERSIST_DATA_NO)return;u(e);const c=e.getInstance();try{await c.storeRemoteFileMeta((0,o.fileMetaUpdateSelector)(t.getState()))}catch{throw new i.RemoteFileError(s.RemoteFileUpdateError.LocalStorageError,"Cannot persist file metadata in local storage")}},t.persistSingleFileContentInCipheredLocalStorage=l,t.persistSingleFileInNonCipheredLocalStorage=d,t.retrieveFileMetaDataFromCipheredLocalStorage=async function({localStorageService:e}){const t=e.getInstance();return u(t),await t.isRemoteFileMetaDataExist()?await t.getRemoteFileMeta():Promise.resolve(null)},t.retrieveFileContentFromCipheredLocalStorage=p,t.retrieveFileContentFromNonCipheredLocalStorage=f,t.readFileFromLocalStorage=function(e,t){return a.FILE_SETTINGS[t].isLoadedWhileLoggedOut?f(e.storageService,t):p(e.localStorageService,t)},t.writeFileInLocalStorage=function(e,t){return a.FILE_SETTINGS[t].isLoadedWhileLoggedOut?d(e,t):l(e,t)}},19601:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertRemoteFileError=t.RemoteFileError=void 0;const n=r(23201),o=r(70252);class a extends Error{constructor(e,t){super(t),this.name=e,this.name=e}}t.RemoteFileError=a,a.errorInstance="REMOTE_FILE_ERROR",t.assertRemoteFileError=function(e,t){!function(e){return e instanceof a}(t)?(0,o.sendExceptionLog)({error:t}):(0,n.logReceiveRemoteFileError)(e,t.name)}},96405:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileContentStrSelector=t.fileSelector=t.fileMetaUpdateSelector=void 0;const r=e=>e.device.remoteFile;t.fileMetaUpdateSelector=e=>r(e).fileMetaData,t.fileSelector=(e,t)=>r(e).fileContentState[t],t.fileContentStrSelector=(e,r)=>(0,t.fileSelector)(e,r).toString()},98202:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(36428),o=r(18216),a=r(16593);t.setupSubscriptions=function(e,t){e.sessionOpened.on((()=>(0,n.triggerDownloadRemoteFileUpdate)(t,!0))),e.sessionClosed.on((()=>(0,n.triggerDownloadRemoteFileUpdate)(t,!1))),e.coreServicesReady.on((e=>{e.initMode===o.InitMode.Resume&&((0,a.isAuthenticatedSelector)(t.storeService.getState())?(0,n.triggerDownloadRemoteFileUpdate)(t,!0):(0,n.triggerLoadFileAtInit)(t))})),e.appInitialized.on((()=>{(0,n.triggerLoadFileAtInit)(t)}))}},36428:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerDownloadRemoteFileUpdate=t.triggerLoadFileAtInit=t.callRemoteFileUpdateHandler=void 0;const n=r(97890),o=r(1110),a=r(16179);async function i(e){await(0,n.downloadRemoteFileHandler)(e,o.FILE_SETTINGS)}t.callRemoteFileUpdateHandler=i,t.triggerLoadFileAtInit=async function(e){await(0,a.loadFilesAtInit)(e)};let s=null;t.triggerDownloadRemoteFileUpdate=function(e,t){s&&function(e){clearInterval(e)}(s),t&&(s=function(e){return i(e),setInterval((()=>{try{i(e)}catch{}}),18e5)}(e))}},56523:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SERVER_ERROR_HTTP_STATUS=t.FILE_NOT_FOUND_HTTP_STATUS=t.NO_CURRENT_UPDATE_HTTP_STATUS=t.UPDATE_AVAILABLE_HTTP_STATUS=void 0,t.UPDATE_AVAILABLE_HTTP_STATUS="update_available",t.NO_CURRENT_UPDATE_HTTP_STATUS="unknown_revision",t.FILE_NOT_FOUND_HTTP_STATUS="not_found",t.SERVER_ERROR_HTTP_STATUS="error_server"},1933:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(4886),o=r(98850),a=r(58551);t.config={commands:{updateMigrationOnboarding:{handler:a.updateMigrationOnboarding}},queries:{getMigrationOnboarding:{selector:n.migrationOnboardingSelector},getDesktopLogin:{selector:n.desktopLoginSelector}},liveQueries:{liveMigrationOnboarding:{operator:o.migrationOnboarding$}}}},4216:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MigrationOnboardingStep=void 0;var n=r(17604);Object.defineProperty(t,"MigrationOnboardingStep",{enumerable:!0,get:function(){return n.MigrationOnboardingStep}})},73416:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(1933);t.bootstrap=e=>{e.register(n.config)}},63935:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(73416);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},98850:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.migrationOnboarding$=void 0;const n=r(18948),o=r(3343),a=r(4886);t.migrationOnboarding$=()=>(0,n.pipe)((0,o.map)(a.migrationOnboardingSelector),(0,o.distinctUntilChanged)())},4886:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.desktopLoginSelector=t.migrationOnboardingSelector=void 0,t.migrationOnboardingSelector=e=>e.userSession.localSettings.migrationOnboarding,t.desktopLoginSelector=e=>e.device.application.settings.desktopLogin},48723:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeMigrationOnboarding=void 0;const n=r(30913),o=r(17604),a=r(76089);t.initializeMigrationOnboarding=async function(e){const{storeService:t,sessionService:r}=e,i=(0,n.migratedToSAEXSelector)(t.getState());if(void 0!==i){const e=function(e,t){return"Known"===e.type?e.value:t?o.MigrationOnboardingStep.NOT_SEEN:o.MigrationOnboardingStep.SEEN}(t.getLocalSettings().migrationOnboarding,i);t.dispatch((0,a.migrationOnboardingUpdated)(e)),await r.getInstance().user.persistLocalSettings()}return{success:!0}}},58551:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateMigrationOnboarding=void 0;const n=r(76089);t.updateMigrationOnboarding=async function({storeService:e,sessionService:t},r){return e.dispatch(n.migrationOnboardingUpdated(r)),await t.getInstance().user.persistLocalSettings(),{success:!0}}},71295:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(48723);t.setupSubscriptions=async function(e,t){e.sessionOpened.on((()=>{(0,n.initializeMigrationOnboarding)(t)}))}},17604:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MigrationOnboardingStep=void 0,function(e){e.NOT_SEEN="NOT_SEEN",e.SEEN="SEEN"}(t.MigrationOnboardingStep||(t.MigrationOnboardingStep={}))},25661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(17338),o=r(21587),a=r(23881),i=r(64369),s=r(93820),c=r(90622),u=r(74219),l=r(15209),d=r(21583),p=r(21647),f=r(88548),g=r(99293),m=r(55861),h=r(74412),y=r(70252),S=r(49409),v=r(43542),E=r(44389),A=r(16359),_=r(40588),b=r(37824),T=r(61),I=r(39952),w=r(70530),C=r(64811),O=r(88530),D=r(76569),P=r(76592),N=r(63935),R=r(17387),U=r(33719),L=r(49183),M=r(14581),k=r(51168),B=r(7753),F=r(53156),x=r(16667),G=r(91313),j=r(25560),K=[o.bootstrap,a.bootstrap,c.bootstrap,u.bootstrap,p.bootstrap,l.bootstrap,d.bootstrap,f.bootstrap,g.bootstrap,m.bootstrap,h.bootstrap,y.bootstrap,i.bootstrap,S.bootstrap,v.bootstrap,E.bootstrap,A.bootstrap,T.bootstrap,_.bootstrap,I.bootstrap,w.bootstrap,O.bootstrap,D.bootstrap,P.bootstrap,R.bootstrap,U.bootstrap,L.bootstrap,M.bootstrap,k.bootstrap,N.bootstrap,C.bootstrap,s.bootstrap,x.vpnApiBootstrap,B.bootstrap,F.bootstrap,b.bootstrap,G.bootstrap,j.bootstrap];t.bootstrap=(e,t,r)=>{const o=(0,n.getCoreServices)(e);K.forEach((e=>{e(t,o,r)}))}},74318:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCurrentLocation=t.initCarbon=t.setPlatform=void 0;const n=r(53576),o=r(71796),a=r(4798),i=r(75391),s=r(44242),c=r(20849),u=r(44273),l=r(30855),d=r(87855),p=r(86056),f=r(95623),g=r(17338),m=r(61384),h=r(12995),y=r(70252),S=r(90503),v=r(4673),E=r(50643),A=r(47975),_=r(73011),b=r(96637),T=r(25661),I=r(2646),w=r(18539),C=r(18216),O=r(28486),D=r(88322),P=r(45800);t.setPlatform=(e,t,r)=>{r===C.InitMode.FirstInit&&e.getInstance(g.CarbonServicesTypeEnum.StoreService).getStore().dispatch((0,h.savePlatformInfo)(t)),(0,p.setPlatformInfo)(t)},t.initCarbon=async function(e){if((0,I.setPublicPath)(e.publicPath),!e.storageLayer)throw new Error("Missing Storage layer prevents Carbon initialization");e.keys.cloudflareAccess&&e.keys.cloudflareSecret&&(0,P.setCloudflareHeaders)(e.keys.cloudflareAccess,e.keys.cloudflareSecret);const r=(0,g.carbonServices)({storageLayer:new w.CarbonLocalStorage(e.storageLayer),sessionStorage:e.sessionStorage,createClients:e.createClients}),{storeService:p,storageService:h}=(0,g.getCoreServices)(r);await p.completeRehydration(),(0,D.loadAnonymousApplicationId)(h,p);const y=function(e){const t=e.getState(),r=(0,O.appSessionIdSelector)(t)?C.InitMode.Resume:C.InitMode.FirstInit;return(0,f.logVerbose)({message:`Inferred init mode : ${r}`}),r}(p);(0,t.setPlatform)(r,e.platformInfo,y);const S=await(0,_.setupEventBus)(r);await S.coreServicesReady({initMode:y}),(0,A.loadFrequencyLists)(),e.workers&&(0,m.setWorkersPath)(e.workers),e.plugins&&(0,v.setPlugins)(e.plugins);try{await(0,d.initAuthenticatedCarbonApplication)(e,r,y)}catch(e){throw f.Debugger.error(e,"error while initializing SDK"),e}const{debug:N,e2e:R}=e.connectors;let{leeloo:U,maverick:L,extension:M,diagnostic:k,api:B}=e.connectors;U=U||(0,o.createEventBus)({events:n.CarbonLeelooConnector}),L=L||(0,o.createEventBus)({events:n.CarbonMaverickConnector}),M=M||(0,o.createEventBus)({events:n.ExtensionCarbonConnector}),k=k||(0,o.createEventBus)({events:n.CarbonDiagnosticConnector}),B=B||(0,o.createEventBus)({events:E.apiEvents}),N&&(0,c.subscribeToDebugEvents)(N),R&&(0,l.subscribeToE2EEvents)(R,r),(0,a.subscribeToExtensionEvents)(M,r),(0,i.subscribeToLeelooEvents)(U,r),(0,s.subscribeToMaverickEvents)(L,r),(0,u.subscribeToDiagnosticEvents)(k);const F=new b.TsEventBusCommandQueryBus(r,E.apiEvents,B);return(0,T.bootstrap)(r,F,e?.infrastructure),S.appInitialized({initMode:y,abTestForcedVersion:e.abTestForcedVersion}),r},t.fetchCurrentLocation=function(e,t){return e.country.getCurrentCountry().then((e=>{t.dispatch((0,h.saveCurrentLocation)(e))})).catch((e=>{const t=new Error(`[Sdk/Default] - fetchCurrentLocation: ${e}`);(0,y.sendExceptionLog)({error:t,code:S.ExceptionCriticality.WARNING})}))}},73011:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupEventBus=void 0;const n=r(17338),o=r(52346),a=r(99293),i=r(24579),s=r(10672),c=r(17387),u=r(33719),l=r(71295),d=r(51168),p=r(92184),f=r(49821),g=r(43057),m=r(63678),h=r(9991),y=r(23299),S=r(33045),v=r(63549),E=r(3149),A=r(98202),_=r(46564),b=r(83060);t.setupEventBus=async function(e){const t=(0,n.getCoreServices)(e),r=t.eventBusService,T=[o.setupSubscriptions,m.setupSubscriptions,S.setupSubscriptions,v.setupSubscriptions,h.setupSubscriptions,a.setupSubscriptions,y.setupSubscriptions,i.setupSubscriptions,g.setupSubscriptions,l.setupSubscriptions,s.setupSubscriptions,c.setupSubscriptions,d.setupSubscriptions,u.setupSubscriptions,p.setupSubscriptions,f.setupSubscriptions,E.setupUserSettingsLogSubscriptions,A.setupSubscriptions,_.setupSubscriptions,b.setupSubscriptions].map((e=>e(r,t)));return await Promise.all(T),r}},10672:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(74318),o=r(18216),a=r(28096);t.setupSubscriptions=function(e,t){e.appInitialized.on((async e=>{const{wsService:r,storeService:i}=t;e.initMode===o.InitMode.FirstInit&&(await(0,n.fetchCurrentLocation)(r,i),(0,a.sendLocationInfo)(i.getPlatform().location))}))}},18216:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InitMode=void 0,function(e){e.FirstInit="FirstInit",e.Resume="Resume"}(t.InitMode||(t.InitMode={}))},63340:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeApplicationModulesAccess=void 0,t.makeApplicationModulesAccess=function(e){return{createClients:()=>e()}}},82568:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeApplicationModulesAccess=void 0;var n=r(63340);Object.defineProperty(t,"makeApplicationModulesAccess",{enumerable:!0,get:function(){return n.makeApplicationModulesAccess}})},17338:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCoreServices=t.carbonServices=t.CarbonServicesTypeEnum=void 0;const n=r(80722),o=r(72365),a=r(98416),i=r(18539),s=r(77627),c=r(89016),u=r(1860),l=r(74752),d=r(93990),p=r(73297),f=r(74412),g=r(82568);var m;!function(e){e.StoreService="StoreService",e.StorageService="StorageService",e.SessionService="SessionService",e.MasterPasswordEncryptorService="MasterPasswordEncryptorService",e.LocalDataEncryptorService="LocalDataEncryptorService",e.RemoteDataEncryptorService="RemoteDataEncryptorService",e.AuthorizationKeysEncryptorService="AuthorizationKeysEncryptorService",e.LocalStorageService="LocalStorageService",e.WSService="WSService",e.AutoLoginService="AutoLoginService",e.WebAuthnAuthenticationService="WebAuthnAuthenticationService",e.EventBusService="EventBusService",e.EventLoggerService="EventLoggerService",e.TeamDeviceEncryptedConfigEncryptorService="TeamDeviceEncryptedConfigEncryptorService",e.ApplicationModulesAccess="ApplicationModulesAccess"}(m=t.CarbonServicesTypeEnum||(t.CarbonServicesTypeEnum={})),t.carbonServices=e=>{const t=(0,n.makeStoreService)({sessionStorage:e.sessionStorage,store:void 0}),r=(0,p.makeEventBusService)(),h=e.masterPasswordEncryptorService?e.masterPasswordEncryptorService():(0,o.makeDataEncryptorService)(t),y=e.localDataEncryptorService?e.localDataEncryptorService():(0,o.makeDataEncryptorService)(t),S=e.remoteDataEncryptorService?e.remoteDataEncryptorService():(0,o.makeDataEncryptorService)(t),v=e.teamDeviceEncryptedConfigEncryptorService?e.teamDeviceEncryptedConfigEncryptorService():(0,o.makeDataEncryptorService)(t),E=(0,u.makeKeyDataEncryptorService)(),A=(0,o.makeDataEncryptorService)(t),_=Object.assign({},(0,c.makeWSService)(),e.wsService?e.wsService(t):{}),b=(0,i.makeStorageService)();b.setInstance(e.storageLayer);const T=e.authorizationKeysEncryptorService?e.authorizationKeysEncryptorService():(0,u.makeKeyDataEncryptorService)();(0,o.setObfuscatingKey)(T);const I=(0,a.makeLocalStorageService)({masterPasswordEncryptorService:h,localDataEncryptorService:y,authorizationKeysEncryptorService:T,autoLoginEncryptorService:E,webAuthnAuthenticationEncryptorService:A,storageService:b,storeService:t}),w=(0,f.makeEventLoggerService)({storeService:t,storageService:b}),C=(0,g.makeApplicationModulesAccess)(e.createClients),O=(0,s.makeSessionService)({applicationModulesAccess:C,masterPasswordEncryptorService:h,localDataEncryptorService:y,remoteDataEncryptorService:S,storeService:t,localStorageService:I,storageService:b,wsService:_,eventBusService:r,eventLoggerService:w,teamDeviceEncryptedConfigEncryptorService:v}),D=(0,l.makeAutoLoginService)({autoLoginEncryptorService:E,localStorageService:I,wsService:_,authorizationKeysEncryptorService:T,storeService:t}),P=(0,d.makeWebAuthnAuthenticationService)({webAuthnAuthenticationEncryptorService:A,storeService:t,localStorageService:I,authorizationKeysEncryptorService:T});return{services:[{type:m.WSService,instance:_},{type:m.StoreService,instance:t},{type:m.StorageService,instance:b},{type:m.LocalStorageService,instance:I},{type:m.SessionService,instance:O},{type:m.AuthorizationKeysEncryptorService,instance:T},{type:m.AutoLoginService,instance:D},{type:m.WebAuthnAuthenticationService,instance:P},{type:m.EventBusService,instance:r},{type:m.MasterPasswordEncryptorService,instance:h},{type:m.RemoteDataEncryptorService,instance:S},{type:m.LocalDataEncryptorService,instance:y},{type:m.EventLoggerService,instance:w},{type:m.TeamDeviceEncryptedConfigEncryptorService,instance:v},{type:m.ApplicationModulesAccess,instance:C}],getInstance:function(e){const t=this.services.find((t=>t.type===e));if(void 0===t)throw new Error("Service "+e+" not defined");return t.instance}}},t.getCoreServices=e=>({storeService:e.getInstance(m.StoreService),remoteDataEncryptorService:e.getInstance(m.RemoteDataEncryptorService),masterPasswordEncryptorService:e.getInstance(m.MasterPasswordEncryptorService),localDataEncryptorService:e.getInstance(m.LocalDataEncryptorService),authorizationKeysEncryptorService:e.getInstance(m.AuthorizationKeysEncryptorService),localStorageService:e.getInstance(m.LocalStorageService),storageService:e.getInstance(m.StorageService),sessionService:e.getInstance(m.SessionService),wsService:e.getInstance(m.WSService),autoLoginService:e.getInstance(m.AutoLoginService),webAuthnAuthenticationService:e.getInstance(m.WebAuthnAuthenticationService),eventBusService:e.getInstance(m.EventBusService),eventLoggerService:e.getInstance(m.EventLoggerService),teamDeviceEncryptedConfigEncryptorService:e.getInstance(m.TeamDeviceEncryptedConfigEncryptorService),applicationModulesAccess:e.getInstance(m.ApplicationModulesAccess)})},34066:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(16593),o=r(38981),a=r(6e3),i=r(81228),s=r(28287),c=r(10447),u=r(38328),l=r(17095),d=r(18203),p=r(94275);t.config={commands:{validateToken:{handler:s.validateToken},validateMasterPassword:{handler:s.validateMasterPasswordHandler},resetProtectedItemAutofillTimer:{handler:s.resetProtectedItemAutofillTimerHandler},forceSync:{handler:c.forceSyncHandler},updatePremiumChurningDismissDate:{handler:u.updatePremiumChurningDismissDateHandler},setCredentialSearchOrder:{handler:l.setCredentialSearchOrderHandler},refreshSubscriptionInformation:{handler:d.refreshSubscriptionInformationHandler},updateAccountRecoveryKeyPersonalSettings:{handler:p.updateAccountRecoveryKeyPersonalSettingsHandler}},queries:{getActiveSpaces:{selector:n.activeSpacesSelector},getMasterPasswordAndServerKey:{selector:n.masterPasswordAndServerKeySelector,allowedPlatforms:["desktop_win"]},getIsAuthenticated:{selector:n.isAuthenticatedSelector},getSyncInfo:{selector:n.syncSelector},getIsSyncInProgress:{selector:n.syncIsInProgressSelector},getPremiumStatus:{selector:n.premiumStatusSelector},getNodePremiumStatus:{selector:n.nodePremiumStatusSelector},getSubscriptionInformation:{selector:n.subscriptionInformationSelector},getIsSSOUser:{selector:o.isSSOUserSelector},getSSOMigrationInfo:{selector:o.ssoMigrationInfoSelector},getSSOProviderInfo:{selector:o.ssoProviderInfoSelector},getUserLogin:{selector:n.userLoginSelector},getPublicUserId:{selector:n.publicUserIdSelector},getAnalyticsInstallationId:{selector:n.analyticsInstallationIdSelector},getUserLoginStatus:{selector:a.loginStatusSelector},getWebOnboardingMode:{selector:n.webOnboardingModeSelector},getPremiumChurningDismissDate:{selector:n.premiumChurningDismissDateSelector},getIsPaymentFailureChurningDismissed:{selector:n.isPaymentFailureChurningDismissedSelector},getCredentialSearchOrder:{selector:n.getCredentialSearchOrderSelector},getDidOpen:{selector:n.didOpenSelector},getPlatformName:{selector:n.platformNameSelector}},liveQueries:{liveSyncInfo:{operator:i.syncInfo$},liveIsSyncInProgress:{operator:i.syncInProgress$},liveLoginStatus:{operator:a.getLoginStatus$},livePremiumStatus:{operator:i.premiumStatus$},liveSubscriptionInformation:{operator:i.subscriptionInformation$},liveServiceProviderUrl:{subject:i.getServiceProviderUrl$},liveWebOnboardingMode:{operator:i.webOnboardingMode$},liveDidOpen:{operator:i.didOpen$}}}},92987:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncStatuses=t.CredentialSearchOrder=void 0;var n=r(25576);Object.defineProperty(t,"CredentialSearchOrder",{enumerable:!0,get:function(){return n.CredentialSearchOrder}}),Object.defineProperty(t,"SyncStatuses",{enumerable:!0,get:function(){return n.SyncStatuses}})},54034:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerSendTransactionDecipheringDiagnosticLog=void 0;const n=r(44273),o=r(95623);t.triggerSendTransactionDecipheringDiagnosticLog=function(e){o.default.log("SendDecipheringLog"),(0,n.default)().decipheringDiagnosticLogEvent(e)}},56269:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendFeaturesUpdateEvent=t.persistFeatures=t.getFeatures=t.factory=void 0;const n=r(20317),o=r(25576),a=r(28096);function i(){return{getFeatures:function(e,t,r,o){return t.features.fetchFeatures({login:r,uki:o}).then((t=>{e.dispatch((0,n.refreshedFeatures)(t))}))},persistFeatures:function(e,t,r){return t.persistData===o.PersistData.PERSIST_DATA_NO?Promise.resolve():e?e.storePersonalFeatures(r).then((()=>{})):void 0},sendFeaturesUpdateEvent:function(e){const t=e.getPersonalFeatures();if(t.features){const e={lastUpdate:t.lastUpdateTimestamp,list:t.features};(0,a.sendFeatures)(e)}}}}t.factory=i;const s=i(),c=s.getFeatures;t.getFeatures=c;const u=s.persistFeatures;t.persistFeatures=u;const l=s.sendFeaturesUpdateEvent;t.sendFeaturesUpdateEvent=l},89160:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUsersSSOInfo=t.loadLocalData=t.completeLogin=t.checkLogin=void 0;const n=r(35105),o=r(2246),a=r(25576),i=r(59489),s=r(86797),c=r(7624),u=r(16356),l=r(56915),d=r(90622),p=r(46298),f=r(17825),g=r(14656),m=r(92263),h=r(1965),y=r(16593);t.checkLogin=async function(e,r,n){const u=e.getState(),S=(0,y.userLoginSelector)(u);let v,E;try{const t=await async function(e,t){return(await(0,d.getLocalAccounts)(e,t)).map((e=>e.login)).map((t=>({login:t,deviceAccessKey:(0,l.getDeviceAccessKeySelector)(e.getState(),t)})))}(e,r),o=(0,l.getDeviceAccessKeySelector)(u,S),i=await(0,p.requestLogin)(e,{login:S,deviceAccessKey:o,profiles:t});if((0,p.isApiError)(i))return async function(e,t,r,n){if(!(0,p.isApiErrorOfType)(p.BusinessError,r))throw new Error(`Failed to request login (${r.code})`);const o=r.code;switch(o){case p.DeviceDeactivated:case p.DeviceNotFound:throw await(0,h.wipeOutLocalAccounts)(e,t,[n]),new Error(a.AuthenticationCode[a.AuthenticationCode.DEVICE_NOT_REGISTERED]);case p.ClientVersionDoesNotSupportSSOMigration:throw new Error(a.AuthenticationCode[a.AuthenticationCode.CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION]);default:(0,f.assertUnreachable)(o)}}(r,n,i,S);!async function(e,t,r){const{profilesToDelete:n}=r;if((n||[]).length>0)return;const o=n.map((e=>e.login));await(0,h.wipeOutLocalAccounts)(e,t,o)}(r,n,i),v=i.verification,E=i.ssoInfo}catch(e){if(!(0,m.isCarbonError)(e,g.HttpError))throw e;v=function(e){const t=function(e){return(0,o.getUserPublicSetting)(e,"otp2")?s.OtpType.OTP_LOGIN:null}(e);return t===s.OtpType.OTP_LOGIN?[{type:"totp"}]:[]}(S)}const A=function(e,t=[],r){if(t.some((({type:e})=>"sso"===e))&&r?.serviceProviderUrl)return a.AuthenticationCode.SSO_LOGIN_BYPASS;const n=function(e){if(e.some((e=>"totp"===e.type)))return s.OtpType.OTP_LOGIN;if(e.length>0)throw new Error("Unsupported 2FA method requested");return null}(t);return function(e,t){(0,o.storeUserPublicSetting)(e,"otp2",t===s.OtpType.OTP_LOGIN)}(e,n),n===s.OtpType.OTP_LOGIN?a.AuthenticationCode.ASK_OTP:a.AuthenticationCode.ASK_MASTER_PASSWORD}(S,v,E);return function(e,r,n){switch(e){case a.AuthenticationCode.SSO_LOGIN_BYPASS:if(!n?.serviceProviderUrl)throw new Error("[LocalAuthentication] - Unable to use SSO verification. Missing SSO information.");r.dispatch((0,c.storeSSOSettings)({ssoUser:!0,...(0,t.getUsersSSOInfo)(n)}));break;case a.AuthenticationCode.ASK_OTP:r.dispatch((0,i.enableOtp)(s.OtpType.OTP_LOGIN))}e!==a.AuthenticationCode.SSO_LOGIN_BYPASS&&r.dispatch((0,c.storeSSOSettings)({ssoUser:!1,...(0,t.getUsersSSOInfo)(n)}))}(A,e,E),A},t.completeLogin=async function(e,t,r,n,o){const i=e.getUserLogin(),s={login:i,deviceAccessKey:(0,l.getDeviceAccessKeySelector)(e.getState(),i),authTicket:n},c=await(0,p.completeLoginWithAuthTicket)(e,s);if((0,p.isApiError)(c))return async function(e,t,r,n){if(!(0,p.isApiErrorOfType)(p.BusinessError,r))throw new Error(`Failed to complete login (${r.code})`);const o=r.code;switch(o){case p.DeviceNotFound:throw await(0,h.wipeOutLocalAccounts)(e,t,[n]),new Error(a.AuthenticationCode[a.AuthenticationCode.DEVICE_NOT_REGISTERED]);case p.InvalidAuthTicket:throw new Error(a.AuthenticationCode[a.AuthenticationCode.TOKEN_NOT_VALID]);default:(0,f.assertUnreachable)(o)}}(t,r,c,i);const{serverKey:d}=c;if(!d)throw new Error(a.AuthenticationCode[a.AuthenticationCode.SERVER_KEY_MISSING]);return e.dispatch((0,u.updateisUsingDashlaneAuthenticator)(o)),e.dispatch((0,u.updateServerKey)(d)),a.AuthenticationCode.ASK_MASTER_PASSWORD},t.loadLocalData=async function(e,t,r){return r.getInstance().prepareCrypto(),await e.getInstance().user.loadSessionData(),t.dispatch((0,i.localDataLoaded)()),a.AuthenticationCode.LOGGEDIN},t.getUsersSSOInfo=e=>{if(!e)return{serviceProviderUrl:""};const t=(e=>{if(e.migration)switch(e.migration){case"mp_user_to_sso_member":return n.SSOMigrationType.MP_TO_SSO;case"sso_member_to_admin":case"sso_member_to_mp_user":return n.SSOMigrationType.SSO_TO_MP}})(e);return{serviceProviderUrl:e.serviceProviderUrl?e.serviceProviderUrl:"",...void 0!==t?{migration:t}:{},isNitroProvider:e.isNitroProvider}}},6e3:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLoginStatus$=t.loginStatusSelector=void 0;const n=r(32034),o=r(16516),a=r(18948),i=r(3343),s=r(27754),c=r(38981),u=(0,n.createSelector)(s.sessionIdSelector,(e=>e.userSession.account.isAuthenticated),((e,t)=>e&&t));t.loginStatusSelector=(0,n.createSelector)(u,(e=>e.userSession.account),c.ssoMigrationInfoSelector,((e,t,r)=>{if(!e)return{login:null,loggedIn:!1,needsSSOMigration:!1};const{isAuthenticated:n,login:o}=t;return{loggedIn:n,login:o,needsSSOMigration:void 0!==r}})),t.getLoginStatus$=()=>(0,a.pipe)((0,i.map)(t.loginStatusSelector),(0,i.distinctUntilChanged)(o.equals))},38865:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateWebOnboardingMode=void 0;const n=r(76089),o=r(28096);t.updateWebOnboardingMode=function(e,t,r){if(!e.isAuthenticated())throw new Error("No session set");e.dispatch(n.webOnboardingModeUpdated(r));const a=e.getLocalSettings().webOnboardingMode;o.sendWebOnboardingModeUpdate(a),t.getInstance().user.persistLocalSettings()}},57789:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isOnboardingNotificationShowing=void 0;const n=r(53576);t.isOnboardingNotificationShowing=e=>{const{completedSteps:t,flowLoginCredentialOnWeb:r,leelooStep:o,popoverStep:a}=e,{SHOW_LOGIN_USING_EXTENSION_NOTIFICATION:i,SHOW_PASSWORD_SAVE_SUCCESS:s,SHOW_WEB_SAVE_AND_AUTOLOGIN_COMPLETED:c}=n.WebOnboardingLeelooStep,{SHOW_LOGIN_NOTIFICATION:u}=n.WebOnboardingPopoverStep,l=r&&o===i,d=t.saveCredentialOnWeb&&o===s,p=t.saveCredentialOnWeb&&t.loginCredentialOnWeb&&o===c;return l||d||p||r&&a===u}},36960:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDashlaneApiPairingService=void 0;const n=r(46298),o=r(95623);t.makeDashlaneApiPairingService=e=>({requestPairing:t=>(async(e,t)=>{try{const r=await n.requestPairing(e,t);if(n.isApiError(r))throw r;return r}catch(e){return void(0,o.logError)({message:`Pairing request failed: ${e}`})}})(e,t)})},15718:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pairingIdSelector=t.isPairingEnabledSelector=void 0,t.isPairingEnabledSelector=e=>Boolean(e.userSession.session.pairingId),t.pairingIdSelector=e=>e.userSession.session.pairingId},10824:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestPairing=void 0;const n=r(15718),o=r(2246),a=r(16356),i=r(36960);t.requestPairing=async(e,t)=>{const r=e.getState();if((0,n.pairingIdSelector)(r))return;if(!(0,o.getSyncAppSetting)("syncWithLocalClients"))return;const s=(0,i.makeDashlaneApiPairingService)(e),c=await s.requestPairing(t),u=c?.pairingId;u&&e.dispatch((0,a.pairingSucceeded)(u))}},35507:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformNodePremiumStatus=t.getFreshPremiumStatus=t.refreshSubscriptionInformation=t.refreshPremiumStatus=void 0;const n=r(16516),o=r(95623),a=r(70252),i=r(48313),s=r(66833),c=r(25576),u=r(25011),l=r(31375),d=r(76089);async function p(e,t){const r=e.getLocalSettings().subscriptionInformation;try{const r=await(0,l.getSubscriptionInformation)(e,t);return e.dispatch((0,d.localSettingsSubscriptionInformationStatusUpdated)(r)),r}catch(e){const t=new Error(`[PremiumController] - refreshUserSubscriptionStatus: ${e}`);if(o.default.error(t),(0,a.sendExceptionLog)({error:t}),r)return r;throw e}}t.refreshPremiumStatus=async function(e,t,r,n){const c=e.getLocalSettings().premiumStatus,l=e.getLocalSettings().nodePremiumStatus,f=!l?.currentTimestampUnix||Date.now()-l.currentTimestampUnix>1e4;if(l&&!f)return c;try{const[o,a]=await Promise.all([m(t,r,n),(0,u.getPremiumStatus)(e,r),p(e,r)]),c=o?.spaces||[],l=v(a),f={...o,planName:o?.planName?.toLowerCase()??null};return e.dispatch((0,i.premiumStatusUpdated)(f)),e.dispatch((0,d.localSettingsNodePremiumStatusUpdated)(l)),(0,s.refreshSpaceData)(e,c),o}catch(e){const t=new Error(`[PremiumController] - refreshPremiumStatus: ${e}`);if(o.default.error(t),(0,a.sendExceptionLog)({error:t}),c)return c;throw e}},t.refreshSubscriptionInformation=p;const f=e=>{if(e.capabilities&&e.capabilities.length)return e.capabilities.reduce(((e,t)=>{const{capability:r,...n}=t;return e[r]=n,e}),{})},g=e=>e.familyMembership?e.familyMembership[0]:void 0;function m(e,t,r){return e.premium.status({login:t,uki:r,billingInformation:!0,spaces:!0,autoRenewal:!0,familyInformation:!0,previousPlan:!0,needsAutoRenewalFailed:!0}).then((e=>{const t=(0,n.pick)(["statusCode","billingInformation","planName","planType","planFeature","endDate","spaces","autoRenewal","previousPlan","autoRenewalFailed","autoRenewInfo","recoveryHash"],e);return t.capabilities=f(e),e.hasOwnProperty("familyMembership")&&(t.familyMembership=g(e)),t}))}t.getFreshPremiumStatus=m;const h=e=>{if(e.capabilities?.length)return e.capabilities.reduce(((e,t)=>{const{capability:r,...n}=t;return e[r]=n,e}),{})},y=e=>{switch(e.b2cStatus.statusCode){case c.B2CStatusCode.Subscribed:return e.b2cStatus.planName.includes("grace")?c.PremiumStatusCode.GRACE_PERIOD:e.b2cStatus.isTrial?c.PremiumStatusCode.NEW_USER:e.b2cStatus.autoRenewal?c.PremiumStatusCode.PREMIUM_CANCELLED:c.PremiumStatusCode.PREMIUM;case c.B2CStatusCode.Legacy:return c.PremiumStatusCode.OLD_ACCOUNT;case c.B2CStatusCode.Free:default:return c.PremiumStatusCode.NO_PREMIUM}};function S(e){const t=[];return e.currentTeam&&t.push({associatedEmail:e.currentTeam.associatedEmail,billingAdmins:e.currentTeam.teamMembership.billingAdmins,color:e.currentTeam.teamInfo.color,companyName:e.currentTeam.teamName,info:{...e.currentTeam.teamInfo},invitationDate:e.currentTeam.invitationDateUnix,isBillingAdmin:e.currentTeam.teamMembership.isBillingAdmin,isSSOUser:e.currentTeam.teamMembership.isSSOUser,isTeamAdmin:e.currentTeam.teamMembership.isTeamAdmin,isGroupManager:e.currentTeam.teamMembership.isGroupManager,joinDate:e.currentTeam.joinDateUnix,letter:e.currentTeam.teamInfo.letter,membersNumber:e.currentTeam.teamInfo.membersNumber,planType:e.currentTeam.teamInfo.planType,revokeDate:null,shouldDelete:!1,status:c.SpaceStatus.Accepted,teamAdmins:{...e.currentTeam.teamMembership.teamAdmins},teamId:e.currentTeam.teamId.toString(),teamName:e.currentTeam.teamName,tier:e.currentTeam.planFeature}),e.pastTeams&&e.pastTeams.forEach((e=>{t.push({associatedEmail:e.associatedEmail,billingAdmins:e.teamMembership.billingAdmins,color:e.teamInfo.color,companyName:e.teamName,info:{...e.info},invitationDate:e.invitationDateUnix,isBillingAdmin:e.teamMembership.isBillingAdmin,isSSOUser:e.teamMembership.isSSOUser,isTeamAdmin:e.teamMembership.isTeamAdmin,isGroupManager:e.teamMembership.isGroupManager,joinDate:e.joinDateUnix,letter:e.teamInfo.letter,membersNumber:e.teamInfo.membersNumber,planType:e.teamInfo.planType,revokeDate:e.revokeDateUnix,shouldDelete:e.shouldDelete,status:e.status,teamAdmins:{...e.teamMembership.teamAdmins},teamId:e.teamId.toString(),teamName:e.teamName,tier:e.planFeature})})),t}function v(e){return{...e.b2cStatus,planName:e.b2cStatus?.planName?.toLowerCase()??null,currentTimestampUnix:Date.now(),isTrial:e.b2cStatus.isTrial,statusCode:y(e),spaces:e.b2bStatus?S(e.b2bStatus):[],b2bStatus:{...e.b2bStatus},capabilities:h(e)}}t.transformNodePremiumStatus=v},70414:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUsersSSOInfo=t.validateMasterPassword=t.registerDevice=t.registerDeviceWithDashlaneAuthenticator=t.cancelRegistrationWithDashlaneAuthenticator=t.generateUki=t.askServerToSendToken=t.checkLoginWithUki=t.requestDeviceRegistration=t.SendTokenStatus=void 0;const n=r(28354),o=r(16516),a=r(35105),i=r(25576),s=r(72636),c=r(95623),u=r(76089),l=r(86797),d=r(59489),p=r(25963),f=r(63713),g=r(48313),m=r(16038),h=r(64910),y=r(33769),S=r(56668),v=r(16356),E=r(11814),A=r(7624),_=r(43739);var b=r(72636);Object.defineProperty(t,"SendTokenStatus",{enumerable:!0,get:function(){return b.SendTokenStatus}});const T=r(17825),I=r(19399),w=r(28287),C=r(16593),O=r(46298),D=r(70252),P=r(92263);let N,R;t.requestDeviceRegistration=async function(e){const r=e.getAccountInfo().login,n=await(0,O.requestDeviceRegistration)(e,{login:r,hasDashlaneAuthenticatorSupport:!0});if((0,O.isApiError)(n))return function(e){if(!(0,O.isApiErrorOfType)(O.BusinessError,e))throw new Error(`Failed to request device registration (${e.code})`);const t=e.code;switch(t){case O.UserNotFound:throw new Error(i.AuthenticationCode[i.AuthenticationCode.USER_DOESNT_EXIST]);case O.SSOBlocked:throw new Error(i.AuthenticationCode[i.AuthenticationCode.SSO_BLOCKED]);case O.ClientVersionDoesNotSupportSSOMigration:throw new Error(i.AuthenticationCode[i.AuthenticationCode.CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION]);default:(0,T.assertUnreachable)(t)}}(n);const{verification:o,ssoInfo:a}=n;if(!o)throw new Error("[requestDeviceRegistration] - No verfication in API response.");const s=function(e=[],t){if(e.some((({type:e})=>"sso"===e))&&t?.serviceProviderUrl)return i.AuthenticationCode.SSO_LOGIN_BYPASS;if(e.some((({type:e})=>"email_token"===e)))return i.AuthenticationCode.ASK_TOKEN;if(e.some((({type:e})=>"totp"===e)))return i.AuthenticationCode.ASK_OTP_FOR_NEW_DEVICE;if(e.some((({type:e})=>"dashlane_authenticator"===e)))return i.AuthenticationCode.ASK_DASHLANE_AUTHENTICATOR;throw new Error("[requestDeviceRegistration - getVerificationType] - Verification not supported!")}(o,a);return function(e,r,n){if(e===i.AuthenticationCode.SSO_LOGIN_BYPASS){if(!n?.serviceProviderUrl)throw new Error("[requestDeviceRegistration - processVerification] - Unable to use SSO verification. Missing SSO information.");r.dispatch((0,A.storeSSOSettings)({ssoUser:!0,...(0,t.getUsersSSOInfo)(n)}))}e!==i.AuthenticationCode.SSO_LOGIN_BYPASS&&r.dispatch((0,A.storeSSOSettings)({ssoUser:!1,...(0,t.getUsersSSOInfo)(n)}))}(s,e,a),s},t.checkLoginWithUki=async function(e,t,r){const n=e.getAccountInfo().login;if(!await async function(e,t,r){return"UKI VALID"===await e.authentication.validity({login:t,uki:r})}(t,n,r))throw new Error(i.AuthenticationCode[i.AuthenticationCode.INVALID_UKI]);return e.dispatch((0,d.confirmUserAuthentication)()),Promise.resolve(i.AuthenticationCode.USE_LOCAL_UKI)},t.askServerToSendToken=async function(e,t){const r=await e.authentication.askServerToSendToken({login:t});if(r!==s.SendTokenStatus.SUCCESS)throw c.default.log(`Server failed to send a token with status: ${s.SendTokenStatus[r]}`),new Error(i.AuthenticationCode[i.AuthenticationCode.SEND_TOKEN_FAILED])};const U=(e,t)=>{t?e.dispatch((0,d.enableOtp)(l.OtpType.OTP_LOGIN)):e.dispatch((0,d.enableOtp)(l.OtpType.OTP_NEW_DEVICE))};t.generateUki=function(e){return`${e}-${(0,n.v4)()}`};const L=(e,t,r,n,o)=>{const a=o||E.device.getDefaultDeviceName(),s=e.getPlatformInfo(),c=e.getAccountInfo().login,u={deviceName:(0,I.secureDeviceName)(a),appVersion:s.appVersion,platform:s.platformName,osCountry:(0,O.makeSafeCountry)(e.getLocation().country||s.country),osLanguage:(0,O.makeSafeLanguage)(s.lang),temporary:r!==i.PersistData.PERSIST_DATA_YES};switch(t.type){case"extraDeviceToken":return(0,O.completeExtraDeviceRegistrationWithToken)(e,{device:u,login:c,verification:{token:(0,i.extractExtraDeviceToken)(t)}});case"emailToken":case"otp":case"sso":return(0,O.completeDeviceRegistrationWithAuthTicket)(e,{device:u,login:c,authTicket:n});default:(0,T.assertUnreachable)(t)}},M=async(e,t)=>{const r=await(0,w.dashlaneAuthenticatorGetAuthTicket)(e,t);if(!1===r.success){const{error:{code:e,message:t}}=r;if(e===i.AuthenticationCode.BUSINESS_ERROR)throw new Error(t);throw new Error(i.AuthenticationCode[e])}return N?.(i.CancelDashlaneAuthenticatorRegistration.COMPLETED),r.authTicket};t.cancelRegistrationWithDashlaneAuthenticator=async function(){R?.(i.CancelDashlaneAuthenticatorRegistration.CANCELLED)},t.registerDeviceWithDashlaneAuthenticator=async function(e,t,r){const n=new Promise(((e,t)=>{N=e,R=t}));let o;try{o=(await Promise.all([M(e,r),n]))[0]}catch(e){if(e===i.CancelDashlaneAuthenticatorRegistration.CANCELLED)return i.AuthenticationCode.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED;throw e}finally{R=void 0,N=void 0}if(o){const n=await((e,t,r,n)=>{const o=n||E.device.getDefaultDeviceName(),a=e.getPlatformInfo(),s=e.getAccountInfo().login,c={deviceName:(0,I.secureDeviceName)(o),appVersion:a.appVersion,platform:a.platformName,osCountry:(0,O.makeSafeCountry)(e.getLocation().country||a.country),osLanguage:(0,O.makeSafeLanguage)(a.lang),temporary:t!==i.PersistData.PERSIST_DATA_YES};return(0,O.completeDeviceRegistrationWithAuthTicket)(e,{device:c,login:s,authTicket:r})})(e,t,o,r);(0,O.isApiError)(n)&&function(e){if(!(0,O.isApiErrorOfType)(O.BusinessError,e))throw new Error(`Failed to complete device registration (${e.code})`);const t=e.code;if(t===O.InvalidAuthTicket)throw new Error(i.AuthenticationCode[i.AuthenticationCode.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED]);(0,T.assertUnreachable)(t)}(n);const{deviceAccessKey:a,deviceSecretKey:s,settings:c,serverKey:u,deviceAnalyticsId:l,userAnalyticsId:d,publicUserId:p}=n,{login:f}=e.getAccountInfo();return e.dispatch((0,_.deviceRegistered)((0,_.makeDeviceRegistrationKeys)(a,s),t,f)),e.dispatch((0,v.updateisUsingDashlaneAuthenticator)(!0)),e.dispatch((0,v.updateisUsingBackupCode)(!1)),u&&e.dispatch((0,v.updateServerKey)(u)),e.dispatch((0,v.updateSettingsForMPValidation)(c)),l&&e.dispatch((0,v.updateDeviceAnalyticsId)(l)),d&&e.dispatch((0,v.updateUserAnalyticsId)(d)),p&&e.dispatch((0,v.updatePublicUserId)(p)),i.AuthenticationCode.ASK_MASTER_PASSWORD}throw new Error("Authentication Ticket is missing")};const k=async(e,t)=>{const r=await(0,w.convertTokenToAuthTicket)(e,t);if(!1===r.success){const{error:{code:e,message:t}}=r;if(e===i.AuthenticationCode.BUSINESS_ERROR)throw new Error(t);throw new Error(i.AuthenticationCode[e])}return r.authTicket};t.registerDevice=async function(e,t,r,n,a,s){const c=await k(e,r),u=await L(e,r,t,c,a);if((0,O.isApiError)(u))return function(e,t){if(!(0,O.isApiErrorOfType)(O.BusinessError,e))throw new Error(`Failed to complete device registration (${e.code})`);const r=e.code;switch(r){case O.UserNotFound:throw new Error(i.AuthenticationCode[i.AuthenticationCode.INVALID_LOGIN]);case O.VerificationFailed:case O.InvalidAuthTicket:if("otp"===t.type)throw new Error(i.AuthenticationCode[i.AuthenticationCode.OTP_NOT_VALID]);throw new Error(i.AuthenticationCode[i.AuthenticationCode.TOKEN_NOT_VALID]);case O.VerificationMethodDisabled:throw new Error(i.AuthenticationCode[i.AuthenticationCode.REGISTER_DEVICE_FAILED]);default:(0,T.assertUnreachable)(r)}}(u,r);const{deviceAccessKey:l,deviceSecretKey:d,settings:p,serverKey:f,ssoServerKey:g,remoteKeys:E,deviceAnalyticsId:A,userAnalyticsId:b,publicUserId:I}=u;if(g){const{masterPasswordEncryptorService:t,remoteDataEncryptorService:r,ssoServiceProviderKey:n}=s;if(!E||(0,o.isEmpty)(E))throw new Error("registerDevice failed with error: ssoServerKey or remoteKeys is missing");const a=(0,m.base64ToBuffer)(g),i=E.filter((e=>"sso"===e.type))[0];try{const o=(0,m.base64ToBuffer)(n),s=(0,y.getEncryptionKeyBuffer)(o,a,{skipDerivation:!0}),c=(0,m.arrayBufferToText)(s),u="",l=(0,h.getNoDerivationCryptoConfig)();e.dispatch((0,v.updateMasterPassword)(c)),await t.setInstance({raw:c},u,l);const d=await t.getInstance().decrypt(i.key),p=(0,S.deflatedUtf8ToUtf16)(d,{skipUtf8Decoding:!0,skipInflate:!0});await r.setInstance({raw:p},u,l),e.dispatch((0,v.updateRemoteKey)(p))}catch(e){throw new Error(`registerDevice failed deciphering remoteKey with error: ${e}`)}}const{login:w}=e.getAccountInfo();return e.dispatch((0,_.deviceRegistered)((0,_.makeDeviceRegistrationKeys)(l,d),t,w)),e.dispatch((0,v.updateisUsingDashlaneAuthenticator)(!1)),e.dispatch((0,v.updateisUsingBackupCode)(n)),f&&e.dispatch((0,v.updateServerKey)(f)),e.dispatch((0,v.updateSettingsForMPValidation)(p)),"otp"===r?.type&&U(e,f),A&&e.dispatch((0,v.updateDeviceAnalyticsId)(A)),b&&e.dispatch((0,v.updateUserAnalyticsId)(b)),I&&e.dispatch((0,v.updatePublicUserId)(I)),i.AuthenticationCode.ASK_MASTER_PASSWORD},t.validateMasterPassword=async function(e,t){try{const r=e.getState(),n=(0,C.masterPasswordValidationDataSelector)(r),o=e=>{},[a]=await f.decrypt(t.getInstance(),o,null,new Map,[n]);return e.dispatch(await(0,g.applyTransaction)(a)),e.dispatch(u.registerLastSync(p.MIN_SYNC_TIMESTAMP)),i.AuthenticationCode.LOGGEDIN}catch(e){const t=P.CarbonError.fromAnyError(e).addContextInfo("REMOTE LOGIN","validateMasterPassword");throw(0,D.sendExceptionLog)({error:t}),new Error(i.AuthenticationCode[i.AuthenticationCode.WRONG_PASSWORD])}},t.getUsersSSOInfo=e=>{if(!e)return{serviceProviderUrl:""};const t=(e=>{if(e.migration)switch(e.migration){case"mp_user_to_sso_member":return a.SSOMigrationType.MP_TO_SSO;case"sso_member_to_admin":case"sso_member_to_mp_user":return a.SSOMigrationType.SSO_TO_MP}})(e);return{serviceProviderUrl:e.serviceProviderUrl?e.serviceProviderUrl:"",...void 0!==t?{migration:t}:{},isNitroProvider:e.isNitroProvider}}},28096:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendConfirmCreateAccountResult=t.sendEncryptSettingsResult=t.sendFeatures=t.sendWebOnboardingModeUpdate=t.sendTeamAdminDataUpdate=t.sendAccountInfo=t.changeDeviceNameResult=t.deactivateDeviceResult=t.updatePaymentCardTokenResult=t.reportDataUpdate=t.getDataUpdates=t.sendLocationInfo=t.sendLocalAccounts=t.triggerSessionSyncStatus=t.triggerSessionOpened=t.triggerOpenSessionFailed=t.getAuthenticationCodeFromError=t.triggerServerSidePairingStatusChanged=t.triggerLoginStatusChanged=t.triggerOpenSessionSsoRedirectionToIdpRequired=t.triggerOpenSessionExtraDeviceTokenRequired=t.triggerOpenSessionDashlaneAuthenticator=t.triggerOpenSessionTokenSent=t.triggerAskMasterPassword=t.triggerOpenSessionOTPForNewDeviceRequired=t.triggerOpenSessionOTPSent=t.SessionResumingCode=t.AuthenticationCode=void 0;const n=r(16516),o=r(53576),a=r(21726),i=r(19697),s=r(70252),c=r(90503),u=r(95623),l=r(39373),d=r(46083),p=r(92263),f=r(14656),g=r(90622),m=r(25576);Object.defineProperty(t,"AuthenticationCode",{enumerable:!0,get:function(){return m.AuthenticationCode}}),Object.defineProperty(t,"SessionResumingCode",{enumerable:!0,get:function(){return m.SessionResumingCode}});const h=r(19979),y=r(56814),S=r(91892),v=r(41717),E=r(38981),A=r(27885);function _(e){u.default.log(`Session status updated for ${e.login}`);const t=(0,a.default)();t&&t.loginStatusChanged(e);const r=(0,i.default)();r&&r.loginStatusChanged(e)}function b(e){if(i.default){const t=(0,i.default)();t&&t.serverSidePairingStatusChanged(e)}}function T(e){let t=e&&e.message&&void 0!==m.AuthenticationCode[e.message]?m.AuthenticationCode[e.message]:m.AuthenticationCode.UNKNOWN_ERROR;return t===m.AuthenticationCode.UNKNOWN_ERROR&&((0,p.isCarbonError)(e,f.HttpError,f.HttpErrorCode.NETWORK_ERROR)&&(t=m.AuthenticationCode.NETWORK_ERROR),e?.message?.includes("TOKEN_NOT_VALID")&&(t=m.AuthenticationCode.TOKEN_NOT_VALID)),t}function I(e){switch(e){case m.AuthenticationCode.INVALID_LOGIN:case m.AuthenticationCode.EMPTY_LOGIN:case m.AuthenticationCode.EMPTY_MASTER_PASSWORD:case m.AuthenticationCode.EMPTY_TOKEN:case m.AuthenticationCode.EMPTY_OTP:case m.AuthenticationCode.NETWORK_ERROR:case m.AuthenticationCode.USER_DOESNT_EXIST:case m.AuthenticationCode.OTP_NOT_VALID:case m.AuthenticationCode.TOKEN_NOT_VALID:case m.AuthenticationCode.TOKEN_TOO_MANY_ATTEMPTS:case m.AuthenticationCode.WRONG_PASSWORD:return c.ExceptionCriticality.WARNING;default:return c.ExceptionCriticality.ERROR}}function w(e){return Promise.resolve({localAccounts:e}).then((e=>{u.default.log("send localAccountsListUpdated to leeloo");const t=(0,a.default)();t&&t.localAccountsListUpdated(e);const r=(0,i.default)();r&&r.localAccountsListUpdated(e)}))}function C(e){const t=e.getPersonalData(),r=e.getSpaceData(),o=e.getSharingData(),a=e.getUserLogin(),i=(0,n.curry)(l.removeCredentialsWithQuarantinedSpaces)(r),s=(0,n.pipe)(i,l.fixCredentialsWithMissingTitles)(t.credentials),c=["changesToUpload","changeHistories"],u=(0,n.omit)(c,{...t,credentials:s}),p=(0,l.handleLimitedSharedCredentialsPassword)(s,o,a),f=(0,d.handleLimitedSharedNotes)(t.notes,o,a);return{personalDataToSend:u,obfuscatedPersonalDataToSend:(0,n.omit)(c,{...t,credentials:p,notes:f})}}function O(e){const t=e.getState(),r=e.getSpaceData(),{obfuscatedPersonalDataToSend:n}=C(e),o=(0,a.default)(),s=(0,i.default)();if(o&&o.dataModelUpdated(n),s&&s.spaceDataUpdated(r),o){const e=(0,h.getIconsUrlsForCredentials)(n.credentials),r=(0,y.getFormattedDomainsFromUrls)(e),a=(0,y.decryptIconsDomains)((0,S.iconsSelector)(t),r),i={...n,credentials:(0,h.getCredentialsWithWebsiteIcon)(n.credentials,a,v.defaultIconTypes)};o.dataModelUpdated(i)}}function D(e,t){const r=(0,a.default)();r&&r.accountInfoChanged({accountInfo:e,spaceData:t});const n=(0,i.default)();n&&n.accountInfoChanged({accountInfo:e,spaceData:t})}function P(e){const t=(0,a.default)();t&&t.webOnboardingModeUpdated(e);const r=(0,i.default)();r&&r.webOnboardingModeUpdated(e)}function N(e){const t=(0,a.default)();t&&t.accountFeaturesChanged(e);const r=(0,i.default)();r&&r.accountFeaturesChanged(e)}t.triggerOpenSessionOTPSent=function(e){u.default.log("Ask for OTP");const t=(0,a.default)();t&&t.openSessionOTPSent(e);const r=(0,i.default)();r&&r.openSessionOTPSent(e)},t.triggerOpenSessionOTPForNewDeviceRequired=function(){const e=(0,a.default)();e&&e.openSessionOTPForNewDeviceRequired();const t=(0,i.default)();t&&t.openSessionOTPForNewDeviceRequired()},t.triggerAskMasterPassword=function(e){u.default.log("Ask for master password");const t=(0,a.default)();t&&t.openSessionAskMasterPassword({login:e});const r=(0,i.default)();r&&r.openSessionAskMasterPassword({login:e})},t.triggerOpenSessionTokenSent=function(e){u.default.log("Ask for new device e-mail token");const t=(0,a.default)();t&&t.openSessionTokenSent(e);const r=(0,i.default)();r&&r.openSessionTokenSent(e)},t.triggerOpenSessionDashlaneAuthenticator=function(){(0,u.logDebug)({message:"Ask for new device dashlane authenticator push notification"});const e=(0,a.default)();e&&e.openSessionDashlaneAuthenticator();const t=(0,i.default)();t&&t.openSessionDashlaneAuthenticator()},t.triggerOpenSessionExtraDeviceTokenRequired=function(){const e=(0,a.default)();e&&e.openSessionExtraDeviceTokenRequired();const t=(0,i.default)();t&&t.openSessionExtraDeviceTokenRequired()},t.triggerOpenSessionSsoRedirectionToIdpRequired=function(e,t){const r=(0,a.default)();r&&r.openSessionSsoRedirectionToIdpRequired({serviceProviderRedirectUrl:e,isNitroProvider:t});const n=(0,i.default)();n&&n.openSessionSsoRedirectionToIdpRequired({serviceProviderRedirectUrl:e,isNitroProvider:t})},t.triggerLoginStatusChanged=_,t.triggerServerSidePairingStatusChanged=b,t.getAuthenticationCodeFromError=T,t.triggerOpenSessionFailed=function(e){u.default.log("Failed to open Session"),u.default.log(`error: ${e}`);const t=T(e),r=t===m.AuthenticationCode.UNKNOWN_ERROR?e&&e.message&&"string"==typeof e.message?e.message:"89645128":"",n=new Error(`[SessionCommunication] - triggerOpenSessionFailed: ${e}`);n.stack=e.stack,u.default.error(n),(0,s.sendExceptionLog)({error:n,code:I(t)});const o={errorCode:m.AuthenticationCode[t],additionalErrorInfo:r,displayErrorCode:!0},c=(0,a.default)();c&&c.openSessionFailed(o);const l=(0,i.default)();l&&l.openSessionFailed(o)},t.triggerSessionOpened=function(e,t,r,n){const a=void 0!==(0,E.ssoMigrationInfoSelector)(e.getState()).migration;_({loggedIn:!0,login:e.getAccountInfo().login,needsSSOMigration:a}),D(r,(0,A.getNodePremiumStatusSpaceData)(e)),O(e),P(e.getLocalSettings().webOnboardingMode),(0,g.getLocalAccounts)(e,t).then((e=>{w(e)})),function(e){const t=e.getPersonalFeatures();t.features&&N({lastUpdate:t.lastUpdateTimestamp,list:t.features})}(e),void 0!==n&&b({serverSidePairingStatus:n?o.ServerSidePairingStatus.PAIRED:o.ServerSidePairingStatus.UNPAIRED})},t.triggerSessionSyncStatus=function(e){const t=(0,a.default)();t&&t.sessionSyncStatus(e);const r=(0,i.default)();r&&r.sessionSyncStatus(e)},t.sendLocalAccounts=w,t.sendLocationInfo=function(e){const t=(0,i.default)();t&&t.currentLocationUpdated(e)},t.getDataUpdates=C,t.reportDataUpdate=O,t.updatePaymentCardTokenResult=function(e){const t=(0,i.default)();t&&t.updatePaymentCardTokenResult(e)},t.deactivateDeviceResult=function(e){const t=(0,a.default)();t&&t.deactivateDeviceResult(e);const r=(0,i.default)();r&&r.deactivateDeviceResult(e)},t.changeDeviceNameResult=function(e){const t=(0,a.default)();t&&t.changeDeviceNameResult(e);const r=(0,i.default)();r&&r.changeDeviceNameResult(e)},t.sendAccountInfo=D,t.sendTeamAdminDataUpdate=function(e){const t=(0,i.default)();t&&t.teamAdminDataUpdated(e)},t.sendWebOnboardingModeUpdate=P,t.sendFeatures=N,t.sendEncryptSettingsResult=function(e){const t=(0,i.default)();t&&t.encryptSettingsResultUpdated(e)},t.sendConfirmCreateAccountResult=function(e){const t=(0,i.default)();t&&t.confirmCreateAccountResultUpdated(e)}},5464:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refeshAccountInfo=t.AutofillProtectionStatus=t.getOtpForCredential=t.askWebsiteInfo=t.saveGeneratedPassword=t.generatePassword=t.getPasswordGenerationSettings=t.generateAndSavePassword=t.resumeSession=t.sessionForceSync=t.getAndTriggerRefreshAccountInfo=t.makeSessionController=void 0;const n=r(10203),o=r(50415),a=r(95623),i=r(28096),s=r(95648),c=r(18862),u=r(70252),l=r(44908),d=r(35507),p=r(19697),f=r(49551),g=r(87496),m=r(29954),h=r(73439),y=r(9486),S=r(19399),v=r(6e3),E=r(56915),A=r(16593),_=r(28287),b=r(34376),T=r(27885);t.makeSessionController=e=>({askWebsiteInfo:t=>M(e.storeService,t),cancelPremiumSubscription:()=>async function(e,t,r){if(!e.isAuthenticated())return{success:!1};try{return await t.getInstance().payment.cancelPremiumSubscription(),C(e,t,r).then(O).catch((e=>{})),{success:!0}}catch(e){const t=e.message,r=new Error(`[SessionController] - cancelPremiumSubscription: ${e}`);return a.default.log(r),u.sendExceptionLog({error:r}),{success:!1,reason:t}}}(e.storeService,e.sessionService,e.wsService),changeDeviceName:(t,r)=>function(e,t,r,n){if(e.isAuthenticated()){const e=(0,S.secureDeviceName)(n);return t.getInstance().device.changeDeviceName(r,e).catch((e=>{const t=new Error(`[SessionController] - changeDeviceName: ${e}`);a.default.log(t),u.sendExceptionLog({error:t})}))}return Promise.resolve(null)}(e.storeService,e.sessionService,t,r),closeSession:()=>{return t=e.sessionService,a.default.log("SessionController/closeSession called"),t.close();var t},lockSession:()=>e.sessionService.lock(),deactivateDevice:t=>function(e,t,r){return e.isAuthenticated()?t.getInstance().device.deactivateDevice(r).catch((e=>{const t=new Error(`[SessionController] - deactivateDevice: ${e}`);a.default.log(t),u.sendExceptionLog({error:t})})):Promise.resolve(null)}(e.storeService,e.sessionService,t),generateAndSavePassword:t=>N(e.storeService,e.sessionService,t),generatePassword:t=>U(e.storeService,t),getAndTriggerRefreshAccountInfo:()=>w(e.storeService,e.sessionService,e.wsService),getPasswordGenerationSettings:()=>R(e.storeService),getCurrentUserInfo:()=>(0,b.getCurrentUserInfo)(e.storeService),getDevicesList:()=>function(e,t){return e.isAuthenticated()?t.getInstance().device.fetchDevicesList().catch((e=>(a.default.log("Error while fetching Devices list",e),[]))):Promise.resolve([])}(e.storeService,e.sessionService),getInvoices:()=>function(e,t){return e.isAuthenticated()?t.getInstance().payment.fetchInvoices().catch((e=>{const t=new Error(`[SessionController] - getInvoices: ${e}`);return a.default.log(t),u.sendExceptionLog({error:t}),null})):Promise.resolve(null)}(e.storeService,e.sessionService),getLoginStatus:()=>function(e){const t=e.getState();return(0,v.loginStatusSelector)(t)}(e.storeService),getPersonalData:()=>e.storeService.getPersonalData(),getPersonalSettings:()=>{return t=e.storeService,Promise.resolve(t.getPersonalSettings());var t},getTemporaryToken:()=>function(e,t){return e.hasSessionId()?t.getInstance().device.fetchTemporaryToken().catch((e=>(a.default.log("Error while fetching Temporary token",e),null))):Promise.resolve(null)}(e.storeService,e.sessionService),getUki:()=>{return t=e.storeService,{uki:(0,E.ukiSelector)(t.getState())};var t},isSaveCredentialDisabled:t=>(0,m.isSaveCredentialDisabledOnDomain)(e.storeService,t),signalSaveCredentialDisabled:t=>(0,m.signalSaveCredentialDisabled)(e.storeService,e.sessionService,t),resumeSession:()=>P(e.storeService,e.storageService,e.sessionService,e.wsService),saveGeneratedPassword:(t,r)=>L(e.storeService,e.sessionService,t,r),sendCredentialLoginUrl:(t,r)=>function(e,t,r){if(!e.isAuthenticated())return;const n=(0,f.findDataModelObject)(t,e.getPersonalData().credentials);n&&(0,p.default)().credentialLoginUrlRetrieved({requestId:r,credentialId:t,url:(0,g.getGoToUrlForCredential)(n)})}(e.storeService,t,r),sessionForceSync:(t=n.Trigger.Manual)=>D(e.sessionService,t),updateCardToken:(t,r)=>async function(e,t,r,n,o){try{if(!e.isAuthenticated())return;const{payment:a}=t.getInstance(),s=await a.updatePaymentCard(n,o);i.updatePaymentCardTokenResult(s),C(e,t,r).then(O).catch((e=>{}))}catch(e){const t=e.message,r=new Error(`[SessionController] - updateCardToken: ${e}`);a.default.log(r),u.sendExceptionLog({error:r}),i.updatePaymentCardTokenResult({success:!1,reason:t})}}(e.storeService,e.sessionService,e.wsService,t,r),getOtpForCredential:t=>k(e.storeService,t),validateMasterPassword:t=>(0,_.validateMasterPassword)(e.storeService,e.masterPasswordEncryptorService,t)});const I={devicesCount:0,premiumStatus:{statusCode:null},contactInfo:{},subscriptionCode:null};async function w(e,t,r){if(!e.isAuthenticated())return e.dispatch((0,c.saveAccountContactInfo)(I.contactInfo)),I;try{const n=await C(e,t,r),o=n.accountInfo;return e.dispatch((0,c.saveAccountContactInfo)(o.contactInfo)),O(n),o}catch(t){a.default.error("Error during getRefreshedAccountInfo",t);const r=(0,A.premiumStatusSelector)(e.getState()),n=r?{premiumStatus:r}:{};return{...I,...n}}}async function C(e,t,r){const{device:n,user:o}=t.getInstance(),i=(0,d.refreshPremiumStatus)(e,r,e.getUserLogin(),(0,E.ukiSelector)(e.getState())).then((()=>({premiumStatus:e.getLocalSettings().premiumStatus,nodePremiumStatusSpaceData:(0,T.getNodePremiumStatusSpaceData)(e)}))),s=n.fetchDevicesList().then((e=>e.length)).catch((e=>1)),c=o.fetchContactInfo(),l=o.fetchSubscriptionCode();try{await o.fetchAccountInfo()}catch(e){(0,a.logError)(e),u.sendExceptionLog({error:e})}const[p,f,g,m]=await Promise.all([i,s,c,l]),{premiumStatus:h,nodePremiumStatusSpaceData:y}=p;if(!h)throw new Error("premium info should exist");return{accountInfo:{premiumStatus:h,devicesCount:f,contactInfo:g,subscriptionCode:m},nodePremiumStatusSpaceData:y}}function O(e){i.sendAccountInfo(e.accountInfo,e.nodePremiumStatusSpaceData)}async function D(e,t=n.Trigger.Manual){await e.getInstance().user.attemptSync(t)}function P(e,t,r,n){return(0,y.triggerABTestingChanged)(e.getABTesting()),i.sendLocationInfo(e.getPlatform().location),e.isAuthenticated()?w(e,r,n).then((r=>(i.triggerSessionOpened(e,t,r),!0))):Promise.resolve(null)}function N(e,t,r){return l.generateAndSavePassword(e,t,r)}function R(e){return l.getDefaultPasswordGenerationSettings(e.getPersonalSettings())}function U(e,t){return l.generatePassword(e.getPersonalSettings(),t)}function L(e,t,r,n){return l.saveGeneratedPassword(e,t,r,n)}function M(e,t){return(0,s.getWebsiteInfo)(e,t)}function k(e,t){const r=(0,f.findDataModelObject)(t,e.getPersonalData().credentials);return r?.OtpSecret?(0,h.generateOtpFromSecret)(r.OtpSecret):""}t.getAndTriggerRefreshAccountInfo=w,t.sessionForceSync=D,t.resumeSession=P,t.generateAndSavePassword=N,t.getPasswordGenerationSettings=R,t.generatePassword=U,t.saveGeneratedPassword=L,t.askWebsiteInfo=M,t.getOtpForCredential=k,t.AutofillProtectionStatus=(0,o.Enum)("UNPROTECTED","LOCKED","UNLOCKED"),t.refeshAccountInfo=function(e,t,r){C(e,t,r).then(O).catch((e=>{}))}},66833:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFreshSpaceData=t.updateCurrentSpaceWith=t.updateSpaceData=t.refreshSpaceData=void 0;const n=r(36738),o=r(28096);function a(e,t){const r={spaces:t};e.dispatch((0,n.spaceDataUpdated)(r)),(0,o.reportDataUpdate)(e)}function i(e){return(e||[]).map((e=>({teamId:e.teamId,details:e})))}t.refreshSpaceData=function(e,t){const r=i(t);return a(e,r),Promise.resolve(r)},t.updateSpaceData=a,t.updateCurrentSpaceWith=function(e,t){const r=e.getSpaceData().spaces.map((e=>"accepted"===e.details.status?t(e):e));a(e,r)},t.getFreshSpaceData=i},16661:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconsCacheLoaded=t.iconsRefreshed=t.iconsUpdated=t.ICONS_CACHE_LOADED=t.ICONS_REFRESHED=t.ICONS_UPDATED=void 0,t.ICONS_UPDATED="ICONS_UPDATED",t.ICONS_REFRESHED="ICONS_REFRESHED",t.ICONS_CACHE_LOADED="ICONS_CACHE_LOADED",t.iconsUpdated=e=>({type:t.ICONS_UPDATED,data:e}),t.iconsRefreshed=e=>({type:t.ICONS_REFRESHED,data:e}),t.IconsCacheLoaded=e=>({type:t.ICONS_CACHE_LOADED,data:e})},19695:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iconsFromStorage=t.iconsToStorage=void 0,t.iconsToStorage=e=>({...e,domains:Array.from(e.domains.entries())}),t.iconsFromStorage=e=>({...e,domains:new Map(e.domains)})},58174:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyIconByDomains=void 0;const n=r(16661),o=r(47408),a=r(46445);function i(){return{domains:new Map,lastUpdateTimeSeconds:0}}t.default=(e=i(),t)=>{switch(t.type){case n.ICONS_UPDATED:return{...e,domains:s(e,t.data)};case n.ICONS_REFRESHED:return{...e,domains:s(e,t.data),lastUpdateTimeSeconds:(0,o.getUnixTimestamp)()};case n.ICONS_CACHE_LOADED:return t.data;default:return e}},t.getEmptyIconByDomains=i;const s=(e,t)=>t.reduce(((e,t)=>{const{domain:r,...n}=t;if(!r)return e;const o=(0,a.computeHashMD5)(r);return e.get(o)||e.set(o,n),e}),new Map(e.domains))},43416:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadedStoredUserABTests=t.refreshedUserABTests=t.SENT_AB_TEST_USAGE_LOG=t.STORED_USER_AB_TEST_LOADED=t.USER_AB_TESTS_UPDATED=void 0,t.USER_AB_TESTS_UPDATED="USER_AB_TEST_UPDATED",t.STORED_USER_AB_TEST_LOADED="STORED_USER_AB_TEST_LOADED",t.SENT_AB_TEST_USAGE_LOG="SENT_AB_TEST_USAGE_LOG",t.refreshedUserABTests=e=>({type:t.USER_AB_TESTS_UPDATED,lastUpdateTimestamp:Date.now(),tests:e}),t.loadedStoredUserABTests=e=>({type:t.STORED_USER_AB_TEST_LOADED,userABTests:e})},1678:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyTests=void 0;const n=r(43416);t.getEmptyTests=function(){return{lastUpdateTimestamp:null,tests:{}}},t.default=(e={lastUpdateTimestamp:null,tests:{}},t)=>{switch(t.type){case n.USER_AB_TESTS_UPDATED:return{...e,tests:t.tests,lastUpdateTimestamp:t.lastUpdateTimestamp};case n.STORED_USER_AB_TEST_LOADED:return{...e,...t.userABTests};default:return e}}},62627:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userABTestVariantSelector=t.userABTestSelector=t.userABTestsSelector=void 0,t.userABTestsSelector=e=>e.userSession.abTests,t.userABTestSelector=(e,r)=>(0,t.userABTestsSelector)(e).tests[r],t.userABTestVariantSelector=(e,r)=>{const n=(0,t.userABTestSelector)(e,r);return n?n.variant:void 0}},18862:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveAccountContactInfo=t.SAVE_ACCOUNT_CONTACT_INFO=void 0,t.SAVE_ACCOUNT_CONTACT_INFO="SAVE_ACCOUNT_CONTACT_INFO",t.saveAccountContactInfo=e=>({type:t.SAVE_ACCOUNT_CONTACT_INFO,accountContactInfo:e})},39727:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(18862);t.default=(e={},t)=>t.type===n.SAVE_ACCOUNT_CONTACT_INFO?{...e,...t.accountContactInfo}:e},43461:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accountCreationStarted=t.saveAccountKeys=t.saveAccountSettings=t.ACCOUNT_CREATION_STARTED=t.SAVE_ACCOUNT_KEYS=t.SAVE_ACCOUNT_SETTINGS=void 0,t.SAVE_ACCOUNT_SETTINGS="SAVE_ACCOUNT_SETTINGS",t.SAVE_ACCOUNT_KEYS="SAVE_ACCOUNT_KEYS",t.ACCOUNT_CREATION_STARTED="ACCOUNT_CREATION_STARTED",t.saveAccountSettings=function(e){return{type:t.SAVE_ACCOUNT_SETTINGS,settings:e}},t.saveAccountKeys=function(e){return{type:t.SAVE_ACCOUNT_KEYS,accountKey:e}},t.accountCreationStarted=function(e){return{type:t.ACCOUNT_CREATION_STARTED,isSSO:e.isSSO}}},12659:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyAccountCreation=void 0;const n=r(43461),o=r(95648);function a(){return{settings:{personalSettings:(0,o.getEmptyPersonalSettings)(),promise:null},accountKey:{promise:null},isSSO:!1}}t.default=(e=a(),t)=>{switch(t.type){case n.SAVE_ACCOUNT_SETTINGS:return{...e,settings:{...t.settings,personalSettings:(0,o.getUpdatedPersonalSettings)(e.settings.personalSettings,t.settings.personalSettings)}};case n.SAVE_ACCOUNT_KEYS:return{...e,accountKey:t.accountKey};case n.ACCOUNT_CREATION_STARTED:return{...a(),isSSO:t.isSSO};default:return e}},t.getEmptyAccountCreation=a},12706:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSSOAccountCreationSelector=void 0,t.isSSOAccountCreationSelector=e=>e.userSession.accountCreation.isSSO},59489:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setPasswordLeaked=t.saveSubscriptionCode=t.localDataLoaded=t.userAuthenticationFailed=t.confirmUserAuthentication=t.enableOtp=t.USER_AUTHENTICATION_FAILED=t.SET_PASSWORD_LEAKED=t.SAVE_SUBSCRIPTION_CODE=t.LOCAL_DATA_LOADED=t.CONFIRM_USER_AUTHENTICATION=t.ENABLE_OTP=void 0;const n=r(25576);t.ENABLE_OTP="ENABLE_OTP",t.CONFIRM_USER_AUTHENTICATION="CONFIRM_USER_AUTHENTICATION",t.LOCAL_DATA_LOADED="LOCAL_DATA_LOADED",t.SAVE_SUBSCRIPTION_CODE="SAVE_SUBSCRIPTION_CODE",t.SET_PASSWORD_LEAKED="SET_PASSWORD_LEAKED",t.USER_AUTHENTICATION_FAILED="USER_AUTHENTICATION_FAILED",t.enableOtp=e=>({type:t.ENABLE_OTP,otpType:e}),t.confirmUserAuthentication=()=>({type:t.CONFIRM_USER_AUTHENTICATION,sessionStartTime:Date.now()}),t.userAuthenticationFailed=()=>({type:t.USER_AUTHENTICATION_FAILED}),t.localDataLoaded=()=>({type:t.LOCAL_DATA_LOADED,persistData:n.PersistData.PERSIST_DATA_YES}),t.saveSubscriptionCode=e=>({type:t.SAVE_SUBSCRIPTION_CODE,code:e}),t.setPasswordLeaked=e=>({type:t.SET_PASSWORD_LEAKED,isPasswordLeaked:e})},86797:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyAccount=t.OtpType=void 0;const n=r(48313),o=r(43739),a=r(59489);var i;function s(){return{login:null,isAuthenticated:!1,sessionStartTime:null,persistData:null,otpType:i.NO_OTP,subscriptionCode:null,isPasswordLeaked:!1}}!function(e){e[e.NO_OTP=0]="NO_OTP",e[e.OTP_NEW_DEVICE=1]="OTP_NEW_DEVICE",e[e.OTP_LOGIN=2]="OTP_LOGIN"}(i=t.OtpType||(t.OtpType={})),t.getEmptyAccount=s,t.default=(e=s(),t)=>{switch(t.type){case n.OPEN_SESSION:return{...e,login:t.login};case o.DEVICE_REGISTERED:case a.LOCAL_DATA_LOADED:return{...e,persistData:t.persistData};case a.CONFIRM_USER_AUTHENTICATION:return{...e,isAuthenticated:!0,sessionStartTime:t.sessionStartTime};case a.USER_AUTHENTICATION_FAILED:return{...e,isAuthenticated:!1,sessionStartTime:null};case a.ENABLE_OTP:return{...e,otpType:t.otpType};case a.SAVE_SUBSCRIPTION_CODE:return{...e,subscriptionCode:t.code};case a.SET_PASSWORD_LEAKED:return{...e,isPasswordLeaked:t.isPasswordLeaked};default:return e}}},48313:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyTransaction=t.premiumStatusUpdated=t.localSettingsUpdated=t.closeSession=t.openSession=t.saveGeneratedPassword=t.savePersonalDataItems=t.savePersonalDataItem=t.SAVE_PERSONAL_ITEMS=t.SAVE_PERSONAL_ITEM=t.SAVE_GENERATED_PASSWORD=t.PREMIUM_STATUS_UPDATED=t.LOCAL_SETTINGS_UPDATED=t.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION=t.ADD_PERSONAL_ITEM_FROM_TRANSACTION=t.CLOSE_SESSION=t.OPEN_SESSION=void 0;const n=r(84977),o=r(27517);t.OPEN_SESSION="OPEN_SESSION",t.CLOSE_SESSION="CLOSE_SESSION",t.ADD_PERSONAL_ITEM_FROM_TRANSACTION="ADD_PERSONAL_ITEM_FROM_TRANSACTION",t.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION="REMOVE_PERSONAL_ITEM_FROM_TRANSACTION",t.LOCAL_SETTINGS_UPDATED="LOAD_STORED_LOCAL_SETTINGS",t.PREMIUM_STATUS_UPDATED="PREMIUM_STATUS_UPDATED",t.SAVE_GENERATED_PASSWORD="SAVE_GENERATED_PASSWORD",t.SAVE_PERSONAL_ITEM="SAVE_PERSONAL_ITEM",t.SAVE_PERSONAL_ITEMS="SAVE_PERSONAL_ITEMS",t.savePersonalDataItem=function(e,r,o){return{type:t.SAVE_PERSONAL_ITEM,dataType:n.default[r],dataModelObject:e,changeHistory:o}},t.savePersonalDataItems=function(e,r,o){return{type:t.SAVE_PERSONAL_ITEMS,dataType:n.default[r],dataModelObjects:e,changeHistory:o}},t.saveGeneratedPassword=function(e){return{type:t.SAVE_GENERATED_PASSWORD,generatedPassword:e}},t.openSession=e=>({type:t.OPEN_SESSION,login:e}),t.closeSession=()=>({type:t.CLOSE_SESSION}),t.localSettingsUpdated=e=>({type:t.LOCAL_SETTINGS_UPDATED,data:Object.assign({},e)}),t.premiumStatusUpdated=e=>({type:t.PREMIUM_STATUS_UPDATED,premiumStatus:e}),t.applyTransaction=async e=>{let r;return r="SETTINGS"===e.type?o.PersonalSettingsActionType.EditFromTransaction:"BACKUP_REMOVE"===e.action?t.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION:t.ADD_PERSONAL_ITEM_FROM_TRANSACTION,"BACKUP_EDIT"===e.action&&e.content&&(e.content.LastBackupTime=Math.floor(e.backupDate/1e3)),{type:r,itemId:e.identifier,content:e.content}}},42282:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetAuthTicketInfo=t.updateAuthTicketInfo=void 0;const n=r(4190);t.updateAuthTicketInfo=e=>({type:n.ADD_AUTH_TICKET_DATA,data:e}),t.resetAuthTicketInfo=()=>({type:n.RESET_AUTH_TICKET_DATA})},78663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyAuthTicketInfo=void 0;const n=r(4190);t.getEmptyAuthTicketInfo=()=>({login:null,date:0,authTicket:null}),t.default=(e=(0,t.getEmptyAuthTicketInfo)(),r)=>{switch(r.type){case n.ADD_AUTH_TICKET_DATA:return{...e,...r.data};case n.RESET_AUTH_TICKET_DATA:return{...e,...(0,t.getEmptyAuthTicketInfo)()};default:return e}}},4190:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RESET_AUTH_TICKET_DATA=t.ADD_AUTH_TICKET_DATA=void 0,t.ADD_AUTH_TICKET_DATA="ADD_AUTH_TICKET_DATA",t.RESET_AUTH_TICKET_DATA="RESET_AUTH_TICKET_DATA"},28417:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blacklistedUserSessionKeys=void 0,t.blacklistedUserSessionKeys=["iconsCache","health","personalData","teamAdminData","sharingSync","sharingData"]},16194:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeMPDone=t.changeMPStart=t.SET_CHANGE_MP_DONE=t.SET_CHANGE_MP_START=void 0,t.SET_CHANGE_MP_START="SET_CHANGE_MP_START",t.SET_CHANGE_MP_DONE="SET_CHANGE_MP_DONE",t.changeMPStart=()=>({type:t.SET_CHANGE_MP_START}),t.changeMPDone=()=>({type:t.SET_CHANGE_MP_DONE})},66403:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyChangeMPData=void 0;const n=r(16194);t.getEmptyChangeMPData=function(){return{changeMPinProgress:!1}},t.default=(e={changeMPinProgress:!1},t)=>{switch(t.type){case n.SET_CHANGE_MP_START:return{...e,changeMPinProgress:!0};case n.SET_CHANGE_MP_DONE:return{...e,changeMPinProgress:!1};default:return e}}},66417:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTPUpdatedAction=t.CREDENTIAL_OTP_UPDATED=void 0,t.CREDENTIAL_OTP_UPDATED="CREDENTIAL_OTP_UPDATED",t.credentialOTPUpdatedAction=(e,r)=>({type:t.CREDENTIAL_OTP_UPDATED,credentialId:e,otp:r})},11406:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTPUpdatedAction=t.credentialOTPs=void 0;var n=r(27547);Object.defineProperty(t,"credentialOTPs",{enumerable:!0,get:function(){return n.credentialOTPs}});var o=r(66417);Object.defineProperty(t,"credentialOTPUpdatedAction",{enumerable:!0,get:function(){return o.credentialOTPUpdatedAction}})},27547:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTPs=void 0,t.credentialOTPs=function(e={},t){return"CREDENTIAL_OTP_UPDATED"===t.type?{...e,[t.credentialId]:t.otp}:e}},31177:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.darkWebOnboardingStateUpdated=t.dataLeaksEmailStatusListUpdated=t.ONBOARDING_STATE_UPDATED=t.DATA_LEAKS_BREACHES_UPDATED=t.DATA_LEAKS_EMAIL_STATUS_UPDATED=void 0,t.DATA_LEAKS_EMAIL_STATUS_UPDATED="DATA_LEAKS_EMAIL_STATUS_UPDATED",t.DATA_LEAKS_BREACHES_UPDATED="DATA_LEAKS_BREACHES_UPDATED",t.ONBOARDING_STATE_UPDATED="ONBOARDING_STATE_UPDATED",t.dataLeaksEmailStatusListUpdated=e=>({type:t.DATA_LEAKS_EMAIL_STATUS_UPDATED,emailList:e}),t.darkWebOnboardingStateUpdated=e=>({type:t.ONBOARDING_STATE_UPDATED,onboardingState:e})},4980:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyDarkWebState=void 0;const n=r(31177),o=r(53582);function a(){return{emails:[],onboardingState:o.DarkWebOnboardingState.UNKNOWN}}t.getEmptyDarkWebState=a,t.default=(e=a(),t)=>{switch(t.type){case n.DATA_LEAKS_EMAIL_STATUS_UPDATED:return{...e,emails:t.emailList};case n.ONBOARDING_STATE_UPDATED:return{...e,onboardingState:t.onboardingState};default:return e}}},19478:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.teamDirectorySyncNotInProgress=t.teamDirectorySyncInProgress=t.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS=t.TEAM_DIRECTORY_SYNC_IN_PROGRESS=void 0,t.TEAM_DIRECTORY_SYNC_IN_PROGRESS="TEAM_DIRECTORY_SYNC_IN_PROGRESS",t.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS="TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS",t.teamDirectorySyncInProgress=e=>({type:t.TEAM_DIRECTORY_SYNC_IN_PROGRESS,teamId:e}),t.teamDirectorySyncNotInProgress=e=>({type:t.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS,teamId:e})},48005:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTeamDirectorySyncInProgress=t.getEmptyState=void 0;const n=r(19478);t.getEmptyState=function(){return{syncsInProgress:{}}},t.isTeamDirectorySyncInProgress=function(e,t){return e.syncsInProgress[t]},t.default=(e={syncsInProgress:{}},t)=>{switch(t.type){case n.TEAM_DIRECTORY_SYNC_IN_PROGRESS:const{teamId:r}=t;return{...e,syncsInProgress:{...e.syncsInProgress,[r]:!0}};case n.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS:const{teamId:o}=t;return{...e,syncsInProgress:{...e.syncsInProgress,[o]:!1}};default:return e}}},20317:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshedFeatures=t.loadedStoredFeatures=t.LOADED_STORED_FEATURES=t.FEATURES_UPDATED=void 0,t.FEATURES_UPDATED="FEATURES_UPDATED",t.LOADED_STORED_FEATURES="STORED_FEATURES_LOADED",t.loadedStoredFeatures=e=>({type:t.LOADED_STORED_FEATURES,data:e}),t.refreshedFeatures=e=>({type:t.FEATURES_UPDATED,lastUpdateTimestamp:Date.now(),features:e})},51504:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NEW_URL_PARSER_FF_PROD=t.NEW_URL_PARSER_FF=void 0,t.NEW_URL_PARSER_FF="platform_web_new_url_parser_dev",t.NEW_URL_PARSER_FF_PROD="platform_web_new_url_parser"},62942:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyFeatures=void 0;const n=r(20317);t.default=(e={lastUpdateTimestamp:0,features:{}},t)=>{switch(t.type){case n.FEATURES_UPDATED:return Object.assign({},e,{lastUpdateTimestamp:t.lastUpdateTimestamp,features:t.features});case n.LOADED_STORED_FEATURES:return Object.assign({},e,t.data);default:return e}},t.getEmptyFeatures=function(){return{lastUpdateTimestamp:0,features:{}}}},85845:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.deleteFileMetaAction=t.updateFileContentAction=t.updateFileMetaAction=t.FileActionsType=void 0,function(e){e.UpdateFileMeta="UPDATE_FILE_META",e.UpdateFileContent="UPDATE_FILE_CONTENT",e.DeleteFileMeta="DELETE_FILE_META"}(r=t.FileActionsType||(t.FileActionsType={})),t.updateFileMetaAction=e=>({type:r.UpdateFileMeta,filesMeta:e}),t.updateFileContentAction=e=>({type:r.UpdateFileContent,filesContent:e}),t.deleteFileMetaAction=e=>({type:r.DeleteFileMeta,fileNames:e})},75417:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.remoteFileReducer=t.defaultRemoteFileState=void 0;const n=r(85845);function o(e,t){const r={...e};for(const e of t)e in r&&delete r[e];return r}t.defaultRemoteFileState=()=>({fileMetaData:{},fileContentState:{}}),t.remoteFileReducer=(e=(0,t.defaultRemoteFileState)(),r)=>{switch(r?.type){case n.FileActionsType.UpdateFileMeta:return((e,t)=>({...e,fileMetaData:{...e.fileMetaData,...t.filesMeta}}))(e,r);case n.FileActionsType.UpdateFileContent:return((e,t)=>({...e,fileContentState:{...e.fileContentState,...t.filesContent}}))(e,r);case n.FileActionsType.DeleteFileMeta:return((e,t)=>({...e,fileMetaData:o(e.fileMetaData,t.fileNames)}))(e,r)}return e}},6093:(e,t)=>{"use strict";function r(e){return"boolean"==typeof e?e:"string"==typeof e?"true"===e.toLowerCase()||"yes"===e.toLowerCase():Boolean(e)}function n(e,t){return"boolean"===t?e?"true":"false":"yes-no"===t?e?"YES":"NO":null}function o(e){return"object"==typeof e?e:JSON.parse(e)}function a(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.fixProperties=t.fixPropertiesTypes=t.ObjectToJson=t.jsonToObject=t.booleanToString=t.stringToBoolean=void 0,t.stringToBoolean=r,t.booleanToString=n,t.jsonToObject=o,t.ObjectToJson=a,t.fixPropertiesTypes=function(e,t,n,a,i){const s={};return e.filter((e=>!!i[e])).forEach((e=>{s[e]=r(i[e])})),t.filter((e=>!!i[e])).forEach((e=>{s[e]=Number(i[e])})),n.filter((e=>!!i[e])).forEach((e=>{s[e]=o(i[e])})),a.filter((e=>i.hasOwnProperty(e))).forEach((e=>{const t=i[e];s[e]=null===t?"":String(t)})),Object.assign({},i,s)},t.fixProperties={fromStore:function(e,t,r,o){const i={};return Object.keys(e).filter((e=>!!o[e])).forEach((t=>{i[t]=n(o[t],e[t])})),Object.keys(t).filter((e=>!!o[e])).forEach((e=>{i[e]=o[e]&&o[e].toString()})),Object.keys(r).filter((e=>!!o[e])).forEach((e=>{i[e]=a(o[e])})),Object.assign({},o,i)},fromTransaction:function(e,t,n,a){const i={};return Object.keys(e).filter((e=>!!a[e])).forEach((e=>{i[e]=r(a[e])})),Object.keys(t).filter((e=>!!a[e])).forEach((e=>{i[e]=Number(a[e])})),Object.keys(n).filter((e=>!!a[e])).forEach((e=>{i[e]=o(a[e])})),Object.assign({},a,i)}}},89438:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.healthStateUpdated=t.breachedPasswordsUpdated=void 0;const n=r(71144);t.breachedPasswordsUpdated=e=>({type:n.BREACHED_PASSWORD_UPDATED,breachedPasswords:e}),t.healthStateUpdated=e=>({type:n.HEALTH_STATE_UPDATED,healthState:e})},10897:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.healthFromStorage=t.healthToStorage=void 0,t.healthToStorage=e=>({...e,similarPasswords:Object.keys(e.similarPasswords||[]).reduce(((t,r)=>e.similarPasswords[r]?{...t,[r]:Array.from(e.similarPasswords[r])}:t),{})}),t.healthFromStorage=e=>({...e,similarPasswords:Object.keys(e.similarPasswords||[]).reduce(((t,r)=>({...t,[r]:new Set(e.similarPasswords[r])})),{})})},87399:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyHealthState=void 0;const n=r(71144);t.default=(e={breachedPasswords:{},credentialsHealth:{},similarPasswords:{}},t)=>{switch(t.type){case n.BREACHED_PASSWORD_UPDATED:return{...e,breachedPasswords:t.breachedPasswords};case n.HEALTH_STATE_UPDATED:return{...e,...t.healthState};default:return e}},t.getEmptyHealthState=function(){return{breachedPasswords:{},credentialsHealth:{},similarPasswords:{}}}},71144:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HEALTH_STATE_UPDATED=t.BREACHED_PASSWORD_UPDATED=void 0,t.BREACHED_PASSWORD_UPDATED="BREACHED_PASSWORD_UPDATED",t.HEALTH_STATE_UPDATED="HEALTH_STATE_UPDATED"},10857:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.killswitchStateUpdated=void 0;const n=r(86142);t.killswitchStateUpdated=e=>({type:n.KILLSWITCH_STATE_UPDATED,killswitchState:e})},79390:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyKillswitchState=void 0,t.getEmptyKillswitchState=function(){return{disableAutofill:!1,disableLoginFlowMigration:!1,brazeContentCardsDisabled:!1,disableAutoSSOLogin:!1}},t.default=(e={disableAutofill:!1,disableLoginFlowMigration:!1,brazeContentCardsDisabled:!1,disableAutoSSOLogin:!1},t)=>({...e,...t.killswitchState})},86142:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KILLSWITCH_STATE_UPDATED=void 0,t.KILLSWITCH_STATE_UPDATED="KILLSWITCH_STATE_UPDATED"},76089:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialSearchOrderUpdated=t.premiumChurningDismissDateUpdated=t.migrationOnboardingUpdated=t.webOnboardingModeUpdated=t.webOnboardingModeReset=t.localSettingsSubscriptionInformationStatusUpdated=t.localSettingsNodePremiumStatusUpdated=t.localSettingsPremiumStatusUpdated=t.registerDeviceName=t.registerLastSync=t.loadStoredLocalSettings=t.CREDENTIAL_SEARCH_ORDER_UPDATED=t.PREMIUM_CHURNING_DISMISS_DATE_UPDATED=t.MIGRATION_ONBOARDING_UPDATED=t.WEB_ONBOARDING_MODE_RESET=t.WEB_ONBOARDING_MODE_UPDATED=t.SUBSCRIPTION_INFORMATION_UPDATED=t.NODE_PREMIUM_STATUS_UPDATED=t.PREMIUM_STATUS_UPDATED=t.REGISTER_DEVICE_NAME=t.REGISTER_LAST_SYNC=t.LOAD_STORED_LOCAL_SETTINGS=void 0,t.LOAD_STORED_LOCAL_SETTINGS="LOCAL_SETTINGS/LOAD_STORED_LOCAL_SETTINGS",t.REGISTER_LAST_SYNC="LOCAL_SETTINGS/REGISTER_LAST_SYNC",t.REGISTER_DEVICE_NAME="LOCAL_SETTINGS/REGISTER_DEVICE_NAME",t.PREMIUM_STATUS_UPDATED="LOCAL_SETTINGS/PREMIUM_STATUS_UPDATED",t.NODE_PREMIUM_STATUS_UPDATED="LOCAL_SETTINGS/NODE_PREMIUM_STATUS_UPDATED",t.SUBSCRIPTION_INFORMATION_UPDATED="LOCAL_SETTINGS/SUBSCRIPTION_INFORMATION_UPDATED",t.WEB_ONBOARDING_MODE_UPDATED="LOCAL_SETTINGS/WEB_ONBOARDING_MODE_UPDATED",t.WEB_ONBOARDING_MODE_RESET="LOCAL_SETTINGS/WEB_ONBOARDING_MODE_RESET",t.MIGRATION_ONBOARDING_UPDATED="LOCAL_SETTINGS/MIGRATION_ONBOARDING_UPDATED",t.PREMIUM_CHURNING_DISMISS_DATE_UPDATED="PREMIUM_CHURNING_DISMISS_DATE_UPDATED",t.CREDENTIAL_SEARCH_ORDER_UPDATED="CREDENTIAL_SEARCH_ORDER_UPDATED",t.loadStoredLocalSettings=e=>({type:t.LOAD_STORED_LOCAL_SETTINGS,data:Object.assign({},e)}),t.registerLastSync=e=>({type:t.REGISTER_LAST_SYNC,lastSync:e}),t.registerDeviceName=e=>({type:t.REGISTER_DEVICE_NAME,deviceName:e}),t.localSettingsPremiumStatusUpdated=e=>({type:t.PREMIUM_STATUS_UPDATED,premiumStatus:e}),t.localSettingsNodePremiumStatusUpdated=e=>({type:t.NODE_PREMIUM_STATUS_UPDATED,nodePremiumStatus:e}),t.localSettingsSubscriptionInformationStatusUpdated=e=>({type:t.SUBSCRIPTION_INFORMATION_UPDATED,subscriptionInformation:e}),t.webOnboardingModeReset=()=>({type:t.WEB_ONBOARDING_MODE_RESET}),t.webOnboardingModeUpdated=e=>({type:t.WEB_ONBOARDING_MODE_UPDATED,webOnboardingMode:e}),t.migrationOnboardingUpdated=e=>({type:t.MIGRATION_ONBOARDING_UPDATED,migrationOnboardingStep:e}),t.premiumChurningDismissDateUpdated=e=>({type:t.PREMIUM_CHURNING_DISMISS_DATE_UPDATED,premiumChurningDismissDate:e}),t.credentialSearchOrderUpdated=e=>({type:t.CREDENTIAL_SEARCH_ORDER_UPDATED,credentialSearchOrder:e})},73472:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyLocalSettings=t.getEmptyOnboardingMode=t.getEmptyLoginStepInfo=void 0;const n=r(16516),o=r(33831),a=r(35924),i=r(76089),s=r(50571),c=r(43739);t.getEmptyLoginStepInfo=function(){return{step:null,login:"",validated:!1}};const u=(e,t)=>[o.LoginStep.Password,o.LoginStep.OTPToken].includes(t)?t:e.step,l=(e,t)=>t===o.LoginStep.OTPToken?Boolean(e.login):![o.LoginStep.OTP1,o.LoginStep.OTP2].includes(t)&&e.validated,d=(e,t)=>Object.entries(t).every((([t,r])=>e?.[t]===r));function p(){return{uki:null,lastSync:0,premiumStatus:null,nodePremiumStatus:null,subscriptionInformation:null,deviceName:null,migrationOnboarding:{type:"Unknown"},webOnboardingMode:(0,t.getEmptyOnboardingMode)(),premiumChurningDismissDate:null,credentialSearchOrder:null,userMessages:[],loginStepInfo:{step:null,login:"",validated:!1}}}t.default=(e=p(),r)=>{switch(r.type){case i.LOAD_STORED_LOCAL_SETTINGS:{const t=p();return{...t,...e,...r.data,webOnboardingMode:{...t.webOnboardingMode,...e.webOnboardingMode,...r.data.webOnboardingMode,completedSteps:{...t.webOnboardingMode.completedSteps,...e.webOnboardingMode.completedSteps,...r.data.webOnboardingMode.completedSteps}}}}case c.DEVICE_REGISTERED:return"uki"===r.registrationType.type?{...e,uki:r.registrationType.uki}:e;case i.REGISTER_LAST_SYNC:return Object.assign({},e,{lastSync:r.lastSync});case i.REGISTER_DEVICE_NAME:return Object.assign({},e,{deviceName:r.deviceName});case i.PREMIUM_STATUS_UPDATED:return Object.assign({},e,{premiumStatus:r.premiumStatus});case i.NODE_PREMIUM_STATUS_UPDATED:return Object.assign({},e,{nodePremiumStatus:r.nodePremiumStatus});case i.SUBSCRIPTION_INFORMATION_UPDATED:return Object.assign({},e,{subscriptionInformation:r.subscriptionInformation});case i.WEB_ONBOARDING_MODE_UPDATED:{const t=(0,n.mergeDeepRight)(p(),e);return(0,n.mergeDeepRight)(t,{webOnboardingMode:r.webOnboardingMode})}case i.WEB_ONBOARDING_MODE_RESET:return Object.assign({},e,{webOnboardingMode:(0,t.getEmptyOnboardingMode)()});case i.MIGRATION_ONBOARDING_UPDATED:return Object.assign({},e,{migrationOnboarding:{type:"Known",value:r.migrationOnboardingStep}});case i.PREMIUM_CHURNING_DISMISS_DATE_UPDATED:return Object.assign({},e,{premiumChurningDismissDate:r.premiumChurningDismissDate});case i.CREDENTIAL_SEARCH_ORDER_UPDATED:return Object.assign({},e,{credentialSearchOrder:r.credentialSearchOrder});case s.USER_MESSAGE_ADDED:return Object.assign({},e,{userMessages:[...e.userMessages,r.userMessage]});case s.USER_MESSAGES_DISMISSED:return Object.assign({},e,{userMessages:e.userMessages.some((e=>d(e,r.predicate)))?e.userMessages.map((e=>d(e,r.predicate)?{...e,dismissedAt:Date.now()}:e)):[...e.userMessages,{...r.predicate,dismissedAt:Date.now()}]});case a.UPDATE_LOGIN_STEP_INFO_LOGIN:return Object.assign({},e,{loginStepInfo:{...e.loginStepInfo,login:r.login}});case a.UPDATE_LOGIN_STEP_INFO_STEP:return Object.assign({},e,{loginStepInfo:{...e.loginStepInfo,step:u(e.loginStepInfo,r.step),validated:l(e.loginStepInfo,r.step)}});case a.RESET_LOGIN_STEP_INFO:return Object.assign({},e,{loginStepInfo:{step:null,login:"",validated:!1}});default:return e}},t.getEmptyOnboardingMode=()=>({flowCredentialInApp:!1,flowLoginCredentialOnWeb:!1,flowLoginCredentialOnWebSite:null,flowSaveCredentialOnWeb:!1,flowImportPasswords:!1,flowAddMobileOnWeb:!1,flowTryAutofillOnWeb:!1,leelooStep:null,popoverStep:null,completedSteps:{saveCredentialInApp:!1,loginCredentialOnWeb:!1,saveCredentialOnWeb:!1,importPasswordsShown:!1,onboardingHubShown:!1,addMobileOnWeb:!1,tryAutofillOnWeb:!1}}),t.getEmptyLocalSettings=p},73299:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deviceNameSelector=void 0,t.deviceNameSelector=e=>e.userSession.localSettings.deviceName},34287:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadNotificationsStatus=t.markAsInteracted=t.markAsUnseen=t.markAsSeen=t.LOAD_NOTIFICATIONS_STATE=t.MARK_AS_INTERACTED=t.MARK_AS_UNSEEN=t.MARK_AS_SEEN=void 0,t.MARK_AS_SEEN="MarkAsSeen",t.MARK_AS_UNSEEN="MarkAsUnseen",t.MARK_AS_INTERACTED="MarkAsInteracted",t.LOAD_NOTIFICATIONS_STATE="LoadNotificationsState",t.markAsSeen=e=>({type:t.MARK_AS_SEEN,notification:e}),t.markAsUnseen=e=>({type:t.MARK_AS_UNSEEN,notification:e}),t.markAsInteracted=e=>({type:t.MARK_AS_INTERACTED,notification:e}),t.loadNotificationsStatus=e=>({type:t.LOAD_NOTIFICATIONS_STATE,state:e})},98496:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyNotificationsState=void 0;const n=r(34287),o=r(82028),a={paymentFailureChurned:o.NotificationStatus.Unseen,paymentFailureChurning:o.NotificationStatus.Unseen,idsPromotion:o.NotificationStatus.Unseen,switchToMlAnalysisEngine:o.NotificationStatus.Unseen,dWMb2bAutoEnrollTooltip:o.NotificationStatus.Unseen,vpnProviderIsNowHotspot:o.NotificationStatus.Unseen,vpnHostpotshieldInstalled:o.NotificationStatus.Unseen,popupIncomingTabPayments:o.NotificationStatus.Unseen,popupIncomingTabPersonalInfo:o.NotificationStatus.Unseen,popupIncomingTabIDs:o.NotificationStatus.Unseen,popupIncomingTabSecureNotes:o.NotificationStatus.Unseen,newAccountMenuTooltip:o.NotificationStatus.Unseen,tacGetTheExtensionBanner:o.NotificationStatus.Unseen,tacEnableAccountRecoveryBanner:o.NotificationStatus.Unseen,tacOnlyOneAdminBanner:o.NotificationStatus.Unseen,tacDarkWebInsightsNewBadge:o.NotificationStatus.Unseen,passwordHistoryBanner:o.NotificationStatus.Unseen,sharingCenterDisabledBanner:o.NotificationStatus.Unseen,multiselectGuideDelete:o.NotificationStatus.Unseen,multiselectGuideShift:o.NotificationStatus.Unseen,accountRecoveryAvailableAdminTooltip:o.NotificationStatus.Unseen,accountRecoveryAvailableEmployeeDialog:o.NotificationStatus.Unseen,activateInviteLink:o.NotificationStatus.Unseen};function i(){return a}t.getEmptyNotificationsState=i,t.default=(e=i(),t)=>{switch(t.type){case n.MARK_AS_INTERACTED:return{...e,[t.notification]:o.NotificationStatus.Interacted};case n.MARK_AS_SEEN:return{...e,[t.notification]:o.NotificationStatus.Seen};case n.MARK_AS_UNSEEN:return{...e,[t.notification]:o.NotificationStatus.Unseen};case n.LOAD_NOTIFICATIONS_STATE:return{...e,...t.state};default:return e}}},26972:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notificationsStatus$=void 0;const n=r(18948),o=r(3343),a=r(56857);t.notificationsStatus$=function(){const e=a.notificationsStatusSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())}},56857:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notificationsStatusSelector=void 0,t.notificationsStatusSelector=e=>e.userSession.notificationsStatus},95944:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.receivedInvoiceList=t.RECEIVED_INVOICE_LIST=void 0,t.RECEIVED_INVOICE_LIST="RECEIVED_USER_LIST",t.receivedInvoiceList=e=>({type:t.RECEIVED_INVOICE_LIST,invoicesList:e})},70325:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyPaymentsState=void 0;const n=r(95944);t.getEmptyPaymentsState=function(){return{invoicesList:[]}},t.default=(e={invoicesList:[]},t)=>t.type===n.RECEIVED_INVOICE_LIST?{...e,invoicesList:t.invoicesList}:e},30467:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewedQueriedInvoicesSelector=t.searchGetters=t.invoiceMappersSelector=t.invoiceListYearsSelector=t.allInvoicesLengthSelector=t.allInvoicesSelector=void 0;const n=r(25424),o=r(24589),a=r(64455),i=r(82234),s=r(98584);t.allInvoicesSelector=e=>e.userSession.paymentsState.invoicesList,t.allInvoicesLengthSelector=e=>e.userSession.paymentsState.invoicesList.length,t.invoiceListYearsSelector=e=>{const t=e.userSession.paymentsState.invoicesList;if(t.length){const e=t.map((e=>(0,n.fromUnixTime)(e.startDate).getFullYear().toString()));return[...new Set(e)]}return[]},t.invoiceMappersSelector=e=>(0,s.getInvoiceMappers)(),t.searchGetters=[(0,i.stringProp)("amountPaid"),(0,i.stringProp)("planName"),(0,i.stringProp)("startDate"),(0,i.stringProp)("invoiceId"),(0,i.stringProp)("startYear")];const c=(0,a.match)(t.searchGetters),u=(0,o.getQuerySelector)(t.allInvoicesSelector,(()=>c),t.invoiceMappersSelector);t.viewedQueriedInvoicesSelector=(e,t)=>u(e,t)},45291:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateBreachesUpdaterStatus=t.teamSpaceContentControlApplied=t.storeChangesToUpload=t.breachesUpdated=t.updateLastBackupTime=t.removePersonalItem=t.saveNoteCategory=t.saveCredentialCategory=t.saveGeneratedPassword=t.savePaymentCard=t.unscheduleRemainingChanges=t.clearUploadedChanges=t.scheduleChangesForSync=t.loadStoredPersonalData=t.UNSCHEDULE_REMAINING_CHANGES=t.CLEAR_UPLOADED_CHANGES=t.SCHEDULE_CHANGES_FOR_SYNC=t.UPDATE_BREACHES_UPDATER_STATUS=t.TEAMSPACE_CONTENT_CONTROLLED=t.STORE_CHANGES_TO_UPLOAD=t.BREACHES_UPDATED=t.UPDATE_LAST_BACKUP_TIME=t.REMOVE_PERSONAL_ITEM=t.SAVE_PAYMENT_CARD=t.SAVE_NOTE_CATEGORY=t.SAVE_CREDENTIAL_CATEGORY=t.SAVE_PERSONAL_ITEMS=t.SAVE_PERSONAL_ITEM=t.SAVE_GENERATED_PASSWORD=t.LOAD_STORED_PERSONAL_DATA=void 0,t.LOAD_STORED_PERSONAL_DATA="PERSONAL_DATA/LOAD_STORED_PERSONAL_DATA",t.SAVE_GENERATED_PASSWORD="PERSONAL_DATA/SAVE_GENERATED_PASSWORD",t.SAVE_PERSONAL_ITEM="PERSONAL_DATA/SAVE_PERSONAL_ITEM",t.SAVE_PERSONAL_ITEMS="PERSONAL_DATA/SAVE_PERSONAL_ITEMS",t.SAVE_CREDENTIAL_CATEGORY="SAVE_CREDENTIAL_CATEGORY",t.SAVE_NOTE_CATEGORY="SAVE_NOTE_CATEGORY",t.SAVE_PAYMENT_CARD="SAVE_PAYMENT_CARD",t.REMOVE_PERSONAL_ITEM="REMOVE_PERSONAL_ITEM",t.UPDATE_LAST_BACKUP_TIME="UPDATE_LAST_BACKUP_TIME",t.BREACHES_UPDATED="BREACHES_UPDATED",t.STORE_CHANGES_TO_UPLOAD="STORE_CHANGES_TO_UPLOAD",t.TEAMSPACE_CONTENT_CONTROLLED="TEAMSPACE_CONTENT_CONTROLLED",t.UPDATE_BREACHES_UPDATER_STATUS="UPDATE_BREACHES_UPDATER_STATUS",t.SCHEDULE_CHANGES_FOR_SYNC="SCHEDULE_CHANGES_FOR_SYNC",t.CLEAR_UPLOADED_CHANGES="CLEAR_UPLOADED_CHANGES",t.UNSCHEDULE_REMAINING_CHANGES="UNSCHEDULE_REMAINING_CHANGES",t.loadStoredPersonalData=e=>({type:t.LOAD_STORED_PERSONAL_DATA,data:Object.assign({},e)}),t.scheduleChangesForSync=()=>({type:t.SCHEDULE_CHANGES_FOR_SYNC}),t.clearUploadedChanges=e=>({type:t.CLEAR_UPLOADED_CHANGES,uploadedItemIds:e}),t.unscheduleRemainingChanges=()=>({type:t.UNSCHEDULE_REMAINING_CHANGES}),t.savePaymentCard=function(e){return{type:t.SAVE_PAYMENT_CARD,paymentCard:e}},t.saveGeneratedPassword=function(e){return{type:t.SAVE_GENERATED_PASSWORD,generatedPassword:e}},t.saveCredentialCategory=function(e){return{type:t.SAVE_CREDENTIAL_CATEGORY,credentialCategory:e}},t.saveNoteCategory=function(e){return{type:t.SAVE_NOTE_CATEGORY,noteCategory:e}},t.removePersonalItem=function(e,r,n){return{type:t.REMOVE_PERSONAL_ITEM,kwType:e,itemId:r,changeHistory:n}},t.updateLastBackupTime=function(e,r){return{type:t.UPDATE_LAST_BACKUP_TIME,transactions:e,backupTimeSec:r}},t.breachesUpdated=function(e,r,n){return{type:t.BREACHES_UPDATED,changes:e,revision:r,dataLeaksRefreshDate:n}},t.storeChangesToUpload=function(e){return{type:t.STORE_CHANGES_TO_UPLOAD,changesToUpload:e}},t.teamSpaceContentControlApplied=function(e,r,n){return{type:t.TEAMSPACE_CONTENT_CONTROLLED,updates:e,deletions:r,changeHistories:n}},t.updateBreachesUpdaterStatus=e=>({type:t.UPDATE_BREACHES_UPDATER_STATUS,breachesUpdaterStatus:e})},84977:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PERSONAL_DATA_COLLECTIONS_KEYS=t.DATAMODELOBJECT_TYPE_TO_STORE_KEY=void 0,t.DATAMODELOBJECT_TYPE_TO_STORE_KEY={KWAddress:"addresses",KWAuthCategory:"credentialCategories",KWAuthentifiant:"credentials",KWBankStatement:"bankAccounts",KWCollection:"collections",KWCompany:"companies",KWDataChangeHistory:"changeHistories",KWDriverLicence:"driverLicenses",KWEmail:"emails",KWFiscalStatement:"fiscalIds",KWGeneratedPassword:"generatedPasswords",KWIDCard:"idCards",KWIdentity:"identities",KWPasskey:"passkeys",KWPassport:"passports",KWPaymentMean_creditCard:"paymentCards",KWPaymentMean_paypal:"paypalAccounts",KWPersonalWebsite:"personalWebsites",KWPhone:"phones",KWSecureNote:"notes",KWSecureNoteCategory:"noteCategories",KWSecurityBreach:"securityBreaches",KWSocialSecurityStatement:"socialSecurityIds",KWSecureFileInfo:"secureFileInfo"},t.default=t.DATAMODELOBJECT_TYPE_TO_STORE_KEY,t.PERSONAL_DATA_COLLECTIONS_KEYS=Object.keys(t.DATAMODELOBJECT_TYPE_TO_STORE_KEY).map((e=>t.DATAMODELOBJECT_TYPE_TO_STORE_KEY[e]))},1347:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countPersonalDataItems=t.getEmptyBreachesMetadata=t.getLegacyEmptyBreaches=t.saveChangesToUpload=t.breachesUpdated=t.updateCredential=t.updateCredentials=t.updateLastBackupTime=t.saveObjects=t.saveNoteCategory=t.saveCredentialCategory=t.saveGeneratedPassword=t.savePersonalDataItems=t.savePersonalDataItem=t.savePaymentCard=t.removePersonalItem=t.teamSpaceContentControlApplied=t.savePersonalSettings=t.removePersonalItemFromTransaction=t.addPersonalItemFromTransaction=t.getEmptyPersonalDataState=void 0;const n=r(16516),o=r(53576),a=r(84977),i=r(53628),s=r(45291),c=r(48313),u=r(77163),l=r(27517),d=r(95377),p=r(51064),f=r(62210);function g(){return{addresses:[],bankAccounts:[],changesToUpload:[],changeHistories:[],collections:[],companies:[],credentialCategories:[],credentials:[],driverLicenses:[],emails:[],fiscalIds:[],generatedPasswords:[],idCards:[],identities:[],noteCategories:[],notes:[],passkeys:[],passports:[],paymentCards:[],paypalAccounts:[],personalWebsites:[],phones:[],securityBreaches:[],securityBreachesMetadata:(0,t.getEmptyBreachesMetadata)(),socialSecurityIds:[],breachesUpdaterStatus:d.BreachesUpdaterStatus.UNKNOWN,secureFileInfo:[]}}t.default=(e=g(),t,r)=>{switch(t.type){case s.LOAD_STORED_PERSONAL_DATA:return{...e,...(0,i.fixPersistedPersonalData)(t.data)};case c.ADD_PERSONAL_ITEM_FROM_TRANSACTION:return h(e,t);case c.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION:return y(e,t);case s.REMOVE_PERSONAL_ITEM:return b(e,t);case s.SAVE_PAYMENT_CARD:return T(e,t);case s.SAVE_PERSONAL_ITEM:return I(e,t,r);case s.SAVE_PERSONAL_ITEMS:return w(e,t,r);case s.SAVE_GENERATED_PASSWORD:return C(e,t,r);case s.SAVE_CREDENTIAL_CATEGORY:return O(e,t);case s.SAVE_NOTE_CATEGORY:return D(e,t);case s.CLEAR_UPLOADED_CHANGES:return v(e,t);case s.SCHEDULE_CHANGES_FOR_SYNC:return S(e,t);case s.UNSCHEDULE_REMAINING_CHANGES:return E(e,t);case l.PersonalSettingsActionType.Edit:return A(e);case s.UPDATE_LAST_BACKUP_TIME:return P(e,t);case s.BREACHES_UPDATED:return R(e,t);case s.STORE_CHANGES_TO_UPLOAD:return U(e,t);case s.TEAMSPACE_CONTENT_CONTROLLED:return _(e,t);case s.UPDATE_BREACHES_UPDATER_STATUS:return{...e,breachesUpdaterStatus:t.breachesUpdaterStatus};default:return e}},t.getEmptyPersonalDataState=g;const m=(e,t)=>!e||!t||!a.default.hasOwnProperty(t.kwType);function h(e,t){if(m(t.itemId,t.content))return e;const r=a.default[t.content.kwType],n=(0,i.fixPersonalDataItemFromExternalSource)(t.content,t.itemId);return{...e,[r]:L(e[r],n)}}function y(e,t){return t.itemId?t.content?F(e,[t.itemId],t.content.kwType):F(e,[t.itemId]):e}t.addPersonalItemFromTransaction=h,t.removePersonalItemFromTransaction=y;const S=(e,t)=>({...e,changesToUpload:e.changesToUpload.map(f.markChangeAsScheduled)}),v=(e,t)=>({...e,changesToUpload:(0,f.filterOutUploadedChanges)(e.changesToUpload,t.uploadedItemIds)}),E=(e,t)=>({...e,changesToUpload:e.changesToUpload.map(f.markChangeAsReadyForNextSync)});function A(e){if(e.changesToUpload.find((e=>"KWSettingsManagerApp"===e.kwType)))return e;const t=(0,p.createUploadChange)({itemId:"SETTINGS_userId",kwType:"KWSettingsManagerApp",action:"EDIT"});return{...e,changesToUpload:[...e.changesToUpload,t]}}function _(e,t){const{updates:r,deletions:n,changeHistories:o}=t,i=r.reduce(((e,t)=>{const{kwType:r}=t,n=a.default[r];return n?{...e,[n]:L(e[n]||[],t)}:e}),e),s=r.map(p.createUploadChangeForItem),c=Object.keys(n).reduce(((e,t)=>F(e,n[t],t)),i),u=Object.keys(n).reduce(((e,t)=>e.concat(n[t].map((0,p.createUploadChangeForDeletion)(t)))),[]),l=M(e.changeHistories,o),d=[...s,...u,...o.map(p.createUploadChangeForItem)];return{...c,changesToUpload:k(e.changesToUpload,d),changeHistories:l}}function b(e,t){const{changeHistory:r,kwType:n,itemId:o}=t,a=F(e,[o],n),i=[(0,p.createUploadChangeForDeletion)(n)(o),...r?[(0,p.createUploadChangeForItem)(r)]:[]],s=r?{changeHistories:L(e.changeHistories,r)}:{};return{...a,changesToUpload:k(a.changesToUpload,i),...s}}function T(e,{paymentCard:t}){return{...e,changesToUpload:k(e.changesToUpload,(0,p.createUploadChangeForItem)(t)),paymentCards:L(e.paymentCards,t)}}function I(e,{dataType:t,dataModelObject:r,changeHistory:n},o){const a=(0,u.associateTeamSpaceId)(r,o.spaces,e.credentials),i=n?{changeHistories:L(e.changeHistories,n)}:{},s=n?[(0,p.createUploadChangeForItem)(n)]:[],c=[(0,p.createUploadChangeForItem)(r),...s];return{...e,changesToUpload:k(e.changesToUpload,c),[t]:L(e[t],a),...i}}function w(e,{dataType:t,dataModelObjects:r,changeHistory:n},o){const a=r.map((t=>(0,u.associateTeamSpaceId)(t,o.spaces,e.credentials))),i=[...r.map(p.createUploadChangeForItem),...n.map(p.createUploadChangeForItem)];return{...e,changesToUpload:k(e.changesToUpload,i),[t]:M(e[t],a),changeHistories:M(e.changeHistories,n)}}function C(e,{generatedPassword:t},r){const n=(0,u.associateTeamSpaceId)(t,r.spaces,e.credentials);return{...e,changesToUpload:k(e.changesToUpload,(0,p.createUploadChangeForItem)(t)),generatedPasswords:L(e.generatedPasswords,n)}}function O(e,{credentialCategory:t}){return{...e,changesToUpload:k(e.changesToUpload,(0,p.createUploadChangeForItem)(t)),credentialCategories:L(e.credentialCategories,t)}}function D(e,{noteCategory:t}){return{...e,changesToUpload:k(e.changesToUpload,(0,p.createUploadChangeForItem)(t)),noteCategories:L(e.noteCategories,t)}}function P(e,{transactions:t,backupTimeSec:r}){return Object.keys(e).reduce(((n,o)=>(Array.isArray(e[o])&&(n[o]=function(e,t,r){const n=e.filter((e=>t.includes(e.Id))).map((e=>Object.assign(e,{LastBackupTime:r})));return e.filter((e=>!t.includes(e.Id))).concat(n)}(e[o],t,r)),n)),e)}function N(e,t){const{credentials:r}=e,n=L(r,t);return{...e,credentials:n}}function R(e,t){const{changes:{updates:r,deletions:n}}=t,a=o.DataModelType.KWSecurityBreach,i=F(e,n,a),s=r.map(p.createUploadChangeForItem),c=n.map((0,p.createUploadChangeForDeletion)(a)),u=k(i.changesToUpload,[...s,...c]),l=M(i.securityBreaches,r),d=void 0!==t.dataLeaksRefreshDate?t.dataLeaksRefreshDate:i.securityBreachesMetadata.latestDataLeaksBreachesUpdate;return{...i,securityBreaches:l,securityBreachesMetadata:{latestPublicBreachesRevision:t.revision,latestDataLeaksBreachesUpdate:d},changesToUpload:u}}function U(e,{changesToUpload:t}){return{...e,changesToUpload:k(e.changesToUpload,t)}}function L(e,t){const r=function(e,t){return e.filter((e=>e.Id!==t))}(e,t.Id);return r.concat(t)}function M(e,t){return[...B(e,t.map((e=>e.Id))),...t]}function k(e,t){const r=(t=Array.isArray(t)?t:[t]).concat(e||[]);return(0,n.uniqBy)((0,n.prop)("itemId"),r)}function B(e,t){return e.filter((e=>!t.includes(e.Id)))}function F(e,t,r){if(r&&a.default[r]){const n=a.default[r];return{...e,[n]:e[n]&&B(e[n],t)}}return a.PERSONAL_DATA_COLLECTIONS_KEYS.reduce(((r,n)=>{if(!(n in e))return r;const o=B(e[n],t);return{...r,[n]:o}}),e)}t.savePersonalSettings=A,t.teamSpaceContentControlApplied=_,t.removePersonalItem=b,t.savePaymentCard=T,t.savePersonalDataItem=I,t.savePersonalDataItems=w,t.saveGeneratedPassword=C,t.saveCredentialCategory=O,t.saveNoteCategory=D,t.saveObjects=function(e,t){return(0,n.reduce)(((e,t)=>{const r=a.default[t.kwType];return r&&(e[r]=e[r].concat(t)),e}),{...e},t)},t.updateLastBackupTime=P,t.updateCredentials=function(e,t){return t.reduce(((e,t)=>N(e,t)),e)},t.updateCredential=N,t.breachesUpdated=R,t.saveChangesToUpload=U,t.getLegacyEmptyBreaches=()=>({revision:0,breaches:[]}),t.getEmptyBreachesMetadata=()=>({latestPublicBreachesRevision:0,latestDataLeaksBreachesUpdate:0}),t.countPersonalDataItems=e=>Object.keys(a.default).reduce(((t,r)=>t+e[a.default[r]].length),0)},30641:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(16516),o=r(53576),a=r(49901);t.default=function(e){const t=(0,n.isNil)(e.LocaleFormat)?o.Country.UNIVERSAL:e.LocaleFormat,r=(0,n.isNil)(e.SpaceId)?a.PERSONAL_SPACE_ID:e.SpaceId;return{...e,LocaleFormat:t,SpaceId:r}}},63985:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fixPasskeyTypesFromTransaction=t.fixBreachTypesFromStore=t.fixBreachTypesFromTransaction=t.fixCommonPropertiesTypes=t.fixGeneratedPasswordsTypes=t.fixCredentialTypesFromStore=t.fixNoteTypesFromStore=t.fixAttachmentProperties=t.fixNoteTypesFromTransaction=t.fixAllStringObject=t.fixLinkedServicesTypes=t.fixDomainIconTypes=t.fixTrustedUrlTypes=t.fixCredentialTypesFromTransaction=void 0;const n=r(6093),o=["CreationDatetime","LastBackupTime","UserModificationDatetime"],a=["Id","AnonId","SpaceId"];function i(e){return(0,n.fixPropertiesTypes)([],[],[],["TrustedUrl","TrustedUrlExpire"],e)}function s(e){const{urls:t,...r}=(0,n.fixPropertiesTypes)([],[],[],["backgroundColor","mainColor"],e);return{...r,urls:"object"==typeof t&&null!==t?l(t):{}}}function c(e){const t=Array.isArray(e.associated_domains)?e.associated_domains.map(u):[];return{...e,associated_domains:t}}function u(e){return(0,n.fixPropertiesTypes)([],[],[],["domain","source"],e)}function l(e){const t=Object.keys(e);return(0,n.fixPropertiesTypes)([],[],[],t,e)}function d(e){return(0,n.fixPropertiesTypes)([],["version","localSize","remoteSize","creationDatetime","userModificationDatetime"],[],["id","type","filename","downloadKey","cryptoKey","owner"],e)}t.fixCredentialTypesFromTransaction=function(e){const t=["LastUse","ModificationDatetime","NumberUse","Strength"].concat(o),r=["Alias","Category","ConnectionOptions","Email","Login","Note","OtpSecret","OtpUrl","Password","Port","SID","SecondaryLogin","Server","Title","Url","UserSelectedUrl"].concat(a),{TrustedUrlGroup:u,Attachments:l,LinkedServices:p,domainIcon:f,...g}=(0,n.fixPropertiesTypes)(["AutoLogin","AutoProtected","Checked","SharedObject","SubdomainOnly","UseFixedUrl","limitedPermissions"],t,["Attachments","LinkedServices"],r,e),m=Array.isArray(l)?{Attachments:l.map(d)}:{},h="object"==typeof f&&null!==f?{domainIcon:s(f)}:{};return{...g,...m,...p?{LinkedServices:c(p)}:{},...h,TrustedUrlGroup:u&&u.length>0?u.map(i):[]}},t.fixTrustedUrlTypes=i,t.fixDomainIconTypes=s,t.fixLinkedServicesTypes=c,t.fixAllStringObject=l,t.fixNoteTypesFromTransaction=function(e){const t=["CreationDate","UpdateDate"].concat(o),r=["Title","Content","Category"].concat(a),{Attachments:i,Type:s,...c}=(0,n.fixPropertiesTypes)(["Secured"],t,["Attachments"],r,e);return{...c,...Array.isArray(i)?{Attachments:i.map(d)}:{},Type:s||"GRAY"}},t.fixAttachmentProperties=d,t.fixNoteTypesFromStore=function(e){const t={};return["Attachments"].filter((t=>!!e[t])).forEach((r=>{t[r]=JSON.stringify(e[r])})),Object.assign({},e,t)},t.fixCredentialTypesFromStore=function(e){const t={};return["Attachments","LinkedServices"].filter((t=>!!e[t])).forEach((r=>{t[r]=JSON.stringify(e[r])})),Object.assign({},e,t)},t.fixGeneratedPasswordsTypes=function(e){const t=["GeneratedDate"].concat(o);return(0,n.fixPropertiesTypes)([],t,[],[],e)},t.fixCommonPropertiesTypes=function(e){return(0,n.fixPropertiesTypes)([],o,[],[],e)},t.fixBreachTypesFromTransaction=function(e){const t=[...o,"ContentRevision"],r=[...a,"AnonId","BreachId","Status"],i=(0,n.fixPropertiesTypes)([],t,["Content","LeakedPasswords"],r,e);return Array.isArray(i.LeakedPasswords)||(i.LeakedPasswords=[]),i},t.fixBreachTypesFromStore=function(e){const t={};return["Content","LeakedPasswords"].filter((t=>!!e[t])).forEach((r=>{t[r]=JSON.stringify(e[r])})),Array.isArray(e.LeakedPasswords)||(t.LeakedPasswords=JSON.stringify([])),{...e,...t}},t.fixPasskeyTypesFromTransaction=function(e){const t=[...o,"Counter","KeyAlgorithm"],r=[...a,"CredentialId","RpId","RpName","UserDisplayName","UserHandle"];return(0,n.fixPropertiesTypes)([],t,["PrivateKey"],r,e)}},53628:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fixPersistedPersonalData=t.fixPersonalDataItemFromExternalSource=void 0;const n=r(16516),o=r(53576),a=r(63985),i=r(30641),s=r(86715),c=[{key:"credentials",isData:o.isCredential,fixData:e=>(0,a.fixCredentialTypesFromTransaction)(e),addDefaultValues:e=>(0,i.default)(e)},{key:"notes",isData:o.isNote,fixData:e=>(0,a.fixNoteTypesFromTransaction)(e),addDefaultValues:e=>(0,i.default)(e)},{key:"generatedPasswords",isData:o.isGeneratedPassword,fixData:e=>(0,a.fixGeneratedPasswordsTypes)(e),addDefaultValues:e=>e},{key:"securityBreaches",isData:s.isBreach,fixData:e=>(0,a.fixBreachTypesFromTransaction)(e),addDefaultValues:e=>e},{key:"passkeys",isData:o.isPasskey,fixData:e=>(0,a.fixPasskeyTypesFromTransaction)(e),addDefaultValues:e=>e}];t.fixPersonalDataItemFromExternalSource=function(e,t){const r=function(e,t){return t?{...e,Id:t}:e}(e,t),n=c.find((e=>e.isData(r)));return n?l(n,r):(0,a.fixCommonPropertiesTypes)(r)};const u=["breaches","versionedBreaches"];function l(e,t){return e.addDefaultValues(e.fixData(t))}t.fixPersistedPersonalData=function(e){const t={};c.forEach((r=>{const n=e[r.key];if(!n)return;const o=n.map((e=>l(r,e)));t[r.key]=o}));const r=(t.credentials??[]).filter((e=>!!e.Id));return{...(0,n.omit)(u,e),...t,credentials:r}}},27517:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.editPersonalSettings=t.loadStoredPersonalSettings=t.PersonalSettingsActionType=t.TOGGLE_DASHLANE_ON_SITE=t.TOGGLE_DASHLANE_ON_PAGE=void 0,t.TOGGLE_DASHLANE_ON_PAGE="TOGGLE_DASHLANE_ON_PAGE",t.TOGGLE_DASHLANE_ON_SITE="TOGGLE_DASHLANE_ON_SITE",function(e){e.Edit="EDIT_PERSONAL_SETTINGS",e.EditFromTransaction="EDIT_PERSONAL_SETTINGS_FROM_TRANSACTION",e.LoadFromStorage="LOAD_PERSONAL_SETTINGS_FROM_STORAGE"}(r=t.PersonalSettingsActionType||(t.PersonalSettingsActionType={})),t.loadStoredPersonalSettings=e=>({type:r.LoadFromStorage,data:Object.assign({},e)}),t.editPersonalSettings=e=>({type:r.Edit,content:Object.assign({},e)})},51104:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fixPersonalSettingTypes=void 0;const n=r(16516),o=r(6093),a={GeneratorDefaultAvoidAmbiguousChars:"boolean",GeneratorDefaultDigits:"boolean",GeneratorDefaultLetters:"boolean",GeneratorDefaultMixedCase:"boolean",GeneratorDefaultPronounceable:"boolean",GeneratorDefaultSymbols:"boolean",RecoveryOptIn:"boolean",ProtectPasswords:"boolean",ProtectPayments:"boolean",ProtectIDs:"boolean",SecuredDataShowScreenshots:"yes-no",SecuredDataShowPassword:"yes-no",SecuredDataShowIDs:"yes-no",SecuredDataShowCreditcard:"yes-no",SecuredDataAutofillCreditcard:"yes-no",SyncBackup:"yes-no",SyncBackupPurchase:"yes-no",SyncBackupPersonaldata:"yes-no",SyncBackupPasswords:"yes-no",SyncBackupCreditCardsNumber:"yes-no",SyncBackupCreditCardsCCV:"yes-no"},i={GeneratorDefaultSize:"number",accountCreationDatetime:"number"},s={SpaceAnonIds:"json",AutofillSettings:"json"},c=(0,n.curry)(o.fixProperties.fromTransaction)(a,i,s),u=(0,n.curry)(o.fixProperties.fromStore)(a,i,s);t.fixPersonalSettingTypes={fromTransaction:c,fromStore:u}},95648:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWebsiteInfo=t.getUpdatedPersonalSettings=t.getEmptyPersonalSettings=t.makeBasePersonalSettings=void 0;const n=r(16516),o=r(27517),a=r(51104),i=r(11814),s=r(83195),c=r(51504),u=r(16593);function l(){return{AccountRecoveryKey:null,AccountRecoveryKeyId:null,DisabledDomainsList:[],DisabledUrlsList:[],DisabledDomainsAutologinList:[],DisabledUrlsAutologinList:[],SyncBackupCreditCardsCCV:null,SyncBackupCreditCardsNumber:null,SyncBackupPasswords:null,SyncBackupPersonaldata:null,SyncBackupPurchase:null,SecuredDataAutofillCreditcard:!0,SecuredDataShowCreditcard:!0,SecuredDataShowIDs:!0,SecuredDataShowPassword:!1,SecuredDataShowScreenshots:!0,ProtectPasswords:!1,ProtectPayments:!0,ProtectIDs:!1,CryptoUserPayload:null,...(0,t.makeBasePersonalSettings)()}}t.makeBasePersonalSettings=()=>({RealLogin:null,SecurityEmail:null,accountCreationDatetime:null,Format:null,Language:null,AnonymousUserId:null,UsagelogToken:null,SyncBackup:null,AutofillSettings:{isAutofillDisabled:!1,disabledSourceTypes:[],disabledDomains:[],isFollowUpNotificationEnabled:!0},SecuredDataAutofillCreditcard:!0,SecuredDataShowCreditcard:!0,SecuredDataShowIDs:!0,SecuredDataShowPassword:!1,SecuredDataShowScreenshots:!0,ProtectPasswords:!1,ProtectPayments:!0,ProtectIDs:!1,kwType:"KWSettingsManagerApp",Id:"SETTINGS_userId",LastBackupTime:null}),t.getEmptyPersonalSettings=l,t.default=(e=l(),t)=>{switch(t.type){case o.PersonalSettingsActionType.LoadFromStorage:return(0,n.mergeDeepRight)(e,a.fixPersonalSettingTypes.fromTransaction(t.data));case o.PersonalSettingsActionType.EditFromTransaction:return(0,n.mergeDeepRight)(e,a.fixPersonalSettingTypes.fromTransaction(t.content));case o.PersonalSettingsActionType.Edit:return(0,n.mergeDeepRight)(e,t.content);default:return e}},t.getUpdatedPersonalSettings=function(e,t){const r=l(),n=Object.keys(r);for(const e of n)t[e]||void 0===t[e]||(t[e]=r[e]);return{...e,...t}},t.getWebsiteInfo=function(e,t){const r=e.getState().userSession.personalFeatures.features[c.NEW_URL_PARSER_FF]||e.getState().userSession.personalFeatures.features[c.NEW_URL_PARSER_FF_PROD]?new s.ParsedURL(t).getRootDomain():i.url.getDomainForUrl(t),o=e.getPersonalSettings(),a=(0,u.spaceDisabledDomainsListSelector)(e.getState());return{disabledAutofillOnDomain:(0,n.contains)(r,o.DisabledDomainsList),disabledAutofillOnPage:(0,n.contains)(t,o.DisabledUrlsList),disabledAutologinOnDomain:(0,n.contains)(r,[...o.DisabledDomainsAutologinList,...a]),disabledAutologinOnPage:(0,n.contains)(t,o.DisabledUrlsAutologinList),disabledFromSpaces:!1}}},12995:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadedAnonymousComputerId=t.saveCurrentLocation=t.savePlatformInfo=t.LOAD_ANONYMOUS_APPLICATION_ID=t.SAVE_CURRENT_LOCATION=t.SAVE_PLATFORM_INFO=void 0,t.SAVE_PLATFORM_INFO="SAVE_PLATFORM_INFO",t.SAVE_CURRENT_LOCATION="SAVE_CURRENT_LOCATION",t.LOAD_ANONYMOUS_APPLICATION_ID="LOAD_ANONYMOUS_APPLICATION_ID",t.savePlatformInfo=e=>({type:t.SAVE_PLATFORM_INFO,info:e}),t.saveCurrentLocation=e=>({type:t.SAVE_CURRENT_LOCATION,location:e}),t.loadedAnonymousComputerId=e=>({type:t.LOAD_ANONYMOUS_APPLICATION_ID,anonymousApplicationId:e})},9149:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyPlatform=t.defaultPlatformInfo=void 0;const n=r(12995);t.default=(e=a(),r)=>{switch(r.type){case n.SAVE_PLATFORM_INFO:return{...e,info:(o=r.info,i=t.defaultPlatformInfo,{anonymousApplicationId:o.anonymousApplicationId||i.anonymousApplicationId,platformName:o.platformName||i.platformName,appVersion:o.appVersion||i.appVersion,browser:o.browser||i.browser,browserVersion:o.browserVersion||i.browserVersion,country:o.country||i.country,os:o.os||i.os,osCountry:o.osCountry||i.osCountry,osVersion:o.osVersion||i.osVersion,lang:o.lang||i.lang})};case n.SAVE_CURRENT_LOCATION:return{...e,location:r.location};case n.LOAD_ANONYMOUS_APPLICATION_ID:return{...e,info:{...e.info,anonymousApplicationId:r.anonymousApplicationId}};default:return e}var o,i};const o={country:null,isEu:!0};function a(){return{info:t.defaultPlatformInfo,location:o}}t.defaultPlatformInfo={anonymousApplicationId:"unknown_anonymous_application_id",platformName:"server_carbon_unknown",appVersion:"unknown_version",browser:"browser_carbon_unknown",browserVersion:"unknown_browser_version",country:"country_carbon_unknown",os:"os_carbon_unknown",osCountry:"os_country_carbon_unknown",osVersion:"unknown_os_version",lang:"lang_carbon_unknown"},t.getEmptyPlatform=a},95363:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetRecoverySessionData=t.saveRecoverySessionData=t.RESET_RECOVERY_SESSION_DATA=t.SAVE_RECOVERY_SESSION_DATA=void 0,t.SAVE_RECOVERY_SESSION_DATA="SAVE_RECOVERY_SESSION_DATA",t.RESET_RECOVERY_SESSION_DATA="RESET_RECOVERY_SESSION_DATA",t.saveRecoverySessionData=e=>({type:t.SAVE_RECOVERY_SESSION_DATA,data:e}),t.resetRecoverySessionData=()=>({type:t.RESET_RECOVERY_SESSION_DATA})},13250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyRecoveryState=void 0;const n=r(95363);t.getEmptyRecoveryState=()=>({recoveryUki:null,publicKey:null,userServerProtectedSymmetricalKey:null,recoveryServerKeyBase64:null,recoveryInProgress:!1,currentPassword:null,verificationMethod:null}),t.default=(e=(0,t.getEmptyRecoveryState)(),r)=>{switch(r.type){case n.SAVE_RECOVERY_SESSION_DATA:return{...e,...r.data};case n.RESET_RECOVERY_SESSION_DATA:return(0,t.getEmptyRecoveryState)();default:return e}}},4572:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userSessionReducer=t.userSessionRootReducer=void 0;const n=r(98160),o=r(16516),a=r(1678),i=r(70325),s=r(86797),c=r(12659),u=r(78663),l=r(11406),d=r(66403),p=r(4980),f=r(48005),g=r(73472),m=r(76089),h=r(1347),y=r(62942),S=r(95648),v=r(44899),E=r(4511),A=r(79619),_=r(58174),b=r(36738),T=r(4551),I=r(87399),w=r(79390),C=r(84827),O=r(63703),D=r(69795),P=r(97632),N=r(13250),R=r(39727),U=r(15868),L=r(19546),M=r(51554),k=r(48313),B=r(45291),F=r(98496),x=r(29737),G=r(38271),j=r(24827),K=r(36784),$=r(13042);t.userSessionRootReducer=(e,t)=>{switch(t.type){case k.CLOSE_SESSION:return;case k.LOCAL_SETTINGS_UPDATED:const r=t.data;return Object.assign({},e,{localSettings:(0,g.default)(e.localSettings,(0,m.loadStoredLocalSettings)(r)),spaceData:(0,A.default)(e.spaceData,(0,b.spacesUpdated)(r.premiumStatus.spaces))});case k.PREMIUM_STATUS_UPDATED:const n=t.premiumStatus;return Object.assign({},e,{localSettings:(0,g.default)(e.localSettings,(0,m.localSettingsPremiumStatusUpdated)(n)),spaceData:(0,A.default)(e.spaceData,(0,b.spacesUpdated)(n.spaces))});default:return e}};const V=(e,t)=>{switch(t.type){case k.SAVE_GENERATED_PASSWORD:return Object.assign({},e,{personalData:(0,h.default)(e.personalData,{...t,type:B.SAVE_GENERATED_PASSWORD},{spaces:e.localSettings.premiumStatus?.spaces??[]})});case k.SAVE_PERSONAL_ITEM:return Object.assign({},e,{personalData:(0,h.default)(e.personalData,{...t,type:B.SAVE_PERSONAL_ITEM},{spaces:e.localSettings.premiumStatus?.spaces??[]})});case k.SAVE_PERSONAL_ITEMS:return Object.assign({},e,{personalData:(0,h.default)(e.personalData,{...t,type:B.SAVE_PERSONAL_ITEMS},{spaces:e.localSettings.premiumStatus?.spaces??[]})});default:return e}};t.userSessionReducer=(e,r)=>{const m=(0,n.combineReducers)({abTests:a.default,account:s.default,accountContactInfo:R.default,accountCreation:c.default,authTicketInfo:u.default,credentialOTPs:l.credentialOTPs,changeMPData:d.default,darkWeb:p.default,directorySync:f.default,health:I.default,iconsCache:_.default,killswitch:w.default,localSettings:g.default,loginDeviceLimitFlow:U.default,notificationsStatus:F.default,paymentsState:i.default,personalData:h.default,personalFeatures:y.default,personalSettings:S.default,sdkAuthentication:x.default,recoveryData:N.default,session:G.default,sharingData:v.default,sharingSync:C.default,spaceData:A.default,ssoSettings:O.default,sync:T.default,teamAdminData:E.default,twoFactorAuthenticationEnableFlow:L.twoFactorAuthenticationEnableFlow,twoFactorAuthenticationDisableFlow:M.twoFactorAuthenticationDisableFlow,userActivity:D.default,vaultReport:P.default,vpnData:j.VPNReducers,importPersonalData:K.ImportDataStateReducer,secureFileStorageState:$.SecureFileStorageReducer}),b=(0,o.partialRight)(m,[r]),k=(0,o.partialRight)(V,[r]);return(0,o.pipe)(t.userSessionRootReducer,k,b)(e,r)}},33007:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadAnonymousPartnerId=t.loadSdkAuthentication=t.saveStyxKeys=t.saveAppKeys=t.saveDashlaneServerDeltaTimestamp=t.LOAD_ANONYMOUS_PARTNER_ID=t.LOAD_CLIENT_AUTHENTICATION_DATA=t.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP=t.SAVE_STYX_KEYS=t.SAVE_APP_KEYS=void 0;const n=r(47408);t.SAVE_APP_KEYS="SAVE_APP_KEYS",t.SAVE_STYX_KEYS="SAVE_STYX_KEYS",t.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP="SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP",t.LOAD_CLIENT_AUTHENTICATION_DATA="LOAD_CLIENT_AUTHENTICATION_DATA",t.LOAD_ANONYMOUS_PARTNER_ID="LOAD_ANONYMOUS_PARTNER_ID",t.saveDashlaneServerDeltaTimestamp=e=>({type:t.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP,dashlaneServerDeltaTimestamp:Math.round((0,n.getUnixTimestamp)()-e)}),t.saveAppKeys=e=>({type:t.SAVE_APP_KEYS,appKeys:e}),t.saveStyxKeys=e=>({type:t.SAVE_STYX_KEYS,styxKeys:e}),t.loadSdkAuthentication=e=>({type:t.LOAD_CLIENT_AUTHENTICATION_DATA,data:e}),t.loadAnonymousPartnerId=e=>({type:t.LOAD_ANONYMOUS_PARTNER_ID,anonymousPartnerId:e})},29737:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySdkAuthentication=void 0;const n=r(33007);t.getEmptySdkAuthentication=function(){return{anonymousPartnerId:null,appKeys:null,dashlaneServerDeltaTimestamp:null,styxKeys:null}},t.default=(e={anonymousPartnerId:null,appKeys:null,dashlaneServerDeltaTimestamp:null,styxKeys:null},t)=>{switch(t.type){case n.SAVE_APP_KEYS:return{...e,appKeys:t.appKeys};case n.SAVE_STYX_KEYS:return{...e,styxKeys:t.styxKeys};case n.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP:return{...e,dashlaneServerDeltaTimestamp:t.dashlaneServerDeltaTimestamp};case n.LOAD_CLIENT_AUTHENTICATION_DATA:return{...e,...t.data};case n.LOAD_ANONYMOUS_PARTNER_ID:return{...e,...t};default:return e}}},76556:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.secureFileStartCipheringAction=t.secureFileUploadErrorAction=t.secureFileUploadChunkAction=t.secureFileUploadClearAction=t.secureFileUploadDoneAction=t.secureFileStartUploadAction=t.secureFileChunkTransferDoneAction=t.secureFileChunkReadyAction=t.secureFileStartDecipheringAction=t.secureFileDownloadErrorAction=t.secureFileDownloadChunkAction=t.secureFileStartDownloadAction=t.secureFileClearAction=t.secureFileSetStorageInfoAction=t.SECURE_FILE_START_CIPHERING=t.SECURE_FILE_UPLOAD_CHUNK=t.SECURE_FILE_UPLOAD_ERROR=t.SECURE_FILE_UPLOAD_CLEAR=t.SECURE_FILE_UPLOAD_DONE=t.SECURE_FILE_START_UPLOAD=t.SECURE_FILE_START_DECIPHERING=t.SECURE_FILE_DOWNLOAD_CHUNK=t.SECURE_FILE_DOWNLOAD_ERROR=t.SECURE_FILE_CHUNK_TRANSFER_DONE=t.SECURE_FILE_CHUNK_READY=t.SECURE_FILE_START_DOWNLOAD=t.SECURE_FILE_CLEAR=t.SECURE_FILE_SET_STORAGE_INFO=void 0,t.SECURE_FILE_SET_STORAGE_INFO="SECURE_FILE_SET_STORAGE_INFO",t.SECURE_FILE_CLEAR="SECURE_FILE_CLEAR",t.SECURE_FILE_START_DOWNLOAD="SECURE_FILE_START_DOWNLOAD",t.SECURE_FILE_CHUNK_READY="SECURE_FILE_CHUNK_READY",t.SECURE_FILE_CHUNK_TRANSFER_DONE="SECURE_FILE_CHUNK_TRANSFER_DONE",t.SECURE_FILE_DOWNLOAD_ERROR="SECURE_FILE_DOWNLOAD_ERROR",t.SECURE_FILE_DOWNLOAD_CHUNK="SECURE_FILE_DOWNLOAD_CHUNK",t.SECURE_FILE_START_DECIPHERING="SECURE_FILE_START_DECIPHERING",t.SECURE_FILE_START_UPLOAD="SECURE_FILE_START_UPLOAD",t.SECURE_FILE_UPLOAD_DONE="SECURE_FILE_UPLOAD_DONE",t.SECURE_FILE_UPLOAD_CLEAR="SECURE_FILE_UPLOAD_CLEAR",t.SECURE_FILE_UPLOAD_ERROR="SECURE_FILE_UPLOAD_ERROR",t.SECURE_FILE_UPLOAD_CHUNK="SECURE_FILE_UPLOAD_CHUNK",t.SECURE_FILE_START_CIPHERING="SECURE_FILE_START_CIPHERING",t.secureFileSetStorageInfoAction=e=>({type:t.SECURE_FILE_SET_STORAGE_INFO,quota:e}),t.secureFileClearAction=e=>({type:t.SECURE_FILE_CLEAR,downloadKey:e}),t.secureFileStartDownloadAction=(e,r)=>({type:t.SECURE_FILE_START_DOWNLOAD,downloadKey:e,contentLength:r}),t.secureFileDownloadChunkAction=(e,r)=>({type:t.SECURE_FILE_DOWNLOAD_CHUNK,bytesReceived:r,downloadKey:e}),t.secureFileDownloadErrorAction=e=>({type:t.SECURE_FILE_DOWNLOAD_ERROR,downloadKey:e}),t.secureFileStartDecipheringAction=e=>({type:t.SECURE_FILE_START_DECIPHERING,downloadKey:e}),t.secureFileChunkReadyAction=(e,r)=>({type:t.SECURE_FILE_CHUNK_READY,downloadKey:e,chunks:r}),t.secureFileChunkTransferDoneAction=e=>({type:t.SECURE_FILE_CHUNK_TRANSFER_DONE,downloadKey:e}),t.secureFileStartUploadAction=e=>({type:t.SECURE_FILE_START_UPLOAD,contentLength:e}),t.secureFileUploadDoneAction=()=>({type:t.SECURE_FILE_UPLOAD_DONE}),t.secureFileUploadClearAction=()=>({type:t.SECURE_FILE_UPLOAD_CLEAR}),t.secureFileUploadChunkAction=e=>({type:t.SECURE_FILE_UPLOAD_CHUNK,bytesSent:e}),t.secureFileUploadErrorAction=()=>({type:t.SECURE_FILE_UPLOAD_ERROR}),t.secureFileStartCipheringAction=()=>({type:t.SECURE_FILE_START_CIPHERING})},20810:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(10691),t),o(r(76556),t)},13042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySecureFileStorageState=t.SecureFileStorageReducer=void 0;const n=r(86562),o=r(20810),a=r(76556),i=(e,t,r)=>({...e,downloads:{[t]:{...r}}}),s={downloads:{},upload:{status:n.FileUploadStatus.None,bytesSent:0,contentLength:0},quota:{max:0,remaining:0}};t.SecureFileStorageReducer=(e=s,t)=>{switch(t.type){case a.SECURE_FILE_SET_STORAGE_INFO:return{...e,quota:t.quota};case o.SECURE_FILE_CLEAR:{const r=(t.downloadKey?e.downloads[t.downloadKey]:void 0)?{...e.downloads,[t.downloadKey]:void 0}:s.downloads;return{...e,downloads:r,upload:s.upload}}case a.SECURE_FILE_START_DOWNLOAD:return i(e,t.downloadKey,{status:n.FileDownloadStatus.Initial,contentLength:t.contentLength,bytesReceived:0});case a.SECURE_FILE_DOWNLOAD_CHUNK:{const r=e.downloads[t.downloadKey];if(!r)return e;const o=r.status===n.FileDownloadStatus.Downloading?r.bytesReceived:0,a=r.status===n.FileDownloadStatus.Downloading||r.status===n.FileDownloadStatus.Initial?r.contentLength:0;return i(e,t.downloadKey,{status:n.FileDownloadStatus.Downloading,bytesReceived:o+t.bytesReceived,contentLength:a})}case a.SECURE_FILE_START_DECIPHERING:return e.downloads[t.downloadKey]?i(e,t.downloadKey,{status:n.FileDownloadStatus.Deciphering}):e;case a.SECURE_FILE_DOWNLOAD_ERROR:return i(e,t.downloadKey,{status:n.FileDownloadStatus.Error});case o.SECURE_FILE_CHUNK_READY:{const r=e.downloads[t.downloadKey];if(!r)return e;const{chunks:o,currentChunkIndex:a}=r?.status===n.FileDownloadStatus.ChunkReady?{chunks:r.chunks,currentChunkIndex:r.currentChunkIndex+1}:{chunks:t.chunks,currentChunkIndex:0};return i(e,t.downloadKey,a===o.length?{status:n.FileDownloadStatus.TransferComplete}:{status:n.FileDownloadStatus.ChunkReady,currentChunkIndex:a,chunks:o})}case o.SECURE_FILE_CHUNK_TRANSFER_DONE:{const r=e.downloads[t.downloadKey];if(!r)return e;const o=r?.status===n.FileDownloadStatus.ChunkReady?r.chunks:void 0;return i(e,t.downloadKey,{status:n.FileDownloadStatus.ChunkDownloaded,chunks:o})}case a.SECURE_FILE_START_UPLOAD:return{...e,upload:{...e.upload,status:n.FileUploadStatus.Initial,contentLength:t.contentLength,bytesSent:0}};case a.SECURE_FILE_UPLOAD_CHUNK:{const r=e.upload;if(0===r.contentLength)return e;const o=r.bytesSent+t.bytesSent;return{...e,upload:{...e.upload,status:n.FileUploadStatus.Uploading,bytesSent:o<r.contentLength?o:r.bytesSent}}}case a.SECURE_FILE_START_CIPHERING:return{...e,upload:{...e.upload,status:n.FileUploadStatus.Ciphering}};case a.SECURE_FILE_UPLOAD_ERROR:return{...e,upload:{...e.upload,status:n.FileUploadStatus.Error}};case a.SECURE_FILE_UPLOAD_DONE:return 0===e.upload.contentLength?e:{...e,upload:{bytesSent:0,contentLength:0,status:n.FileUploadStatus.Done}};case o.SECURE_FILE_UPLOAD_CLEAR:return{...e,upload:{bytesSent:0,contentLength:0,status:n.FileUploadStatus.None}};default:return e}},t.getEmptySecureFileStorageState=()=>s},10691:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},16356:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateIsFirstSessionAfterAccountCreation=t.updateisUsingBackupCode=t.updateisUsingDashlaneAuthenticator=t.updateSessionDidOpen=t.pairingSucceeded=t.updatePublicUserId=t.updateDeviceAnalyticsId=t.updateUserAnalyticsId=t.updateAnalyticsIds=t.loadAnalyticsIds=t.updateRemoteKey=t.updateIsLocalKeyMigrationRequired=t.updateLocalKey=t.updateSettingsForMPValidation=t.updateCryptoKwc3FixedSalt=t.updateLastMasterPasswordCheck=t.updateMasterPassword=t.updateServerKey=t.loadSessionKeys=t.updateKeyPair=t.shouldRememberMeForSSOUpdated=t.rememberMasterPasswordUpdated=t.UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION=t.UPDATE_IS_USING_BACKUP_CODE=t.UPDATE_IS_USING_AUTHENTICATOR=t.UPDATE_SESSION_DID_OPEN=t.PAIRING_SUCCEEDED=t.LOAD_ANALYTICS_IDS=t.UPDATE_PUBLIC_USER_ID=t.UPDATE_DEVICE_ANALYTICS_ID=t.UPDATE_USER_ANALYTICS_ID=t.UPDATE_ANALYTICS_IDS=t.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED=t.UPDATE_REMOTE_KEY=t.UPDATE_LOCAL_KEY=t.UPDATE_SETTINGS_FOR_MP_VALIDATION=t.USE_NEW_AUTH_API=t.LOAD_SESSION_KEYS=t.UPDATE_CRYPTO_KWC3_FIXED_SALT=t.UPDATE_LAST_MASTER_PASSWORD_CHECK=t.UPDATE_SERVER_KEY=t.UPDATE_MASTER_PASSWORD=t.UPDATE_KEY_PAIR=t.REMEMBER_ME_FOR_SSO_UPDATED=t.REMEMBER_MASTER_PASSWORD_UPDATED=void 0,t.REMEMBER_MASTER_PASSWORD_UPDATED="REMEMBER_MASTER_PASSWORD_UPDATED",t.REMEMBER_ME_FOR_SSO_UPDATED="REMEMBER_ME_FOR_SSO_UPDATED",t.UPDATE_KEY_PAIR="UPDATE_KEY_PAIR",t.UPDATE_MASTER_PASSWORD="UPDATE_MASTER_PASSWORD",t.UPDATE_SERVER_KEY="UPDATE_SERVER_KEY",t.UPDATE_LAST_MASTER_PASSWORD_CHECK="UPDATE_LAST_MASTER_PASSWORD_CHECK",t.UPDATE_CRYPTO_KWC3_FIXED_SALT="UPDATE_CRYPTO_KWC3_FIXED_SALT",t.LOAD_SESSION_KEYS="LOAD_SESSION_KEYS",t.USE_NEW_AUTH_API="USE_NEW_AUTH_API",t.UPDATE_SETTINGS_FOR_MP_VALIDATION="UPDATE_SETTINGS_FOR_MP_VALIDATION",t.UPDATE_LOCAL_KEY="UPDATE_LOCAL_KEY",t.UPDATE_REMOTE_KEY="UPDATE_REMOTE_KEY",t.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED="UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED",t.UPDATE_ANALYTICS_IDS="UPDATE_ANALYTICS_IDS",t.UPDATE_USER_ANALYTICS_ID="UPDATE_USER_ANALYTICS_ID",t.UPDATE_DEVICE_ANALYTICS_ID="UPDATE_DEVICE_ANALYTICS_ID",t.UPDATE_PUBLIC_USER_ID="UPDATE_PUBLIC_USER_ID",t.LOAD_ANALYTICS_IDS="LOAD_ANALYTICS_IDS",t.PAIRING_SUCCEEDED="PAIRING_SUCCEEDED",t.UPDATE_SESSION_DID_OPEN="UPDATE_SESSION_DID_OPEN",t.UPDATE_IS_USING_AUTHENTICATOR="UPDATE_IS_USING_AUTHENTICATOR",t.UPDATE_IS_USING_BACKUP_CODE="UPDATE_IS_USING_BACKUP_CODE",t.UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION="UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION",t.rememberMasterPasswordUpdated=e=>({type:t.REMEMBER_MASTER_PASSWORD_UPDATED,rememberMasterPassword:e}),t.shouldRememberMeForSSOUpdated=e=>({type:t.REMEMBER_ME_FOR_SSO_UPDATED,shouldRememberMeForSSO:e}),t.updateKeyPair=e=>({type:t.UPDATE_KEY_PAIR,keyPair:e}),t.loadSessionKeys=e=>({type:t.LOAD_SESSION_KEYS,sessionKeys:e}),t.updateServerKey=e=>({type:t.UPDATE_SERVER_KEY,serverKey:e||""}),t.updateMasterPassword=e=>({type:t.UPDATE_MASTER_PASSWORD,masterPassword:e}),t.updateLastMasterPasswordCheck=()=>({type:t.UPDATE_LAST_MASTER_PASSWORD_CHECK}),t.updateCryptoKwc3FixedSalt=e=>({type:t.UPDATE_CRYPTO_KWC3_FIXED_SALT,cryptoKwc3FixedSalt:e}),t.updateSettingsForMPValidation=e=>({type:t.UPDATE_SETTINGS_FOR_MP_VALIDATION,settings:e}),t.updateLocalKey=e=>({type:t.UPDATE_LOCAL_KEY,localKey:e}),t.updateIsLocalKeyMigrationRequired=e=>({type:t.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED,isLocalKeyMigrationRequired:e}),t.updateRemoteKey=e=>({type:t.UPDATE_REMOTE_KEY,remoteKey:e}),t.loadAnalyticsIds=e=>({type:t.LOAD_ANALYTICS_IDS,userAnalyticsId:e.userAnalyticsId,deviceAnalyticsId:e.deviceAnalyticsId}),t.updateAnalyticsIds=(e,r)=>({type:t.UPDATE_ANALYTICS_IDS,userAnalyticsId:e,deviceAnalyticsId:r}),t.updateUserAnalyticsId=e=>({type:t.UPDATE_USER_ANALYTICS_ID,userAnalyticsId:e}),t.updateDeviceAnalyticsId=e=>({type:t.UPDATE_DEVICE_ANALYTICS_ID,deviceAnalyticsId:e}),t.updatePublicUserId=e=>({type:t.UPDATE_PUBLIC_USER_ID,publicUserId:e}),t.pairingSucceeded=e=>({type:t.PAIRING_SUCCEEDED,pairingId:e}),t.updateSessionDidOpen=e=>({type:t.UPDATE_SESSION_DID_OPEN,didOpen:e}),t.updateisUsingDashlaneAuthenticator=e=>({type:t.UPDATE_IS_USING_AUTHENTICATOR,withAuthenticator:e}),t.updateisUsingBackupCode=e=>({type:t.UPDATE_IS_USING_BACKUP_CODE,withBackupCode:e}),t.updateIsFirstSessionAfterAccountCreation=()=>({type:t.UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION})},38271:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySession=void 0;const n=r(96997),o=r(48313),a=r(16356),i=r(59489);t.getEmptySession=function(){return{sessionId:null,rememberMasterPassword:null,shouldRememberMeForSSO:null,masterPassword:null,remoteKey:null,localKey:null,lastMasterPasswordCheck:0,serverKey:"",keyPair:null,cryptoKwc3FixedSalt:null,sessionKeys:null,settingsForMPValidation:null,isLocalKeyMigrationRequired:!1,analyticsIds:{userAnalyticsId:"",deviceAnalyticsId:""},publicUserId:"",pairingId:null,didOpen:!1,isUsingDashlaneAuthenticator:!1,isUsingBackupCode:!1,isFirstSessionAfterAccountCreation:!1}},t.default=(e={sessionId:null,rememberMasterPassword:null,shouldRememberMeForSSO:null,masterPassword:null,remoteKey:null,localKey:null,lastMasterPasswordCheck:0,serverKey:"",keyPair:null,cryptoKwc3FixedSalt:null,sessionKeys:null,settingsForMPValidation:null,isLocalKeyMigrationRequired:!1,analyticsIds:{userAnalyticsId:"",deviceAnalyticsId:""},publicUserId:"",pairingId:null,didOpen:!1,isUsingDashlaneAuthenticator:!1,isUsingBackupCode:!1,isFirstSessionAfterAccountCreation:!1},t)=>{switch(t.type){case o.OPEN_SESSION:return{...e,sessionId:(0,n.default)()};case a.UPDATE_KEY_PAIR:return{...e,keyPair:t.keyPair};case a.REMEMBER_MASTER_PASSWORD_UPDATED:return{...e,rememberMasterPassword:t.rememberMasterPassword};case a.REMEMBER_ME_FOR_SSO_UPDATED:return{...e,shouldRememberMeForSSO:t.shouldRememberMeForSSO};case a.UPDATE_MASTER_PASSWORD:return{...e,masterPassword:t.masterPassword};case a.LOAD_SESSION_KEYS:return{...e,sessionKeys:t.sessionKeys};case a.UPDATE_SERVER_KEY:return{...e,serverKey:t.serverKey};case a.UPDATE_LAST_MASTER_PASSWORD_CHECK:return{...e,lastMasterPasswordCheck:Date.now()};case a.UPDATE_CRYPTO_KWC3_FIXED_SALT:return{...e,cryptoKwc3FixedSalt:t.cryptoKwc3FixedSalt};case i.CONFIRM_USER_AUTHENTICATION:return{...e,settingsForMPValidation:null};case a.UPDATE_SETTINGS_FOR_MP_VALIDATION:return{...e,settingsForMPValidation:t.settings};case a.UPDATE_LOCAL_KEY:return e.localKey!==t.localKey?{...e,localKey:t.localKey}:e;case a.UPDATE_REMOTE_KEY:return e.remoteKey!==t.remoteKey?{...e,remoteKey:t.remoteKey}:e;case a.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED:return{...e,isLocalKeyMigrationRequired:t.isLocalKeyMigrationRequired};case a.LOAD_ANALYTICS_IDS:case a.UPDATE_ANALYTICS_IDS:return{...e,analyticsIds:{userAnalyticsId:t.userAnalyticsId,deviceAnalyticsId:t.deviceAnalyticsId}};case a.UPDATE_USER_ANALYTICS_ID:return{...e,analyticsIds:{...e.analyticsIds,userAnalyticsId:t.userAnalyticsId}};case a.UPDATE_DEVICE_ANALYTICS_ID:return{...e,analyticsIds:{...e.analyticsIds,deviceAnalyticsId:t.deviceAnalyticsId}};case a.UPDATE_PUBLIC_USER_ID:return{...e,publicUserId:t.publicUserId};case a.PAIRING_SUCCEEDED:return{...e,pairingId:t.pairingId};case a.UPDATE_SESSION_DID_OPEN:return{...e,didOpen:t.didOpen};case a.UPDATE_IS_USING_AUTHENTICATOR:return{...e,isUsingDashlaneAuthenticator:t.withAuthenticator};case a.UPDATE_IS_USING_BACKUP_CODE:return{...e,isUsingBackupCode:t.withBackupCode};case a.UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION:return{...e,isFirstSessionAfterAccountCreation:!0};default:return e}}},34433:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userGroupsUpdated=t.sharingDataUpdated=t.USER_GROUPS_UPDATED=t.SHARING_DATA_ITEMS_UPDATED=void 0,t.SHARING_DATA_ITEMS_UPDATED="SHARING_DATA_ITEMS_UPDATED",t.USER_GROUPS_UPDATED="USER_GROUPS_UPDATED",t.sharingDataUpdated=e=>({type:t.SHARING_DATA_ITEMS_UPDATED,sharingData:e}),t.userGroupsUpdated=e=>({type:t.USER_GROUPS_UPDATED,userGroups:e})},44899:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyState=void 0;const n=r(34433);t.default=(e={items:[],itemGroups:[],userGroups:[]},t)=>{switch(t.type){case n.SHARING_DATA_ITEMS_UPDATED:const{sharingData:r}=t;return{...r};case n.USER_GROUPS_UPDATED:const{userGroups:o}=t;return{...e,userGroups:o};default:return e}},t.getEmptyState=function(){return{items:[],itemGroups:[],userGroups:[]}}},84827:(e,t)=>{"use strict";function r(e,t,r){const n=t.map((e=>e[r])),o=e.map((e=>e[r])),a=e.filter((e=>n.includes(e[r])));return[...t.filter((e=>!(e=>o.includes(e[r]))(e))),...a.map((e=>{const n=t.find((t=>t[r]===e[r]));return n?{...n,seen:e.seen}:e}))]}function n(e,t,r){return e.map((e=>t.includes(e[r])?{...e,seen:!0}:e))}Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySharingSyncState=t.setElementsAsSeenAction=t.SET_ELEMENTS_AS_SEEN=t.setAllPendingAction=t.SET_ALL_PENDING=t.updateAllPendingAction=t.UPDATE_ALL_PENDING=void 0,t.UPDATE_ALL_PENDING="UPDATE_ALL_PENDING",t.updateAllPendingAction=(e,r)=>({type:t.UPDATE_ALL_PENDING,pendingItemGroups:e,pendingUserGroups:r}),t.SET_ALL_PENDING="SET_ALL_PENDING",t.setAllPendingAction=(e,r)=>({type:t.SET_ALL_PENDING,pendingItemGroups:e,pendingUserGroups:r}),t.SET_ELEMENTS_AS_SEEN="SET_ELEMENTS_AS_SEEN",t.setElementsAsSeenAction=(e,r)=>({type:t.SET_ELEMENTS_AS_SEEN,pendingItemGroupIds:e,pendingUserGroupIds:r}),t.default=(e={pendingItemGroups:[],pendingUserGroups:[]},o)=>{switch(o.type){case t.SET_ELEMENTS_AS_SEEN:{const{pendingUserGroupIds:t,pendingItemGroupIds:r}=o;return{pendingUserGroups:n(e.pendingUserGroups,t,"groupId"),pendingItemGroups:n(e.pendingItemGroups,r,"itemGroupId")}}case t.UPDATE_ALL_PENDING:{const{pendingUserGroups:t,pendingItemGroups:n}=o,a=r(e.pendingItemGroups,n,"itemGroupId");return{pendingUserGroups:r(e.pendingUserGroups,t,"groupId"),pendingItemGroups:a}}case t.SET_ALL_PENDING:{const{pendingUserGroups:e,pendingItemGroups:t}=o;return{pendingItemGroups:t,pendingUserGroups:e}}default:return e}},t.getEmptySharingSyncState=function(){return{pendingItemGroups:[],pendingUserGroups:[]}}},36738:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spaceDataUpdated=t.spacesUpdated=t.SPACE_DATA_UPDATED=t.SPACES_UPDATED=void 0,t.SPACES_UPDATED="SPACES_UPDATED",t.SPACE_DATA_UPDATED="SPACE_DATA_UPDATED",t.spacesUpdated=e=>({type:t.SPACES_UPDATED,spaces:e}),t.spaceDataUpdated=e=>({type:t.SPACE_DATA_UPDATED,spaceData:e})},79619:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySpaceDataState=void 0;const n=r(36738);t.default=(e={spaces:[]},t)=>{switch(t.type){case n.SPACES_UPDATED:const r=t;return{...e,spaces:(r.spaces||[]).map((e=>({teamId:e.teamId,details:e})))};case n.SPACE_DATA_UPDATED:return{...t.spaceData};default:return e}},t.getEmptySpaceDataState=function(){return{spaces:[]}}},7624:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetSSOSettings=t.storeSSOSettings=void 0;const n=r(63703);t.storeSSOSettings=e=>({type:n.SET_SSO_SETTINGS,data:e}),t.resetSSOSettings=()=>({type:n.SET_SSO_SETTINGS,data:(0,n.getEmptySSOSettings)()})},63703:(e,t)=>{"use strict";function r(){return{ssoUser:!1,serviceProviderUrl:"",ssoServiceProviderKey:"",migration:void 0,ssoToken:""}}Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySSOSettings=t.SET_SSO_SETTINGS=void 0,t.SET_SSO_SETTINGS="SET_SSO_SETTINGS",t.default=(e={ssoUser:!1,serviceProviderUrl:"",ssoServiceProviderKey:"",migration:void 0,ssoToken:""},r)=>r.type===t.SET_SSO_SETTINGS?Object.assign({},e,{...r.data}):e,t.getEmptySSOSettings=r},82262:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.syncFailure=t.syncSuccess=t.syncStarted=t.SYNC_FAILURE=t.SYNC_SUCCESS=t.SYNC_STARTED=void 0,t.SYNC_STARTED="SYNC_STARTED",t.SYNC_SUCCESS="SYNC_SUCCESS",t.SYNC_FAILURE="SYNC_FAILURE",t.syncStarted=()=>({type:t.SYNC_STARTED,isInProgress:!0,startTime:Date.now()}),t.syncSuccess=e=>({type:t.SYNC_SUCCESS,isInProgress:!1,isUploadEnabled:e}),t.syncFailure=()=>({type:t.SYNC_FAILURE,isInProgress:!1})},4551:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySyncState=void 0;const n=r(82262),o=r(25576);function a(){return{isUploadEnabled:!1,syncIntervalTimeMs:3e5,status:o.SyncStatuses.READY}}t.getEmptySyncState=a,t.default=(e=a(),t)=>{switch(t.type){case n.SYNC_STARTED:return{...e,startTime:t.startTime,status:o.SyncStatuses.IN_PROGRESS};case n.SYNC_FAILURE:return{...e,status:o.SyncStatuses.FAILURE};case n.SYNC_SUCCESS:return{...e,status:o.SyncStatuses.SUCCESS,isUploadEnabled:t.isUploadEnabled};default:return e}}},1370:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.specialItemGroupUpdated=t.userGroupAdminItemCreated=t.teamAdminDataUpdated=t.userGroupsDeleted=t.userGroupsCreated=t.userGroupsUpdated=t.SPECIAL_ITEM_GROUP_UPDATED=t.GROUP_ADMIN_ITEM_CREATED=t.TEAM_ADMIN_DATA_UPDATED=t.TEAM_ADMIN_USER_GROUPS_DELETED=t.TEAM_ADMIN_USER_GROUPS_CREATED=t.TEAM_ADMIN_USER_GROUPS_UPDATED=void 0,t.TEAM_ADMIN_USER_GROUPS_UPDATED="TEAM_ADMIN_USER_GROUPS_UPDATED",t.TEAM_ADMIN_USER_GROUPS_CREATED="TEAM_ADMIN_USER_GROUPS_CREATED",t.TEAM_ADMIN_USER_GROUPS_DELETED="TEAM_ADMIN_USER_GROUPS_DELETED",t.TEAM_ADMIN_DATA_UPDATED="TEAM_ADMIN_DATA_UPDATED",t.GROUP_ADMIN_ITEM_CREATED="GROUP_ADMIN_ITEM_CREATED",t.SPECIAL_ITEM_GROUP_UPDATED="SPECIAL_ITEM_GROUP_UPDATED",t.userGroupsUpdated=(e,r)=>({type:t.TEAM_ADMIN_USER_GROUPS_UPDATED,teamId:e,userGroups:r}),t.userGroupsCreated=(e,r)=>({type:t.TEAM_ADMIN_USER_GROUPS_CREATED,teamId:e,userGroups:r}),t.userGroupsDeleted=(e,r)=>({type:t.TEAM_ADMIN_USER_GROUPS_DELETED,teamId:e,userGroups:r}),t.teamAdminDataUpdated=e=>({type:t.TEAM_ADMIN_DATA_UPDATED,teamAdminData:e}),t.userGroupAdminItemCreated=(e,r)=>({type:t.GROUP_ADMIN_ITEM_CREATED,teamId:e,userGroupAdminItem:r}),t.specialItemGroupUpdated=(e,r)=>({type:t.SPECIAL_ITEM_GROUP_UPDATED,teamId:e,specialItemGroup:r})},4511:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyState=void 0;const n=r(1370);function o(e,t){const r={};return Object.keys(e).forEach((t=>{r[t]=e[t]})),Object.keys(t).forEach((e=>{r[e]=Object.assign({},r[e],t[e])})),r}t.default=(e={teams:{}},t)=>{switch(t.type){case n.TEAM_ADMIN_DATA_UPDATED:const{teamAdminData:i}=t;return{teams:o(e.teams,i.teams)};case n.TEAM_ADMIN_USER_GROUPS_UPDATED:const s=t;return{teams:o(e.teams,{[s.teamId]:{teamId:s.teamId,userGroups:s.userGroups}})};case n.TEAM_ADMIN_USER_GROUPS_CREATED:const c=t,u=e.teams[c.teamId]?e.teams[c.teamId].userGroups:[];return{teams:o(e.teams,{[c.teamId]:{teamId:c.teamId,userGroups:u.concat(c.userGroups)}})};case n.TEAM_ADMIN_USER_GROUPS_DELETED:const l=t,d=l.userGroups.map((e=>e.groupId)),p=e.teams[l.teamId]?e.teams[l.teamId].userGroups:[];return{teams:o(e.teams,{[l.teamId]:{teamId:l.teamId,userGroups:p.filter((e=>!d.includes(e.groupId)))}})};case n.GROUP_ADMIN_ITEM_CREATED:const f=t,g=(r=e.teams)[a=f.teamId]&&r[a].userGroupAdminItems||[];return{teams:o(e.teams,{[f.teamId]:{teamId:f.teamId,userGroupAdminItems:g.concat([f.userGroupAdminItem])}})};case n.SPECIAL_ITEM_GROUP_UPDATED:const m=t;return{teams:o(e.teams,{[m.teamId]:{teamId:m.teamId,specialItemGroup:t.specialItemGroup}})};default:return e}var r,a},t.getEmptyState=function(){return{teams:{}}}},40051:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userActivityLastSentAtUpdated=void 0;const n=r(39958);t.userActivityLastSentAtUpdated=e=>({type:n.LAST_SENT_AT_UPDATED,lastSentAt:e})},69795:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyUserActivityState=void 0;const n=r(39958);function o(){return{lastSentAt:void 0}}t.default=(e={lastSentAt:void 0},t)=>t.type===n.LAST_SENT_AT_UPDATED?{...e,lastSentAt:t.lastSentAt}:e,t.getEmptyUserActivityState=o},39958:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LAST_SENT_AT_UPDATED=void 0,t.LAST_SENT_AT_UPDATED="LAST_SENT_AT_UPDATED"},72881:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vaultReportLastSentAtUpdated=void 0;const n=r(94846);t.vaultReportLastSentAtUpdated=e=>({type:n.LAST_SENT_AT_UPDATED,lastSentAt:e})},97632:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyVaultReportState=void 0;const n=r(94846);function o(){return{lastSentAt:void 0}}t.default=(e={lastSentAt:void 0},t)=>t.type===n.LAST_SENT_AT_UPDATED?{...e,lastSentAt:t.lastSentAt}:e,t.getEmptyVaultReportState=o},94846:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LAST_SENT_AT_UPDATED=void 0,t.LAST_SENT_AT_UPDATED="LAST_SENT_AT_UPDATED"},39610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(34066);t.bootstrap=e=>{e.register(n.config)}},10447:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forceSyncHandler=void 0;const n=r(10203);t.forceSyncHandler=async function({sessionService:e}){await e.getInstance().user.attemptSync(n.Trigger.Manual)}},18203:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshSubscriptionInformationHandler=void 0;const n=r(35507);t.refreshSubscriptionInformationHandler=async e=>(0,n.refreshSubscriptionInformation)(e.storeService,e.storeService.getAccountInfo().login)},17095:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCredentialSearchOrderHandler=void 0;const n=r(76089);t.setCredentialSearchOrderHandler=(e,t)=>(e.storeService.dispatch((0,n.credentialSearchOrderUpdated)(t.order)),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},94275:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateAccountRecoveryKeyPersonalSettingsHandler=void 0;const n=r(27517);t.updateAccountRecoveryKeyPersonalSettingsHandler=(e,t)=>(e.storeService.dispatch((0,n.editPersonalSettings)(t)),Promise.resolve())},17387:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.setupSubscriptions=void 0,o(r(25576),t);var a=r(87881);Object.defineProperty(t,"setupSubscriptions",{enumerable:!0,get:function(){return a.setupSubscriptions}});var i=r(39610);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return i.bootstrap}})},81228:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getServiceProviderUrl$=t.emitServiceProviderUrl=t.webOnboardingMode$=t.subscriptionInformation$=t.premiumStatus$=t.syncInProgress$=t.syncInfo$=t.didOpen$=void 0;const n=r(18948),o=r(3343),a=r(16593);t.didOpen$=()=>(0,n.pipe)((0,o.map)(a.didOpenSelector),(0,o.distinctUntilChanged)()),t.syncInfo$=()=>(0,n.pipe)((0,o.map)(a.syncSelector),(0,o.distinctUntilChanged)()),t.syncInProgress$=()=>(0,n.pipe)((0,o.map)(a.syncIsInProgressSelector),(0,o.distinctUntilChanged)()),t.premiumStatus$=()=>(0,n.pipe)((0,o.map)(a.premiumStatusSelector),(0,o.distinctUntilChanged)()),t.subscriptionInformation$=()=>(0,n.pipe)((0,o.map)(a.subscriptionInformationSelector),(0,o.distinctUntilChanged)()),t.webOnboardingMode$=()=>(0,n.pipe)((0,o.map)(a.webOnboardingModeSelector),(0,o.distinctUntilChanged)());const i=new n.Subject;t.emitServiceProviderUrl=e=>i.next(e),t.getServiceProviderUrl$=()=>i},38328:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updatePremiumChurningDismissDateHandler=t.SendTokenStatus=void 0;var n=r(72636);Object.defineProperty(t,"SendTokenStatus",{enumerable:!0,get:function(){return n.SendTokenStatus}});const o=r(76089);t.updatePremiumChurningDismissDateHandler=e=>{const t=new Date;return e.storeService.dispatch((0,o.premiumChurningDismissDateUpdated)(t.getTime())),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve()}},28287:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetProtectedItemAutofillTimerHandler=t.validateMasterPasswordHandler=t.validateMasterPassword=t.validateToken=t.convertTokenToAuthTicket=t.dashlaneAuthenticatorGetAuthTicket=t.handlePerformValidationError=t.SendTokenStatus=void 0;const n=r(46298);var o=r(72636);Object.defineProperty(t,"SendTokenStatus",{enumerable:!0,get:function(){return o.SendTokenStatus}});const a=r(17825),i=r(25576),s=r(42282),c=r(16356),u=r(87248),l=(e,t)=>({success:!1,error:{code:e,message:t}});function d(e,t,r){if(!(0,n.isApiErrorOfType)(n.BusinessError,e))return l(i.AuthenticationCode.REGISTER_DEVICE_FAILED);const o=e.code;switch(o){case n.VerificationFailed:return l(t?i.AuthenticationCode.OTP_NOT_VALID:r?i.AuthenticationCode.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED:i.AuthenticationCode.TOKEN_NOT_VALID);case n.InvalidOTPBlocked:return l(i.AuthenticationCode.OTP_TOO_MANY_ATTEMPTS);case n.InvalidOTPAlreadyUsed:return l(i.AuthenticationCode.OTP_ALREADY_USED);case n.AccountBlockedContactSupport:return l(i.AuthenticationCode.TOKEN_ACCOUNT_LOCKED);case n.VerificationTimeout:return l(i.AuthenticationCode.TOKEN_EXPIRED);case n.VerificationRequiresRequest:return l(i.AuthenticationCode.TOKEN_TOO_MANY_ATTEMPTS);case n.VerificationMethodDisabled:return l(i.AuthenticationCode.REGISTER_DEVICE_FAILED);case n.InvalidSsoToken:case n.B2bSsoUserNotFound:return l(i.AuthenticationCode.SSO_VERIFICATION_FAILED);case n.UserHasNoActiveAuthenticator:return l(i.AuthenticationCode.NO_ACTIVE_AUTHENTICATOR);case n.FailedToContactAuthenticatorDevice:return l(i.AuthenticationCode.FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE);default:return l(i.AuthenticationCode.BUSINESS_ERROR,`Unexpected business_error: ${o}`)}}t.handlePerformValidationError=d,t.dashlaneAuthenticatorGetAuthTicket=async(e,t)=>{const{login:r}=e.getAccountInfo();e.dispatch((0,s.resetAuthTicketInfo)());try{const o=await(0,n.performDashlaneAuthenticatorVerification)(e,{login:r,deviceName:t});if((0,n.isApiError)(o))return d(o,!1,!0);const a=o.authTicket;return e.dispatch((0,s.updateAuthTicketInfo)({login:r,authTicket:a,date:Date.now()})),{success:!0,authTicket:a}}catch(e){if(e.getAdditionalInfo()?.response?.status===u.HttpStatusCode.GATEWAY_TIMEOUT)return d(n.verificationTimeoutError,!1,!0);throw e}},t.convertTokenToAuthTicket=async(e,t)=>{const{login:r}=e.getAccountInfo();let o,c;switch(e.dispatch((0,s.resetAuthTicketInfo)()),t.type){case"emailToken":if(!(0,n.isEmailTokenValid)(t.value))return l(i.AuthenticationCode.TOKEN_NOT_VALID);if(c=await(0,n.performEmailTokenVerification)(e,{login:r,token:t.value}),(0,n.isApiError)(c))return d(c);o=c.authTicket;break;case"extraDeviceToken":return(0,n.isExtraDeviceTokenValid)(t.value)?{success:!0,authTicket:void 0}:l(i.AuthenticationCode.TOKEN_NOT_VALID);case"sso":if(!t.value)return l(i.AuthenticationCode.TOKEN_NOT_VALID);if(c=await(0,n.performSsoVerification)(e,{login:r,ssoToken:t.value}),(0,n.isApiError)(c))return d(c);o=c.authTicket;break;case"otp":if(!t.value)return l(i.AuthenticationCode.TOKEN_NOT_VALID);if(c=await(0,n.performTotpVerification)(e,{login:r,otp:t.value}),(0,n.isApiError)(c))return d(c,!0);o=c.authTicket;break;default:(0,a.assertUnreachable)(t)}return e.dispatch((0,s.updateAuthTicketInfo)({login:r,authTicket:o,date:Date.now()})),{success:!0,authTicket:o}},t.validateToken=async(e,r)=>{const{storeService:n}=e;return(0,t.convertTokenToAuthTicket)(n,r)},t.validateMasterPassword=async(e,t,r)=>{const n=t.getInstance().isKey(e.getUserSession().serverKey,r);return n&&e.dispatch((0,c.updateLastMasterPasswordCheck)()),n},t.validateMasterPasswordHandler=async(e,r)=>{const{storeService:n,masterPasswordEncryptorService:o}=e;return await(0,t.validateMasterPassword)(n,o,r)},t.resetProtectedItemAutofillTimerHandler=e=>(e.storeService.dispatch((0,c.updateLastMasterPasswordCheck)()),Promise.resolve())},29303:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recoveryIsOtpSelector=t.recoveryInProgressSelector=t.recoveryDataSelector=t.recoveryUkiSelector=void 0,t.recoveryUkiSelector=e=>e.userSession.recoveryData.recoveryUki,t.recoveryDataSelector=e=>e.userSession.recoveryData,t.recoveryInProgressSelector=e=>e.userSession.recoveryData.recoveryInProgress,t.recoveryIsOtpSelector=e=>{const t=e.userSession.recoveryData.verificationMethod[0]?.type??"";return["totp","duo_push","u2f"].includes(t)}},16593:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sessionEncryptorKeysSelector=t.getCredentialSearchOrderSelector=t.analyticsInstallationIdSelector=t.isPaymentFailureChurningDismissedSelector=t.premiumChurningDismissDateSelector=t.lastMasterPasswordCheckSelector=t.didOpenSelector=t.publicUserIdSelector=t.analyticsIdsSelector=t.platformNameSelector=t.appVersionSelector=t.isAuthenticatedSelector=t.protectPasswordsSettingSelector=t.personalSettingsSelector=t.authTicketInfoSelector=t.sharingKeysSelector=t.sharingSyncSelector=t.recoveryKeySelector=t.accountRecoveryOptInSelector=t.userDefaultCryptoSelector=t.anonymousUserIdSelector=t.isLocalKeyMigrationRequiredSelector=t.remoteKeySelector=t.isRemoteKeyActivatedSelector=t.serverKeySelector=t.spaceDisabledDomainsListSelector=t.localKeySelector=t.isLocalKeyActivatedSelector=t.isOnboardingNotificationShowingSelector=t.webOnboardingModeSelector=t.masterPasswordValidationDataSelector=t.spacesSelector=t.userLoginSelector=t.masterPasswordSelector=t.masterPasswordAndServerKeySelector=t.userIdSelector=t.activeSpacesSelector=t.subscriptionInformationSelector=t.nodePremiumStatusSelector=t.premiumStatusSelector=t.syncIsInProgressSelector=t.syncSelector=void 0;const n=r(32034),o=r(16038),a=r(57789),i=r(56915),s=r(2246),c=r(59600),u=r(30913),l=r(41265),d=r(25576);t.syncSelector=e=>e.userSession.sync,t.syncIsInProgressSelector=e=>e.userSession.sync.status===d.SyncStatuses.IN_PROGRESS,t.premiumStatusSelector=e=>e.userSession.localSettings.premiumStatus,t.nodePremiumStatusSelector=e=>e.userSession.localSettings.nodePremiumStatus,t.subscriptionInformationSelector=e=>e.userSession.localSettings.subscriptionInformation,t.activeSpacesSelector=e=>{const r=(0,t.premiumStatusSelector)(e);return(r&&r.spaces||[]).filter((e=>"accepted"===e.status))},t.userIdSelector=e=>e.userSession.account.login,t.masterPasswordAndServerKeySelector=e=>{const{userSession:t}=e,{masterPassword:r,serverKey:n}=t.session;return{password:(0,o.utf8ToBase64)(r),serverKey:(0,o.utf8ToBase64)(n)}},t.masterPasswordSelector=e=>e.userSession.session.masterPassword,t.userLoginSelector=e=>e.userSession.account.login,t.spacesSelector=e=>e.userSession.spaceData.spaces,t.masterPasswordValidationDataSelector=e=>e.userSession.session.settingsForMPValidation,t.webOnboardingModeSelector=e=>e.userSession.localSettings.webOnboardingMode,t.isOnboardingNotificationShowingSelector=e=>{const r=(0,t.webOnboardingModeSelector)(e);return(0,a.isOnboardingNotificationShowing)(r)},t.isLocalKeyActivatedSelector=e=>Boolean(e.userSession.session.localKey),t.localKeySelector=e=>e.userSession.session.localKey,t.spaceDisabledDomainsListSelector=(0,n.createSelector)(t.spacesSelector,(e=>e.reduce(((e,t)=>{let r=[];return t&&t.details&&t.details.info&&t.details.info.autologinDomainDisabledArray&&(r=t.details.info.autologinDomainDisabledArray),[...e,...r]}),[]))),t.serverKeySelector=e=>e.userSession.session.serverKey,t.isRemoteKeyActivatedSelector=e=>Boolean(e.userSession.session.remoteKey),t.remoteKeySelector=e=>e.userSession.session.remoteKey,t.isLocalKeyMigrationRequiredSelector=e=>e.userSession.session.isLocalKeyMigrationRequired,t.anonymousUserIdSelector=e=>e.userSession.personalSettings.AnonymousUserId,t.userDefaultCryptoSelector=e=>e.userSession.personalSettings.CryptoUserPayload,t.accountRecoveryOptInSelector=e=>e.userSession.personalSettings.RecoveryOptIn||!1,t.recoveryKeySelector=e=>e.userSession.personalSettings.RecoveryKey,t.sharingSyncSelector=e=>e.userSession.sharingSync,t.sharingKeysSelector=e=>e.userSession.session.keyPair,t.authTicketInfoSelector=e=>e.userSession.authTicketInfo,t.personalSettingsSelector=e=>e.userSession.personalSettings,t.protectPasswordsSettingSelector=e=>{const{ProtectPasswords:t}=e.userSession.personalSettings;return t},t.isAuthenticatedSelector=e=>e.userSession.account.isAuthenticated,t.appVersionSelector=e=>(0,i.platformInfoSelector)(e).appVersion,t.platformNameSelector=e=>(0,i.platformInfoSelector)(e).platformName,t.analyticsIdsSelector=e=>e.userSession.session.analyticsIds,t.publicUserIdSelector=e=>e.userSession.session.publicUserId,t.didOpenSelector=e=>e.userSession.session.didOpen,t.lastMasterPasswordCheckSelector=e=>e.userSession.session.lastMasterPasswordCheck,t.premiumChurningDismissDateSelector=e=>e.userSession.localSettings.premiumChurningDismissDate,t.isPaymentFailureChurningDismissedSelector=e=>{return t=e.userSession.localSettings.premiumChurningDismissDate,Date.now()-t>864e5;var t},t.analyticsInstallationIdSelector=(0,n.createSelector)(t.userLoginSelector,t.isAuthenticatedSelector,u.applicationBuildTypeSelector,((e,t,r)=>{const n=e&&(0,l.isInternalTestUser)(e)&&t;return r===c.ApplicationBuildType.DEV||r===c.ApplicationBuildType.QA||n?(0,s.getCommonAppSetting)("installationId"):null})),t.getCredentialSearchOrderSelector=e=>e.userSession.localSettings.credentialSearchOrder??d.CredentialSearchOrder.NAME,t.sessionEncryptorKeysSelector=e=>({masterPassword:(0,t.masterPasswordSelector)(e),serverKey:(0,t.serverKeySelector)(e),localKey:(0,t.localKeySelector)(e),remoteKey:(0,t.remoteKeySelector)(e)})},27754:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sessionStartTimeSelector=t.sessionIdSelector=void 0,t.sessionIdSelector=e=>e.userSession.session.sessionId,t.sessionStartTimeSelector=e=>e.userSession.account.sessionStartTime},38981:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSSOUserSelector=t.ssoProviderInfoSelector=t.ssoMigrationInfoSelector=t.serviceProviderUrlSelector=t.ssoSettingsSelector=void 0;const n=r(35105),o=r(32034),a=r(16593);t.ssoSettingsSelector=e=>e.userSession.ssoSettings,t.serviceProviderUrlSelector=e=>(0,t.ssoSettingsSelector)(e).serviceProviderUrl,t.ssoMigrationInfoSelector=(0,o.createSelector)(t.ssoSettingsSelector,(({migration:e,serviceProviderUrl:t,ssoToken:r})=>({migration:r?n.SSOMigrationType.MP_TO_SSO_WITH_INFO:e,serviceProviderUrl:t}))),t.ssoProviderInfoSelector=(0,o.createSelector)(t.ssoSettingsSelector,(({serviceProviderUrl:e,isNitroProvider:t})=>({serviceProviderUrl:e,isNitroProvider:t}))),t.isSSOUserSelector=e=>{const t=(0,a.activeSpacesSelector)(e);return t.length>0&&t[0].isSSOUser||!1}},87881:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(28096),o=r(35507),a=r(16593),i=r(56915),s=r(75004),c=r(54642),u=r(50571),l=r(59213),d=r(35924),p=r(18216);t.setupSubscriptions=function(e,t){const{storeService:r,wsService:f,sessionService:g}=t;e.coreServicesReady.on((async e=>{if(e.initMode===p.InitMode.Resume&&(t.sessionService.tryRestoreInstance(),g.isSessionStarted())){const{user:e}=t.sessionService.getInstance();await e.loadNonResumableSessionData()}})),e.sessionOpened.on((()=>{r.dispatch((0,d.resetLoginStepInfo)());const e=r.getState(),t=(0,a.premiumStatusSelector)(e);1!==(0,c.getUserMessagesByTypeSelector)(e,l.UserMessageTypes.TRIAL_EXPIRED).length||(0,s.isTrialExpired)({premiumStatus:t})||(r.dispatch((0,u.userMessagesDismissed)((0,s.createTrialExpiredUserMessage)())),g.getInstance().user.persistLocalSettings())})),e.sessionClosed.on((e=>{(0,n.triggerLoginStatusChanged)({loggedIn:!1,login:e.login})})),e.familyMemberLeft.on((async()=>{const e=(0,a.userLoginSelector)(r.getState()),t=(0,i.ukiSelector)(r.getState());await(0,o.refreshPremiumStatus)(r,f,e,t)}))}},25576:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpaceTier=t.SpaceStatus=t.B2CPlanFeature=t.PlanType=t.PremiumStatusCode=t.B2CStatusCode=t.CancelDashlaneAuthenticatorRegistration=t.CredentialSearchOrder=t.PersistData=t.SyncStatuses=t.SessionResumingCode=t.AuthenticationCode=t.extractExtraDeviceToken=t.makeExtraDeviceToken=t.extractOTP=t.makeSsoToken=t.makeOTP=t.extractEmailToken=t.makeEmailToken=void 0,t.makeEmailToken=e=>({type:"emailToken",value:e}),t.extractEmailToken=e=>e.value,t.makeOTP=e=>({type:"otp",value:e}),t.makeSsoToken=e=>({type:"sso",value:e}),t.extractOTP=e=>e.value,t.makeExtraDeviceToken=e=>({type:"extraDeviceToken",value:e}),t.extractExtraDeviceToken=e=>e.value,function(e){e[e.INVALID_LOGIN=0]="INVALID_LOGIN",e[e.EMPTY_LOGIN=1]="EMPTY_LOGIN",e[e.EMPTY_MASTER_PASSWORD=2]="EMPTY_MASTER_PASSWORD",e[e.EMPTY_ENCRYPTED_KEY=3]="EMPTY_ENCRYPTED_KEY",e[e.INVALID_ENCRYPTED_KEY=4]="INVALID_ENCRYPTED_KEY",e[e.EMPTY_TOKEN=5]="EMPTY_TOKEN",e[e.EMPTY_OTP=6]="EMPTY_OTP",e[e.SEND_TOKEN_FAILED=7]="SEND_TOKEN_FAILED",e[e.UKI_REGISTRATION_FAILED=8]="UKI_REGISTRATION_FAILED",e[e.REGISTER_DEVICE_FAILED=9]="REGISTER_DEVICE_FAILED",e[e.BUSINESS_ERROR=10]="BUSINESS_ERROR",e[e.USER_DOESNT_EXIST=11]="USER_DOESNT_EXIST",e[e.USER_DOESNT_EXIST_UNLIKELY_MX=12]="USER_DOESNT_EXIST_UNLIKELY_MX",e[e.USER_DOESNT_EXIST_INVALID_MX=13]="USER_DOESNT_EXIST_INVALID_MX",e[e.USER_UNAUTHORIZED=14]="USER_UNAUTHORIZED",e[e.WRONG_PASSWORD=15]="WRONG_PASSWORD",e[e.DATA_TAMPERED_ERROR=16]="DATA_TAMPERED_ERROR",e[e.LOGGEDIN=17]="LOGGEDIN",e[e.ASK_TOKEN=18]="ASK_TOKEN",e[e.ASK_OTP=19]="ASK_OTP",e[e.ASK_MASTER_PASSWORD=20]="ASK_MASTER_PASSWORD",e[e.USE_LOCAL_UKI=21]="USE_LOCAL_UKI",e[e.ASK_DASHLANE_AUTHENTICATOR=22]="ASK_DASHLANE_AUTHENTICATOR",e[e.OTP_NOT_VALID=23]="OTP_NOT_VALID",e[e.OTP_TOO_MANY_ATTEMPTS=24]="OTP_TOO_MANY_ATTEMPTS",e[e.OTP_ALREADY_USED=25]="OTP_ALREADY_USED",e[e.BACKUP_CODE_NOT_VALID=26]="BACKUP_CODE_NOT_VALID",e[e.TOKEN_NOT_VALID=27]="TOKEN_NOT_VALID",e[e.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED=28]="DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED",e[e.SERVER_KEY_MISSING=29]="SERVER_KEY_MISSING",e[e.TOKEN_LOCKED=30]="TOKEN_LOCKED",e[e.TOKEN_TOO_MANY_ATTEMPTS=31]="TOKEN_TOO_MANY_ATTEMPTS",e[e.TOKEN_ACCOUNT_LOCKED=32]="TOKEN_ACCOUNT_LOCKED",e[e.TOKEN_EXPIRED=33]="TOKEN_EXPIRED",e[e.NO_ACTIVE_AUTHENTICATOR=34]="NO_ACTIVE_AUTHENTICATOR",e[e.FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE=35]="FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE",e[e.DASHLANE_AUTHENTICATOR_ASKED_FOR_LOCAL_SESSION=36]="DASHLANE_AUTHENTICATOR_ASKED_FOR_LOCAL_SESSION",e[e.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED=37]="DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED",e[e.TOKEN_PROVIDED_FOR_LOCAL_SESSION=38]="TOKEN_PROVIDED_FOR_LOCAL_SESSION",e[e.DEVICE_ALREADY_REGISTERED=39]="DEVICE_ALREADY_REGISTERED",e[e.OTP_PROVIDED_FOR_LOCAL_NON_OTP_SESSION=40]="OTP_PROVIDED_FOR_LOCAL_NON_OTP_SESSION",e[e.DIFFERENT_LOGIN_PROVIDED_WITH_TOKEN_OR_OTP=41]="DIFFERENT_LOGIN_PROVIDED_WITH_TOKEN_OR_OTP",e[e.UNKNOWN_SYNC_ERROR=42]="UNKNOWN_SYNC_ERROR",e[e.INVALID_UKI=43]="INVALID_UKI",e[e.UNKNOWN_UKI=44]="UNKNOWN_UKI",e[e.UNKNOWN_ERROR=45]="UNKNOWN_ERROR",e[e.UNEXPECTED_OTP_TYPE=46]="UNEXPECTED_OTP_TYPE",e[e.UNAUTHORIZED=47]="UNAUTHORIZED",e[e.UNAUTHORIZED_NOT_VALID_CONTENT=48]="UNAUTHORIZED_NOT_VALID_CONTENT",e[e.NETWORK_ERROR=49]="NETWORK_ERROR",e[e.THROTTLED=50]="THROTTLED",e[e.SESSION_ALREADY_OPENED=51]="SESSION_ALREADY_OPENED",e[e.INVALID_SESSION=52]="INVALID_SESSION",e[e.DEVICE_NOT_REGISTERED=53]="DEVICE_NOT_REGISTERED",e[e.MISSING_APP_KEYS=54]="MISSING_APP_KEYS",e[e.PROVIDE_EXTRA_DEVICE_TOKEN=55]="PROVIDE_EXTRA_DEVICE_TOKEN",e[e.PROVIDE_MASTER_PASSWORD_FOR_EXTRA_DEVICE=56]="PROVIDE_MASTER_PASSWORD_FOR_EXTRA_DEVICE",e[e.PROVIDE_MASTER_PASSWORD_AND_SERVER_KEY_FOR_EXTRA_DEVICE=57]="PROVIDE_MASTER_PASSWORD_AND_SERVER_KEY_FOR_EXTRA_DEVICE",e[e.ASK_OTP_FOR_NEW_DEVICE=58]="ASK_OTP_FOR_NEW_DEVICE",e[e.SSO_LOGIN_BYPASS=59]="SSO_LOGIN_BYPASS",e[e.SSO_VERIFICATION_FAILED=60]="SSO_VERIFICATION_FAILED",e[e.SSO_BLOCKED=61]="SSO_BLOCKED",e[e.CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION=62]="CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION",e[e.USER_DOESNT_EXIST_SSO=63]="USER_DOESNT_EXIST_SSO"}(t.AuthenticationCode||(t.AuthenticationCode={})),function(e){e.INVALID_LOGIN_IN_STORE="invalid_login_in_store"}(t.SessionResumingCode||(t.SessionResumingCode={})),function(e){e.READY="ready",e.IN_PROGRESS="in_progress",e.SUCCESS="success",e.FAILURE="failure"}(t.SyncStatuses||(t.SyncStatuses={})),function(e){e[e.PERSIST_DATA_YES=0]="PERSIST_DATA_YES",e[e.PERSIST_DATA_NO=1]="PERSIST_DATA_NO"}(t.PersistData||(t.PersistData={})),function(e){e.NAME="name",e.DATE="date"}(t.CredentialSearchOrder||(t.CredentialSearchOrder={})),function(e){e.CANCELLED="cancelled",e.COMPLETED="completed"}(t.CancelDashlaneAuthenticatorRegistration||(t.CancelDashlaneAuthenticatorRegistration={})),function(e){e.Free="free",e.Subscribed="subscribed",e.Legacy="legacy"}(t.B2CStatusCode||(t.B2CStatusCode={})),function(e){e[e.NO_PREMIUM=0]="NO_PREMIUM",e[e.PREMIUM=1]="PREMIUM",e[e.PREMIUM_CANCELLED=2]="PREMIUM_CANCELLED",e[e.OLD_ACCOUNT=3]="OLD_ACCOUNT",e[e.NEW_USER=4]="NEW_USER",e[e.GRACE_PERIOD=5]="GRACE_PERIOD"}(t.PremiumStatusCode||(t.PremiumStatusCode={})),function(e){e.Amazon="amazon",e.FreeTrial="free_trial",e.Invoice="invoice",e.IOS="ios",e.IOSRenewable="ios_renewable",e.Mac="mac",e.MacRenewable="mac_renewable",e.Offer="offer",e.Partner="partner",e.Paypal="paypal",e.PaypalRenewable="paypal_renewable",e.Playstore="playstore",e.PlaystoreRenewable="playstore_renewable",e.Stripe="stripe"}(t.PlanType||(t.PlanType={})),function(e){e.Premium="premium",e.Essentials="essentials",e.Premiumplus="premiumplus",e.BackupForAll="backup"}(t.B2CPlanFeature||(t.B2CPlanFeature={})),function(e){e.Accepted="accepted",e.Pending="pending",e.Proposed="proposed",e.Refused="refused",e.Removed="removed",e.Revoked="revoked",e.Unproposed="unproposed"}(t.SpaceStatus||(t.SpaceStatus={})),function(e){e.Team="team",e.Business="business",e.Legacy="legacy",e.Entreprise="entreprise",e.Free="free",e.Starter="starter"}(t.SpaceTier||(t.SpaceTier={})),function(e){e.not_in_team="not_in_team",e.proposed="proposed",e.in_team="in_team"}(r||(r={}))},34376:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentUserInfo=void 0;const n=r(56915);t.getCurrentUserInfo=function(e){const t=e.getUserSession().keyPair;return{login:e.getUserLogin(),uki:(0,n.ukiSelector)(e.getState()),privateKey:t&&t.privateKey}}},41248:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},80687:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authorizationMiddleware=void 0,t.authorizationMiddleware=e=>async t=>{const r=await t,{config:{allowedPlatforms:n},services:{storeService:o}}=r,{platformName:a}=o.getPlatformInfo();if(n&&!n.includes(a))throw new Error("You are not allowed to connect to this slot");return await e(t)}},18324:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugMiddleware=void 0,r(4939),new Map,t.debugMiddleware=e=>async t=>e(t)},77686:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugMiddleware=t.authorizationMiddleware=void 0;var n=r(80687);Object.defineProperty(t,"authorizationMiddleware",{enumerable:!0,get:function(){return n.authorizationMiddleware}});var o=r(18324);Object.defineProperty(t,"debugMiddleware",{enumerable:!0,get:function(){return o.debugMiddleware}})},57307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandQueryBus=void 0;const n=r(18948),o=r(3343),a=r(28354),i=r(17338),s=r(25566),c=r(77686);class u{constructor(e){this.services=(0,i.getCoreServices)(e)}register(e){const{commands:t,queries:r,liveQueries:n}=e;Object.keys(t).forEach((e=>{this._registerCommand(e,t[e])})),Object.keys(r).forEach((e=>{this._registerQuery(e,r[e])})),Object.keys(n).forEach((e=>{this._registerLiveQuery(e,n[e])}))}_registerCommand(e,t){const r=r=>Promise.resolve({messageType:"command",messageName:e,requestId:(0,a.v4)(),services:this.services,arg:r,config:t,logTags:[u.API_LOG_TAG,u.COMMAND_LOG_TAG]}),n=[c.authorizationMiddleware,c.debugMiddleware,()=>e=>e.then((async e=>{const{arg:t,config:r,services:n}=e,{handler:o}=r,a=await o(n,t);return{...e,result:a}}))];this.registerCommand(e,(async e=>(0,s.buildMiddlewarePipeline)(...n)(r(e)).then((e=>e.result))))}_registerQuery(e,t){const r=r=>Promise.resolve({messageType:"query",messageName:e,requestId:(0,a.v4)(),services:this.services,arg:r,config:t,logTags:[u.API_LOG_TAG,u.QUERY_LOG_TAG]}),n=[c.authorizationMiddleware,c.debugMiddleware,()=>e=>e.then((async e=>{const{arg:r,services:n}=e,{selector:o,staticDataHandler:a,selectorFactory:i}=t;if(o){const{storeService:t}=n,a=o(t.getState(),r);return{...e,result:a}}if(i){const{storeService:t}=n,o=t.getState(),a=(await i(o,this.services))(t.getState(),r);return{...e,result:a}}{const t=a(r);return{...e,result:t}}}))];this.registerQuery(e,(async e=>(0,s.buildMiddlewarePipeline)(...n)(r(e)).then((e=>e.result))))}_registerLiveQuery(e,t){this.registerLiveQuery(e,(e=>{const{operator:r,subject:a,operatorFactory:i}=t;if(r){const{storeService:t}=this.services;return t.getState$().pipe(r(e),(0,o.skip)(1))}if(i){const{storeService:t}=this.services,r=t.getState$();return(0,n.from)(i(t.getState(),this.services)).pipe((0,n.switchMap)((t=>r.pipe(t(e),(0,o.skip)(1)))))}return a(e)}))}}t.CommandQueryBus=u,u.API_LOG_TAG="API",u.COMMAND_LOG_TAG="Command",u.QUERY_LOG_TAG="Query"},88626:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(91069),t),o(r(57307),t)},91069:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},33968:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventStore=void 0;const n=r(18948),o=r(28354),a=r(3343),i=r(17825),s=r(47746);t.EventStore=class{constructor(){this._operation$=new n.Subject,this.subs=new Set,this.add=async(e,t)=>{const r=(0,o.v4)(),n=new Promise(((e,t)=>{const n=this._operationResults$.subscribe((o=>{o.id===r&&(!0===o.success?e(r):t(o.error),n.unsubscribe(),this.subs.delete(n))}));this.subs.add(n)}));return this.triggerAdd(e,r,t),n},this.remove=async(e,t)=>{const r=new Promise(((e,r)=>{const n=this._operationResults$.subscribe((o=>{o.id===t&&(!0===o.success?e():r(o.error),n.unsubscribe(),this.subs.delete(n))}));this.subs.add(n)}));return this.triggerRemove(e,t),r},this.removeAll=async e=>{const t=(0,o.v4)(),r=new Promise(((e,r)=>{const n=this._operationResults$.subscribe((o=>{o.id===t&&(!0===o.success?e():r(o.error),n.unsubscribe(),this.subs.delete(n))}));this.subs.add(n)}));return this.triggerRemoveAll(e,t),r},this.onAdd=async e=>{const{id:t,event:r,topic:n,type:o}=e,a={id:t,topic:n,type:o};try{const e=await this.retrieve(),o={id:t,event:r},i={...e,[n]:[...e[n]||[],o]};return await this.store(i),{...a,success:!0,event:r}}catch(e){return{...a,success:!1,error:e}}},this.onRemove=async e=>{const{id:t,topic:r,type:n}=e,o={id:t,topic:r,type:n};try{const e=await this.retrieve(),n={...e,[r]:(e[r]||[]).filter((e=>e.id!==t))};return await this.store(n),{...o,success:!0}}catch(e){return{...o,success:!1,error:e}}},this.onRemoveAll=async e=>{const{id:t,topic:r,type:n}=e,o={id:t,topic:r,type:n};try{const e={...await this.retrieve(),[r]:[]};return await this.store(e),{...o,success:!0}}catch(e){return{...o,success:!1,error:e}}},this.onOperation=async e=>{switch(e.type){case s.OperationType.Add:return this.onAdd(e);case s.OperationType.Remove:return this.onRemove(e);case s.OperationType.RemoveAll:return this.onRemoveAll(e);default:return(0,i.assertUnreachable)(e)}},this.setupOperationsHandling=()=>{const e=this._operation$.pipe((0,a.concatMap)(this.onOperation),(0,a.share)()),t=e.subscribe();this.subs.add(t),this._operationResults$=e},this.setupOperationsHandling()}newItems$(e){return this._operationResults$.pipe((0,a.filter)((e=>e.type===s.OperationType.Add&&e.success)),(0,a.filter)((t=>t.topic===e)))}async getItems(e){return(await this.retrieve())[e]}teardown(){this.subs.forEach((e=>e.unsubscribe()))}async triggerAdd(e,t,r){const n={event:r,id:t,topic:e,type:s.OperationType.Add};this._operation$.next(n)}async triggerRemove(e,t){const r={id:t,topic:e,type:s.OperationType.Remove};this._operation$.next(r)}async triggerRemoveAll(e,t){const r={id:t,topic:e,type:s.OperationType.RemoveAll};this._operation$.next(r)}}},47746:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OperationType=void 0,function(e){e.Add="add",e.Remove="remove",e.RemoveAll="removeAll"}(t.OperationType||(t.OperationType={}))},30137:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(88626),t)},25566:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildMiddlewarePipeline=void 0;var n=r(3201);Object.defineProperty(t,"buildMiddlewarePipeline",{enumerable:!0,get:function(){return n.buildMiddlewarePipeline}})},3201:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildMiddlewarePipeline=void 0,t.buildMiddlewarePipeline=(...e)=>t=>e.reduceRight(((e,t)=>t(e)),(e=>e))(t)},36768:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(84511),o=r(80993),a=r(90021),i=r(55721),s=r(78987),c=r(23944),u=r(22652),l=r(95326);t.config={commands:{shareItem:{handler:l.shareItem}},queries:{getAllSharedItemIds:{selector:o.sortedSharedItemIdsSelector},getGroupRecipients:{selector:n.groupRecipientsSelector},getHasNotifications:{selector:n.hasNotificationsSelector},getIsShared:{selector:n.isSharedSelector},getItemItemGroup:{selector:n.itemItemGroupSelector},getMyAcceptedUserGroups:{selector:n.myAcceptedUserGroupsSelector},getMyAcceptedItemGroupUserMembers:{selector:n.myAcceptedItemGroupUserMembersSelector},getPendingItemGroups:{selector:n.pendingItemGroupsSelector},getPendingUserGroups:{selector:n.pendingUserGroupsSelector},getRecipientsCount:{selector:n.recipientsCountSelector},getUserRecipients:{selector:n.userRecipientsSelector},getSharingCapacity:{selector:a.sharingCapacitySelector},isAllowedToShare:{selector:i.isAllowedToShareSelector},...c.config.queries,...u.config.queries},liveQueries:{liveAllSharedItemIds:{operator:s.allSharedItemIds$},liveGroupRecipients:{operator:s.groupRecipients$},liveHasNotifications:{operator:s.hasNotifications$},liveIsShared:{operator:s.isShared$},liveMyAcceptedItemGroupUserMembers:{operator:s.myAcceptedItemGroupUserMembers$},liveMyAcceptedUserGroups:{operator:s.myAcceptedUserGroups$},livePendingItemGroups:{operator:s.pendingItemGroups$},livePendingUserGroups:{operator:s.pendingUserGroups$},liveRecipientsCount:{operator:s.recipientsCount$},liveUserRecipients:{operator:s.userRecipients$},liveSharingCapacity:{operator:s.sharingCapacity$},...c.config.liveQueries,...u.config.liveQueries}}},71661:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},36884:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemGroupService=t.UPDATE_ITEM_GROUP_MEMBERS=t.SHARING_VERSION=t.REVOKE_ITEM_GROUP_MEMBERS=t.REFUSE_ITEM_GROUP=t.INVITE_ITEM_GROUP_MEMBERS=t.DELETE_ITEM_GROUP=t.CREATE_SPECIAL_ITEM_GROUP=t.CREATE_ITEM_GROUP=t.ACCEPT_ITEM_GROUP=void 0;const n=r(78320),o=r(36467),a=r(82366),i=r(36513),s=r(58107),c=r(93513);function u(e,t,r){const n=r&&r.users&&r.users.find((e=>e.userId===t.login)),o=n&&n.groupKey;return e.asymmetricEncryption.decrypt(t.privateKey,o)}function l(e,r,n,o,a,i){return{...i?{userGroupId:i}:{},...o&&o.length?{itemsForEmailing:o}:{},acceptSignature:e,groupId:r,revision:n,sharingVersion:t.SHARING_VERSION,type:t.ACCEPT_ITEM_GROUP,auditLogDetails:a}}function d(e,r,n,o,a){const i=a?{userGroupId:a}:{};return{...n&&n.length?{itemsForEmailing:n}:{},...i,groupId:e,revision:r,sharingVersion:t.SHARING_VERSION,type:t.REFUSE_ITEM_GROUP,auditLogDetails:o}}function p(e,r,n,o,a,i){return{...n&&n.length?{groups:n}:{},...a&&a.length?{itemsForEmailing:a}:{},groupId:e,items:o,sharingVersion:t.SHARING_VERSION,type:t.CREATE_ITEM_GROUP,users:r,auditLogDetails:i}}function f(e,r,n,o,a,i){return{...o&&o.length?{groups:o}:{},...n&&n.length?{users:n}:{},...a&&a.length?{itemsForEmailing:a}:{},revision:r,groupId:e,sharingVersion:t.SHARING_VERSION,type:t.INVITE_ITEM_GROUP_MEMBERS,auditLogDetails:i}}function g(e,r,n,o,a,i="manual"){return{...o&&o.length?{groups:o}:{},...n&&n.length?{users:n}:{},groupId:e,revision:r,sharingVersion:t.SHARING_VERSION,type:t.REVOKE_ITEM_GROUP_MEMBERS,auditLogDetails:a,origin:i}}function m(e,r,n,o){return{...o&&o.length?{groups:o}:{},...n&&n.length?{users:n}:{},groupId:e,revision:r,sharingVersion:t.SHARING_VERSION,type:t.UPDATE_ITEM_GROUP_MEMBERS}}async function h(e,t,r){const n=r?await async function(e,t,r){const n=await(0,i.makeCryptoService)(),o=c.encode(e),s=await n.symmetricEncryption.signHmacSHA256(t,o);return await(0,a.validateProposeSignature)("[ItemGroupService] - makeUserUpdatePublicKey",n,t,s,o),{groupKey:await n.asymmetricEncryption.encrypt(r,t),proposeSignature:s}}(e,r.rawItemGroupKey,r.userPublicKey):{};return{...n,permission:t,userId:e}}function y(e,t){return{permission:t,groupId:e}}async function S(e,t,r,n,o){const s=await(0,i.makeCryptoService)(),u=t&&t.login&&t.publicKey,l=u?t.login:e,d=u?{}:{proposeSignatureUsingAlias:!0},p=u?{groupKey:await s.asymmetricEncryption.encrypt(t.publicKey,o)}:{},f=c.encode(l),g=await s.symmetricEncryption.signHmacSHA256(o,f);return await(0,a.validateProposeSignature)("[ItemGroupService] - makeUserUpload",s,o,g,f),{...t.privateKey?{acceptSignature:await E(r,o,t.privateKey)}:{},...d,...p,alias:e,permission:n,proposeSignature:g,userId:l}}async function v(e,t,r,n,o,u){const{groupId:l}=e,d=await(0,i.makeCryptoService)();if(!(e.users||[]).find((e=>e.userId===o)))throw new Error("[ItemGroupService] - makeUserGroupInvite: Trying to share an item to a userGroup that I'm not part of.");const p=await(0,s.getUserGroupPrivateKey)(e,n,o),f=await d.asymmetricEncryption.encrypt(e.publicKey,r),g=c.encode(l),m=await d.symmetricEncryption.signHmacSHA256(r,g);return await(0,a.validateProposeSignature)("[ItemGroupService] - makeUserGroupInvite",d,r,m,g),{groupId:l,permission:t,groupKey:f,proposeSignature:m,acceptSignature:await E(u,r,p)}}async function E(e,t,r){const n=await(0,i.makeCryptoService)(),o=c.encode(`${e}-accepted-${t}`);return await n.asymmetricEncryption.sign(r,o)}t.ACCEPT_ITEM_GROUP="acceptItemGroup",t.CREATE_ITEM_GROUP="createItemGroup",t.CREATE_SPECIAL_ITEM_GROUP="createUserGroupsItemGroup",t.DELETE_ITEM_GROUP="deleteItemGroup",t.INVITE_ITEM_GROUP_MEMBERS="inviteItemGroupMembers",t.REFUSE_ITEM_GROUP="refuseItemGroup",t.REVOKE_ITEM_GROUP_MEMBERS="revokeItemGroupMembers",t.SHARING_VERSION=4,t.UPDATE_ITEM_GROUP_MEMBERS="updateItemGroupMembers",t.makeItemGroupService=function(e,r){return{makeCreateSpecialItemGroupEvent:(e,i,s)=>async function(e,r,i,s){const c=(0,n.generateItemUuid)(),[l,d]=await Promise.all([e.symmetricEncryption.generateNewAESKey(),u(e,r,i)]),p=await e.symmetricEncryption.decryptAES256(d,i.privateKey),[f,g,m]=await Promise.all([e.asymmetricEncryption.encrypt(i.publicKey,l),(0,a.generateProposeSignature)(e,l,i.groupId),(0,a.generateAcceptSignature)(e,p,c,l)]),h={type:t.CREATE_SPECIAL_ITEM_GROUP,sharingVersion:t.SHARING_VERSION,groupId:c,teamId:i.teamId,alias:r.login,groups:[{groupId:i.groupId,permission:"admin",groupKey:f,proposeSignature:g,acceptSignature:m}]};return s.length&&(h.items=await(0,o.createItemsForUserGroups)(e,l,s)),h}(r,e,i,s),makeCreateItemGroupEvent:p,makeInviteItemGroupMembers:f,makeUpdateItemGroupMembers:m,makeUserUpdate:h,makeUserGroupUpdate:y,makeUserUpload:S,makeUserGroupInvite:v,createSpecialItemGroup:({login:t,uki:r},n)=>e.itemGroup.createSpecialItemGroup(t,r,n),makeDeleteItemGroupEvent:(e,r)=>async function(e,r){return{type:t.DELETE_ITEM_GROUP,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r}}(e,r),deleteItemGroup:({login:t,uki:r},n)=>function(e,t,r,n){return e.itemGroup.deleteGroup(t,r,n).then((({itemGroups:e})=>e)).catch((o=>{if("Conflict"===o.message)return function(e,t,r,n){const o={type:"getSharing",sharingVersion:4,userGroupIds:n};return e.sharing.get(t,r,o).then((({itemGroupErrors:e,itemGroups:t})=>{if(e&&e.length)throw new Error(e[0].message);return t}))}(e,t,r,[n.groupId]).then((o=>{const[{revision:a,teamId:i}]=o;return i?e.itemGroup.deleteGroup(t,r,{...n,revision:a}).then((({itemGroups:e})=>e)):o}));throw o}))}(e,t,r,n),makeAcceptItemGroupEvent:l,makeRefuseItemGroupEvent:d,makeRevokeItemGroupMembers:g}}},10294:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemService=t.SHARING_VERSION=t.UPDATE_ITEM=t.ADD_ITEMS=t.REMOVE_ITEMS=void 0;const n=r(53576),o=r(36513);async function a(e,t,r){return{itemId:e,itemKey:t,content:r}}function i(e){const t=(0,n.isCredential)(e)?"password":"note";return{type:t,name:e.Title||`Untitled ${t}`}}async function s(e,r,n){return{type:t.ADD_ITEMS,sharingVersion:t.SHARING_VERSION,revision:r,groupId:e,items:n}}async function c(e,r,n){if(!n)throw new Error("Missing payload. See method documentation.");const{item:a,itemId:i,itemContent:s}=n;if(!(a||i&&s))throw new Error("insufficient arguments: item or (itemId and content) must be provided.");if(a&&(i||s))throw new Error("item and (itemId | content) cannot both be provided");const c=(0,o.makeSymmetricEncryption)(),u=s??await c.encryptSharingItem(r,a);return{type:t.UPDATE_ITEM,sharingVersion:t.SHARING_VERSION,itemId:i??a?.Id,content:u,timestamp:e}}t.REMOVE_ITEMS="removeItems",t.ADD_ITEMS="addItems",t.UPDATE_ITEM="updateItem",t.SHARING_VERSION=4;const u=(e,t,r,n)=>e.itemGroup.updateItem(t,r,n);function l(e,t,r,n){return e.itemGroup.addItems(t,r,n)}const d=(e,r,n)=>Promise.resolve({type:t.REMOVE_ITEMS,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r,items:[...n]}),p=(e,t,r,n)=>e.itemGroup.removeItems(t,r,n);t.makeItemService=function(){return{makeItemUpload:a,makeAddItemsEvent:s,makeItemForEmailing:i,addItems:l,makeUpdateItemEvent:c,updateItem:u,makeRemoveItemsEvent:d,removeItems:p}}},58107:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingUsersFromItemGroups=t.doesItemGroupExistInSpace=t.findUserGroupItemGroups=t.findUserGroup=t.findMyAcceptedUserGroups=t.findMyAcceptedItemGroupUserMembers=t.getRecipientsCount=t.getUserRecipients=t.getGroupRecipients=t.doesUserReceiveItemGroupViaGroup=t.isUserLastAdmin=t.getDecipheredItemKey=t.isItemWithoutItemGroup=t.isItemGroupAccepted=t.getItemGroupPendingUserMember=t.decryptItemKey=t.getSharingUserPermission=t.getUserGroupPermission=t.getMyItemGroups=t.findItem=t.isUserGroupUserProposeSignatureValid=t.areUserGroupUsersProposeSignaturesValid=t.getDecryptedUserGroupKey=t.isUserGroupPersonalSignatureValid=t.isGroupSignatureValid=t.decryptUserGroupPrivateKey=t.getUserGroupPrivateKey=t.decryptGroupKey=t.getDecryptedItemGroupKeyFromUserGroupMember=t.getDecryptedItemGroupKeyFromUser=t.getItemGroupKey=t.findMyItemGroupUserGroupMember=t.findMyItemGroupUser=t.getItemGroupActiveUserGroupMembers=t.isLastActiveUserInItemGroupAndAdmin=t.userMemberIsAdmin=void 0;const n=r(16516),o=r(82366),a=r(36513),i=r(49551),s=r(19736),c=r(81438),u=r(71646),l=r(70252),d=r(16593),p=r(95458),f=r(93513),g=e=>["accepted","pending"].includes(e.status);function m(e,t){const{users:r}=e;return(r||[]).find((e=>e.userId===t))}function h(e,t,r){const n=(t||[]).filter((e=>(e.users||[]).map((e=>e.userId)).includes(r))).map((e=>e.groupId));return(e.groups||[]).filter((e=>"accepted"===e.status)).find((e=>n.includes(e.groupId)))}async function y(e,t){try{return await v(e.groupKey,t)}catch{return null}}async function S(e,t,r,n){const o=(t||[]).find((t=>t.groupId===e.groupId));if(!o)return null;try{const t=await E(o,r,n);return await v(e.groupKey,t)}catch{return null}}async function v(e,t){return(0,a.makeCryptoService)().asymmetricEncryption.decrypt(t,e)}async function E(e,t,r){const n=e.users.find((e=>e.userId===r)).groupKey,o=await v(n,t);return A(e.privateKey,o)}async function A(e,t){return(0,a.makeCryptoService)().symmetricEncryption.decryptAES256(t,e)}async function _(e,t,r,n){const i=f.encode(`${e}-accepted-${r}`);return(0,o.isAcceptSignatureValid)((0,a.makeCryptoService)(),t,n,i)}async function b(e,t){try{return await(0,a.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,f.encode(e.userId))}catch{return!1}}async function T(e,t){return(0,a.makeCryptoService)().symmetricEncryption.decryptAES256(t,e)}function I(e,t){const{itemGroups:r}=e,n=r.find((e=>(e.items||[]).some((e=>e.itemId===t))));return n?(n.groups||[]).filter((e=>!["revoked","refused"].includes(e.status))):[]}function w(e,t){const{itemGroups:r}=e,n=r.find((e=>(e.items||[]).some((e=>e.itemId===t))));return n?(n.users||[]).filter((e=>!["revoked","refused"].includes(e.status))):[]}function C(e,t,r){const n=t.items?.some((n=>{const o=(0,s.credentialSelector)(e,n.itemId)??(0,c.noteSelector)(e,n.itemId);return void 0===o?(function(e,t,r,n){try{const o=["[doesItemGroupExistInSpace] Undefined item found",`ItemGroup has ${e.items.length} items`];if(e.items.length>1){const a=e.items.filter((e=>e.itemId!==t.itemId)),i=a.reduce(((e,t)=>{const o=(0,s.credentialSelector)(r,t.itemId)??(0,c.noteSelector)(r,t.itemId);return o&&o.SpaceId===n?e+1:e}),0),u=a.length-i;o.push(`${i} other items in itemGroup are in the active space`),o.push(`${u} other items in itemGroup are not in the active space`)}(0,d.activeSpacesSelector)(r).some((e=>e&&e.teamId===n&&(0,p.isPremiumStatusSpaceQuarantined)(e)))&&o.push("Active space is quarantined"),null===t.itemKey&&o.push("Item Key is null"),void 0===t.itemKey&&o.push("Item Key is undefined"),""===t.itemKey&&o.push("Item Key is an empty string"),null===t.itemId&&o.push("Item ID is null"),void 0===t.itemId&&o.push("Item ID is undefined"),""===t.itemId&&o.push("Item ID is an empty string"),(0,l.sendExceptionLog)({error:new Error(o.join("\n"))})}catch(e){(0,l.sendExceptionLog)({error:e})}}(t,n,e,r),!0):o.SpaceId!==r}));return!n}t.userMemberIsAdmin=e=>"admin"===e.permission,t.isLastActiveUserInItemGroupAndAdmin=function(e,r){const{users:n,groups:o}=e,a=!o||0===o.filter(g).length,i=n&&1===n.filter(g).length&&n[0].userId===r&&(0,t.userMemberIsAdmin)(n[0]);return a&&i},t.getItemGroupActiveUserGroupMembers=function(e){return(e.groups||[]).filter(g)},t.findMyItemGroupUser=m,t.findMyItemGroupUserGroupMember=h,t.getItemGroupKey=async function(e,t,r,n){const o=m(e,n),a=h(e,t,n);return o||a?o?await y(o,r):await S(a,t,r,n):null},t.getDecryptedItemGroupKeyFromUser=y,t.getDecryptedItemGroupKeyFromUserGroupMember=S,t.decryptGroupKey=v,t.getUserGroupPrivateKey=E,t.decryptUserGroupPrivateKey=A,t.isGroupSignatureValid=_,t.isUserGroupPersonalSignatureValid=async function(e,t,r,n){try{return await _(e,t,r,n)}catch{return!1}},t.getDecryptedUserGroupKey=async function(e,t){try{return await v(e,t)}catch{return null}},t.areUserGroupUsersProposeSignaturesValid=async function(e,t){const r=(e||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>b(e,t)));return(await Promise.all(r)).every(Boolean)},t.isUserGroupUserProposeSignatureValid=b,t.findItem=function(e,t){const{credentials:r,notes:n}=e.getPersonalData(),o=[...r,...n];return(0,i.findDataModelObject)(t,o)},t.getMyItemGroups=function(e,t){const r=e.userGroups.filter((e=>e.users.some((e=>e.userId===t&&"accepted"===e.status)))),n=new Set(r.map((e=>e.groupId)));return e.itemGroups.filter((e=>{const r=e.users&&e.users.some((e=>e.userId===t)),o=e.groups&&e.groups.some((e=>n.has(e.groupId)));return r||o}))},t.getUserGroupPermission=function(e,t){return(e.groups||[]).find((e=>e.groupId===t))?.permission},t.getSharingUserPermission=function(e,t){return(e.users||[]).find((e=>e.userId===t))?.permission},t.decryptItemKey=T,t.getItemGroupPendingUserMember=function(e,t){return(e.users||[]).find((e=>e.userId===t&&"pending"===e.status))},t.isItemGroupAccepted=function(e,t,r){return!!function(e,t){return(e.users||[]).some((e=>e.userId===t&&"accepted"===e.status&&Boolean(e.acceptSignature)))}(e,r)||function(e,t,r){const n=(e.groups||[]).filter((e=>"accepted"===e.status&&e.acceptSignature)).map((e=>e.groupId)),o=t.filter((e=>n.includes(e.groupId)));return o.some((e=>(e.users||[]).some((e=>e.userId===r&&"accepted"===e.status&&Boolean(e.acceptSignature)))))}(e,t,r)},t.isItemWithoutItemGroup=function(e,t){return!(0,u.findItemItemGroup)(e,t)},t.getDecipheredItemKey=async function(e,t,r){const n=await v(e,r);try{return await T(t,n)}catch(e){return}},t.isUserLastAdmin=function(e,t){const r=function(e){return(e.users||[]).filter((({permission:e,rsaStatus:t,status:r})=>"admin"===e&&"sharingKeys"===t&&"accepted"===r))}(e),n=function(e){return(e.groups||[]).filter((({permission:e,status:t})=>"admin"===e&&"accepted"===t))}(e),o=r.some((e=>e.userId===t)),a=r.filter((({userId:e})=>t!==e)),i=n.length+a.length>0;return o&&!i},t.doesUserReceiveItemGroupViaGroup=function(e,t,r){const n=t.filter((({users:e})=>(e||[]).some((e=>e.userId===r&&"accepted"===e.status)))).map((({groupId:e})=>e));return(e.groups||[]).some((({groupId:e,status:t})=>n.includes(e)&&"accepted"===t))},t.getGroupRecipients=I,t.getUserRecipients=w,t.getRecipientsCount=function(e,t){return w(e,t).length+I(e,t).length},t.findMyAcceptedItemGroupUserMembers=function(e,t){const r=e.map((e=>e.users||[])),o=(0,n.unnest)(r);return(0,n.uniqBy)((e=>e.userId),o).filter((e=>e.alias!==t))},t.findMyAcceptedUserGroups=function(e,t){return e.filter((e=>"users"===e.type&&(e.users||[]).some((e=>e.userId===t&&"accepted"===e.status))))},t.findUserGroup=function(e,t){return e.find((e=>e.groupId===t))},t.findUserGroupItemGroups=function(e,t){return t.filter((t=>(t.groups||[]).some((t=>t.groupId===e&&"accepted"===t.status))))},t.doesItemGroupExistInSpace=C,t.getSharingUsersFromItemGroups=(e,t,r,n)=>{const o=r.reduce(((r,o)=>null===n||C(e,o,n)?((0,u.getItemGroupActiveUsers)(o).forEach((e=>{if(e.userId!==t)if(r.has(e.userId)){const t=r.get(e.userId);r.set(e.userId,{...e,itemCount:t.itemCount+o.items.length})}else r.set(e.userId,{...e,itemCount:o.items.length})})),r):r),new Map);return Array.from(o.values())}},78096:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareOperations=t.revokeRemoteControlledSharedItems=void 0;const n=r(16516),o=r(10203),a=r(17825),i=r(70252),s=r(90622),c=r(16593),u=r(11700),l=r(57989),d=r(68979),p=r(57779),f=r(84511),g=r(52102),m=r(58107),h=r(71646),y=r(95623),S=(0,y.withTag)(["Sharing","RemoteControl"]),v=S(y.logError),E=S(y.logInfo),A=S(y.logVerbose),_=e=>t=>t._tag===e,b=e=>{const t=e.filter(_("revoke_all_itemgroup_members")).length,r=e.filter(_("refuse_pending_itemgroup")).length,n=e.filter(_("revoke_my_itemgroup_membership")).length;return{operationsCount:{all:e.length,revokeAllItemGroupMembers:t,refusePendingItemGroup:r,revokeMyItemGroupMembership:n}}};function T(e,t,r,n,o,a){const i=function(e,t,r){return r.reduce(((r,n)=>{const o=(0,m.findMyItemGroupUser)(n,t);if(!o)return r;const a=function(e,t,r){return(0,m.isUserLastAdmin)(r,t.userId)?function(e,t,r){const{groupId:n,revision:o}=r,a=(0,h.getItemGroupActiveUsers)(r).filter((e=>e.userId!==t.userId)).map((e=>e.userId)),i=(0,m.getItemGroupActiveUserGroupMembers)(r).map((e=>e.groupId)),s=e.makeRevokeItemGroupMembers(n,o,a,i,null),c=[...a.map((e=>({type:"user",alias:e}))),...i.map((e=>({type:"userGroup",groupId:e})))];return{_tag:"revoke_all_itemgroup_members",action:s,recipients:c}}(e,t,r):function(e,t,r){const{groupId:n,revision:o}=r,a=e.makeRefuseItemGroupEvent(n,o,null,null),i={type:"user",alias:t.alias},s=(0,m.userMemberIsAdmin)(t)?r.items.map((e=>e.itemId)):[];return{_tag:"revoke_my_itemgroup_membership",action:a,recipient:i,itemsToDuplicate:s}}(e,t,r)}(e,o,n);return r.concat(a)}),[])}(e,n,o.map((e=>(0,h.findItemItemGroup)(e,r))).filter(Boolean)),s=function(e,t){return t.filter((t=>t.items.some((t=>{if(!(0,u.isItemForceCategorizable)(t))return!1;const r=e.map((e=>e.details)),n=(0,u.pickBestTeamSpaceForForcedCategorization)(r,t,[]);return Boolean(n)&&n.domainsMatchResult===d.TeamDomainsMatchResult.SomeFieldsMatch}))))}(t,a),c=function(e,t,r,n){return n.reduce(((n,{itemGroupId:o})=>{const a=t.find((e=>e.groupId===o));if(!a)return n;const i=(0,m.findMyItemGroupUser)(a,r);if(!i)return n;const s=function(e,t,r){const{groupId:n,revision:o}=r;return{_tag:"refuse_pending_itemgroup",action:e.makeRefuseItemGroupEvent(n,o,null,null),recipient:{type:"user",alias:t.alias}}}(e,i,a);return n.concat(s)}),[])}(e,r,n,s);return[...i,...c]}async function I(e,t,r,n){const{action:o,recipient:a}=n,{itemGroups:i}=await e.itemGroup.refuseItemGroup(t,r,o);return i&&1===i.length&&i[0]?[{actionType:"refuseItemGroup",itemGroup:i[0],recipient:a}]:[]}t.revokeRemoteControlledSharedItems=async function(e,t,r,u,d){E({message:"Starting remote control process"});try{const{hiddenItemIds:m}=d,h=t.getState(),y=(0,c.userLoginSelector)(h),S=(0,l.spacesWithForcedCategorizationEnabledSelector)(h),{itemGroups:v}=(0,g.sharingDataSelector)(h),_=T(u,S,v,y,m,(0,f.pendingItemGroupsSelector)(h));A({message:"Remote control operations computed",details:b(_)}),await async function(e,t,r,o){const c=e.getState(),u=(0,s.ukiSelector)(c),l=o.map((n=>async function(e,t,r,n,o){try{switch(o._tag){case"refuse_pending_itemgroup":return await I(t,r,n,o);case"revoke_my_itemgroup_membership":{await I(t,r,n,o);const{itemsToDuplicate:a}=o;for(const t of a)await(0,p.duplicateNoteOrCredential)(e,t);break}case"revoke_all_itemgroup_members":return await async function(e,t,r,n){const{action:o,recipients:a}=n,{itemGroups:i}=await e.itemGroup.revokeItemGroupMembers(t,r,o);return(i&&1===i.length?i[0]:null)?a.map((e=>({actionType:"revokeItemGroupMembers",itemGroup:i[0],recipient:e}))):[]}(t,r,n,o);default:(0,a.assertUnreachable)(o)}}catch(e){const t=new Error(`[SharingRemoteControl] - sendRequestForOperation: ${e}`);(0,i.sendExceptionLog)({error:t})}}(e,t,r,u,n)));(0,n.unnest)(await Promise.all(l))}(t,r,y,_),async function(e,{deletedItemIds:t,updatedItemIds:r},n){const a=t.length>0||r.length>0,i=n.length>0;(a||i)&&e.getInstance().user.requestNewSync(o.Trigger.ChangeTeam)}(e,d,_),E({message:"Remote control process done"})}catch(e){const t=new Error(`[SharingRemoteControl] - revokeRemoteControlledSharedItems: ${e}`);(0,i.sendExceptionLog)({error:t}),v({message:"Remote control process failed",details:{error:`${e}`}})}},t.prepareOperations=T},84163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSingleUserItemGroup=t.resendPublicKeyInvite=t.updateSharingData=t.getPendingItemGroup=t.createOrUpdateItemEffect=t.deleteItemEffect=void 0;const n=r(16516),o=r(53576),a=r(36513),i=r(48313),s=r(95623),c=r(76496),u=r(45291),l=r(28096),d=r(34433),p=r(36884),f=r(63698),g=r(89016),m=r(70252),h=r(88542),y=r(72079),S=r(57779),v=r(76496),E=r(50141),A=r(58107),_=r(49551),b=r(39373),T=r(56915),I=r(12362),w=r(86691),C=r(73566),O=r(56915),D=r(85225),P=r(82366);function N(e,t,r){const o=(0,n.pick)(e,r);return(0,n.mergeRight)(t,o)}t.deleteItemEffect=async function(e,t){let r=null;const n=(0,I.getInstance)(),o=(0,w.getInstance)();try{const{itemToDelete:a}=(0,c.findPersonalDataItemToDelete)(e,t);if(!a)return!0;r=o.lockTopic("healthUpdates");const i={credentialIds:[a.Id],type:"credentialUpdates"};await n.add("healthUpdates",i);const s=(0,u.removePersonalItem)(a.kwType,a.Id,null);return e.dispatch(s),o.releaseTopic("healthUpdates",r),!0}catch(e){return s.default.log(`[SharingSync]: deleteItemEffect: ${e}`),r&&o.releaseTopic("healthUpdates",r),!1}},t.createOrUpdateItemEffect=async function(e,t,r){let n=null,c=null;const u=(0,I.getInstance)(),l=(0,w.getInstance)();try{const s=await(0,a.makeCryptoService)().symmetricEncryption.decryptSharingItem(r,t.content),{Id:d}=s,p=e.getPersonalData(),f=(0,O.platformInfoSelector)(e.getState());if((0,o.isCredential)(s)){n=l.lockTopic("healthUpdates"),c=l.lockTopic("iconsUpdates");const t=d?(0,_.findDataModelObject)(d,p.credentials||[]):null,r=t?N(h.sharedFields,t,s):s,a={credentialIds:[r.Id],type:"credentialUpdates"};await u.add("healthUpdates",a);const g={credentialIds:[r.Id],type:"credentialUpdates"};await u.add("iconsUpdates",g);const m=(0,C.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:p,change:(0,D.makeUpdateChange)(r),userLogin:e.getUserLogin(),platformInfo:f}),y=(0,i.savePersonalDataItem)(r,o.DataModelType.KWAuthentifiant,m);e.dispatch(y),l.releaseTopic("iconsUpdates",c),l.releaseTopic("healthUpdates",n)}else if((0,o.isNote)(s)){const t=d?(0,_.findDataModelObject)(d,p.notes||[]):null,r=t?N(y.sharedFields,t,s):s,n=(0,i.savePersonalDataItem)(r,o.DataModelType.KWSecureNote);e.dispatch(n)}return!0}catch(e){return s.default.log(`[SharingSync] - createOrUpdateItemEffect: ${e}`),n&&l.releaseTopic("healthUpdates",n),c&&l.releaseTopic("iconsUpdates",c),!1}},t.getPendingItemGroup=async function(e,t,r,n,i,s){let c;if(e.content){const r=(0,a.makeCryptoService)().symmetricEncryption;c=await r.decryptSharingItem(t,e.content)}else c=s[e.itemId];const u=(0,o.isCredential)(c),l=(0,o.isNote)(c);if(!u&&!l)throw new Error("item is neither credential nor note");let d=c;return u&&(d=(0,b.fixCredentialWithMissingTitle)(c)),{itemGroupId:r,items:[d],permission:i,referrer:n,seen:!1}},t.updateSharingData=function(e,t){const r=(0,d.sharingDataUpdated)(t);e.dispatch(r),(0,l.reportDataUpdate)(e)},t.resendPublicKeyInvite=async function(e,t,r){const n="[SharingEffectsService] - resendPublicKeyInvite";try{const o=e.getUserLogin(),i=(0,T.ukiSelector)(e.getState()),{groupId:s,revision:c}=r,{privateKey:u}=e.getUserSession().keyPair,l=(0,a.makeCryptoService)(),d=(0,g.makeWSService)(),{findUsersByAliases:h}=(0,E.makeWSUserAlias)(),{makeUserUpdate:y,makeUpdateItemGroupMembers:S}=(0,p.makeItemGroupService)(d,l),{updateItemGroupMembers:v}=(0,f.makeItemGroupWS)(),A=JSON.stringify([t.userId]),_=(await h({login:o,uki:i,aliases:A}))[t.userId];if(!_){const e=`${n}: couldn't find the user by alias, aborting.`;return void(0,m.sendExceptionLog)({message:e})}const b=(r.users||[]).find((e=>e.userId===o));if(!b){const e=`${n}: couldn't find myself in "itemGroup.users", aborting.`;return void(0,m.sendExceptionLog)({message:e})}const I=await l.asymmetricEncryption.decrypt(u,b.groupKey),{publicKey:w}=_,{permission:C,userId:O}=t,D=await y(O,C,{rawItemGroupKey:I,userPublicKey:w}),N=S(s,c,[D],null),R=await v(o,i,N);if(R&&R.itemGroups&&1===R.itemGroups.length){const{userGroups:t}=e.getSharingData();await(0,P.validateItemGroupResponse)("[SharingSyncJobsService] - resendPublicKeyInvite",l,R,w,u,I,o,[D],t,!0)}}catch(e){const t=new Error(`${n}: ${e}`);(0,m.sendExceptionLog)({error:t})}},t.deleteSingleUserItemGroup=async function({storeService:e,wsService:t,eventLoggerService:r},n){const{login:o}=e.getAccountInfo(),i=(0,T.ukiSelector)(e.getState()),{keyPair:{privateKey:s}}=e.getUserSession(),{groupId:c,revision:u}=n,l="[SharingEffectsService] - deleteSingleUserItemGroup",d=(0,a.makeCryptoService)(),{deleteItemGroup:f,makeDeleteItemGroupEvent:g}=(0,p.makeItemGroupService)(t,d);if(!(0,A.isLastActiveUserInItemGroupAndAdmin)(n,o))throw new Error(`${l}: I'm not alone in the group, aborting.`);if(!n.items||0===n.items.length)return!0;const h=(n.items||[]).map((({itemId:e})=>e)),y={};for(const t of h){const r=await(0,S.duplicateNoteOrCredential)(e,t);y[t]=r}try{const n={login:o,uki:i,privateKey:s},a=await g(c,u);return await f(n,a),Object.keys(y).filter((e=>y[e])).forEach((n=>{(0,v.deletePersonalDataItem)({storeService:e,wsService:t,eventLoggerService:r},n,{ignoreSharing:!0})})),!0}catch(n){const o=new Error(`${l}: ${n}`);return(0,m.sendExceptionLog)({error:o}),Object.keys(y).map((e=>y[e])).filter(Boolean).forEach((n=>(0,v.deletePersonalDataItem)({storeService:e,wsService:t,eventLoggerService:r},n))),!1}}},78118:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySharing2Summary=t.getEmptySharingData=t.getEmptyGetSharingParams=t.getEmptyOperations=t.initSharingSyncFromStorage=t.putSharingSyncBackInStorage=t.updateSharingDataFromSync=t.applyOperationsToSharingData=t.runOperationsEffects=t.setMissingItemKeys=t.revokeUsersFromInvalidItemGroups=t.shouldRunAutoRevoke=t.asyncFilterItemGroups=t.filterOutInvalidOperations=t.getSharing=t.setGetSharingParams=t.tagConfirmableOperations=t.setOperations=t.sanitizeData=t.OperationType=t.syncSharing=void 0;const n=r(16516),o=r(53576),a=r(10203),i=r(84827),s=r(47683),c=r(58107),u=r(71646),l=r(84163),d=r(95623),p=r(70252),f=r(17825),g=r(58107),m=r(56915),h=r(32663),y=r(3735),S=r(88205),v=r(90503),E=!1;function A(e,t){return E?(...r)=>(console.time(e),t(...r).then((t=>(d.default.warn(`Step "${e}" returned:`,t),console.timeEnd(e),t)))):t}var _;async function b(e){const{sharingData:{items:t,itemGroups:r,userGroups:n},sharing2Summary:{items:o,itemGroups:a,userGroups:i}}=e;return{...e,sharingData:{items:T(t,"sharingData.items"),itemGroups:T(r,"sharingData.itemGroups"),userGroups:T(n,"sharingData.userGroups")},sharing2Summary:{items:T(o,"sharing2Summary.items"),itemGroups:T(a,"sharing2Summary.itemGroups"),userGroups:T(i,"sharing2Summary.userGroups")}}}function T(e,t,r){const n=function(e,t){return r=>{if(e(r))return!0;const n=`[SharingSync] - sanitizeList: found invalid element "${r}" in "${t}", filtering it out.`;return(0,p.sendExceptionLog)({message:n}),!1}}(r||Boolean,t);return(e||[]).filter(n)}async function I(e){const{sharingData:t,personalDataItemIds:r}=e,n=w(t.items,e.sharing2Summary.items,"itemId","timestamp").map((e=>e.type===_.Create&&r.includes(e.id)?{...e,skipPersonalDataItemCreation:!0}:e)),o=w(t.itemGroups,e.sharing2Summary.itemGroups,"groupId","revision"),a=w(t.userGroups,e.sharing2Summary.userGroups,"groupId","revision");return{...e,operations:{items:n,itemGroups:o,userGroups:a}}}function w(e,t,r,n){const{elementsToCreate:o}=function(e,t,r){const n=e.map((e=>e[r])),o=t.map((e=>e.id)),a=o.filter((e=>!n.includes(e)));return{elementsToCreate:a}}(e,t,r),{elementsToUpdate:a,elementsToDelete:i}=function(e,t,r,n){const o=t.map((e=>e.id));return e.reduce(((e,a)=>{const i=o.indexOf(a[r]);return i<0?{...e,elementsToDelete:[...e.elementsToDelete,a[r]]}:t[i][n]>a[n]?{...e,elementsToUpdate:[...e.elementsToUpdate,a[r]]}:e}),{elementsToUpdate:[],elementsToDelete:[]})}(e,t,r,n);return[].concat(o.map((e=>({id:e,type:_.Create})))).concat(a.map((e=>({id:e,type:_.Update})))).concat(i.map((e=>({id:e,type:_.Delete}))))}async function C(e,t){const{operations:{items:r},loadedElements:{itemGroups:o,userGroups:a},sharingData:{itemGroups:i,userGroups:s}}=e,u=(0,n.uniqBy)((e=>e.groupId),o.concat(i)),l=(0,n.uniqBy)((e=>e.groupId),a.concat(s)),d=r.map((e=>function(e,t,r,n){if(e.type!==_.Create)return e;const o=(r||[]).find((t=>(t.items||[]).map((e=>e.itemId)).includes(e.id)));if(!o)return e;const a=(0,c.isItemGroupAccepted)(o,n,t),i={...O(o,n,t),itemGroupId:o.groupId};return a?e:{...e,userConfirmationRequired:!0,confirmationItemGroup:i}}(e,t,u,l)));return{...e,operations:{...e.operations,items:d}}}function O(e,t,r){const n=(0,c.findMyItemGroupUser)(e,r),o=(0,c.findMyItemGroupUserGroupMember)(e,t,r);if(!n&&!o)return{referrer:null,permission:null};const{referrer:a,permission:i}=n||o;return{referrer:a,permission:i}}async function D(e){const t=t=>e.operations[t].filter((e=>[_.Create,_.Update].includes(e.type))).map((e=>e.id));return{...e,getSharingParams:{itemIds:t("items"),itemGroupIds:t("itemGroups"),userGroupIds:t("userGroups")}}}async function P(e,t,r,n){const o=Object.assign({},e.getSharingParams,{type:"getSharing",sharingVersion:4});if(!(o.itemIds.length||o.itemGroupIds.length||o.userGroupIds.length))return e;const{itemErrors:a,items:i,itemGroupErrors:s,itemGroups:c,userGroupErrors:u,userGroups:l}=await t.sharing.get(r,n,o);if(a&&a.length)throw new Error(`[SharingSync] - getSharing itemErrors: ${a[0].message}`);if(s&&s.length)throw new Error(`[SharingSync] - getSharing itemGroupErrors: ${s[0].message}`);if(u&&u.length)throw new Error(`[SharingSync] - getSharing userGroupErrors: ${u[0].message}`);return{...e,loadedElements:{items:T(i,"getSharing loaded items"),itemGroups:T(c,"getSharing loaded itemGroups"),userGroups:T(l,"getSharing loaded userGroups")}}}async function N(e,t,r,n,o){const{sharingData:{userGroups:a},loadedElements:{itemGroups:i,userGroups:c},operations:{itemGroups:u,userGroups:l}}=e,d=await(0,h.asyncFilter)(c,(e=>(0,s.isUserGroupValid)(e,t,r,n))),p=d.map((e=>e.groupId)),f=l.filter((e=>e.type===_.Delete||p.includes(e.id))),g=d.concat(a),{validItemGroups:m,itemKeys:y,invalidItemGroups:S}=await R(i,(e=>(0,s.validateItemGroup)(e,U(e,g),t,r,n))),v=m.map((e=>e.groupId)),E=u.filter((e=>e.type===_.Delete||v.includes(e.id)));return S&&S.length>0&&S.forEach((e=>{o?.(e.itemGroupId,e.error)})),{...e,itemKeys:y,operations:{...e.operations,userGroups:f,itemGroups:E},invalidItemGroups:S}}async function R(e,t){const r=await Promise.all(e.map(t));return{validItemGroups:e.filter(((e,t)=>r[t].isValid)),itemKeys:r.filter((e=>e.isValid)).reduce(((e,t)=>({...e,...t.itemKeys})),{}),invalidItemGroups:r.flatMap(((t,r)=>!1===t.isValid?[{itemGroupId:e[r].groupId,error:t.error}]:[]))}}function U(e,t){const r=(e.groups||[]).map((e=>e.groupId));return t.filter((e=>r.includes(e.groupId)))}function L(e,t){const r=e.getState(),n=(0,S.hasFeatureSelector)(r,"sharing_web_invalidSignatureAutoRevoke_prod"),o=t===a.Trigger.InitialLogin||t===a.Trigger.Login;return n&&o}async function M(e,t,r,n,o,i,c){if(!L(e,c))return r;const{sharingData:{userGroups:u},loadedElements:{itemGroups:l,userGroups:d},invalidItemGroups:p}=r,f=p.filter((e=>e.error===a.ErrorName.ItemGroupInvalidUserProposeSignature));if(0===f.length)return r;const g=(await(0,h.asyncFilter)(d,(e=>(0,s.isUserGroupValid)(e,n,o,i)))).concat(u),m=f.map((e=>l.find((({groupId:t})=>t===e.itemGroupId)))).filter((e=>void 0!==e&&(0,y.isUserItemGroupAdmin)(e,u,i)));if(0===m.length)return r;const S=m.flatMap((e=>e.users.filter((e=>"pending"===e.status&&e.userId!==i)).map((t=>({itemGroup:e,user:t}))))),v=(await Promise.all(S.map((async e=>{const t=await(0,s.getDecryptedItemGroupKey)(e.itemGroup,U(e.itemGroup,g),n,i);return await(0,s.isItemGroupUserProposeSignatureValid)(e.user,t)?void 0:e})))).filter((e=>void 0!==e)),E=await Promise.all(v.map((async({user:r,itemGroup:n})=>(await(0,y.revokeItemGroupMember)(e,t,n,{type:"user",alias:r.alias}),{user:r,itemGroup:n}))));return{...r,autoRevokedUsers:E}}async function k(e,t,r){const{loadedElements:n,sharingData:{itemGroups:o,userGroups:a},itemKeys:i}=e,s=n.items.filter((e=>(0,c.isItemWithoutItemGroup)(e.itemId,n.itemGroups))).reduce(((e,t)=>{const r=(0,u.findItemItemGroup)(t.itemId,o);return r?{...e,[t.itemId]:{itemGroup:r}}:e}),{}),l=Object.keys(s),d=l.map((e=>{const{itemGroup:n}=s[e];return(0,c.getItemGroupKey)(n,a,t,r).catch((()=>null))})),p=await Promise.all(d),f=l.reduce(((e,t,r)=>({...e,[t]:{...s[t],itemGroupKey:p[r]}})),{}),g=l.map((e=>{const{itemGroupKey:t,itemGroup:r}=f[e];if(!r)return Promise.resolve(null);const n=(r.items||[]).find((t=>t.itemId===e));return n?(0,c.decryptItemKey)(n.itemKey,t).catch((()=>null)):Promise.resolve(null)})),m=await Promise.all(g),h=l.reduce(((e,t,r)=>m[r]?{...e,[t]:m[r]}:e),{});return{...e,itemKeys:{...i,...h}}}async function B(e,{storeService:t,wsService:r,eventLoggerService:o,applicationModulesAccess:a}){const i=await async function(e,t,r){const{itemKeys:n,loadedElements:o,operations:{items:a}}=t,i=a.map((t=>async function(e,t,r,n){switch(r.type){case _.Delete:return await(0,l.deleteItemEffect)(e,r.id)?r:null;case _.Create:case _.Update:{if(r.skipPersonalDataItemCreation)return r;if(r.userConfirmationRequired)return null;const o=t.items.find((e=>e.itemId===r.id));if(!o)return null;const a=n[o.itemId];return a&&await(0,l.createOrUpdateItemEffect)(e,o,a)?r:null}}return(0,f.assertUnreachable)(r.type)}(e,o,t,n))),s=(await Promise.all(i)).filter((e=>!!e));try{if(r&&s.length>0&&e.getPersonalFeatures().features.ims_web_ph_mv3_dev){const{commands:e}=r.createClients().passwordHealth;e.recalculatePasswordHealth()}}catch(e){const t=new Error(`Password Health update - sharing: ${e}`);(0,p.sendExceptionLog)({error:t,code:v.ExceptionCriticality.WARNING})}return s}(t,e,a),s=await async function({storeService:e,wsService:t,eventLoggerService:r,applicationModulesAccess:o},a){const{operations:{itemGroups:i},loadedElements:{itemGroups:s,userGroups:u},sharingData:{userGroups:d}}=a,m=(0,n.uniqBy)((e=>e.groupId),u.concat(d)),h=i.map((n=>async function({storeService:e,wsService:t,eventLoggerService:r},n,o,a){const{type:i,id:s}=a,{login:u}=e.getAccountInfo();switch(i){case _.Delete:return a;case _.Create:case _.Update:{const i=n.find((e=>e.groupId===s));if(!i)return null;if((i.users||[]).filter((e=>"publicKey"===e.rsaStatus)).forEach((t=>(0,l.resendPublicKeyInvite)(e,t,i))),(0,g.isLastActiveUserInItemGroupAndAdmin)(i,u))return await(0,l.deleteSingleUserItemGroup)({storeService:e,wsService:t,eventLoggerService:r},i)?{...a,type:_.Delete}:null;if(!(0,c.isItemGroupAccepted)(i,o,u)){const t=(i.items||[]).map((async({itemId:t})=>{try{return await(0,l.deleteItemEffect)(e,t)}catch(e){return null}}));return await Promise.all(t),{...a,deleteSharingDataItems:!0}}return a}}return(0,f.assertUnreachable)(i)}({storeService:e,wsService:t,eventLoggerService:r},s,m,n))),y=(await Promise.all(h)).filter((e=>!!e));try{if(o&&y.length>0&&e.getPersonalFeatures().features.ims_web_ph_mv3_dev){const{commands:e}=o.createClients().passwordHealth;e.recalculatePasswordHealth()}}catch(e){const t=new Error(`Password Health update - sharing: ${e}`);(0,p.sendExceptionLog)({error:t,code:v.ExceptionCriticality.WARNING})}return y}({storeService:t,wsService:r,eventLoggerService:o,applicationModulesAccess:a},e);return{...e,operations:{...e.operations,items:i,itemGroups:s}}}async function F(e){const{sharingData:{items:t,itemGroups:r,userGroups:n},loadedElements:{items:o,itemGroups:a,userGroups:i},operations:{items:s,itemGroups:c,userGroups:u}}=e,l=x(o,t,s),d=x(a,r,c),p=x(i,n,u),f=c.filter((({deleteSharingDataItems:e})=>e)).reduce(((e,{id:t})=>{const r=a.find((e=>e.groupId===t));if(!r)return e;const n=(r.items||[]).map((({itemId:e})=>e));return[...e,...n]}),[]),g=l.filter((e=>!f.includes(e.itemId)));return{...e,sharingData:{items:g,itemGroups:d,userGroups:p}}}function x(e,t,r){return r.reduce(((t,r)=>function(e,t,r){switch(r.type){case _.Delete:return function(e,{id:t}){return e.filter((e=>G(e)!==t))}(t,r);case _.Create:return function(e,t,{id:r}){const n=e.find((e=>G(e)===r));return n?t.concat(n):t}(e,t,r);case _.Update:return function(e,t,{id:r}){const n=e.find((e=>G(e)===r));return n?t.map((e=>G(e)===r?n:e)):t}(e,t,r)}return(0,f.assertUnreachable)(r.type)}(e,t,r)),t)}function G(e){return"itemId"in e?e.itemId:function(e){return"groupId"in e}(e)?e.groupId:void 0}async function j(e,t){const{sharingData:r}=e;return(0,l.updateSharingData)(t,r),e}async function K(e,t,r){const{sharingSync:n}=t.getState().userSession;return r.getInstance().storeSharingSync(n),e}async function $(e,t,r){const n=r.getInstance(),o=await n.doesSharingSyncExist();let a=null;const s=()=>{a={pendingUserGroups:[],pendingItemGroups:[]},n.storeSharingSync(a)};o||s();try{a=await n.getSharingSync()}catch(e){s()}const{pendingItemGroups:c,pendingUserGroups:u}=a,l=(0,i.setAllPendingAction)(c,u);return t.dispatch(l),e}t.syncSharing=async function({storeService:e,wsService:t,localStorageService:r,eventLoggerService:a,applicationModulesAccess:s},u,f,g){try{const d=(0,m.ukiSelector)(e.getState()),p=e.getUserLogin(),{privateKey:h,publicKey:y}=e.getUserSession().keyPair,{credentials:S,notes:v}=e.getPersonalData(),E=e.getSharingData(),_=T(S,"PersonalData.credentials",o.isCredential),w=T(v,"PersonalData.notes",o.isNote),O=[..._,...w],R=O.map((e=>e.Id)),U=O.reduce(((e,t)=>(e[t.Id]=t,e)),{}),L={itemKeys:{},loadedElements:{items:[],itemGroups:[],userGroups:[]},sharing2Summary:u,sharingData:E,operations:{items:[],itemGroups:[],userGroups:[]},personalDataItemIds:R,pendingUserGroups:[],pendingItemGroups:[],invalidItemGroups:[],autoRevokedUsers:[]},x=await Promise.resolve(L).then(A("sanitizeData",b)).then(A("setOperations",I)).then(A("setGetSharingParams",D)).then(A("getSharing",(e=>P(e,t,p,d)))).then(A("filterOutInvalidOperations",(e=>N(e,h,y,p,f)))).then(A("revokeUsersFromInvalidItemGroups",(r=>M(e,t,r,h,y,p,g)))).then(A("setMissingItemKeys",(e=>k(e,h,p)))).then(A("tagConfirmableItemOperation",(e=>C(e,p)))).then(A("setPendingItemGroupsList",(e=>async function(e,t,r,o){const{loadedElements:{itemGroups:a,items:i},sharingData:{itemGroups:s,items:u},itemKeys:d}=e,p=(0,n.uniqBy)((e=>e.groupId),a.concat(s)),f=(0,n.uniqBy)((e=>e.itemId),i.concat(u)),g=p.reduce(((e,n)=>{const a=(0,c.getItemGroupPendingUserMember)(n,t);if(!a)return e;const i=async function(e,t,r,n,o,a){const{permission:i,referrer:s,groupKey:u}=t,d=(e.items||[]).map((async t=>{try{const{itemId:d}=t,p=o[d]||await(0,c.getDecipheredItemKey)(u,t.itemKey,r);if(!p)return null;const f=n.find((e=>e.itemId===d));return f?await(0,l.getPendingItemGroup)(f,p,e.groupId,s,i,a):null}catch(e){return null}}));return(await Promise.all(d)).filter(Boolean)}(n,a,r,f,d,o);return[i,...e]}),[]),m=(0,n.flatten)(await Promise.all(g));return{...e,pendingItemGroups:m}}(e,p,h,U)))).then(A("runOperationsEffects",(r=>B(r,{storeService:e,wsService:t,eventLoggerService:a,applicationModulesAccess:s})))).then(A("applyOperationsToSharingData",F)).then(A("setPendingUserGroupsList",(t=>async function(e,t,r){const{sharingData:{userGroups:n}}=e,o=t.getSpaceData().spaces.find((e=>"accepted"===e.details.status));if(!o)return{...e,pendingUserGroups:[]};const a=String(o.teamId),i=n.reduce(((e,t)=>{if(String(t.teamId)!==a)return e;const n=(t.users||[]).find((e=>e.userId===r&&"pending"===e.status));if(!n)return e;const{groupId:o,name:i}=t,{referrer:s,permission:c}=n;return[{groupId:o,name:i,referrer:s,permission:c,seen:!1},...e]}),[]);return{...e,pendingUserGroups:i}}(t,e,p)))).then(A("initSharingSyncFromStorage",(t=>$(t,e,r)))).then(A("updateStoreSharingSync",(t=>async function(e,t){const{pendingItemGroups:r,pendingUserGroups:n}=e,o=(0,i.updateAllPendingAction)(r,n);return t.dispatch(o),e}(t,e)))).then(A("putSharingSyncBackInStorage",(t=>K(t,e,r)))).then(A("updateSharingDataFromSync",(t=>j(t,e))));return x.sharingData}catch(t){const r=new Error(`[SharingSync] - syncSharing failed: ${t}`);return E&&d.default.error(r),(0,p.sendExceptionLog)({error:r}),e.getSharingData()}},function(e){e[e.Create=0]="Create",e[e.Update=1]="Update",e[e.Delete=2]="Delete"}(_=t.OperationType||(t.OperationType={})),t.sanitizeData=b,t.setOperations=I,t.tagConfirmableOperations=C,t.setGetSharingParams=D,t.getSharing=P,t.filterOutInvalidOperations=N,t.asyncFilterItemGroups=R,t.shouldRunAutoRevoke=L,t.revokeUsersFromInvalidItemGroups=M,t.setMissingItemKeys=k,t.runOperationsEffects=B,t.applyOperationsToSharingData=F,t.updateSharingDataFromSync=j,t.putSharingSyncBackInStorage=K,t.initSharingSyncFromStorage=$,t.getEmptyOperations=function(){return{items:[],itemGroups:[],userGroups:[]}},t.getEmptyGetSharingParams=function(){return{itemIds:[],itemGroupIds:[],userGroupIds:[]}},t.getEmptySharingData=function(){return{items:[],itemGroups:[],userGroups:[]}},t.getEmptySharing2Summary=function(){return{items:[],itemGroups:[],userGroups:[]}}},3735:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handlePendingItemGroupsResponse=t.handlePendingUserGroupsResponse=t.sendPendingExceptionLog=t.updateSharingPermission=t.revokeItemGroupMember=t.isUserItemGroupAdmin=t.shareUnsharedItem=t.shareAlreadySharedItem=void 0;const n=r(16516),o=r(53576),a=r(36884),i=r(70206),s=r(10294),c=r(63698),u=r(52931),l=r(50141),d=r(78320),p=r(36513),f=r(36513),g=r(70252),m=r(89016),h=r(58107),y=r(82366),S=r(17825),v=r(56915),E=r(72678),A=r(84511),{Accept:_,Refuse:b}=o.SharingResponseStatus,T=/[<>]/g,I=e=>e.trim().toLowerCase().replace(T,"");function w(e,t,r){const n=`${e.toLowerCase()}Pending${t}`,o=new Error(`[Sharing] - ${n}: ${r}`);(0,g.sendExceptionLog)({error:o})}t.shareAlreadySharedItem=async function(e,t,r,n,i){try{const u=e.getUserLogin(),d=e.getState(),f=(0,v.ukiSelector)(d),{privateKey:g}=e.getUserSession().keyPair,{userGroups:m}=e.getSharingData(),S=m.filter(Boolean),{groupId:E,revision:A}=r,{credentials:_,notes:b}=e.getPersonalData(),T=[..._,...b],w=await(0,p.makeCryptoService)(),{makeInviteItemGroupMembers:C,makeUserGroupInvite:O,makeUserUpload:D}=(0,a.makeItemGroupService)(t,w),{findUsersByAliases:P}=(0,l.makeWSUserAlias)(),{makeItemForEmailing:N}=(0,s.makeItemService)(),{inviteItemGroupMembers:R}=(0,c.makeItemGroupWS)(),U=await(0,h.getItemGroupKey)(r,S,g,u);if(!U)throw new Error("Couldn't get itemGroupKey, aborting.");const L=i.filter(o.isUserRecipient).map((({alias:e})=>I(e))),M=JSON.stringify(L),k=await P({login:u,uki:f,aliases:M}),B=L.map((e=>D(e,k[e],E,n,U))),F=await Promise.all(B),x=(r.items||[]).map((({itemId:e})=>e)),G=T.filter((e=>x.includes(e.Id))),j=G.map(N),K=i.filter(o.isGroupRecipient).map((e=>e.groupId)),$=S.filter((({groupId:e})=>K.includes(e))).map((e=>O(e,n,U,g,u,E))),V=await Promise.all($),H=(0,y.createAuditLogDetails)(d,G[0]),W=C(E,A,F,V,j,H),z=await R(u,f,W,H);if(z&&z.itemGroups&&1===z.itemGroups.length){const{publicKey:t}=e.getUserSession().keyPair;await(0,y.validateItemGroupResponse)("[SharingUserActionsService] - shareAlreadySharedItem",w,z,t,g,U,u,F,S)}}catch(e){throw e.message=`[SharingUserActionsService] - shareAlreadySharedItem: ${e.message}`,e}},t.shareUnsharedItem=async function(e,t,r,n,i){try{const u=e.getUserLogin(),g=e.getState(),m=(0,v.ukiSelector)(g),{privateKey:h,publicKey:S}=e.getUserSession().keyPair,{userGroups:E}=e.getSharingData(),A=await(0,p.makeCryptoService)(),{makeCreateItemGroupEvent:_,makeUserGroupInvite:b,makeUserUpload:T}=(0,a.makeItemGroupService)(t,A),{makeItemUpload:w,makeItemForEmailing:C}=(0,s.makeItemService)(),{createItemGroup:O}=(0,c.makeItemGroupWS)(),{findUsersByAliases:D}=(0,l.makeWSUserAlias)(),P=(0,d.generateItemUuid)(),N=await A.symmetricEncryption.generateNewAESKey(),R=i.filter(o.isUserRecipient).map((({alias:e})=>I(e))),U=JSON.stringify(R),L=await D({login:u,uki:m,aliases:U}),M=T(u,{login:u,publicKey:S,privateKey:h},P,"admin",N),k=R.map((e=>T(e,L[e],P,n,N))).concat(M),B=await Promise.all(k),F=i.filter(o.isGroupRecipient).map((e=>e.groupId)),x=E.filter((({groupId:e})=>F.includes(e))).map((e=>b(e,n,N,h,u,P))),G=await Promise.all(x),{Id:j}=r,K=(0,f.makeSymmetricEncryption)(),$=await A.symmetricEncryption.generateNewAESKey(),V=await A.symmetricEncryption.encryptAES256(N,$),H=await K.encryptSharingItem($,r),W=await w(j,V,H),z=C(r),q=(0,y.createAuditLogDetails)(g,r),Y=_(P,B,G,[W],[z],q),Q=await O(u,m,Y);Q&&Q.itemGroups&&1===Q.itemGroups.length&&await(0,y.validateItemGroupResponse)("[SharingUserActionsService] - shareUnsharedItem",A,Q,S,h,N,u,B,E)}catch(e){throw e.message=`[SharingUserActionsService] - shareUnsharedItem: ${e.message}`,e}},t.isUserItemGroupAdmin=function(e,t,r){const n=(e.users||[]).some((({userId:e,permission:t})=>e===r&&"admin"===t)),o=(t||[]).filter((e=>(e.users||[]).map((({userId:e})=>e)).includes(r))).map((({groupId:e})=>e)),a=(e.groups||[]).filter((({groupId:e})=>o.includes(e))).some((({permission:e})=>"admin"===e));return n||a},t.revokeItemGroupMember=async function(e,t,r,n,o="manual"){const i=await(0,p.makeCryptoService)(),{groupId:s,revision:c}=r,u=e.getState(),l=(0,v.ukiSelector)(u),d=e.getUserLogin(),{makeRevokeItemGroupMembers:f}=(0,a.makeItemGroupService)(t,i),g="user"===n.type?[n.alias]:[],m="userGroup"===n.type?[n.groupId]:[],{credentials:h,notes:S}=(0,E.personalDataSelector)(u),A=[...h,...S],_=(r.items||[]).map((({itemId:e})=>e)),b=A.filter((e=>_.includes(e.Id))),T=f(s,c,g,m,(0,y.createAuditLogDetails)(u,b[0]),o);await t.itemGroup.revokeItemGroupMembers(d,l,T)},t.updateSharingPermission=async function(e,t,r,n,o){const i=e.getUserLogin(),s=(0,v.ukiSelector)(e.getState()),c=await(0,p.makeCryptoService)(),{makeUserGroupUpdate:u,makeUserUpdate:l,makeUpdateItemGroupMembers:d}=(0,a.makeItemGroupService)(t,c),{groupId:f,revision:g}=r,m=d(f,g,"user"===n.type?[await l(n.alias,o)]:[],"userGroup"===n.type?[await u(n.groupId,o)]:[]);await t.itemGroup.updateItemGroupMembers(i,s,m)},t.sendPendingExceptionLog=w,t.handlePendingUserGroupsResponse=async function(e,t,r){const a=(0,p.makeCryptoService)(),s=(0,m.makeWSService)(),{makeAcceptUserGroupEvent:c,makeRefuseUserGroupEvent:l}=(0,i.makeUserGroupService)(s,a),{accept:d,refuse:f}=(0,u.makeUserGroupWS)(),g=(0,v.ukiSelector)(e.getState()),h=e.getUserLogin(),{keyPair:{privateKey:y}}=e.getUserSession(),{userGroups:E}=e.getSharingData(),A=t.map((async function(e){try{const t=E.find((t=>t.groupId===e));if(!t)throw new Error(`could not find userGroup to ${o.SharingResponseStatus[r]} in sharingData`);switch(r){case _:await async function(e){const t=await c({login:h,uki:g,privateKey:y},e);return await d(h,g,t)}(t);break;case b:await async function(e){const{revision:t}=e,r=await l(e.groupId,t);return await f(h,g,r)}(t);break;default:(0,S.assertUnreachable)(r)}return{userGroupId:e,success:!0}}catch(t){return{userGroupId:e,success:!1,error:t}}})),T=await Promise.all(A),[I,C]=(0,n.partition)((({success:e})=>Boolean(e)),T);return C.forEach((({error:e})=>w(o.SharingResponseStatus[r],"UserGroup",e))),{successes:I.map((e=>e.userGroupId)),failures:C.map((e=>e.userGroupId))}},t.handlePendingItemGroupsResponse=async function(e,t,r){const i=(0,p.makeCryptoService)(),s=(0,m.makeWSService)(),{makeAcceptItemGroupEvent:u,makeRefuseItemGroupEvent:l}=(0,a.makeItemGroupService)(s,i),{acceptItemGroup:d,refuseItemGroup:f}=(0,c.makeItemGroupWS)(),g=e.getState(),E=(0,v.ukiSelector)(g),T=(0,A.pendingItemGroupsSharedItemContentsSelector)(g),I=e.getUserLogin(),{keyPair:{privateKey:C}}=e.getUserSession(),{itemGroups:O,userGroups:D}=e.getSharingData(),P=t.map((({itemGroupId:e,itemsForEmailing:t})=>async function(e,t){try{const n=O.find((t=>t.groupId===e));if(!n)throw new Error(`could not find itemGroup to ${o.SharingResponseStatus[r]} in sharingData`);const a=T.find((e=>e.Id===n.items[0].itemId)),s=(0,y.createAuditLogDetails)(g,a);switch(r){case _:await async function(e,t,r){const{groupId:n,revision:o}=e,a=await(0,h.getItemGroupKey)(e,D,C,I),s=await(0,y.generateAcceptSignature)(i,C,n,a),c=u(s,n,o,t,r);return await d(I,E,c)}(n,t,s);break;case b:await async function(e,t,r){const{groupId:n,revision:o}=e,a=l(n,o,t,r);return await f(I,E,a)}(n,t,s);break;default:(0,S.assertUnreachable)(r)}return{itemGroupId:e,success:!0}}catch(t){return{itemGroupId:e,success:!1,error:t}}}(e,t))),N=await Promise.all(P),[R,U]=(0,n.partition)((({success:e})=>Boolean(e)),N);return U.forEach((({error:e})=>w(o.SharingResponseStatus[r],"ItemGroup",e))),{successes:R.map((e=>e.itemGroupId)),failures:U.map((e=>e.itemGroupId))}}},47683:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUserGroupValid=t.areItemGroupItemKeysValid=t.isItemGroupGroupMemberProposeSignatureValid=t.areItemGroupGroupMembersProposeSignaturesValid=t.isItemGroupUserProposeSignatureValid=t.areItemGroupUsersProposeSignaturesValid=t.isItemGroupUserGroupMemberValid=t.isItemGroupUserValid=t.getDecryptedItemGroupKey=t.validateItemGroup=void 0;const n=r(10203),o=r(36513),a=r(95623),i=r(58107),s=r(93513),c=!1;async function u(e,t,r,n){try{const{status:a,acceptSignature:s,groupKey:c}=t;if("accepted"!==a)return!0;const u=await(0,o.makeCryptoService)().asymmetricEncryption.decrypt(r,c);return await(0,i.isGroupSignatureValid)(e,s,u,n)}catch(e){return c&&a.default.log(`isGroupSignatureValid error: ${e}`),!1}}async function l(e,t,r,n,s){try{const{status:a,acceptSignature:c,groupKey:u,groupId:l}=t;if("accepted"!==a)return!0;const d=(r||[]).find((e=>e.groupId===l));if(!d)return!1;const{publicKey:p}=d,f=await(0,i.getUserGroupPrivateKey)(d,n,s);if(!f)return!1;const g=await(0,o.makeCryptoService)().asymmetricEncryption.decrypt(f,u);return await(0,i.isGroupSignatureValid)(e,c,g,p)}catch(e){return c&&a.default.log(`isItemGroupUserGroupMemberValid error: ${e}`),!1}}async function d(e,t){const r=(e||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>p(e,t)));return(await Promise.all(r)).every(Boolean)}async function p(e,t){try{return await(0,o.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,s.encode(e.userId))}catch(e){return c&&a.default.warn(`[SharingValidationService] - isItemGroupUserProposeSignatureValid: ${e}`),!1}}async function f(e,t){const r=(e||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>g(e,t)));return(await Promise.all(r)).every(Boolean)}async function g(e,t){try{return await(0,o.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,s.encode(e.groupId))}catch{return!1}}async function m(e,t){const r=(e||[]).map((e=>async function(e,t){try{const{itemKey:r}=e;return await(0,i.decryptItemKey)(r,t)}catch{return!1}}(e,t))),n=await Promise.all(r);return!!n.every(Boolean)&&n.reduce(((t,r,n)=>({...t,[e[n].itemId]:r})),{})}t.validateItemGroup=async function(e,t,r,o,s){const p=e.groupId,g=(0,i.findMyItemGroupUser)(e,s),h=(0,i.findMyItemGroupUserGroupMember)(e,t,s);if(!g&&!h)return{isValid:!1,error:n.ErrorName.ItemGroupNoAccess};const y=g?await(0,i.getDecryptedItemGroupKeyFromUser)(g,r):await(0,i.getDecryptedItemGroupKeyFromUserGroupMember)(h,t,r,s);if(c&&a.default.log("ITEM_GROUP_KEY",!!y),!y)return{isValid:!1,error:n.ErrorName.ItemGroupInvalidKey};const S=!g||await u(p,g,r,o);if(c&&a.default.log("ITEM_GROUP_USER_VALID",S),!S)return{isValid:!1,error:n.ErrorName.ItemGroupInvalidUserAcceptSignature};const v=!h||await l(p,h,t,r,s);if(c&&a.default.log("ITEM_GROUP_USER_GROUP_VALID",v),!v)return{isValid:!1,error:n.ErrorName.ItemGroupInvalidGroupAcceptSignature};const E=await d(e.users,y);if(c&&a.default.log("USERS_PROPOSE_SIGNATURES_VALID",E),!E)return{isValid:!1,error:n.ErrorName.ItemGroupInvalidUserProposeSignature};const A=await f(e.groups,y);if(c&&a.default.log("GROUP_MEMBERS_PROPOSE_SIGNATURES_VALID",A),!A)return{isValid:!1,error:n.ErrorName.ItemGroupInvalidGroupProposeSignature};const _=await m(e.items||[],y);return c&&a.default.log("ITEM_GROUP_ITEM_KEYS",!!_),_?{isValid:!0,itemKeys:_}:{isValid:!1,error:n.ErrorName.ItemGroupInvalidKey}},t.getDecryptedItemGroupKey=async function(e,t,r,n){const o=(0,i.findMyItemGroupUser)(e,n),a=(0,i.findMyItemGroupUserGroupMember)(e,t,n);if(!o&&!a)return null;return(o?await(0,i.getDecryptedItemGroupKeyFromUser)(o,r):await(0,i.getDecryptedItemGroupKeyFromUserGroupMember)(a,t,r,n))||null},t.isItemGroupUserValid=u,t.isItemGroupUserGroupMemberValid=l,t.areItemGroupUsersProposeSignaturesValid=d,t.isItemGroupUserProposeSignatureValid=p,t.areItemGroupGroupMembersProposeSignaturesValid=f,t.isItemGroupGroupMemberProposeSignatureValid=g,t.areItemGroupItemKeysValid=m,t.isUserGroupValid=async function(e,t,r,n){const{groupId:o}=e,a=(e.users||[]).find((e=>e.userId===n));if(!a)return null;const s=await(0,i.getDecryptedUserGroupKey)(a.groupKey,t);return!(!s||a.acceptSignature&&!await(0,i.isGroupSignatureValid)(o,a.acceptSignature,s,r)||!await(0,i.areUserGroupUsersProposeSignaturesValid)(e.users,s))}},70206:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserGroupService=t.checkUsersPublicKey=t.ConvertUserGroupMemberToUserUpdate=t.ConvertUserGroupMemberToUserUpdateWithInvite=t.ConvertUserGroupMemberToUserUpload=t.createUserUploadEvent=t.makeUserGroupAdminItem=t.makeGroupKeyItem=t.decryptGroupKey=t.UPDATE_USER_GROUP_USERS=t.REVOKE_USER_GROUP_USERS=t.INVITE_USER_GROUP_USERS=t.REFUSE_USER_GROUP=t.ACCEPT_USER_GROUP=t.RENAME_USER_GROUP=t.DELETE_USER_GROUP=t.CREATE_TEAM_ADMINS_USER_GROUP=t.CREATE_USER_GROUP=t.SHARING_VERSION=void 0;const n=r(93513),o=r(78320),a=r(16038),i=r(44197),s=r(43927),c=r(82366),u=r(70252);function l(e,t,r,o){return e.asymmetricEncryption.sign(t,n.encode(r+"-accepted-"+o))}function d(e,t,r){if(!(0,a.isBase64Encoded)(r))throw new Error("INVALID_GROUP_KEY");return e.asymmetricEncryption.decrypt(t.privateKey,r)}async function p(e,t,r,o,a){const s=(0,i.getAdminDataFromTeamAdminData)(r,o),c=(0,i.getSpecialItemGroupFromAdminData)(s).revision,u=JSON.stringify(a),[l,d]=await Promise.all([e.symmetricEncryption.generateNewAESKey(),(0,i.getSpecialItemGroupKey)(e,t,s)]),[p,f]=await Promise.all([e.symmetricEncryption.encryptAES256(l,n.encode(u)),e.symmetricEncryption.encryptAES256(d,n.encode(l))]);return{itemId:a.itemId,itemKey:f,content:p,itemGroupRevision:c}}async function f(e,r,a,i,s){const[c,u]=await Promise.all([r.asymmetricEncryption.generateRsaKeyPair(),r.symmetricEncryption.generateNewAESKey()]),l=(0,o.generateItemUuid)(),d=await r.symmetricEncryption.encryptAES256(u,n.encode(c.privateKey));return{groupId:l,name:i.name,publicKey:c.publicKey,privateKey:d,sharingVersion:t.SHARING_VERSION,teamId:i.teamId,type:e,users:await Promise.all(s.map((e=>m(r,e,a,u,l))))}}async function g(e){return{itemId:(0,o.generateItemUuid)(),groupId:(0,o.generateItemUuid)(),groupKey:await e.symmetricEncryption.generateNewAESKey()}}async function m(e,t,r,n,o){const a=await y(e,t,n);return t.Login===r.login&&(a.acceptSignature=await l(e,r.privateKey,o,n)),a}async function h(e,r,n,o,a,i){const s=a.map((async t=>{try{return{success:!0,user:await m(e,t,r,i,n)}}catch(e){const t=new Error(`[UserGroupService] - makeBaseInviteMembersEvent: ${e}`);return(0,u.sendExceptionLog)({error:t}),{success:!1}}})),c=(await Promise.all(s)).filter((e=>e.success)).map((e=>e.user));return{groupId:n,revision:o,sharingVersion:t.SHARING_VERSION,type:t.INVITE_USER_GROUP_USERS,users:c}}async function y(e,t,r){const o=await v(t);if(!t.Login){const a=await(0,c.generateProposeSignature)(e,r,t.Alias);return await(0,c.validateProposeSignature)("[ItemGroupService] - ConvertUserGroupMemberToUserUpload (no login)",e,r,a,n.encode(t.Alias)),{...o,userId:t.Alias,alias:t.Alias,proposeSignatureUsingAlias:!0,proposeSignature:a}}const[a,i]=await Promise.all([e.asymmetricEncryption.encrypt(t.PublicKey,r),(0,c.generateProposeSignature)(e,r,t.Login)]);return await(0,c.validateProposeSignature)("[ItemGroupService] - ConvertUserGroupMemberToUserUpload",e,r,i,n.encode(t.Login)),{...o,alias:t.Alias,groupKey:a,proposeSignatureUsingAlias:!1,proposeSignature:i}}async function S(e,t,r){const o=await v(t),[a,i]=await Promise.all([e.asymmetricEncryption.encrypt(t.PublicKey,r),(0,c.generateProposeSignature)(e,r,t.Login)]);return await(0,c.validateProposeSignature)("[ItemGroupService] - ConvertUserGroupMemberToUserUpdateWithInvite",e,r,i,n.encode(t.Login)),{...o,groupKey:a,proposeSignature:i}}async function v(e){return{permission:e.Permission,userId:e.Login}}function E(e,t,r,n){return e(t,r,{type:"getSharing",sharingVersion:4,userGroupIds:n}).then((({userGroupErrors:e,userGroups:t})=>{if(e&&e.length)throw new Error(e[0].message);return t}))}function A({teamId:e}){if(!e)throw new Error("USER_GROUP_DELETED")}t.SHARING_VERSION=4,t.CREATE_USER_GROUP="createUserGroup",t.CREATE_TEAM_ADMINS_USER_GROUP="createTeamAdminsUserGroup",t.DELETE_USER_GROUP="deleteUserGroup",t.RENAME_USER_GROUP="renameUserGroup",t.ACCEPT_USER_GROUP="acceptUserGroup",t.REFUSE_USER_GROUP="refuseUserGroup",t.INVITE_USER_GROUP_USERS="inviteUserGroupUsers",t.REVOKE_USER_GROUP_USERS="revokeUserGroupUsers",t.UPDATE_USER_GROUP_USERS="updateUserGroupUsers",t.decryptGroupKey=d,t.makeGroupKeyItem=p,t.makeUserGroupAdminItem=g,t.createUserUploadEvent=m,t.ConvertUserGroupMemberToUserUpload=y,t.ConvertUserGroupMemberToUserUpdateWithInvite=S,t.ConvertUserGroupMemberToUserUpdate=v,t.checkUsersPublicKey=e=>{const t=Object.keys(e).filter((t=>!e[t].publicKey));return t.length>0?Promise.reject(new Error(JSON.stringify({message:"Users missing public Key: "+t,code:"MISSING_PUBLIC_KEY"}))):Promise.resolve(e)};const _=e=>{const t="ITEM_GROUP_UPDATE_CONFLICT";return"getAdditionalInfo"in e&&e.getAdditionalInfo().webServiceSubMessage===t||e.message.includes(t)},b=e=>{const t="Conflict";return!(!("getAdditionalInfo"in e)||!e.getAdditionalInfo().message.startsWith(t))||e.message.startsWith(t)};function T(e,t,r,n,o){return e(r,n,o).catch((a=>{if(_(a))return E(t,r,n,[o.groupId]).then((([t])=>{A(t);const{revision:a}=t;return e(r,n,{...o,revision:a})}));throw a}))}t.makeUserGroupService=function(e,r){return{makeUserGroupAdminItem:()=>g(r),makeCreateUserGroupEvent:(e,o,a,i)=>async function(e,r,o,a,i){const s=await e.asymmetricEncryption.generateRsaKeyPair(),{teamId:c,externalId:u,name:l}=a;return{groupId:i.groupId,name:l,publicKey:s.publicKey,privateKey:await e.symmetricEncryption.encryptAES256(i.groupKey,n.encode(s.privateKey)),sharingVersion:t.SHARING_VERSION,teamId:c,type:"createUserGroup",users:[],groupKeyItem:await p(e,r,o,c.toString(),i),externalId:u}}(r,e,o,a,i),makeCreateUserGroupEventWithMembers:(e,t,n)=>async function(e,t,r,n){return f("createUserGroup",e,t,r,n)}(r,e,t,n),makeCreateSpecialUserGroupEvent:(e,t,n)=>async function(e,t,r,n){return f("createTeamAdminsUserGroup",e,t,r,n)}(r,e,t,n),createUserGroup:({login:t,uki:r},n,o)=>function(e,t,r,n,o){return e.userGroup.create(t,r,o).catch((a=>{if(_(a))return(0,s.loadSpecialItemGroup)(e,t,r,n).then((n=>e.userGroup.create(t,r,{...o,groupKeyItem:{...o.groupKeyItem,itemGroupRevision:n.revision}})));throw a}))}(e,t,r,n,o),makeDeleteUserGroupEvent:(e,r,n,o)=>async function(e,r,n,o){const a={type:t.DELETE_USER_GROUP,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r};return n&&o&&(a.groupKeyItem={itemId:n,itemGroupRevision:o}),a}(e,r,n,o),deleteUserGroup:({login:t,uki:r},n,o)=>function(e,t,r,n,o){return e.userGroup.delete(t,r,o).catch((a=>{if(_(a))return(0,s.loadSpecialItemGroup)(e,t,r,n).then((n=>e.userGroup.delete(t,r,{...o,groupKeyItem:{...o.groupKeyItem,itemGroupRevision:n.revision}})));if(b(a))return E(e.sharing.get,t,r,[o.groupId]).then((n=>{const[{revision:a,teamId:i}]=n;return i?e.userGroup.delete(t,r,{...o,revision:a}):{userGroups:n}}));throw a}))}(e,t,r,n,o),makeRenameUserGroupEvent:(e,r,n)=>async function(e,r,n){return{type:t.RENAME_USER_GROUP,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r,name:n}}(e,r,n),renameUserGroup:({login:t,uki:r},n)=>function(e,t,r,n){const o=e.userGroup.rename;return o(t,r,n).catch((a=>{if(b(a))return E(e.sharing.get,t,r,[n.groupId]).then((e=>{A(e[0]);const[{name:a,revision:i}]=e;return a===n.name?{userGroups:e}:o(t,r,{...n,revision:i})}));throw a}))}(e,t,r,n),makeAcceptUserGroupEvent:(e,n)=>async function(e,r,n){const o=n.users.find((e=>e.userId===r.login)).groupKey,a=await d(e,r,o),i=await l(e,r.privateKey,n.groupId,a);return{type:t.ACCEPT_USER_GROUP,sharingVersion:4,revision:n.revision,groupId:n.groupId,acceptSignature:i}}(r,e,n),acceptUserGroup:({login:t,uki:r},n)=>T(e.userGroup.accept,e.sharing.get,t,r,n),makeRefuseUserGroupEvent:(e,r)=>async function(e,r){return{type:t.REFUSE_USER_GROUP,sharingVersion:4,revision:r,groupId:e}}(e,r),refuseUserGroup:({login:t,uki:r},n)=>T(e.userGroup.refuse,e.sharing.get,t,r,n),makeInviteMembersEventAsAdmin:(e,t,n,o)=>function(e,t,r,n,o){return h(e,n,t.groupId,r,o,t.groupKey)}(r,e,t,n,o),makeInviteMembersEvent:(e,t,n,o,a)=>async function(e,t,r,n,o,a){const i=a.users.find((e=>e.userId===n.login)).groupKey,s=await d(e,n,i);return h(e,n,t,r,o,s)}(r,e,t,n,o,a),inviteUserGroupMembers:({login:t,uki:r},n)=>function(e,t,r,n){return e.userGroup.invite(t,r,n).catch((o=>{if(b(o))return E(e.sharing.get,t,r,[n.groupId]).then((o=>{A(o[0]);const[{revision:a,users:i}]=o,s=n.users.filter((e=>!i.find((t=>t.userId===e.userId&&"accepted"===t.status))));return s.length?e.userGroup.invite(t,r,{...n,revision:a,users:s}):{userGroups:o}}));throw o}))}(e,t,r,n),makeRevokeMembersEvent:(e,r,n)=>async function(e,r,n){return{type:t.REVOKE_USER_GROUP_USERS,sharingVersion:t.SHARING_VERSION,revision:r,groupId:e,users:n}}(e,r,n),revokeUserGroupMembers:({login:t,uki:r},n)=>function(e,t,r,n){return e.userGroup.revoke(t,r,n).catch((o=>{if(b(o))return E(e.sharing.get,t,r,[n.groupId]).then((o=>{A(o[0]);const[{revision:a,users:i}]=o,s=n.users.filter((e=>i.find((t=>t.userId===e&&"accepted"===t.status))));return s.length?e.userGroup.revoke(t,r,{...n,revision:a,users:s}):{userGroups:o}}));throw o}))}(e,t,r,n),makeUpdateMembersEvent:(e,r,n)=>async function(e,r,n){return{type:t.UPDATE_USER_GROUP_USERS,sharingVersion:t.SHARING_VERSION,revision:r,groupId:e,users:await Promise.all(n.map((e=>v(e))))}}(e,r,n),makeUpdateMembersWithInviteEvent:(e,n,o,a)=>async function(e,r,n,o,a){return{type:t.UPDATE_USER_GROUP_USERS,sharingVersion:t.SHARING_VERSION,revision:o,groupId:r,users:await Promise.all(a.map((t=>S(e,t,n))))}}(r,e,n,o,a),updateUserGroupMembers:({login:t,uki:r},n)=>T(e.userGroup.update,e.sharing.get,t,r,n),findExistingUsersByAliases:r=>e.userAlias.findUsersByAliases(r).then(t.checkUsersPublicKey),findUsersByAliases:t=>e.userAlias.findUsersByAliases(t),isCurrentUserProposeSignatureValid:(e,t)=>async function(e,t,r){const n=r.users.find((e=>e.userId===t.login)),o=await d(e,t,n.groupKey);return(0,c.isProposeSignatureValid)(e,n.proposeSignature,n.userId,o)}(r,e,t)}}},97124:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeSharingService=void 0;const n=r(36513),o=r(70206),a=r(36884),i=r(10294);t.makeSharingService=function(e,t){const r=(0,n.makeCryptoService)();return{ws:t,store:e,crypto:r,userGroup:(0,o.makeUserGroupService)(t,r),itemGroup:(0,a.makeItemGroupService)(t,r),item:(0,i.makeItemService)()}}},81197:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isShared=void 0;const n=r(16516),o=r(59890);t.isShared=(0,n.curry)(((e,t)=>(0,o.binaryContains)(e,t.Id)))},71646:(e,t)=>{"use strict";function r(e,t,r){const n=(t||[]).filter((e=>(e.users||[]).map((e=>e.userId)).includes(r))).map((e=>e.groupId));return(e.groups||[]).filter((e=>n.includes(e.groupId)&&"accepted"===e.status))}function n(e,t){return t.find((t=>(t.items||[]).map((e=>e.itemId)).includes(e)))}function o(e){return(e.users||[]).filter(a)}Object.defineProperty(t,"__esModule",{value:!0}),t.getItemGroupActiveUsers=t.findItemItemGroup=t.getItemUserIds=t.getItemUserGroupIds=t.findMyAcceptedItemGroups=t.findMyAcceptedItemGroupUserGroupMembers=void 0,t.findMyAcceptedItemGroupUserGroupMembers=r,t.findMyAcceptedItemGroups=function(e,t,n){return e.filter((e=>{const o="items"===e.type,a=(e.users||[]).some((e=>e.userId===n&&"accepted"===e.status)),i=r(e,t,n).length>0;return o&&(a||i)}))},t.getItemUserGroupIds=function(e,t){const r=n(t,e);return(r?.groups??[]).filter((e=>"accepted"===e.status)).map((e=>e.groupId))},t.getItemUserIds=function(e,t){const r=n(t,e);return r?o(r).map((e=>e.userId)):[]},t.findItemItemGroup=n,t.getItemGroupActiveUsers=o;const a=e=>["accepted","pending"].includes(e.status)},89489:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLimitedSharedItemIds=void 0,t.getLimitedSharedItemIds=(e,t)=>{const r=e.userGroups.filter((e=>e.users.some((e=>e.userId===t&&"accepted"===e.status)))),n=new Set(r.map((e=>e.groupId)));return e.itemGroups.filter((e=>{const r=e.users?.some((e=>e.userId===t&&"admin"===e.permission&&"accepted"===e.status)),o=e.groups?.some((e=>n.has(e.groupId)&&"admin"===e.permission&&"accepted"===e.status));return!(r||o)})).map((e=>(e.items||[]).map((e=>e.itemId)))).reduce(((e,t)=>e.concat(t)),[]).reduce(((e,t)=>({...e,[t]:!0})),{})}},78987:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharingCapacity$=t.myAcceptedItemGroupUserMembers$=t.myAcceptedUserGroups$=t.hasNotifications$=t.pendingUserGroups$=t.pendingItemGroups$=t.allSharedItemIds$=t.userRecipients$=t.groupRecipients$=t.recipientsCount$=t.isShared$=void 0;const n=r(18948),o=r(3343),a=r(84511),i=r(80993),s=r(90021);t.isShared$=e=>{const t=(0,a.getIsSharedSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.recipientsCount$=e=>{const t=(0,a.getRecipientsCountSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.groupRecipients$=e=>{const t=(0,a.getGroupRecipientsSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.userRecipients$=e=>{const t=(0,a.getUserRecipientsSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.allSharedItemIds$=()=>{const e=i.sortedSharedItemIdsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.pendingItemGroups$=()=>{const e=a.pendingItemGroupsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.pendingUserGroups$=()=>{const e=a.pendingUserGroupsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.hasNotifications$=()=>{const e=a.hasNotificationsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.myAcceptedUserGroups$=()=>{const e=a.myAcceptedUserGroupsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.myAcceptedItemGroupUserMembers$=()=>{const e=a.myAcceptedItemGroupUserMembersSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.sharingCapacity$=()=>{const e=s.sharingCapacitySelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())}},84511:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserRecipientsSelector=t.getGroupRecipientsSelector=t.getRecipientsCountSelector=t.getIsSharedSelector=t.hasNotificationsSelector=t.myAcceptedItemGroupUserMembersSelector=t.myAcceptedUserGroupsSelector=t.pendingUserGroupsSelector=t.pendingItemGroupsSharedItemContentsSelector=t.pendingItemGroupsSelector=t.itemItemGroupSelector=t.userRecipientsSelector=t.groupRecipientsSelector=t.recipientsCountSelector=t.isSharedSelector=void 0;const n=r(32034),o=r(58107),a=r(71646),i=r(6e3),s=r(52102);t.isSharedSelector=(e,t)=>{const{items:r}=(0,s.sharingDataSelector)(e);return r.some((e=>e.itemId===t))},t.recipientsCountSelector=(e,t)=>{const r=(0,s.sharingDataSelector)(e);return(0,o.getRecipientsCount)(r,t)},t.groupRecipientsSelector=(e,t)=>{const r=(0,s.sharingDataSelector)(e);return(0,o.getGroupRecipients)(r,t)},t.userRecipientsSelector=(e,t)=>{const r=(0,s.sharingDataSelector)(e);return(0,o.getUserRecipients)(r,t)},t.itemItemGroupSelector=(e,t)=>{const{itemGroups:r}=(0,s.sharingDataSelector)(e);return(0,a.findItemItemGroup)(t,r)},t.pendingItemGroupsSelector=e=>e.userSession.sharingSync.pendingItemGroups||[],t.pendingItemGroupsSharedItemContentsSelector=e=>e.userSession.sharingSync.pendingItemGroups?e.userSession.sharingSync.pendingItemGroups.reduce(((e,t)=>e.concat(t.items)),[]):[],t.pendingUserGroupsSelector=e=>e.userSession.sharingSync.pendingUserGroups||[],t.myAcceptedUserGroupsSelector=(0,n.createSelector)(i.loginStatusSelector,s.sharingDataSelector,(({login:e},{userGroups:t})=>(0,o.findMyAcceptedUserGroups)(t,e))),t.myAcceptedItemGroupUserMembersSelector=(0,n.createSelector)(i.loginStatusSelector,s.sharingDataSelector,(({login:e},{itemGroups:t})=>(0,o.findMyAcceptedItemGroupUserMembers)(t,e))),t.hasNotificationsSelector=(0,n.createSelector)(t.pendingItemGroupsSelector,t.pendingUserGroupsSelector,((e,t)=>[...e,...t].some((e=>!e.seen)))),t.getIsSharedSelector=e=>(0,n.createSelector)(s.sharingDataSelector,(({items:t})=>t.some((t=>t.itemId===e)))),t.getRecipientsCountSelector=e=>(0,n.createSelector)(s.sharingDataSelector,(t=>(0,o.getRecipientsCount)(t,e))),t.getGroupRecipientsSelector=e=>(0,n.createSelector)(s.sharingDataSelector,(t=>(0,o.getGroupRecipients)(t,e))),t.getUserRecipientsSelector=e=>(0,n.createSelector)(s.sharingDataSelector,(t=>(0,o.getUserRecipients)(t,e)))},89698:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.acceptedItemGroupsSelector=void 0;const n=r(32034),o=r(16593),a=r(71646),i=r(52102);t.acceptedItemGroupsSelector=(0,n.createSelector)(i.sharingDataSelector,o.userIdSelector,(({itemGroups:e,userGroups:t},r)=>(0,a.findMyAcceptedItemGroups)(e,t,r)))},55721:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAllowedToShareSelector=void 0;const n=r(32034),o=r(90021);t.isAllowedToShareSelector=(0,n.createSelector)(o.sharingCapacitySelector,(e=>"unlimited"===e.type||e.remains>0))},91210:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.limitedSharingItemsSelector=void 0;const n=r(32034),o=r(89489),a=r(16593),i=r(52102);t.limitedSharingItemsSelector=(0,n.createSelector)(i.sharingDataSelector,a.userIdSelector,o.getLimitedSharedItemIds)},67231:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharedCredentialsCountSelector=void 0;const n=r(32034),o=r(80993),a=r(51319),i=r(81197);t.sharedCredentialsCountSelector=(0,n.createSelector)(o.sortedSharedItemIdsSelector,a.credentialsSelector,((e,t)=>{const r=(0,i.isShared)(e);return t.filter(r).length}))},30150:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharedItemsCountSelector=void 0;const n=r(32034),o=r(67231),a=r(41384);t.sharedItemsCountSelector=(0,n.createSelector)(o.sharedCredentialsCountSelector,a.sharedNotesCountSelector,((e,t)=>e+t))},41384:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharedNotesCountSelector=void 0;const n=r(32034),o=r(80993),a=r(75705),i=r(81197);t.sharedNotesCountSelector=(0,n.createSelector)(o.sortedSharedItemIdsSelector,a.notesSelector,((e,t)=>{const r=(0,i.isShared)(e);return t.filter(r).length}))},90021:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharingCapacitySelector=void 0;const n=r(32034),o=r(16593),a=r(46617),i=r(30150);t.sharingCapacitySelector=(0,n.createSelector)(i.sharedItemsCountSelector,o.premiumStatusSelector,a.getSharingCapacity)},52102:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharingDataSelector=void 0,t.sharingDataSelector=e=>e.userSession.sharingData},80993:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortedSharedItemIdsSelector=void 0;const n=r(32034),o=r(52102);t.sortedSharedItemIdsSelector=(0,n.createSelector)(o.sharingDataSelector,(({items:e})=>e.map((e=>e.itemId)).sort()))},46617:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingCapacity=void 0,t.getSharingCapacity=(e,t)=>{const r=t?.capabilities?.sharingLimit?.info?.limit??1/0;return r===1/0?{type:"unlimited"}:{type:"limited",remains:Math.max(0,r-e)}}},82366:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAuditLogDetails=t.validateItemGroupResponse=t.validateProposeSignature=t.isProposeSignatureValid=t.generateProposeSignature=t.isAcceptSignatureValid=t.generateAcceptSignature=void 0;const n=r(93513),o=r(53576),a=r(17509),i=r(70252),s=r(35587),c=r(32663),u=r(47683),l=r(58107),d=r(83195),p=r(16593),f=r(51504),g=r(88205);function m(e,t,r){return new Promise(((o,a)=>{e.symmetricEncryption.signHmacSHA256(t,n.encode(r)).then(o,a)}))}function h(e,t,r,n){return m(e,n,r).then((e=>t===e))}function y(e){return"validProposeSignature"in e}function S(e){const t=y(e)?e.validProposeSignature:"not-found",r=y(e)&&void 0!==e.matchProposeSignature?e.matchProposeSignature:"not-found";return`  Status:${e.status} Permission:${e.permission} ValidProposeSignature:${t} MatchesProposeSignature:${r}`}async function v(e,t,r,n){return await(0,s.asyncMap)(e,(async e=>{const o=t.find((t=>t.userId===e.userId));return{...e,validProposeSignature:await h(r,e.proposeSignature,e.userId,n),matchProposeSignature:o&&e?o.proposeSignature===e.proposeSignature:void 0}}))}t.generateAcceptSignature=function(e,t,r,o){return new Promise(((a,i)=>{e.asymmetricEncryption.sign(t,n.encode(r+"-accepted-"+o)).then(a,i)}))},t.isAcceptSignatureValid=function(e,t,r,n){return new Promise(((o,a)=>{e.asymmetricEncryption.verify(r,t,n).then(o,a)}))},t.generateProposeSignature=m,t.isProposeSignatureValid=h,t.validateProposeSignature=async function(e,t,r,n,o){if(!await t.symmetricEncryption.verifyHmacSHA256(r,n,o)){const t=new Error(`${e}: INVALID_PROPOSE_CREATION Failed to validate newly created propose signature`);throw(0,i.sendExceptionLog)({error:t}),t}},t.validateItemGroupResponse=async function(e,t,r,n,o,a,d,p,f,g=!1){try{const m=await(0,c.asyncFilter)(p,(async e=>!await h(t,e.proposeSignature,e.userId,a))),y=await(0,c.asyncFilter)(r.itemGroups,(async e=>!(await(0,u.validateItemGroup)(e,f,o,n,d)).isValid));if(g?m.length>0:y.length>0||m.length>0){const r=function(e,t,r){return[`${e}: INVALID_PROPOSE_IN_RESPONSE Invalid item group on share`,t.map((e=>`Invalid Uploaded User UsingAlias:${"alias"in e?!!e.proposeSignatureUsingAlias:"updating"} Permission:${e.permission}`)).join("\n"),r.map((e=>[`Invalid ItemGroup ID:${e.groupId} Revision:${e.revision} TeamID:${e.teamId} MatchItemGroupKey:${e.matchItemGroupKey}`,"Invalid ItemGroup Users:",e.users.map(S).join("\n")].join("\n"))).join("\n")].join("\n")}(e,m,await(0,s.asyncMap)(y,(async e=>({...e,users:await v(e.users,p,t,a),matchItemGroupKey:a===await(0,l.getItemGroupKey)(e,f,o,d)}))));await(0,i.sendExceptionLog)({error:new Error(r)})}}catch(e){e.message=`[validateItemGroupResponse]: ERROR_VALIDATING_PROPOSE_IN_RESPONSE Error validating item group response ${e.message}`,await(0,i.sendExceptionLog)({error:e})}},t.createAuditLogDetails=function(e,t){const r=(0,p.activeSpacesSelector)(e)[0],n=(0,g.hasFeatureSelector)(e,"audit_logs_sharing"),i=(0,g.hasFeatureSelector)(e,"send_activity_log"),s=(!!t?.SpaceId&&r?.info?.collectSensitiveDataAuditLogsEnabled)??!1;if(!i||!n||!s)return;const c=e.userSession.personalFeatures.features[f.NEW_URL_PARSER_FF]||e.userSession.personalFeatures.features[f.NEW_URL_PARSER_FF_PROD],u=((0,o.isCredential)(t)&&t?.Url?c?new d.ParsedURL(t?.Url).getHostname():(0,a.extractRootDomain)(t?.Url):"")||"";return{captureLog:s,domain:(0,o.isCredential)(t)?u:void 0,type:(0,o.isCredential)(t)?"AUTHENTIFIANT":"SECURENOTE"}}},83687:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingStatusDetail=t.getSharingStatusItem=t.getNotShared=void 0;const n=r(16516),o=r(59890),a=r(58107),i=r(71646);t.getNotShared=()=>({isShared:!1});const s=(e,t)=>e[t]?"limited":"admin";t.getSharingStatusItem=(0,n.curry)(((e,r,n)=>(0,o.binaryContains)(e,n)?{isShared:!0,permission:s(r,n)}:(0,t.getNotShared)())),t.getSharingStatusDetail=(0,n.curry)(((e,r,n,o)=>{const{itemGroups:c,userGroups:u}=r,l=(0,i.findItemItemGroup)(o,c);if(!l)return(0,t.getNotShared)();const d=(0,a.getRecipientsCount)(r,o);return{groupSharing:(0,a.doesUserReceiveItemGroupViaGroup)(l,u,n),isShared:!0,lastAdmin:(0,a.isUserLastAdmin)(l,n),permission:s(e,o),recipientsCount:d}}))},63623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doesUserReceiveItemViaGroup=t.isUserLastAdminOnItem=t.setPendingElementsAsSeen=t.handleSharingResponse=t.handleUpdateSharingPermission=t.handleRevokeSharing=t.handleShareItemRequest=t.emptySessionResponse=t.getFreshUserGroups=t.updateUserGroupMembers=t.getSharedData=t.computeUserGroupMember=t.extractAliasesFromMembers=t.revokeUserGroupMembers=t.inviteUserGroupMembers=t.renameUserGroup=t.deleteUserGroup=t.deleteItemGroup=t.createSpecialItemGroup=t.createSpecialUserGroup=t.createUserGroup=t.buildSharingData=t.mergeSharingData=t.getCleanSharingData=t.getOutdatedSharingParams=void 0;const n=r(16516),o=r(53576),a=r(10203),i=r(84827),s=r(70252),c=r(95623),u=r(44197),l=r(3735),d=r(49551),p=r(19697),f=r(58107),g=r(71646),m=r(55721),h=r(27885);function y(e,{groupId:t,revision:r}){if(!e.privateKey)throw new Error("PRIVATE_KEY_MISSING");if(!t)throw new Error("GROUP_ID_MISSING");if(!r)throw new Error("GROUP_REVISION_MISSING")}function S(e,t){return{itemIds:e.items.filter((({id:e,timestamp:r})=>!t.items.find((t=>t.itemId===e&&t.timestamp>=r)))).map((e=>e.id)),itemGroupIds:e.itemGroups.filter((({id:e,revision:r})=>!t.itemGroups.find((t=>t.groupId===e&&t.revision===r)))).map((e=>e.id)),userGroupIds:e.userGroups.filter((({id:e,revision:r})=>!t.userGroups.find((t=>t.groupId===e&&t.revision===r)))).map((e=>e.id))}}function v(e,t){const{items:r,itemGroups:n,userGroups:o}=e;return{items:t.items.filter((e=>r.find((t=>t.id===e.itemId)))),itemGroups:t.itemGroups.filter((e=>n.find((t=>t.id===e.groupId)))),userGroups:t.userGroups.filter((e=>o.find((t=>t.id===e.groupId))))}}function E(e,t){const r=(e,t,r)=>{const n=t.filter((t=>!e.find((e=>r(e)===r(t)))));return e.map((e=>t.find((t=>r(t)===r(e)))||e)).concat(n)};return{items:r(e.items,t.items,n.prop("itemId")),itemGroups:r(e.itemGroups,t.itemGroups,n.prop("groupId")),userGroups:r(e.userGroups,t.userGroups,n.prop("groupId"))}}t.getOutdatedSharingParams=S,t.getCleanSharingData=v,t.mergeSharingData=E,t.buildSharingData=async function(e,t,r,o,a){const i=v(o,a),s=S(o,i),c=n.unnest(n.values(s));return n.compose(n.equals(0),n.length)(c)?i:E(i,await I(e,t,r,s))};const A=(e,t,r)=>{const n=(0,h.getNodePremiumStatusSpaceData)(r),o=n.spaces.find((t=>Number(t.teamId)===e));if(!o)throw new Error("TEAM_NOT_FOUND");if(!(0,h.hasSpecialUserGroupAccessInSpace)(o.teamId,n))throw new Error("USER_DOES_NOT_HAVE_SPECIAL_USER_GROUP_ACCESS_FOR_TEAM");if(!t.privateKey)throw new Error("PRIVATE_KEY_MISSING")};function _(e,t,r){return(0,s.sendExceptionLog)({error:t}),c.Debugger.log(e,t),Promise.resolve({userGroups:[],error:{message:t.message,action:r}})}function b(e){return JSON.stringify(e.map((e=>e.Alias)))}function T(e,t){return e.map((e=>{if(!t[e.Alias])throw new Error(`User details not found for alias: ${e.Alias}`);return{Alias:e.Alias,Login:t[e.Alias].login,PublicKey:t[e.Alias].publicKey,Permission:e.Permission}}))}async function I(e,t,r,n){if(!(n.itemIds||n.itemGroupIds||n.userGroupIds))throw new Error("MISSING_PARAMETERS");const o={...n,type:"getSharing",sharingVersion:4},{itemErrors:a,items:i,itemGroupErrors:s,itemGroups:c,userGroupErrors:u,userGroups:l}=await e.sharing.get(t,r,o);if(a&&a.length)throw new Error(a[0].message);if(s&&s.length)throw new Error(s[0].message);if(u&&u.length)throw new Error(u[0].message);return{items:i,itemGroups:c,userGroups:l}}t.createUserGroup=function(e,t,r,n){return Promise.resolve().then((()=>(A(n.teamId,t,e.store),e.userGroup.makeUserGroupAdminItem().then((o=>Promise.all([e.userGroup.makeCreateUserGroupEvent(t,r,n,o),Promise.resolve(o)])))))).then((([o,a])=>e.userGroup.createUserGroup(t,r.teams[n.teamId],o).then((({userGroups:e,itemGroups:t})=>({userGroups:e,userGroupAdminItem:a,itemGroups:t}))))).catch((e=>_("Error while creating userGroup ",e,n)))},t.createSpecialUserGroup=function(e,t,r,n){const a={teamId:n,name:"_team_admin_user_group"};return Promise.resolve().then((()=>{A(n,t,e.store);const a=r.spaces.find((e=>Number(e.teamId)===n)).details.teamAdmins.map((e=>({Alias:e.login,Login:e.login,Permission:"admin",Status:e.login===t.login?o.SpaceStatus.Accepted:o.SpaceStatus.Pending}))),i=b(a);return e.userGroup.findExistingUsersByAliases({login:t.login,uki:t.uki,aliases:i}).then((e=>({findUserServiceResponse:e,members:a})))})).then((({findUserServiceResponse:r,members:n})=>{const o=T(n,r);return e.userGroup.makeCreateSpecialUserGroupEvent(t,a,o)})).then((r=>e.userGroup.createUserGroup(t,{teamId:String(n)},r))).then((({userGroups:e})=>e&&e.length&&e[0]))},t.createSpecialItemGroup=function(e,t,r,n){return Promise.resolve().then((()=>(A(r.teamId,t,e.store),e.itemGroup.makeCreateSpecialItemGroupEvent(t,r,n)))).then((r=>e.itemGroup.createSpecialItemGroup(t,r)))},t.deleteItemGroup=function(e,t,{groupId:r,revision:n}){return Promise.resolve().then((()=>(y(t,{groupId:r,revision:n}),e.itemGroup.makeDeleteItemGroupEvent(r,n).then((r=>e.itemGroup.deleteItemGroup(t,r)))))).catch((e=>(_("Error while deleting itemGroup ",e,{groupId:r,revision:n}),[])))},t.deleteUserGroup=function(e,t,r,n){const o=(0,u.findTeamForGroup)(r,n.groupId);return Promise.resolve().then((()=>{y(t,n);const{groupId:r,revision:a}=n,i=(o&&o.userGroupAdminItems||[]).find((e=>e.groupId===n.groupId)),s=o.specialItemGroup&&o.specialItemGroup.revision;return e.userGroup.makeDeleteUserGroupEvent(r,a,i.itemId,s)})).then((r=>e.userGroup.deleteUserGroup(t,o,r))).catch((e=>_("Error while deleting userGroup ",e,n)))},t.renameUserGroup=function(e,t,r){return Promise.resolve().then((()=>{y(t,r);const{groupId:n,revision:o,name:a}=r;return e.userGroup.makeRenameUserGroupEvent(n,o,a).then((r=>e.userGroup.renameUserGroup(t,r)))})).catch((e=>_("Error while renaming userGroup ",e,r)))},t.inviteUserGroupMembers=function(e,t,r,n,o){return Promise.resolve().then((()=>{if(y(t,n),0===n.users.length)throw new Error("USERS_NOT_SUPPLIED");const{login:a,uki:i}=t,s=JSON.stringify(n.users.map((e=>e.alias)));return e.userGroup.findUsersByAliases({login:a,uki:i,aliases:s}).then((a=>{const i=n.users.map((e=>{const t={Alias:e.alias,Permission:e.permission},r=a[e.alias];if(!r)return t;const{login:n,publicKey:o}=r;return n&&o?{...t,Login:n,PublicKey:o}:t})),{revision:s}=n,c=(0,u.getUserGroupAdminItem)(r,o.teamId.toString(),o.groupId);if(!c)throw new Error("USER_GROUP_ADMIN_ITEM_NOT_AVAILABLE");return e.userGroup.makeInviteMembersEventAsAdmin(c,s,t,i)})).then((r=>e.userGroup.inviteUserGroupMembers(t,r)))})).catch((e=>_("Error while inviteUserGroupMembers",new Error(`[SharingController] - inviteUserGroupMembers: ${e}`),n))).then((e=>Object.assign({refusedMembers:{}},e)))},t.revokeUserGroupMembers=async function(e,t,r){try{if(y(t,r),0===r.users.length)throw new Error("USERS_NOT_SUPPLIED");const{groupId:n,revision:o,users:a}=r,i=await e.userGroup.makeRevokeMembersEvent(n,o,a),{userGroups:s}=await e.userGroup.revokeUserGroupMembers(t,i);return{userGroups:s}}catch(e){return _("Error while revokeUserGroupMembers",e,r)}},t.extractAliasesFromMembers=b,t.computeUserGroupMember=T,t.getSharedData=I,t.updateUserGroupMembers=async function(e,t,r){if(y(t,r),0===r.users.length)throw new Error("USERS_NOT_SUPPLIED");const{login:n,uki:o}=t,{groupId:a,revision:i,users:s}=r,c=JSON.stringify(s.map((e=>e.alias))),u=await e.userGroup.findExistingUsersByAliases({login:n,uki:o,aliases:c}),l=s.map((e=>({Alias:e.alias,Login:u[e.alias].login,PublicKey:u[e.alias].publicKey,Permission:e.permission}))),d=await e.userGroup.makeUpdateMembersEvent(a,i,l),{userGroups:p}=await e.userGroup.updateUserGroupMembers(t,d);return{userGroups:p}},t.getFreshUserGroups=function(e,t,r){const{login:n,uki:o}=t;return I(e,n,o,{itemIds:[],itemGroupIds:[],userGroupIds:r.map((e=>e.groupId))}).then((e=>e.userGroups))},t.emptySessionResponse=function(e){return Promise.reject({error:{message:"SESSION_EMPTY",action:e}})},t.handleShareItemRequest=async function e(t,r,n,i,u,p,f=!0){const{ITEM_DOESNT_EXIST:g,LIMIT_EXCEEDED:h,ITEM_HAS_ATTACHMENTS:y,SHARING_FAILED:S}=o.ShareItemFailureReason;await r.getInstance().user.requestNewSync(a.Trigger.Sharing);const v=t.getPersonalData(),E=(0,d.findDataModelObject)(i,v.credentials),A=v.notes.find((e=>e.Id===i)),_=E||A;if(!_)return{success:!1,reason:g};const b=t.getSharingData().itemGroups.find((e=>e&&e.items&&!!e.items.find((e=>e.itemId===i)))),T=t.getState();if(!(0,m.isAllowedToShareSelector)(T))return{success:!1,reason:h};if(_.Attachments&&_.Attachments.length>0)return{success:!1,reason:y};try{b?await(0,l.shareAlreadySharedItem)(t,n,b,u,p):await(0,l.shareUnsharedItem)(t,n,_,u,p)}catch(o){if(!f||!w(o)){const e=new Error(`[SharingController] - handleShareItemRequest: ${o}`);return c.Debugger.log("ERROR",e),(0,s.sendExceptionLog)({error:e}),{success:!1,reason:S,message:`${e}`}}try{return await r.getInstance().user.requestNewSync(a.Trigger.Sharing),e(t,r,n,i,u,p,!1)}catch(e){const t=new Error(`[SharingController] - handleShareItemRequest (syncAndRetryOnConflict): ${e}`);return c.Debugger.log("ERROR",t),(0,s.sendExceptionLog)({error:t}),{success:!1,reason:S,message:`${t}`}}}return r.getInstance().user.requestNewSync(a.Trigger.Sharing),{success:!0}};const w=e=>{const t="INVALID_ITEM_GROUP_REVISION";return"getAdditionalInfo"in e&&e.getAdditionalInfo().webServiceSubMessage===t||e.message.includes(t)};t.handleRevokeSharing=async function e(t,r,n,i,c,u=!0){const{NOT_FOUND:d,FORBIDDEN:p,REVOKE_FAILED:f}=o.RevokeSharingFailureReason,g="[SharingController] - handleRevokeSharing",{itemGroups:m,userGroups:h}=t.getSharingData(),y=m.find((e=>e&&e.groupId===i));if(!y)return{success:!1,reason:d,message:"This itemGroup couldn't be found."};const S=t.getUserLogin();if(!(0,l.isUserItemGroupAdmin)(y,h,S))return{success:!1,reason:p,message:"Only an admin can perform this operation."};try{await(0,l.revokeItemGroupMember)(t,n,y,c)}catch(o){if(u&&w(o))try{return await r.getInstance().user.requestNewSync(a.Trigger.Sharing),e(t,r,n,i,c,!1)}catch(e){const t=new Error(`${g} (syncAndRetryOnConflict): ${e}`);return(0,s.sendExceptionLog)({error:t}),{success:!1,reason:f,message:`${t}`}}const l=new Error(`${g}: ${o}`);return(0,s.sendExceptionLog)({error:l}),{success:!1,reason:f,message:`${l}`}}return r.getInstance().user.requestNewSync(a.Trigger.Sharing),{success:!0}},t.handleUpdateSharingPermission=async function e(t,r,n,i,c,u,d=!0){const{NOT_FOUND:p,FORBIDDEN:f,UPDATE_FAILED:g}=o.UpdateSharingPermissionFailureReason,m="[SharingController] - handleUpdateSharingPermission",{itemGroups:h,userGroups:y}=t.getSharingData(),S=h.find((e=>e&&e.groupId===i));if(!S)return{success:!1,reason:p,message:"This itemGroup couldn't be found."};const v=t.getUserLogin();if(!(0,l.isUserItemGroupAdmin)(S,y,v))return{success:!1,reason:f,message:"Only an admin can perform this operation."};try{await(0,l.updateSharingPermission)(t,n,S,c,u)}catch(o){if(d&&w(o))try{return await r.getInstance().user.requestNewSync(a.Trigger.Sharing),e(t,r,n,i,c,u,!1)}catch(e){const t=new Error(`${m} (syncAndRetryOnConflict): ${e}`);return(0,s.sendExceptionLog)({error:t}),{success:!1,reason:g,message:`${t}`}}const l=new Error(`${m}: ${o}`);return(0,s.sendExceptionLog)({error:l}),{success:!1,reason:g,message:`${l}`}}return r.getInstance().user.requestNewSync(a.Trigger.Sharing),{success:!0}},t.handleSharingResponse=async function(e,t,r){const{itemGroups:n,status:o,userGroups:i}=r,s={successes:[],failures:[]},c=i.length>0?await(0,l.handlePendingUserGroupsResponse)(e,i,o):s,u=n.length>0?await(0,l.handlePendingItemGroupsResponse)(e,n,o):s;(0,p.default)().sendSharingResponseResult({status:o,itemGroups:u,userGroups:c}),t.getInstance().user.requestNewSync(a.Trigger.Sharing)},t.setPendingElementsAsSeen=function(e,t,r){const n=(0,i.setElementsAsSeenAction)(r.pendingItemGroupIds,r.pendingUserGroupIds);e.dispatch(n);const{sharingSync:o}=e.getState().userSession;t.getInstance().storeSharingSync(o)},t.isUserLastAdminOnItem=function(e,t){const r=e.getUserLogin(),{itemGroups:n}=e.getSharingData(),o=(0,g.findItemItemGroup)(t,n);return!!o&&(0,f.isUserLastAdmin)(o,r)},t.doesUserReceiveItemViaGroup=function(e,t){const r=e.getUserLogin(),{itemGroups:n,userGroups:o}=e.getSharingData(),a=(0,g.findItemItemGroup)(t,n);return!!a&&(0,f.doesUserReceiveItemGroupViaGroup)(a,o,r)}},22652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(31495),o=r(28183);t.config={commands:{},queries:{getSharingUsers:{selector:n.viewedSharingUsersSelector},getSharingUserPermissionLevel:{selector:n.sharingUserPermissionLevelSelector}},liveQueries:{liveSharingUsers:{operator:o.sharingUsers$},liveSharingUserPermissionLevel:{operator:o.sharingUserPermissionLevel$}}}},72658:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(26710),t)},28183:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharingUserPermissionLevel$=t.sharingUsers$=void 0;const n=r(18948),o=r(3343),a=r(31495),i=r(35893),s=r(33627);t.sharingUsers$=e=>{const t=(0,i.parseToken)(e),r=(0,a.createLiveSharingUsersSelector)(t.spaceId)(t.dataQuery);return(0,n.pipe)((0,o.map)(r),(0,o.distinctUntilChanged)(((e,t)=>(0,s.sameBatch)(e.items,t.items)&&e.matchingCount===t.matchingCount)))},t.sharingUserPermissionLevel$=e=>{const t=(0,a.getSharingUserPermissionLevelSelector)((0,i.parseToken)(e));return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},7261:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingUserMappers=void 0,t.getSharingUserMappers=()=>({id:e=>e.userId,itemCount:e=>e.itemCount})},70963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharingUserMatch=t.searchGetters=void 0;const n=r(82234),o=r(64455);t.searchGetters=[(0,n.stringProp)("userId")],t.sharingUserMatch=(0,o.match)(t.searchGetters)},31495:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingUserPermissionLevelSelector=t.sharingUserPermissionLevelSelector=t.createLiveSharingUsersSelector=t.viewedSharingUsersSelector=t.sharingUserMappersSelector=void 0;const n=r(16516),o=r(32034),a=r(63566),i=r(24589),s=r(97006),c=r(16593),u=r(7261),l=r(63925),d=r(70963),p=r(58107),f=r(89698),g=r(84511),m=e=>(0,o.createSelector)(f.acceptedItemGroupsSelector,c.userIdSelector,(e=>e),((t,r,n)=>(0,p.getSharingUsersFromItemGroups)(n,r,t,e)));t.sharingUserMappersSelector=()=>(0,u.getSharingUserMappers)();const h=()=>d.sharingUserMatch;t.viewedSharingUsersSelector=(e,r)=>{const o=(e=>{const r=m(e);return(0,i.getQuerySelector)(r,h,t.sharingUserMappersSelector)})(r.spaceId);return(0,n.compose)((0,a.viewListResults)(l.listView),o)(e,r.dataQuery)},t.createLiveSharingUsersSelector=e=>{const r=m(e);return(0,s.makeLiveSelectorGetter)(r,(()=>l.listView),h,t.sharingUserMappersSelector)},t.sharingUserPermissionLevelSelector=(e,{itemId:t,userId:r})=>{const n=(0,g.itemItemGroupSelector)(e,t);if(n)return(0,p.getSharingUserPermission)(n,r)},t.getSharingUserPermissionLevelSelector=({itemId:e,userId:r})=>n=>(0,t.sharingUserPermissionLevelSelector)(n,{itemId:e,userId:r})},26710:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},63925:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const n=(0,r(16516).defaultTo)("");t.detailView=e=>({id:n(e.userId),itemCount:e.itemCount}),t.listView=e=>e.map(t.detailView)},23944:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(96247),o=r(79570),a=r(1190);t.config={commands:{},queries:{getUserGroups:{selector:n.viewedUserGroupsSelector},getUserGroup:{selector:n.viewedUserGroupSelector},getUserGroupPermissionLevel:{selector:n.userGroupPermissionLevelSelector},getUserGroupMembers:{selector:a.viewedUserGroupMembersSelector}},liveQueries:{liveUserGroups:{operator:o.userGroups$},liveUserGroupPermissionLevel:{operator:o.userGroupPermissionLevel$}}}},45923:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(69550),t)},779:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserDownloadMappers=void 0,t.getUserDownloadMappers=()=>({id:e=>e.userId})},79850:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userDownloadMatch=t.searchGetters=void 0;const n=r(82234),o=r(64455);t.searchGetters=[(0,n.stringProp)("userId")],t.userDownloadMatch=(0,o.match)(t.searchGetters)},1190:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewedUserGroupMembersSelector=t.userDownloadMappersSelector=t.getUserGroupSelector=t.activeUserGroupsSelector=void 0;const n=r(32034),o=r(16516),a=r(24589),i=r(779),s=r(79850),c=r(63566),u=r(99729),l=r(52102),d=r(16593),p=r(58107);t.activeUserGroupsSelector=(0,n.createSelector)(l.sharingDataSelector,d.userIdSelector,((e,t)=>{const{userGroups:r}=e;return(0,p.findMyAcceptedUserGroups)(r,t)})),t.getUserGroupSelector=e=>(0,n.createSelector)(t.activeUserGroupsSelector,(t=>(0,p.findUserGroup)(t,e))),t.userDownloadMappersSelector=()=>(0,i.getUserDownloadMappers)();const f=()=>s.userDownloadMatch,g=e=>{const r=(e=>{const r=(0,t.getUserGroupSelector)(e);return(0,n.createSelector)(r,(e=>e?.users||[]))})(e);return(0,a.getQuerySelector)(r,f,t.userDownloadMappersSelector)};t.viewedUserGroupMembersSelector=(e,t)=>{const r=g(t.groupId);return(0,o.compose)((0,c.viewListResults)(u.listView),r)(e,t.dataQuery)}},99729:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const n=(0,r(16516).defaultTo)("");t.detailView=e=>({id:n(e.userId),permission:e.permission}),t.listView=e=>e.map(t.detailView)},79570:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userGroupPermissionLevel$=t.userGroups$=void 0;const n=r(18948),o=r(3343),a=r(35893),i=r(96247),s=r(33627);t.userGroups$=e=>{const t=(0,a.parseToken)(e),r=(0,i.createLiveUserGroupsSelector)(t.spaceId)(t.dataQuery);return(0,n.pipe)((0,o.map)(r),(0,o.distinctUntilChanged)(((e,t)=>(0,s.sameBatch)(e.items,t.items)&&e.matchingCount===t.matchingCount)))},t.userGroupPermissionLevel$=e=>{const t=(0,i.getUserGroupPermissionLevelSelector)((0,a.parseToken)(e));return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},95414:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupMappers=void 0,t.getUserGroupMappers=()=>({name:e=>e.name,id:e=>e.groupId,itemCount:e=>e.itemCount})},10547:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userGroupMatch=t.searchGetters=void 0;const n=r(82234),o=r(64455);t.searchGetters=[(0,n.stringProp)("name")],t.userGroupMatch=(0,o.match)(t.searchGetters)},96247:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupPermissionLevelSelector=t.userGroupPermissionLevelSelector=t.viewedUserGroupSelector=t.createLiveUserGroupsSelector=t.viewedUserGroupsSelector=t.userGroupMappersSelector=t.createActiveUserGroupsSelector=void 0;const n=r(16516),o=r(32034),a=r(63566),i=r(24589),s=r(97006),c=r(16593),u=r(10547),l=r(95414),d=r(54719),p=r(52102),f=r(58107),g=r(84511);t.createActiveUserGroupsSelector=e=>(0,o.createSelector)(p.sharingDataSelector,c.userIdSelector,(e=>e),((t,r,n)=>{const{userGroups:o,itemGroups:a}=t;return(0,f.findMyAcceptedUserGroups)(o,r).map((t=>{const r=(0,f.findUserGroupItemGroups)(t.groupId,a).reduce(((t,r)=>null===e||(0,f.doesItemGroupExistInSpace)(n,r,e)?t+r.items.length:t),0);return{...t,itemCount:r}}))})),t.userGroupMappersSelector=()=>(0,l.getUserGroupMappers)();const m=()=>u.userGroupMatch;t.viewedUserGroupsSelector=(e,r)=>{const o=(e=>{const r=(0,t.createActiveUserGroupsSelector)(e);return(0,i.getQuerySelector)(r,m,t.userGroupMappersSelector)})(r.spaceId);return(0,n.compose)((0,a.viewListResults)(d.listView),o)(e,r.dataQuery)},t.createLiveUserGroupsSelector=e=>{const r=(0,t.createActiveUserGroupsSelector)(e);return(0,s.makeLiveSelectorGetter)(r,(()=>d.listView),m,t.userGroupMappersSelector)},t.viewedUserGroupSelector=(e,r)=>{const{itemGroups:n}=(0,p.sharingDataSelector)(e),o=(0,t.createActiveUserGroupsSelector)(null)(e),a=(0,f.findUserGroup)(o,r),i=(0,f.findUserGroupItemGroups)(a.groupId,n).length;if(a)return(0,d.detailView)({...a,itemCount:i})},t.userGroupPermissionLevelSelector=(e,{itemId:t,groupId:r})=>{const n=(0,g.itemItemGroupSelector)(e,t);return(0,f.getUserGroupPermission)(n,r)},t.getUserGroupPermissionLevelSelector=({itemId:e,groupId:r})=>n=>(0,t.userGroupPermissionLevelSelector)(n,{itemId:e,groupId:r})},69550:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},54719:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const n=r(16516),o=r(99729),a=(0,n.defaultTo)("");t.detailView=e=>({name:a(e.name),id:a(e.groupId),users:(0,o.listView)(e.users||[]),itemCount:e.itemCount}),t.listView=e=>e.map(t.detailView)},86833:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(36768);t.bootstrap=e=>{e.register(n.config)}},95326:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shareItem=t.ShareItemErrorCode=void 0;const n=r(70252),o=r(63623);var a;!function(e){e.NOT_AUTHENTICATED="NOT_AUTHENTICATED"}(a=t.ShareItemErrorCode||(t.ShareItemErrorCode={})),t.shareItem=async function(e,t){const{sessionService:r,storeService:i,wsService:s}=e;if(!i.isAuthenticated())return{success:!1,error:{code:a.NOT_AUTHENTICATED}};try{const{itemId:e,permission:n,recipients:a}=t;return await(0,o.handleShareItemRequest)(i,r,s,e,n,a)}catch(e){const t=`[SessionController] - shareItem: ${e}`,r=new Error(t);return(0,n.sendExceptionLog)({error:r}),{success:!1,error:{code:t}}}}},33719:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.setupSubscriptions=void 0;const n=r(53858);Object.defineProperty(t,"setupSubscriptions",{enumerable:!0,get:function(){return n.setupSubscriptions}});var o=r(86833);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},53858:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(36513),o=r(36884),a=r(78096);t.setupSubscriptions=async function(e,t){const{sessionService:r,storeService:i,wsService:s}=t,c=(0,n.makeCryptoService)(),u=(0,o.makeItemGroupService)(s,c);e.teamSpaceContentControlDone.on((e=>{(0,a.revokeRemoteControlledSharedItems)(r,i,s,u,e)}))}},83400:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(85406),o=r(39003),a=r(98337);t.config={commands:{},queries:{getBanks:{staticDataHandler:n.getBanks},getAllBanks:{staticDataHandler:n.getAllBanks},getAllCallingCodes:{staticDataHandler:o.getAllCallingCodes},getSecureDocumentsExtensionsList:{staticDataHandler:a.getSecureDocumentsAllowedExtensions}},liveQueries:{}}},35240:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},82912:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.banks=void 0;const n=r(53576);t.banks={[n.Country.AR]:[{localizedString:"Banco Credicoop",code:"BANCOCREDICOOP"},{localizedString:"Banco de la Nación Argentina",code:"BANCODELANACIONARGEN"},{localizedString:"Banco Hipotecario",code:"BANCOHIPOTECARIO"},{localizedString:"Banco Itaú Argentina",code:"BANCOITAUARGENTINA"},{localizedString:"Banco Macro",code:"BANCOMACRO"},{localizedString:"Banco Patagonia",code:"BANCOPATAGONIA"},{localizedString:"Banco Santander Río",code:"BANCOSANTANDERRIO"},{localizedString:"Bank of the City of Buenos Aires",code:"BANKOFTHECITYOFBUENO"},{localizedString:"Bank of the Province of Buenos Aires",code:"BANKOFTHEPROVINCEOFB"},{localizedString:"BBVA Banco Francés",code:"BBVABANCOFRANCES"},{localizedString:"Central Bank of Argentina",code:"CENTRALBANKOFARGENTI"},{localizedString:"Citibank Argentina",code:"CITIBANKARGENTINA"},{localizedString:"Grupo Financiero Galicia",code:"GRUPOFINANCIEROGALIC"},{localizedString:"HSBC Bank Argentina",code:"HSBCBANKARGENTINA"},{localizedString:"Municipal Bank of Rosario",code:"MUNICIPALBANKOFROSAR"},{localizedString:"New Bank of Santa Fe",code:"NEWBANKOFSANTAFE"},{localizedString:"Other",code:"NO_TYPE"}],[n.Country.AT]:[{localizedString:"Adria Bank",code:"ADRIABANK"},{localizedString:"Allianz Investmentbank",code:"ALLIANZINVESTMENTBAN"},{localizedString:"Alpenbank",code:"ALPENBANK"},{localizedString:"American Express Bank Ltd",code:"AMERICANEXPRESSBANKL"},{localizedString:"Anglo Irish Bank",code:"ANGLOIRISHBANK"},{localizedString:"Austria Wirtschaftsservice Gesellschaft",code:"AUSTRIAWIRTSCHAFTSSE"},{localizedString:"Banco do Brasil",code:"BANCODOBRASIL"},{localizedString:"Bank Austria Creditanstalt",code:"BANKAUSTRIACREDITANS"},{localizedString:"Bank für Ärzte und Freie Berufe",code:"BANKFURARZTEUNDFREIE"},{localizedString:"Bank für Tirol und Vorarlberg",code:"BANKFURTIROLUNDVORAR"},{localizedString:"Bank Gutmann",code:"BANKGUTMANN"},{localizedString:"Bankhaus Carl Spängler & Co",code:"BANKHAUSCARLSPANGLER"},{localizedString:"Bankhaus Krentschker & Co",code:"BANKHAUSKRENTSCHKERC"},{localizedString:"Bankhaus Schelhammer & Schattera",code:"BANKHAUSSCHELHAMMERS"},{localizedString:"Bank Sal.Oppenheim jr. & Cie",code:"BANKSALOPPENHEIMJRCI"},{localizedString:"Bank Vontobel Österreich",code:"BANKVONTOBELOSTERREI"},{localizedString:"Bank Winter & Co",code:"BANKWINTERCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Raiffeisen Bank",code:"RAIFFEISENBANK"}],[n.Country.AU]:[{localizedString:"AMP Bank Limited",code:"AMPBANKLIMITED"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Auswide Bank",code:"AUSWIDEBANK"},{localizedString:"Bank Australia",code:"BANKAUSTRALIA"},{localizedString:"Bank of Melbourne",code:"BANKOFMELBOURNE"},{localizedString:"Bank of Queensland Limited",code:"BANKOFQUEENSLANDLIMI"},{localizedString:"Bank of Sydney",code:"BANKOFSYDNEY"},{localizedString:"Bank of Western Australia",code:"BANKOFWESTERNAUSTRAL"},{localizedString:"Bank SA",code:"BANKSA"},{localizedString:"BankVic",code:"BANKVIC"},{localizedString:"Bendigo and Adelaide Bank Limited",code:"BENDIGOANDADELAIDEBA"},{localizedString:"Beyond Bank Australia",code:"BEYONDBANKAUSTRALIA"},{localizedString:"Commonwealth Bank of Australia",code:"COMMONWEALTHBANKOFAU"},{localizedString:"Corporation (Australia) Limited",code:"CORPORATIONAUSTRALIA"},{localizedString:"Defence Bank",code:"DEFENCEBANK"},{localizedString:"Delphi Bank",code:"DELPHIBANK"},{localizedString:"G&C Mutual Bank",code:"GCMUTUALBANK"},{localizedString:"Heritage Bank",code:"HERITAGEBANK"},{localizedString:"Hume Bank",code:"HUMEBANK"},{localizedString:"IMB Bank",code:"IMBBANK"},{localizedString:"Macquarie Bank Limited",code:"MACQUARIEBANKLIMITED"},{localizedString:"Members Equity Bank Pty Limited",code:"MEMBERSEQUITYBANKPTY"},{localizedString:"MyState Bank",code:"MYSTATEBANK"},{localizedString:"National Australia Bank Limited",code:"NATIONALAUSTRALIABAN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"P&N Bank",code:"PNBANK"},{localizedString:"Police Bank",code:"POLICEBANK"},{localizedString:"Queensland Teachers Mutual Bank (QTMB)",code:"QUEENSLANDTEACHERSMU"},{localizedString:"Rural Bank Limited",code:"RURALBANKLIMITED"},{localizedString:"St. George Bank Limited,",code:"STGEORGEBANKLIMITED"},{localizedString:"Suncorp-Metway Limited",code:"SUNCORPMETWAYLIMITED"},{localizedString:"Teachers Mutual Bank Limited",code:"TEACHERSMUTUALBANKLI"},{localizedString:"UBank, a division of National Australia Bank",code:"UBANKADIVISIONOFNATI"},{localizedString:"Victoria Teachers Mutual Bank",code:"VICTORIATEACHERSMUTU"},{localizedString:"Westpac Banking Corporation",code:"WESTPACBANKINGCORPOR"}],[n.Country.BE]:[{localizedString:"Argenta",code:"ARGENTA"},{localizedString:"Attijariwafa Bank Europe Belgium",code:"ATTIJARIWAFABANKEURO"},{localizedString:"AXA Bank",code:"AXABANK"},{localizedString:"Banca Monte Paschi Belgio",code:"BANCAMONTEPASCHIBELG"},{localizedString:"BBVA Bélgica",code:"BBVABELGICA"},{localizedString:"Belfius Banque",code:"BELFIUSBANQUE"},{localizedString:"Beobank",code:"BEOBANK"},{localizedString:"BKCP Banque",code:"BKCPBANQUE"},{localizedString:"BNP Paribas Fortis",code:"BNPPARIBASFORTIS"},{localizedString:"bpost bank",code:"BPOSTBANK"},{localizedString:"Crelan",code:"CRELAN"},{localizedString:"Europabank",code:"EUROPABANK"},{localizedString:"Hello Bank!",code:"HELLOBANK"},{localizedString:"ING Belgium",code:"INGBELGIUM"},{localizedString:"KBC Bank",code:"KBCBANK"},{localizedString:"Keytrade Bank",code:"KEYTRADEBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank.be",code:"RABOBANKBE"},{localizedString:"Record Bank",code:"RECORDBANK"},{localizedString:"Santander Consumer Finance",code:"SANTANDERCONSUMERFIN"},{localizedString:"Triodos Bank Banque Triodos",code:"TRIODOSBANKBANQUETRI"},{localizedString:"VDK Spaarbank NV",code:"VDKSPAARBANKNV"}],[n.Country.BR]:[{localizedString:"Banco Bradesco Financiamentos",code:"BANCOBRADESCOFINANCI"},{localizedString:"Banco do Brasil",code:"BANCODOBRASIL"},{localizedString:"Banco do Estado do Rio Grande do Sul S/A",code:"BANCODOESTADODORIOGR"},{localizedString:"Banco Itaú",code:"BANCOITAU"},{localizedString:"Banco J Safra S/A",code:"BANCOJSAFRASA"},{localizedString:"Banco PanAmericano S/A",code:"BANCOPANAMERICANOSA"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"Caixa Econômica Federal",code:"CAIXAECONOMICAFEDERA"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Other",code:"NO_TYPE"}],[n.Country.CA]:[{localizedString:"B2B Bank",code:"B2BBANK"},{localizedString:"Bank of Montreal",code:"BANKOFMONTREAL"},{localizedString:"Bank of Nova Scotia",code:"BANKOFNOVASCOTIA"},{localizedString:"Bridgewater Bank",code:"BRIDGEWATERBANK"},{localizedString:"Canadian Imperial Bank of Commerce",code:"CANADIANIMPERIALBANK"},{localizedString:"Canadian Tire Bank",code:"CANADIANTIREBANK"},{localizedString:"Canadian Western Bank",code:"CANADIANWESTERNBANK"},{localizedString:"CFF Bank",code:"CFFBANK"},{localizedString:"Citizens Bank of Canada",code:"CITIZENSBANKOFCANADA"},{localizedString:"Continental Bank of Canada",code:"CONTINENTALBANKOFCAN"},{localizedString:"CS Alterna Bank",code:"CSALTERNABANK"},{localizedString:"DirectCash Bank",code:"DIRECTCASHBANK"},{localizedString:"Equitable Bank",code:"EQUITABLEBANK"},{localizedString:"First Nations Bank of Canada",code:"FIRSTNATIONSBANKOFCA"},{localizedString:"General Bank of Canada",code:"GENERALBANKOFCANADA"},{localizedString:"Hollis Canadian Bank",code:"HOLLISCANADIANBANK"},{localizedString:"HomEquity Bank",code:"HOMEQUITYBANK"},{localizedString:"Laurentian Bank of Canada",code:"LAURENTIANBANKOFCANA"},{localizedString:"Manulife Bank of Canada",code:"MANULIFEBANKOFCANADA"},{localizedString:"National Bank of Canada",code:"NATIONALBANKOFCANADA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pacific & Western Bank of Canada",code:"PACIFICWESTERNBANKOF"},{localizedString:"President's Choice Bank",code:"PRESIDENTSCHOICEBANK"},{localizedString:"RedBrick Bank",code:"REDBRICKBANK"},{localizedString:"Rogers Bank",code:"ROGERSBANK"},{localizedString:"Royal Bank of Canada",code:"ROYALBANKOFCANADA"},{localizedString:"Tangerine Bank",code:"TANGERINEBANK"},{localizedString:"Toronto-Dominion Bank",code:"TORONTODOMINIONBANK"},{localizedString:"Wealth One Bank of Canada",code:"WEALTHONEBANKOFCANAD"},{localizedString:"Zag Bank",code:"ZAGBANK"}],[n.Country.CH]:[{localizedString:"AIG Private Bank",code:"AIGPRIVATEBANK"},{localizedString:"Amtsersparniskasse Thun",code:"AMTSERSPARNISKASSETH"},{localizedString:"Anker Bank",code:"ANKERBANK"},{localizedString:"Arab Bank Switzerland",code:"ARABBANKSWITZERLAND"},{localizedString:"Banca dello Stato del Cantone Ticino",code:"BANCADELLOSTATODELCA"},{localizedString:"Bank Ehinger",code:"BANKEHINGER"},{localizedString:"Bank for International Settlements (BIS)",code:"BANKFORINTERNATIONAL"},{localizedString:"Bank Leu",code:"BANKLEU"},{localizedString:"Bankredit - Banca di Credito e Commercio",code:"BANKREDITBANCADICRED"},{localizedString:"Bank von Ernst",code:"BANKVONERNST"},{localizedString:"Banque Cantonale Vaudoise (BCV)",code:"BANQUECANTONALEVAUDO"},{localizedString:"Banque Diamantaire Anversoise",code:"BANQUEDIAMANTAIREANV"},{localizedString:"Banque Edouard Constant",code:"BANQUEEDOUARDCONSTAN"},{localizedString:"Banque Nationale Suisse - Banca Nazionale Svizzera",code:"BANQUENATIONALESUISS"},{localizedString:"Banque Piguet & Cie S.A.",code:"BANQUEPIGUETCIESA"},{localizedString:"Banque SCS Alliance",code:"BANQUESCSALLIANCE"},{localizedString:"BEKBnet/BCBE",code:"BEKBNETBCBE"},{localizedString:"BHE - Bank für Handel & Effekten",code:"BHEBANKFURHANDELEFFE"},{localizedString:"BNP - Banque Nationale de Paris",code:"BNPBANQUENATIONALEDE"},{localizedString:"BSI - Banca della Svizzera Italiana",code:"BSIBANCADELLASVIZZER"},{localizedString:"Clariden Bank",code:"CLARIDENBANK"},{localizedString:"Crédit Lyonnais Suisse",code:"CREDITLYONNAISSUISSE"},{localizedString:"Credit Suisse",code:"CREDITSUISSE"},{localizedString:"Discount Bank Group (DBTC/DBSA)",code:"DISCOUNTBANKGROUPDBT"},{localizedString:"Habib Bank AG Zürich",code:"HABIBBANKAGZURICH"},{localizedString:"Hottinger & Cie",code:"HOTTINGERCIE"},{localizedString:"Maerki, Baumann & Co. AG, Privatbank",code:"MAERKIBAUMANNCOAGPRI"},{localizedString:"Migrosbank",code:"MIGROSBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pictet & Cie",code:"PICTETCIE"},{localizedString:"Raiffeisen Internet",code:"RAIFFEISENINTERNET"},{localizedString:"Royal Bank of Canada",code:"ROYALBANKOFCANADA"},{localizedString:"SBC Warburg Dillon Read (WDR)",code:"SBCWARBURGDILLONREAD"},{localizedString:"Schwyzer Kantonalbank",code:"SCHWYZERKANTONALBANK"},{localizedString:"Skandia Bank",code:"SKANDIABANK"},{localizedString:"Solothurner Bank SoBa",code:"SOLOTHURNERBANKSOBA"},{localizedString:"Sparkassa Berneck",code:"SPARKASSABERNECK"},{localizedString:"St. Gallische Kantonalbank",code:"STGALLISCHEKANTONALB"},{localizedString:"Swiss Bank Corporation",code:"SWISSBANKCORPORATION"},{localizedString:"Thurgauer Kantonalbank",code:"THURGAUERKANTONALBAN"},{localizedString:"Union Bank of Switzerland",code:"UNIONBANKOFSWITZERLA"},{localizedString:"Wegelin & Co. Privatbankiers",code:"WEGELINCOPRIVATBANKI"},{localizedString:"Zuger Kantonalbank",code:"ZUGERKANTONALBANK"},{localizedString:"Zürcher Kantonalbank",code:"ZURCHERKANTONALBANK"}],[n.Country.CL]:[{localizedString:"Banco BICE",code:"BANCOBICE"},{localizedString:"Banco Bilbao Vizcaya Argentaria (BBVA)",code:"BANCOBILBAOVIZCAYAAR"},{localizedString:"Banco Consorcio",code:"BANCOCONSORCIO"},{localizedString:"Banco de Chile",code:"BANCODECHILE"},{localizedString:"Banco de Crédito e Inversiones",code:"BANCODECREDITOEINVER"},{localizedString:"Banco del Desarrollo",code:"BANCODELDESARROLLO"},{localizedString:"Banco del Estado de Chile",code:"BANCODELESTADODECHIL"},{localizedString:"Banco Edwards-Citi",code:"BANCOEDWARDSCITI"},{localizedString:"Banco Falabella",code:"BANCOFALABELLA"},{localizedString:"Banco Internacional",code:"BANCOINTERNACIONAL"},{localizedString:"Banco Itaú-Chile",code:"BANCOITAUCHILE"},{localizedString:"Banco Paris",code:"BANCOPARIS"},{localizedString:"Banco Penta",code:"BANCOPENTA"},{localizedString:"Banco Ripley",code:"BANCORIPLEY"},{localizedString:"Banco Santander Chile",code:"BANCOSANTANDERCHILE"},{localizedString:"Banco Security",code:"BANCOSECURITY"},{localizedString:"Central Bank of Chile",code:"CENTRALBANKOFCHILE"},{localizedString:"Corpbanca",code:"CORPBANCA"},{localizedString:"Deutsche Bank Chile",code:"DEUTSCHEBANKCHILE"},{localizedString:"HSBC Bank Chile",code:"HSBCBANKCHILE"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank",code:"RABOBANK"},{localizedString:"Scotiabank Sud Americano",code:"SCOTIABANKSUDAMERICA"}],[n.Country.CO]:[{localizedString:"AVVillas",code:"AVVILLAS"},{localizedString:"Banagrario",code:"BANAGRARIO"},{localizedString:"Bancamía",code:"BANCAMIA"},{localizedString:"Banco de Bogotá",code:"BANCODEBOGOTA"},{localizedString:"Banco de la República",code:"BANCODELAREPUBLICA"},{localizedString:"Banco de Occidente",code:"BANCODEOCCIDENTE"},{localizedString:"Bancolombia",code:"BANCOLOMBIA"},{localizedString:"Banco Popular",code:"BANCOPOPULAR"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"BBVA Colombia",code:"BBVACOLOMBIA"},{localizedString:"Caja Social",code:"CAJASOCIAL"},{localizedString:"Citibank Colombia",code:"CITIBANKCOLOMBIA"},{localizedString:"Colmena",code:"COLMENA"},{localizedString:"Colpatria",code:"COLPATRIA"},{localizedString:"Davivienda",code:"DAVIVIENDA"},{localizedString:"GBN Sudameris",code:"GBNSUDAMERIS"},{localizedString:"Helm",code:"HELM"},{localizedString:"HSBC Colombia",code:"HSBCCOLOMBIA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Procredit",code:"PROCREDIT"},{localizedString:"RBS Colombia",code:"RBSCOLOMBIA"}],[n.Country.DE]:[{localizedString:"BayernLB",code:"BAYERNLB"},{localizedString:"Commerzbank",code:"COMMERZBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"DZ Bank",code:"DZBANK"},{localizedString:"Eurohypo AG",code:"EUROHYPOAG"},{localizedString:"HSH Nordbank",code:"HSHNORDBANK"},{localizedString:"HVB Group (HypoVereinsbank)",code:"HVBGROUPHYPOVEREINSB"},{localizedString:"Hypo Real Estate Group (HRE Group)",code:"HYPOREALESTATEGROUPH"},{localizedString:"Kfw Bankgruppe",code:"KFWBANKGRUPPE"},{localizedString:"Landesbank Baden-Württemberg",code:"LANDESBANKBADENWURTT"},{localizedString:"Landesbank Berlin (LBB)",code:"LANDESBANKBERLINLBB"},{localizedString:"Landesbank Hessen-Thüringen (Helaba)",code:"LANDESBANKHESSENTHUR"},{localizedString:"Nord/LB (Norddeutsche Landesbank)",code:"NORDLBNORDDEUTSCHELA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"N26",code:"NUMBERTWENTYSIX"},{localizedString:"Postbank AG",code:"POSTBANKAG"},{localizedString:"Sparkasse",code:"SPARKASSE"},{localizedString:"WGZ Bank (Westdeutsche Genossenschafts-Zentralbank)",code:"WGZBANKWESTDEUTSCHEG"}],[n.Country.DK]:[{localizedString:"Alm Brand Bank",code:"ALMBRANDBANK"},{localizedString:"Arbejdernes Landsbank",code:"ARBEJERNESLANDSBANK"},{localizedString:"Danske Bank",code:"DANSKEBANK"},{localizedString:"FIH Erhversbank",code:"FIHERHVERSBANK"},{localizedString:"Jyske Bank",code:"JYSKEBANK"},{localizedString:"Nordea",code:"NORDEA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Nykredit Bank",code:"NYKREDITBANK"},{localizedString:"Spar Nord Bank",code:"SPARNORDBANK"},{localizedString:"Syd Bank",code:"SYDBANK"},{localizedString:"Vestjysk Bank",code:"VESTJYSKBANK"}],[n.Country.EC]:[{localizedString:"Banco Amazonas",code:"BANCOAMAZONAS"},{localizedString:"Banco Bolivariano",code:"BANCOBOLIVARIANO"},{localizedString:"Banco Capital",code:"BANCOCAPITAL"},{localizedString:"Banco Cofiec",code:"BANCOCOFIEC"},{localizedString:"Banco Comercial de Manabí",code:"BANCOCOMERCIALDEMANA"},{localizedString:"Banco Coopnacional",code:"BANCOCOOPNACIONAL"},{localizedString:"Banco de Guayaquil",code:"BANCODEGUAYAQUIL"},{localizedString:"Banco del Austro",code:"BANCODELAUSTRO"},{localizedString:"Banco Delbank",code:"BANCODELBANK"},{localizedString:"Banco del Litoral",code:"BANCODELLITORAL"},{localizedString:"Banco de Loja",code:"BANCODELOJA"},{localizedString:"Banco del Pacífico",code:"BANCODELPACIFICO"},{localizedString:"Banco de Machala",code:"BANCODEMACHALA"},{localizedString:"Banco D-Miro",code:"BANCODMIRO"},{localizedString:"Banco Finca",code:"BANCOFINCA"},{localizedString:"Banco General Rumiñahui",code:"BANCOGENERALRUMINAHU"},{localizedString:"Banco Internacional",code:"BANCOINTERNACIONAL"},{localizedString:"Banco Pichincha",code:"BANCOPICHINCHA"},{localizedString:"Banco Promérica",code:"BANCOPROMERICA"},{localizedString:"Banco Solidario",code:"BANCOSOLIDARIO"},{localizedString:"Banco Sudamericano",code:"BANCOSUDAMERICANO"},{localizedString:"Citibank Ecuador",code:"CITIBANKECUADOR"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"ProCredit Bank",code:"PROCREDITBANK"},{localizedString:"Produbanco",code:"PRODUBANCO"}],[n.Country.ES]:[{localizedString:"Banca March",code:"BANCAMARCH"},{localizedString:"Banco Esfinge",code:"BANCOESFINGE"},{localizedString:"Banco Espíritu Santo",code:"BANCOESPIRITUSANTO"},{localizedString:"Banco Fimestic",code:"BANCOFIMESTIC"},{localizedString:"Banco Inversión",code:"BANCOINVERSION"},{localizedString:"Banco Popular Español",code:"BANCOPOPULARESPANOL"},{localizedString:"Banco Sabadell",code:"BANCOSABADELL"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"Bankia",code:"BANKIA"},{localizedString:"Bankinter",code:"BANKINTER"},{localizedString:"Bankpyme",code:"BANKPYME"},{localizedString:"Barclays Bank",code:"BARCLAYSBANK"},{localizedString:"BBVA",code:"BBVA"},{localizedString:"BCH Broker",code:"BCHBROKER"},{localizedString:"CaixaBank",code:"CAIXABANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"E-Cortal",code:"ECORTAL"},{localizedString:"Fiare Banca Ètica página web de Fiare",code:"FIAREBANCAETICAPAGIN"},{localizedString:"Fibanc",code:"FIBANC"},{localizedString:"Fibane",code:"FIBANE"},{localizedString:"Ibercaja",code:"IBERCAJA"},{localizedString:"ING Direct",code:"INGDIRECT"},{localizedString:"InterCaja Social .ES",code:"INTERCAJASOCIALES"},{localizedString:"Merrill Lynch",code:"MERRILLLYNCH"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Openbank",code:"OPENBANK"},{localizedString:"Salomon Smith Barney",code:"SALOMONSMITHBARNEY"},{localizedString:"Schroders",code:"SCHRODERS"},{localizedString:"Triodos Bank",code:"TRIODOSBANK"},{localizedString:"UNO-e",code:"UNOE"}],[n.Country.FI]:[{localizedString:"Aktia Savings Bank",code:"AKTIASAVINGSBANK"},{localizedString:"Bank of Åland",code:"BANKOFALAND"},{localizedString:"eQ Bank",code:"EQBANK"},{localizedString:"Evli Bank",code:"EVLIBANK"},{localizedString:"Helsinki OP Bank",code:"HELSINKIOPBANK"},{localizedString:"Kaupthing Bank",code:"KAUPTHINGBANK"},{localizedString:"Nordea Bank Finland",code:"NORDEABANKFINLAND"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OP-Kotipankki",code:"OPKOTIPANKKI"},{localizedString:"Pohjola Bank",code:"POHJOLABANK"},{localizedString:"Sampo Bank",code:"SAMPOBANK"},{localizedString:"S-Bank",code:"SBANK"},{localizedString:"SEB Gyllenberg Private Bank",code:"SEBGYLLENBERGPRIVATE"},{localizedString:"Suomen AsuntoHypoPankki",code:"SUOMENASUNTOHYPOPANK"},{localizedString:"Tapiola Bank",code:"TAPIOLABANK"}],[n.Country.FR]:[{localizedString:"Axa Banque",code:"AXA"},{localizedString:"Banque Populaire",code:"BANQPOPUL"},{localizedString:"La Banque Postale",code:"BANQPOSTA"},{localizedString:"Banque Casino",code:"BANQUECASINO"},{localizedString:"Banque de France",code:"BANQUEDEFRANCE"},{localizedString:"Barclays",code:"BARCLAYS"},{localizedString:"BforBank",code:"BFORBANK"},{localizedString:"BNP Paribas",code:"BNP"},{localizedString:"Boursorama Banque",code:"BOURSORAMA"},{localizedString:"BRED",code:"BRED"},{localizedString:"Caisse d'Épargne",code:"CAISSEEPAR"},{localizedString:"Carrefour-Banque",code:"CARREFOURBANQUE"},{localizedString:"CIC",code:"CIC"},{localizedString:"Crédit Mutuel de Bretagne",code:"CMB"},{localizedString:"Crédit Mutuel Nord Europe",code:"CMNE"},{localizedString:"Crédit Agricole",code:"CREDAGRIC"},{localizedString:"Crédit Coopératif",code:"CREDCOOPE"},{localizedString:"Crédit Foncier",code:"CREDFONCI"},{localizedString:"Crédit Mutuel",code:"CREDMUTUEL"},{localizedString:"Crédit du Nord",code:"CREDNORD"},{localizedString:"Fortuneo Banque",code:"FORTUNEOBANQUE"},{localizedString:"Groupama Banque",code:"GROUPAMA"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"ING Direct",code:"INGDIRECT"},{localizedString:"LCL",code:"LCL"},{localizedString:"Autre",code:"NO_TYPE"},{localizedString:"Société Générale",code:"SOGE"}],[n.Country.GB]:[{localizedString:"Barclays Bank",code:"BARCLAYS"},{localizedString:"Coutts",code:"COUTTS"},{localizedString:"HBOS",code:"HBOS"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Lloyds Banking Group",code:"LLOYDS"},{localizedString:"NatWest",code:"NATWEST"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Royal Bank of Scotland (RBS)",code:"RBS"},{localizedString:"Santander",code:"SANTANDER"},{localizedString:"Standard Chartered",code:"STANDCHAR"},{localizedString:"Virgin Money",code:"VIRGINMONEY"},{localizedString:"Yorkshire Bank",code:"YORKSHIRE"},{localizedString:"Yorkshire Building Society",code:"YORKSHIREBS"}],[n.Country.GT]:[{localizedString:"Agromercantil",code:"AGROMERCANTIL"},{localizedString:"Azteca Bank",code:"AZTECABANK"},{localizedString:"BAC Bank",code:"BACBANK"},{localizedString:"Bank of Antigua",code:"BANKOFANTIGUA"},{localizedString:"Bantrab Bank",code:"BANTRABBANK"},{localizedString:"Citi Bank",code:"CITIBANK"},{localizedString:"Credito Hipotecario Bank",code:"CREDITOHIPOTECARIOBA"},{localizedString:"De Credito Bank",code:"DECREDITOBANK"},{localizedString:"Ficohsa Bank",code:"FICOHSABANK"},{localizedString:"G&T Continental Bank",code:"GTCONTINENTALBANK"},{localizedString:"Industrial bank",code:"INDUSTRIALBANK"},{localizedString:"Inmobiliario Bank",code:"INMOBILIARIOBANK"},{localizedString:"Internacional Bank",code:"INTERNACIONALBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Reformador Bank",code:"REFORMADORBANK"},{localizedString:"Vivibanco Bank",code:"VIVIBANCOBANK"}],[n.Country.HK]:[{localizedString:"Bank of China",code:"BANKOFCHINA"},{localizedString:"Bank of East Asia, The",code:"BANKOFEASTASIATHE"},{localizedString:"China CITIC Bank International",code:"CHINACITICBANKINTERN"},{localizedString:"China Construction Bank",code:"CHINACONSTRUCTIONBAN"},{localizedString:"Chiyu Banking Corporation",code:"CHIYUBANKINGCORPORAT"},{localizedString:"Chong Hing Bank",code:"CHONGHINGBANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Dah Sing Bank",code:"DAHSINGBANK"},{localizedString:"DBS Bank",code:"DBSBANK"},{localizedString:"Fubon Bank",code:"FUBONBANK"},{localizedString:"Hang Seng Bank",code:"HANGSENGBANK"},{localizedString:"Hongkong and Shanghai Banking Corporation, The",code:"HONGKONGANDSHANGHAIB"},{localizedString:"Industrial and Commercial Bank of China",code:"INDUSTRIALANDCOMMERC"},{localizedString:"Nanyang Commercial Bank",code:"NANYANGCOMMERCIALBAN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OCBC Wing Hang Bank",code:"OCBCWINGHANGBANK"},{localizedString:"Public Bank",code:"PUBLICBANK"},{localizedString:"Shanghai Commercial Bank",code:"SHANGHAICOMMERCIALBA"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"Tai Sang Bank",code:"TAISANGBANK"},{localizedString:"Tai Yau Bank",code:"TAIYAUBANK"},{localizedString:"Wing Lung Bank",code:"WINGLUNGBANK"}],[n.Country.IE]:[{localizedString:"ACC Bank",code:"ACCBANK"},{localizedString:"Allied Irish Banks",code:"ALLIEDIRISHBANKS"},{localizedString:"Anglo Irish Bank",code:"ANGLOIRISHBANK"},{localizedString:"Bank of Ireland",code:"BANKOFIRELAND"},{localizedString:"Barclays Bank Ireland",code:"BARCLAYSBANKIRELAND"},{localizedString:"Bear Stearns Bank",code:"BEARSTEARNSBANK"},{localizedString:"Capmark Bank Europe",code:"CAPMARKBANKEUROPE"},{localizedString:"Citibank Europe",code:"CITIBANKEUROPE"},{localizedString:"Fortis Prime Fund Solutions Bank",code:"FORTISPRIMEFUNDSOLUT"},{localizedString:"Goldman Sachs Bank",code:"GOLDMANSACHSBANK"},{localizedString:"Goldman Sachs Private Bank",code:"GOLDMANSACHSPRIVATEB"},{localizedString:"Helaba Dublin Landesbank Hessen-Thüringen International",code:"HELABADUBLINLANDESBA"},{localizedString:"Hewlett-Packard International Bank",code:"HEWLETTPACKARDINTERN"},{localizedString:"Hypo Public Finance Bank",code:"HYPOPUBLICFINANCEBAN"},{localizedString:"Intesa Sanpaolo Bank Ireland",code:"INTESASANPAOLOBANKIR"},{localizedString:"Irish Life & Permanent",code:"IRISHLIFEPERMANENT"},{localizedString:"JP Morgan Bank",code:"JPMORGANBANK"},{localizedString:"KBC Bank Ireland",code:"KBCBANKIRELAND"},{localizedString:"LGT Bank",code:"LGTBANK"},{localizedString:"Merrill Lynch International Bank",code:"MERRILLLYNCHINTERNAT"},{localizedString:"Naspa Dublin",code:"NASPADUBLIN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pfizer International Bank Europe",code:"PFIZERINTERNATIONALB"},{localizedString:"PFPC Bank",code:"PFPCBANK"}],[n.Country.IN]:[{localizedString:"ABN AMRO India",code:"ABNAMROINDIA"},{localizedString:"Abu Dhabi Commercial Bank India",code:"ABUDHABICOMMERCIALBA"},{localizedString:"Allahabad Bank",code:"ALLAHABADBANK"},{localizedString:"Andhra Bank",code:"ANDHRABANK"},{localizedString:"Axis Bank Limited",code:"AXISBANKLIMITED"},{localizedString:"Canara Bank",code:"CANARABANK"},{localizedString:"Central Bank of India",code:"CENTRALBANKOFINDIA"},{localizedString:"Centurion Bank of Punjab",code:"CENTURIONBANKOFPUNJA"},{localizedString:"Citibank India",code:"CITIBANKINDIA"},{localizedString:"Corporation Bank",code:"CORPORATIONBANK"},{localizedString:"DCB (Development Credit Bank Ltd)",code:"DCBDEVELOPMENTCREDIT"},{localizedString:"Dena Bank",code:"DENABANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"Guardian Souharda Sahakari Bank Niyamita",code:"GUARDIANSOUHARDASAHA"},{localizedString:"HDFC Bank",code:"HDFCBANK"},{localizedString:"IDBI Bank",code:"IDBIBANK"},{localizedString:"Indian Bank",code:"INDIANBANK"},{localizedString:"Indian Overseas Bank",code:"INDIANOVERSEASBANK"},{localizedString:"IndusInd Bank Ltd",code:"INDUSINDBANKLTD"},{localizedString:"ING Vysya Bank",code:"INGVYSYABANK"},{localizedString:"Maharshtra Bank",code:"MAHARSHTRABANK"},{localizedString:"Mandvi Bank",code:"MANDVIBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Oriental Bank of Commerce",code:"ORIENTALBANKOFCOMMER"},{localizedString:"Saraswat Bank",code:"SARASWATBANK"},{localizedString:"South Indian Bank",code:"SOUTHINDIANBANK"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"State Bank of Hyderabad",code:"STATEBANKOFHYDERABAD"},{localizedString:"State Bank of Saurashtra",code:"STATEBANKOFSAURASHTR"},{localizedString:"Syndicate Bank",code:"SYNDICATEBANK"},{localizedString:"The Federal Bank Ltd",code:"THEFEDERALBANKLTD"},{localizedString:"UCO Bank",code:"UCOBANK"},{localizedString:"Union Bank of India",code:"UNIONBANKOFINDIA"}],[n.Country.IT]:[{localizedString:"Banca Carige",code:"BANCACARIGE"},{localizedString:"Banca Pop. Milano",code:"BANCAPOPMILANO"},{localizedString:"Banco Popolare",code:"BANCOPOPOLARE"},{localizedString:"B Monte Paschi Siena",code:"BMONTEPASCHISIENA"},{localizedString:"Credito Emiliano",code:"CREDITOEMILIANO"},{localizedString:"Intesa Sanpaolo",code:"INTESASANPAOLO"},{localizedString:"Mediobanca",code:"MEDIOBANCA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Ubi Banca",code:"UBIBANCA"},{localizedString:"Unicredit - Capitalia",code:"UNICREDITCAPITALIA"}],[n.Country.JP]:[{localizedString:"Chiba Kōgyō Bank",code:"CHIBAKOGYOBANK"},{localizedString:"Mitsubishi UFJ Financial Group",code:"MITSUBISHIUFJFINANCI"},{localizedString:"Mitsubishi UFJ Trust and Banking Corporation",code:"MITSUBISHIUFJTRUSTAN"},{localizedString:"Mizuho Bank",code:"MIZUHOBANK"},{localizedString:"Mizuho Corporate Bank",code:"MIZUHOCORPORATEBANK"},{localizedString:"Mizuho Financial Group",code:"MIZUHOFINANCIALGROUP"},{localizedString:"Mizuho Trust & Banking Co.",code:"MIZUHOTRUSTBANKINGCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Sumitomo Mitsui Banking Corporation",code:"SUMITOMOMITSUIBANKIN"},{localizedString:"Sumitomo Mitsui Financial Group",code:"SUMITOMOMITSUIFINANC"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Master Trust Bank of Japan",code:"THEMASTERTRUSTBANKOF"},{localizedString:"The Senshū Bank",code:"THESENSHUBANK"},{localizedString:"Trust & Custody Services Bank",code:"TRUSTCUSTODYSERVICES"}],[n.Country.LU]:[{localizedString:"Banque et Caisse d'Epargne de l'Etat, Luxembourg (BCEE)",code:"BANQUEETCAISSEDEPARG"},{localizedString:"Banque Générale du Luxembourg",code:"BANQUEGENERALEDULUXE"},{localizedString:"Banque IPPA et Associes Luxembourg",code:"BANQUEIPPAETASSOCIES"},{localizedString:"Banque UCL",code:"BANQUEUCL"},{localizedString:"Die Sparkasse Bremen",code:"DIESPARKASSEBREMEN"},{localizedString:"KBL",code:"KBL"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Robeco Bank",code:"ROBECOBANK"},{localizedString:"SGZ-Bank International",code:"SGZBANKINTERNATIONAL"},{localizedString:"WestLB International",code:"WESTLBINTERNATIONAL"}],[n.Country.MX]:[{localizedString:"Banamex",code:"BANAMEX"},{localizedString:"Banca Afirme",code:"BANCAAFIRME"},{localizedString:"Banco Azteca",code:"BANCOAZTECA"},{localizedString:"Banco del Bajio",code:"BANCODELBAJIO"},{localizedString:"Banco J.P. Morgan",code:"BANCOJPMORGAN"},{localizedString:"Bank of America Mexico",code:"BANKOFAMERICAMEXICO"},{localizedString:"Banorte",code:"BANORTE"},{localizedString:"BanRegio",code:"BANREGIO"},{localizedString:"BBVA Bancomer",code:"BBVABANCOMER"},{localizedString:"Deutsche Bank Mexico",code:"DEUTSCHEBANKMEXICO"},{localizedString:"HSBC Mexico",code:"HSBCMEXICO"},{localizedString:"Inbursa",code:"INBURSA"},{localizedString:"ING Bank Mexico",code:"INGBANKMEXICO"},{localizedString:"Interacciones",code:"INTERACCIONES"},{localizedString:"Invex Controladora",code:"INVEXCONTROLADORA"},{localizedString:"Ixe Banco",code:"IXEBANCO"},{localizedString:"Mifel",code:"MIFEL"},{localizedString:"Monex",code:"MONEX"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Santander Mexico",code:"SANTANDERMEXICO"},{localizedString:"Scotiabank Inverlat",code:"SCOTIABANKINVERLAT"}],[n.Country.NL]:[{localizedString:"ABN Amro",code:"ABNAMRO"},{localizedString:"Amsterdam Trade Bank",code:"AMSTERDAMTRADEBANK"},{localizedString:"ASN Bank",code:"ASNBANK"},{localizedString:"Bank Mendes Gans",code:"BANKMENDESGANS"},{localizedString:"Bank Nederlandse Gemeenten",code:"BANKNEDERLANDSEGEMEE"},{localizedString:"BinckBank",code:"BINCKBANK"},{localizedString:"Credit Europe Bank",code:"CREDITEUROPEBANK"},{localizedString:"Demir Halk Bank",code:"DEMIRHALKBANK"},{localizedString:"Friesland Bank",code:"FRIESLANDBANK"},{localizedString:"GE Artesia Bank",code:"GEARTESIABANK"},{localizedString:"ING Group",code:"INGGROUP"},{localizedString:"Kempen & Co",code:"KEMPENCO"},{localizedString:"Nederlandse Waterschapsbank",code:"NEDERLANDSEWATERSCHA"},{localizedString:"Netherlands Development Finance Company",code:"NETHERLANDSDEVELOPME"},{localizedString:"NIBC Bank",code:"NIBCBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank",code:"RABOBANK"},{localizedString:"SNS Bank",code:"SNSBANK"},{localizedString:"Triodos Bank",code:"TRIODOSBANK"},{localizedString:"Van Lanschot",code:"VANLANSCHOT"}],[n.Country.NO]:[{localizedString:"Bolig- og Næringsbanken",code:"BOLIGOGNAERINGSBANKE"},{localizedString:"Cresco",code:"CRESCO"},{localizedString:"DnB NOR Bank",code:"DNBNORBANK"},{localizedString:"Fokus Bank",code:"FOKUSBANK"},{localizedString:"Landkreditt Bank",code:"LANDKREDITTBANK"},{localizedString:"Netfonds Bank",code:"NETFONDSBANK"},{localizedString:"Nordea Bank Norge",code:"NORDEABANKNORGE"},{localizedString:"Nordlandsbanken",code:"NORDLANDSBANKEN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pareto Bank",code:"PARETOBANK"},{localizedString:"Santander Consumer Bank",code:"SANTANDERCONSUMERBAN"},{localizedString:"SEB Privatbanken",code:"SEBPRIVATBANKEN"},{localizedString:"Storebrand Bank",code:"STOREBRANDBANK"},{localizedString:"Verdibanken",code:"VERDIBANKEN"},{localizedString:"Voss Veksel- og Landmandsbank",code:"VOSSVEKSELOGLANDMAND"},{localizedString:"yA Bank",code:"YABANK"}],[n.Country.NZ]:[{localizedString:"ANZ Bank of New Zealand Limited",code:"ANZBANKOFNEWZEALANDL"},{localizedString:"ASB Bank Limited",code:"ASBBANKLIMITED"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Bank of Baroda (New Zealand) Limited",code:"BANKOFBARODANEWZEALA"},{localizedString:"Bank of China (New Zealand) Limited",code:"BANKOFCHINANEWZEALAN"},{localizedString:"Bank of India (New Zealand) Limited",code:"BANKOFINDIANEWZEALAN"},{localizedString:"Bank of New Zealand",code:"BANKOFNEWZEALAND"},{localizedString:"China Construction Bank",code:"CHINACONSTRUCTIONBAN"},{localizedString:"Citibank N.A.",code:"CITIBANKNA"},{localizedString:"Commonwealth Bank of Australia",code:"COMMONWEALTHBANKOFAU"},{localizedString:"Deutsche Bank AG",code:"DEUTSCHEBANKAG"},{localizedString:"Heartland Bank Limited",code:"HEARTLANDBANKLIMITED"},{localizedString:"ICBC",code:"ICBC"},{localizedString:"JPMorgan Chase Bank N.A.",code:"JPMORGANCHASEBANKNA"},{localizedString:"Kiwibank Limited",code:"KIWIBANKLIMITED"},{localizedString:"Kookmin Bank",code:"KOOKMINBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank Nederland",code:"RABOBANKNEDERLAND"},{localizedString:"Rabobank New Zealand Limited",code:"RABOBANKNEWZEALANDLI"},{localizedString:"Southland Building Society",code:"SOUTHLANDBUILDINGSOC"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Co-operative Bank Limited",code:"THECOOPERATIVEBANKLI"},{localizedString:"The Hongkong and Shanghai Banking Corp",code:"THEHONGKONGANDSHANGH"},{localizedString:"TSB Bank Limited",code:"TSBBANKLIMITED"},{localizedString:"Westpac Banking Corporation",code:"WESTPACBANKINGCORPOR"},{localizedString:"Westpac New Zealand Limited",code:"WESTPACNEWZEALANDLIM"}],[n.Country.PE]:[{localizedString:"Agrobanco",code:"AGROBANCO"},{localizedString:"Banco Azteca",code:"BANCOAZTECA"},{localizedString:"Banco Central de Reserva del Perú",code:"BANCOCENTRALDERESERV"},{localizedString:"Banco de Comercio",code:"BANCODECOMERCIO"},{localizedString:"Banco del Trabajo",code:"BANCODELTRABAJO"},{localizedString:"Banco de Materiales",code:"BANCODEMATERIALES"},{localizedString:"Banco Falabella",code:"BANCOFALABELLA"},{localizedString:"Banco Financiero",code:"BANCOFINANCIERO"},{localizedString:"Banco Interamericano de Finanzas",code:"BANCOINTERAMERICANOD"},{localizedString:"Banco Ripley",code:"BANCORIPLEY"},{localizedString:"BBVA",code:"BBVA"},{localizedString:"BCP",code:"BCP"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Interbank",code:"INTERBANK"},{localizedString:"Mibanco",code:"MIBANCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Santander",code:"SANTANDER"},{localizedString:"Scotiabank",code:"SCOTIABANK"},{localizedString:"Standard Chartered",code:"STANDARDCHARTERED"}],[n.Country.PH]:[{localizedString:"Al-Amanah Islamic Investment Bank of the Philippines",code:"ALAMANAHISLAMICINVES"},{localizedString:"Asia United Bank",code:"ASIAUNITEDBANK"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Bangkok Bank",code:"BANGKOKBANK"},{localizedString:"Bank of America, N.A.",code:"BANKOFAMERICANA"},{localizedString:"Bank of China",code:"BANKOFCHINA"},{localizedString:"Bank of Commerce",code:"BANKOFCOMMERCE"},{localizedString:"Bank of the Philippine Islands",code:"BANKOFTHEPHILIPPINEI"},{localizedString:"BDO Private Bank",code:"BDOPRIVATEBANK"},{localizedString:"BDO Unibank",code:"BDOUNIBANK"},{localizedString:"Chinabank",code:"CHINABANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"CTBC Bank",code:"CTBCBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"Development Bank of the Philippines",code:"DEVELOPMENTBANKOFTHE"},{localizedString:"EastWest Bank",code:"EASTWESTBANK"},{localizedString:"ING Group",code:"INGGROUP"},{localizedString:"JPMorgan Chase",code:"JPMORGANCHASE"},{localizedString:"Land Bank of the Philippines",code:"LANDBANKOFTHEPHILIPP"},{localizedString:"Maybank Philippines, Inc.",code:"MAYBANKPHILIPPINESIN"},{localizedString:"Mega International Commercial Bank",code:"MEGAINTERNATIONALCOM"},{localizedString:"Metropolitan Bank and Trust Company",code:"METROPOLITANBANKANDT"},{localizedString:"Mizuho Bank, Ltd.",code:"MIZUHOBANKLTD"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Philippine Bank of Communications",code:"PHILIPPINEBANKOFCOMM"},{localizedString:"Philippine National Bank",code:"PHILIPPINENATIONALBA"},{localizedString:"Philippine Veterans Bank",code:"PHILIPPINEVETERANSBA"},{localizedString:"Philtrust Bank",code:"PHILTRUSTBANK"},{localizedString:"Rizal Commercial Banking Corporation",code:"RIZALCOMMERCIALBANKI"},{localizedString:"Robinsons Bank",code:"ROBINSONSBANK"},{localizedString:"Security Bank",code:"SECURITYBANK"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ, Ltd.",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Hongkong and Shanghai Banking Corporation",code:"THEHONGKONGANDSHANGH"},{localizedString:"Union Bank of the Philippines",code:"UNIONBANKOFTHEPHILIP"},{localizedString:"United Coconut Planters Bank",code:"UNITEDCOCONUTPLANTER"}],[n.Country.PT]:[{localizedString:"Atlantico - Banco Português do Atlântico",code:"ATLANTICOBANCOPORTUG"},{localizedString:"Banco 7",code:"BANCO7"},{localizedString:"Banco BPI",code:"BANCOBPI"},{localizedString:"Banco Comercial Português",code:"BANCOCOMERCIALPORTUG"},{localizedString:"Banco de Portugal",code:"BANCODEPORTUGAL"},{localizedString:"Banco Espirito Santo",code:"BANCOESPIRITOSANTO"},{localizedString:"Banco Internacional de Crédito, S.A.",code:"BANCOINTERNACIONALDE"},{localizedString:"Banco Mello",code:"BANCOMELLO"},{localizedString:"Banif - Banco Internacional do Funchal",code:"BANIFBANCOINTERNACIO"},{localizedString:"Barclays Netbanking Portugal",code:"BARCLAYSNETBANKINGPO"},{localizedString:"Caixa Geral de Depósitos",code:"CAIXAGERALDEDEPOSITO"},{localizedString:"Cisf - Banco de Investimento, S.A.",code:"CISFBANCODEINVESTIME"},{localizedString:"Other",code:"NO_TYPE"}],[n.Country.SE]:[{localizedString:"ABN AMRO Bank Sweden",code:"ABNAMROBANKSWEDEN"},{localizedString:"First Baltic Savings",code:"FIRSTBALTICSAVINGS"},{localizedString:"FöreningsSparbanken (Swedbank)",code:"FORENINGSSPARBANKENS"},{localizedString:"JP Bank",code:"JPBANK"},{localizedString:"Nordbanken",code:"NORDBANKEN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Östgöta Enskilda Bank",code:"OSTGOTAENSKILDABANK"},{localizedString:"Skandia Banken",code:"SKANDIABANKEN"},{localizedString:"Skandinaviska Enskilda Banken",code:"SKANDINAVISKAENSKILD"},{localizedString:"Sparbanken Sverige - Swedbank",code:"SPARBANKENSVERIGESWE"},{localizedString:"Stadshypotek",code:"STADSHYPOTEK"},{localizedString:"Svenska Handelsbanken-SHB",code:"SVENSKAHANDELSBANKEN"},{localizedString:"Sveriges Riksbank",code:"SVERIGESRIKSBANK"},{localizedString:"Trygg Hansa",code:"TRYGGHANSA"},{localizedString:"Westra Wermlands Sparbank",code:"WESTRAWERMLANDSSPARB"}],[n.Country.SG]:[{localizedString:"Bank of America",code:"BANKOFAMERICA"},{localizedString:"Barclays bank",code:"BARCLAYSBANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Developmental Bank of Singapore",code:"DEVELOPMENTALBANKOFS"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OCBC Bank",code:"OCBCBANK"},{localizedString:"Post Office Savings Bank",code:"POSTOFFICESAVINGSBAN"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"State Bank of India",code:"STATEBANKOFINDIA"},{localizedString:"United Overseas Bank",code:"UNITEDOVERSEASBANK"}],[n.Country.US]:[{localizedString:"Ally Bank",code:"ALLY"},{localizedString:"American Express",code:"AMERICANEXPRESS"},{localizedString:"Associated Bank",code:"ASSOCIATED"},{localizedString:"Bank of the West",code:"BANKWEST"},{localizedString:"Barclays Bank",code:"BARCLAYS"},{localizedString:"BMO Harris Bank",code:"BMO"},{localizedString:"Bank of America",code:"BOA"},{localizedString:"Branch Banking and Trust Company",code:"BRANCH"},{localizedString:"Capital One",code:"CAPITALONE"},{localizedString:"Charles Schwab Bank",code:"CHARSCHWA"},{localizedString:"Chase Bank USA",code:"CHASE"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Citizens Bank of Pennsylvania",code:"CITIZENS"},{localizedString:"City National Bank",code:"CITYNATIONAL"},{localizedString:"Compass Bank",code:"COMPASS"},{localizedString:"CU Hawaii",code:"CUHAWAII"},{localizedString:"Discover Bank",code:"DISCOVER"},{localizedString:"E-Trade Bank",code:"ETRADE"},{localizedString:"Fifth Third Bank",code:"FIFTHTHIRD"},{localizedString:"First-Citizens Bank and Trust Company",code:"FIRSTCITIZENS"},{localizedString:"Fortune Bank",code:"FORTUNEBANK"},{localizedString:"Harris National Association",code:"HARRIS"},{localizedString:"HSBC Bank USA",code:"HSBC"},{localizedString:"Hudson City Savings Bank",code:"HUDSONCITY"},{localizedString:"The Huntington National Bank",code:"HUNTINGTON"},{localizedString:"ING Bank, fsb",code:"INGBANK"},{localizedString:"JPMorgan Chase Bank",code:"JPMORGAN"},{localizedString:"Keybank",code:"KEYBANK"},{localizedString:"Manufacturers and Traders Trust Company",code:"MANUFACTUR"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"New York Community Bank",code:"NYCOMMUNITY"},{localizedString:"The Bank of New York Mellon",code:"NYMELLON"},{localizedString:"PNC Bank",code:"PNC"},{localizedString:"Banco Popular de Puerto Rico",code:"PUERTORICO"},{localizedString:"RBC Bank",code:"RBC"},{localizedString:"RBS Citizens",code:"RBS"},{localizedString:"Regions Bank",code:"REGIONS"},{localizedString:"Sovereign Bank",code:"SOVEREIGN"},{localizedString:"State Street Bank and Trust Co.",code:"STATESTREET"},{localizedString:"SunTrust Bank",code:"SUNTRUST"},{localizedString:"Silicon Valley Bank",code:"SVB"},{localizedString:"Synovus Bank",code:"SYNOVUS"},{localizedString:"TD Bank",code:"TDBANK"},{localizedString:"UBS Bank",code:"UBS"},{localizedString:"Union Bank",code:"UNION"},{localizedString:"USAA Federal Savings Bank",code:"USAAFEDERAL"},{localizedString:"U.S. Bank",code:"USBANK"},{localizedString:"Wells Fargo",code:"WELLSFARGO"}],[n.Country.VE]:[{localizedString:"100% Banco",code:"100BANCO"},{localizedString:"Bancaribe",code:"BANCARIBE"},{localizedString:"Banco Bicentenario",code:"BANCOBICENTENARIO"},{localizedString:"Banco de Venezuela",code:"BANCODEVENEZUELA"},{localizedString:"Banco Industrial de Venezuela",code:"BANCOINDUSTRIALDEVEN"},{localizedString:"Banco Mercantil",code:"BANCOMERCANTIL"},{localizedString:"Banco Nacional de Crédito",code:"BANCONACIONALDECREDI"},{localizedString:"Banco Occidental de Descuento",code:"BANCOOCCIDENTALDEDES"},{localizedString:"Banco Venezolano de Crédito",code:"BANCOVENEZOLANODECRE"},{localizedString:"Bandes",code:"BANDES"},{localizedString:"Banesco",code:"BANESCO"},{localizedString:"BBVA Provincial",code:"BBVAPROVINCIAL"},{localizedString:"Central Bank of Venezuela",code:"CENTRALBANKOFVENEZUE"},{localizedString:"Fondo Común",code:"FONDOCOMUN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Sofitasa",code:"SOFITASA"},{localizedString:"Women's Development Bank",code:"WOMENSDEVELOPMENTBAN"}],[n.Country.ZA]:[{localizedString:"Absa",code:"ABSA"},{localizedString:"Capitec Banking Group",code:"CAPITECBANKINGGROUP"},{localizedString:"FNB",code:"FNB"},{localizedString:"Investec Bank",code:"INVESTECBANK"},{localizedString:"Nedbank",code:"NEDBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Standard Bank",code:"STANDARDBANK"}]}},85406:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllBanks=t.getBanks=void 0;const n=r(82912);t.getBanks=function(e){return{banks:n.banks[e.country]}},t.getAllBanks=function(){return n.banks}},43651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(53576);t.default={[n.Country.AD]:376,[n.Country.AE]:971,[n.Country.AF]:93,[n.Country.AG]:1268,[n.Country.AI]:1264,[n.Country.AL]:355,[n.Country.AM]:374,[n.Country.AO]:244,[n.Country.AQ]:672,[n.Country.AR]:54,[n.Country.AS]:1684,[n.Country.AT]:43,[n.Country.AU]:61,[n.Country.AW]:297,[n.Country.AX]:358,[n.Country.AZ]:994,[n.Country.BA]:387,[n.Country.BB]:1246,[n.Country.BD]:880,[n.Country.BE]:32,[n.Country.BF]:226,[n.Country.BG]:359,[n.Country.BH]:973,[n.Country.BI]:257,[n.Country.BJ]:229,[n.Country.BL]:590,[n.Country.BM]:1441,[n.Country.BN]:673,[n.Country.BO]:591,[n.Country.BR]:55,[n.Country.BS]:1242,[n.Country.BT]:975,[n.Country.BW]:267,[n.Country.BY]:375,[n.Country.BZ]:501,[n.Country.CA]:1,[n.Country.CC]:61,[n.Country.CD]:243,[n.Country.CF]:236,[n.Country.CG]:242,[n.Country.CH]:41,[n.Country.CI]:225,[n.Country.CK]:682,[n.Country.CL]:56,[n.Country.CM]:237,[n.Country.CN]:86,[n.Country.CO]:57,[n.Country.CR]:506,[n.Country.CU]:53,[n.Country.CV]:238,[n.Country.CX]:61,[n.Country.CY]:357,[n.Country.CZ]:420,[n.Country.DE]:49,[n.Country.DJ]:253,[n.Country.DK]:45,[n.Country.DM]:1767,[n.Country.DO]:1849,[n.Country.DZ]:213,[n.Country.EC]:593,[n.Country.EE]:372,[n.Country.EG]:20,[n.Country.ER]:291,[n.Country.ES]:34,[n.Country.ET]:251,[n.Country.FI]:358,[n.Country.FJ]:679,[n.Country.FK]:500,[n.Country.FM]:691,[n.Country.FO]:298,[n.Country.FR]:33,[n.Country.GA]:241,[n.Country.GB]:44,[n.Country.GD]:1473,[n.Country.GE]:995,[n.Country.GF]:594,[n.Country.GG]:44,[n.Country.GH]:233,[n.Country.GI]:350,[n.Country.GL]:299,[n.Country.GM]:220,[n.Country.GN]:224,[n.Country.GP]:590,[n.Country.GQ]:240,[n.Country.GR]:30,[n.Country.GS]:500,[n.Country.GT]:502,[n.Country.GU]:1671,[n.Country.GW]:245,[n.Country.GY]:595,[n.Country.HK]:852,[n.Country.HN]:504,[n.Country.HR]:385,[n.Country.HT]:509,[n.Country.HU]:36,[n.Country.ID]:62,[n.Country.IE]:353,[n.Country.IL]:972,[n.Country.IM]:44,[n.Country.IN]:91,[n.Country.IO]:246,[n.Country.IQ]:964,[n.Country.IR]:98,[n.Country.IS]:354,[n.Country.IT]:39,[n.Country.JE]:44,[n.Country.JM]:1876,[n.Country.JO]:962,[n.Country.JP]:81,[n.Country.KE]:254,[n.Country.KG]:996,[n.Country.KH]:855,[n.Country.KI]:686,[n.Country.KM]:269,[n.Country.KN]:1869,[n.Country.KP]:850,[n.Country.KR]:82,[n.Country.KW]:965,[n.Country.KY]:345,[n.Country.KZ]:77,[n.Country.LA]:856,[n.Country.LB]:961,[n.Country.LC]:1758,[n.Country.LI]:423,[n.Country.LK]:94,[n.Country.LR]:231,[n.Country.LS]:266,[n.Country.LT]:370,[n.Country.LU]:352,[n.Country.LV]:371,[n.Country.LY]:218,[n.Country.MA]:212,[n.Country.MC]:377,[n.Country.MD]:373,[n.Country.ME]:382,[n.Country.MF]:590,[n.Country.MG]:261,[n.Country.MH]:692,[n.Country.MK]:389,[n.Country.ML]:223,[n.Country.MM]:95,[n.Country.MN]:976,[n.Country.MO]:853,[n.Country.MP]:1670,[n.Country.MQ]:596,[n.Country.MR]:222,[n.Country.MS]:1664,[n.Country.MT]:356,[n.Country.MU]:230,[n.Country.MV]:960,[n.Country.MW]:265,[n.Country.MX]:52,[n.Country.MY]:60,[n.Country.MZ]:258,[n.Country.NA]:264,[n.Country.NC]:687,[n.Country.NE]:227,[n.Country.NF]:672,[n.Country.NG]:234,[n.Country.NI]:505,[n.Country.NL]:31,[n.Country.NO]:47,[n.Country.NP]:977,[n.Country.NR]:674,[n.Country.NU]:683,[n.Country.NZ]:64,[n.Country.OM]:968,[n.Country.PA]:507,[n.Country.PE]:51,[n.Country.PF]:689,[n.Country.PG]:675,[n.Country.PH]:63,[n.Country.PK]:92,[n.Country.PL]:48,[n.Country.PM]:508,[n.Country.PN]:872,[n.Country.PR]:1939,[n.Country.PS]:970,[n.Country.PT]:351,[n.Country.PW]:680,[n.Country.PY]:595,[n.Country.QA]:974,[n.Country.RE]:262,[n.Country.RO]:40,[n.Country.RS]:381,[n.Country.RU]:7,[n.Country.RW]:250,[n.Country.SA]:966,[n.Country.SB]:677,[n.Country.SC]:248,[n.Country.SD]:249,[n.Country.SE]:46,[n.Country.SG]:65,[n.Country.SH]:290,[n.Country.SI]:386,[n.Country.SJ]:47,[n.Country.SK]:421,[n.Country.SL]:232,[n.Country.SM]:378,[n.Country.SN]:221,[n.Country.SO]:252,[n.Country.SR]:597,[n.Country.ST]:239,[n.Country.SV]:503,[n.Country.SY]:963,[n.Country.SZ]:268,[n.Country.TC]:1649,[n.Country.TD]:235,[n.Country.TG]:228,[n.Country.TH]:66,[n.Country.TJ]:992,[n.Country.TK]:690,[n.Country.TL]:670,[n.Country.TM]:993,[n.Country.TN]:216,[n.Country.TO]:676,[n.Country.TR]:90,[n.Country.TT]:1868,[n.Country.TV]:688,[n.Country.TW]:886,[n.Country.TZ]:255,[n.Country.UA]:380,[n.Country.UG]:256,[n.Country.US]:1,[n.Country.UY]:598,[n.Country.UZ]:998,[n.Country.VA]:379,[n.Country.VC]:1784,[n.Country.VE]:58,[n.Country.VG]:1284,[n.Country.VI]:1340,[n.Country.VN]:84,[n.Country.VU]:678,[n.Country.WF]:681,[n.Country.WS]:685,[n.Country.XK]:383,[n.Country.YE]:967,[n.Country.YT]:262,[n.Country.ZA]:27,[n.Country.ZM]:260,[n.Country.ZW]:263}},39003:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllCallingCodes=t.processQuery=void 0;const n=r(53576),o=r(43651);t.processQuery=function(){return{type:n.StaticDataQueryType.CALLING_CODES,collection:o.default}},t.getAllCallingCodes=function(){return o.default}},80814:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeographicStatesLevel1=t.GeographicStatesLevel0=void 0;const n=r(53576);t.GeographicStatesLevel0={[n.Country.FR]:{"FR-0-42":{code:"42",name:"Alsace"},"FR-0-72":{code:"72",name:"Aquitaine"},"FR-0-83":{code:"83",name:"Auvergne"},"FR-0-25":{code:"25",name:"Basse-Normandie"},"FR-0-26":{code:"26",name:"Bourgogne"},"FR-0-53":{code:"53",name:"Bretagne"},"FR-0-24":{code:"24",name:"Centre"},"FR-0-21":{code:"21",name:"Champagne-Ardenne"},"FR-0-94":{code:"94",name:"Corse"},"FR-0-43":{code:"43",name:"Franche-Comte"},"FR-0-01":{code:"01",name:"Guadeloupe"},"FR-0-03":{code:"03",name:"Guyane"},"FR-0-23":{code:"23",name:"Haute-Normandie"},"FR-0-11":{code:"11",name:"Ile-de-France"},"FR-0-04":{code:"04",name:"La Reunion"},"FR-0-91":{code:"91",name:"Languedoc-Roussillon"},"FR-0-74":{code:"74",name:"Limousin"},"FR-0-41":{code:"41",name:"Lorraine"},"FR-0-02":{code:"02",name:"Martinique"},"FR-0-73":{code:"73",name:"Midi-Pyrenees"},"FR-0-31":{code:"31",name:"Nord-Pas-de-Calais"},"FR-0-52":{code:"52",name:"Pays de la Loire"},"FR-0-22":{code:"22",name:"Picardie"},"FR-0-54":{code:"54",name:"Poitou-Charentes"},"FR-0-93":{code:"93",name:"Provence-Alpes-Cote d'Azur"},"FR-0-82":{code:"82",name:"Rhone-Alpes"}},[n.Country.GB]:{"GB-0-67":{code:"67",name:"Aberdeenshire"},"GB-0-68":{code:"68",name:"Angus"},"GB-0-69":{code:"69",name:"Antrim"},"GB-0-70":{code:"70",name:"Ards"},"GB-0-71":{code:"71",name:"Argyll"},"GB-0-72":{code:"72",name:"Armagh"},"GB-0-01":{code:"01",name:"Avon"},"GB-0-73":{code:"73",name:"Ayrshire"},"GB-0-74":{code:"74",name:"Ballymena"},"GB-0-75":{code:"75",name:"Ballymoney"},"GB-0-76":{code:"76",name:"Banbridge"},"GB-0-77":{code:"77",name:"Banffshire"},"GB-0-78":{code:"78",name:"Bath & NthEstSomerset"},"GB-0-02":{code:"02",name:"Bedfordshire"},"GB-0-79":{code:"79",name:"Belfast"},"GB-0-03":{code:"03",name:"Berkshire"},"GB-0-80":{code:"80",name:"Berwickshire"},"GB-0-81":{code:"81",name:"Blackburn"},"GB-0-82":{code:"82",name:"Blackpool"},"GB-0-04":{code:"04",name:"Borders"},"GB-0-83":{code:"83",name:"Bournemouth"},"GB-0-84":{code:"84",name:"Bracknell Forest"},"GB-0-85":{code:"85",name:"Brighton & Hove"},"GB-0-86":{code:"86",name:"Bristol"},"GB-0-05":{code:"05",name:"Buckinghamshire"},"GB-0-87":{code:"87",name:"Caithness"},"GB-0-06":{code:"06",name:"Cambridgeshire"},"GB-0-88":{code:"88",name:"Carrickfergus"},"GB-0-89":{code:"89",name:"Castlereagh"},"GB-0-07":{code:"07",name:"Central"},"GB-0-08":{code:"08",name:"Cheshire"},"GB-0-91":{code:"91",name:"Clackmannanshire"},"GB-0-12":{code:"12",name:"Cleveland"},"GB-0-09":{code:"09",name:"Clwyd"},"GB-0-92":{code:"92",name:"Coleraine"},"GB-0-93":{code:"93",name:"Cookstown"},"GB-0-10":{code:"10",name:"Cornwall"},"GB-0-94":{code:"94",name:"Craigavon"},"GB-0-11":{code:"11",name:"Cumbria"},"GB-0-95":{code:"95",name:"Darlington"},"GB-0-13":{code:"13",name:"Derbyshire"},"GB-0-16":{code:"16",name:"Devon"},"GB-0-14":{code:"14",name:"Dorset"},"GB-0-96":{code:"96",name:"Down"},"GB-0-97":{code:"97",name:"Dumfries a. Galloway"},"GB-0-98":{code:"98",name:"Dumfriesshire"},"GB-0-99":{code:"99",name:"Dunbartonshire"},"GB-0-100":{code:"100",name:"Dungannon"},"GB-0-15":{code:"15",name:"Durham"},"GB-0-17":{code:"17",name:"Dyfed"},"GB-0-101":{code:"101",name:"East Lothian"},"GB-0-102":{code:"102",name:"East Riding"},"GB-0-103":{code:"103",name:"East Sussex"},"GB-0-18":{code:"18",name:"Essex"},"GB-0-104":{code:"104",name:"Fermanagh"},"GB-0-19":{code:"19",name:"Fife"},"GB-0-20":{code:"20",name:"Gloucestershire"},"GB-0-22":{code:"22",name:"Grampian"},"GB-0-36":{code:"36",name:"Greater London"},"GB-0-21":{code:"21",name:"Greater Manchester"},"GB-0-23":{code:"23",name:"Gwent"},"GB-0-24":{code:"24",name:"Gwynedd"},"GB-0-105":{code:"105",name:"Halton"},"GB-0-25":{code:"25",name:"Hampshire"},"GB-0-106":{code:"106",name:"Hartlepool"},"GB-0-29":{code:"29",name:"Hereford and Worcs."},"GB-0-107":{code:"107",name:"Herefordshire"},"GB-0-27":{code:"27",name:"Hertfordshire"},"GB-0-108":{code:"108",name:"Highland"},"GB-0-28":{code:"28",name:"Humberside"},"GB-0-109":{code:"109",name:"Inverness-Shire"},"GB-0-110":{code:"110",name:"Isle Of Arran"},"GB-0-111":{code:"111",name:"Isle Of Barra"},"GB-0-112":{code:"112",name:"Isle Of Benbecula"},"GB-0-113":{code:"113",name:"Isle Of Bute"},"GB-0-114":{code:"114",name:"Isle Of Canna"},"GB-0-115":{code:"115",name:"Isle Of Coll"},"GB-0-116":{code:"116",name:"Isle Of Colonsay"},"GB-0-117":{code:"117",name:"Isle Of Cumbrae"},"GB-0-118":{code:"118",name:"Isle Of Eigg"},"GB-0-119":{code:"119",name:"Isle Of Gigha"},"GB-0-120":{code:"120",name:"Isle Of Harris"},"GB-0-121":{code:"121",name:"Isle Of Iona"},"GB-0-122":{code:"122",name:"Isle Of Islay"},"GB-0-123":{code:"123",name:"Isle Of Jura"},"GB-0-124":{code:"124",name:"Isle Of Lewis"},"GB-0-126":{code:"126",name:"Isle Of Mull"},"GB-0-127":{code:"127",name:"Isle Of North Uist"},"GB-0-128":{code:"128",name:"Isle Of Rum"},"GB-0-129":{code:"129",name:"Isle Of Scalpay"},"GB-0-131":{code:"131",name:"Isle Of Skye"},"GB-0-132":{code:"132",name:"Isle Of South Uist"},"GB-0-133":{code:"133",name:"Isle Of Tiree"},"GB-0-31":{code:"31",name:"Isle of Wight"},"GB-0-130":{code:"130",name:"Isles Of Scilly"},"GB-0-32":{code:"32",name:"Kent"},"GB-0-134":{code:"134",name:"Kincardineshire"},"GB-0-135":{code:"135",name:"Kingston-Upon-Hull"},"GB-0-136":{code:"136",name:"Kirkcudbrightshire"},"GB-0-137":{code:"137",name:"Lanarkshire"},"GB-0-33":{code:"33",name:"Lancashire"},"GB-0-138":{code:"138",name:"Larne"},"GB-0-139":{code:"139",name:"Leicester City"},"GB-0-34":{code:"34",name:"Leicestershire"},"GB-0-140":{code:"140",name:"Limavady"},"GB-0-35":{code:"35",name:"Lincolnshire"},"GB-0-141":{code:"141",name:"Lisburn"},"GB-0-142":{code:"142",name:"London"},"GB-0-143":{code:"143",name:"Londonderry"},"GB-0-37":{code:"37",name:"Lothian"},"GB-0-144":{code:"144",name:"Luton"},"GB-0-145":{code:"145",name:"Magherafelt"},"GB-0-39":{code:"39",name:"Merseyside"},"GB-0-38":{code:"38",name:"Mid Glamorgan"},"GB-0-146":{code:"146",name:"Middlesbrough"},"GB-0-65":{code:"65",name:"Middlesex"},"GB-0-147":{code:"147",name:"Midlothian"},"GB-0-148":{code:"148",name:"Milton Keynes"},"GB-0-149":{code:"149",name:"Morayshire"},"GB-0-150":{code:"150",name:"Moyle"},"GB-0-151":{code:"151",name:"Nairn"},"GB-0-152":{code:"152",name:"Newbury"},"GB-0-153":{code:"153",name:"Newry and Mourne"},"GB-0-154":{code:"154",name:"Newtownabbey"},"GB-0-41":{code:"41",name:"Norfolk"},"GB-0-155":{code:"155",name:"North Down"},"GB-0-156":{code:"156",name:"North Humberside"},"GB-0-157":{code:"157",name:"North Lincolnshire"},"GB-0-158":{code:"158",name:"North Somerset"},"GB-0-62":{code:"62",name:"North Yorkshire"},"GB-0-40":{code:"40",name:"Northamptonshire"},"GB-0-43":{code:"43",name:"Northumberland"},"GB-0-159":{code:"159",name:"Nottingham City"},"GB-0-42":{code:"42",name:"Nottinghamshire"},"GB-0-160":{code:"160",name:"NthEast Lincolnshire"},"GB-0-161":{code:"161",name:"Omagh"},"GB-0-162":{code:"162",name:"Orkney"},"GB-0-44":{code:"44",name:"Oxfordshire"},"GB-0-163":{code:"163",name:"Peeblesshire"},"GB-0-164":{code:"164",name:"Perthshire"},"GB-0-165":{code:"165",name:"Peterborough"},"GB-0-166":{code:"166",name:"Plymouth"},"GB-0-167":{code:"167",name:"Poole"},"GB-0-168":{code:"168",name:"Portsmouth"},"GB-0-45":{code:"45",name:"Powys"},"GB-0-169":{code:"169",name:"Reading"},"GB-0-170":{code:"170",name:"Redcar and Cleveland"},"GB-0-171":{code:"171",name:"Renfrewshire"},"GB-0-172":{code:"172",name:"Rochester Up. Medway"},"GB-0-173":{code:"173",name:"Ross-Shire"},"GB-0-175":{code:"175",name:"Roxburghshire"},"GB-0-176":{code:"176",name:"Rutland"},"GB-0-26":{code:"26",name:"Scotland"},"GB-0-177":{code:"177",name:"Shetland"},"GB-0-48":{code:"48",name:"Shropshire"},"GB-0-178":{code:"178",name:"Slough"},"GB-0-50":{code:"50",name:"Somerset"},"GB-0-47":{code:"47",name:"South Glamorgan"},"GB-0-179":{code:"179",name:"South Humberside"},"GB-0-63":{code:"63",name:"South Yorkshire"},"GB-0-180":{code:"180",name:"Southampton"},"GB-0-181":{code:"181",name:"Southend"},"GB-0-51":{code:"51",name:"Staffordshire"},"GB-0-182":{code:"182",name:"Sth. Gloucestershire"},"GB-0-183":{code:"183",name:"Stirlingshire"},"GB-0-184":{code:"184",name:"Stockton-on-Tees"},"GB-0-185":{code:"185",name:"Strabane"},"GB-0-46":{code:"46",name:"Strathclyde"},"GB-0-49":{code:"49",name:"Suffolk"},"GB-0-53":{code:"53",name:"Surrey"},"GB-0-52":{code:"52",name:"Sussex"},"GB-0-186":{code:"186",name:"Sutherland"},"GB-0-54":{code:"54",name:"Tayside"},"GB-0-187":{code:"187",name:"Thamesdown"},"GB-0-188":{code:"188",name:"Thurrock"},"GB-0-189":{code:"189",name:"Torbay"},"GB-0-55":{code:"55",name:"Tyne and Wear"},"GB-0-190":{code:"190",name:"Tyrone"},"GB-0-191":{code:"191",name:"Warrington"},"GB-0-56":{code:"56",name:"Warwickshire"},"GB-0-57":{code:"57",name:"West Glamorgan"},"GB-0-192":{code:"192",name:"West Lothian"},"GB-0-59":{code:"59",name:"West Midlands"},"GB-0-193":{code:"193",name:"West Sussex"},"GB-0-64":{code:"64",name:"West Yorkshire"},"GB-0-194":{code:"194",name:"Western Isles"},"GB-0-195":{code:"195",name:"Wigtownshire"},"GB-0-58":{code:"58",name:"Wiltshire"},"GB-0-196":{code:"196",name:"Windsor & Maidenhead"},"GB-0-197":{code:"197",name:"Wokingham"},"GB-0-60":{code:"60",name:"Worcestershire"},"GB-0-198":{code:"198",name:"Wrekin"},"GB-0-199":{code:"199",name:"York"},"GB-0-61":{code:"61",name:"Yorkshire"},"GB-0-1001":{code:"1001",name:"Blaenau Gwent"},"GB-0-1002":{code:"1002",name:"Bridgend"},"GB-0-1003":{code:"1003",name:"Caerphilly"},"GB-0-1004":{code:"1004",name:"Cardiff"},"GB-0-1005":{code:"1005",name:"Carmarthenshire"},"GB-0-1006":{code:"1006",name:"Ceredigion"},"GB-0-1007":{code:"1007",name:"Channel Islands"},"GB-0-1008":{code:"1008",name:"Conwy"},"GB-0-1009":{code:"1009",name:"Denbighshire"},"GB-0-1010":{code:"1010",name:"East Ayrshire"},"GB-0-1011":{code:"1011",name:"East Dunbartonshire"},"GB-0-1012":{code:"1012",name:"East Renfrewshire"},"GB-0-1013":{code:"1013",name:"Edinburgh City"},"GB-0-1014":{code:"1014",name:"Falkirk"},"GB-0-1015":{code:"1015",name:"Flintshire"},"GB-0-1016":{code:"1016",name:"Glasgow"},"GB-0-1017":{code:"1017",name:"Inverclyde"},"GB-0-1018":{code:"1018",name:"Isle of Anglesey"},"GB-0-1019":{code:"1019",name:"Isle of Man"},"GB-0-1020":{code:"1020",name:"Merthyr Tydfil"},"GB-0-1021":{code:"1021",name:"Monmouthshire"},"GB-0-1022":{code:"1022",name:"Moray"},"GB-0-1023":{code:"1023",name:"Neath Port Talbot"},"GB-0-1024":{code:"1024",name:"Newport"},"GB-0-1025":{code:"1025",name:"North Ayrshire"},"GB-0-1026":{code:"1026",name:"North Lanarkshire"},"GB-0-1027":{code:"1027",name:"Pembrokeshire"},"GB-0-1028":{code:"1028",name:"Rhondda Cynon Taff"},"GB-0-1029":{code:"1029",name:"South Ayrshire"},"GB-0-1030":{code:"1030",name:"South Lanarkshire"},"GB-0-1031":{code:"1031",name:"Stirling"},"GB-0-1032":{code:"1032",name:"Swansea"},"GB-0-1033":{code:"1033",name:"The Vale of Glamorgan"},"GB-0-1034":{code:"1034",name:"Torfaen"},"GB-0-1035":{code:"1035",name:"West Dunbartonshire"},"GB-0-1036":{code:"1036",name:"Wrexham"}},[n.Country.US]:{"US-0-AL":{code:"AL",name:"Alabama"},"US-0-AK":{code:"AK",name:"Alaska"},"US-0-AS":{code:"AS",name:"American Samoa"},"US-0-AZ":{code:"AZ",name:"Arizona"},"US-0-AR":{code:"AR",name:"Arkansas"},"US-0-AA":{code:"AA",name:"Armed Forces America"},"US-0-AE":{code:"AE",name:"Armed Forces Europe"},"US-0-AP":{code:"AP",name:"Armed Forces Pacific"},"US-0-CA":{code:"CA",name:"California"},"US-0-CEI":{code:"CEI",name:"Canton & Enderbury Islands"},"US-0-CO":{code:"CO",name:"Colorado"},"US-0-CT":{code:"CT",name:"Connecticut"},"US-0-DC":{code:"DC",name:"District of Columbia"},"US-0-DE":{code:"DE",name:"Delaware"},"US-0-FL":{code:"FL",name:"Florida"},"US-0-GA":{code:"GA",name:"Georgia"},"US-0-GU":{code:"GU",name:"Guam"},"US-0-HI":{code:"HI",name:"Hawaii"},"US-0-IA":{code:"IA",name:"Iowa"},"US-0-ID":{code:"ID",name:"Idaho"},"US-0-IL":{code:"IL",name:"Illinois"},"US-0-IN":{code:"IN",name:"Indiana"},"US-0-KS":{code:"KS",name:"Kansas"},"US-0-KY":{code:"KY",name:"Kentucky"},"US-0-LA":{code:"LA",name:"Louisiana"},"US-0-MA":{code:"MA",name:"Massachusetts"},"US-0-MD":{code:"MD",name:"Maryland"},"US-0-ME":{code:"ME",name:"Maine"},"US-0-MP":{code:"MP",name:"Mariana Islands"},"US-0-MI":{code:"MI",name:"Michigan"},"US-0-MN":{code:"MN",name:"Minnesota"},"US-0-MS":{code:"MS",name:"Mississippi"},"US-0-MO":{code:"MO",name:"Missouri"},"US-0-MT":{code:"MT",name:"Montana"},"US-0-NE":{code:"NE",name:"Nebraska"},"US-0-NV":{code:"NV",name:"Nevada"},"US-0-NH":{code:"NH",name:"New Hampshire"},"US-0-NJ":{code:"NJ",name:"New Jersey"},"US-0-NM":{code:"NM",name:"New Mexico"},"US-0-NY":{code:"NY",name:"New York"},"US-0-NC":{code:"NC",name:"North Carolina"},"US-0-ND":{code:"ND",name:"North Dakota"},"US-0-NMI":{code:"NMI",name:"North Mariana Islands"},"US-0-OH":{code:"OH",name:"Ohio"},"US-0-OK":{code:"OK",name:"Oklahoma"},"US-0-OR":{code:"OR",name:"Oregon"},"US-0-PW":{code:"PW",name:"Palau"},"US-0-PA":{code:"PA",name:"Pennsylvania"},"US-0-PR":{code:"PR",name:"Puerto Rico"},"US-0-RI":{code:"RI",name:"Rhode Island"},"US-0-SC":{code:"SC",name:"South Carolina"},"US-0-SD":{code:"SD",name:"South Dakota"},"US-0-TN":{code:"TN",name:"Tennessee"},"US-0-TX":{code:"TX",name:"Texas"},"US-0-UT":{code:"UT",name:"Utah"},"US-0-VT":{code:"VT",name:"Vermont"},"US-0-VI":{code:"VI",name:"Virgin Islands, US"},"US-0-VA":{code:"VA",name:"Virginia"},"US-0-WA":{code:"WA",name:"Washington"},"US-0-WV":{code:"WV",name:"West Virginia"},"US-0-WI":{code:"WI",name:"Wisconsin"},"US-0-WY":{code:"WY",name:"Wyoming"}},[n.Country.CA]:{"CA-0-AB":{code:"AB",name:"Alberta"},"CA-0-BC":{code:"BC",name:"British Columbia"},"CA-0-MB":{code:"MB",name:"Manitoba"},"CA-0-NB":{code:"NB",name:"New Brunswick"},"CA-0-NL":{code:"NL",name:"Newfoundland and Labrador"},"CA-0-NS":{code:"NS",name:"Nova Scotia"},"CA-0-NT":{code:"NT",name:"Northwest Territories"},"CA-0-NU":{code:"NU",name:"Nunavut"},"CA-0-ON":{code:"ON",name:"Ontario"},"CA-0-PE":{code:"PE",name:"Prince Edward Island"},"CA-0-QC":{code:"QC",name:"Québec"},"CA-0-SK":{code:"SK",name:"Saskatchewan"},"CA-0-YT":{code:"YT",name:"Yukon"}},[n.Country.AU]:{"AU-0-SA":{code:"SA",name:"South Australia"},"AU-0-WA":{code:"WA",name:"Western Australia"},"AU-0-NSW":{code:"NSW",name:"New South Wales"},"AU-0-QLD":{code:"QLD",name:"Queensland"},"AU-0-TAS":{code:"TAS",name:"Tasmania"},"AU-0-VIC":{code:"VIC",name:"Victoria"},"AU-0-ACT":{code:"ACT",name:"Australian Capital Territory"},"AU-0-JBT":{code:"JBT",name:"Jervis Bay Territory"},"AU-0-NT":{code:"NT",name:"Northern Territory"}},[n.Country.IE]:{"IE-0-05":{code:"05",name:"Carlow"},"IE-0-04":{code:"04",name:"Clare"},"IE-0-03":{code:"03",name:"Cork"},"IE-0-07":{code:"07",name:"Donegal"},"IE-0-06":{code:"06",name:"Dublin"},"IE-0-10":{code:"10",name:"Galway"},"IE-0-13":{code:"13",name:"Cavan"},"IE-0-14":{code:"14",name:"Kerry"},"IE-0-11":{code:"11",name:"Kildare"},"IE-0-12":{code:"12",name:"Kilkenny"},"IE-0-19":{code:"19",name:"Laois"},"IE-0-18":{code:"18",name:"Leitrim"},"IE-0-17":{code:"17",name:"Limerick"},"IE-0-16":{code:"16",name:"Longford"},"IE-0-20":{code:"20",name:"Louth"},"IE-0-23":{code:"23",name:"Mayo"},"IE-0-22":{code:"22",name:"Meath"},"IE-0-21":{code:"21",name:"Monaghan"},"IE-0-24":{code:"24",name:"Offaly"},"IE-0-25":{code:"25",name:"Roscommon"},"IE-0-26":{code:"26",name:"Sligo"},"IE-0-27":{code:"27",name:"Tipperary"},"IE-0-29":{code:"29",name:"Waterford"},"IE-0-31":{code:"31",name:"Westmeath"},"IE-0-32":{code:"32",name:"Wexford"},"IE-0-30":{code:"30",name:"Wicklow"}},[n.Country.ES]:{"ES-0-AN":{code:"AN",name:"Andalucia"},"ES-0-AR":{code:"AR",name:"Aragón"},"ES-0-AS":{code:"AS",name:"Asturias, Principado de"},"ES-0-CN":{code:"CN",name:"Canarias"},"ES-0-CB":{code:"CB",name:"Cantabria"},"ES-0-CM":{code:"CM",name:"Castilla-La Mancha"},"ES-0-CL":{code:"CL",name:"Castilla y León"},"ES-0-CT":{code:"CT",name:"Cataluña"},"ES-0-EX":{code:"EX",name:"Extremadura"},"ES-0-GA":{code:"GA",name:"Galicia"},"ES-0-IB":{code:"IB",name:"Illes Balears"},"ES-0-RI":{code:"RI",name:"La Rioja"},"ES-0-MD":{code:"MD",name:"Madrid, Comunidad de"},"ES-0-MC":{code:"MC",name:"Murcia, Región de"},"ES-0-NC":{code:"NC",name:"Navarra, Comunidad Foral de"},"ES-0-PV":{code:"PV",name:"País Vasco"},"ES-0-VC":{code:"VC",name:"Valenciana, Comunitat"},"ES-0-CE":{code:"CE",name:"Ceuta"},"ES-0-ML":{code:"ML",name:"Melilla"}},[n.Country.MX]:{"MX-0-DIF":{code:"DIF",name:"Distrito Federal"},"MX-0-AGU":{code:"AGU",name:"Aguascalientes"},"MX-0-BCN":{code:"BCN",name:"Baja California"},"MX-0-BCS":{code:"BCS",name:"Baja California Sur"},"MX-0-CAM":{code:"CAM",name:"Campeche"},"MX-0-COA":{code:"COA",name:"Coahuila"},"MX-0-COL":{code:"COL",name:"Colima"},"MX-0-CHP":{code:"CHP",name:"Chiapas"},"MX-0-CHH":{code:"CHH",name:"Chihuahua"},"MX-0-DUR":{code:"DUR",name:"Durango"},"MX-0-GUA":{code:"GUA",name:"Guanajuato"},"MX-0-GRO":{code:"GRO",name:"Guerrero"},"MX-0-HID":{code:"HID",name:"Hidalgo"},"MX-0-JAL":{code:"JAL",name:"Jalisco"},"MX-0-MEX":{code:"MEX",name:"México"},"MX-0-MIC":{code:"MIC",name:"Michoacán"},"MX-0-MOR":{code:"MOR",name:"Morelos"},"MX-0-NAY":{code:"NAY",name:"Nayarit"},"MX-0-NLE":{code:"NLE",name:"Nuevo León"},"MX-0-OAX":{code:"OAX",name:"Oaxaca"},"MX-0-PUE":{code:"PUE",name:"Puebla"},"MX-0-QUE":{code:"QUE",name:"Querétaro"},"MX-0-ROO":{code:"ROO",name:"Quintana Roo"},"MX-0-SLP":{code:"SLP",name:"San Luis Potosí"},"MX-0-SIN":{code:"SIN",name:"Sinaloa"},"MX-0-SON":{code:"SON",name:"Sonora"},"MX-0-TAB":{code:"TAB",name:"Tabasco"},"MX-0-TAM":{code:"TAM",name:"Tamaulipas"},"MX-0-TLA":{code:"TLA",name:"Tlaxcala"},"MX-0-VER":{code:"VER",name:"Veracruz"},"MX-0-YUC":{code:"YUC",name:"Yucatán"},"MX-0-ZAC":{code:"ZAC",name:"Zacatecas"}},[n.Country.CO]:{"CO-0-DC":{code:"DC",name:"Distrito Capital de Bogotá"},"CO-0-AMA":{code:"AMA",name:"Amazonas"},"CO-0-ANT":{code:"ANT",name:"Antioquia"},"CO-0-ARA":{code:"ARA",name:"Arauca"},"CO-0-ATL":{code:"ATL",name:"Atlántico"},"CO-0-BOL":{code:"BOL",name:"Bolívar"},"CO-0-BOY":{code:"BOY",name:"Boyacá"},"CO-0-CAL":{code:"CAL",name:"Caldas"},"CO-0-CAQ":{code:"CAQ",name:"Caquetá"},"CO-0-CAS":{code:"CAS",name:"Casanare"},"CO-0-CAU":{code:"CAU",name:"Cauca"},"CO-0-CES":{code:"CES",name:"Cesar"},"CO-0-COR":{code:"COR",name:"Córdoba"},"CO-0-CUN":{code:"CUN",name:"Cundinamarca"},"CO-0-CHO":{code:"CHO",name:"Chocó"},"CO-0-GUA":{code:"GUA",name:"Guainía"},"CO-0-GUV":{code:"GUV",name:"Guaviare"},"CO-0-HUI":{code:"HUI",name:"Huila"},"CO-0-LAG":{code:"LAG",name:"La Guajira"},"CO-0-MAG":{code:"MAG",name:"Magdalena"},"CO-0-MET":{code:"MET",name:"Meta"},"CO-0-NAR":{code:"NAR",name:"Nariño"},"CO-0-NSA":{code:"NSA",name:"Norte de Santander"},"CO-0-PUT":{code:"PUT",name:"Putumayo"},"CO-0-QUI":{code:"QUI",name:"Quindío"},"CO-0-RIS":{code:"RIS",name:"Risaralda"},"CO-0-SAP":{code:"SAP",name:"San Andrés, Providencia y Santa Catalina"},"CO-0-SAN":{code:"SAN",name:"Santander"},"CO-0-SUC":{code:"SUC",name:"Sucre"},"CO-0-TOL":{code:"TOL",name:"Tolima"},"CO-0-VAC":{code:"VAC",name:"Valle del Cauca"},"CO-0-VAU":{code:"VAU",name:"Vaupés"},"CO-0-VID":{code:"VID",name:"Vichada"}},[n.Country.PE]:{"PE-0-CAL":{code:"CAL",name:"El Callao"},"PE-0-LMA":{code:"LMA",name:"Municipalidad Metropolitana de Lima"},"PE-0-AMA":{code:"AMA",name:"Amazonas"},"PE-0-ANC":{code:"ANC",name:"Ancash"},"PE-0-APU":{code:"APU",name:"Apurímac"},"PE-0-ARE":{code:"ARE",name:"Arequipa"},"PE-0-AYA":{code:"AYA",name:"Ayacucho"},"PE-0-CAJ":{code:"CAJ",name:"Cajamarca"},"PE-0-CUS":{code:"CUS",name:"Cusco"},"PE-0-HUV":{code:"HUV",name:"Huancavelica"},"PE-0-HUC":{code:"HUC",name:"Huánuco"},"PE-0-ICA":{code:"ICA",name:"Ica"},"PE-0-JUN":{code:"JUN",name:"Junín"},"PE-0-LAL":{code:"LAL",name:"La Libertad"},"PE-0-LAM":{code:"LAM",name:"Lambayeque"},"PE-0-LIM":{code:"LIM",name:"Lima"},"PE-0-LOR":{code:"LOR",name:"Loreto"},"PE-0-MDD":{code:"MDD",name:"Madre de Dios"},"PE-0-MOQ":{code:"MOQ",name:"Moquegua"},"PE-0-PAS":{code:"PAS",name:"Pasco"},"PE-0-PIU":{code:"PIU",name:"Piura"},"PE-0-PUN":{code:"PUN",name:"Puno"},"PE-0-SAM":{code:"SAM",name:"San Martín"},"PE-0-TAC":{code:"TAC",name:"Tacna"},"PE-0-TUM":{code:"TUM",name:"Tumbes"},"PE-0-UCA":{code:"UCA",name:"Ucayali"}},[n.Country.CL]:{"CL-0-AI":{code:"AI",name:"Aisén del General Carlos Ibañez del Campo"},"CL-0-AN":{code:"AN",name:"Antofagasta"},"CL-0-AR":{code:"AR",name:"Araucanía"},"CL-0-AP":{code:"AP",name:"Arica y Parinacota"},"CL-0-AT":{code:"AT",name:"Atacama"},"CL-0-BI":{code:"BI",name:"Biobío"},"CL-0-CO":{code:"CO",name:"Coquimbo"},"CL-0-LI":{code:"LI",name:"Libertador General Bernardo O'Higgins"},"CL-0-LL":{code:"LL",name:"Los Lagos"},"CL-0-LR":{code:"LR",name:"Los Ríos"},"CL-0-MA":{code:"MA",name:"Magallanes y la Antártica Chilena"},"CL-0-ML":{code:"ML",name:"Maule"},"CL-0-RM":{code:"RM",name:"Metropolitana de Santiago"},"CL-0-TA":{code:"TA",name:"Tarapacá"},"CL-0-VS":{code:"VS",name:"Valparaíso"}},[n.Country.DE]:{"DE-0-BW":{code:"BW",name:"Baden-Württemberg"},"DE-0-BY":{code:"BY",name:"Bayern"},"DE-0-BE":{code:"BE",name:"Berlin"},"DE-0-BB":{code:"BB",name:"Brandenburg"},"DE-0-HB":{code:"HB",name:"Bremen"},"DE-0-HH":{code:"HH",name:"Hamburg"},"DE-0-HE":{code:"HE",name:"Hessen"},"DE-0-MV":{code:"MV",name:"Mecklenburg-Vorpommern"},"DE-0-NI":{code:"NI",name:"Niedersachsen"},"DE-0-NW":{code:"NW",name:"Nordrhein-Westfalen"},"DE-0-RP":{code:"RP",name:"Rheinland-Pfalz"},"DE-0-SL":{code:"SL",name:"Saarland"},"DE-0-SN":{code:"SN",name:"Sachsen"},"DE-0-ST":{code:"ST",name:"Sachsen-Anhalt"},"DE-0-SH":{code:"SH",name:"Schleswig-Holstein"},"DE-0-TH":{code:"TH",name:"Thüringen"}},[n.Country.IT]:{"IT-0-65":{code:"65",name:"Abruzzo"},"IT-0-77":{code:"77",name:"Basilicata"},"IT-0-78":{code:"78",name:"Calabria"},"IT-0-72":{code:"72",name:"Campania"},"IT-0-45":{code:"45",name:"Emilia-Romagna"},"IT-0-36":{code:"36",name:"Friuli-Venezia Giulia"},"IT-0-62":{code:"62",name:"Lazio"},"IT-0-42":{code:"42",name:"Liguria"},"IT-0-25":{code:"25",name:"Lombardia"},"IT-0-57":{code:"57",name:"Marche"},"IT-0-67":{code:"67",name:"Molise"},"IT-0-21":{code:"21",name:"Piemonte"},"IT-0-75":{code:"75",name:"Puglia"},"IT-0-88":{code:"88",name:"Sardegna"},"IT-0-82":{code:"82",name:"Sicilia"},"IT-0-52":{code:"52",name:"Toscana"},"IT-0-32":{code:"32",name:"Trentino Alto Adige"},"IT-0-55":{code:"55",name:"Umbria"},"IT-0-23":{code:"23",name:"Valle d'Aosta"},"IT-0-34":{code:"34",name:"Veneto"}},[n.Country.CH]:{"CH-0-AG":{code:"AG",name:"Aargau"},"CH-0-AR":{code:"AR",name:"Appenzell Ausserrhoden"},"CH-0-AI":{code:"AI",name:"Appenzell Innerrhoden"},"CH-0-BL":{code:"BL",name:"Basel-Landschaft"},"CH-0-BS":{code:"BS",name:"Basel-Stadt"},"CH-0-BE":{code:"BE",name:"Berne"},"CH-0-FR":{code:"FR",name:"Fribourg"},"CH-0-GE":{code:"GE",name:"Genève"},"CH-0-GL":{code:"GL",name:"Glarus"},"CH-0-GR":{code:"GR",name:"Graubünden"},"CH-0-JU":{code:"JU",name:"Jura"},"CH-0-LU":{code:"LU",name:"Luzern"},"CH-0-NE":{code:"NE",name:"Neuchâtel"},"CH-0-NW":{code:"NW",name:"Nidwalden"},"CH-0-OW":{code:"OW",name:"Obwalden"},"CH-0-SG":{code:"SG",name:"Sankt Gallen"},"CH-0-SH":{code:"SH",name:"Schaffhausen"},"CH-0-SZ":{code:"SZ",name:"Schwyz"},"CH-0-SO":{code:"SO",name:"Solothurn"},"CH-0-TG":{code:"TG",name:"Thurgau"},"CH-0-TI":{code:"TI",name:"Ticino"},"CH-0-UR":{code:"UR",name:"Uri"},"CH-0-VS":{code:"VS",name:"Valais"},"CH-0-VD":{code:"VD",name:"Vaud"},"CH-0-ZG":{code:"ZG",name:"Zug"},"CH-0-ZH":{code:"ZH",name:"Zürich"}},[n.Country.BE]:{"BE-0-BRU":{code:"BRU",name:"Bruxelles-Capitale, Région de"},"BE-0-VLG":{code:"VLG",name:"Vlaamse Gewest"},"BE-0-WAL":{code:"WAL",name:"Région wallonne"}},[n.Country.SE]:{"SE-0-K":{code:"K",name:"Blekinge län"},"SE-0-W":{code:"W",name:"Dalarnas län"},"SE-0-I":{code:"I",name:"Gotlands län"},"SE-0-X":{code:"X",name:"Gävleborgs län"},"SE-0-N":{code:"N",name:"Hallands län"},"SE-0-Z":{code:"Z",name:"Jämtlands län"},"SE-0-F":{code:"F",name:"Jönköpings län"},"SE-0-H":{code:"H",name:"Kalmar län"},"SE-0-G":{code:"G",name:"Kronobergs län"},"SE-0-BD":{code:"BD",name:"Norrbottens län"},"SE-0-M":{code:"M",name:"Skåne län"},"SE-0-AB":{code:"AB",name:"Stockholms län"},"SE-0-D":{code:"D",name:"Södermanlands län"},"SE-0-C":{code:"C",name:"Uppsala län"},"SE-0-S":{code:"S",name:"Värmlands län"},"SE-0-AC":{code:"AC",name:"Västerbottens län"},"SE-0-Y":{code:"Y",name:"Västernorrlands län"},"SE-0-U":{code:"U",name:"Västmanlands län"},"SE-0-O":{code:"O",name:"Västra Götalands län"},"SE-0-T":{code:"T",name:"Örebro län"},"SE-0-E":{code:"E",name:"Östergötlands län"}},[n.Country.NO]:{"NO-0-2":{code:"2",name:"Akershus"},"NO-0-9":{code:"9",name:"Aust-Agder"},"NO-0-6":{code:"6",name:"Buskerud"},"NO-0-20":{code:"20",name:"Finnmark"},"NO-0-4":{code:"4",name:"Hedmark"},"NO-0-12":{code:"12",name:"Hordaland"},"NO-0-15":{code:"15",name:"Møre og Romsdal"},"NO-0-18":{code:"18",name:"Nordland"},"NO-0-17":{code:"17",name:"Nord-Trøndelag"},"NO-0-5":{code:"5",name:"Oppland"},"NO-0-3":{code:"3",name:"Oslo"},"NO-0-11":{code:"11",name:"Rogaland"},"NO-0-14":{code:"14",name:"Sogn og Fjordane"},"NO-0-16":{code:"16",name:"Sør-Trøndelag"},"NO-0-8":{code:"8",name:"Telemark"},"NO-0-19":{code:"19",name:"Troms"},"NO-0-10":{code:"10",name:"Vest-Agder"},"NO-0-7":{code:"7",name:"Vestfold"},"NO-0-1":{code:"1",name:"Østfold"},"NO-0-22":{code:"22",name:"Jan Mayen"},"NO-0-21":{code:"21",name:"Svalbard"}},[n.Country.NL]:{"NL-0-DR":{code:"DR",name:"Drenthe"},"NL-0-FL":{code:"FL",name:"Flevoland"},"NL-0-FR":{code:"FR",name:"Fryslân"},"NL-0-GE":{code:"GE",name:"Gelderland"},"NL-0-GR":{code:"GR",name:"Groningen"},"NL-0-LI":{code:"LI",name:"Limburg"},"NL-0-NB":{code:"NB",name:"Noord-Brabant"},"NL-0-NH":{code:"NH",name:"Noord-Holland"},"NL-0-OV":{code:"OV",name:"Overijssel"},"NL-0-UT":{code:"UT",name:"Utrecht"},"NL-0-ZE":{code:"ZE",name:"Zeeland"},"NL-0-ZH":{code:"ZH",name:"Zuid-Holland"}},[n.Country.PT]:{"PT-0-1":{code:"1",name:"Aveiro"},"PT-0-2":{code:"2",name:"Beja"},"PT-0-3":{code:"3",name:"Braga"},"PT-0-4":{code:"4",name:"Bragança"},"PT-0-5":{code:"5",name:"Castelo Branco"},"PT-0-6":{code:"6",name:"Coimbra"},"PT-0-7":{code:"7",name:"Évora"},"PT-0-8":{code:"8",name:"Faro"},"PT-0-9":{code:"9",name:"Guarda"},"PT-0-10":{code:"10",name:"Leiria"},"PT-0-11":{code:"11",name:"Lisboa"},"PT-0-12":{code:"12",name:"Portalegre"},"PT-0-13":{code:"13",name:"Porto"},"PT-0-14":{code:"14",name:"Santarém"},"PT-0-15":{code:"15",name:"Setúbal"},"PT-0-16":{code:"16",name:"Viana do Castelo"},"PT-0-17":{code:"17",name:"Vila Real"},"PT-0-18":{code:"18",name:"Viseu"},"PT-0-20":{code:"20",name:"Região Autónoma dos Açores"},"PT-0-30":{code:"30",name:"Região Autónoma da Madeira"}}},t.GeographicStatesLevel1={[n.Country.AR]:{"AR-1-C":{code:"C",name:"Ciudad Autónoma de Buenos Aires"},"AR-1-B":{code:"B",name:"Buenos Aires"},"AR-1-K":{code:"K",name:"Catamarca"},"AR-1-H":{code:"H",name:"Chaco"},"AR-1-U":{code:"U",name:"Chubut"},"AR-1-X":{code:"X",name:"Córdoba"},"AR-1-W":{code:"W",name:"Corrientes"},"AR-1-E":{code:"E",name:"Entre Ríos"},"AR-1-P":{code:"P",name:"Formosa"},"AR-1-Y":{code:"Y",name:"Jujuy"},"AR-1-L":{code:"L",name:"La Pampa"},"AR-1-F":{code:"F",name:"La Rioja"},"AR-1-M":{code:"M",name:"Mendoza"},"AR-1-N":{code:"N",name:"Misiones"},"AR-1-Q":{code:"Q",name:"Neuquén"},"AR-1-R":{code:"R",name:"Río Negro"},"AR-1-A":{code:"A",name:"Salta"},"AR-1-J":{code:"J",name:"San Juan"},"AR-1-D":{code:"D",name:"San Luis"},"AR-1-Z":{code:"Z",name:"Santa Cruz"},"AR-1-S":{code:"S",name:"Santa Fe"},"AR-1-G":{code:"G",name:"Santiago del Estero"},"AR-1-V":{code:"V",name:"Tierra del Fuego"},"AR-1-T":{code:"T",name:"Tucumán"}},[n.Country.FR]:{"FR-1-01":{code:"01",name:"Ain"},"FR-1-02":{code:"02",name:"Aisne"},"FR-1-03":{code:"03",name:"Allier"},"FR-1-04":{code:"04",name:"Alpes (Hte-Provence)"},"FR-1-05":{code:"05",name:"Hautes Alpes"},"FR-1-06":{code:"06",name:"Alpes-Maritimes"},"FR-1-07":{code:"07",name:"Ardeche"},"FR-1-08":{code:"08",name:"Ardennes"},"FR-1-09":{code:"09",name:"Ariege"},"FR-1-10":{code:"10",name:"Aube"},"FR-1-11":{code:"11",name:"Aude"},"FR-1-12":{code:"12",name:"Aveyron"},"FR-1-67":{code:"67",name:"Bas-Rhin"},"FR-1-13":{code:"13",name:"Bouches-du-Rhone"},"FR-1-14":{code:"14",name:"Calvados"},"FR-1-15":{code:"15",name:"Cantal"},"FR-1-16":{code:"16",name:"Charente"},"FR-1-17":{code:"17",name:"Charente-Maritime"},"FR-1-18":{code:"18",name:"Cher"},"FR-1-19":{code:"19",name:"Correze"},"FR-1-97":{code:"97",name:"Corse-du-Nord"},"FR-1-20":{code:"20",name:"Corse-du-Sud"},"FR-1-21":{code:"21",name:"Cote-d'Or"},"FR-1-22":{code:"22",name:"Cotes-d'Armor"},"FR-1-23":{code:"23",name:"Creuse"},"FR-1-96":{code:"96",name:"D.O.M. T.O.M"},"FR-1-24":{code:"24",name:"Dordogne"},"FR-1-25":{code:"25",name:"Doubs"},"FR-1-26":{code:"26",name:"Drome"},"FR-1-91":{code:"91",name:"Essonne"},"FR-1-27":{code:"27",name:"Eure"},"FR-1-28":{code:"28",name:"Eure-et-Loir"},"FR-1-29":{code:"29",name:"Finistère"},"FR-1-30":{code:"30",name:"Gard"},"FR-1-31":{code:"31",name:"Haute Garonne"},"FR-1-32":{code:"32",name:"Gers"},"FR-1-33":{code:"33",name:"Gironde"},"FR-1-99":{code:"99",name:"Guyane"},"FR-1-100":{code:"100",name:"Haute-Corse"},"FR-1-68":{code:"68",name:"Haut-Rhin"},"FR-1-92":{code:"92",name:"Hauts-de-Seine"},"FR-1-34":{code:"34",name:"Herault"},"FR-1-35":{code:"35",name:"Ille-et-Vilaine"},"FR-1-36":{code:"36",name:"Indre"},"FR-1-37":{code:"37",name:"Indre-et-Loire"},"FR-1-38":{code:"38",name:"Isere"},"FR-1-39":{code:"39",name:"Jura"},"FR-1-40":{code:"40",name:"Landes"},"FR-1-41":{code:"41",name:"Loir-et-Cher"},"FR-1-42":{code:"42",name:"Loire"},"FR-1-43":{code:"43",name:"Haute Loire"},"FR-1-44":{code:"44",name:"Loire-Atlantique"},"FR-1-45":{code:"45",name:"Loiret"},"FR-1-46":{code:"46",name:"Lot"},"FR-1-47":{code:"47",name:"Lot-et-Garonne"},"FR-1-48":{code:"48",name:"Lozere"},"FR-1-49":{code:"49",name:"Maine-et-Loire"},"FR-1-50":{code:"50",name:"Manche"},"FR-1-51":{code:"51",name:"Marne"},"FR-1-52":{code:"52",name:"Haute Marne"},"FR-1-53":{code:"53",name:"Mayenne"},"FR-1-54":{code:"54",name:"Meurthe-et-Moselle"},"FR-1-55":{code:"55",name:"Meuse"},"FR-1-56":{code:"56",name:"Morbihan"},"FR-1-57":{code:"57",name:"Moselle"},"FR-1-58":{code:"58",name:"Nievre"},"FR-1-59":{code:"59",name:"Nord"},"FR-1-60":{code:"60",name:"Oise"},"FR-1-61":{code:"61",name:"Orne"},"FR-1-75":{code:"75",name:"Paris"},"FR-1-62":{code:"62",name:"Pas-de-Calais"},"FR-1-63":{code:"63",name:"Puy-de-Dôme"},"FR-1-65":{code:"65",name:"Hautes Pyrenees"},"FR-1-64":{code:"64",name:"Pyrenees-Atlantiques"},"FR-1-66":{code:"66",name:"Pyrenees-Orientales"},"FR-1-69":{code:"69",name:"Rhone"},"FR-1-103":{code:"103",name:"Réunion"},"FR-1-70":{code:"70",name:"Haute Saone"},"FR-1-71":{code:"71",name:"Saone-et-Loire"},"FR-1-72":{code:"72",name:"Sarthe"},"FR-1-73":{code:"73",name:"Savoie"},"FR-1-74":{code:"74",name:"Haute Savoie"},"FR-1-76":{code:"76",name:"Seine-Maritime"},"FR-1-93":{code:"93",name:"Seine-Saint-Denis"},"FR-1-77":{code:"77",name:"Seine-et-Marne"},"FR-1-79":{code:"79",name:"Deux Sevres"},"FR-1-80":{code:"80",name:"Somme"},"FR-1-81":{code:"81",name:"Tarn"},"FR-1-82":{code:"82",name:"Tarn-et-Garonne"},"FR-1-90":{code:"90",name:"Territoire-de-Belfort"},"FR-1-95":{code:"95",name:"Val-d'Oise"},"FR-1-94":{code:"94",name:"Val-de-Marne"},"FR-1-83":{code:"83",name:"Var"},"FR-1-84":{code:"84",name:"Vaucluse"},"FR-1-85":{code:"85",name:"Vendee"},"FR-1-86":{code:"86",name:"Vienne"},"FR-1-87":{code:"87",name:"Haute Vienne"},"FR-1-88":{code:"88",name:"Vosges"},"FR-1-89":{code:"89",name:"Yonne"},"FR-1-78":{code:"78",name:"Yvelines"}},[n.Country.ES]:{"ES-1-C":{code:"C",name:"A Coruña"},"ES-1-VI":{code:"VI",name:"Álava"},"ES-1-AB":{code:"AB",name:"Albacete"},"ES-1-A":{code:"A",name:"Alicante"},"ES-1-AL":{code:"AL",name:"Almería"},"ES-1-O":{code:"O",name:"Asturias"},"ES-1-AV":{code:"AV",name:"Ávila"},"ES-1-BA":{code:"BA",name:"Badajoz"},"ES-1-PM":{code:"PM",name:"Illes Balears"},"ES-1-B":{code:"B",name:"Barcelona"},"ES-1-BU":{code:"BU",name:"Burgos"},"ES-1-CC":{code:"CC",name:"Cáceres"},"ES-1-CA":{code:"CA",name:"Cádiz"},"ES-1-S":{code:"S",name:"Cantabria"},"ES-1-CS":{code:"CS",name:"Castellón"},"ES-1-CR":{code:"CR",name:"Ciudad Real"},"ES-1-CO":{code:"CO",name:"Córdoba"},"ES-1-CU":{code:"CU",name:"Cuenca"},"ES-1-GI":{code:"GI",name:"Girona"},"ES-1-GR":{code:"GR",name:"Granada"},"ES-1-GU":{code:"GU",name:"Guadalajara"},"ES-1-SS":{code:"SS",name:"Gipuzkoa"},"ES-1-H":{code:"H",name:"Huelva"},"ES-1-HU":{code:"HU",name:"Huesca"},"ES-1-J":{code:"J",name:"Jaén"},"ES-1-LO":{code:"LO",name:"La Rioja"},"ES-1-GC":{code:"GC",name:"Las Palmas"},"ES-1-LE":{code:"LE",name:"León"},"ES-1-L":{code:"L",name:"Lleida"},"ES-1-LU":{code:"LU",name:"Lugo"},"ES-1-M":{code:"M",name:"Madrid"},"ES-1-MA":{code:"MA",name:"Málaga"},"ES-1-MU":{code:"MU",name:"Murcia"},"ES-1-NA":{code:"NA",name:"Navarra"},"ES-1-OR":{code:"OR",name:"Ourense"},"ES-1-P":{code:"P",name:"Palencia"},"ES-1-PO":{code:"PO",name:"Pontevedra"},"ES-1-SA":{code:"SA",name:"Salamanca"},"ES-1-TF":{code:"TF",name:"Santa Cruz de Tenerife"},"ES-1-SG":{code:"SG",name:"Segovia"},"ES-1-SE":{code:"SE",name:"Sevilla"},"ES-1-SO":{code:"SO",name:"Soria"},"ES-1-T":{code:"T",name:"Tarragona"},"ES-1-TE":{code:"TE",name:"Teruel"},"ES-1-TO":{code:"TO",name:"Toledo"},"ES-1-V":{code:"V",name:"Valencia"},"ES-1-VA":{code:"VA",name:"Valladolid"},"ES-1-BI":{code:"BI",name:"Bizkaia"},"ES-1-ZA":{code:"ZA",name:"Zamora"},"ES-1-Z":{code:"Z",name:"Zaragoza"}},[n.Country.IT]:{"IT-1-AG":{code:"AG",name:"Agrigento"},"IT-1-AL":{code:"AL",name:"Alessandria"},"IT-1-AN":{code:"AN",name:"Ancona"},"IT-1-AO":{code:"AO",name:"Aosta"},"IT-1-AR":{code:"AR",name:"Arezzo"},"IT-1-AP":{code:"AP",name:"Ascoli Piceno"},"IT-1-AT":{code:"AT",name:"Asti"},"IT-1-AV":{code:"AV",name:"Avellino"},"IT-1-BA":{code:"BA",name:"Bari"},"IT-1-BT":{code:"BT",name:"Barletta-Andria-Trani"},"IT-1-BL":{code:"BL",name:"Belluno"},"IT-1-BN":{code:"BN",name:"Benevento"},"IT-1-BG":{code:"BG",name:"Bergamo"},"IT-1-BI":{code:"BI",name:"Biella"},"IT-1-BO":{code:"BO",name:"Bologna"},"IT-1-BZ":{code:"BZ",name:"Bolzano"},"IT-1-BS":{code:"BS",name:"Brescia"},"IT-1-BR":{code:"BR",name:"Brindisi"},"IT-1-CA":{code:"CA",name:"Cagliari"},"IT-1-CL":{code:"CL",name:"Caltanissetta"},"IT-1-CB":{code:"CB",name:"Campobasso"},"IT-1-CI":{code:"CI",name:"Carbonia-Iglesias"},"IT-1-CE":{code:"CE",name:"Caserta"},"IT-1-CT":{code:"CT",name:"Catania"},"IT-1-CZ":{code:"CZ",name:"Catanzaro"},"IT-1-CH":{code:"CH",name:"Chieti"},"IT-1-CO":{code:"CO",name:"Como"},"IT-1-CS":{code:"CS",name:"Cosenza"},"IT-1-CR":{code:"CR",name:"Cremona"},"IT-1-KR":{code:"KR",name:"Crotone"},"IT-1-CN":{code:"CN",name:"Cuneo"},"IT-1-EN":{code:"EN",name:"Enna"},"IT-1-FM":{code:"FM",name:"Fermo"},"IT-1-FE":{code:"FE",name:"Ferrara"},"IT-1-FI":{code:"FI",name:"Firenze"},"IT-1-FG":{code:"FG",name:"Foggia"},"IT-1-FC":{code:"FC",name:"Forlì-Cesena"},"IT-1-FR":{code:"FR",name:"Frosinone"},"IT-1-GE":{code:"GE",name:"Genova"},"IT-1-GO":{code:"GO",name:"Gorizia"},"IT-1-GR":{code:"GR",name:"Grosseto"},"IT-1-IM":{code:"IM",name:"Imperia"},"IT-1-IS":{code:"IS",name:"Isernia"},"IT-1-SP":{code:"SP",name:"La Spezia"},"IT-1-AQ":{code:"AQ",name:"L'Aquila"},"IT-1-LT":{code:"LT",name:"Latina"},"IT-1-LE":{code:"LE",name:"Lecce"},"IT-1-LC":{code:"LC",name:"Lecco"},"IT-1-LI":{code:"LI",name:"Livorno"},"IT-1-LO":{code:"LO",name:"Lodi"},"IT-1-LU":{code:"LU",name:"Lucca"},"IT-1-MC":{code:"MC",name:"Macerata"},"IT-1-MN":{code:"MN",name:"Mantova"},"IT-1-MS":{code:"MS",name:"Massa-Carrara"},"IT-1-MT":{code:"MT",name:"Matera"},"IT-1-VS":{code:"VS",name:"Medio Campidano"},"IT-1-ME":{code:"ME",name:"Messina"},"IT-1-MI":{code:"MI",name:"Milano"},"IT-1-MO":{code:"MO",name:"Modena"},"IT-1-MB":{code:"MB",name:"Monza e Brianza"},"IT-1-NA":{code:"NA",name:"Napoli"},"IT-1-NO":{code:"NO",name:"Novara"},"IT-1-NU":{code:"NU",name:"Nuoro"},"IT-1-OG":{code:"OG",name:"Ogliastra"},"IT-1-OT":{code:"OT",name:"Olbia-Tempio"},"IT-1-OR":{code:"OR",name:"Oristano"},"IT-1-PD":{code:"PD",name:"Padova"},"IT-1-PA":{code:"PA",name:"Palermo"},"IT-1-PR":{code:"PR",name:"Parma"},"IT-1-PV":{code:"PV",name:"Pavia"},"IT-1-PG":{code:"PG",name:"Perugia"},"IT-1-PU":{code:"PU",name:"Pesaro e Urbino"},"IT-1-PE":{code:"PE",name:"Pescara"},"IT-1-PC":{code:"PC",name:"Piacenza"},"IT-1-PI":{code:"PI",name:"Pisa"},"IT-1-PT":{code:"PT",name:"Pistoia"},"IT-1-PN":{code:"PN",name:"Pordenone"},"IT-1-PZ":{code:"PZ",name:"Potenza"},"IT-1-PO":{code:"PO",name:"Prato"},"IT-1-RG":{code:"RG",name:"Ragusa"},"IT-1-RA":{code:"RA",name:"Ravenna"},"IT-1-RC":{code:"RC",name:"Reggio Calabria"},"IT-1-RE":{code:"RE",name:"Reggio Emilia"},"IT-1-RI":{code:"RI",name:"Rieti"},"IT-1-RN":{code:"RN",name:"Rimini"},"IT-1-RM":{code:"RM",name:"Roma"},"IT-1-RO":{code:"RO",name:"Rovigo"},"IT-1-SA":{code:"SA",name:"Salerno"},"IT-1-SS":{code:"SS",name:"Sassari"},"IT-1-SV":{code:"SV",name:"Savona"},"IT-1-SI":{code:"SI",name:"Siena"},"IT-1-SR":{code:"SR",name:"Siracusa"},"IT-1-SO":{code:"SO",name:"Sondrio"},"IT-1-TA":{code:"TA",name:"Taranto"},"IT-1-TE":{code:"TE",name:"Teramo"},"IT-1-TR":{code:"TR",name:"Terni"},"IT-1-TO":{code:"TO",name:"Torino"},"IT-1-TP":{code:"TP",name:"Trapani"},"IT-1-TN":{code:"TN",name:"Trento"},"IT-1-TV":{code:"TV",name:"Treviso"},"IT-1-TS":{code:"TS",name:"Trieste"},"IT-1-UD":{code:"UD",name:"Udine"},"IT-1-VA":{code:"VA",name:"Varese"},"IT-1-VE":{code:"VE",name:"Venezia"},"IT-1-VB":{code:"VB",name:"Verbano-Cusio-Ossola"},"IT-1-VC":{code:"VC",name:"Vercelli"},"IT-1-VR":{code:"VR",name:"Verona"},"IT-1-VV":{code:"VV",name:"Vibo Valentia"},"IT-1-VI":{code:"VI",name:"Vicenza"},"IT-1-VT":{code:"VT",name:"Viterbo"}},[n.Country.BE]:{"BE-1-VAN":{code:"VAN",name:"Antwerpen"},"BE-1-WBR":{code:"WBR",name:"Brabant wallon"},"BE-1-WHT":{code:"WHT",name:"Hainaut"},"BE-1-WLG":{code:"WLG",name:"Liège"},"BE-1-VLI":{code:"VLI",name:"Limburg"},"BE-1-WLX":{code:"WLX",name:"Luxembourg"},"BE-1-WNA":{code:"WNA",name:"Namur"},"BE-1-VOV":{code:"VOV",name:"Oost-Vlaanderen"},"BE-1-VBR":{code:"VBR",name:"Vlaams-Brabant"},"BE-1-VWV":{code:"VWV",name:"West-Vlaanderen"}}}},89690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processQuery=void 0;const n=r(53576),o=r(38495);t.processQuery=function(e){return{type:n.StaticDataQueryType.GEOGRAPHIC_STATES,collection:(0,o.getStatesForLocaleFormats)(e.level,e.localeFormats)}}},38495:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findStateCode=t.findStateLevel2Name=t.findStateName=t.getStatesForLocaleFormats=t.isStateValid=void 0;const n=r(53576),o=r(80814);t.isStateValid=function(e,t){return t in function(e){return{...o.GeographicStatesLevel0[e]||{},...o.GeographicStatesLevel1[e]||{}}}(e)},t.getStatesForLocaleFormats=function(e,t){const r=e===n.GeographicStateLevel.LEVEL_0?o.GeographicStatesLevel0:o.GeographicStatesLevel1;return t?t.filter((e=>!!r[e])).reduce(((e,t)=>Object.assign({},e,{[t]:r[t]})),{}):r};const a=(e,t)=>{let r="";if(!e)return r;const n=Object.keys(t);for(let o=0;o<n.length&&!r;o++)r=t[n[o]]?.[e]?.name??"";return r||e};t.findStateName=e=>a(e,o.GeographicStatesLevel0),t.findStateLevel2Name=e=>a(e,o.GeographicStatesLevel1),t.findStateCode=(e,t)=>o.GeographicStatesLevel0[e]?.[t]?.code??""},74504:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allowedExtensions=void 0,t.allowedExtensions=[".docx",".doc",".xlsx",".xls",".ppt",".pptx",".pdf",".txt",".zip",".key",".png",".jpg",".jpeg",".gif",".tiff",".bmp",".heif",".heic",".odt",".avi",".ogg",".m4a",".mov",".mp3",".mp4",".mpg",".wav",".ods",".rar",".7z",".mkv",".raw",".db",".aac",".3gp",".webm",".flac",".csv",".wmv",".tar",".odp",".odg",".gzip"]},98337:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSecureDocumentsAllowedMimeTypes=t.getSecureDocumentsAllowedExtensions=void 0;const n=r(74504),o=r(56196);t.getSecureDocumentsAllowedExtensions=function(){return n.allowedExtensions},t.getSecureDocumentsAllowedMimeTypes=function(){return o.allowedMimeTypes}},56196:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allowedMimeTypes=void 0,t.allowedMimeTypes=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/pdf","text/plain","application/zip","application/x-zip-compressed","multipart/x-zip","application/pkcs8","application/x-iwork-keynote-sffkey","image/png","image/jpeg","image/gif","image/tiff","image/bmp","image/heic","image/heif","image/heic-sequence","image/heif-sequence","application/vnd.oasis.opendocument.text","video/avi","video/msvideo","video/x-msvideo","audio/ogg","video/ogg","video/quicktime","audio/mpeg","audio/mp4","video/mp4","video/mpeg","audio/wav","audio/x-wav","video/x-ms-wmv","application/vnd.oasis.opendocument.spreadsheet","application/x-rar-compressed","application/x-rar","application/vnd.rar","application/x-7z-compressed","video/x-matroska","video/raw","application/x-sqlite3","application/x-ole-storage","audio/aac","audio/x-aac","video/3gpp","audio/webm","video/webm","audio/flac","application/gzip","application/tar","application/x-tar","application/tar+gzip","application/x-compressed-tar","application/x-gzip","application/octet-stream","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.graphics"]},33332:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeStaticDataController=void 0;const n=r(53576),o=r(39003),a=r(89690);t.makeStaticDataController=()=>({query:s});class i extends Error{constructor(e){super(`Unexpected StaticDataQuery type (${e})`)}}function s(e){try{return{results:(t=e.queries,t.map((e=>{switch(e.type){case n.StaticDataQueryType.CALLING_CODES:return(0,o.processQuery)();case n.StaticDataQueryType.GEOGRAPHIC_STATES:return(0,a.processQuery)(e);default:throw new i(e)}}))),error:null}}catch(e){return{results:[],error:e}}var t}},64765:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(83400);t.bootstrap=e=>{e.register(n.config)}},49183:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(64765);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},92215:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertDeviceKeysToUki=t.convertUkiToDeviceKeys=void 0,t.convertUkiToDeviceKeys=e=>{if(e){const t=e.split("-");if(t.length>0){const[r]=t;return{accessKey:r,secretKey:e}}}return null},t.convertDeviceKeysToUki=e=>`${e.accessKey}-${e.secretKey}`},27885:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasSpecialUserGroupAccessInSpace=t.hasTACAccessInCurrentSpace=t.getNodePremiumStatusSpaceData=t.isGroupManagerInCurrentSpace=t.isTeamAdminInCurrentSpace=t.isBillingAdminInCurrentSpace=t.getCurrentTeamId=t.getCurrentSpaceId=t.getCurrentSpace=void 0;const n=r(66833),o=r(95343);t.getCurrentSpace=e=>e.spaces.find((e=>"accepted"===e.details.status)),t.getCurrentSpaceId=e=>{const r=(0,t.getCurrentSpace)(e);return r?Number(r.teamId):void 0},t.getCurrentTeamId=t.getCurrentSpaceId,t.isBillingAdminInCurrentSpace=e=>{const r=(0,t.getCurrentSpace)(e);return!!r&&r.details.isBillingAdmin},t.isTeamAdminInCurrentSpace=e=>{const r=(0,t.getCurrentSpace)(e);return!!r&&r.details.isTeamAdmin},t.isGroupManagerInCurrentSpace=e=>{const r=(0,t.getCurrentSpace)(e);return!!r&&r.details.isGroupManager},t.getNodePremiumStatusSpaceData=e=>{const t=e.getLocalSettings().nodePremiumStatus.spaces,r=(0,n.getFreshSpaceData)(t);return(0,o.makeSpaceData)(r)},t.hasTACAccessInCurrentSpace=e=>{const r=(0,t.getNodePremiumStatusSpaceData)(e),n=(0,t.getCurrentSpace)(r);return!!n&&(n.details.isTeamAdmin||n.details.isBillingAdmin||n.details.isGroupManager)},t.hasSpecialUserGroupAccessInSpace=(e,t)=>{const r=t.spaces.find((t=>t.teamId===e&&"accepted"===t.details.status));return r?.details.isTeamAdmin||r?.details.isGroupManager}},80722:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeStoreService=void 0;const n=r(44602),o=r(18948),a=r(84762);t.makeStoreService=e=>{const t=e?.sessionStorage,r=e?.store||(0,a.createStore)(t),i=((e,t)=>{if(t){let t=()=>{};const r=new Promise((e=>{t=e})),o=(0,n.persistStore)(e,null,t);return{completeRehydration:()=>r,flush:()=>o.flush()}}return{completeRehydration:()=>Promise.resolve(),flush:()=>Promise.resolve()}})(r,t),s=()=>r.getState(),c=new o.BehaviorSubject(s());return r.subscribe((()=>c.next(s()))),{...i,dispatch:e=>r.dispatch(e),getABTesting:()=>s().device.abtesting,getAccountInfo:()=>s().userSession.account,getAccountCreation:()=>s().userSession.accountCreation,getLocation:()=>s().device.platform.location,getSdkAuthentication:()=>s().userSession.sdkAuthentication,getLocalSettings:()=>s().userSession.localSettings,getPersonalData:()=>s().userSession.personalData,getPersonalSettings:()=>s().userSession.personalSettings,getPersonalFeatures:()=>s().userSession.personalFeatures,getNotificationStatus:()=>s().userSession.notificationsStatus,getPlatform:()=>s().device.platform,getPlatformInfo:()=>s().device.platform.info,getIconsCache:()=>s().userSession.iconsCache,getSharingData:()=>s().userSession.sharingData,getSpaceData:()=>s().userSession.spaceData,getState$:()=>c,getState:()=>s(),getStore:()=>r,getSubscriptionCode:()=>s().userSession.account.subscriptionCode,getSyncStatus:()=>s().userSession.sync,getTeamAdminData:()=>s().userSession.teamAdminData,getUserLogin:()=>s().userSession.account.login,getUserSession:()=>s().userSession.session,isAuthenticated:()=>Boolean(s().userSession.session.sessionId&&s().userSession.account.isAuthenticated),isFeatureActivated:e=>{const{features:t}=r.getState().userSession.personalFeatures;return!!t&&Boolean(t[e])},hasSessionId:()=>Boolean(s().userSession.session.sessionId)}}},68525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobalPersistenceReducer=void 0;const n=r(44602),o=r(84801),a=e=>(t,r)=>({...t,...Object.keys(e).reduce(((n,o)=>(n[o]=t[o],e[o].forEach((e=>{n[o][e]=r[o][e]})),n)),{})}),i=e=>Object.keys(e).map((t=>(0,o.createBlacklistFilter)(t,e[t])));t.getGlobalPersistenceReducer=(e,t,r)=>{if(r){const o={key:"root",stateReconciler:a(t),storage:r,version:1,serialize:!1,deserialize:!1,transforms:i(t)};return(0,n.persistReducer)(o,e)}return e}},84762:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStore=t.globalReducer=void 0;const n=r(98160),o=r(96186),a=r(9149),i=r(34007),s=r(10319),c=r(52653),u=r(4572),l=r(28417),d=r(53439),p=r(75417),f=r(45316),g=r(69018),m=r(68525),h=r(19764),y=(0,n.combineReducers)({platform:a.default,abtesting:i.default,application:s.applicationReducer,remoteFile:p.remoteFileReducer,globalExtensionSettings:f.globalExtensionSettingsReducer,antiPhishing:g.AntiPhishingReducer,eventLogger:h.eventLoggerReducer});t.globalReducer=(e,t)=>{const r=e?e.device:void 0,n=e?e.authentication:void 0,a=e?e.userSession:void 0,i=e?e.inMemoryInterSessionUnsynced:void 0;return{device:y(r,t),authentication:(0,c.authenticationReducer)(n,t),userSession:(0,u.userSessionReducer)(a,t),inMemoryInterSessionUnsynced:(0,o.inMemoryInterSessionUnsyncedSliceReducer)(i,t)}},t.createStore=function(e,r){const o=(0,m.getGlobalPersistenceReducer)(t.globalReducer,{device:d.blacklistedDeviceKeys,userSession:l.blacklistedUserSessionKeys},e);return(0,n.createStore)(o,r)}},20031:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(26634),o=r(1334),a=r(2548),i=r(39993),s=r(33733),c=r(79889),u=r(26847),l=r(68455);t.config={commands:{getTeamInfo:{handler:o.getTeamInfo},getTeamOffers:{handler:a.getTeamOffers},getMidCycleTierUpgradePrice:{handler:i.getMidCycleTierUpgradePrice},getExpectedTaxInformation:{handler:s.getExpectedTaxInformation},changeTierMidCycle:{handler:c.changeTierMidCycle},computePlanPricing:{handler:u.computePlanPricing},addSeats:{handler:l.addSeats}},queries:{getIsRecoveryEnabled:{selector:n.isRecoveryEnabledSelector}},liveQueries:{}}},40941:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddSeatsErrorType=t.ComputePlanPricingErrorType=t.ChangeTierMidCycleErrorType=t.GetTeamOffersErrorType=void 0;var n=r(86852);Object.defineProperty(t,"GetTeamOffersErrorType",{enumerable:!0,get:function(){return n.GetTeamOffersErrorType}}),Object.defineProperty(t,"ChangeTierMidCycleErrorType",{enumerable:!0,get:function(){return n.ChangeTierMidCycleErrorType}}),Object.defineProperty(t,"ComputePlanPricingErrorType",{enumerable:!0,get:function(){return n.ComputePlanPricingErrorType}}),Object.defineProperty(t,"AddSeatsErrorType",{enumerable:!0,get:function(){return n.AddSeatsErrorType}})},68455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSeats=void 0;const n=r(46298),o=r(11848),a=r(86852),i=r(16593),s=r(17387);t.addSeats=async function(e,t){const{storeService:r}=e,c=(0,i.userLoginSelector)(r.getState());if(!c)throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const u=await(0,o.addSeatsRequest)(r,c,t.seats);return(0,n.isApiError)(u)?{success:!1,error:{code:a.AddSeatsErrorType.AddSeatsFailed,message:`Add Seats failed: ${u.message}`}}:{success:!0}}},79889:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeTierMidCycle=void 0;const n=r(46298),o=r(86852),a=r(38115),i=r(16593),s=r(17387);t.changeTierMidCycle=async function(e,t){const{storeService:r}=e,c=(0,i.userLoginSelector)(r.getState()),u=await(0,n.teamStatus)(r,c);if(!c||(0,n.isApiError)(u))throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const l=await(0,a.changeTierMidCycleRequest)(r,c,t.amountToPay,t.taxes,t.planId,t.couponCode,t.seatsToAdd,t.billingContactEmail);return(0,n.isApiError)(l)?{success:!1,error:{code:o.ChangeTierMidCycleErrorType.ChangeTierMidCycleFailed,message:`Change Tier Mid Cycle failed: ${l.message}`}}:{success:!0}}},26847:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computePlanPricing=void 0;const n=r(86852),o=r(46298),a=r(21712),i=r(16593),s=r(17387);t.computePlanPricing=async function(e,t){const{storeService:r}=e,c=(0,i.userLoginSelector)(r.getState());if(!c)throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const u=await(0,a.computePlanPricingRequest)(r,c,t.seats);return(0,o.isApiError)(u)?{success:!1,error:{code:n.ComputePlanPricingErrorType.ComputePlanPricingFailed,message:`Compute Plan Pricing failed: ${u.message}`}}:{success:!0,data:u}}},33733:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExpectedTaxInformation=void 0;const n=r(86852),o=r(46298),a=r(30782),i=r(16593),s=r(17387);t.getExpectedTaxInformation=async function(e,t){const{storeService:r}=e,c=(0,i.userLoginSelector)(r.getState());if(!c)throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const u=await(0,a.getExpectedTaxInformationRequest)(r,c,t.priceInCents);return(0,o.isApiError)(u)?{success:!1,error:{code:n.GetExpectedTaxInformationErrorType.GetExpectedTaxInformationFailed,message:`get Expected Price Information failed: ${u.message}`}}:{success:!0,data:u}}},39993:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMidCycleTierUpgradePrice=void 0;const n=r(86852),o=r(46298),a=r(78607),i=r(16593),s=r(17387);t.getMidCycleTierUpgradePrice=async function(e,t){const{storeService:r}=e,c=(0,i.userLoginSelector)(r.getState());if(!c)throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const u=await(0,a.getMidCycleTierUpgradePriceRequest)(r,c,t.newPlan,t.numberOfSeats);return(0,o.isApiError)(u)?{success:!1,error:{code:n.GetMidCycleTierUpgradePriceErrorType.GetMidCycleTierUpgradePriceFailed,message:`get Mid Cycle Tier Upgrade Price failed: ${u.message}`}}:{success:!0,data:u}}},2548:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamOffers=void 0;const n=r(86852),o=r(46298),a=r(47115),i=r(17387),s=r(16593);t.getTeamOffers=async function(e,t){const{storeService:r}=e,c=(0,s.userLoginSelector)(r.getState());if(!c)throw new Error(i.AuthenticationCode[i.AuthenticationCode.USER_UNAUTHORIZED]);const u=await(0,a.getTeamOffersRequest)(r,c,t.couponCode);return(0,o.isApiError)(u)?{success:!1,error:{code:n.GetTeamOffersErrorType.GetTeamOffersFailed,message:`get Team Offers failed: ${u.message}`}}:{success:!0,data:u}}},1334:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamInfo=void 0;const n=r(46298),o=r(16593),a=r(25576);t.getTeamInfo=async function(e){const{storeService:t}=e,r=(0,o.userLoginSelector)(t.getState()),a=await(0,n.teamStatus)(t,r);if((0,n.isApiError)(a))return i(a);const{billing:s,seats:c,info:u,planTier:l,capabilities:d}=a;return{success:!0,data:{billing:s,teamInfo:u,planTier:l,capabilities:d,seats:c}}};const i=e=>e.code===n.NotAdmin?s(a.AuthenticationCode.UNAUTHORIZED,e.message):s(a.AuthenticationCode.UNKNOWN_ERROR,e.message),s=(e,t)=>({success:!1,reason:e,message:t})},89675:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setTeamSettings=t.makeSettingsController=void 0;const n=r(16516),o=r(34376),a=r(66833);t.makeSettingsController=(e,t)=>({setTeamSettings:r=>c(e,t,(0,o.getCurrentUserInfo)(e),r)});const i=e=>e.replace(/([A-Z])/g,((e,t)=>`_${t.toLowerCase()}`)),s=(e,t)=>null!==t?{type:`set_${i(e)}`,value:t}:{type:`unset_${i(e)}`};function c(e,t,{login:r,uki:o},{teamId:i,settings:c}){const u=(0,n.zipWith)(s,(0,n.keys)(c),(0,n.values)(c));return t.settings.setTeamSettings({login:r,uki:o,teamId:i,operations:u}).then((()=>((0,a.updateCurrentSpaceWith)(e,(e=>Object.assign({},e,{details:Object.assign({},e.details,{info:Object.assign({},e.details.info,c)})}))),{}))).catch((e=>({error:e})))}t.setTeamSettings=c},89763:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(20031);t.bootstrap=e=>{e.register(n.config)}},14581:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(89763);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},26634:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRecoveryEnabledSelector=void 0;const n=r(16593);t.isRecoveryEnabledSelector=e=>{const t=(0,n.activeSpacesSelector)(e)[0];return t?.info?.recoveryEnabled??!1}},86852:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddSeatsErrorType=t.ComputePlanPricingErrorType=t.ChangeTierMidCycleErrorType=t.GetExpectedTaxInformationErrorType=t.GetMidCycleTierUpgradePriceErrorType=t.B2BPlanTiers=t.GetTeamOffersErrorType=void 0,function(e){e.GetTeamOffersFailed="GET_TEAM_OFFERS_FAILED",e.GetTeamOffersSummaryFailed="GET_TEAM_OFFERS_SUMMARY_FAILED"}(t.GetTeamOffersErrorType||(t.GetTeamOffersErrorType={})),t.B2BPlanTiers=["legacy","team","business","entreprise"],function(e){e.GetMidCycleTierUpgradePriceFailed="GET_MID_CYCLE_TIER_UPGRADE_PRICE_FAILED"}(t.GetMidCycleTierUpgradePriceErrorType||(t.GetMidCycleTierUpgradePriceErrorType={})),function(e){e.GetExpectedTaxInformationFailed="GET_EXPECTED_TAX_INFORMATION_FAILED"}(t.GetExpectedTaxInformationErrorType||(t.GetExpectedTaxInformationErrorType={})),function(e){e.ChangeTierMidCycleFailed="CHANGE_TIER_MID_CYCLE_FAILED",e.PaymentMeanIsNotCreditcard="PAYMENT_MEAN_IS_NOT_CREDITCARD",e.CurrentPlanStartDateInFuture="CURRENT_PLAN_START_DATE_IN_FUTURE",e.ChangeTierMidCycleError="CHANGE_TIER_MID_CYCLE_ERROR",e.PaymentMeanIsNotInvoice="PAYMENT_MEAN_IS_NOT_INVOICE",e.ChangeTierAmountTooExpensive="CHANGE_TIER_AMOUNT_TOO_EXPENSIVE",e.ErrorCalculatingTierChangeDiscount="ERROR_CALCULATING_TIER_CHANGE_DISCOUNT",e.InsufficientAmount="INSUFFICIENT_AMOUNT",e.AssignedPlanSameTierAsCurrentPlan="ASSIGNED_PLAN_SAME_TIER_AS_CURRENT_PLAN",e.SalesTaxMismatch="SALES_TAX_MISMATCH",e.NotBillingAdmin="NOT_BILLING_ADMIN"}(t.ChangeTierMidCycleErrorType||(t.ChangeTierMidCycleErrorType={})),function(e){e.ComputePlanPricingFailed="COMPUTE_PLAN_PRICING_FAILED",e.NotBillingAdmin="NOT_BILLING_ADMIN"}(t.ComputePlanPricingErrorType||(t.ComputePlanPricingErrorType={})),function(e){e.AddSeatsFailed="ADD_SEATS_FAILED",e.CannotAddSeatDuringFreeTrial="CANNOT_ADD_SEAT_DURING_FREE_TRIAL",e.CannotAddSeatDuringGracePeriod="CANNOT_ADD_SEAT_DURING_GRACE_PERIOD",e.UnsupportedPaymentMean="UNSUPPORTED_PAYMENT_MEAN",e.NotBillingAdmin="NOT_BILLING_ADMIN",e.PaymentFailed="PAYMENT_FAILED"}(t.AddSeatsErrorType||(t.AddSeatsErrorType={}))},68541:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(92310),o=r(32159),a=r(31632),i=r(81529),s=r(76934),c=r(38396),u=r(6053),l=r(15028),d=r(69310),p=r(8995),f=r(76713),g=r(5829),m=r(89895),h=r(76404),y=r(88063),S=r(94453),v=r(44974),E=r(27218),A=r(70363),_=r(50766),b=r(10002),T=r(68538),I=r(33150),w=r(94228),C=r(60419),O=r(76154),D=r(70178),P=r(64690),N=r(7134),R=r(16382),U=r(4658),L=r(54419),M=r(11673),k=r(38045),B=r(62218);t.config={commands:{completeTeamDomainRegistration:{handler:a.completeTeamDomainRegistration},deactivateTeamDomain:{handler:i.deactivateTeamDomain},getTeamDomains:{handler:c.getTeamDomains},getTeamDevice:{handler:u.getTeamDevice},listTeamDevices:{handler:l.listTeamDevices},deactivateTeamDevice:{handler:d.deactivateTeamDevice},registerTeamDomain:{handler:s.registerTeamDomain},registerTeamDevice:{handler:p.registerTeamDevice},registerTeamDeviceAccount:{handler:E.registerTeamDeviceAccount},getEncryptionServiceConfig:{handler:h.getEncryptionServiceConfig},generateAndSaveEncryptionServiceConfig:{handler:y.generateAndSaveEncryptionServiceConfig},clearSelfHostedESSettings:{handler:S.clearSelfHostedESSettings},getTeamDeviceEncryptedConfig:{handler:v.getTeamDeviceEncryptedConfig},updateTeamDeviceEncryptedConfig:{handler:A.updateTeamDeviceEncryptedConfig},updateTeamSettings:{handler:D.updateTeamSettings},parseMetadataFields:{handler:T.parseMetadataFieldsHandler},persistAdminProvisioningKey:{handler:I.persistAdminProvisioningKey},removeAdminProvisioningKey:{handler:C.removeAdminProvisioningKey},createSSOConnectorConfig:{handler:f.createSSOConnectorConfig},generateSSOConnectorKey:{handler:g.generateSSOConnectorKey},getReport:{handler:m.getReport},startAuditLogsQuery:{handler:_.startAuditLogsQuery},getAuditLogQueryResults:{handler:b.getAuditLogQueryResults},getRecoveryCodesAsTeamCaptain:{handler:O.getRecoveryCodesAsTeamCaptain},getInviteLink:{handler:P.getInviteLink},requestInviteLinkToken:{handler:B.requestInviteLinkToken},getInviteLinkForAdmin:{handler:N.getInviteLinkForAdmin},changeInviteLinkTeamKey:{handler:R.changeInviteLinkTeamKey},createInviteLink:{handler:U.createInviteLink},toggleInviteLink:{handler:L.toggleInviteLink},getLastADSyncDate:{handler:M.getLastADSyncDate},getSpecialUserGroupInviteValuesForMemberInTeam:{handler:k.getSpecialUserGroupInviteValuesForMemberInTeam},getSpecialUserGroupRevision:{handler:k.getSpecialUserGroupRevision}},queries:{getAdministrableUserGroup:{selector:n.administrableUserGroupSelector},getAdministrableUserGroups:{selector:n.administrableUserGroupsSelector},isGroupNameAvailable:{selector:n.isGroupNameAvailableSelector},getAdminProvisioningKey:{selector:w.adminProvisioningKeySelector}},liveQueries:{liveAdministrableUserGroup:{operator:o.administrableUserGroup$},liveAdministrableUserGroups:{operator:o.administrableUserGroups$},liveAdminProvisioningKey:{operator:o.adminProvisioningKey$}}}},79562:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(36100),t),o(r(35074),t),o(r(45832),t),o(r(73168),t),o(r(88791),t),o(r(82848),t),o(r(66535),t),o(r(68323),t),o(r(93020),t),o(r(8286),t)},58415:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDirectorySyncController=void 0;const n=r(7344),o=r(34376);t.makeDirectorySyncController=e=>{const{storeService:t,localStorageService:r,wsService:a,sessionService:i,sharingService:s}=e;return{directorySyncForAllTeams:()=>n.directorySyncForAllTeams(t,a,i),keyValidatedByTacAdmin:(e,c)=>function(e,t,r,a,i,s,c){const u=t.getTeamAdminData().teams[s],l=(0,o.getCurrentUserInfo)(t);return n.saveDirectorySyncKey(e,t,r,l,u,s,c).then((()=>n.directorySyncForTeam(t,a,i,s))).catch((()=>{}))}(s,t,r,a,i,e,c),keyRejectedByTacAdmin:(e,r)=>n.keyRejectedByTacAdmin(t,a,e,r)}}},10002:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAuditLogQueryResults=void 0;const n=r(93020),o=r(16593),a=r(46298);t.getAuditLogQueryResults=async function(e,t){const{storeService:r}=e,i=(0,o.userLoginSelector)(r.getState()),s=await(0,a.getAuditLogsQueryResults)(r,i,t);return(0,a.isApiError)(s)?{success:!1,error:{code:n.ApiAuditLogsErrorType.GetAuditLogQueryResultsFailed,message:`Get Audit Log Query Results failed: ${s.message}`}}:{success:!0,data:{auditLogs:s.results?.length?s.results.map((e=>JSON.parse(e))):[],nextToken:s.nextToken,state:s.state}}}},50766:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startAuditLogsQuery=void 0;const n=r(93020),o=r(16593),a=r(46298);t.startAuditLogsQuery=async function(e,t){const{storeService:r}=e,i=(0,o.userLoginSelector)(r.getState()),s=await(0,a.startAuditLogsQuery)(r,i,t);return(0,a.isApiError)(s)?{success:!1,error:{code:n.ApiAuditLogsErrorType.StartAuditLogsQueryFailed,message:`Start Audit Logs Query failed: ${s.message}`}}:{success:!0,data:s}}},93020:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetAuditLogQueryResultsState=t.ApiAuditLogsErrorType=void 0,function(e){e.StartAuditLogsQueryFailed="START_AUDIT_LOGS_QUERY_FAILED",e.GetAuditLogQueryResultsFailed="GET_AUDIT_LOG_QUERY_RESULTS_FAILED"}(t.ApiAuditLogsErrorType||(t.ApiAuditLogsErrorType={})),function(e){e.Queued="QUEUED",e.Running="RUNNING",e.Succeeded="SUCCEEDED",e.Failed="FAILED",e.Cancelled="CANCELLED"}(t.GetAuditLogQueryResultsState||(t.GetAuditLogQueryResultsState={}))},44293:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTeamDeviceAccount=void 0;const n=r(46298),o=r(16593);t.createTeamDeviceAccount=async(e,t)=>{const{storeService:r}=e,a=r.getState(),i=(0,o.userLoginSelector)(a);if(!i)throw new Error("\n            [createTeamDeviceAccount] - Session not opened!\n        ");const s=await(0,n.createTeamDeviceAccount)(r,i,t);return(0,n.isApiError)(s)?{success:!1,error:{code:(0,n.getCode)(s.code,n.createTeamDeviceAccountErrors)}}:{success:!0,data:{login:s.login}}}},69310:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTeamDevice=void 0;const n=r(46298),o=r(16593);t.deactivateTeamDevice=async function(e,{teamDeviceAccessKey:t}){const{storeService:r}=e,a=r.getState(),i=(0,o.userLoginSelector)(a);if(!i)throw new Error("\n            [registerTeamDeviceRequest] - Session not opened!\n        ");const s=await(0,n.deactivateTeamDevice)(r,i,{teamDeviceAccessKey:t});return(0,n.isApiError)(s)?{success:!1,error:{code:(0,n.getCode)(s.code,n.deactivateTeamDeviceErrors)}}:{success:!0,data:{}}}},6053:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDevice=void 0;const n=r(46298),o=r(16593);t.getTeamDevice=async function(e,t){const{storeService:r}=e,{teamDeviceAccessKey:a}=t,i=r.getState(),s=(0,o.userLoginSelector)(i);if(!s)throw new Error("[getTeamDevice] - Session not opened!");const c=await(0,n.getTeamDevice)(r,s,{teamDeviceAccessKey:a});return(0,n.isApiError)(c)?{success:!1,error:{code:(0,n.getCode)(c.code,n.getTeamDeviceErrors)}}:{success:!0,data:{teamDevice:c.teamDevice}}}},15028:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listTeamDevices=void 0;const n=r(46298),o=r(16593);t.listTeamDevices=async function(e){const{storeService:t}=e,r=t.getState(),a=(0,o.userLoginSelector)(r);if(!a)throw new Error("[listTeamDevices] - Session not opened!");const i=await(0,n.listTeamDevices)(t,a);return(0,n.isApiError)(i)?{success:!1,error:{code:(0,n.getCode)(i.code,n.listTeamDevicesErrors)}}:{success:!0,data:{teamDevices:i.teamDevices}}}},8995:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTeamDevice=void 0;const n=r(46298),o=r(16593);t.registerTeamDevice=async function(e,t){const{storeService:r}=e,{deviceName:a,platform:i}=t,s=r.getState(),c=(0,o.userLoginSelector)(s);if(!c)throw new Error("\n            [registerTeamDeviceRequest] - Session not opened!\n        ");const u=await(0,n.registerTeamDevice)(r,c,{platform:i,deviceName:a});return(0,n.isApiError)(u)?{success:!1,error:{code:(0,n.getCode)(u.code,n.registerTeamDeviceErrors)}}:{success:!0,data:{teamUuid:u.teamUuid,deviceAccessKey:u.deviceAccessKey,deviceSecretKey:u.deviceSecretKey}}}},35074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TeamDevicePlatform=void 0;const n=r(81926);Object.defineProperty(t,"TeamDevicePlatform",{enumerable:!0,get:function(){return n.TeamDevicePlatform}})},11673:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastADSyncDate=void 0;const n=r(46298),o=r(16593),a=r(62618);t.getLastADSyncDate=async function(e){const{storeService:t}=e,r=(0,o.userLoginSelector)(t.getState()),i={success:!1,error:{code:n.NotAdmin}};if(!r)return i;try{(0,a.requireAdmin)(t)}catch{return i}const s=await(0,n.lastADSyncDate)(t,r);return(0,n.isApiError)(s)?{success:!1,error:{code:(0,n.getCode)(s.code,n.lastADSyncDateErrors)}}:{success:!0,data:{...s}}}},45832:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7344:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDirectorySyncActivated=t.keyRejectedByTacAdmin=t.isSignatureValid=t.buildVerifiedSyncResponseData=t.keyToXMLB64=t.chainOperations=t.batchOperations=t.directorySyncForTeam=t.directorySyncForAllTeams=t.saveDirectorySyncKey=void 0;const n=r(1370),o=r(19478),a=r(48005),i=r(3674),s=r(36513),c=r(95623),u=r(70252),l=r(44197),d=r(78320),p=r(19697),f=r(43927),g=r(56915),m=r(74042),h=r(93513);t.saveDirectorySyncKey=async function(e,t,r,o,a,i,s){return c().catch((function(t){if("Bad Request (ITEM_GROUP_UPDATE_CONFLICT)"===t.message)return function(){const{login:t,uki:r}=o;return(0,f.loadSpecialItemGroup)(e.ws,t,r,a).then(p).then(c).then((()=>{}))}();throw t}));function c(){return async function(){const t=await async function(){const{specialItemGroup:t}=a,{crypto:r}=e,n=await r.symmetricEncryption.generateNewAESKey(),i=await(0,l.getSpecialItemGroupKey)(r,o,a),c={publicKey:s},u=h.encode(JSON.stringify(c)),p=await r.symmetricEncryption.encryptAES256(n,u),f=await r.symmetricEncryption.encryptAES256(i,h.encode(n)),g=(0,d.generateItemUuid)(),m=await e.item.makeItemUpload(g,f,p);return await e.item.makeAddItemsEvent(t.groupId,t.revision,[m])}();return e.item.addItems(e.ws,o.login,o.uki,t)}().then(u)}async function u(n){return(0,m.updateAdminDataAfterItemAddedOrUpdated)(t,r,e.ws,o,i,n).then((()=>{}))}function p(e){const r=(0,n.specialItemGroupUpdated)(i,e);return t.dispatch(r),Promise.resolve()}},t.directorySyncForAllTeams=function(e,t,r){const n=e.getTeamAdminData();return Object.keys(n.teams).map((n=>E(e,t,r,n)))};class y extends Error{constructor(e=""){super(e),this.name="NoRequestError"}}class S extends Error{constructor(e=""){super(e),this.name="NewPublicKeyError"}}class v extends Error{constructor(e="",t){super(e),this.name="InvalidSignatureError",this.syncResponse=t}}function E(e,t,r,n){const s=(0,i.makeTeamAdminController)(e,t);return function(){const t=e.getState().userSession.directorySync;return(0,a.isTeamDirectorySyncInProgress)(t,n)}()?(c.default.log(`[Directory Sync] Skipping: sync already in progress for team ${n}`),Promise.resolve()):(e.dispatch((0,o.teamDirectorySyncInProgress)(n)),async function(){const r=e.getUserLogin(),o=(0,g.ukiSelector)(e.getState()),a={teamId:Number(n),login:r,uki:o};return await t.teamPlans.getDirectorySyncRequest(a)}().then((async function(e){if(!e.content)throw new y;return e})).then((async function(t){const{publicKey:r,id:o}=t.content,a=e.getTeamAdminData().teams[n].directorySyncKey,i=a&&a.publicKey,s=b(r);if(s!==i){const e={teamId:n,publicKey:s,requestId:o};(0,p.default)().checkDirectorySyncKeyRequest(e);const r=`[Directory Sync] in sync request ${t.content.id} for team ${n}: new public key detected for syncRequest.`;throw c.default.log(r),new S}return t})).then((async function(e){if(!await I(e,n)){const t=`[Directory Sync] in sync request ${e.content.id} for team ${n}: invalid signature.`;throw c.default.log(t),new v(t,e)}return e})).then((async function(t){const o=e.getTeamAdminData().teams[n].userGroups||[],a=t.content.userGroups||[],i=function(e,t){const r=t.map((e=>e.groupId));return e.filter((e=>!!e.externalId)).filter((e=>!r.includes(e.externalId)))}(o,a),c=function(e,t){const r=e.filter((e=>!!e.externalId)).map((e=>e.externalId));return t.filter((e=>!r.includes(e.groupId)))}(o,a),l=function(e,t){const r=e.filter((e=>!!e.externalId)).map((e=>e.externalId));return t.filter((e=>r.includes(e.groupId)))}(o,a),d=i.map((e=>function(e){const t=function(e){const{groupId:t,revision:r}=e;return{groupId:t,revision:r}}(e);return()=>s.deleteUserGroupAction(t)}(e))),p=c.map((e=>function(e){const t=function(e){const t=e.groupName,r=e.groupId;return{teamId:Number(n),externalId:r,name:t}}(e);return()=>s.createUserGroupAction(r,t).then((t=>function(e,t){return e.userGroups.length>0?m(e.userGroups[0],t):Promise.resolve()}(t,e)))}(e))),f=l.map((e=>function(e,t){const r=t.find((t=>t.externalId===e.groupId));if(!r)return[];const n=[];if(e.groupName!==r.name){const t=()=>function(e,t){const r=function(e,t){return{groupId:e.groupId,name:t.groupName,revision:e.revision}}(e,t);return s.renameUserGroupAction(r)}(r,e);n.push(t)}if(function(e,t){const r=e.users.map((e=>e.alias));return t.memberLogins.some((e=>!r.includes(e)))}(r,e)){const t=()=>m(r,e);n.push(t)}if(function(e,t){return e.users.map((e=>e.alias)).some((e=>!t.memberLogins.includes(e)))}(r,e)){const t=()=>function(e,t){const r=e.users.map((e=>e.alias)).filter((e=>!t.memberLogins.includes(e))),n={groupId:e.groupId,revision:e.revision,users:r};return s.revokeUserGroupMembersAction(n)}(r,e);n.push(t)}return n}(e,o))).reduce(((e,t)=>e.concat(t)),[]),g=[...d,...p],h=f;return[...await _(g),...await A(h)].filter((e=>e.error)).map((e=>e.error)).forEach((e=>{const r=`[Directory Sync] in sync request ${t.content.id} for team ${n}: an operation on groups failed: ${e}`,o=new Error(r);(0,u.sendExceptionLog)({error:o})})),t})).then((async function(e){return l(),d(e).then((()=>{}))})).catch((async function(e){switch(l(),e.name){case"NoRequestError":case"NewPublicKeyError":break;case"InvalidSignatureError":{const t=e,{syncResponse:r}=t;d(r,"invalid_signature").then((()=>{}));break}default:{const t=new Error(`[Directory Sync] unexpected error for team ${n}: ${e}`);(0,u.sendExceptionLog)({error:t})}}})));function l(){e.dispatch((0,o.teamDirectorySyncNotInProgress)(n))}function d(r,o){const{content:{id:a}}=r,i=e.getUserLogin(),s=(0,g.ukiSelector)(e.getState()),c={teamId:Number(n),login:i,uki:s,requestId:a},u=Object.assign({},c,o?{syncError:o}:{});return t.teamPlans.updateDirectorySyncRequestStatus(u)}function f(e){return{alias:e,permission:"limited"}}function m(e,t){const r=e.users.map((e=>e.alias)),o=t.memberLogins.filter((e=>!r.includes(e))),a={groupId:e.groupId,revision:e.revision,users:o.map(f),teamId:Number(n)};return s.inviteUserGroupMembersAction(a)}}function A(e){const t=e.map((e=>e().then((e=>({success:!0,result:e}))).catch((e=>({success:!1,error:e})))));return Promise.all(t)}async function _(e,t=[]){const[r,...n]=e;if(!r)return t;let o;try{o={success:!0,result:await r()}}catch(e){o={success:!1,error:e}}return _(n,[...t,o])}function b({modulus:e,exponent:t}){const r=`<RSAKeyValue><Modulus>${e}</Modulus><Exponent>${t}</Exponent></RSAKeyValue>`;return h.encode(r)}function T(e,t,r){return e+t.sort((function(e,t){return e.groupId<t.groupId?-1:e.groupId>t.groupId?1:0})).map(r?function(e){const t=e.memberLogins.sort(n);return e.groupId+e.groupName+t.join("")}:function(e){const t=e.memberLogins.sort();return e.groupId+e.groupName+t.join("")}).join("");function n(e,t){const r=o(e),n=o(t);return r<n?-1:r>n?1:function(e,t){if(e.length<t.length)return-1;if(e.length>t.length)return 1;const r=e.split("-").length-1,n=t.split("-").length-1;return r<n?-1:r>n?1:0}(e,t)}function o(e){let t=e.replace(/[-']/g,"");return t=t.replace(/\./g,"$"),t=t.replace(/@/g,"%"),t=t.replace(/_/g,"'"),t}}async function I(e,t){const{content:{signature:r,userGroups:n,publicKey:o}}=e,a=async e=>{const a=T(t,n,e),i=h.encode(a),c=(0,s.makeAsymmetricEncryption)();return await c.verifyJwk(o,r,i)};return await a(!1)||a(!0)}t.directorySyncForTeam=E,t.batchOperations=A,t.chainOperations=_,t.keyToXMLB64=b,t.buildVerifiedSyncResponseData=T,t.isSignatureValid=I,t.keyRejectedByTacAdmin=function(e,t,r,n){const o=e.getUserLogin(),a=(0,g.ukiSelector)(e.getState()),i={teamId:Number(r),login:o,uki:a,requestId:n,syncError:"key_rejected"};return t.teamPlans.updateDirectorySyncRequestStatus(i).then((()=>{}))},t.isDirectorySyncActivated=function(e){const t=e.spaces.find((e=>e.details&&e.details.info&&"accepted"===e.details.status));if(!t)return!1;const r=t.details.info.activeDirectorySyncType;return["full","provision-only"].includes(r)}},31632:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeTeamDomainRegistration=void 0;const n=r(46298),o=r(16593);t.completeTeamDomainRegistration=async function(e){const{storeService:t}=e,r=(0,o.userLoginSelector)(t.getState()),a=await(0,n.completeDomainRegistration)(t,r);return(0,n.isApiError)(a)?{success:!1,error:{code:(0,n.getCode)(a.code,n.completeDomainRegistrationErrors)}}:{success:!0,domains:a.domain.map((e=>({id:e.id,name:e.domain,status:e.status,previousStatus:e.previousStatus,dnsToken:e.dnsToken,lastVerificationAttemptDateUnix:e.lastVerificationAttemptDateUnix})))}}},81529:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTeamDomain=void 0;const n=r(46298),o=r(16593);t.deactivateTeamDomain=async function(e,t){const{storeService:r}=e,a=(0,o.userLoginSelector)(r.getState()),i=await(0,n.deactivateDomain)(r,a,t);return(0,n.isApiError)(i)?{success:!1,error:{code:(0,n.getCode)(i.code,n.deactivateDomainErrors)}}:{success:!0}}},38396:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDomains=void 0;const n=r(46298),o=r(16593);t.getTeamDomains=async function(e){const{storeService:t}=e,r=(0,o.userLoginSelector)(t.getState()),a=await(0,n.listDomains)(t,r);return(0,n.isApiError)(a)?{success:!1,error:{code:(0,n.getCode)(a.code,n.listDomainErrors)}}:{success:!0,domains:a.domains.map((e=>({id:e.id,name:e.domain,status:e.status,previousStatus:e.previousStatus,dnsToken:e.dnsToken,lastVerificationAttemptDateUnix:e.lastVerificationAttemptDateUnix})))}}},76934:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTeamDomain=void 0;const n=r(46298),o=r(16593);t.registerTeamDomain=async function(e,t){const{storeService:r}=e,a=(0,o.userLoginSelector)(r.getState()),i=await(0,n.requestDomainRegistration)(r,a,t);return(0,n.isApiError)(i)?{success:!1,error:{code:(0,n.getCode)(i.code,n.requestDomainRegistrationErrors)}}:{success:!0,data:{computedToken:i.computedToken,challengeDomain:i.challengeDomain}}}},36100:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DomainStatus=void 0;const n=r(98802);t.DomainStatus=n.DomainStatusResponse},12927:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearEncryptionServiceConfig=void 0;const n=r(94150);t.clearEncryptionServiceConfig=async e=>(await(0,n.removeTeamAdminItem)(e,"encryptionServiceData"),!0)},33657:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAzureEncryptionServiceConfig=t.createAwsLinuxEncryptionServiceConfig=void 0,t.createAwsLinuxEncryptionServiceConfig=({configEncryptionKey:e,deviceSecretKey:t,deviceAccessKey:r,teamUuid:n})=>`DASHLANE_SSO_TEAM_DEVICE_ACCESS_KEY=${r}\nDASHLANE_SSO_TEAM_DEVICE_SECRET_KEY=${t}\nDASHLANE_SSO_TEAM_UUID=${n}\nDASHLANE_CONFIG_ENCRYPTION_KEY=${e}\n`,t.createAzureEncryptionServiceConfig=({configEncryptionKey:e,deviceSecretKey:t,deviceAccessKey:r,teamUuid:n,encryptionServiceEndpoint:o})=>{const{host:a}=new URL(o);return`{\n      "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",\n      "contentVersion": "1.0.0.0",\n      "parameters": {\n        "siteName": {\n          "value": "${a.split(".").slice(0,-2).join(".")}"\n        },\n        "servicePlanSku": {\n          "value": "B1"\n        },\n        "servicePlanCapacity": {\n          "value": 1\n        },\n        "location": {\n          "value": "[resourceGroup().location]"\n        },\n        "DASHLANE_CONFIG_ENCRYPTION_KEY": {\n          "value": "${e}"\n        },\n        "DASHLANE_SSO_TEAM_DEVICE_ACCESS_KEY": {\n          "value": "${r}"\n        },\n        "DASHLANE_SSO_TEAM_DEVICE_SECRET_KEY": {\n          "value": "${t}"\n        },\n        "DASHLANE_SSO_TEAM_UUID": {\n          "value": "${n}"\n        }\n      }\n    }\n    `}},88063:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateAndSaveEncryptionServiceConfig=void 0;const n=r(16038),o=r(69530),a=r(46298),i=r(62618),s=r(33657),c=r(76404),u=r(5760),l=r(27218),d=r(28354),p=r(70363),f=r(25424),g=async(e,t,r,a={},i)=>{const{deviceSecretKey:c,deviceAccessKey:g,teamUuid:m}=await(0,l.reregisterTeamDevice)(e,i),{devicePrivateKey:h,devicePublicKey:y}=await(0,l.generateDeviceKeyPair)(e),S=await(0,l.registerTeamDeviceAccount)(e,{deviceAccessKey:g,devicePublicKey:y,devicePrivateKey:h});if(!1===S.success)return{success:!1,error:S.error};const{encryptionKeyUuid:v,key:E}=await(async()=>{const e=await(0,o.generate64BytesKey)(),t=(0,n.bufferToBase64)(e);return{encryptionKeyUuid:(0,d.v4)().toLowerCase(),key:t}})(),A={config:("Microsoft Azure"===t?s.createAzureEncryptionServiceConfig:s.createAwsLinuxEncryptionServiceConfig)({deviceSecretKey:c,deviceAccessKey:g,teamUuid:m,configEncryptionKey:`${v}|${E}`,encryptionServiceEndpoint:r}),configEncryptionKey:E,teamUuid:m,deviceAccessKey:g,deviceSecretKey:c,encryptionKeyUuid:v,deploymentLocation:t,devicePublicKey:y,devicePrivateKey:h,lastGeneratedTimeStamp:(0,f.getUnixTime)(Date.now())},_=await(0,p.updateTeamDeviceEncryptedConfig)(e,{teamDeviceUrl:r,...a},A);if(!1===_.success)return{success:!1,error:_.error};const b=await(0,u.persistEncryptionServiceConfig)(e,A);return!1===b.success?{success:!1,error:b.error}:{success:!0,data:{basicConfig:{...A},encryptionServiceReloadingStatus:_.data.encryptionServiceReloadingStatus}}},m=["AWS","Microsoft Azure"];t.generateAndSaveEncryptionServiceConfig=async function(e,{deploymentLocation:t,encryptionServiceEndpoint:r,updateTeamDeviceConfigParams:n={}}){const{storeService:o}=e;if((0,i.requireAdmin)(o),!m.includes(t))return{success:!1,error:{code:a.InvalidRequestError}};const s=await(0,c.getEncryptionServiceConfig)(e);let u;return u=s.success?await g(e,t,r,n,s.data):await g(e,t,r,n),u}},76404:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEncryptionServiceConfig=void 0;const n=r(46298),o=r(92310),a=r(62618);t.getEncryptionServiceConfig=({storeService:e})=>{(0,a.requireAdmin)(e);try{const t=(0,o.currentTeamIdSelector)(e.getState()),r=(0,o.adminDataForTeamSelector)(e.getState(),t);return r?.encryptionServiceData?.basicConfigs?.[0]?Promise.resolve({success:!0,data:r.encryptionServiceData.basicConfigs[0]}):Promise.resolve({success:!1,error:{code:n.BasicConfigNotFound}})}catch{return Promise.resolve({success:!1,error:{code:n.UnknownError}})}}},5760:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.persistEncryptionServiceConfig=t.saveOrUpdateEncryptionServiceConfig=void 0;const n=r(46298),o=r(34376),a=r(97124),i=r(53050),s=r(44197),c=r(92310),u=r(74042),l=r(14432),d=r(62618),p=/[\dA-F]{8}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{12}/i;t.saveOrUpdateEncryptionServiceConfig=async(e,t)=>{if((({teamUuid:e,encryptionKeyUuid:t,deviceAccessKey:r,deviceSecretKey:n})=>{const o={teamUuid:Boolean(e&&!e.match(p)),encryptionKeyUuid:Boolean(t&&!t.match(p)),deviceAccessKey:Boolean(r&&16!==r.length),deviceSecretKey:Boolean(n&&64!==n.length)},a=Object.entries(o).reduce(((e,[t,r])=>r?{[t]:!0,...e}:e),{});return Object.keys(a).length>0?a:null})(t))return null;const{storeService:r,wsService:n}=e,d=(0,a.makeSharingService)(r,n),f=(0,o.getCurrentUserInfo)(r),g=(0,c.currentTeamIdSelector)(r.getState()),m=(0,c.adminDataForTeamSelector)(r.getState(),g);if(!m)throw new Error("Cannot find adminData");const h=m?.encryptionServiceData?.basicConfigs?.[0];return h?await(async(e,t,r,n,o,a)=>{const{storeService:i,localStorageService:d}=e,{crypto:p,item:f,ws:g}=t,{specialItemGroup:m}=n;if(!m)throw new Error("Cannot find specialItemGroup in adminData");const{specialItemGroup:{items:h},encryptionServiceData:y}=n,{itemId:S}=y,v=i.getSharingData(),{timestamp:E}=(v.items??[]).find((({itemId:e})=>e===S));if(!E)throw new Error("trying to update config before it was created.");const A={...a,...o},_={basicConfigs:[A]},b=await(0,s.getSpecialItemGroupKey)(p,r,n),{itemKey:T}=h.find((({itemId:e})=>e===S)),I=await p.symmetricEncryption.decryptAES256(b,T),w=await p.symmetricEncryption.encryptAES256(I,btoa(JSON.stringify(_))),C=await f.makeUpdateItemEvent(E,T,{itemId:S,itemContent:w}),O=await f.updateItem(g,r.login,r.uki,C);if(!O.items.length)throw new Error("unable to update encryption service special item");const D=(0,c.currentTeamIdSelector)(i.getState());return await(0,u.updateAdminDataAfterItemAddedOrUpdated)(i,d,t.ws,r,`${D}`,{items:O.items,itemGroups:v.itemGroups}),await(0,l.updateSharingDataAfterItemAddedOrUpdated)(i,d,O.items[0]),A})(e,d,f,m,t,h):await(async(e,t,r)=>{const n={basicConfigs:[r]};return(await(0,i.createOrUpdateSpecialItem)(e,t,n)).basicConfigs[0]})(e,d,t)},t.persistEncryptionServiceConfig=async(e,r)=>{(0,d.requireAdmin)(e.storeService);const o=await(0,t.saveOrUpdateEncryptionServiceConfig)(e,r);return o?{success:!0,data:o}:{success:!1,error:{code:n.UnknownError}}}},27218:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTeamDeviceAccount=t.reregisterTeamDevice=t.generateDeviceKeyPair=void 0;const n=r(81926),o=r(46298),a=r(97124),i=r(82366),s=r(34376),c=r(44197),u=r(92310),l=r(8995),d=r(69310),p=r(44293),f=r(43927),g=r(53921);t.generateDeviceKeyPair=async e=>{const{storeService:t,wsService:r}=e,{crypto:n}=(0,a.makeSharingService)(t,r),o=await n.asymmetricEncryption.generateRsaKeyPair();return{devicePrivateKey:o.privateKey.replace(g.PRIVATE_KEY_HEADER,"").replace(g.PRIVATE_KEY_FOOTER,"").replace(/[\r\n ]/gm,""),devicePublicKey:o.publicKey.replace(g.PUBLIC_KEY_HEADER,"").replace(g.PUBLIC_KEY_FOOTER,"").replace(/[\r\n ]/gm,"")}},t.reregisterTeamDevice=async(e,t,r=n.TeamDevicePlatform.ENCRYPTION_SERVICE)=>{t?.deviceAccessKey&&await(0,d.deactivateTeamDevice)(e,{teamDeviceAccessKey:t.deviceAccessKey});const a=await(0,l.registerTeamDevice)(e,{platform:r,deviceName:g.ENCRYPTION_SERVICE_HUMAN_DEVICE_NAME});if(a.success)return a.data;throw new Error(o.DeviceNotFound)},t.registerTeamDeviceAccount=async(e,r)=>{let l,d;r.shouldGenerateDeviceKeyPair?({devicePublicKey:l,devicePrivateKey:d}=await(0,t.generateDeviceKeyPair)(e)):(l=r.devicePublicKey,d=r.devicePrivateKey);const{storeService:m,wsService:h}=e,{crypto:y}=(0,a.makeSharingService)(m,h),S=(0,s.getCurrentUserInfo)(m),v=(0,u.currentTeamIdSelector)(m.getState()),E=(0,u.adminDataForTeamSelector)(m.getState(),v),{revision:A}=await(0,f.loadSpecialUserGroup)(h,S.login,S.uki,E),_=await(0,c.getSpecialUserGroupKey)(y,S,E),b=`${g.PUBLIC_KEY_HEADER}\n${l}\n${g.PUBLIC_KEY_FOOTER}`,T=await y.asymmetricEncryption.encrypt(b,_),I=`special-admin-${v}-${Math.floor(4294967296*Math.random()).toString(16)}@teamdevice.dashlane.com`,w=await(0,i.generateProposeSignature)(y,_,I),C=await(0,p.createTeamDeviceAccount)(e,{teamDeviceAccessKey:r.deviceAccessKey,publicKey:l,proposeSignature:w,userGroupRevision:A,groupKey:T,teamDeviceLogin:I});return!1===C.success?{success:!1,error:{code:(0,o.getCode)(C.error.code,n.createTeamDeviceAccountErrors)}}:{success:!0,data:{login:C.data.login,devicePrivateKey:d,devicePublicKey:l}}}},93921:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapTeamDeviceEncryptedConfig=t.generateTeamDeviceEncryptedConfig=void 0;const r={scimSignatureKey:{defaultValue:"",configMapping:"DASHLANE_SCIM_SIGNATURE_KEY"},scimAuthToken:{defaultValue:"",configMapping:"DASHLANE_SCIM_AUTHENTICATION_TOKEN"},scimEnabled:{defaultValue:!1,configMapping:"DASHLANE_SCIM_ENABLED"},teamDevicePublicKey:{defaultValue:"",configMapping:"DASHLANE_SCIM_TEAMDEVICE_PUBLIC_KEY"},teamDevicePrivateKey:{defaultValue:"",configMapping:"DASHLANE_SCIM_TEAMDEVICE_PRIVATE_KEY"},connectorEndpoint:{defaultValue:"",configMapping:"DASHLANE_SSO_CONNECTOR_ENDPOINT"},connectorKey:{defaultValue:"",configMapping:"DASHLANE_SSO_CONNECTOR_KEY"},samlIdpCertificate:{defaultValue:"",configMapping:"DASHLANE_SSO_SAML_IDP_CERTIFICATE"},samlIdpEntryPoint:{defaultValue:"",configMapping:"DASHLANE_SSO_SAML_IDP_ENTRYPOINT"}};t.generateTeamDeviceEncryptedConfig=e=>Object.entries(r).map((([t,r])=>{return`${r.configMapping}=${n=r.defaultValue,o=e[t],"boolean"==typeof o||"boolean"==typeof n?o??n?"true":"false":`${o??n}`}`;var n,o})).join("\n"),t.mapTeamDeviceEncryptedConfig=e=>{const t=e.split("\n").reduce(((e,t)=>{const r=t.indexOf("="),[n,o]=[t.slice(0,r),t.slice(r+1)];return{...e,[n]:o}}),{}),n=Object.entries(r).reduce(((e,[r,{configMapping:n,defaultValue:o}])=>{return{...e,[r]:(a=o,i=t[n],i?i.length>0&&"boolean"==typeof a?"true"===i:"boolean"==typeof a?a:i??a:a)};var a,i}),{});if((e=>Object.keys(r).every((t=>t in e)))(n))return n;throw new Error("incomplete data when creating object from config string")}},44974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDeviceEncryptedConfig=t.getParsedTeamDeviceEncryptedConfig=void 0;const n=r(56668),o=r(46298),a=r(64910),i=r(16593),s=r(25576),c=r(62618),u=r(76404),l=r(93921);t.getParsedTeamDeviceEncryptedConfig=async(e,{configEncryptionKey:t,encryptedConfig:r})=>{if(!r||!t)throw new Error("missing config or encryption key");const{teamDeviceEncryptedConfigEncryptorService:o}=e,i=(0,a.getNoDerivationCryptoConfig)();o.setInstance({raw:atob(t)},"",i);const s=await o.getInstance().decrypt(r),c=(0,n.deflatedUtf8ToUtf16)(s,{skipInflate:!0});return(0,l.mapTeamDeviceEncryptedConfig)(c)},t.getTeamDeviceEncryptedConfig=async function(e,{deviceAccessKey:r,draft:n}){const{storeService:a}=e;(0,c.requireAdmin)(a);const l=(0,i.userLoginSelector)(a.getState());if(!l)throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const d=await(0,u.getEncryptionServiceConfig)(e);if(!1===d.success)return{success:!1,error:{code:d.error.code===o.BasicConfigNotFound?o.TeamDeviceEncryptedConfigNotFound:o.UnknownError}};const{data:{deviceAccessKey:p,configEncryptionKey:f}}=d,g={configurationVersion:0,deviceAccessKey:r||p,draft:n};try{const n=await(0,o.getTeamDeviceEncryptedConfig)(a,l,g);if((0,o.isApiError)(n))return{success:!1,error:{code:(0,o.getCode)(n.code,o.getTeamDeviceEncryptedConfigErrors)}};const i=await(0,t.getParsedTeamDeviceEncryptedConfig)(e,{encryptedConfig:n.encryptedConfiguration,configEncryptionKey:f});return{success:!0,data:{config:n.encryptedConfiguration,configurationVersion:n.configurationVersion,deviceAccessKey:r,encryptionKeyUuid:n.encryptionKeyUuid,configProperties:i}}}catch(e){return{success:!1,error:{code:o.TeamDeviceEncryptedConfigNotFound}}}}},70363:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamDeviceEncryptedConfig=void 0;const n=r(46298),o=r(56668),a=r(64910),i=r(97124),s=r(34376),c=r(16593),u=r(89675),l=r(92310),d=r(76404),p=r(68538),f=r(5829),g=r(39482),m=r(31708),h=r(94150),y=r(62618),S=r(44974),v=r(93921),E=r(34054),A=r(1334);t.updateTeamDeviceEncryptedConfig=async(e,t={},r)=>{const{storeService:_,teamDeviceEncryptedConfigEncryptorService:b,wsService:T}=e;(0,y.requireAdmin)(_);const I=(0,c.userLoginSelector)(_.getState());if(!I)throw new Error("missing login");const w={ssoEnabled:!1,ssoIdpMetaData:"",ssoEndpoint:""},C=await(0,A.getTeamInfo)(e);C.success&&(w.ssoEnabled=C.data.teamInfo.ssoEnabled,w.ssoIdpMetaData=C.data.teamInfo.ssoIdpMetadata,w.ssoEndpoint=C.data.teamInfo.ssoServiceProviderUrl);const O=parseInt((0,l.currentTeamIdSelector)(_.getState()),10);let D=null,P=null;if(w.ssoIdpMetaData&&({samlIdpCertificate:D,samlIdpEntryPoint:P}=await(0,p.parseMetadataFields)(w.ssoIdpMetaData)),"string"==typeof t.ssoIdpMetadata){const{ssoIdpMetadata:r}=t;if(r)try{({samlIdpCertificate:D,samlIdpEntryPoint:P}=await(0,p.parseMetadataFields)(r))}catch(e){return{success:!1,error:{code:n.UnknownError}}}if((await(0,u.setTeamSettings)(_,T,(0,s.getCurrentUserInfo)(_),{teamId:O,settings:{ssoIdpMetadata:r||null,ssoIdpEntrypoint:P}})).error)return{success:!1,error:{code:n.UnknownError}}}const N=await(0,d.getEncryptionServiceConfig)(e),R=r||(N.success&&N.data.deviceAccessKey&&N.data.configEncryptionKey&&N.data.encryptionKeyUuid&&N.data.devicePrivateKey&&N.data.devicePublicKey?N.data:null);if(!R)return{success:!1,error:{code:n.DeviceKeyNotFound}};const{deviceAccessKey:U,encryptionKeyUuid:L,configEncryptionKey:M,devicePrivateKey:k,devicePublicKey:B}=R,F=L.toLowerCase(),x=await(0,S.getTeamDeviceEncryptedConfig)(e,{draft:!1,deviceAccessKey:U});let G={},j=0;if(!1===x.success&&x.error.code!==n.TeamDeviceEncryptedConfigNotFound)return{success:!1,error:{code:n.UnknownError}};if(!0===x.success){const{data:t}=x;G=await(0,S.getParsedTeamDeviceEncryptedConfig)(e,{encryptedConfig:t.config,configEncryptionKey:M}),j=t.configurationVersion}const K=(0,i.makeSharingService)(_,T),$=(0,l.currentTeamIdSelector)(_.getState()),V=(0,l.adminDataForTeamSelector)(_.getState(),$);let H=V?.ssoConnectorKey?.ssoConnectorKey;if(!H||t.ssoConnectorKey)try{H&&t.ssoConnectorKey&&await(0,h.removeTeamAdminItem)(e,"ssoConnectorKey");const r=t.ssoConnectorKey??await(0,f.generateSSOConnectorKey)();H=await(0,g.persistSSOConnectorKey)(e,K,r)}catch(e){return{success:!1,error:{code:n.UnknownError}}}let W=V?.scimSignatureKey?.scimSignatureKey;if(!W){const t=await(0,E.generateSCIMSignatureKey)();W=await(0,m.persistSCIMSignatureKey)(e,K,t)}const z={scimAuthToken:t?.scimAuthToken??G?.scimAuthToken??"",scimEnabled:t?.scimEnabled??G?.scimEnabled??!1,connectorEndpoint:t?.connectorEndpoint??G?.connectorEndpoint??w.ssoEndpoint??"",samlIdpEntryPoint:P??G?.samlIdpEntryPoint??"",samlIdpCertificate:D??G?.samlIdpCertificate??""},q=Boolean(t.ssoEnabled||G.connectorKey||w.ssoEnabled),Y={...z,teamDevicePrivateKey:k,teamDevicePublicKey:B,connectorKey:q?H:"",scimSignatureKey:z.scimEnabled?W:""},Q=(0,v.generateTeamDeviceEncryptedConfig)(Y),Z=(0,o.utf16ToDeflatedUtf8)(Q,{skipUtf8Encoding:!0,skipDeflate:!0}),X=(0,a.getNoDerivationCryptoConfig)();b.setInstance({raw:atob(M)},"",X);const J=b.getInstance(),ee=await J.encrypt(Z),te={configurationVersion:j,deviceAccessKey:U,ssoServiceEnabled:q,scimServiceEnabled:Y.scimEnabled,encryptionKeyUuid:F,draft:!1,encryptedConfiguration:ee,teamDeviceUrl:t.teamDeviceUrl},re=await(0,n.updateTeamDeviceEncryptedConfig)(_,I,te);return(0,n.isApiError)(re)?{success:!1,error:{code:(0,n.getCode)(re.code,n.updateTeamDeviceEncryptedConfigErrors)}}:{success:!0,data:{configurationVersion:re.configurationVersion,encryptionServiceReloadingStatus:re.encryptionServiceReloadingStatus}}}},94228:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adminProvisioningKeySelector=void 0;const n=r(92310);t.adminProvisioningKeySelector=e=>{const t=(0,n.currentTeamIdSelector)(e),r=(0,n.adminDataForTeamSelector)(e,t);return{adminProvisioningKey:r.adminProvisioningKey?.adminProvisioningKey??null}}},33150:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.persistAdminProvisioningKey=void 0;const n=r(46298),o=r(97124),a=r(53050);t.persistAdminProvisioningKey=async(e,t)=>{const{adminProvisioningKey:r}=t,i=(0,o.makeSharingService)(e.storeService,e.wsService);try{return await(0,a.createOrUpdateSpecialItem)(e,i,{adminProvisioningKey:r})?{success:!0}:{success:!1,error:"failed to persist adminProvisioningKey"}}catch(e){return{success:!1,error:`${e?.message??n.UnknownError}`}}}},60419:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeAdminProvisioningKey=void 0;const n=r(94150);t.removeAdminProvisioningKey=async e=>(await(0,n.removeTeamAdminItem)(e,"adminProvisioningKey"),{success:!0})},94453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearSelfHostedESSettings=void 0;const n=r(46298),o=r(17387),a=r(34376),i=r(89675),s=r(62618),c=r(69310),u=r(92310),l=r(12927),d=r(76404);t.clearSelfHostedESSettings=async e=>{const{storeService:t,wsService:r}=e;try{(0,s.requireAdmin)(t)}catch(e){if(e.message===o.AuthenticationCode[o.AuthenticationCode.USER_UNAUTHORIZED])return{success:!1,error:{code:n.NotAdmin}}}const p=await(0,d.getEncryptionServiceConfig)(e),f=[];if(p.success){if(p.data.config&&await(0,l.clearEncryptionServiceConfig)(e),p.data.deviceAccessKey&&!(await(0,c.deactivateTeamDevice)(e,{teamDeviceAccessKey:p.data.deviceAccessKey})).success)return{success:!1,error:{code:n.DeactivatedTeamDevice}}}else f.push(n.BasicConfigNotFound);const g=parseInt((0,u.currentTeamIdSelector)(t.getState()),10);return(await(0,i.setTeamSettings)(t,r,(0,a.getCurrentUserInfo)(t),{teamId:g,settings:{ssoServiceProviderUrl:null,ssoIdpMetadata:null,ssoIdpEntrypoint:null}})).error?{success:!1,error:{code:n.UnknownError}}:{success:!0,...f?{warnings:f}:{}}}},53921:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PUBLIC_KEY_FOOTER=t.PUBLIC_KEY_HEADER=t.PRIVATE_KEY_FOOTER=t.PRIVATE_KEY_HEADER=t.ENCRYPTION_SERVICE_HUMAN_DEVICE_NAME=void 0,t.ENCRYPTION_SERVICE_HUMAN_DEVICE_NAME="Encryption Service",t.PRIVATE_KEY_HEADER="-----BEGIN RSA PRIVATE KEY-----",t.PRIVATE_KEY_FOOTER="-----END RSA PRIVATE KEY-----",t.PUBLIC_KEY_HEADER="-----BEGIN RSA PUBLIC KEY-----",t.PUBLIC_KEY_FOOTER="-----END RSA PUBLIC KEY-----"},62618:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requireAdmin=void 0;const n=r(25576),o=r(27885);t.requireAdmin=e=>{if(!(0,o.hasTACAccessInCurrentSpace)(e))throw new Error(n.AuthenticationCode[n.AuthenticationCode.USER_UNAUTHORIZED])}},34054:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSCIMSignatureKey=void 0;const n=r(16038),o=r(55623);t.generateSCIMSignatureKey=async()=>{const e=await(0,o.getRandomValues)(32);return(0,n.bufferToBase64)(e)}},31708:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.persistSCIMSignatureKey=void 0;const n=r(53050);t.persistSCIMSignatureKey=async(e,t,r)=>(await(0,n.createOrUpdateSpecialItem)(e,t,{scimSignatureKey:r})).scimSignatureKey},39482:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.persistSSOConnectorKey=void 0;const n=r(53050);t.persistSSOConnectorKey=async(e,t,r)=>(await(0,n.createOrUpdateSpecialItem)(e,t,{ssoConnectorKey:r})).ssoConnectorKey},88791:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptionServiceRestartStatusCodes=void 0,function(e){e.OK="OK",e.ES_UNREACHABLE="ES_UNREACHABLE",e.ES_CONFIG_RELOAD_FAILURE="ES_CONFIG_RELOAD_FAILURE",e.ES_INTERNAL_NETWORK_ERROR="ES_INTERNAL_NETWORK_ERROR"}(t.EncryptionServiceRestartStatusCodes||(t.EncryptionServiceRestartStatusCodes={}))},16382:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeInviteLinkTeamKey=void 0;const n=r(46298),o=r(8286),a=r(62618),i=r(16593);t.changeInviteLinkTeamKey=async function(e,t){const{storeService:r}=e;try{const e=(0,i.userLoginSelector)(r.getState()),s={success:!1,error:{code:o.InviteLinkResponseErrorCode.NotAdmin}};try{(0,a.requireAdmin)(r)}catch{return s}if(!e)return s;const c=await(0,n.changeInviteLinkTeamKey)(r,e,t);return(0,n.isApiError)(c)?{success:!1,error:{code:(0,n.getCode)(c.code,n.getInviteLinkErrors)}}:{success:!0,data:c}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.InviteLinkNotFound}}}}},4658:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInviteLink=void 0;const n=r(46298),o=r(8286),a=r(62618),i=r(16593);t.createInviteLink=async function(e,t){const{storeService:r}=e;try{const e=(0,i.userLoginSelector)(r.getState()),s={success:!1,error:{code:o.InviteLinkResponseErrorCode.NotAdmin}};try{(0,a.requireAdmin)(r)}catch{return s}if(!e)return s;const c=await(0,n.createInviteLink)(r,e,t);return(0,n.isApiError)(c)?{success:!1,error:{code:(0,n.getCode)(c.code,n.getInviteLinkErrors)}}:{success:!0,data:c}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.InviteLinkNotFound}}}}},7134:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLinkForAdmin=void 0;const n=r(46298),o=r(8286),a=r(62618),i=r(16593);t.getInviteLinkForAdmin=async function(e,t){const{storeService:r}=e;try{const e=(0,i.userLoginSelector)(r.getState()),s={success:!1,error:{code:o.InviteLinkResponseErrorCode.NotAdmin}};try{(0,a.requireAdmin)(r)}catch{return s}if(!e)return s;const c=await(0,n.getInviteLinkForAdmin)(r,e,t);return(0,n.isApiError)(c)?{success:!1,error:{code:(0,n.getCode)(c.code,n.getInviteLinkErrors)}}:{success:!0,data:c}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.InviteLinkNotFound}}}}},64690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLink=void 0;const n=r(46298),o=r(8286);t.getInviteLink=async function(e,t){const{storeService:r}=e;try{const e=await(0,n.getInviteLink)(r,t);return(0,n.isApiError)(e)?{success:!1,error:{code:(0,n.getCode)(e.code,n.getInviteLinkErrors)}}:{success:!0,data:e}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.InviteLinkNotFound}}}}},62218:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestInviteLinkToken=void 0;const n=r(46298),o=r(8286);t.requestInviteLinkToken=async function(e,t){const{storeService:r}=e;try{const e=await(0,n.requestInviteLinkToken)(r,t);return(0,n.isApiError)(e)?{success:!1,error:{code:(0,n.getCode)(e.code,n.getInviteLinkErrors)}}:{success:!0,data:e}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.UserInviteLinkNotFound}}}}},54419:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleInviteLink=void 0;const n=r(46298),o=r(8286),a=r(62618),i=r(16593);t.toggleInviteLink=async function(e,t){const{storeService:r}=e;try{const e=(0,i.userLoginSelector)(r.getState()),s={success:!1,error:{code:o.InviteLinkResponseErrorCode.NotAdmin}};try{(0,a.requireAdmin)(r)}catch{return s}if(!e)return s;const c=await(0,n.toggleInviteLink)(r,e,t);return(0,n.isApiError)(c)?{success:!1,error:{code:(0,n.getCode)(c.code,n.getInviteLinkErrors)}}:{success:!0,data:c}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.InviteLinkNotFound}}}}},8286:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InviteLinkResponseErrorCode=void 0,function(e){e.NotAdmin="not_admin",e.TeamKeyNotFound="TEAM_KEY_NOT_FOUND",e.InviteLinkNotFound="TEAM_INVITE_LINK_NOT_FOUND",e.UserInviteLinkNotFound="USER_TEAM_INVITE_TOKEN_NOT_FOUND"}(t.InviteLinkResponseErrorCode||(t.InviteLinkResponseErrorCode={}))},89895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReport=void 0;const n=r(95623),o=r(46298),a=r(59821),i=r(16593);t.getReport=async function(e,t){const{storeService:r}=e,s=(0,i.userLoginSelector)(r.getState()),c=await(0,o.report)(r,s,t);return(0,o.isApiError)(c)?(n.Debugger.error(`[TeamAdmin] getReport - Failed: ${c.code}`),{success:!1,error:{code:a.UnexpectedError}}):{success:!0,response:c}}},23904:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConfigString=void 0,t.createConfigString=(e,t,r,n,o,a,i)=>`\nDASHLANE_SSO_CONNECTOR_ENDPOINT=${t}\nDASHLANE_SSO_SAML_IDP_CERTIFICATE=${a}\nDASHLANE_SSO_SAML_IDP_ENTRYPOINT=${i}\nDASHLANE_SSO_CONNECTOR_KEY=${e}\nDASHLANE_SSO_TEAM_DEVICE_ACCESS_KEY=${n}\nDASHLANE_SSO_TEAM_DEVICE_SECRET_KEY=${r}\nDASHLANE_SSO_TEAM_UUID=${o}\n`},76713:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSSOConnectorConfig=void 0;const n=r(81926),o=r(8995),a=r(23904),i=r(68538),s=r(89675),c=r(34376),u=r(92310);t.createSSOConnectorConfig=async function(e,t){const{connectorUrl:r,connectorKey:l,idpMetadata:d}=t;if(!r||!d)throw new Error(`[createConfig] : Missing request information -\n                Received connectorUrl : ${!!r} or\n                Received idpMetadata: ${!!d}\n            `);const p=await(0,o.registerTeamDevice)(e,{platform:n.TeamDevicePlatform.SSO_CONNECTOR,deviceName:"SSO Connector"});if(!1===p.success)return{success:!1,error:{code:p.error.code}};const f=p.data.deviceSecretKey,g=p.data.deviceAccessKey,m=p.data.teamUuid;let h,y,S;try{const t=d.replace(/(\r\n|\n|\r)/gm,"");h=await(0,i.parseMetaData)(t),y=(0,i.getIDPCertificate)(h),S=(0,i.getIDPEntrypoint)(h);const{storeService:r,wsService:n}=e,o=(0,u.currentTeamIdSelector)(r.getState()),a=parseInt(o,10);if(isNaN(a))throw new Error("[createSSOConnectorConfig] : Unable to retrieve teamId from [parseInt(currentTeamIdString, 10)]");await(0,s.setTeamSettings)(r,n,(0,c.getCurrentUserInfo)(r),{teamId:a,settings:{ssoIdpEntrypoint:S}})}catch(e){return{success:!1,error:{code:e.message}}}return{success:!0,config:(0,a.createConfigString)(l||"",r.toLowerCase(),f,g,m,y,S)}}},5829:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSSOConnectorKey=void 0;const n=r(16038),o=r(69530),a=r(28354);t.generateSSOConnectorKey=async function(){const e=await(0,o.generate64BytesKey)(),t=(0,n.bufferToBase64)(e);return`${(0,a.v4)()}|${t}`}},73168:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},68538:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMetadataFieldsHandler=t.parseMetadataFields=t.getIDPEntrypoint=t.getIDPCertificate=t.getIDPSSODescriptor=t.parseMetaData=t.SamlTags=void 0;const n=r(44015),o=r(61797),a=r(82848);var i;function s(e){return new Promise(((t,r)=>{(0,n.parseXml)(((e,o)=>{e?r(new Error(a.IDPXmlParseErrors.XML_PARSE_FAILED)):(0,n.isKWXMLElement)(o)?t(o):r(new Error(a.IDPXmlParseErrors.XML_PARSE_FAILED))}),e)}))}function c(e){const t=(0,o.findAllKWXMLElementsOfType)(e,i.IDP_SSO_DESCRIPTOR,[]);if(1!==t.length)throw new Error(a.IDPMetadataParseErrors.INVALID_IDP_SSO_DESCRIPTOR);return t[0]}function u(e){const t=(0,o.findAllKWXMLElementsOfType)(c(e),i.KEY_DESCRIPTOR,[]).filter((e=>!e.__attributes__?.use||"signing"===e.__attributes__?.use));if(!t.length)throw new Error(a.IDPMetadataParseErrors.KEY_DESCRIPTOR_NOT_FOUND);const r=[];if(t.forEach((e=>(0,o.findAllKWXMLElementsOfType)(e,i.CERTIFICATE,r))),!r.length)throw new Error(a.IDPMetadataParseErrors.MISSING_CERTIFICATE);if(r.length>1)throw new Error(a.IDPMetadataParseErrors.MULTIPLE_CERTIFICATES);return r[0].__value__}function l(e){const t=c(e).__children__.filter((e=>{if((0,n.isKWXMLElement)(e))return(0,o.removeNamespace)(e.__type__)===i.SINGLE_SIGN_ON_SERVICE})).find((e=>{if((0,n.isKWXMLElement)(e)){const t=e.__attributes__.Binding;if("string"==typeof t)return t.includes("HTTP-POST")}}));if(!t)throw new Error(a.IDPMetadataParseErrors.IDP_ENTRYPOINT_NOT_FOUND);if((0,n.isKWXMLElement)(t)){const e=t.__attributes__.Location;if("string"==typeof e)return e;throw new Error(a.IDPMetadataParseErrors.INVALID_ENTRYPOINT)}throw new Error(a.IDPMetadataParseErrors.INVALID_ENTRYPOINT)}!function(e){e.IDP_SSO_DESCRIPTOR="IDPSSODescriptor",e.KEY_DESCRIPTOR="KeyDescriptor",e.SINGLE_SIGN_ON_SERVICE="SingleSignOnService",e.CERTIFICATE="X509Certificate"}(i=t.SamlTags||(t.SamlTags={})),t.parseMetaData=s,t.getIDPSSODescriptor=c,t.getIDPCertificate=u,t.getIDPEntrypoint=l,t.parseMetadataFields=async e=>{const t=e.trim().replace(/[\r\n\t]/gm,""),r=await s(t);return{samlIdpCertificate:u(r),samlIdpEntryPoint:l(r)}},t.parseMetadataFieldsHandler=async(e,{ssoIdpMetadata:r})=>{try{const{samlIdpCertificate:e,samlIdpEntryPoint:n}=await(0,t.parseMetadataFields)(r);return{success:!0,data:{samlIdpCertificate:e,samlIdpEntryPoint:n}}}catch(e){const t=Object.values(a.IDPXmlParseErrors),r=Object.values(a.IDPMetadataParseErrors);return{success:!1,error:t.concat(r).includes(e.message)?e.message:a.IDPXmlParseErrors.XML_PARSE_FAILED}}}},82848:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDPMetadataParseErrors=t.IDPXmlParseErrors=void 0,function(e){e.XML_PARSE_FAILED="xml_parse_failed"}(t.IDPXmlParseErrors||(t.IDPXmlParseErrors={})),function(e){e.KEY_DESCRIPTOR_NOT_FOUND="key_descriptor_not_found",e.IDP_ENTRYPOINT_NOT_FOUND="idp_entrypoint_not_found",e.INVALID_IDP_SSO_DESCRIPTOR="invalid_idp_sso_descriptor",e.MISSING_CERTIFICATE="missing_certificate",e.MULTIPLE_CERTIFICATES="multiple_certificates",e.INVALID_ENTRYPOINT="invalid_entrypoint"}(t.IDPMetadataParseErrors||(t.IDPMetadataParseErrors={}))},68323:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},70178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamSettings=void 0;const n=r(34376),o=r(27885),a=r(89675);t.updateTeamSettings=async(e,t)=>{const r=(0,o.getCurrentSpaceId)(e.storeService.getSpaceData()),i=await(0,a.setTeamSettings)(e.storeService,e.wsService,(0,n.getCurrentUserInfo)(e.storeService),{teamId:r,settings:t});return i.error?{success:!1,error:i.error.message}:{success:!0}}},38045:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpecialUserGroupRevision=t.getSpecialUserGroupInviteValuesForMemberInTeam=t.removeTeamAdmin=t.addTeamAdmin=t.proposeMembers=t.getMembers=void 0,r(16516);const n=r(34376),o=r(36513),a=r(44197),i=r(43927),s=r(97124),c=r(95375),u=r(46298),l=e=>{const t=e.nbrPasswords&&"removed"!==e.status;return e.securityIndex=t&&e.securityIndex,e.nbrPasswords=t&&e.nbrPasswords,"pending"===e.status&&e.lastUpdateDateUnix&&delete e.lastUpdateDateUnix,e};t.getMembers=async function(e,t,{teamId:r}){const n=await(0,c.getTeamMembers)(e,t,{teamId:r,orderBy:"login",limit:0});return(0,u.isApiError)(n)?{success:!1,error:new Error(n.message)}:{success:!0,members:n.members.map(l)}},t.proposeMembers=async function(e,{login:t,uki:r},{proposedMemberLogins:n,teamId:o,origin:a,notificationOptions:i={skipAccountCreationRequiredAlerts:!1}}){const{content:s}=await e.teamPlans.proposeMembers({login:t,uki:r,teamId:o,proposedMemberLogins:n,force:!0,origin:a,notificationOptions:i});return s},t.addTeamAdmin=async function(e,{teamId:t,memberLogin:r}){const{ws:s,store:c}=e,u=(0,n.getCurrentUserInfo)(c),l=c.getTeamAdminData(),d=(0,a.getAdminDataFromTeamAdminData)(l,String(t)),{revision:p}=await(0,i.loadSpecialUserGroup)(s,u.login,u.uki,d),{groupKey:f,proposeSignature:g}=await(0,a.makeInviteToSpecialUserGroup)(e,(0,o.makeCryptoService)(),u,l,{teamId:t,memberLogin:r});return await e.ws.teamPlans.addTeamAdmin({login:u.login,uki:u.uki,teamId:t,memberLogin:r,memberAlias:r,groupKey:f,proposeSignature:g,userGroupRevision:p}),{}},t.removeTeamAdmin=async function(e,{teamId:t,memberLogin:r}){const{ws:o,store:s}=e,c=(0,n.getCurrentUserInfo)(s),u=s.getTeamAdminData(),l=(0,a.getAdminDataFromTeamAdminData)(u,String(t)),{revision:d}=await(0,i.loadSpecialUserGroup)(o,c.login,c.uki,l);return await o.teamPlans.removeTeamAdmin({login:c.login,uki:c.uki,teamId:t,memberLogin:r,userGroupRevision:d}),{}},t.getSpecialUserGroupInviteValuesForMemberInTeam=async function(e,{teamId:t,memberLogin:r}){const{wsService:i,storeService:c}=e,u=(0,s.makeSharingService)(c,i),l=(0,n.getCurrentUserInfo)(c),d=c.getTeamAdminData(),{groupKey:p,proposeSignature:f}=await(0,a.makeInviteToSpecialUserGroup)(u,(0,o.makeCryptoService)(),l,d,{teamId:t,memberLogin:r});return{groupKey:p,proposeSignature:f}},t.getSpecialUserGroupRevision=async function(e,{teamId:t}){const{wsService:r,storeService:o}=e,s=(0,n.getCurrentUserInfo)(o),c=o.getTeamAdminData(),u=(0,a.getAdminDataFromTeamAdminData)(c,String(t)),{revision:l}=await(0,i.loadSpecialUserGroup)(r,s.login,s.uki,u);return{specialUserGroupRevision:l}}},19408:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupKey=t.syncUserGroupManagementForAllTeams=void 0;const n=r(19364),o=r(43927),a=r(85784),i=r(81567),s=r(17137);t.syncUserGroupManagementForAllTeams=function(e,t,r,c,u,l,d){const p=(0,o.syncAdministrableTeamList)(u,d);return Promise.all(Object.keys(p.teams).map((u=>{const d=p.teams[u];return function(e,t,r,c,u,l){return Promise.resolve(u).then((e=>(0,o.syncAdminData)(t,r,e,l))).then((t=>(0,n.setupUserGroupManagement)(e,r,c,t))).then((t=>t.status===a.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA?t:(0,i.filterOutInvalidUserGroupUsers)(e.crypto,t.adminData).then((t=>(0,s.sendUserGroupInvitesToNewUsers)(e,r,t))).then((e=>({status:a.SyncUserGroupManagementStatus.COMPLETE,adminData:e})))))}(e,t,r,c,d,l)}))).then((e=>{const t={};return e.map((e=>e.adminData)).forEach((e=>{t[e.teamId]=e})),{status:e.some((e=>e.status===a.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA))?a.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA:a.SyncUserGroupManagementStatus.COMPLETE,teamAdminData:{teams:t}}}))},t.getUserGroupKey=function(e,t){if(!e)return null;const r=e.find((e=>e.groupId===t));return r?r.groupKey:null}},36467:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupAdminItemsFromMigration=t.createItemsForUserGroups=void 0;const n=r(78320),o=r(93513);async function a(e,t,r){const n=r.users.find((e=>e.userId===t.login));if(!n)throw new Error("Couldnt find self in user group");return await e.asymmetricEncryption.decrypt(t.privateKey,n.groupKey)}t.createItemsForUserGroups=async function(e,t,r){return await Promise.all(r.map((r=>async function(e,t,r){const n=await e.symmetricEncryption.generateNewAESKey(),[a,i]=await Promise.all([e.symmetricEncryption.encryptAES256(n,o.encode(JSON.stringify(r))),e.symmetricEncryption.encryptAES256(t,o.encode(n))]);return{itemId:r.itemId,itemKey:i,content:a}}(e,t,r))))},t.getUserGroupAdminItemsFromMigration=async function(e,t,r){return await Promise.all((r.userGroups||[]).map((r=>async function(e,t,r){return{itemId:(0,n.generateItemUuid)(),groupId:r.groupId,groupKey:await a(e,t,r)}}(e,t,r))))}},17137:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendUserGroupInvitesToNewUsers=void 0;const n=r(70252),o=r(95623),a=r(19408);function i(e){return e.users.filter((e=>"publicKey"===e.rsaStatus))}t.sendUserGroupInvitesToNewUsers=function(e,t,r){return Promise.resolve().then((()=>function(e){return e.userGroups?e.userGroups.reduce(((e,t)=>e.concat(i(t))),[]):[]}(r))).then((s=>s.length?function(e,t,r){const{login:n,uki:o}=t,a=JSON.stringify(r.map((e=>e.alias)));return e.userGroup.findUsersByAliases({login:n,uki:o,aliases:a})}(e,t,s).then((s=>{const c=r.userGroups.map((c=>{const u=i(c);if(!u.length)return Promise.resolve(c);const l=function(e,t){return t.map((t=>({Alias:t.alias,Login:e[t.alias].login,PublicKey:e[t.alias].publicKey,Permission:t.permission})))}(s,u),d=(0,a.getUserGroupKey)(r.userGroupAdminItems,c.groupId);return e.userGroup.makeUpdateMembersWithInviteEvent(c.groupId,d,c.revision,l).then((r=>e.userGroup.updateUserGroupMembers(t,r))).then((e=>e[0])).catch((e=>{const t=`[sendUserGroupInvitesToNewUsers] - Cannot send update event for one user group - groupId: ${c.groupId} - error: ${e}`,r=new Error(t);return o.default.error(r),(0,n.sendExceptionLog)({error:r}),c}))}));return Promise.all(c).then((e=>({...r,userGroups:e})))})):r))}},19364:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSpecialGroups=t.setupUserGroupManagement=void 0;const n=r(95623),o=r(63623),a=r(44197),i=r(36467),s=r(85784);function c(e,t,r,a){return n.Debugger.log("setting up group sharing for team: "+a.teamId),Promise.resolve(a).then((n=>n.specialUserGroup?n:(0,o.createSpecialUserGroup)(e,t,r,Number(n.teamId)).then((e=>Object.assign({},n,{specialUserGroup:e}))))).then((r=>r.specialItemGroup?r:(0,i.getUserGroupAdminItemsFromMigration)(e.crypto,t,a).then((n=>(0,o.createSpecialItemGroup)(e,t,r.specialUserGroup,n).then((e=>Object.assign({},r,{specialItemGroup:e,userGroupAdminItems:n})))))))}t.setupUserGroupManagement=function(e,t,r,n){const o=n.specialUserGroup,i=n.specialItemGroup;if(!o)return i?Promise.reject(new Error("UserGroupManagementSetupService - no special user group, but a special item group is present")):c(e,t,r,n).then((e=>({status:s.SyncUserGroupManagementStatus.COMPLETE,adminData:e})));const u=(0,a.getUserInUserGroup)(t.login,o);return u?"pending"===u.status?i?Promise.reject(new Error("UserGroupManagementSetupService - special user group is not accepted, but a special item group is present")):Promise.resolve().then((()=>e.userGroup.isCurrentUserProposeSignatureValid(t,o))).then((e=>{if(!e)throw new Error("UserGroupManagementSetupService - INVALID_PROPOSE_SIGNATURE")})).then((()=>e.userGroup.makeAcceptUserGroupEvent(t,o))).then((r=>e.userGroup.acceptUserGroup(t,r))).then((({userGroups:e})=>{if(1!==e.length)throw new Error(`UserGroupManagementSetupService - Invalid response from UserGroupService.acceptUserGroup - ${e}`);return e[0]})).then((e=>Object.assign({},n,{specialUserGroup:e}))).then((e=>({status:s.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA,adminData:e}))):"accepted"===u.status?i?Promise.resolve({status:s.SyncUserGroupManagementStatus.COMPLETE,adminData:n}):c(e,t,r,n).then((e=>({status:s.SyncUserGroupManagementStatus.COMPLETE,adminData:e}))):Promise.reject(new Error("UserGroupManagementSetupService - current user status in special user group is neither accepted or pending")):Promise.reject(new Error("UserGroupManagementSetupService - Current user us missing from special user group"))},t.createSpecialGroups=c},43927:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadSpecialUserGroup=t.loadSpecialItemGroup=t.syncAdminDataFromSharingData=t.createUserGroupAdminItemInState=t.deleteAdministrableUserGroups=t.updateAdministrableUserGroupList=t.updateTeamAdminData=t.filterTeamAdminData=t.syncAdminData=t.syncAdministrableTeamList=t.getUserGroupDescriptionsForTeam=void 0;const n=r(63623),o=r(1370),a=r(28096),i=r(44197),s=r(36513),c=r(27885);function u(e,t,r,n){return e.teamPlans.findUserGroups({login:t,uki:r,teamId:n}).then((e=>e.content.userGroups))}function l(e){const t={};return Object.keys(e.teams).forEach((r=>{const n=e.teams[r];t[r]=n?{teamId:r,userGroups:n.userGroups||[],notifications:n.notifications||{accountRecoveryRequests:[]}}:{teamId:r}})),{teams:t}}t.getUserGroupDescriptionsForTeam=u,t.syncAdministrableTeamList=function(e,t){const r={},n=(0,c.getNodePremiumStatusSpaceData)(t),o=n.spaces.filter((e=>(0,c.hasSpecialUserGroupAccessInSpace)(e.teamId,n))).map((e=>e.teamId));return Object.keys(e.teams).filter((e=>Boolean(e))).filter((e=>o.includes(e))).forEach((t=>{r[t]=e.teams[t]})),o.forEach((e=>{r[e]||(r[e]={teamId:e})})),{teams:r}},t.syncAdminData=async function(e,t,r,o){const a=await p(t,r,o);return a.specialUserGroup&&!(0,i.hasUserAcceptedUserGroup)(t.login,a.specialUserGroup)?a:async function(e,t,r,o){const a={items:[],itemGroups:[],userGroups:(await u(e,t,r,Number(o.teamId))).map((e=>({id:e.groupId,revision:e.revision})))},i={items:[],itemGroups:[],userGroups:(o.userGroups||[]).filter((e=>Boolean(e)))},s=await(0,n.buildSharingData)(e,t,r,a,i);return{...o,userGroups:s.userGroups}}(e,t.login,t.uki,a)},t.filterTeamAdminData=l,t.updateTeamAdminData=function(e,t){e.dispatch((0,o.teamAdminDataUpdated)(t)),(0,a.sendTeamAdminDataUpdate)(l(t))},t.updateAdministrableUserGroupList=function(e,t,r){e.dispatch((0,o.userGroupsUpdated)(t,r)),(0,a.sendTeamAdminDataUpdate)(l(e.getTeamAdminData()))},t.deleteAdministrableUserGroups=function(e,t,r){e.dispatch((0,o.userGroupsDeleted)(t,r)),(0,a.sendTeamAdminDataUpdate)(l(e.getTeamAdminData()))},t.createUserGroupAdminItemInState=function(e,t,r){e.dispatch((0,o.userGroupAdminItemCreated)(t,r))};const d=e=>e.reduce(((e,t)=>((0,i.isUserGroupAdminItem)(t)?e.userGroupAdminItems.push(t):(0,i.isDirectorySyncKey)(t)?e.directorySyncKey=t:(0,i.isEsBasicConfigsData)(t)?e.encryptionServiceData=t:(0,i.isSSOConnectorKey)(t)?e.ssoConnectorKey=t:(0,i.isSCIMSignatureKey)(t)?e.scimSignatureKey=t:(0,i.isAdminProvisioningKey)(t)&&(e.adminProvisioningKey=t),e)),{userGroupAdminItems:[],directorySyncKey:null,encryptionServiceData:null,ssoConnectorKey:null,scimSignatureKey:null,adminProvisioningKey:null});async function p(e,t,r){const n=function(e,t){const r=t.itemGroups.find((t=>"userGroupKeys"===t.type&&t.teamId===Number(e.teamId))),n=t.userGroups.find((t=>"teamAdmins"===t.type&&t.teamId===Number(e.teamId)));return{...e,specialItemGroup:r,specialUserGroup:n}}(t,r);return async function(e,t,r){const n=(0,s.makeCryptoService)(),o=t.specialItemGroup&&t.specialItemGroup.items||[],a=e=>({itemId:t})=>t===e,c=await Promise.all(r.items.filter((e=>o.find(a(e.itemId)))).map((r=>{const s=o.find(a(r.itemId))?.itemKey;if(!s)throw new Error("Unexpected error: missing itemKey");return(0,i.decryptAdminItem)(n,e,t,r,s)}))),{userGroupAdminItems:u,directorySyncKey:l,encryptionServiceData:p,ssoConnectorKey:f,scimSignatureKey:g,adminProvisioningKey:m}=d(c);return{...t,userGroupAdminItems:u,directorySyncKey:l,encryptionServiceData:p,ssoConnectorKey:f,scimSignatureKey:g,adminProvisioningKey:m}}(e,n,r)}t.syncAdminDataFromSharingData=p,t.loadSpecialItemGroup=async function(e,t,r,o){if(!o.specialItemGroup||!o.specialItemGroup.groupId)throw new Error("specialItemGroup is missing from adminData");const{itemGroups:a}=await(0,n.getSharedData)(e,t,r,{itemIds:[],itemGroupIds:[o.specialItemGroup.groupId],userGroupIds:[]});if(a&&1===a.length)return a[0];throw new Error("could not fetch specialItemGroup")},t.loadSpecialUserGroup=async function(e,t,r,o){const{userGroups:a}=await(0,n.getSharedData)(e,t,r,{itemIds:[],itemGroupIds:[],userGroupIds:o.specialUserGroup?.groupId?[o.specialUserGroup.groupId]:[]});if(a&&1===a.length)return a[0];throw new Error("Could not fetch specialUserGroup")}},85784:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncUserGroupManagementStatus=void 0,function(e){e[e.NEEDS_FRESH_SHARING_DATA=0]="NEEDS_FRESH_SHARING_DATA",e[e.COMPLETE=1]="COMPLETE"}(t.SyncUserGroupManagementStatus||(t.SyncUserGroupManagementStatus={}))},81567:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterOutInvalidUserGroupUsers=void 0;const n=r(82366),o=r(19408);t.filterOutInvalidUserGroupUsers=function(e,t){if(!t.userGroups)return Promise.resolve(t);const r=t.userGroups.map((r=>{const a=(0,o.getUserGroupKey)(t.userGroupAdminItems,r.groupId);return function(e,t,r){const o=r.map((r=>{if("refused"===r.status||"revoked"===r.status)return Promise.resolve(!0);if(!r.proposeSignature)return Promise.resolve(!1);const o=r.proposeSignatureUsingAlias?r.alias:r.userId;return(0,n.isProposeSignatureValid)(e,r.proposeSignature,o,t)}));return Promise.all(o).then((e=>r.filter(((t,r)=>e[r]))))}(e,a,r.users).then((e=>({...r,users:e})))}));return Promise.all(r).then((e=>({...t,userGroups:e})))}},44197:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findTeamForGroup=t.syncUserGroupManagement=t.isAdminProvisioningKey=t.isSCIMSignatureKey=t.isSSOConnectorKey=t.isEsBasicConfigsData=t.isDirectorySyncKey=t.isUserGroupAdminItem=t.decryptAdminItem=t.getUserGroup=t.getUserGroupAdminItem=t.getSpecialItemGroupKey=t.getSpecialItemGroupFromAdminData=t.getAdminDataFromTeamAdminData=t.makeInviteToSpecialUserGroup=t.getPublicKeyForUser=t.encryptGroupKeyForUser=t.getSpecialUserGroupPrivateKey=t.getSpecialUserGroupKey=t.hasUserAcceptedUserGroup=t.getUserInUserGroup=t.getSpecialUserGroup=void 0;const n=r(63623),o=r(34376),a=r(82366),i=r(70206),s=r(19408),c=r(43927),u=r(97124);function l(e){return e.specialUserGroup}function d(e,t,r){const n=l(r);if(!n)throw new Error("specialUserGroup is not available in adminData");const o=n.users.find((e=>e.userId===t.login));if(!o)throw new Error("couldnt find self in specialUserGroup users");return(0,i.decryptGroupKey)(e,t,o.groupKey)}async function p(e,t,r){const n=await d(e,t,r),o=l(r);return await e.symmetricEncryption.decryptAES256(n,o.privateKey)}function f(e,t,r){return e.asymmetricEncryption.encrypt(t,r)}function g(e,t,r){return e.userGroup.findExistingUsersByAliases({login:t.login,uki:t.uki,aliases:(0,n.extractAliasesFromMembers)([{Alias:r}])}).then((e=>e[r].publicKey))}function m(e,t){return e.teams[t]}function h(e){return e.specialItemGroup}async function y(e,t,r){const n=h(r);if(!n)throw new Error("specialItemGroup is not available in adminData");const o=await p(e,t,r),a=l(r).groupId,i=n.groups.find((e=>e.groupId===a));if(!i)throw new Error("couldnt find specialUserGroup in specialItemGroup groups");return e.asymmetricEncryption.decrypt(o,i.groupKey)}t.getSpecialUserGroup=l,t.getUserInUserGroup=function(e,t){return t.users.find((t=>t.userId===e))},t.hasUserAcceptedUserGroup=function(e,t){return t.users.some((t=>t.userId===e&&"accepted"===t.status))},t.getSpecialUserGroupKey=d,t.getSpecialUserGroupPrivateKey=p,t.encryptGroupKeyForUser=f,t.getPublicKeyForUser=g,t.makeInviteToSpecialUserGroup=function(e,t,r,n,{teamId:o,memberLogin:i,publicKey:s}){const c=m(n,String(o)),u=s?Promise.resolve(s):g(e,r,i);return Promise.all([d(t,r,c),u]).then((([e,r])=>Promise.all([f(t,r,e),(0,a.generateProposeSignature)(t,e,i)]))).then((([e,t])=>({groupKey:e,proposeSignature:t,userGroupRevision:l(c).revision})))},t.getAdminDataFromTeamAdminData=m,t.getSpecialItemGroupFromAdminData=h,t.getSpecialItemGroupKey=y,t.getUserGroupAdminItem=function(e,t,r){return(m(e,t).userGroupAdminItems||[]).find((e=>e.groupId===r))},t.getUserGroup=function(e,t){return Object.keys(e.teams).map((t=>e.teams[t]&&e.teams[t].userGroups)).reduce(((e,t)=>t.concat(e)),[]).find((e=>e.groupId===t))},t.decryptAdminItem=async function(e,t,r,n,o){const a=await y(e,t,r),i=await e.symmetricEncryption.decryptAES256(a,o),s=await e.symmetricEncryption.decryptAES256(i,n.content);return{...JSON.parse(s),itemId:n.itemId}},t.isUserGroupAdminItem=function(e){return"groupId"in e},t.isDirectorySyncKey=function(e){return"publicKey"in e},t.isEsBasicConfigsData=e=>"basicConfigs"in e,t.isSSOConnectorKey=e=>"ssoConnectorKey"in e,t.isSCIMSignatureKey=e=>"scimSignatureKey"in e,t.isAdminProvisioningKey=e=>"adminProvisioningKey"in e,t.syncUserGroupManagement=function(e,t,r){const n=e.getSpaceData(),a=e.getTeamAdminData(),i=(0,o.getCurrentUserInfo)(e),l=(0,u.makeSharingService)(e,t);return i.privateKey?(0,s.syncUserGroupManagementForAllTeams)(l,t,(0,o.getCurrentUserInfo)(e),n,a,r,e).then((t=>((0,c.updateTeamAdminData)(e,t.teamAdminData),t.status))):Promise.reject(new Error("PRIVATE_KEY_MISSING"))},t.findTeamForGroup=function(e,t){const r=Object.keys(e.teams).find((r=>e.teams[r].userGroups.some((e=>e.groupId===t))));return r&&e&&e.teams&&e.teams[r]}},32159:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adminProvisioningKey$=t.administrableUserGroup$=t.administrableUserGroups$=void 0;const n=r(18948),o=r(3343),a=r(92310),i=r(94228);t.administrableUserGroups$=function(){const e=a.administrableUserGroupsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.administrableUserGroup$=function(e){const t=(0,a.getAdministrableUserGroupSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.adminProvisioningKey$=()=>(0,n.pipe)((0,o.map)(i.adminProvisioningKeySelector),(0,o.distinctUntilChanged)())},76154:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRecoveryCodesAsTeamCaptain=void 0;const n=r(46298),o=r(74528),a=r(16593),i=r(66535),s=e=>{switch(e.code){case o.GetRecoveryCodesAsTeamCaptainNotAdminErrorCode:return i.GetRecoveryCodesAsTeamCaptainErrorCode.NotAdmin;case o.GetRecoveryCodesAsTeamCaptainInternalErrorCode:return i.GetRecoveryCodesAsTeamCaptainErrorCode.InternalError;default:return i.GetRecoveryCodesAsTeamCaptainErrorCode.UnknownError}};t.getRecoveryCodesAsTeamCaptain=async function(e,t){const{storeService:r}=e,i=(0,a.userLoginSelector)(r.getState()),c=await(0,o.getRecoveryCodesAsTeamCaptain)(r,i,t);return(0,n.isApiError)(c)?{success:!1,error:{code:s(c)}}:{success:!0,data:{recoveryCodes:c.recoveryCodes}}}},66535:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetRecoveryCodesAsTeamCaptainErrorCode=void 0,function(e){e.NotAdmin="not_billing_admin",e.InternalError="internal_error",e.UnknownError="UNKNOWN_ERROR"}(t.GetRecoveryCodesAsTeamCaptainErrorCode||(t.GetRecoveryCodesAsTeamCaptainErrorCode={}))},92310:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAdministrableUserGroupSelector=t.isGroupNameAvailableSelector=t.administrableUserGroupSelector=t.administrableUserGroupsSelector=t.currentSpaceInfoSelector=t.currentTeamIdSelector=t.adminDataForTeamSelector=void 0;const n=r(32034);t.adminDataForTeamSelector=(e,t)=>{const r=(e=>e.userSession.teamAdminData)(e);return r.teams?r.teams[t]:void 0},t.currentTeamIdSelector=e=>{const t=e.userSession.spaceData.spaces.find((e=>"accepted"===e.details.status));if(t)return t.teamId},t.currentSpaceInfoSelector=e=>{const t=e.userSession.spaceData.spaces.find((e=>"accepted"===e.details.status));if(t)return t.info},t.administrableUserGroupsSelector=e=>{const r=(0,t.currentTeamIdSelector)(e);if(!r)return[];const n=(0,t.adminDataForTeamSelector)(e,r);return n&&n.userGroups||[]},t.administrableUserGroupSelector=(e,r)=>(0,t.administrableUserGroupsSelector)(e).find((e=>e.groupId===r)),t.isGroupNameAvailableSelector=(e,r)=>!(0,t.administrableUserGroupsSelector)(e).some((e=>e.name===r)),t.getAdministrableUserGroupSelector=e=>(0,n.createSelector)(t.administrableUserGroupsSelector,(t=>t.find((t=>t.groupId===e))))},3674:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeTeamAdminController=void 0;const n=r(97124),o=r(34376),a=r(38045),i=r(43927),s=r(63623),c=r(44197),u=r(66833),l=r(1370);function d(e,t,r){return a.proposeMembers(t,(0,o.getCurrentUserInfo)(e),r)}function p(e,t){return(0,c.getUserGroup)(e.getTeamAdminData(),t)}t.makeTeamAdminController=(e,t)=>({getMembers:t=>function(e,t){return a.getMembers(e,(0,o.getCurrentUserInfo)(e).login,t)}(e,t),proposeMembers:r=>d(e,t,r),addTeamAdmin:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const o=(0,n.makeSharingService)(e,t);return a.addTeamAdmin(o,r).catch((e=>({error:e})))}(e,t,r),removeTeamAdmin:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const o=(0,n.makeSharingService)(e,t);return a.removeTeamAdmin(o,r).catch((e=>({error:e})))}(e,t,r),createUserGroupAction:(r,a)=>function(e,t,r,a){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(a);const c=(0,n.makeSharingService)(e,r),u=(0,o.getCurrentUserInfo)(e),d=e.getTeamAdminData();return(0,s.createUserGroup)(c,u,d,a).then((r=>{if(Array.isArray(r.itemGroups)&&r.itemGroups.length>0){const t=r.itemGroups[0],n=String(t.teamId),o=(0,l.specialItemGroupUpdated)(n,t);e.dispatch(o)}const n=a.teamId,o=e.getTeamAdminData().teams[n]&&e.getTeamAdminData().teams[n].userGroups||[];return(0,i.updateAdministrableUserGroupList)(e,n.toString(),o.concat(r.userGroups)),r.userGroupAdminItem&&((0,i.createUserGroupAdminItemInState)(e,n.toString(),r.userGroupAdminItem),t.getInstance().user.persistTeamAdminData().then((()=>r))),r})).then((e=>({userGroups:e.userGroups,error:e.error})))}(e,r,t,a),deleteUserGroupAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const a=(0,n.makeSharingService)(e,t),c=(0,o.getCurrentUserInfo)(e),u=p(e,r.groupId);return(0,s.deleteUserGroup)(a,c,e.getTeamAdminData(),r).then((({userGroups:t,itemGroups:r})=>{const n=r[0],o=String(n.teamId),a=(0,l.specialItemGroupUpdated)(o,n);return e.dispatch(a),(0,i.deleteAdministrableUserGroups)(e,String(u.teamId),t),{userGroups:t}}))}(e,t,r),renameUserGroupAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const a=(0,n.makeSharingService)(e,t),c=(0,o.getCurrentUserInfo)(e);return(0,s.renameUserGroup)(a,c,r).then((({userGroups:t})=>{if(t&&1===t.length){const n=String(t[0].teamId),o=(e.getTeamAdminData().teams[n]&&e.getTeamAdminData().teams[n].userGroups||[]).map((e=>e.groupId===r.groupId&&t[0]||e));(0,i.updateAdministrableUserGroupList)(e,n,o)}return{userGroups:t}}))}(e,t,r),inviteUserGroupMembersAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const a=(0,n.makeSharingService)(e,t),c=(0,o.getCurrentUserInfo)(e),u=e.getTeamAdminData(),l=p(e,r.groupId),f={};r.users.forEach((e=>f[e.alias]=e));const g={proposedMemberLogins:Object.keys(f),teamId:r.teamId,origin:"teamInviteUserGroupUsers",notificationOptions:{skipAccountCreationRequiredAlerts:!0}};return d(e,t,g).then((t=>{const n=Object.keys(t.proposedMembers).map((e=>f[e]));t.accountCreationRequiredMembers.forEach((e=>n.push(f[e])));const o={};if(Object.keys(t.refusedMembers).forEach((e=>{const r=t.refusedMembers[e];"already_member"!==r?o[e]=r:n.push(f[e])})),0===n.length)return{userGroups:[l],refusedMembers:o};const d={...r,users:n};return(0,s.inviteUserGroupMembers)(a,c,u,d,l).then((t=>{if(t.error)return t;const n=String(t.userGroups[0].teamId),a=(e.getTeamAdminData().teams[n]&&e.getTeamAdminData().teams[n].userGroups||[]).map((e=>e.groupId===r.groupId&&t.userGroups&&t.userGroups[0]||e));return(0,i.updateAdministrableUserGroupList)(e,String(l.teamId),a),{...t,refusedMembers:o}}))}))}(e,t,r),revokeUserGroupMembersAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const a=(0,n.makeSharingService)(e,t),c=(0,o.getCurrentUserInfo)(e);return(0,s.revokeUserGroupMembers)(a,c,r).then((t=>{if(t&&t.userGroups&&1===t.userGroups.length){const n=t.userGroups[0],o=(e.getTeamAdminData().teams[n.teamId]&&e.getTeamAdminData().teams[n.teamId].userGroups||[]).map((e=>e.groupId===r.groupId&&t.userGroups&&t.userGroups[0]||e));(0,i.updateAdministrableUserGroupList)(e,String(n.teamId),o)}return t}))}(e,t,r),updateUserGroupMembersAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const a=(0,n.makeSharingService)(e,t),i=(0,o.getCurrentUserInfo)(e);return(0,s.updateUserGroupMembers)(a,i,r)}(e,t,r),teamUpdateHandler:t=>function(e,t){return Promise.resolve().then((()=>{if(!e.isAuthenticated())return[new Error("no session set")];if(["adminPromoted","adminDemoted"].includes(t.action)&&(()=>{const r=e.getSpaceData().spaces.map((e=>{if(e.details.teamId!==t.teamId.toString())return e;const r=function(e,t){const{teamAdmins:r}=e.details;switch(t.action){case"adminPromoted":return r.concat(t.users.map((e=>({login:e}))));case"adminDemoted":return r.filter((e=>!t.users.includes(e.login)));default:return r}}(e,t);return Object.assign({},e,{details:Object.assign({},e.details,{teamAdmins:r})})}));(0,u.updateSpaceData)(e,r)})(),"memberRevoked"===t.action){const r=e.getTeamAdminData().teams[t.teamId],n=(r.userGroups||[]).map((e=>Object.assign({},e,{users:e.users.filter((e=>!t.users.includes(e.alias)))})));(0,i.updateAdministrableUserGroupList)(e,r.teamId,n)}return null}))}(e,t),confirmFreeTrial:e=>function(e,t){return e.teamPlans.confirmFreeTrial({token:t})}(t,e),getPremiumStatus:e=>function(e,t){return e.premium.status(t)}(t,e),getTeamTokens:()=>function(e,t){const r=e.getUserLogin();return t.qa.tokens({login:r})}(e,t),registerFreeTrial:e=>function(e,t){return e.teamPlans.registerFreeTrial(t)}(t,e),acceptTeamInvite:e=>function(e,t){const{token:r}=t;return e.teamPlans.acceptTeam({token:r})}(t,e)})},64688:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(68541);t.bootstrap=e=>{e.register(n.config)}},53050:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createOrUpdateSpecialItem=void 0;const n=r(78320),o=r(34376),a=r(62618),i=r(44197),s=r(92310),c=r(74042),u=r(14432);t.createOrUpdateSpecialItem=async(e,t,r)=>{const{storeService:l,localStorageService:d}=e;(0,a.requireAdmin)(l);const p=(0,s.currentTeamIdSelector)(l.getState()),f=(0,s.adminDataForTeamSelector)(l.getState(),p),g=(0,o.getCurrentUserInfo)(l),{crypto:m,item:h,ws:y}=t,{specialItemGroup:S}=f;if(!S)throw new Error("Cannot find specialItemGroup in adminData");const v=await(0,i.getSpecialItemGroupKey)(m,g,f),E=(0,n.generateItemUuid)(),A=await m.symmetricEncryption.generateNewAESKey(),_=await m.symmetricEncryption.encryptAES256(v,btoa(A)),b=await m.symmetricEncryption.encryptAES256(A,btoa(JSON.stringify(r))),T=await h.makeItemUpload(E,_,b),I=await h.makeAddItemsEvent(S.groupId,S.revision,[T]),w=await h.addItems(y,g.login,g.uki,I),C=w?.items?.find((({itemId:e})=>e===E));if(!C)throw new Error("unable to persist item");return await(0,c.updateAdminDataAfterItemAddedOrUpdated)(l,d,t.ws,g,p,w),await(0,u.updateSharingDataAfterItemAddedOrUpdated)(e.storeService,e.localStorageService,C,w.itemGroups[0]),r}},51168:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.setupSubscriptions=void 0;var n=r(77208);Object.defineProperty(t,"setupSubscriptions",{enumerable:!0,get:function(){return n.setupSubscriptions}});var o=r(64688);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},94150:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeTeamAdminItem=void 0;const n=r(97124),o=r(34376),a=r(31676),i=r(92310);t.removeTeamAdminItem=async({storeService:e,localStorageService:t,wsService:r},s)=>{const c=(0,n.makeSharingService)(e,r),u=(0,o.getCurrentUserInfo)(e),l=(0,i.currentTeamIdSelector)(e.getState()),d=(0,i.adminDataForTeamSelector)(e.getState(),l),{specialItemGroup:p}=d,{item:f,ws:g}=c;if(!p)throw new Error("Cannot find specialItemGroup in adminData");const{revision:m,groupId:h}=p,y=d[s];if(!y)return{success:!0};const{itemId:S}=y,v=await f.makeRemoveItemsEvent(h,m,[S]),E=await f.removeItems(g,u.login,u.uki,v);return await(0,a.updateDataAfterSpecialItemRemoved)(e,t,c.ws,u,E,v),{success:!0}}},77208:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(97124),o=r(7344),a=r(58415);t.setupSubscriptions=async function(e,t){const{sessionService:r,storeService:i,localStorageService:s,wsService:c}=t,u=(0,n.makeSharingService)(i,c),l=(0,a.makeDirectorySyncController)({sessionService:r,sharingService:u,storeService:i,localStorageService:s,wsService:c});e.syncSuccess.on((()=>{const e=i.isFeatureActivated("teamAdminConsoleDirectorySync"),t=i.getSpaceData(),r=(0,o.isDirectorySyncActivated)(t);e&&r&&l.directorySyncForAllTeams()}))}},31676:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateDataAfterSpecialItemRemoved=void 0;const n=r(1370),o=r(34433),a=r(43927),i=r(92310);t.updateDataAfterSpecialItemRemoved=async(e,t,r,s,c,u)=>{if(1!==u.items.length)throw new Error("Currently only supporting single item removal.");const l=(0,i.currentTeamIdSelector)(e.getState()),d=e.getTeamAdminData().teams[l],p=t.getInstance(),f=await(async(e,t,r)=>{const{items:n,...o}=await e.getSharingData(),a=n.filter((({itemId:e})=>e!==r.items[0])),i=o.itemGroups.filter((({groupId:e})=>e!==r.groupId)),s=t.itemGroups.find((({groupId:e})=>e===r.groupId)),c=i.concat(s);return{...o,itemGroups:c,items:a}})(p,c,u),g={teams:{[l]:await(0,a.syncAdminData)(r,s,d,f)}},m=(0,n.teamAdminDataUpdated)(g),h=e.dispatch(m),y=t.getInstance();await y.storeTeamAdminData(h.teamAdminData),e.dispatch((0,o.sharingDataUpdated)(f)),await p.storeSharingData(f)}},74042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateAdminDataAfterItemAddedOrUpdated=void 0;const n=r(1370),o=r(43927),a=(e,t,r)=>t?e.filter((({[r]:e})=>e!==t[r])).concat([t]):e;t.updateAdminDataAfterItemAddedOrUpdated=async(e,t,r,i,s,{itemGroups:c,items:u})=>{const l=e.getSharingData(),{items:d,itemGroups:p,userGroups:f,...g}=l,m=e.getTeamAdminData().teams[s],[h]=c??[],[y]=u??[],{specialUserGroup:S}=m,v={...g,items:a(d,y,"itemId"),itemGroups:a(p,h,"groupId"),userGroups:a(f,S,"groupId")},E=await(0,o.syncAdminData)(r,i,m,v),A={teams:{[s]:E}},_=(0,n.teamAdminDataUpdated)(A),b=e.dispatch(_),T=t.getInstance();return await T.storeTeamAdminData(b.teamAdminData),E}},14432:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateSharingDataAfterItemAddedOrUpdated=void 0;const n=r(34433);t.updateSharingDataAfterItemAddedOrUpdated=async(e,t,r,o)=>{const a=t.getInstance(),{items:i,itemGroups:s,...c}=await a.getSharingData(),u=i.filter((({itemId:e})=>e!==r.itemId)).concat([r]),l={...c,itemGroups:o?s.filter((({groupId:e})=>e!==o.groupId)).concat([o]):s,items:u};e.dispatch((0,n.sharingDataUpdated)(l)),await a.storeSharingData(l)}},77627:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeSessionService=void 0;const n=r(95551),o=r(97321),a=r(34186),i=r(27754),s=r(6623);t.makeSessionService=e=>{let t=null,r=null,c=null;return{isSessionStarted:()=>{const{storeService:t}=e,r=t.getState();return!!(0,i.sessionStartTimeSelector)(r)},setInstance:(i,s)=>{t=(0,n.makeUserSessionService)(e,i,s),r=(0,o.makeUserDeviceService)(e.storeService,e.wsService),c=(0,a.makeUserPaymentService)(e.storeService,e.wsService)},close:()=>(t?t.closeSession():Promise.resolve()).then((()=>{t=null,r=null,c=null})),lock:()=>(t?t.lockSession():Promise.resolve()).then((()=>{t=null,r=null,c=null})),tryRestoreInstance:()=>{const{storeService:u}=e,l=u.getState();(0,i.sessionIdSelector)(l)?(t=(0,n.makeResumedUserSessionService)(e),r=(0,o.makeUserDeviceService)(e.storeService,e.wsService),c=(0,a.makeUserPaymentService)(e.storeService,e.wsService)):(0,s.setupEncryptorServices)(e)},getInstance:()=>{if(!t)throw new Error("makeSessionService: You must call setInstance(login: string, password: string) before getting the instance");return{user:t,device:r,payment:c}}}}},97321:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserDeviceService=void 0;const n=r(76089),o=r(28096),a=r(70252),i=r(90622);t.makeUserDeviceService=(e,t)=>({fetchDevicesList:()=>s(e,t),fetchTemporaryToken:()=>c(e,t),deactivateDevice:r=>u(e,t,r),changeDeviceName:(r,n)=>l(e,t,r,n)});const s=async(e,t)=>{const r=e.getAccountInfo().login,o=(0,i.ukiSelector)(e.getState()),a=(0,i.deviceKeysSelector)(e.getState()),s=(await t.devices.list({login:r,uki:o})).map((e=>({...e,isCurrentDevice:a&&e.deviceId===a.accessKey}))),c=s.find((e=>e.isCurrentDevice));return c&&e.getStore().dispatch((0,n.registerDeviceName)(c.deviceName)),s},c=(e,t)=>{const r=e.getAccountInfo().login,n=(0,i.ukiSelector)(e.getState());return t.authentication.getTemporaryToken({login:r,uki:n})},u=(e,t,r)=>{const n=e.getAccountInfo().login,c=(0,i.ukiSelector)(e.getState());return t.devices.deactivate({login:n,uki:c,deviceId:r}).then((n=>s(e,t).then((e=>{const t={devicesList:e,deviceId:r,success:"success"===n.status,reason:"success"!==n.status?`Deactivate Device Error - ${n.content}`:null};o.deactivateDeviceResult(t),t.success||(0,a.sendExceptionLog)({message:t.reason})}))))},l=(e,t,r,n)=>{const c=e.getAccountInfo().login,u=(0,i.ukiSelector)(e.getState());return t.devices.changeName({login:c,uki:u,deviceId:r,updatedDeviceName:n}).then((i=>s(e,t).then((e=>{const t={devicesList:e,deviceId:r,success:"success"===i.status,updatedName:n,reason:"success"!==i.status?`Change Device Name Error - ${i.content}`:null};o.changeDeviceNameResult(t),t.success||(0,a.sendExceptionLog)({message:t.reason})}))))}},34186:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserPaymentService=void 0;const n=r(90622),o=r(36273),a=r(46298);t.makeUserPaymentService=(e,t)=>({fetchInvoices:()=>i(e),updatePaymentCard:(r,n)=>s(e,t,r,n),cancelPremiumSubscription:()=>c(e,t)});const i=async e=>{const t=e.getAccountInfo().login,r=await(0,o.listInvoices)(e,t);return(0,a.isApiError)(r)?[]:r.invoices},s=(e,t,r,o)=>{const a=e.getAccountInfo().login,i=(0,n.ukiSelector)(e.getState());return t.premium.updateCardToken({login:a,uki:i,tokenId:r,stripeAccount:o}).then((e=>({success:e.success&&!e.error,reason:e.error?e.error.message:null})))},c=(e,t)=>{const r=e.getAccountInfo().login,o=(0,n.ukiSelector)(e.getState());return t.premium.setAutoRenewal({login:r,uki:o,enabled:!1}).then((()=>{}))}},95551:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateRsaKeys=t.treatKeysResult=t.isSyncInProgress=t.storeSync=t.hasTreatProblems=t.makeResumedUserSessionService=t.makeUserSessionService=t.ON_USER_SESSION_CLOSED=void 0;const n=r(10203),o=r(56668),a=r(28096),i=r(25576),s=r(48313),c=r(35924),u=r(95623),l=r(45291),d=r(27517),p=r(20317),f=r(34433),g=r(56269),m=r(37898),h=r(25963),y=r(82262),S=r(76089),v=r(78118),E=r(85784),A=r(36513),_=r(25576),b=r(70252),T=r(90503),I=r(16356),w=r(28445),C=r(1370),O=r(44197),D=r(33007),P=r(58217),N=r(59489),R=r(58582),U=r(41007),L=r(17936),M=r(60946),k=r(75226),B=r(56915),F=r(5689),x=r(6231),G=r(39408),j=r(43416),K=r(62627),$=r(16593),V=r(89438),H=r(16225),W=r(31177),z=r(34287),q=r(8481),Y=r(38474),Q=r(76901),Z=r(12362),X=r(86691),J=r(40051),ee=r(72881),te=r(95303),re=r(53582),ne=r(44999),oe=r(16661),ae=r(14651),ie=r(46298),se=r(61740),ce=r(10824),ue=r(35507),le=r(64910),de=r(38250),pe=r(16478),fe=r(71291),ge=r(6623),me=r(84827),he=r(98260),ye=r(57903),Se=r(92263);t.ON_USER_SESSION_CLOSED="OnUserSessionClosed";const ve=(e,t,r=!1)=>{e.localStorageService.setInstance(t),r&&e.storeService.dispatch((0,s.openSession)(t));const n=(0,le.getNoDerivationCryptoConfig)();e.teamDeviceEncryptedConfigEncryptorService.setInstance({raw:e.storeService.getUserSession().masterPassword},e.storeService.getUserSession().serverKey,n),(0,ge.setupEncryptorServices)(e),e.localStorageService.setInstance(t);const o=e.cryptoService||(0,A.makeCryptoService)(),a=new Q.LocalStorageEventStore(e.localStorageService);(0,Z.setInstance)(a),(0,X.setInstance)(a),(0,Y.setInstance)(e.localStorageService,e.storeService),(0,ne.setInstance)(e.storeService,e.localStorageService,e.wsService);let i=null;const c=()=>{clearInterval(i)};return(()=>{let t=e.storeService.getUserSession();e.storeService.getStore().subscribe((()=>{const r=e.storeService.getUserSession();r!==t&&(t.masterPassword===r.masterPassword&&t.serverKey===r.serverKey||""===r.masterPassword||(u.Debugger.log("Master Password || Server Key updated"),r.masterPassword||r.serverKey?e.masterPasswordEncryptorService.setInstance({raw:r.masterPassword},r.serverKey):e.masterPasswordEncryptorService.close(),t=r))}))})(),{loadSessionData:()=>Ne(e.localStorageService,e.storeService),loadNonResumableSessionData:()=>Re(e.localStorageService,e.storeService),accountExistsLocally:()=>async function(e){const t=await(0,k.getLocalAccounts)(e.storeService,e.storageService),r=e.storeService.getUserLogin(),n=e.localStorageService.getInstance(),o=t.some((({login:e})=>r===e));if(o){const e=await n.doesPersonalDataExist();return Boolean(r&&o&&e)}const a=await n.doesLocalDataExist();return Boolean(r&&a)}(e),refreshSessionData:()=>async function(e,t){const{localStorageService:r,storeService:n,wsService:o}=e,a=(0,ce.requestPairing)(n,t),i=Ke(r,n,o,t).then((()=>{e.storeService.getPersonalFeatures().features.ims_web_ph_mv3_dev||r.getInstance().getHealth().then((e=>{if(null!==e){const t=(0,V.healthStateUpdated)(e);n.dispatch(t)}})).catch(Pe("loadHealthDataPromise"))})),s=(0,q.refreshUserABTest)(n,r.getInstance(),t),c=(0,B.ukiSelector)(n.getState()),u=(0,ue.refreshPremiumStatus)(n,o,t,c);await Promise.all([u,a,i,s])}(e,t),getSyncArgs:()=>Oe(e.storeService,e.masterPasswordEncryptorService,e.wsService),sync:t=>Me(e,o,c,t),attemptSync:t=>be(e,o,c,t),requestNewSync:t=>Ce(e,o,c,t),startPeriodic2FAInfoRefresh:()=>(()=>{if(null!==i)return;const{storeService:t,wsService:r}=e;i=setInterval((()=>{(0,fe.refreshTwoFactorAuthenticationInfoService)(t,r)}),pe.ENFORCE_2FA_POLICY_REFRESH_TIMER_INTERVAL)})(),stopPeriodic2FAInfoRefresh:()=>c(),fetchContactInfo:()=>$e(e.storeService,e.wsService),fetchSubscriptionCode:()=>function(e,t){const r=e.getAccountInfo().login,n=(0,B.ukiSelector)(e.getState()),o=e.getSubscriptionCode();return o?Promise.resolve(o):t.premium.getSubscriptionCode({login:r,uki:n}).then((t=>{const r=t&&t.content&&t.content.subscriptionCode;return e.dispatch((0,N.saveSubscriptionCode)(r)),r}))}(e.storeService,e.wsService),persistLocalSettings:()=>Be(e.localStorageService,e.storeService),persistPersonalData:()=>Fe(e.localStorageService,e.storeService),persistPersonalSettings:()=>xe(e.localStorageService,e.storeService),persistAllData:()=>je(e.localStorageService,e.storeService),persistTeamAdminData:()=>Ge(e.localStorageService,e.storeService),persistLocalKey:t=>e.localStorageService.getInstance().storeLocalKey(t),closeSession:()=>Ae(e,c),lockSession:()=>_e(e),fetchAccountInfo:()=>function(e,t){const r=e.getUserSession(),n=r.analyticsIds,o=r.publicUserId;return n.userAnalyticsId&&n.deviceAnalyticsId&&o?Promise.resolve({userAnalyticsId:n.userAnalyticsId,deviceAnalyticsId:n.deviceAnalyticsId,publicUserId:o}):(0,ae.accountInfo)(e,t).then((t=>{if((0,ie.isApiError)(t)||"success"!==t.code)throw new Error("Unable to fetch updated account info");return e.dispatch((0,I.updateAnalyticsIds)(t.userAnalyticsId,t.deviceAnalyticsId)),e.dispatch((0,I.updatePublicUserId)(t.publicUserId)),{userAnalyticsId:t.userAnalyticsId,deviceAnalyticsId:t.deviceAnalyticsId,publicUserId:t.publicUserId}}))}(e.storeService,e.storeService.getUserLogin())}};t.makeUserSessionService=(e,t,r)=>{if(!t)throw new Error(i.AuthenticationCode[i.AuthenticationCode.EMPTY_LOGIN]);const n=t.toLowerCase();if(!(0,w.isValidLogin)(n))throw new Error(i.AuthenticationCode[i.AuthenticationCode.INVALID_LOGIN]);if(!r&&""===r)throw new Error(i.AuthenticationCode[i.AuthenticationCode.EMPTY_MASTER_PASSWORD]);return e.storeService.dispatch((0,I.updateMasterPassword)(r)),e.storeService.dispatch((0,I.updateServerKey)("")),ve(e,n,!0)},t.makeResumedUserSessionService=e=>{const t=((0,$.userLoginSelector)(e.storeService.getState())??"").toLowerCase();if(!(0,w.isValidLogin)(t))throw new Error(a.SessionResumingCode[a.SessionResumingCode.INVALID_LOGIN_IN_STORE]);return ve(e,t)};const Ee=async(e,t)=>{const{storageService:r,storeService:n,eventBusService:o}=e;n.isAuthenticated()&&(t&&await(0,se.cleanRememberMeStorageData)(n,r),o.sessionClosed({login:null})),(0,te.clearInstance)(),(0,X.clearInstance)(),(0,Z.clearInstance)(),(0,Y.clearInstance)(),(0,ne.clearInstance)();const{anonymousPartnerId:a,dashlaneServerDeltaTimestamp:i,appKeys:u,styxKeys:l}=n.getSdkAuthentication();n.dispatch((0,c.resetLoginStepInfo)()),n.dispatch((0,I.updateSessionDidOpen)(!1)),n.dispatch((0,s.closeSession)()),n.dispatch((0,D.loadSdkAuthentication)({anonymousPartnerId:a,dashlaneServerDeltaTimestamp:i,appKeys:u,styxKeys:l}))},Ae=async(e,t)=>{const{storeService:r}=e;r.isAuthenticated()&&(await(0,ye.waitUntilSyncComplete)(e.storeService),t()),await Ee(e,!0)},_e=async e=>{const{storeService:t}=e;if(!t.isAuthenticated()){const e=Se.CarbonError.fromAnyError(new Error("No user session to lock")).addContextInfo("LOCK USER SESSION","UserSessionService");throw(0,b.sendExceptionLog)({error:e}),e}await Ee(e,!1)},be=async(e,t,r,n)=>{try{return await Me(e,t,r,n)}catch(e){const t=new Error(`Sync failed: ${e}`);(0,b.sendExceptionLog)({error:t,code:T.ExceptionCriticality.WARNING})}};let Te=!1,Ie=()=>{},we=Promise.resolve();const Ce=async(e,t,r,n)=>{if(!Te)return Te=!0,await we,Te=!1,be(e,t,r,n)},Oe=(e,t,r,o,a)=>{const i=e.getLocalSettings(),s=e.getAccountInfo().login,c=a===n.Trigger.InitialLogin?0:i.lastSync,u=a===n.Trigger.InitialLogin?m.SyncType.FIRST_SYNC:m.SyncType.LIGHT_SYNC;return{dataEncryptorService:t,storeService:e,login:s,uki:(0,B.ukiSelector)(e.getState()),lastSyncTimestamp:c,syncType:u,personalData:e.getPersonalData(),needsKeys:!e.getUserSession().keyPair,ws:r,announce:o||(e=>{})}},De=(e,t,r)=>{const n=Oe(e,t,r);return Object.assign(n,{lastSyncTimestamp:h.MAX_SYNC_TIMESTAMP})},Pe=e=>t=>(0,b.sendExceptionLog)({message:`[Crypto] unable to ${e}. ErrorMessage: ${t}`}),Ne=async(e,t)=>{const r=e.getInstance().getPersonalData().then((e=>(u.Debugger.log("Personal data has been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>Pe("loadPersonalData")(e)}))),n=e.getInstance().getLocalSettings().then((e=>(u.Debugger.log("Local settings have been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>Pe("loadLocalSettings")(e)}))),o=e.getInstance().getPersonalSettings().then((e=>(u.Debugger.log("Personal settings have been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>Pe("loadPersonalSettings")(e)}))),c=e.getInstance().getPersonalFeatures().then((e=>(u.Debugger.log("Personal features have been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>Pe("loadPersonalFeatures")(e)}))),m=e.getInstance().doesNotificationStatusExist().then((r=>{r&&e.getInstance().getNotificationStatus().then((e=>(u.Debugger.log("Notifications status have been deciphered successfully"),t.dispatch((0,z.loadNotificationsStatus)(e)),e))).catch((e=>({error:!0,logError:()=>Pe("loadNotificationsStatus")(e)})))})),h=e.getInstance().getUserABTests().then((e=>(u.Debugger.log("User AB tests have been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>Pe("loadUserABTests")(e)}))),y=e.getInstance().doesDarkWebExist().then((async r=>{if(r){const{emails:r,onboardingState:n}=await e.getInstance().getDarkWeb();t.dispatch((0,W.dataLeaksEmailStatusListUpdated)(r)),t.dispatch((0,W.darkWebOnboardingStateUpdated)(n||re.DarkWebOnboardingState.NOT_SEEN))}})).catch(Pe("loadDarkWeb")),S=e.getInstance().getAnalyticsIds().then((e=>((0,u.logInfo)({message:"User Analytics IDs have been deciphered successfully"}),e))).catch((e=>({error:!0,logError:()=>Pe("loadAnalticsIds")(e)}))),v=(0,x.loadUserAuthenticationData)(e,t),E=[r,n,o,c];if(await e.getInstance().hasAuthenticationData()){const e=v.then((e=>(0,G.isLoadAuthenticationSuccess)(e)||e.message===G.FailedToRehydrateAuthenticationData?{error:!1}:{error:!0,logError:()=>Pe("loadAuthenticationData")(e.error)}));E.push(e)}const A=await Promise.all(E),_=A.every((e=>!!e&&e.error)),b=A.some((e=>!!e&&e.error));if(_)throw new Error(i.AuthenticationCode[i.AuthenticationCode.WRONG_PASSWORD]);if(b)throw A.forEach((e=>!!e&&e.logError instanceof Function&&e.logError())),new Error(i.AuthenticationCode[i.AuthenticationCode.DATA_TAMPERED_ERROR]);try{t.dispatch((0,l.loadStoredPersonalData)(await r));const e=await n;if(e){const r=(0,s.localSettingsUpdated)(e);t.dispatch(r),a.sendWebOnboardingModeUpdate(e.webOnboardingMode)}t.dispatch((0,d.loadStoredPersonalSettings)(await o)),t.dispatch((0,p.loadedStoredFeatures)(await c)),t.dispatch((0,j.loadedStoredUserABTests)(await h)),t.dispatch((0,I.loadAnalyticsIds)(await S)),await y,(0,g.sendFeaturesUpdateEvent)(t),await v.then((e=>{if(!(0,G.isLoadAuthenticationSuccess)(e))throw e.error}))}catch(e){const t=`An error occurred when trying to write personalData, localSettings, personalSettings or personalFeatures in Redux store ${e} `;throw u.Debugger.error(t),new Error(t)}const T=e.getInstance().getSharingData().then((e=>{u.Debugger.log(`sharingData loaded for ${t.getAccountInfo().login}`),t.dispatch((0,f.sharingDataUpdated)(e))})).catch(Pe("loadSharingDataPromise")),w=e.getInstance().getSharingSync().then((e=>{u.Debugger.log(`sharingSync loaded for ${t.getAccountInfo().login}`),t.dispatch((0,me.setAllPendingAction)(e.pendingItemGroups,e.pendingUserGroups))})).catch(Pe("loadSharingSyncPromise")),O=e.getInstance().getTeamAdminData().then((e=>{u.Debugger.log(`teamAdminData loaded for ${t.getAccountInfo().login}`),t.dispatch((0,C.teamAdminDataUpdated)(e))})).catch(Pe("loadTeamAdminDataPromise")),D=e.getInstance().getIcons().then((e=>{if(null!==e){const r=(0,oe.IconsCacheLoaded)(e);t.dispatch(r)}})).catch(Pe("loadIconsDataPromise")),P=e.getInstance().doesUserActivityExist().then((async r=>{if(r){const{lastSentAt:r}=await e.getInstance().getUserActivity();t.dispatch((0,J.userActivityLastSentAtUpdated)(r))}})).catch(Pe("loadUserActivity")),N=e.getInstance().doesVaultReportExist().then((async r=>{if(r){const{lastSentAt:r}=await e.getInstance().getVaultReport();t.dispatch((0,ee.vaultReportLastSentAtUpdated)(r))}})).catch(Pe("loadVaultReport"));return Promise.resolve().then((()=>{Promise.all([T,w,O,m,D,P,N])}))},Re=async(e,t)=>{const r=e=>t=>{const r=`[Session] unable to ${e}. ErrorMessage: ${t}`;return u.Debugger.error(r),(0,b.sendExceptionLog)({message:r})},n=async(e,r)=>{await r;const n=(0,$.userLoginSelector)(t.getState());u.Debugger.log(`${e} loaded for ${n}`)},o=e.getInstance().getPersonalData().then((e=>{t.dispatch((0,l.loadStoredPersonalData)(e))})).catch(r("loadPersonalData")),a=e.getInstance().getSharingData().then((e=>{t.dispatch((0,f.sharingDataUpdated)(e))})).catch(r("loadSharingDataPromise")),i=e.getInstance().getSharingSync().then((e=>{t.dispatch((0,me.setAllPendingAction)(e.pendingItemGroups,e.pendingUserGroups))})).catch(r("loadSharingSyncPromise")),s=e.getInstance().getTeamAdminData().then((e=>{t.dispatch((0,C.teamAdminDataUpdated)(e))})).catch(r("loadTeamAdminDataPromise")),c=t.getPersonalFeatures().features.ims_web_ph_mv3_dev?Promise.resolve():e.getInstance().getHealth().then((e=>{if(null!==e){const r=(0,V.healthStateUpdated)(e);t.dispatch(r)}})).catch(r("loadHealthDataPromise")),d=e.getInstance().getIcons().then((e=>{if(null!==e){const r=(0,oe.IconsCacheLoaded)(e);t.dispatch(r)}})).catch(r("loadIconsDataPromise"));try{await Promise.all([n("personalData",o),n("sharingData",a),n("sharingData",i),n("teamAdminData",s),n("healthData",c),n("iconsCacheData",d)])}catch(e){const t="Failed to load non resumable user session data",r=new Error(t);(0,u.logError)({message:t,tag:["resume"],details:{error:JSON.stringify(e)}}),(0,b.sendExceptionLog)({error:r})}};t.hasTreatProblems=(e,t,r)=>{if(!e.summary)return{transactionsToDownload:[],transactionsToUpload:[]};const n=t.getPersonalData(),{missingLocally:o,missingRemotely:a}=(0,P.getMissingIdentifiers)(r,n,e.summary);return{transactionsToUpload:[...a],transactionsToDownload:[...o]}};const Ue=async e=>{const t=(0,Z.getInstance)(),r=(0,X.getInstance)();let n=null,o=null;try{const{storeService:c,applicationModulesAccess:u}=e,d=await(0,h.sync)(e),p=d.clearTransactions||[];if(0!==p.length){n=r.lockTopic("healthUpdates"),o=r.lockTopic("iconsUpdates");const l=p.filter((e=>"AUTHENTIFIANT"===e.type)).map((e=>e.identifier)),d=(e=>e.filter((e=>"SECURITYBREACH"===e.type)).map((e=>e.identifier)))(p),f=0===(i=l).length?null:{type:"credentialUpdates",credentialIds:i};null!==f&&await t.add("healthUpdates",f);const g=0===d.length?null:{type:"breachUpdates"};null!==g&&await t.add("healthUpdates",g);const m=(e=>0===e.length?null:{type:"credentialUpdates",credentialIds:e})(l);null!==m&&await t.add("iconsUpdates",m);const h=(e=>0===e.length?null:{type:"breachUpdates",breachesIds:e})(d);null!==h&&await t.add("iconsUpdates",h),(await Promise.all(p.map(s.applyTransaction))).forEach((e=>{c.dispatch(e)})),a.reportDataUpdate(c);try{if(u&&(l.length>0||d.length>0)&&c.getPersonalFeatures().features.ims_web_ph_mv3_dev){const{commands:e}=u.createClients().passwordHealth;e.recalculatePasswordHealth()}}catch(e){const t=`Password Health update - sync: ${e}`,r=new Error(t);(0,b.sendExceptionLog)({error:r,code:T.ExceptionCriticality.WARNING})}}return d.uploadedTransactions.length>0&&c.dispatch((0,l.updateLastBackupTime)(d.uploadedTransactions,Math.floor(d.lastSyncTimestamp/1e3))),e.lastSyncTimestamp<h.MAX_SYNC_TIMESTAMP&&c.dispatch((0,S.registerLastSync)(d.lastSyncTimestamp)),d}catch(e){throw e}finally{n&&r.releaseTopic("healthUpdates",n),o&&r.releaseTopic("iconsUpdates",o)}var i};t.storeSync=async(e,r)=>{const n=await(async e=>{const{announce:t,personalData:r}=e;try{t(R.announcements.chronologicalSyncStarted(r));const n=await Ue(e);return t(R.announcements.chronologicalSyncFinished(n.summary,n.fullBackupFileSize)),n}catch(e){throw t(R.announcements.chronologicalSyncFailed(e)),e}})(r);return(async(e,r,n)=>{const{announce:o}=r;o(R.announcements.treatProblemStarted());const{transactionsToDownload:a,transactionsToUpload:i}=(0,t.hasTreatProblems)(n,e,o),s=a.length,c=i.length;if(o(R.announcements.treatProblemDiffComputed(s,c)),s<=0&&c<=0)return o(R.announcements.treatProblemFinished()),n;try{c>0&&e.dispatch((0,l.storeChangesToUpload)(i));const t=await Ue({...Oe(e,r.dataEncryptorService,r.ws,o),transactionIds:a}),s={...t,clearTransactions:[...t.clearTransactions,...n.clearTransactions]};return o(R.announcements.treatProblemFinished()),s}catch(e){throw o(R.announcements.treatProblemFailed(e)),e}})(e,r,n)};const Le=async({storeService:e,dataEncryptorService:r,localStorageService:n,wsService:o,eventLoggerService:a,applicationModulesAccess:i},s,c,u)=>{if(!c.sharing2||!(0,B.ukiSelector)(e.getState()))return c;const l=async t=>{const r=await(async({storeService:e,wsService:t,localStorageService:r,eventLoggerService:n,applicationModulesAccess:o},a,i,s)=>{try{a(R.announcements.sharingSyncStarted());const c=(e,t)=>a(R.announcements.sharingSyncInvalidSyncData(e,t)),u=await(0,v.syncSharing)({storeService:e,wsService:t,localStorageService:r,eventLoggerService:n,applicationModulesAccess:o},i,c,s);return a(R.announcements.sharingSyncFinished()),u}catch(e){throw a(R.announcements.sharingSyncFailed(e)),e}})({storeService:e,wsService:o,localStorageService:n,eventLoggerService:a,applicationModulesAccess:i},s,t,u),c=await(async(e,t,r,n)=>{try{r(R.announcements.teamAdminDataSyncStarted());const o=await(0,O.syncUserGroupManagement)(e,t,n);return r(R.announcements.teamAdminDataSyncFinished()),o}catch(e){throw r(R.announcements.teamAdminDataSyncFailed(e)),e}})(e,o,s,r);return c};if(await l(c.sharing2)===E.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA){const n=De(e,r,o),{sharing2:a}=await(0,t.storeSync)(e,{...n,applicationModulesAccess:i,announce:s});await l(a)}return c};t.isSyncInProgress=e=>{const t=e.getState(),r=(0,$.syncIsInProgressSelector)(t),{startTime:n}=(0,$.syncSelector)(t);return!!r&&(Date.now()-(n||0)<6e5?(u.Debugger.log("[Sync] Already in progress, skipping trigger…"),!0):(e.dispatch((0,y.syncFailure)()),(0,b.sendExceptionLog)({message:'[Sync] "inProgress" for more than 10 minutes'}),!1))};const Me=async(e,r,n,o)=>{const{applicationModulesAccess:s,eventBusService:c,localStorageService:l,masterPasswordEncryptorService:d,remoteDataEncryptorService:p,storeService:f,wsService:g,eventLoggerService:m}=e,h=f.getState();if(!f.isAuthenticated())throw new Error("Impossible to Sync - user not authenticated");if((0,t.isSyncInProgress)(f))return;we=new Promise((e=>Ie=e));const S=(0,F.twoFactorAuthenticationInfoSelector)(h);if(S.status===de.TwoFactorAuthenticationInfoRequestStatus.READY){const{shouldEnforceTwoFactorAuthentication:e}=S;if(e)return}const v=new he.SyncTaskTracker(s);await v.startTracking();const E=(0,$.isRemoteKeyActivatedSelector)(h)?p:d,A=(0,M.setupProbe)((0,U.makeEventLoggerSyncMonitor)(m).monitor,(0,L.makeDiagnosticReportMonitor)()),_={...Oe(f,E,g,A,o),applicationModulesAccess:s},{syncType:T}=_,I=(0,X.getInstance)(),w=I.lockTopic("healthUpdates");try{A(R.announcements.syncStarted(o,T)),a.triggerSessionSyncStatus({status:"syncing"}),f.dispatch((0,y.syncStarted)());const e=await(0,t.storeSync)(f,_);return await(0,t.treatKeysResult)(E,f,r,g,A,e),await Le({storeService:f,dataEncryptorService:E,localStorageService:l,wsService:g,eventLoggerService:m,applicationModulesAccess:s},A,e,o),await E.getInstance().prepareCrypto(),A(R.announcements.saveStarted()),await je(l,f),A(R.announcements.saveFinished()),c.syncSuccess({}),f.dispatch((0,y.syncSuccess)(e.isUploadEnabled)),a.triggerSessionSyncStatus({status:"success"}),A(R.announcements.syncFinished()),Ie(),I.releaseTopic("healthUpdates",w),e.clearTransactions}catch(t){if(f.dispatch((0,y.syncFailure)()),a.triggerSessionSyncStatus({status:"error"}),A(R.announcements.syncFailed(t)),c.syncFailure({}),w&&I.releaseTopic("healthUpdates",w),Ie(),t.message===i.AuthenticationCode[i.AuthenticationCode.INVALID_UKI]){const t="[Sync] Device UKI is invalid, closing the session",r=new Error(t);return(0,u.logError)({message:t,details:{error:r}}),(0,b.sendExceptionLog)({error:r}),void Ae(e,n)}throw t}finally{v.terminateTracking()}};t.treatKeysResult=async(e,r,n,a,i,s)=>{try{const i=async t=>{if(u.Debugger.log("[Sync] Extract Keys from Sync…"),!t)return null;u.Debugger.log("[Sync] Decipher  private key BEGIN");const r=await e.getInstance().decrypt(t),n=(0,o.deflatedUtf8ToUtf16)(r,{skipInflate:!0});return u.Debugger.log("[Sync] Decipher  private key SUCCESS"),n};if(s.keys&&s.keys.privateKey)try{const e=await i(s.keys.privateKey);r.dispatch((0,I.updateKeyPair)({privateKey:e,publicKey:s.keys.publicKey}))}catch(e){}if(!r.getUserSession().keyPair){const o=await(0,t.generateRsaKeys)(e,n),i=De(r,e,a);i.needsKeys=!0,i.syncType=m.SyncType.FULL_SYNC,i.pushKeysToServer={private:o.encryptedPrivateKey,public:o.keys.publicKey},u.Debugger.log("SYNC RSA Keys - BEGIN"),await Ue(i),u.Debugger.log("SYNC RSA Keys - END"),r.dispatch((0,I.updateKeyPair)({privateKey:o.keys.privateKey,publicKey:o.keys.publicKey}))}}catch(e){throw i(R.announcements.treatSharingKeysFailed(e)),e}},t.generateRsaKeys=async(e,t,r={})=>{try{const n=await t.asymmetricEncryption.generateRsaKeyPair();u.Debugger.log("Generating RSA Keys");const a=(0,o.utf16ToDeflatedUtf8)(n.privateKey,{skipDeflate:!0}),i=await e.getInstance().encrypt(a,r);return u.Debugger.log("Encrypt RSA Keys"),{keys:{publicKey:n.publicKey,privateKey:n.privateKey},encryptedPrivateKey:i}}catch(e){throw u.Debugger.log("Error while Generating RSA KEY: "+e),e}};const ke=e=>e.persistData===_.PersistData.PERSIST_DATA_NO,Be=(e,t)=>{const r=t.getLocalSettings(),n=t.getAccountInfo();return ke(n)||!n.isAuthenticated?Promise.resolve():e.getInstance().storeLocalSettings(r)},Fe=async(e,t)=>{const r=t.getPersonalData(),n=t.getAccountInfo();return ke(n)||!n.isAuthenticated?Promise.resolve():e.getInstance().storePersonalData(r)},xe=async(e,t)=>{const r=t.getPersonalSettings(),n=t.getAccountInfo();return ke(n)||!n.isAuthenticated?Promise.resolve():e.getInstance().storePersonalSettings(r)},Ge=(e,t)=>{const r=t.getTeamAdminData(),n=t.getAccountInfo();return ke(n)||!n.isAuthenticated?Promise.resolve():e.getInstance().storeTeamAdminData(r).then((()=>{}))},je=async(e,t)=>{const r=(0,K.userABTestsSelector)(t.getState()),n=t.getLocalSettings(),o=t.getPersonalSettings(),a=t.getSharingData(),i=(0,$.sharingSyncSelector)(t.getState()),s=t.getAccountInfo(),c=t.getPersonalFeatures(),u=t.getNotificationStatus(),l=t.getTeamAdminData(),d=t.getState(),p=(0,B.sessionKeysSelector)(d),f=(0,H.darkWebSelector)(d),g=(0,$.analyticsIdsSelector)(d);if(ke(s)||!s.isAuthenticated)return Promise.resolve();isNaN(n.lastSync)&&(0,b.sendExceptionLog)({message:"Persisting localSettings with a NaN lastSyncTimestamp",code:T.ExceptionCriticality.WARNING});const m=l?.teams??{},h=Object.keys(m).reduce(((e,t)=>{const r=l.teams[t],n=r.specialItemGroup?(r.specialItemGroup.items||[]).map((e=>e.itemId)):[];return e.concat(n)}),[]),y={...a,items:a.items.map((e=>!e.content||h.includes(e.itemId)?e:{...e,content:""}))};await Promise.all([Fe(e,t),Be(e,t),e.getInstance().storePersonalSettings(o),e.getInstance().storeSharingData(y),e.getInstance().storeSharingSync(i),e.getInstance().storePersonalFeatures(c),e.getInstance().storeNotificationsStatus(u),p?e.getInstance().storeAuthenticationKeys(p):Promise.resolve(),e.getInstance().storeTeamAdminData(l),(0,x.persistUserAuthenticationData)(e,t),e.getInstance().storeDarkWeb(f),e.getInstance().storeUserABTests(r),e.getInstance().storeDarkWeb(f),e.getInstance().storeAnalyticsIds(g)])},Ke=async(e,t,r,n)=>{try{const o=t.getState(),a=(0,B.ukiSelector)(o);await(0,g.getFeatures)(t,r,n,a),(0,g.persistFeatures)(e.getInstance(),t.getAccountInfo(),t.getPersonalFeatures()),(0,g.sendFeaturesUpdateEvent)(t)}catch(e){const t=new Error(`[UserSessionService] - refreshFeatures: ${e}`);(0,b.sendExceptionLog)({error:t,code:T.ExceptionCriticality.WARNING})}},$e=(e,t)=>{const r=e.getAccountInfo().login,n=(0,B.ukiSelector)(e.getState());return t.contactInfo.getContactInfo({login:r,uki:n}).then((e=>{const{result:t,...r}=e;return r}))}},6623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupEncryptorServices=void 0;const n=r(16593),o=r(38981),a=(0,r(64910).getNoDerivationCryptoConfig)();t.setupEncryptorServices=function(e){const{storeService:t}=e,r=t.getState(),i=(0,n.sessionEncryptorKeysSelector)(r);!function(e,t,r){const{masterPassword:n,serverKey:o}=t;if(!n)return;const[i,s,c]=r?[n,"",a]:[n,o,void 0];e.masterPasswordEncryptorService.setInstance({raw:i},s,c)}(e,i,(0,o.isSSOUserSelector)(r)),function(e,t){const{masterPassword:r,remoteKey:n,serverKey:o}=t;if(!n&&!r)return;const[i,s,c]=n?[n,"",a]:[r,o,void 0];e.remoteDataEncryptorService.setInstance({raw:i},s,c)}(e,i),function(e,t){const{localKey:r,masterPassword:n,serverKey:o}=t;if(!r&&!n)return;const[i,s,c]=r?[r,"",a]:[n,o,void 0];e.localDataEncryptorService.setInstance({raw:i},s,c)}(e,i)}},83060:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(10203),o=r(18216),a=r(82262),i=r(95551);t.setupSubscriptions=function(e,t){e.appInitialized.on((async e=>{const{sessionService:r,storeService:s}=t;(0,i.isSyncInProgress)(s)&&(s.dispatch((0,a.syncFailure)()),e.initMode===o.InitMode.Resume&&await r.getInstance().user.attemptSync(n.Trigger.Wake))}))}},98260:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncTaskTracker=void 0;const n=r(60017),o=r(58807),a=r(10203);t.SyncTaskTracker=class{constructor(e){this.taskTrackingId=null,this.taskTrackingClient=null,this.applicationModulesAccess=e}async startTracking(){if((0,n.isMv3Environment)()){this.taskTrackingClient=this.applicationModulesAccess.createClients().taskTracking;const e=await this.taskTrackingClient.commands.startTaskTracking({businessDomain:a.BusinessDomain.Sync,feature:"sync",taskName:"sync"});(0,o.isSuccess)(e)&&(this.taskTrackingId=(0,o.getSuccess)(e).id)}}terminateTracking(){const{taskTrackingId:e}=this;(0,n.isMv3Environment)()&&e&&this.taskTrackingClient.commands.terminateTaskTracking({taskTrackingId:e})}}},57903:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.waitUntilSyncComplete=void 0;const n=r(95551);t.waitUntilSyncComplete=async e=>!1===(0,n.isSyncInProgress)(e)||new Promise((t=>{const r=Date.now(),o=setInterval((()=>!1===(0,n.isSyncInProgress)(e)?(clearInterval(o),t(!0)):Date.now()-r>6e4?t(!1):void 0),1e3)}))},1965:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipeOutLocalAccounts=t.deviceRemoteDeletion=void 0;const n=r(2246),o=r(63739),a=r(56915),i=r(90622),s=r(46298),c=r(70252);async function u(e,t,r){const a=r.map((r=>(0,o.deleteAllLocalUserData)(e,t,r))).concat((0,n.deleteUsersPublicSettings)(r));await Promise.all(a)}t.deviceRemoteDeletion=async function(e,t,r){let n=[];try{const o=await(0,i.getLocalAccounts)(e,t);if(0===o.length)return;const c=o.map((({login:e})=>e));n=await async function(e,t){const r=t.map((t=>({deviceAccessKey:(0,a.getDeviceAccessKeySelector)(e.getState(),t),login:t}))),n=await(0,s.getUnauthorizedProfiles)(e,{profiles:r});return(0,s.isApiError)(n)?[]:n.unauthorizedProfiles.map((e=>e.login))}(e,c),await u(t,r,n)}catch(e){const t=new Error(`[UserManagement]: deviceRemoteDeletion - ${e}`);(0,c.sendExceptionLog)({error:t})}},t.wipeOutLocalAccounts=u},41265:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInternalTestUser=void 0,t.isInternalTestUser=function(e){const t=e.trim();return t.startsWith("{9a9b9c9d-")||t.startsWith("kw_test_")&&(t.endsWith("@mailinator.com")||t.endsWith("@yopmail.com")||t.endsWith(".kwtest.io"))}},72807:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(54642),o=r(6637),a=r(82258),i=r(12121);t.config={commands:{dismissUserMessages:{handler:a.dismissUserMessagesHandler},addUserMessage:{handler:i.addUserMessageHandler}},queries:{getVisibleUserMessages:{selector:n.getVisibleUserMessagesSelector},getUserMessages:{selector:n.getUserMessagesSelector}},liveQueries:{liveVisibleUserMessages:{operator:o.liveVisibleUserMessages$},liveUserMessages:{operator:o.liveUserMessages$}}}},42331:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserMessageTypes=void 0;var n=r(59213);Object.defineProperty(t,"UserMessageTypes",{enumerable:!0,get:function(){return n.UserMessageTypes}})},50571:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userMessagesDismissed=t.userMessageAdded=t.USER_MESSAGES_DISMISSED=t.USER_MESSAGE_ADDED=void 0,t.USER_MESSAGE_ADDED="USER_MESSAGE_ADDED",t.USER_MESSAGES_DISMISSED="USER_MESSAGES_DISMISSED",t.userMessageAdded=e=>({type:t.USER_MESSAGE_ADDED,userMessage:e}),t.userMessagesDismissed=e=>({type:t.USER_MESSAGES_DISMISSED,predicate:e})},54642:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVisibleUserMessagesSelector=t.getUserMessagesByTypeSelector=t.getUserMessagesSelector=void 0;const n=r(32034);t.getUserMessagesSelector=e=>e.userSession.localSettings.userMessages,t.getUserMessagesByTypeSelector=(e,t)=>e.userSession.localSettings.userMessages.filter((e=>e.type===t)),t.getVisibleUserMessagesSelector=(0,n.createSelector)(t.getUserMessagesSelector,(e=>e.filter((({dismissedAt:e})=>!e))))},86649:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(72807);t.bootstrap=e=>{e.register(n.config)}},12121:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addUserMessageHandler=void 0;const n=r(50571);t.addUserMessageHandler=(e,t)=>(e.storeService.dispatch((0,n.userMessageAdded)({type:t.type})),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},82258:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dismissUserMessagesHandler=void 0;const n=r(50571);t.dismissUserMessagesHandler=(e,t)=>(e.storeService.dispatch((0,n.userMessagesDismissed)(t)),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},75004:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTrialExpiredUserMessage=t.isTrialExpired=void 0;const n=r(53576),o=r(59213);t.isTrialExpired=function({premiumStatus:e,currentDate:t=Date.now()}){switch(e?.statusCode){case n.PremiumStatusCode.PREMIUM:case n.PremiumStatusCode.OLD_ACCOUNT:case n.PremiumStatusCode.NEW_USER:case n.PremiumStatusCode.GRACE_PERIOD:return!1;case n.PremiumStatusCode.PREMIUM_CANCELLED:{const r=1e3*(e.endDate??0);return!!r&&r-t<0}case n.PremiumStatusCode.NO_PREMIUM:default:return!0}},t.createTrialExpiredUserMessage=function(){return{type:o.UserMessageTypes.TRIAL_EXPIRED}}},53156:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(86649);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},6637:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.liveUserMessages$=t.liveVisibleUserMessages$=void 0;const n=r(18948),o=r(3343),a=r(54642);t.liveVisibleUserMessages$=()=>(0,n.pipe)((0,o.map)(a.getVisibleUserMessagesSelector),(0,o.distinctUntilChanged)()),t.liveUserMessages$=()=>(0,n.pipe)((0,o.map)(a.getUserMessagesSelector),(0,o.distinctUntilChanged)())},59213:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserMessageTypes=void 0,function(e){e.DEFAULT="default",e.TRIAL_EXPIRED="trial_expired",e.WEB_STORE="web_store",e.DASHBOARD_UPRADE="dashboard_upgrade"}(t.UserMessageTypes||(t.UserMessageTypes={}))},35201:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserActivityCreateParams=void 0;const n=r(11662),o=e=>Math.floor(e/1e3);t.getUserActivityCreateParams=({credentials:e,credentialsHealth:t,lastSentAt:r,triggerTime:a,login:i,similarPasswords:s,spaces:c,uki:u})=>{const l=(0,n.getTeamsContent)(c,e,t,s);return{content:"",login:i,relativeEnd:o(a),relativeStart:o(r||a),teamsContent:JSON.stringify(l),uki:u}}},36274:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userActivityLastSentAtSelector=t.userActivitySelector=void 0,t.userActivitySelector=e=>e.userSession.userActivity,t.userActivityLastSentAtSelector=e=>(0,t.userActivitySelector)(e).lastSentAt},65996:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendUserActivityLog=void 0;const n=r(40051),o=r(36274),a=r(85870),i=r(35201),s=r(7944),c=r(51319),u=r(16593),l=r(56915),d=r(70252),p=r(95623),f=r(26766),g=async(e,t,r)=>{const a=(0,n.userActivityLastSentAtUpdated)(r);e.dispatch(a),await(async(e,t)=>{const r=(0,o.userActivitySelector)(e.getState());await t.getInstance().storeUserActivity(r)})(e,t)};t.sendUserActivityLog=async(e,t)=>{const{localStorageService:r,storeService:n}=e,m=n.getState();await g(n,r,t);try{const e=(0,l.ukiSelector)(m);if(!e)throw new Error("[UserActivity] - trigger: uki is empty, cant send log.");const r=(0,s.activeSpacesSelector)(m);if(0===r.length)return;const n=(0,c.credentialsSelector)(m),d=(0,o.userActivityLastSentAtSelector)(m),p=(0,u.userIdSelector)(m),g=(0,f.credentialsHealthSelector)(m),h=(0,f.similarPasswordsSelector)(m),y=(0,i.getUserActivityCreateParams)({credentials:n,credentialsHealth:g,lastSentAt:d,login:p,similarPasswords:h,spaces:r,triggerTime:t,uki:e});(0,a.create)(y)}catch(e){const t=(0,o.userActivityLastSentAtSelector)(m);g(n,r,t);const a=`[UserActivity] - trigger: ${e}`;p.Debugger.error(a);const i=new Error(a);(0,d.sendExceptionLog)({error:i})}}},92184:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(65996),o=r(36274),a=r(98871);t.setupSubscriptions=async function(e,t){e.syncSuccess.on((()=>(0,a.triggerLog)("UserActivity",n.sendUserActivityLog,o.userActivityLastSentAtSelector,t))),e.syncFailure.on((()=>(0,a.triggerLog)("UserActivity",n.sendUserActivityLog,o.userActivityLastSentAtSelector,t)))}},11662:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamsContent=t.getTeamContent=void 0;const n=r(375);t.getTeamContent=(e,t,r,o)=>(0,n.createUserReportContent)(e,t,r,o),t.getTeamsContent=(e,r,n,o)=>e.reduce(((a,i)=>{const{teamId:s}=i,c=r.filter((e=>e.SpaceId===s));return{...a,[s]:(0,t.getTeamContent)(c,n,o,e)}}),{})},55285:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionsReportGenerator=void 0;const n=r(10770),o={collections_count:-1,collections_shared_count:-1,multiple_collections_count:-1,multiple_collections_shared_count:-1,single_collection_count:-1,single_collection_shared_count:-1,shared_count:-1,total_count:-1},a={collections_count:-1,collections_shared_count:-1,multiple_collections_count:-1,multiple_collections_shared_count:-1,single_collection_count:-1,single_collection_shared_count:-1,shared_count:-1,total_count:-1},i={collections_count:-1,collections_shared_count:-1,multiple_collections_count:-1,multiple_collections_shared_count:-1,single_collection_count:-1,single_collection_shared_count:-1,shared_count:-1,total_count:-1},s={collections_count:-1,collections_shared_count:-1,multiple_collections_count:-1,multiple_collections_shared_count:-1,single_collection_count:-1,single_collection_shared_count:-1,shared_count:-1,total_count:-1};t.CollectionsReportGenerator=class{constructor(e){this.getCollectionsPerItemAvg=()=>{if(0===this.collections.length)return 0;const e=this.collections.flatMap((e=>e.VaultItems)),t=new Set(e.map((e=>e.Id))).size;return Math.round(e.length/t)},this.getItemsPerCollectionAvg=()=>{if(0===this.collections.length)return 0;let e=0,t=0;for(const r of this.collections)r.VaultItems.length>0&&(t+=r.VaultItems.length,e++);return Math.round(t/e)},this.countedVaultItemsOccurences=()=>this.collections.map((e=>e.VaultItems)).reduce(((e,t)=>(t.forEach((t=>{const r=t.Id;e[r]?e[r]+=1:e[r]=1})),e)),{}),this.getNumberOfVaultItemWithSingleCollectionAssociated=()=>0===this.collections.length?0:Object.values(this.countedVaultItemsOccurences()).filter((e=>1===e)).length,this.getNumberOfVaultItemWithMultipleCollectionAssociated=()=>0===this.collections.length?0:Object.values(this.countedVaultItemsOccurences()).filter((e=>e>=2)).length,this.passwordsCollectionsReportGenerator=e=>({collections_count:this.collections.length,collections_shared_count:-1,multiple_collections_count:this.getNumberOfVaultItemWithMultipleCollectionAssociated(),multiple_collections_shared_count:-1,single_collection_count:this.getNumberOfVaultItemWithSingleCollectionAssociated(),single_collection_shared_count:-1,shared_count:-1,total_count:e}),this.generateCollectionsReport=e=>({itemsTotalCount:-1,itemsSharedCount:-1,collectionsTotalCount:this.collections.length,collectionsSharedCount:-1,itemsPerCollectionAverageCount:this.getItemsPerCollectionAvg(),collectionsPerItemAverageCount:this.getCollectionsPerItemAvg(),passwords:this.passwordsCollectionsReportGenerator(e),payments:o,secureNotes:a,personalInfo:i,ids:s}),this.coreService=e,this.state=e.storeService.getState(),this.collections=(0,n.collectionsSelector)(this.state)}}},61785:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createVaultReportContent=void 0;const n=r(12641),o=r(375);t.createVaultReportContent=e=>{const{credentials:t,publicBreaches:r,privateBreaches:a,credentialsHealth:i,similarPasswords:s,breachedPasswords:c,requireMasterPassword:u,scope:l}=e,d=(0,o.createUserReportContent)(t,i,s,[]),p=(0,n.getCountOfCredentialsCompromisedByBreaches)(a,c),f=(0,n.getActiveBreachesCount)(a,c),g=(0,n.getActiveBreachesCount)(r,c),m=t.filter((e=>e.OtpSecret||e.OtpUrl)).length,h=u?d.nbrPasswords:t.filter((e=>e.AutoProtected)).length,y=t.filter((e=>!e.AutoLogin)).length;return{...d,activePrivateBreachAlerts:f,privateBreachAlerts:a.length,publicBreachAlerts:r.length,activePublicBreachAlerts:g,passwordsCompromisedThroughPrivateBreaches:p,passwordsWithOtp:m,protectedPasswords:h,domainsWithoutAutofill:y,scope:l}}},77211:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createVaultReport=void 0;const n=r(26766),o=r(51319),a=r(21342),i=r(61785),s=r(7944),c=r(16593),u=r(10203),l=r(10975);t.createVaultReport=async e=>{const t=(0,o.credentialsSelector)(e),r=(0,l.filterCredentialsForScope)(t,u.Scope.Personal),d=(0,l.filterCredentialsForScope)(t,u.Scope.Team),p=(0,n.credentialsHealthSelector)(e),f=(0,n.similarPasswordsSelector)(e),g=(0,n.breachedPasswordsSelector)(e),m=(0,a.publicBreachesSelector)(e),h=(0,a.privateBreachesSelector)(e),y=(0,c.protectPasswordsSettingSelector)(e),S=(0,s.activeSpacesSelector)(e).length>0,v=(0,i.createVaultReportContent)({credentials:t,credentialsHealth:p,similarPasswords:f,breachedPasswords:g,publicBreaches:m,privateBreaches:h,requireMasterPassword:y,scope:u.Scope.Global}),E=(0,i.createVaultReportContent)({credentials:r,credentialsHealth:(0,l.filterRecordsForScope)(r,p,u.Scope.Personal),similarPasswords:(0,l.filterRecordsForScope)(r,f,u.Scope.Personal),breachedPasswords:(0,l.filterRecordsForScope)(r,g,u.Scope.Personal),publicBreaches:m,privateBreaches:h,requireMasterPassword:y,scope:u.Scope.Personal}),A=(0,i.createVaultReportContent)({credentials:d,credentialsHealth:(0,l.filterRecordsForScope)(d,p,u.Scope.Team),similarPasswords:(0,l.filterRecordsForScope)(d,f,u.Scope.Team),breachedPasswords:(0,l.filterRecordsForScope)(d,g,u.Scope.Team),publicBreaches:m,privateBreaches:h,requireMasterPassword:y,scope:u.Scope.Team});return{[u.Scope.Global]:v,[u.Scope.Personal]:E,[u.Scope.Team]:S?A:null}}},10975:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterRecordsForScope=t.filterCredentialsForScope=t.includesCredential=void 0;const n=r(10203),o=e=>!!e.SpaceId&&""!==e.SpaceId,a=e=>!e.SpaceId||""===e.SpaceId;t.includesCredential=e=>t=>1===e.filter((e=>t===e.Id)).length,t.filterCredentialsForScope=(e,t)=>t===n.Scope.Global?e:t===n.Scope.Personal?e.filter(a):e.filter(o),t.filterRecordsForScope=(e,t,r)=>r===n.Scope.Global?t:((e,t,r)=>{const n={};return Object.keys(t).filter((o=>{const a=e.filter((e=>e.Id===o));1===a.length&&r(a[0])&&(n[o]=t[o])})),n})(e,t,r===n.Scope.Personal?a:o)},34956:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vaultReportLastSentAtSelector=t.vaultReportSelector=void 0,t.vaultReportSelector=e=>e.userSession.vaultReport,t.vaultReportLastSentAtSelector=e=>(0,t.vaultReportSelector)(e).lastSentAt},96067:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendVaultReportLog=void 0;const n=r(10203),o=r(66102),a=r(55285);t.sendVaultReportLog=async(e,t)=>{const r={...new a.CollectionsReportGenerator(e).generateCollectionsReport(t.nbrPasswords),darkWebAlertsActiveCount:t.activePrivateBreachAlerts,darkWebAlertsCount:t.privateBreachAlerts,domainsWithoutAutofillCount:t.domainsWithoutAutofill,passwordsCompromisedCount:t.compromisedPasswords,passwordsCompromisedThroughDarkWebCount:t.passwordsCompromisedThroughPrivateBreaches,passwordsExcludedCount:t.checkedPasswords,passwordsProtectedWithMasterPasswordCount:t.protectedPasswords,passwordsReusedCount:t.reused,passwordsSafeCount:t.safePasswords,passwordsTotalCount:t.nbrPasswords,passwordsWeakCount:t.weakPasswords,passwordsWithOtpCount:t.passwordsWithOtp,scope:t.scope,securityAlertsActiveCount:t.activePublicBreachAlerts+t.activePrivateBreachAlerts,securityAlertsCount:t.publicBreachAlerts+t.privateBreachAlerts,...null!==t.securityIndex?{securityScore:t.securityIndex}:{}};await(0,o.logEvent)(e,{event:new n.UserVaultReportEvent(r)})}},7500:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendVaultReport=void 0;const n=r(72881),o=r(34956),a=r(70252),i=r(95623),s=r(10203),c=r(77211),u=r(96067),l=async(e,t,r)=>{const a=(0,n.vaultReportLastSentAtUpdated)(r);e.dispatch(a),await(async(e,t)=>{const r=(0,o.vaultReportSelector)(e.getState());await t.getInstance().storeVaultReport(r)})(e,t)};t.sendVaultReport=async(e,t)=>{const{localStorageService:r,storeService:n}=e,d=n.getState(),p=(0,o.vaultReportLastSentAtSelector)(d);try{await l(n,r,t);const o=await(0,c.createVaultReport)(d);(0,u.sendVaultReportLog)(e,o[s.Scope.Global]),(0,u.sendVaultReportLog)(e,o[s.Scope.Personal]),null!==o[s.Scope.Team]&&(0,u.sendVaultReportLog)(e,o[s.Scope.Team])}catch(e){l(n,r,p);const t=`[VaultReport] - trigger: ${e}`;i.Debugger.error(t);const o=new Error(t);(0,a.sendExceptionLog)({error:o})}}},49821:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(98871),o=r(7500),a=r(34956);t.setupSubscriptions=async function(e,t){e.syncSuccess.on((()=>(0,n.triggerLog)("VaultReport",o.sendVaultReport,a.vaultReportLastSentAtSelector,t))),e.syncFailure.on((()=>(0,n.triggerLog)("VaultReport",o.sendVaultReport,a.vaultReportLastSentAtSelector,t)))}},375:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUserReportContent=void 0;const n=r(54125),o=r(12641),a=r(41494),i=r(56591),s=r(65587),c=r(77201);t.createUserReportContent=(e,t,r,u)=>{const l=e.length,d=(0,n.getCheckedCredentials)(e).length,p=(0,o.getCompromisedCredentials)(e,t,u).length,f=(0,a.getReusedCredentials)(e,r,u).length,g=(0,i.getSafeCredentials)(e,t,r,u).length,m=(0,c.getWeakCredentials)(e,t,u).length;return{checkedPasswords:d,compromisedPasswords:p,nbrPasswords:l,reused:f,safePasswords:g,securityIndex:(0,s.getSecurityScore)(e,t,r,u),weakPasswords:m}}},98871:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerLog=t.shouldTriggerLog=void 0;const n=r(70252),o=r(89438),a=r(12362),i=r(86691),s=r(95623),c=r(57289);t.shouldTriggerLog=(e,t,r)=>{const n=r(t);return!n||e-n>=864e5},t.triggerLog=async(e,r,u,l)=>{const{localStorageService:d,storeService:p}=l,f=Date.now(),g=p.getState();!p.getPersonalFeatures().features.ims_web_ph_mv3_dev&&(0,t.shouldTriggerLog)(f,g,u)&&(await(async(e,t,r)=>{const u=(0,i.getInstance)(),l=r.getInstance();let d=null;try{if(d=u.lockTopic("healthUpdates"),!await l.getHealthWasComputed()){const e=(0,a.getInstance)();await e.removeAll("healthUpdates");const r=t.getState(),n=await(0,c.computeAllHealthState)(r),i=(0,o.healthStateUpdated)(n);t.dispatch(i),await l.storeHealth(n),await l.storeHealthWasComputed(!0)}}catch(t){const r=`[${e}] - trigger: recompute health failed with ${t}`;s.Debugger.error(r);const o=new Error(r);(0,n.sendExceptionLog)({error:o})}finally{d&&u.releaseTopic("healthUpdates",d)}})(e,p,d),await r(l,f))}},21614:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUserSettingsLogContent=void 0;const n=r(56915),o=r(16593);t.createUserSettingsLogContent=e=>{const t=(0,n.webAuthnAuthenticationOptedInSelector)(e),r=(0,n.rememberMeFor14DaysOptedInSelector)(e);return{hasAuthenticationWithWebauthn:t,hasCredentialsProtectWithMasterPassword:(0,o.personalSettingsSelector)(e).SecuredDataShowPassword,hasAuthenticationWithRememberMe:r}}},86903:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendUserSettingsLog=void 0;const n=r(10203),o=r(66102),a=r(21614);t.sendUserSettingsLog=async e=>{const t=(0,a.createUserSettingsLogContent)(e.storeService.getState());await(0,o.logEvent)(e,{event:new n.UserUserSettingsEvent({hasAuthenticationWithWebauthn:t.hasAuthenticationWithWebauthn,hasCredentialsProtectWithMasterPassword:t.hasCredentialsProtectWithMasterPassword,hasAuthenticationWithRememberMe:t.hasAuthenticationWithRememberMe})})}},3149:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupUserSettingsLogSubscriptions=void 0;const n=r(86903);t.setupUserSettingsLogSubscriptions=async function(e,t){e.sessionOpened.on((()=>{(0,n.sendUserSettingsLog)(t)}))}},35587:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncMap=void 0,t.asyncMap=(e,t)=>Promise.all(e.map((e=>t(e))))},30144:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canonizeText=void 0,t.canonizeText=function(e){if(!e)return"";let t=e.trim();return t.normalize&&(t=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),t=t.toLowerCase().replace(/[\+_\\\/\?\.\-_{}\[\]\(\)\*&!@#\$~`%\^=\|:,;"'<>]/g," "),t.replace(/\s+/g," ")}},78320:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateItemUuid=void 0;const n=r(28354);t.generateItemUuid=function(){return`{${(0,n.v4)().toUpperCase()}}`}},96997:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return Math.ceil(2e9*Math.random())}},47408:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUnixTimestamp=void 0,t.getUnixTimestamp=function(){return Math.round(Date.now()/1e3)}},28445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkOrigin=t.removeNonDigitCharacters=t.looksLikeUuid=t.normalizeEmail=t.looksLikeEmail=t.isValidLogin=t.postDataToUrl=t.getClientAgentHeader=void 0;const n=r(66319),o=r(16516),a=r(14656),i=r(86056),s=e=>n.stringify(o.map((e=>Array.isArray(e)?JSON.stringify(e):e),e));function c(e){return`version:${e.appVersion},platform:${e.platformName}}`}t.getClientAgentHeader=c,t.postDataToUrl=async function(e,t,r){const n={headers:{"Client-Agent":c((0,i.getPlatformInfo)()),"Content-Type":"application/x-www-form-urlencoded",...r?.headers??{}},transformRequest:[s],responseType:r?.responseType??"json"};return(0,a.post)(e,t,n)},t.isValidLogin=e=>l(e)||f(e);const u=/^[^\s@]+@([^\s@])+\.([^\s@])+$/i;function l(e){return u.test(e)}t.looksLikeEmail=l;const d=/[<>]/g;t.normalizeEmail=function(e){return e?e.trim().toLowerCase().replace(d,""):""};const p="^{?[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}}?$";function f(e){return new RegExp(p).test(e)}t.looksLikeUuid=f,t.removeNonDigitCharacters=function(e){return"string"==typeof e?e.replace(/\D/g,""):""},t.checkOrigin=e=>{const t=(r=e)?r?.location?.origin:void 0;var r;return!t||!t.endsWith(("LmRhc2hsYW5lLmNvbQ==",atob("LmRhc2hsYW5lLmNvbQ==")))}},54218:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=Function.prototype.toString,n=r.call(Object),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,s="undefined"!=typeof Symbol?Symbol.toStringTag:void 0;t.default=function(e){if(!(e=>"object"==typeof e&&null!==e)(e)||"[object Object]"!==function(e){if(null===e)return void 0===e?"[object Undefined]":"[object Null]";if(!s||!(s in Object(e)))return i.call(e);const t=a.call(e,s),r=e[s];let n=!1;try{e[s]=void 0,n=!0}catch(e){}const o=i.call(e);return n&&(t?e[s]=r:delete e[s]),o}(e))return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;const o=a.call(t,"constructor")&&t.constructor;return"function"==typeof o&&o instanceof o&&r.call(o)===n}},22376:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vpnApiConfig=void 0;const n=r(53041),o=r(97657),a=r(25838),i=r(83419),s=r(8522);t.vpnApiConfig={commands:{activateVpnAccount:{handler:n.activateVpnAccountHandler},clearVpnAccountErrors:{handler:o.clearVpnAccountErrorsHandler},completeVpnAccountActivation:{handler:a.completeVpnAccountActivationHandler}},queries:{getVpnAccount:{selector:s.vpnAccountStatusSelector},getVpnCapabilitySetting:{selector:s.vpnCapabilitySettingSelector}},liveQueries:{liveVpnAccount:{operator:i.vpnAccountStatus$}}}},3790:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VpnDisabledReason=t.VpnAccountActivationErrorType=t.VpnAccountStatusType=void 0,function(e){e.Activated="Activated",e.Activating="Activating",e.Error="Error",e.NotFound="NotFound",e.Ready="Ready"}(t.VpnAccountStatusType||(t.VpnAccountStatusType={})),function(e){e.ServerError="ServerError",e.AccountAlreadyExistError="AccountAlreadyExist"}(t.VpnAccountActivationErrorType||(t.VpnAccountActivationErrorType={})),function(e){e.InTeam="InTeam",e.NotPremium="NotPremium",e.NoPayment="NoPayment",e.Other="Other"}(t.VpnDisabledReason||(t.VpnDisabledReason={}))},94922:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openDashlaneVpnAPI=void 0;const n=r(46298),o=r(29301);t.openDashlaneVpnAPI=e=>({generateCredential:async(t,r)=>{const a=await(0,n.generateCredential)(e,t,{email:r});return(0,n.isApiError)(a)?{success:!1,error:a.code===n.GetVpnCredentialBusinessErrors.USER_ALREADY_HAS_AN_ACCOUNT_FOR_PROVIDER?o.VpnErrorType.AccountAlreadyExistError:o.VpnErrorType.ServerError}:{success:!0,password:a.password}}})},29301:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VpnErrorType=void 0,function(e){e.AccountAlreadyExistError="AccountAlreadyExist",e.ServerError="ServerError"}(t.VpnErrorType||(t.VpnErrorType={}))},2749:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeVpnLogger=void 0;const n=r(10203),o=r(66102),a=r(29301),i={[a.VpnErrorType.AccountAlreadyExistError]:n.ActivateVpnError.EmailAlreadyInUse,[a.VpnErrorType.ServerError]:n.ActivateVpnError.ServerError};t.makeVpnLogger=e=>({logComplete:async()=>{await(0,o.logEvent)(e,{event:new n.UserActivateVpnEvent({flowStep:n.FlowStep.Complete})})},logError:async t=>{await(0,o.logEvent)(e,{event:new n.UserActivateVpnEvent({flowStep:n.FlowStep.Error,errorName:i[t]})})},logStart:async()=>{await(0,o.logEvent)(e,{event:new n.UserActivateVpnEvent({flowStep:n.FlowStep.Start})})}})},42238:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vpnAccountNotFoundAction=t.vpnAccountActivationCompleteAction=t.vpnAccountGenerationErrorAction=t.vpnAccountGenerationDoneAction=t.vpnAccountActivatingAction=t.VPN_ACCOUNT_NOT_FOUND=t.VPN_ACCOUNT_GENERATION_ERROR=t.VPN_ACCOUNT_ACTIVATION_COMPLETE=t.VPN_ACCOUNT_GENERATION_DONE=t.VPN_ACCOUNT_ACTIVATING=void 0,t.VPN_ACCOUNT_ACTIVATING="VPN_ACCOUNT_ACTIVATING",t.VPN_ACCOUNT_GENERATION_DONE="VPN_ACCOUNT_GENERATION_DONE",t.VPN_ACCOUNT_ACTIVATION_COMPLETE="VPN_ACCOUNT_ACTIVATION_COMPLETE",t.VPN_ACCOUNT_GENERATION_ERROR="VPN_ACCOUNT_GENERATION_ERROR",t.VPN_ACCOUNT_NOT_FOUND="VPN_ACCOUNT_NOT_FOUND",t.vpnAccountActivatingAction=()=>({type:t.VPN_ACCOUNT_ACTIVATING}),t.vpnAccountGenerationDoneAction=()=>({type:t.VPN_ACCOUNT_GENERATION_DONE}),t.vpnAccountGenerationErrorAction=e=>({type:t.VPN_ACCOUNT_GENERATION_ERROR,error:e}),t.vpnAccountActivationCompleteAction=()=>({type:t.VPN_ACCOUNT_ACTIVATION_COMPLETE}),t.vpnAccountNotFoundAction=()=>({type:t.VPN_ACCOUNT_NOT_FOUND})},16667:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vpnApiBootstrap=void 0;const n=r(22376);t.vpnApiBootstrap=e=>{e.register(n.vpnApiConfig)}},90731:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VPN_CREDENTIAL_NAME=t.VPN_CREDENTIAL_URL=t.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN=t.VPN_HOTSPOTSHIELD_DOMAIN=void 0,t.VPN_HOTSPOTSHIELD_DOMAIN="hotspotshield.com",t.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN="dashlane",t.VPN_CREDENTIAL_URL=`https://${t.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN}.${t.VPN_HOTSPOTSHIELD_DOMAIN}`,t.VPN_CREDENTIAL_NAME="VPN Hotspot Shield"},53041:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.activateVpnAccountHandler=void 0;const n=r(2749),o=r(94922),a=r(17842);t.activateVpnAccountHandler=async(e,t)=>{const r=(0,a.CreateVpnService)({generator:(0,o.openDashlaneVpnAPI)(e.storeService),logger:(0,n.makeVpnLogger)(e)},e);await r.generateCredential(t.email)}},97657:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearVpnAccountErrorsHandler=void 0;const n=r(42238);t.clearVpnAccountErrorsHandler=e=>(e.storeService.dispatch((0,n.vpnAccountNotFoundAction)()),Promise.resolve())},25838:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeVpnAccountActivationHandler=void 0;const n=r(42238);t.completeVpnAccountActivationHandler=e=>(e.storeService.dispatch((0,n.vpnAccountActivationCompleteAction)()),Promise.resolve())},7995:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vpnCredentialMatcher=void 0;const n=r(17509),o=r(83195),a=r(90731);t.vpnCredentialMatcher=(e,t)=>{if(t){const t=new o.ParsedURL(e.Url);return e.Password&&e.Email&&t&&t.getRootDomain()===a.VPN_HOTSPOTSHIELD_DOMAIN&&t.getSubdomain()===a.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN}const r=(0,n.getParsedUrl)(e.Url);return e.Password&&e.Email&&r&&r.rootDomain===a.VPN_HOTSPOTSHIELD_DOMAIN&&r.subDomainName===a.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN}},83419:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vpnAccountStatus$=void 0;const n=r(18948),o=r(3343),a=r(8522);t.vpnAccountStatus$=function(){const e=a.vpnAccountStatusSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())}},24827:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VPNReducers=void 0;const n=r(42238),o=r(3790);t.VPNReducers=(e,t)=>{switch(t.type){case n.VPN_ACCOUNT_ACTIVATING:return{accountStatus:{status:o.VpnAccountStatusType.Activating}};case n.VPN_ACCOUNT_GENERATION_DONE:return{accountStatus:{status:o.VpnAccountStatusType.Ready}};case n.VPN_ACCOUNT_GENERATION_ERROR:return{accountStatus:{status:o.VpnAccountStatusType.Error,error:t.error}};case n.VPN_ACCOUNT_ACTIVATION_COMPLETE:return{accountStatus:{status:o.VpnAccountStatusType.Activated}};case n.VPN_ACCOUNT_NOT_FOUND:return{accountStatus:{status:o.VpnAccountStatusType.NotFound}};default:return e??{accountStatus:{status:o.VpnAccountStatusType.NotFound}}}}},8522:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vpnCapabilitySettingSelector=t.getVpnCapabilitySetting=t.vpnAccountStatusSelector=t.vpnCredentialSelector=void 0;const n=r(51319),o=r(32034),a=r(16593),i=r(51504),s=r(3790),c=r(7995),u=(e,t)=>(t.CreationDatetime??0)-(e.CreationDatetime??0);var l;t.vpnCredentialSelector=e=>{const t=(0,n.credentialsSelector)(e),r=e.userSession.personalFeatures.features[i.NEW_URL_PARSER_FF]||e.userSession.personalFeatures.features[i.NEW_URL_PARSER_FF_PROD];return t.filter((e=>(0,c.vpnCredentialMatcher)(e,r))).sort(u)[0]??null},t.vpnAccountStatusSelector=(0,o.createSelector)((e=>{const{vpnData:t}=e.userSession;return t||{accountStatus:{status:s.VpnAccountStatusType.NotFound}}}),t.vpnCredentialSelector,((e,t)=>{switch(e.accountStatus.status){case s.VpnAccountStatusType.Error:return{status:s.VpnAccountStatusType.Error,error:e.accountStatus.error};case s.VpnAccountStatusType.Activating:return{status:s.VpnAccountStatusType.Activating};case s.VpnAccountStatusType.Activated:case s.VpnAccountStatusType.NotFound:return t?{status:s.VpnAccountStatusType.Activated,email:t.Email,password:t.Password,credentialId:t.Id}:{status:s.VpnAccountStatusType.NotFound};case s.VpnAccountStatusType.Ready:return t?{status:s.VpnAccountStatusType.Ready,email:t.Email,password:t.Password,credentialId:t.Id}:{status:s.VpnAccountStatusType.NotFound}}})),function(e){e.IN_TEAM="in_team",e.NOT_PREMIUM="not_premium",e.NO_PAYMENT="no_payment"}(l||(l={}));const d={in_team:s.VpnDisabledReason.InTeam,not_premium:s.VpnDisabledReason.NotPremium,no_payment:s.VpnDisabledReason.NoPayment};t.getVpnCapabilitySetting=e=>{const t=e?.capabilities?.secureWiFi;return t.enabled?{hasVpnEnabled:!0}:{hasVpnEnabled:!1,vpnDisabledReason:d[t.info.reason]||s.VpnDisabledReason.Other}},t.vpnCapabilitySettingSelector=(0,o.createSelector)(a.premiumStatusSelector,t.getVpnCapabilitySetting)},17842:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateVpnService=void 0;const n=r(88544),o=r(38250),a=r(9763),i=r(88779),s=r(92263),c=r(95623),u=r(70252),l=r(16593),d=r(42238),p=r(90731),f=r(29301),g=r(8522),m=({update:{title:e}})=>({Title:e}),h=({title:e})=>({Title:e});t.CreateVpnService=(e,t)=>{const r=async r=>{t.storeService.dispatch((0,d.vpnAccountGenerationErrorAction)(r===f.VpnErrorType.AccountAlreadyExistError?o.VpnAccountActivationErrorType.AccountAlreadyExistError:o.VpnAccountActivationErrorType.ServerError)),await e.logger.logError(r??f.VpnErrorType.ServerError)};return{generateCredential:async o=>{await e.logger.logStart(),t.storeService.dispatch((0,d.vpnAccountActivatingAction)());try{const s=(0,n.contactInfoSelector)(t.storeService.getState()),c=(0,l.userLoginSelector)(t.storeService.getState()),u=o??s.email??c,f=await e.generator.generateCredential(c,u);switch(f.success){case!0:await(async(e,r,n)=>{const o=(0,g.vpnCredentialSelector)(t.storeService.getState()),s={email:e,password:r,url:p.VPN_CREDENTIAL_URL,login:n,title:p.VPN_CREDENTIAL_NAME};if(o){const e={id:o.Id,update:{...s}};await(0,i.updateCredential)({storeService:t.storeService,sessionService:t.sessionService,eventLoggerService:t.eventLoggerService,applicationModulesAccess:t.applicationModulesAccess},e,m)}else await(0,a.createCredential)({storeService:t.storeService,sessionService:t.sessionService,eventLoggerService:t.eventLoggerService,applicationModulesAccess:t.applicationModulesAccess},s,h)})(u,f.password,c),t.storeService.dispatch((0,d.vpnAccountGenerationDoneAction)()),await e.logger.logComplete();break;case!1:r(f.error)}}catch(e){r();const t="VPN",n=s.CarbonError.fromAnyError(e).addContextInfo(t,"saveCredential");(0,c.logError)({tag:[t],message:`${n}`,details:{error:e}}),(0,u.sendExceptionLog)({error:n})}}}}},71012:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.minAcceptablePasswordStrength=void 0,t.minAcceptablePasswordStrength=2},46866:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mockCarbon=void 0;const n=r(53576),o=r(18948),a=r(45619),i=r(46937),s={userSession:{account:{login:"user",personalFeatures:{features:{superFeature:!0,badFeature:!1}}}}},c=()=>{};t.mockCarbon=({mockMethod:e=jest.fn(),stateFn:t=(e=>e),mockEvents:r})=>{const u=new i.CarbonLegacyInfrastructure;return u.ready({apiEvents:{mockMethod:e},leelooEventsCommands:Object.keys(n.CarbonLeelooConnector).reduce(((e,t)=>(e[t]=jest.fn(),e)),{}),leelooEvents:{...a.LEGACY_LEELOO_EVENTS_TO_SUBSCRIBE.reduce(((e,t)=>({...e,[t]:{on:jest.fn((()=>c))}})),{}),...r},state$:new o.BehaviorSubject(t(s))}),u}},61657:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonEventEmitter=void 0;const o=r(48953);let a=class extends o.ContextlessBaseEventEmitter{};a=n([(0,o.Injectable)()],a),t.CarbonEventEmitter=a},18955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LEGACY_LEELOO_SLOTS_TO_IGNORE=void 0;const n=r(53576),o=r(58807),a=r(45619),i=r(46937);t.LEGACY_LEELOO_SLOTS_TO_IGNORE=(0,o.safeCast)(i.LEGACY_LEELOO_SLOTS_ALL.filter((e=>!a.LEGACY_LEELOO_EVENTS_TO_SUBSCRIBE.includes(e)&&!(0,o.safeCast)(n.LEGACY_CARBON_LEELOO_USED_COMMANDS).includes(e))))},45619:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.relayLeelooLegacyEvents=t.LEGACY_LEELOO_EVENTS_TO_SUBSCRIBE=void 0,t.LEGACY_LEELOO_EVENTS_TO_SUBSCRIBE=["loginStatusChanged","openSessionTokenSent","openSessionAskMasterPassword","openSessionDashlaneAuthenticator","openSessionOTPSent","openSessionOTPForNewDeviceRequired","openSessionFailed","openSessionSsoRedirectionToIdpRequired"],t.relayLeelooLegacyEvents=function(e,r){const n=t.LEGACY_LEELOO_EVENTS_TO_SUBSCRIBE.map((t=>e[t].on((async e=>{await r.sendEvent("carbonLegacy",{eventData:e,eventName:t})}))));return()=>{n.forEach((e=>{e()}))}}},46937:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LEGACY_LEELOO_SLOTS_ALL=t.CarbonLegacyInfrastructure=void 0;const n=r(18948),o=r(53576);t.CarbonLegacyInfrastructure=class{constructor(){this.carbon$=new n.ReplaySubject(1),this.carbonState$=this.carbon$.pipe((0,n.switchMap)((e=>e.state$)))}ready(e){this.carbon$.next(e)}getCarbon(){return(0,n.firstValueFrom)(this.carbon$)}},t.LEGACY_LEELOO_SLOTS_ALL=Object.keys(o.CarbonLeelooConnector)},87026:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonLegacyBootstrap=void 0;const a=r(48953),i=r(68224),s=r(58807),c=r(18948),u=r(61657),l=r(45619),d=r(46937),p=r(96160);let f=class{constructor(e,t,r,n){this.infra=t,this.lifeCycle=r,this.eventEmitter=n;const{setActiveUser:o}=e.getClient(i.requestContextApi).commands;this.setActiveUser=o}onFrameworkInit(){this.lifeCycle.addExternalComponentReadyCondition((async()=>await this.infra.getCarbon())),this.lifeCycle.addAppReadyHook((async()=>{const e=this.infra.carbonState$.pipe((0,c.map)((e=>({account:(0,p.getCarbonLegacyStateSelector)(e,"userSession.account"),personalFeatures:(0,p.getCarbonLegacyStateSelector)(e,"userSession.personalFeatures")}))),(0,c.map)((e=>{var t;if((t=e)&&"object"==typeof t&&(0,s.hasProperty)(t,"account")&&t.account&&"object"==typeof t.account&&(0,s.hasProperty)(t.account,"login")&&t.account.login&&"string"==typeof t.account.login&&(0,s.hasProperty)(t.account,"isAuthenticated")&&t.account.isAuthenticated&&(0,s.hasProperty)(t,"personalFeatures")&&t.personalFeatures&&"object"==typeof t.personalFeatures&&(0,s.hasProperty)(t.personalFeatures,"features"))return e.account.login})),(0,c.distinctUntilChanged)(),(0,c.switchMap)((async e=>{await this.setActiveUser({userName:e})}))).subscribe(),t=await this.infra.getCarbon(),r=(0,l.relayLeelooLegacyEvents)(t.leelooEvents,this.eventEmitter);return()=>{e.unsubscribe(),r()}}))}};f=n([(0,a.FrameworkInit)(),o("design:paramtypes",[a.CqrsClient,d.CarbonLegacyInfrastructure,a.AppLifeCycle,u.CarbonEventEmitter])],f),t.CarbonLegacyBootstrap=f},49112:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonLegacyModule=void 0;const o=r(53576),a=r(48953),i=r(92910),s=r(76559),c=r(61657),u=r(46937),l=r(87026),d=r(85642),p=r(50582),f=r(52948);let g=class{};g=n([(0,a.Module)({api:o.carbonLegacyApi,handlers:{commands:{carbon:i.CarbonCommandHandler,carbonLegacyLeeloo:s.CarbonLegacyLeelooCommandHandler,mitigationDeleteGrapheneUserData:f.DeleteGrapheneUserDataCommandHandler},events:{},queries:{carbonState:d.CarbonGetStateQueryHandler,carbonStateList:p.CarbonStateListQueryHandler}},configurations:{infrastructure:{token:u.CarbonLegacyInfrastructure}},onFrameworkInit:l.CarbonLegacyBootstrap,providers:[c.CarbonEventEmitter],requiredFeatureFlips:["darkwebMonitoringWebRelease","platform_web_new_url_parser_dev","platform_web_new_url_parser","breachesFetchWeb","ims_web_ph_mv3_dev","ptu_web_MPprotect_phase3","web_extension_credentialsDedupView","itadmin_SAEX_CryptoMigration_Phase1","itadmin_SAEX_CryptoMigration_Phase2","web_extension_credentialsDedupView","autofill_web_linkedWebsites_dev","autofill_web_linkedWebsites","vault_web_collection_labelling_dev","masterPasswordLeakCheckLog","SAEXAccountRecoveryv3"]})],g),t.CarbonLegacyModule=g},96160:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCarbonLegacyStateSelector=void 0,t.getCarbonLegacyStateSelector=(e,t)=>t?t.split(".").reduce(((e,t)=>{return"object"==typeof(r=e)&&r&&t in r?e[t]:e;var r}),e):e},92910:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonCommandHandler=void 0;const a=r(53576),i=r(48953),s=r(58807),c=r(46937),u=r(61657);let l=class{constructor(e,t,r){this.infra=e,this.eventsEmitter=t,this.context=r}async execute({body:{args:e,name:t,fireEvent:r}}){const n=(await this.infra.getCarbon()).apiEvents[t],o=await n(...e),a=(e=>(e=>!(!e||"object"!=typeof e)&&(0,s.hasProperty)(e,"success")&&!1===e.success)(e)?(0,s.failure)({tag:"",error:e.error}):(0,s.success)({id:"",carbonResult:e}))(o);return r&&await this.eventsEmitter.sendEvent("carbonCommandResult",{result:o},this.context),a}};l=n([(0,i.CommandHandler)(a.CarbonCommand),o("design:paramtypes",[c.CarbonLegacyInfrastructure,u.CarbonEventEmitter,i.RequestContext])],l),t.CarbonCommandHandler=l},76559:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonLegacyLeelooCommandHandler=void 0;const a=r(53576),i=r(48953),s=r(58807),c=r(46937),u=r(61657);let l=class{constructor(e,t){this.infra=e,this.eventsEmitter=t}async execute({body:{arg:e,name:t,fireEvent:r}}){const n=(await this.infra.getCarbon()).leelooEventsCommands[t],o=await n(...e);return r?(await this.eventsEmitter.sendEvent("carbonCommandResult",{result:o}),(0,s.success)({id:"",carbonResult:o})):(0,s.success)({id:"",carbonResult:o})}};l=n([(0,i.CommandHandler)(a.CarbonLegacyLeelooCommand),o("design:paramtypes",[c.CarbonLegacyInfrastructure,u.CarbonEventEmitter])],l),t.CarbonLegacyLeelooCommandHandler=l},85642:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonGetStateQueryHandler=void 0;const a=r(53576),i=r(48953),s=r(58807),c=r(18948),u=r(46937),l=r(96160);let d=class{constructor(e){this.infrastructure=e}execute({body:{path:e}}){const{carbonState$:t}=this.infrastructure;return t.pipe((0,c.map)((t=>(0,l.getCarbonLegacyStateSelector)(t,e))),(0,c.distinctUntilChanged)(),(0,c.map)((e=>(0,s.success)(e))))}};d=n([(0,i.QueryHandler)(a.CarbonStateQuery),o("design:paramtypes",[u.CarbonLegacyInfrastructure])],d),t.CarbonGetStateQueryHandler=d},50582:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonStateListQueryHandler=void 0;const a=r(53576),i=r(48953),s=r(58807),c=r(18948),u=r(46937),l=r(96160);let d=class{constructor(e){this.infrastructure=e}execute({body:{paths:e}}){const{carbonState$:t}=this.infrastructure;return t.pipe((0,c.map)((t=>(0,s.success)(e.map((e=>(0,l.getCarbonLegacyStateSelector)(t,e)))))))}};d=n([(0,i.QueryHandler)(a.CarbonStateListQuery),o("design:paramtypes",[u.CarbonLegacyInfrastructure])],d),t.CarbonStateListQueryHandler=d},52948:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteGrapheneUserDataCommandHandler=void 0;const a=r(53576),i=r(48953),s=r(58807);let c=class{constructor(e){this.infra=e}async execute({body:{login:e}}){const t=await this.infra.getAllKeys(),r=`.${e}`,n=t.filter((e=>e.endsWith(r))).map((async e=>await this.infra.remove(e)));return await Promise.allSettled(n),(0,s.success)(null)}};c=n([(0,i.CommandHandler)(a.MitigationDeleteGrapheneUserDataCommand),o("design:paramtypes",[i.KeyValueStorageInfrastructure])],c),t.DeleteGrapheneUserDataCommandHandler=c},71439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LEGACY_LEELOO_SLOTS_TO_IGNORE=t.Mocks=t.CarbonLegacyInfrastructure=t.CarbonLegacyModule=void 0;var n=r(49112);Object.defineProperty(t,"CarbonLegacyModule",{enumerable:!0,get:function(){return n.CarbonLegacyModule}});var o=r(46937);Object.defineProperty(t,"CarbonLegacyInfrastructure",{enumerable:!0,get:function(){return o.CarbonLegacyInfrastructure}}),t.Mocks=r(46866);var a=r(18955);Object.defineProperty(t,"LEGACY_LEELOO_SLOTS_TO_IGNORE",{enumerable:!0,get:function(){return a.LEGACY_LEELOO_SLOTS_TO_IGNORE}})},48749:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setConfig=t.config=t.DashlaneAPISchemesNames=void 0;const n=r(4407);var o;!function(e){e.DASHLANE_API_HOST_WITH_SCHEME="DASHLANE_API_HOST_WITH_SCHEME",e.DASHLANE_WS_HOST_WITH_SCHEME="DASHLANE_WS_HOST_WITH_SCHEME"}(o=t.DashlaneAPISchemesNames||(t.DashlaneAPISchemesNames={}));const a={LOG_LEVEL:n.Silent,LOG_TAGS:[],DASHLANE_API_HOST_WITH_SCHEME:"https://api.dashlane.com",DASHLANE_WS_HOST_WITH_SCHEME:"https://ws1.dashlane.com",DASHLANE_STYX_HOST_WITH_SCHEME:"https://styx.data.dashlane.com",CODE_NAME:null,MANIFEST_VERSION:null};t.config=a;const i=e=>(Object.values(o).forEach((t=>{t in e&&!e[t]&&(e[t]=a[t])})),e);t.setConfig=e=>{t.config={...t.config,...i(e)}}},92912:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAccount=t.getCreateAccountRequest=t.defaultCreateAccountRequestParams=t.AUTOMATION_MP_GRACE_PERIOD=t.DEFAULT_E2E_ACCOUNT_PASSWORD=void 0;const n=r(78320),o=r(78955),a=r(56292);function i(e,r,n){return{login:e,anonymousUserId:n,password:r,...t.defaultCreateAccountRequestParams}}t.DEFAULT_E2E_ACCOUNT_PASSWORD="Azerty12",t.AUTOMATION_MP_GRACE_PERIOD=5e3,t.defaultCreateAccountRequestParams={format:"US",language:"en",subscribe:!1,deviceName:"INTEGRATION_TEST"},t.getCreateAccountRequest=i,t.createAccount=async function(e,r,s){const c=r??{},u={...i((0,o.getLogin)(),t.DEFAULT_E2E_ACCOUNT_PASSWORD,(0,n.generateItemUuid)()),...c},l={createAccountResult:await e.createAccountStep1(u),options:{flowIndicator:"webAccount"},isStandAlone:!0,...s??{}},d=await e.createAccountStep2(l);return await(0,a.sync)(e),d}},78955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLogin=t.defaultTestAccountOptions=void 0;const n=r(28354),o=r(55995);t.defaultTestAccountOptions={abTests:{},automationAccount:!1,featureFlips:[],throttling:o.TestAccountThrottlingBehaviour.Unthrottled,type:o.TestAccountType.FreePremiumTrial},t.getLogin=function(e=t.defaultTestAccountOptions){const{abTests:r=t.defaultTestAccountOptions.abTests,featureFlips:a=t.defaultTestAccountOptions.featureFlips,throttling:i=t.defaultTestAccountOptions.throttling,type:s=t.defaultTestAccountOptions.type,automationAccount:c=t.defaultTestAccountOptions.automationAccount}=e,u=(0,n.v4)(),l=u.substr(0,u.indexOf("-")),d=function(e){switch(e){case o.TestAccountThrottlingBehaviour.Unthrottled:return"ut_";case o.TestAccountThrottlingBehaviour.Normal:default:return""}}(i),p=function(e){switch(e){case o.TestAccountType.Free:return"freefree_";case o.TestAccountType.PremiumPaid:return"premiumpaid_";case o.TestAccountType.Family:return"family_";case o.TestAccountType.FreePremiumTrial:default:return""}}(s),f=!1===(g=r)?"noabtest_":Object.keys(g).reduce(((e,t)=>{const r=`${t}_${g[t]}_`;return e.concat(r)}),"");var g;const m=function(e){return e.reduce(((e,t)=>{const r=`${t}_`;return e.concat(r)}),"")}(a);return("kw_test_"+function(e){return e?"auto_":""}(c)+d+p+"carbon_e2e_"+f+m+l+"@mailinator.com").toLocaleLowerCase()}},55995:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestAccountThrottlingBehaviour=t.TestAccountType=void 0,function(e){e[e.Free=0]="Free",e[e.FreePremiumTrial=1]="FreePremiumTrial",e[e.Legacy=2]="Legacy",e[e.PremiumPaid=3]="PremiumPaid",e[e.PremiumPlus=4]="PremiumPlus",e[e.Family=5]="Family"}(t.TestAccountType||(t.TestAccountType={})),function(e){e[e.Normal=0]="Normal",e[e.Unthrottled=1]="Unthrottled"}(t.TestAccountThrottlingBehaviour||(t.TestAccountThrottlingBehaviour={}))},70420:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(92912),t),o(r(78955),t),o(r(55995),t)},66916:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSubscriptionTokenForTestUser=void 0;const n=r(46298),o=r(72911);t.getSubscriptionTokenForTestUser=async(e,t)=>{const{storeService:r}=e,a=await(0,o.getSubscriptionTokens)(r);if((0,n.isApiError)(a))throw new Error(`Error: ${a.code}`);const{tokens:i}=a,s=i.find((e=>e.email===t));if(!s)throw new Error("Email token not found for "+t);return s.token}},76506:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e=2e3){return new Promise((t=>setTimeout(t,e)))}},71602:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getServiceProviderToken=void 0;const n=r(43739),o=r(46298),a=r(97343),i=r(25576);t.getServiceProviderToken=async(e,t)=>{const{storeService:r}=e;!function(e,t){e.dispatch((0,n.deviceRegistered)((0,n.makeDeviceRegistrationKeys)(t.deviceAccessKey,t.deviceSecretKey),i.PersistData.PERSIST_DATA_YES,t.login))}(r,t);const{login:s,teamUuid:c}=t,u=`${c}%${t.userServiceProviderKey}`,l=await(0,a.getUserSSOInfo)(r,{login:s,teamUuid:c,userServiceProviderKey:u});if((0,o.isApiError)(l))throw new Error(`Error: ${l.code}`);return l}},32006:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forceBreachRefreshHandler=void 0;const n=r(95303);t.forceBreachRefreshHandler=async({storeService:e,wsService:t})=>{const r=(0,n.getInstance)(e,t);await r.refresh({forceRefresh:!0})}},79734:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPublicBreachHelper=t.addPrivateBreachHelper=t.createOrUpdateDarkWebBreachHelper=t.saveBankAccount=t.updateCredential=t.removeCredential=t.getNotes=t.getCredentials=t.saveCredential=void 0;const n=r(28354),o=r(53576),a=r(46298),i=r(77074),s=r(31197),c=r(72579),u=r(76506),l=r(70420);async function d(e,t,r={}){const n=function({title:e,email:t,password:r,url:n,...a}){return{kwType:"KWAuthentifiant",origin:o.SaveOrigin.MANUAL,content:{category:"",email:t,login:t,onlyForThisSubdomain:!1,password:r,protectWithMasterPassword:!1,secondaryLogin:"",url:n??"",title:e,autoLogin:!1,note:"",spaceId:"",linkedWebsites:{addedByDashlane:[],addedByUser:[]},...a}}}({title:"title",email:"email@domain.com",password:l.DEFAULT_E2E_ACCOUNT_PASSWORD,...r}),a=t??n;await e.savePersonalDataItem(a),await(0,u.default)(100)}t.saveCredential=d,t.getCredentials=async function(e){return(await e.getDataModel(null)).credentials},t.getNotes=async function(e){return(await e.getDataModel(null)).notes},t.removeCredential=async function(e,t){return await e.removePersonalDataItem({id:t})},t.updateCredential=function(e,{Id:t,Title:r,Email:n,Url:o,Password:a},i){return d(e,void 0,{id:t,title:r,email:n,password:a,url:o,...i})},t.saveBankAccount=async function(e,t,r={}){const n={kwType:"KWBankStatement",origin:o.SaveOrigin.MANUAL,content:{name:"name",owner:"owner",IBAN:"",BIC:"",bank:"",...r,...t}},a=t??n;await e.savePersonalDataItem(a),await(0,u.default)(100)},t.createOrUpdateDarkWebBreachHelper=async({storeService:e},t)=>{t.databreach.uuid||(t.databreach.uuid=(0,n.v4)());const r=await(0,i.createOrUpdateDarkWebBreach)(e,t);if((0,a.isApiError)(r))throw new Error(`Error when creating / updating test data breach: ${r.message}`);return t.databreach.uuid},t.addPrivateBreachHelper=async({storeService:e},t)=>await(0,s.addPrivateBreach)(e,t),t.createPublicBreachHelper=async({storeService:e},t)=>{const r=await(0,c.createPublicBreach)(e,t);if((0,a.isApiError)(r))throw new Error(`Error when creating test breach: ${r.code}, ${r.message}`);return r}},56292:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sync=t.waitForSync=void 0;const n=r(76506),o=3e4;function a(e,t={timeout:o}){let r,n;const a=setTimeout((()=>{n(new Error("Sync timed out"))}),t.timeout),i=new Promise(((e,t)=>{r=e,n=t})),s=e.sessionSyncStatus.on((({status:e})=>{"syncing"!==e&&(clearTimeout(a),s(),"success"===e?r():"error"===e&&n(new Error("Sync failed")))}));return i}t.waitForSync=a,t.sync=async function(e){await e.sessionForceSync({}),await a(e),await(0,n.default)()}},25601:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.DashlaneAPISchemesNames=t.HttpErrorCode=t.init=t.ApplicationBuildType=t.CarbonStorage=t.apiEvents=t.decipherDatabaseRules=t.interfaces=void 0,t.interfaces=r(92231);var a=r(5851);Object.defineProperty(t,"decipherDatabaseRules",{enumerable:!0,get:function(){return a.decipherDatabaseRules}});var i=r(50643);Object.defineProperty(t,"apiEvents",{enumerable:!0,get:function(){return i.apiEvents}}),o(r(4673),t);var s=r(18539);Object.defineProperty(t,"CarbonStorage",{enumerable:!0,get:function(){return s.CarbonLocalStorage}});var c=r(59600);Object.defineProperty(t,"ApplicationBuildType",{enumerable:!0,get:function(){return c.ApplicationBuildType}});var u=r(9265);Object.defineProperty(t,"init",{enumerable:!0,get:function(){return u.init}});var l=r(14656);Object.defineProperty(t,"HttpErrorCode",{enumerable:!0,get:function(){return l.HttpErrorCode}});var d=r(48749);Object.defineProperty(t,"DashlaneAPISchemesNames",{enumerable:!0,get:function(){return d.DashlaneAPISchemesNames}}),o(r(71439),t)},9265:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;const n=r(48749),o=r(95623),a=r(17338),i=r(74318);t.init=async function(e){e.config&&(0,n.setConfig)(e.config);const t=await(0,i.initCarbon)(e),r=(0,a.getCoreServices)(t);return(0,o.logInfo)({message:"init carbon done"}),r}},95343:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_USER_CAPABILITIES=t.makePremiumStatusTrial=t.makePremiumStatusWithPreviousPlan=t.makePremiumStatusWithFamilyMembership=t.makePremiumStatusWithBillingInfo=t.makePremiumStatusWithSpaces=t.makePremiumStatusBillingInfo=t.makeSpace=t.makeSpaceData=t.makePremiumStatusSpace=void 0;const n=r(53576);function o(e){return{associatedEmail:"kw_test_a13e5r4er357er@mailinator.com",billingAdmins:[{login:"kw_test_a13e5r4er357er@mailinator.com"}],color:"#adadad",companyName:"KWTEAM",info:{setting1:!0},invitationDate:987654321,isBillingAdmin:!0,isSSOUser:!1,isTeamAdmin:!0,joinDate:123456789,letter:"K",membersNumber:150,planType:"awesomeType",revokeDate:6872476587,status:n.SpaceStatus.Accepted,teamAdmins:[{login:"kw_test_a13e5r4er357er@mailinator.com"}],teamId:"123456",teamName:"KWTEAM",tier:n.SpaceTier.Legacy,shouldDelete:!1,...e}}function a(e){return{teamId:"123456",details:{associatedEmail:"kw_test_a13e5r4er357er@mailinator.com",billingAdmins:[{login:"kw_test_a13e5r4er357er@mailinator.com"}],color:"#adadad",companyName:"KWTEAM",info:{setting1:!0},invitationDate:987654321,isBillingAdmin:!0,isSSOUser:!1,isTeamAdmin:!0,joinDate:123456789,letter:"K",membersNumber:150,planType:"awesomeType",revokeDate:6872476587,status:n.SpaceStatus.Accepted,teamAdmins:[{login:"kw_test_a13e5r4er357er@mailinator.com"}],teamId:"123456",teamName:"KWTEAM",tier:n.SpaceTier.Legacy,shouldDelete:!1},...e}}t.makePremiumStatusSpace=o,t.makeSpaceData=function(e){return{spaces:e||[a()]}},t.makeSpace=a,t.makePremiumStatusBillingInfo=function(){return{cardExpirationYear:2157,cardExpirationMonth:12,cardLast4Digits:713,cardType:"VISA"}},t.makePremiumStatusWithSpaces=function(e){return{statusCode:n.PremiumStatusCode.NEW_USER,billingInformation:void 0,planName:"stripe",planType:"stripe",endDate:1478536851,autoRenewal:void 0,spaces:e||[o()],capabilities:void 0}},t.makePremiumStatusWithBillingInfo=function(){return{statusCode:n.PremiumStatusCode.NEW_USER,billingInformation:{cardExpirationYear:2157,cardExpirationMonth:12,cardLast4Digits:713,cardType:"VISA"},planName:"stripe",planType:"stripe",endDate:1478536851,autoRenewal:void 0,spaces:void 0,capabilities:void 0}},t.makePremiumStatusWithFamilyMembership=function(){return{statusCode:n.PremiumStatusCode.NEW_USER,billingInformation:void 0,planName:"stripe",planType:"stripe",endDate:1478536851,autoRenewal:void 0,spaces:void 0,capabilities:void 0,familyMembership:{familyId:1,isAdmin:!0,name:"Family"}}},t.makePremiumStatusWithPreviousPlan=function(){return{statusCode:n.PremiumStatusCode.NEW_USER,billingInformation:void 0,planName:"stripe",planType:"stripe",endDate:1478536851,autoRenewal:void 0,spaces:void 0,capabilities:void 0,previousPlan:{planId:"stripeAnnualROWWebsite",endDate:1478536851,startDate:1478536851,statusCode:2,planFeature:"premiumplus"}}},t.makePremiumStatusTrial=function(){return{statusCode:n.PremiumStatusCode.NEW_USER,billingInformation:void 0,planName:"stripe",planType:"stripe",endDate:1478536851,autoRenewal:!1,spaces:void 0,capabilities:void 0}},t.DEFAULT_USER_CAPABILITIES=[{capability:"identityTheftProtection",enabled:!0,info:{}},{capability:"passwordsLimit",enabled:!0,info:{limit:50}},{capability:"secureFiles",enabled:!0,info:{quota:{max:123,remaining:1},maxFileSize:52428800}},{capability:"secureWiFi",enabled:!0,info:{}},{capability:"securityBreach",enabled:!0,info:{}},{capability:"sharingLimit",enabled:!1},{capability:"creditMonitoring",enabled:!1},{capability:"dataLeak",enabled:!1},{capability:"devicesLimit",enabled:!1},{capability:"identityRestoration",enabled:!1},{capability:"multipleAccounts",enabled:!1},{capability:"secureNotes",enabled:!1},{capability:"sync",enabled:!1},{capability:"yubikey",enabled:!1}]},3275:()=>{},63619:()=>{},24675:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BlobReader:()=>Nr,BlobWriter:()=>Rr,Data64URIReader:()=>Dr,Data64URIWriter:()=>Pr,ERR_ABORT:()=>mn,ERR_BAD_FORMAT:()=>An,ERR_CENTRAL_DIRECTORY_NOT_FOUND:()=>In,ERR_DUPLICATED_NAME:()=>qn,ERR_ENCRYPTED:()=>On,ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND:()=>Tn,ERR_EOCDR_NOT_FOUND:()=>_n,ERR_EOCDR_ZIP64_NOT_FOUND:()=>bn,ERR_EXTRAFIELD_ZIP64_NOT_FOUND:()=>Cn,ERR_HTTP_RANGE:()=>hr,ERR_INVALID_COMMENT:()=>Yn,ERR_INVALID_ENCRYPTION_STRENGTH:()=>Jn,ERR_INVALID_ENTRY_COMMENT:()=>Qn,ERR_INVALID_ENTRY_NAME:()=>Zn,ERR_INVALID_EXTRAFIELD_DATA:()=>to,ERR_INVALID_EXTRAFIELD_TYPE:()=>eo,ERR_INVALID_PASSWORD:()=>_t,ERR_INVALID_SIGNATURE:()=>er,ERR_INVALID_VERSION:()=>Xn,ERR_LOCAL_FILE_HEADER_NOT_FOUND:()=>wn,ERR_UNSUPPORTED_COMPRESSION:()=>Pn,ERR_UNSUPPORTED_ENCRYPTION:()=>Dn,ERR_UNSUPPORTED_FORMAT:()=>ro,HttpRangeReader:()=>Gr,HttpReader:()=>xr,Reader:()=>Ir,TextReader:()=>Cr,TextWriter:()=>Or,Uint8ArrayReader:()=>jr,Uint8ArrayWriter:()=>Kr,Writer:()=>wr,ZipReader:()=>Un,ZipWriter:()=>ao,configure:()=>lt,fs:()=>Eo,getMimeType:()=>ft,initShimAsyncCodec:()=>fr,terminateWorkers:()=>pr});const n=15,o=30,a=19,i=256,s=i+1+29,c=2*s+1,u=256,l=16,d=17,p=18,f=16,g=-1,m=1,h=2,y=0,S=0,v=1,E=3,A=4,_=0,b=1,T=2,I=-2,w=-3,C=-5;function O(e){return D(e.map((([e,t])=>new Array(e).fill(t,0,e))))}function D(e){return e.reduce(((e,t)=>e.concat(Array.isArray(t)?D(t):t)),[])}const P=[0,1,2,3].concat(...O([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function N(){const e=this;function t(e,t){let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}e.build_tree=function(r){const o=e.dyn_tree,a=e.stat_desc.static_tree,i=e.stat_desc.elems;let s,u,l,d=-1;for(r.heap_len=0,r.heap_max=c,s=0;s<i;s++)0!==o[2*s]?(r.heap[++r.heap_len]=d=s,r.depth[s]=0):o[2*s+1]=0;for(;r.heap_len<2;)l=r.heap[++r.heap_len]=d<2?++d:0,o[2*l]=1,r.depth[l]=0,r.opt_len--,a&&(r.static_len-=a[2*l+1]);for(e.max_code=d,s=Math.floor(r.heap_len/2);s>=1;s--)r.pqdownheap(o,s);l=i;do{s=r.heap[1],r.heap[1]=r.heap[r.heap_len--],r.pqdownheap(o,1),u=r.heap[1],r.heap[--r.heap_max]=s,r.heap[--r.heap_max]=u,o[2*l]=o[2*s]+o[2*u],r.depth[l]=Math.max(r.depth[s],r.depth[u])+1,o[2*s+1]=o[2*u+1]=l,r.heap[1]=l++,r.pqdownheap(o,1)}while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],function(t){const r=e.dyn_tree,o=e.stat_desc.static_tree,a=e.stat_desc.extra_bits,i=e.stat_desc.extra_base,s=e.stat_desc.max_length;let u,l,d,p,f,g,m=0;for(p=0;p<=n;p++)t.bl_count[p]=0;for(r[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<c;u++)l=t.heap[u],p=r[2*r[2*l+1]+1]+1,p>s&&(p=s,m++),r[2*l+1]=p,l>e.max_code||(t.bl_count[p]++,f=0,l>=i&&(f=a[l-i]),g=r[2*l],t.opt_len+=g*(p+f),o&&(t.static_len+=g*(o[2*l+1]+f)));if(0!==m){do{for(p=s-1;0===t.bl_count[p];)p--;t.bl_count[p]--,t.bl_count[p+1]+=2,t.bl_count[s]--,m-=2}while(m>0);for(p=s;0!==p;p--)for(l=t.bl_count[p];0!==l;)d=t.heap[--u],d>e.max_code||(r[2*d+1]!=p&&(t.opt_len+=(p-r[2*d+1])*r[2*d],r[2*d+1]=p),l--)}}(r),function(e,r,o){const a=[];let i,s,c,u=0;for(i=1;i<=n;i++)a[i]=u=u+o[i-1]<<1;for(s=0;s<=r;s++)c=e[2*s+1],0!==c&&(e[2*s]=t(a[c]++,c))}(o,e.max_code,r.bl_count)}}function R(e,t,r,n,o){const a=this;a.static_tree=e,a.extra_bits=t,a.extra_base=r,a.elems=n,a.max_length=o}N._length_code=[0,1,2,3,4,5,6,7].concat(...O([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),N.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],N.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],N.d_code=function(e){return e<256?P[e]:P[256+(e>>>7)]},N.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],R.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],R.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],R.static_l_desc=new R(R.static_ltree,N.extra_lbits,i+1,s,n),R.static_d_desc=new R(R.static_dtree,N.extra_dbits,0,o,n),R.static_bl_desc=new R(null,N.extra_blbits,0,a,7);const U=9,L=8;function M(e,t,r,n,o){const a=this;a.good_length=e,a.max_lazy=t,a.nice_length=r,a.max_chain=n,a.func=o}const k=0,B=1,F=2,x=[new M(0,0,0,0,k),new M(4,4,8,4,B),new M(4,5,16,8,B),new M(4,6,32,32,B),new M(4,4,16,16,F),new M(8,16,32,32,F),new M(8,16,128,128,F),new M(8,32,128,256,F),new M(32,128,258,1024,F),new M(32,258,258,4096,F)],G=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],j=0,K=1,$=2,V=3,H=32,W=42,z=113,q=666,Y=8,Q=0,Z=1,X=2,J=3,ee=258,te=ee+J+1;function re(e,t,r,n){const o=e[2*t],a=e[2*r];return o<a||o==a&&n[t]<=n[r]}function ne(){const e=this;let t,r,n,c,O,D,P,M,ne,oe,ae,ie,se,ce,ue,le,de,pe,fe,ge,me,he,ye,Se,ve,Ee,Ae,_e,be,Te,Ie,we,Ce;const Oe=new N,De=new N,Pe=new N;let Ne,Re,Ue,Le,Me,ke,Be,Fe;function xe(){let t;for(t=0;t<s;t++)Ie[2*t]=0;for(t=0;t<o;t++)we[2*t]=0;for(t=0;t<a;t++)Ce[2*t]=0;Ie[2*u]=1,e.opt_len=e.static_len=0,Ue=Me=0}function Ge(e,t){let r,n=-1,o=e[1],a=0,i=7,s=4;0===o&&(i=138,s=3),e[2*(t+1)+1]=65535;for(let c=0;c<=t;c++)r=o,o=e[2*(c+1)+1],++a<i&&r==o||(a<s?Ce[2*r]+=a:0!==r?(r!=n&&Ce[2*r]++,Ce[2*l]++):a<=10?Ce[2*d]++:Ce[2*p]++,a=0,n=r,0===o?(i=138,s=3):r==o?(i=6,s=3):(i=7,s=4))}function je(t){e.pending_buf[e.pending++]=t}function Ke(e){je(255&e),je(e>>>8&255)}function $e(e,t){let r;const n=t;Fe>f-n?(r=e,Be|=r<<Fe&65535,Ke(Be),Be=r>>>f-Fe,Fe+=n-f):(Be|=e<<Fe&65535,Fe+=n)}function Ve(e,t){const r=2*e;$e(65535&t[r],65535&t[r+1])}function He(e,t){let r,n,o=-1,a=e[1],i=0,s=7,c=4;for(0===a&&(s=138,c=3),r=0;r<=t;r++)if(n=a,a=e[2*(r+1)+1],!(++i<s&&n==a)){if(i<c)do{Ve(n,Ce)}while(0!=--i);else 0!==n?(n!=o&&(Ve(n,Ce),i--),Ve(l,Ce),$e(i-3,2)):i<=10?(Ve(d,Ce),$e(i-3,3)):(Ve(p,Ce),$e(i-11,7));i=0,o=n,0===a?(s=138,c=3):n==a?(s=6,c=3):(s=7,c=4)}}function We(){16==Fe?(Ke(Be),Be=0,Fe=0):Fe>=8&&(je(255&Be),Be>>>=8,Fe-=8)}function ze(t,r){let n,a,s;if(e.pending_buf[Le+2*Ue]=t>>>8&255,e.pending_buf[Le+2*Ue+1]=255&t,e.pending_buf[Ne+Ue]=255&r,Ue++,0===t?Ie[2*r]++:(Me++,t--,Ie[2*(N._length_code[r]+i+1)]++,we[2*N.d_code(t)]++),0==(8191&Ue)&&Ae>2){for(n=8*Ue,a=me-de,s=0;s<o;s++)n+=we[2*s]*(5+N.extra_dbits[s]);if(n>>>=3,Me<Math.floor(Ue/2)&&n<Math.floor(a/2))return!0}return Ue==Re-1}function qe(t,r){let n,o,a,s,c=0;if(0!==Ue)do{n=e.pending_buf[Le+2*c]<<8&65280|255&e.pending_buf[Le+2*c+1],o=255&e.pending_buf[Ne+c],c++,0===n?Ve(o,t):(a=N._length_code[o],Ve(a+i+1,t),s=N.extra_lbits[a],0!==s&&(o-=N.base_length[a],$e(o,s)),n--,a=N.d_code(n),Ve(a,r),s=N.extra_dbits[a],0!==s&&(n-=N.base_dist[a],$e(n,s)))}while(c<Ue);Ve(u,t),ke=t[2*u+1]}function Ye(){Fe>8?Ke(Be):Fe>0&&je(255&Be),Be=0,Fe=0}function Qe(t,r,n){$e((Q<<1)+(n?1:0),3),function(t,r,n){Ye(),ke=8,Ke(r),Ke(~r),e.pending_buf.set(M.subarray(t,t+r),e.pending),e.pending+=r}(t,r)}function Ze(t,r,n){let o,i,s=0;Ae>0?(Oe.build_tree(e),De.build_tree(e),s=function(){let t;for(Ge(Ie,Oe.max_code),Ge(we,De.max_code),Pe.build_tree(e),t=a-1;t>=3&&0===Ce[2*N.bl_order[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(),o=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=o&&(o=i)):o=i=r+5,r+4<=o&&-1!=t?Qe(t,r,n):i==o?($e((Z<<1)+(n?1:0),3),qe(R.static_ltree,R.static_dtree)):($e((X<<1)+(n?1:0),3),function(e,t,r){let n;for($e(e-257,5),$e(t-1,5),$e(r-4,4),n=0;n<r;n++)$e(Ce[2*N.bl_order[n]+1],3);He(Ie,e-1),He(we,t-1)}(Oe.max_code+1,De.max_code+1,s+1),qe(Ie,we)),xe(),n&&Ye()}function Xe(e){Ze(de>=0?de:-1,me-de,e),de=me,t.flush_pending()}function Je(){let e,r,n,o;do{if(o=ne-ye-me,0===o&&0===me&&0===ye)o=O;else if(-1==o)o--;else if(me>=O+O-te){M.set(M.subarray(O,O+O),0),he-=O,me-=O,de-=O,e=se,n=e;do{r=65535&ae[--n],ae[n]=r>=O?r-O:0}while(0!=--e);e=O,n=e;do{r=65535&oe[--n],oe[n]=r>=O?r-O:0}while(0!=--e);o+=O}if(0===t.avail_in)return;e=t.read_buf(M,me+ye,o),ye+=e,ye>=J&&(ie=255&M[me],ie=(ie<<le^255&M[me+1])&ue)}while(ye<te&&0!==t.avail_in)}function et(e){let t,r,n=ve,o=me,a=Se;const i=me>O-te?me-(O-te):0;let s=Te;const c=P,u=me+ee;let l=M[o+a-1],d=M[o+a];Se>=be&&(n>>=2),s>ye&&(s=ye);do{if(t=e,M[t+a]==d&&M[t+a-1]==l&&M[t]==M[o]&&M[++t]==M[o+1]){o+=2,t++;do{}while(M[++o]==M[++t]&&M[++o]==M[++t]&&M[++o]==M[++t]&&M[++o]==M[++t]&&M[++o]==M[++t]&&M[++o]==M[++t]&&M[++o]==M[++t]&&M[++o]==M[++t]&&o<u);if(r=ee-(u-o),o=u-ee,r>a){if(he=e,a=r,r>=s)break;l=M[o+a-1],d=M[o+a]}}}while((e=65535&oe[e&c])>i&&0!=--n);return a<=ye?a:ye}function tt(t){return t.total_in=t.total_out=0,t.msg=null,e.pending=0,e.pending_out=0,r=z,c=S,Oe.dyn_tree=Ie,Oe.stat_desc=R.static_l_desc,De.dyn_tree=we,De.stat_desc=R.static_d_desc,Pe.dyn_tree=Ce,Pe.stat_desc=R.static_bl_desc,Be=0,Fe=0,ke=8,xe(),function(){ne=2*O,ae[se-1]=0;for(let e=0;e<se-1;e++)ae[e]=0;Ee=x[Ae].max_lazy,be=x[Ae].good_length,Te=x[Ae].nice_length,ve=x[Ae].max_chain,me=0,de=0,ye=0,pe=Se=J-1,ge=0,ie=0}(),_}e.depth=[],e.bl_count=[],e.heap=[],Ie=[],we=[],Ce=[],e.pqdownheap=function(t,r){const n=e.heap,o=n[r];let a=r<<1;for(;a<=e.heap_len&&(a<e.heap_len&&re(t,n[a+1],n[a],e.depth)&&a++,!re(t,o,n[a],e.depth));)n[r]=n[a],r=a,a<<=1;n[r]=o},e.deflateInit=function(t,r,o,a,i,s){return a||(a=Y),i||(i=L),s||(s=y),t.msg=null,r==g&&(r=6),i<1||i>U||a!=Y||o<9||o>15||r<0||r>9||s<0||s>h?I:(t.dstate=e,D=o,O=1<<D,P=O-1,ce=i+7,se=1<<ce,ue=se-1,le=Math.floor((ce+J-1)/J),M=new Uint8Array(2*O),oe=[],ae=[],Re=1<<i+6,e.pending_buf=new Uint8Array(4*Re),n=4*Re,Le=Math.floor(Re/2),Ne=3*Re,Ae=r,_e=s,tt(t))},e.deflateEnd=function(){return r!=W&&r!=z&&r!=q?I:(e.pending_buf=null,ae=null,oe=null,M=null,e.dstate=null,r==z?w:_)},e.deflateParams=function(e,t,r){let n=_;return t==g&&(t=6),t<0||t>9||r<0||r>h?I:(x[Ae].func!=x[t].func&&0!==e.total_in&&(n=e.deflate(v)),Ae!=t&&(Ae=t,Ee=x[Ae].max_lazy,be=x[Ae].good_length,Te=x[Ae].nice_length,ve=x[Ae].max_chain),_e=r,n)},e.deflateSetDictionary=function(e,t,n){let o,a=n,i=0;if(!t||r!=W)return I;if(a<J)return _;for(a>O-te&&(a=O-te,i=n-a),M.set(t.subarray(i,i+a),0),me=a,de=a,ie=255&M[0],ie=(ie<<le^255&M[1])&ue,o=0;o<=a-J;o++)ie=(ie<<le^255&M[o+(J-1)])&ue,oe[o&P]=ae[ie],ae[ie]=o;return _},e.deflate=function(o,a){let i,s,l,d,p;if(a>A||a<0)return I;if(!o.next_out||!o.next_in&&0!==o.avail_in||r==q&&a!=A)return o.msg=G[T-I],I;if(0===o.avail_out)return o.msg=G[T-C],C;var f;if(t=o,d=c,c=a,r==W&&(s=Y+(D-8<<4)<<8,l=(Ae-1&255)>>1,l>3&&(l=3),s|=l<<6,0!==me&&(s|=H),s+=31-s%31,r=z,je((f=s)>>8&255),je(255&f)),0!==e.pending){if(t.flush_pending(),0===t.avail_out)return c=-1,_}else if(0===t.avail_in&&a<=d&&a!=A)return t.msg=G[T-C],C;if(r==q&&0!==t.avail_in)return o.msg=G[T-C],C;if(0!==t.avail_in||0!==ye||a!=S&&r!=q){switch(p=-1,x[Ae].func){case k:p=function(e){let r,o=65535;for(o>n-5&&(o=n-5);;){if(ye<=1){if(Je(),0===ye&&e==S)return j;if(0===ye)break}if(me+=ye,ye=0,r=de+o,(0===me||me>=r)&&(ye=me-r,me=r,Xe(!1),0===t.avail_out))return j;if(me-de>=O-te&&(Xe(!1),0===t.avail_out))return j}return Xe(e==A),0===t.avail_out?e==A?$:j:e==A?V:K}(a);break;case B:p=function(e){let r,n=0;for(;;){if(ye<te){if(Je(),ye<te&&e==S)return j;if(0===ye)break}if(ye>=J&&(ie=(ie<<le^255&M[me+(J-1)])&ue,n=65535&ae[ie],oe[me&P]=ae[ie],ae[ie]=me),0!==n&&(me-n&65535)<=O-te&&_e!=h&&(pe=et(n)),pe>=J)if(r=ze(me-he,pe-J),ye-=pe,pe<=Ee&&ye>=J){pe--;do{me++,ie=(ie<<le^255&M[me+(J-1)])&ue,n=65535&ae[ie],oe[me&P]=ae[ie],ae[ie]=me}while(0!=--pe);me++}else me+=pe,pe=0,ie=255&M[me],ie=(ie<<le^255&M[me+1])&ue;else r=ze(0,255&M[me]),ye--,me++;if(r&&(Xe(!1),0===t.avail_out))return j}return Xe(e==A),0===t.avail_out?e==A?$:j:e==A?V:K}(a);break;case F:p=function(e){let r,n,o=0;for(;;){if(ye<te){if(Je(),ye<te&&e==S)return j;if(0===ye)break}if(ye>=J&&(ie=(ie<<le^255&M[me+(J-1)])&ue,o=65535&ae[ie],oe[me&P]=ae[ie],ae[ie]=me),Se=pe,fe=he,pe=J-1,0!==o&&Se<Ee&&(me-o&65535)<=O-te&&(_e!=h&&(pe=et(o)),pe<=5&&(_e==m||pe==J&&me-he>4096)&&(pe=J-1)),Se>=J&&pe<=Se){n=me+ye-J,r=ze(me-1-fe,Se-J),ye-=Se-1,Se-=2;do{++me<=n&&(ie=(ie<<le^255&M[me+(J-1)])&ue,o=65535&ae[ie],oe[me&P]=ae[ie],ae[ie]=me)}while(0!=--Se);if(ge=0,pe=J-1,me++,r&&(Xe(!1),0===t.avail_out))return j}else if(0!==ge){if(r=ze(0,255&M[me-1]),r&&Xe(!1),me++,ye--,0===t.avail_out)return j}else ge=1,me++,ye--}return 0!==ge&&(r=ze(0,255&M[me-1]),ge=0),Xe(e==A),0===t.avail_out?e==A?$:j:e==A?V:K}(a)}if(p!=$&&p!=V||(r=q),p==j||p==$)return 0===t.avail_out&&(c=-1),_;if(p==K){if(a==v)$e(Z<<1,3),Ve(u,R.static_ltree),We(),1+ke+10-Fe<9&&($e(Z<<1,3),Ve(u,R.static_ltree),We()),ke=7;else if(Qe(0,0,!1),a==E)for(i=0;i<se;i++)ae[i]=0;if(t.flush_pending(),0===t.avail_out)return c=-1,_}}return a!=A?_:b}}function oe(){const e=this;e.next_in_index=0,e.next_out_index=0,e.avail_in=0,e.total_in=0,e.avail_out=0,e.total_out=0}oe.prototype={deflateInit:function(e,t){const r=this;return r.dstate=new ne,t||(t=n),r.dstate.deflateInit(r,e,t)},deflate:function(e){const t=this;return t.dstate?t.dstate.deflate(t,e):I},deflateEnd:function(){const e=this;if(!e.dstate)return I;const t=e.dstate.deflateEnd();return e.dstate=null,t},deflateParams:function(e,t){const r=this;return r.dstate?r.dstate.deflateParams(r,e,t):I},deflateSetDictionary:function(e,t){const r=this;return r.dstate?r.dstate.deflateSetDictionary(r,e,t):I},read_buf:function(e,t,r){const n=this;let o=n.avail_in;return o>r&&(o=r),0===o?0:(n.avail_in-=o,e.set(n.next_in.subarray(n.next_in_index,n.next_in_index+o),t),n.next_in_index+=o,n.total_in+=o,o)},flush_pending:function(){const e=this;let t=e.dstate.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(e.next_out.set(e.dstate.pending_buf.subarray(e.dstate.pending_out,e.dstate.pending_out+t),e.next_out_index),e.next_out_index+=t,e.dstate.pending_out+=t,e.total_out+=t,e.avail_out-=t,e.dstate.pending-=t,0===e.dstate.pending&&(e.dstate.pending_out=0))}};const ae=0,ie=1,se=2,ce=-2,ue=-3,le=-4,de=-5,pe=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],fe=1440,ge=4,me=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],he=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],ye=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Se=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],ve=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ae=15;function _e(){let e,t,r,n,o,a;function i(e,t,i,s,c,u,l,d,p,f,g){let m,h,y,S,v,E,A,_,b,T,I,w,C,O,D;T=0,v=i;do{r[e[t+T]]++,T++,v--}while(0!==v);if(r[0]==i)return l[0]=-1,d[0]=0,ae;for(_=d[0],E=1;E<=Ae&&0===r[E];E++);for(A=E,_<E&&(_=E),v=Ae;0!==v&&0===r[v];v--);for(y=v,_>v&&(_=v),d[0]=_,O=1<<E;E<v;E++,O<<=1)if((O-=r[E])<0)return ue;if((O-=r[v])<0)return ue;for(r[v]+=O,a[1]=E=0,T=1,C=2;0!=--v;)a[C]=E+=r[T],C++,T++;v=0,T=0;do{0!==(E=e[t+T])&&(g[a[E]++]=v),T++}while(++v<i);for(i=a[y],a[0]=v=0,T=0,S=-1,w=-_,o[0]=0,I=0,D=0;A<=y;A++)for(m=r[A];0!=m--;){for(;A>w+_;){if(S++,w+=_,D=y-w,D=D>_?_:D,(h=1<<(E=A-w))>m+1&&(h-=m+1,C=A,E<D))for(;++E<D&&!((h<<=1)<=r[++C]);)h-=r[C];if(D=1<<E,f[0]+D>fe)return ue;o[S]=I=f[0],f[0]+=D,0!==S?(a[S]=v,n[0]=E,n[1]=_,E=v>>>w-_,n[2]=I-o[S-1]-E,p.set(n,3*(o[S-1]+E))):l[0]=I}for(n[1]=A-w,T>=i?n[0]=192:g[T]<s?(n[0]=g[T]<256?0:96,n[2]=g[T++]):(n[0]=u[g[T]-s]+16+64,n[2]=c[g[T++]-s]),h=1<<A-w,E=v>>>w;E<D;E+=h)p.set(n,3*(I+E));for(E=1<<A-1;0!=(v&E);E>>>=1)v^=E;for(v^=E,b=(1<<w)-1;(v&b)!=a[S];)S--,w-=_,b=(1<<w)-1}return 0!==O&&1!=y?de:ae}function s(i){let s;for(e||(e=[],t=[],r=new Int32Array(Ae+1),n=[],o=new Int32Array(Ae),a=new Int32Array(Ae+1)),t.length<i&&(t=[]),s=0;s<i;s++)t[s]=0;for(s=0;s<Ae+1;s++)r[s]=0;for(s=0;s<3;s++)n[s]=0;o.set(r.subarray(0,Ae),0),a.set(r.subarray(0,Ae+1),0)}this.inflate_trees_bits=function(r,n,o,a,c){let u;return s(19),e[0]=0,u=i(r,0,19,19,null,null,o,n,a,e,t),u==ue?c.msg="oversubscribed dynamic bit lengths tree":u!=de&&0!==n[0]||(c.msg="incomplete dynamic bit lengths tree",u=ue),u},this.inflate_trees_dynamic=function(r,n,o,a,c,u,l,d,p){let f;return s(288),e[0]=0,f=i(o,0,r,257,ye,Se,u,a,d,e,t),f!=ae||0===a[0]?(f==ue?p.msg="oversubscribed literal/length tree":f!=le&&(p.msg="incomplete literal/length tree",f=ue),f):(s(288),f=i(o,r,n,0,ve,Ee,l,c,d,e,t),f!=ae||0===c[0]&&r>257?(f==ue?p.msg="oversubscribed distance tree":f==de?(p.msg="incomplete distance tree",f=ue):f!=le&&(p.msg="empty distance tree with lengths",f=ue),f):ae)}}_e.inflate_trees_fixed=function(e,t,r,n){return e[0]=9,t[0]=5,r[0]=me,n[0]=he,ae};const be=0,Te=1,Ie=2,we=3,Ce=4,Oe=5,De=6,Pe=7,Ne=8,Re=9;function Ue(){const e=this;let t,r,n,o,a=0,i=0,s=0,c=0,u=0,l=0,d=0,p=0,f=0,g=0;function m(e,t,r,n,o,a,i,s){let c,u,l,d,p,f,g,m,h,y,S,v,E,A,_,b;g=s.next_in_index,m=s.avail_in,p=i.bitb,f=i.bitk,h=i.write,y=h<i.read?i.read-h-1:i.end-h,S=pe[e],v=pe[t];do{for(;f<20;)m--,p|=(255&s.read_byte(g++))<<f,f+=8;if(c=p&S,u=r,l=n,b=3*(l+c),0!==(d=u[b]))for(;;){if(p>>=u[b+1],f-=u[b+1],0!=(16&d)){for(d&=15,E=u[b+2]+(p&pe[d]),p>>=d,f-=d;f<15;)m--,p|=(255&s.read_byte(g++))<<f,f+=8;for(c=p&v,u=o,l=a,b=3*(l+c),d=u[b];;){if(p>>=u[b+1],f-=u[b+1],0!=(16&d)){for(d&=15;f<d;)m--,p|=(255&s.read_byte(g++))<<f,f+=8;if(A=u[b+2]+(p&pe[d]),p>>=d,f-=d,y-=E,h>=A)_=h-A,h-_>0&&2>h-_?(i.window[h++]=i.window[_++],i.window[h++]=i.window[_++],E-=2):(i.window.set(i.window.subarray(_,_+2),h),h+=2,_+=2,E-=2);else{_=h-A;do{_+=i.end}while(_<0);if(d=i.end-_,E>d){if(E-=d,h-_>0&&d>h-_)do{i.window[h++]=i.window[_++]}while(0!=--d);else i.window.set(i.window.subarray(_,_+d),h),h+=d,_+=d,d=0;_=0}}if(h-_>0&&E>h-_)do{i.window[h++]=i.window[_++]}while(0!=--E);else i.window.set(i.window.subarray(_,_+E),h),h+=E,_+=E,E=0;break}if(0!=(64&d))return s.msg="invalid distance code",E=s.avail_in-m,E=f>>3<E?f>>3:E,m+=E,g-=E,f-=E<<3,i.bitb=p,i.bitk=f,s.avail_in=m,s.total_in+=g-s.next_in_index,s.next_in_index=g,i.write=h,ue;c+=u[b+2],c+=p&pe[d],b=3*(l+c),d=u[b]}break}if(0!=(64&d))return 0!=(32&d)?(E=s.avail_in-m,E=f>>3<E?f>>3:E,m+=E,g-=E,f-=E<<3,i.bitb=p,i.bitk=f,s.avail_in=m,s.total_in+=g-s.next_in_index,s.next_in_index=g,i.write=h,ie):(s.msg="invalid literal/length code",E=s.avail_in-m,E=f>>3<E?f>>3:E,m+=E,g-=E,f-=E<<3,i.bitb=p,i.bitk=f,s.avail_in=m,s.total_in+=g-s.next_in_index,s.next_in_index=g,i.write=h,ue);if(c+=u[b+2],c+=p&pe[d],b=3*(l+c),0===(d=u[b])){p>>=u[b+1],f-=u[b+1],i.window[h++]=u[b+2],y--;break}}else p>>=u[b+1],f-=u[b+1],i.window[h++]=u[b+2],y--}while(y>=258&&m>=10);return E=s.avail_in-m,E=f>>3<E?f>>3:E,m+=E,g-=E,f-=E<<3,i.bitb=p,i.bitk=f,s.avail_in=m,s.total_in+=g-s.next_in_index,s.next_in_index=g,i.write=h,ae}e.init=function(e,a,i,s,c,u){t=be,d=e,p=a,n=i,f=s,o=c,g=u,r=null},e.proc=function(e,h,y){let S,v,E,A,_,b,T,I=0,w=0,C=0;for(C=h.next_in_index,A=h.avail_in,I=e.bitb,w=e.bitk,_=e.write,b=_<e.read?e.read-_-1:e.end-_;;)switch(t){case be:if(b>=258&&A>=10&&(e.bitb=I,e.bitk=w,h.avail_in=A,h.total_in+=C-h.next_in_index,h.next_in_index=C,e.write=_,y=m(d,p,n,f,o,g,e,h),C=h.next_in_index,A=h.avail_in,I=e.bitb,w=e.bitk,_=e.write,b=_<e.read?e.read-_-1:e.end-_,y!=ae)){t=y==ie?Pe:Re;break}s=d,r=n,i=f,t=Te;case Te:for(S=s;w<S;){if(0===A)return e.bitb=I,e.bitk=w,h.avail_in=A,h.total_in+=C-h.next_in_index,h.next_in_index=C,e.write=_,e.inflate_flush(h,y);y=ae,A--,I|=(255&h.read_byte(C++))<<w,w+=8}if(v=3*(i+(I&pe[S])),I>>>=r[v+1],w-=r[v+1],E=r[v],0===E){c=r[v+2],t=De;break}if(0!=(16&E)){u=15&E,a=r[v+2],t=Ie;break}if(0==(64&E)){s=E,i=v/3+r[v+2];break}if(0!=(32&E)){t=Pe;break}return t=Re,h.msg="invalid literal/length code",y=ue,e.bitb=I,e.bitk=w,h.avail_in=A,h.total_in+=C-h.next_in_index,h.next_in_index=C,e.write=_,e.inflate_flush(h,y);case Ie:for(S=u;w<S;){if(0===A)return e.bitb=I,e.bitk=w,h.avail_in=A,h.total_in+=C-h.next_in_index,h.next_in_index=C,e.write=_,e.inflate_flush(h,y);y=ae,A--,I|=(255&h.read_byte(C++))<<w,w+=8}a+=I&pe[S],I>>=S,w-=S,s=p,r=o,i=g,t=we;case we:for(S=s;w<S;){if(0===A)return e.bitb=I,e.bitk=w,h.avail_in=A,h.total_in+=C-h.next_in_index,h.next_in_index=C,e.write=_,e.inflate_flush(h,y);y=ae,A--,I|=(255&h.read_byte(C++))<<w,w+=8}if(v=3*(i+(I&pe[S])),I>>=r[v+1],w-=r[v+1],E=r[v],0!=(16&E)){u=15&E,l=r[v+2],t=Ce;break}if(0==(64&E)){s=E,i=v/3+r[v+2];break}return t=Re,h.msg="invalid distance code",y=ue,e.bitb=I,e.bitk=w,h.avail_in=A,h.total_in+=C-h.next_in_index,h.next_in_index=C,e.write=_,e.inflate_flush(h,y);case Ce:for(S=u;w<S;){if(0===A)return e.bitb=I,e.bitk=w,h.avail_in=A,h.total_in+=C-h.next_in_index,h.next_in_index=C,e.write=_,e.inflate_flush(h,y);y=ae,A--,I|=(255&h.read_byte(C++))<<w,w+=8}l+=I&pe[S],I>>=S,w-=S,t=Oe;case Oe:for(T=_-l;T<0;)T+=e.end;for(;0!==a;){if(0===b&&(_==e.end&&0!==e.read&&(_=0,b=_<e.read?e.read-_-1:e.end-_),0===b&&(e.write=_,y=e.inflate_flush(h,y),_=e.write,b=_<e.read?e.read-_-1:e.end-_,_==e.end&&0!==e.read&&(_=0,b=_<e.read?e.read-_-1:e.end-_),0===b)))return e.bitb=I,e.bitk=w,h.avail_in=A,h.total_in+=C-h.next_in_index,h.next_in_index=C,e.write=_,e.inflate_flush(h,y);e.window[_++]=e.window[T++],b--,T==e.end&&(T=0),a--}t=be;break;case De:if(0===b&&(_==e.end&&0!==e.read&&(_=0,b=_<e.read?e.read-_-1:e.end-_),0===b&&(e.write=_,y=e.inflate_flush(h,y),_=e.write,b=_<e.read?e.read-_-1:e.end-_,_==e.end&&0!==e.read&&(_=0,b=_<e.read?e.read-_-1:e.end-_),0===b)))return e.bitb=I,e.bitk=w,h.avail_in=A,h.total_in+=C-h.next_in_index,h.next_in_index=C,e.write=_,e.inflate_flush(h,y);y=ae,e.window[_++]=c,b--,t=be;break;case Pe:if(w>7&&(w-=8,A++,C--),e.write=_,y=e.inflate_flush(h,y),_=e.write,b=_<e.read?e.read-_-1:e.end-_,e.read!=e.write)return e.bitb=I,e.bitk=w,h.avail_in=A,h.total_in+=C-h.next_in_index,h.next_in_index=C,e.write=_,e.inflate_flush(h,y);t=Ne;case Ne:return y=ie,e.bitb=I,e.bitk=w,h.avail_in=A,h.total_in+=C-h.next_in_index,h.next_in_index=C,e.write=_,e.inflate_flush(h,y);case Re:return y=ue,e.bitb=I,e.bitk=w,h.avail_in=A,h.total_in+=C-h.next_in_index,h.next_in_index=C,e.write=_,e.inflate_flush(h,y);default:return y=ce,e.bitb=I,e.bitk=w,h.avail_in=A,h.total_in+=C-h.next_in_index,h.next_in_index=C,e.write=_,e.inflate_flush(h,y)}},e.free=function(){}}const Le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Me=0,ke=1,Be=2,Fe=3,xe=4,Ge=5,je=6,Ke=7,$e=8,Ve=9;function He(e,t){const r=this;let n,o=Me,a=0,i=0,s=0;const c=[0],u=[0],l=new Ue;let d=0,p=new Int32Array(3*fe);const f=new _e;r.bitk=0,r.bitb=0,r.window=new Uint8Array(t),r.end=t,r.read=0,r.write=0,r.reset=function(e,t){t&&(t[0]=0),o==je&&l.free(e),o=Me,r.bitk=0,r.bitb=0,r.read=r.write=0},r.reset(e,null),r.inflate_flush=function(e,t){let n,o,a;return o=e.next_out_index,a=r.read,n=(a<=r.write?r.write:r.end)-a,n>e.avail_out&&(n=e.avail_out),0!==n&&t==de&&(t=ae),e.avail_out-=n,e.total_out+=n,e.next_out.set(r.window.subarray(a,a+n),o),o+=n,a+=n,a==r.end&&(a=0,r.write==r.end&&(r.write=0),n=r.write-a,n>e.avail_out&&(n=e.avail_out),0!==n&&t==de&&(t=ae),e.avail_out-=n,e.total_out+=n,e.next_out.set(r.window.subarray(a,a+n),o),o+=n,a+=n),e.next_out_index=o,r.read=a,t},r.proc=function(e,t){let g,m,h,y,S,v,E,A;for(y=e.next_in_index,S=e.avail_in,m=r.bitb,h=r.bitk,v=r.write,E=v<r.read?r.read-v-1:r.end-v;;){let _,b,T,I,w,C,O,D;switch(o){case Me:for(;h<3;){if(0===S)return r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t);t=ae,S--,m|=(255&e.read_byte(y++))<<h,h+=8}switch(g=7&m,d=1&g,g>>>1){case 0:m>>>=3,h-=3,g=7&h,m>>>=g,h-=g,o=ke;break;case 1:_=[],b=[],T=[[]],I=[[]],_e.inflate_trees_fixed(_,b,T,I),l.init(_[0],b[0],T[0],0,I[0],0),m>>>=3,h-=3,o=je;break;case 2:m>>>=3,h-=3,o=Fe;break;case 3:return m>>>=3,h-=3,o=Ve,e.msg="invalid block type",t=ue,r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t)}break;case ke:for(;h<32;){if(0===S)return r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t);t=ae,S--,m|=(255&e.read_byte(y++))<<h,h+=8}if((~m>>>16&65535)!=(65535&m))return o=Ve,e.msg="invalid stored block lengths",t=ue,r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t);a=65535&m,m=h=0,o=0!==a?Be:0!==d?Ke:Me;break;case Be:if(0===S)return r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t);if(0===E&&(v==r.end&&0!==r.read&&(v=0,E=v<r.read?r.read-v-1:r.end-v),0===E&&(r.write=v,t=r.inflate_flush(e,t),v=r.write,E=v<r.read?r.read-v-1:r.end-v,v==r.end&&0!==r.read&&(v=0,E=v<r.read?r.read-v-1:r.end-v),0===E)))return r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t);if(t=ae,g=a,g>S&&(g=S),g>E&&(g=E),r.window.set(e.read_buf(y,g),v),y+=g,S-=g,v+=g,E-=g,0!=(a-=g))break;o=0!==d?Ke:Me;break;case Fe:for(;h<14;){if(0===S)return r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t);t=ae,S--,m|=(255&e.read_byte(y++))<<h,h+=8}if(i=g=16383&m,(31&g)>29||(g>>5&31)>29)return o=Ve,e.msg="too many length or distance symbols",t=ue,r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t);if(g=258+(31&g)+(g>>5&31),!n||n.length<g)n=[];else for(A=0;A<g;A++)n[A]=0;m>>>=14,h-=14,s=0,o=xe;case xe:for(;s<4+(i>>>10);){for(;h<3;){if(0===S)return r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t);t=ae,S--,m|=(255&e.read_byte(y++))<<h,h+=8}n[Le[s++]]=7&m,m>>>=3,h-=3}for(;s<19;)n[Le[s++]]=0;if(c[0]=7,g=f.inflate_trees_bits(n,c,u,p,e),g!=ae)return(t=g)==ue&&(n=null,o=Ve),r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t);s=0,o=Ge;case Ge:for(;g=i,!(s>=258+(31&g)+(g>>5&31));){let a,l;for(g=c[0];h<g;){if(0===S)return r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t);t=ae,S--,m|=(255&e.read_byte(y++))<<h,h+=8}if(g=p[3*(u[0]+(m&pe[g]))+1],l=p[3*(u[0]+(m&pe[g]))+2],l<16)m>>>=g,h-=g,n[s++]=l;else{for(A=18==l?7:l-14,a=18==l?11:3;h<g+A;){if(0===S)return r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t);t=ae,S--,m|=(255&e.read_byte(y++))<<h,h+=8}if(m>>>=g,h-=g,a+=m&pe[A],m>>>=A,h-=A,A=s,g=i,A+a>258+(31&g)+(g>>5&31)||16==l&&A<1)return n=null,o=Ve,e.msg="invalid bit length repeat",t=ue,r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t);l=16==l?n[A-1]:0;do{n[A++]=l}while(0!=--a);s=A}}if(u[0]=-1,w=[],C=[],O=[],D=[],w[0]=9,C[0]=6,g=i,g=f.inflate_trees_dynamic(257+(31&g),1+(g>>5&31),n,w,C,O,D,p,e),g!=ae)return g==ue&&(n=null,o=Ve),t=g,r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t);l.init(w[0],C[0],p,O[0],p,D[0]),o=je;case je:if(r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,(t=l.proc(r,e,t))!=ie)return r.inflate_flush(e,t);if(t=ae,l.free(e),y=e.next_in_index,S=e.avail_in,m=r.bitb,h=r.bitk,v=r.write,E=v<r.read?r.read-v-1:r.end-v,0===d){o=Me;break}o=Ke;case Ke:if(r.write=v,t=r.inflate_flush(e,t),v=r.write,E=v<r.read?r.read-v-1:r.end-v,r.read!=r.write)return r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t);o=$e;case $e:return t=ie,r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t);case Ve:return t=ue,r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t);default:return t=ce,r.bitb=m,r.bitk=h,e.avail_in=S,e.total_in+=y-e.next_in_index,e.next_in_index=y,r.write=v,r.inflate_flush(e,t)}}},r.free=function(e){r.reset(e,null),r.window=null,p=null},r.set_dictionary=function(e,t,n){r.window.set(e.subarray(t,t+n),0),r.read=r.write=n},r.sync_point=function(){return o==ke?1:0}}const We=32,ze=8,qe=0,Ye=1,Qe=2,Ze=3,Xe=4,Je=5,et=6,tt=7,rt=12,nt=13,ot=[0,0,255,255];function at(){const e=this;function t(e){return e&&e.istate?(e.total_in=e.total_out=0,e.msg=null,e.istate.mode=tt,e.istate.blocks.reset(e,null),ae):ce}e.mode=0,e.method=0,e.was=[0],e.need=0,e.marker=0,e.wbits=0,e.inflateEnd=function(t){return e.blocks&&e.blocks.free(t),e.blocks=null,ae},e.inflateInit=function(r,n){return r.msg=null,e.blocks=null,n<8||n>15?(e.inflateEnd(r),ce):(e.wbits=n,r.istate.blocks=new He(r,1<<n),t(r),ae)},e.inflate=function(e,t){let r,n;if(!e||!e.istate||!e.next_in)return ce;const o=e.istate;for(t=t==ge?de:ae,r=de;;)switch(o.mode){case qe:if(0===e.avail_in)return r;if(r=t,e.avail_in--,e.total_in++,(15&(o.method=e.read_byte(e.next_in_index++)))!=ze){o.mode=nt,e.msg="unknown compression method",o.marker=5;break}if(8+(o.method>>4)>o.wbits){o.mode=nt,e.msg="invalid window size",o.marker=5;break}o.mode=Ye;case Ye:if(0===e.avail_in)return r;if(r=t,e.avail_in--,e.total_in++,n=255&e.read_byte(e.next_in_index++),((o.method<<8)+n)%31!=0){o.mode=nt,e.msg="incorrect header check",o.marker=5;break}if(0==(n&We)){o.mode=tt;break}o.mode=Qe;case Qe:if(0===e.avail_in)return r;r=t,e.avail_in--,e.total_in++,o.need=(255&e.read_byte(e.next_in_index++))<<24&4278190080,o.mode=Ze;case Ze:if(0===e.avail_in)return r;r=t,e.avail_in--,e.total_in++,o.need+=(255&e.read_byte(e.next_in_index++))<<16&16711680,o.mode=Xe;case Xe:if(0===e.avail_in)return r;r=t,e.avail_in--,e.total_in++,o.need+=(255&e.read_byte(e.next_in_index++))<<8&65280,o.mode=Je;case Je:return 0===e.avail_in?r:(r=t,e.avail_in--,e.total_in++,o.need+=255&e.read_byte(e.next_in_index++),o.mode=et,se);case et:return o.mode=nt,e.msg="need dictionary",o.marker=0,ce;case tt:if(r=o.blocks.proc(e,r),r==ue){o.mode=nt,o.marker=0;break}if(r==ae&&(r=t),r!=ie)return r;r=t,o.blocks.reset(e,o.was),o.mode=rt;case rt:return ie;case nt:return ue;default:return ce}},e.inflateSetDictionary=function(e,t,r){let n=0,o=r;if(!e||!e.istate||e.istate.mode!=et)return ce;const a=e.istate;return o>=1<<a.wbits&&(o=(1<<a.wbits)-1,n=r-o),a.blocks.set_dictionary(t,n,o),a.mode=tt,ae},e.inflateSync=function(e){let r,n,o,a,i;if(!e||!e.istate)return ce;const s=e.istate;if(s.mode!=nt&&(s.mode=nt,s.marker=0),0===(r=e.avail_in))return de;for(n=e.next_in_index,o=s.marker;0!==r&&o<4;)e.read_byte(n)==ot[o]?o++:o=0!==e.read_byte(n)?0:4-o,n++,r--;return e.total_in+=n-e.next_in_index,e.next_in_index=n,e.avail_in=r,s.marker=o,4!=o?ue:(a=e.total_in,i=e.total_out,t(e),e.total_in=a,e.total_out=i,s.mode=tt,ae)},e.inflateSyncPoint=function(e){return e&&e.istate&&e.istate.blocks?e.istate.blocks.sync_point():ce}}function it(){}it.prototype={inflateInit:function(e){const t=this;return t.istate=new at,e||(e=15),t.istate.inflateInit(t,e)},inflate:function(e){const t=this;return t.istate?t.istate.inflate(t,e):ce},inflateEnd:function(){const e=this;if(!e.istate)return ce;const t=e.istate.inflateEnd(e);return e.istate=null,t},inflateSync:function(){const e=this;return e.istate?e.istate.inflateSync(e):ce},inflateSetDictionary:function(e,t){const r=this;return r.istate?r.istate.inflateSetDictionary(r,e,t):ce},read_byte:function(e){return this.next_in[e]},read_buf:function(e,t){return this.next_in.subarray(e,e+t)}};const st={chunkSize:524288,maxWorkers:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||2,terminateWorkerTimeout:5e3,useWebWorkers:!0,workerScripts:void 0},ct=Object.assign({},st);function ut(){return ct}function lt(e){if(void 0!==e.chunkSize&&(ct.chunkSize=e.chunkSize),void 0!==e.maxWorkers&&(ct.maxWorkers=e.maxWorkers),void 0!==e.terminateWorkerTimeout&&(ct.terminateWorkerTimeout=e.terminateWorkerTimeout),void 0!==e.useWebWorkers&&(ct.useWebWorkers=e.useWebWorkers),void 0!==e.Deflate&&(ct.Deflate=e.Deflate),void 0!==e.Inflate&&(ct.Inflate=e.Inflate),void 0!==e.workerScripts){if(e.workerScripts.deflate){if(!Array.isArray(e.workerScripts.deflate))throw new Error("workerScripts.deflate must be an array");ct.workerScripts||(ct.workerScripts={}),ct.workerScripts.deflate=e.workerScripts.deflate}if(e.workerScripts.inflate){if(!Array.isArray(e.workerScripts.inflate))throw new Error("workerScripts.inflate must be an array");ct.workerScripts||(ct.workerScripts={}),ct.workerScripts.inflate=e.workerScripts.inflate}}}const dt={application:{"andrew-inset":"ez",annodex:"anx","atom+xml":"atom","atomcat+xml":"atomcat","atomserv+xml":"atomsrv",bbolin:"lin",cap:["cap","pcap"],"cu-seeme":"cu","davmount+xml":"davmount",dsptype:"tsp",ecmascript:["es","ecma"],futuresplash:"spl",hta:"hta","java-archive":"jar","java-serialized-object":"ser","java-vm":"class",javascript:"js",m3g:"m3g","mac-binhex40":"hqx",mathematica:["nb","ma","mb"],msaccess:"mdb",msword:["doc","dot"],mxf:"mxf",oda:"oda",ogg:"ogx",pdf:"pdf","pgp-keys":"key","pgp-signature":["asc","sig"],"pics-rules":"prf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],rar:"rar","rdf+xml":"rdf","rss+xml":"rss",rtf:"rtf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd"],"xspf+xml":"xspf",zip:"zip","vnd.android.package-archive":"apk","vnd.cinderella":"cdy","vnd.google-earth.kml+xml":"kml","vnd.google-earth.kmz":"kmz","vnd.mozilla.xul+xml":"xul","vnd.ms-excel":["xls","xlb","xlt","xlm","xla","xlc","xlw"],"vnd.ms-pki.seccat":"cat","vnd.ms-pki.stl":"stl","vnd.ms-powerpoint":["ppt","pps","pot"],"vnd.oasis.opendocument.chart":"odc","vnd.oasis.opendocument.database":"odb","vnd.oasis.opendocument.formula":"odf","vnd.oasis.opendocument.graphics":"odg","vnd.oasis.opendocument.graphics-template":"otg","vnd.oasis.opendocument.image":"odi","vnd.oasis.opendocument.presentation":"odp","vnd.oasis.opendocument.presentation-template":"otp","vnd.oasis.opendocument.spreadsheet":"ods","vnd.oasis.opendocument.spreadsheet-template":"ots","vnd.oasis.opendocument.text":"odt","vnd.oasis.opendocument.text-master":"odm","vnd.oasis.opendocument.text-template":"ott","vnd.oasis.opendocument.text-web":"oth","vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","vnd.openxmlformats-officedocument.presentationml.template":"potx","vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","vnd.smaf":"mmf","vnd.stardivision.calc":"sdc","vnd.stardivision.chart":"sds","vnd.stardivision.draw":"sda","vnd.stardivision.impress":"sdd","vnd.stardivision.math":["sdf","smf"],"vnd.stardivision.writer":["sdw","vor"],"vnd.stardivision.writer-global":"sgl","vnd.sun.xml.calc":"sxc","vnd.sun.xml.calc.template":"stc","vnd.sun.xml.draw":"sxd","vnd.sun.xml.draw.template":"std","vnd.sun.xml.impress":"sxi","vnd.sun.xml.impress.template":"sti","vnd.sun.xml.math":"sxm","vnd.sun.xml.writer":"sxw","vnd.sun.xml.writer.global":"sxg","vnd.sun.xml.writer.template":"stw","vnd.symbian.install":["sis","sisx"],"vnd.visio":["vsd","vst","vss","vsw"],"vnd.wap.wbxml":"wbxml","vnd.wap.wmlc":"wmlc","vnd.wap.wmlscriptc":"wmlsc","vnd.wordperfect":"wpd","vnd.wordperfect5.1":"wp5","x-123":"wk","x-7z-compressed":"7z","x-abiword":"abw","x-apple-diskimage":"dmg","x-bcpio":"bcpio","x-bittorrent":"torrent","x-cbr":["cbr","cba","cbt","cb7"],"x-cbz":"cbz","x-cdf":["cdf","cda"],"x-cdlink":"vcd","x-chess-pgn":"pgn","x-cpio":"cpio","x-csh":"csh","x-debian-package":["deb","udeb"],"x-director":["dcr","dir","dxr","cst","cct","cxt","w3d","fgd","swa"],"x-dms":"dms","x-doom":"wad","x-dvi":"dvi","x-httpd-eruby":"rhtml","x-font":"pcf.Z","x-freemind":"mm","x-gnumeric":"gnumeric","x-go-sgf":"sgf","x-graphing-calculator":"gcf","x-gtar":["gtar","taz"],"x-hdf":"hdf","x-httpd-php":["phtml","pht","php"],"x-httpd-php-source":"phps","x-httpd-php3":"php3","x-httpd-php3-preprocessed":"php3p","x-httpd-php4":"php4","x-httpd-php5":"php5","x-ica":"ica","x-info":"info","x-internet-signup":["ins","isp"],"x-iphone":"iii","x-iso9660-image":"iso","x-java-jnlp-file":"jnlp","x-jmol":"jmz","x-killustrator":"kil","x-koan":["skp","skd","skt","skm"],"x-kpresenter":["kpr","kpt"],"x-kword":["kwd","kwt"],"x-latex":"latex","x-lha":"lha","x-lyx":"lyx","x-lzh":"lzh","x-lzx":"lzx","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-ms-wmd":"wmd","x-ms-wmz":"wmz","x-msdos-program":["com","exe","bat","dll"],"x-msi":"msi","x-netcdf":["nc","cdf"],"x-ns-proxy-autoconfig":["pac","dat"],"x-nwc":"nwc","x-object":"o","x-oz-application":"oza","x-pkcs7-certreqresp":"p7r","x-python-code":["pyc","pyo"],"x-qgis":["qgs","shp","shx"],"x-quicktimeplayer":"qtl","x-redhat-package-manager":"rpm","x-ruby":"rb","x-sh":"sh","x-shar":"shar","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","x-stuffit":"sit","x-sv4cpio":"sv4cpio","x-sv4crc":"sv4crc","x-tar":"tar","x-tcl":"tcl","x-tex-gf":"gf","x-tex-pk":"pk","x-texinfo":["texinfo","texi"],"x-trash":["~","%","bak","old","sik"],"x-troff":["t","tr","roff"],"x-troff-man":"man","x-troff-me":"me","x-troff-ms":"ms","x-ustar":"ustar","x-wais-source":"src","x-wingz":"wz","x-x509-ca-cert":["crt","der","cer"],"x-xcf":"xcf","x-xfig":"fig","x-xpinstall":"xpi",applixware:"aw","atomsvc+xml":"atomsvc","ccxml+xml":"ccxml","cdmi-capability":"cdmia","cdmi-container":"cdmic","cdmi-domain":"cdmid","cdmi-object":"cdmio","cdmi-queue":"cdmiq","docbook+xml":"dbk","dssc+der":"dssc","dssc+xml":"xdssc","emma+xml":"emma","epub+zip":"epub",exi:"exi","font-tdpfr":"pfr","gml+xml":"gml","gpx+xml":"gpx",gxf:"gxf",hyperstudio:"stk","inkml+xml":["ink","inkml"],ipfix:"ipfix",json:"json","jsonml+json":"jsonml","lost+xml":"lostxml","mads+xml":"mads",marc:"mrc","marcxml+xml":"mrcx","mathml+xml":"mathml",mbox:"mbox","mediaservercontrol+xml":"mscml","metalink+xml":"metalink","metalink4+xml":"meta4","mets+xml":"mets","mods+xml":"mods",mp21:["m21","mp21"],mp4:"mp4s","oebps-package+xml":"opf","omdoc+xml":"omdoc",onenote:["onetoc","onetoc2","onetmp","onepkg"],oxps:"oxps","patch-ops-error+xml":"xer","pgp-encrypted":"pgp",pkcs10:"p10","pkcs7-mime":["p7m","p7c"],"pkcs7-signature":"p7s",pkcs8:"p8","pkix-attr-cert":"ac","pkix-crl":"crl","pkix-pkipath":"pkipath",pkixcmp:"pki","pls+xml":"pls","prs.cww":"cww","pskc+xml":"pskcxml","reginfo+xml":"rif","relax-ng-compact-syntax":"rnc","resource-lists+xml":"rl","resource-lists-diff+xml":"rld","rls-services+xml":"rs","rpki-ghostbusters":"gbr","rpki-manifest":"mft","rpki-roa":"roa","rsd+xml":"rsd","sbml+xml":"sbml","scvp-cv-request":"scq","scvp-cv-response":"scs","scvp-vp-request":"spq","scvp-vp-response":"spp",sdp:"sdp","set-payment-initiation":"setpay","set-registration-initiation":"setreg","shf+xml":"shf","sparql-query":"rq","sparql-results+xml":"srx",srgs:"gram","srgs+xml":"grxml","sru+xml":"sru","ssdl+xml":"ssdl","ssml+xml":"ssml","tei+xml":["tei","teicorpus"],"thraud+xml":"tfi","timestamped-data":"tsd","vnd.3gpp.pic-bw-large":"plb","vnd.3gpp.pic-bw-small":"psb","vnd.3gpp.pic-bw-var":"pvb","vnd.3gpp2.tcap":"tcap","vnd.3m.post-it-notes":"pwn","vnd.accpac.simply.aso":"aso","vnd.accpac.simply.imp":"imp","vnd.acucobol":"acu","vnd.acucorp":["atc","acutc"],"vnd.adobe.air-application-installer-package+zip":"air","vnd.adobe.formscentral.fcdt":"fcdt","vnd.adobe.fxp":["fxp","fxpl"],"vnd.adobe.xdp+xml":"xdp","vnd.adobe.xfdf":"xfdf","vnd.ahead.space":"ahead","vnd.airzip.filesecure.azf":"azf","vnd.airzip.filesecure.azs":"azs","vnd.amazon.ebook":"azw","vnd.americandynamics.acc":"acc","vnd.amiga.ami":"ami","vnd.anser-web-certificate-issue-initiation":"cii","vnd.anser-web-funds-transfer-initiation":"fti","vnd.antix.game-component":"atx","vnd.apple.installer+xml":"mpkg","vnd.apple.mpegurl":"m3u8","vnd.aristanetworks.swi":"swi","vnd.astraea-software.iota":"iota","vnd.audiograph":"aep","vnd.blueice.multipass":"mpm","vnd.bmi":"bmi","vnd.businessobjects":"rep","vnd.chemdraw+xml":"cdxml","vnd.chipnuts.karaoke-mmd":"mmd","vnd.claymore":"cla","vnd.cloanto.rp9":"rp9","vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"vnd.cluetrust.cartomobile-config":"c11amc","vnd.cluetrust.cartomobile-config-pkg":"c11amz","vnd.commonspace":"csp","vnd.contact.cmsg":"cdbcmsg","vnd.cosmocaller":"cmc","vnd.crick.clicker":"clkx","vnd.crick.clicker.keyboard":"clkk","vnd.crick.clicker.palette":"clkp","vnd.crick.clicker.template":"clkt","vnd.crick.clicker.wordbank":"clkw","vnd.criticaltools.wbs+xml":"wbs","vnd.ctc-posml":"pml","vnd.cups-ppd":"ppd","vnd.curl.car":"car","vnd.curl.pcurl":"pcurl","vnd.dart":"dart","vnd.data-vision.rdz":"rdz","vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"vnd.dece.ttml+xml":["uvt","uvvt"],"vnd.dece.unspecified":["uvx","uvvx"],"vnd.dece.zip":["uvz","uvvz"],"vnd.denovo.fcselayout-link":"fe_launch","vnd.dna":"dna","vnd.dolby.mlp":"mlp","vnd.dpgraph":"dpg","vnd.dreamfactory":"dfac","vnd.ds-keypoint":"kpxx","vnd.dvb.ait":"ait","vnd.dvb.service":"svc","vnd.dynageo":"geo","vnd.ecowin.chart":"mag","vnd.enliven":"nml","vnd.epson.esf":"esf","vnd.epson.msf":"msf","vnd.epson.quickanime":"qam","vnd.epson.salt":"slt","vnd.epson.ssf":"ssf","vnd.eszigno3+xml":["es3","et3"],"vnd.ezpix-album":"ez2","vnd.ezpix-package":"ez3","vnd.fdf":"fdf","vnd.fdsn.mseed":"mseed","vnd.fdsn.seed":["seed","dataless"],"vnd.flographit":"gph","vnd.fluxtime.clip":"ftc","vnd.framemaker":["fm","frame","maker","book"],"vnd.frogans.fnc":"fnc","vnd.frogans.ltf":"ltf","vnd.fsc.weblaunch":"fsc","vnd.fujitsu.oasys":"oas","vnd.fujitsu.oasys2":"oa2","vnd.fujitsu.oasys3":"oa3","vnd.fujitsu.oasysgp":"fg5","vnd.fujitsu.oasysprs":"bh2","vnd.fujixerox.ddd":"ddd","vnd.fujixerox.docuworks":"xdw","vnd.fujixerox.docuworks.binder":"xbd","vnd.fuzzysheet":"fzs","vnd.genomatix.tuxedo":"txd","vnd.geogebra.file":"ggb","vnd.geogebra.tool":"ggt","vnd.geometry-explorer":["gex","gre"],"vnd.geonext":"gxt","vnd.geoplan":"g2w","vnd.geospace":"g3w","vnd.gmx":"gmx","vnd.grafeq":["gqf","gqs"],"vnd.groove-account":"gac","vnd.groove-help":"ghf","vnd.groove-identity-message":"gim","vnd.groove-injector":"grv","vnd.groove-tool-message":"gtm","vnd.groove-tool-template":"tpl","vnd.groove-vcard":"vcg","vnd.hal+xml":"hal","vnd.handheld-entertainment+xml":"zmm","vnd.hbci":"hbci","vnd.hhe.lesson-player":"les","vnd.hp-hpgl":"hpgl","vnd.hp-hpid":"hpid","vnd.hp-hps":"hps","vnd.hp-jlyt":"jlt","vnd.hp-pcl":"pcl","vnd.hp-pclxl":"pclxl","vnd.hydrostatix.sof-data":"sfd-hdstx","vnd.ibm.minipay":"mpy","vnd.ibm.modcap":["afp","listafp","list3820"],"vnd.ibm.rights-management":"irm","vnd.ibm.secure-container":"sc","vnd.iccprofile":["icc","icm"],"vnd.igloader":"igl","vnd.immervision-ivp":"ivp","vnd.immervision-ivu":"ivu","vnd.insors.igm":"igm","vnd.intercon.formnet":["xpw","xpx"],"vnd.intergeo":"i2g","vnd.intu.qbo":"qbo","vnd.intu.qfx":"qfx","vnd.ipunplugged.rcprofile":"rcprofile","vnd.irepository.package+xml":"irp","vnd.is-xpr":"xpr","vnd.isac.fcs":"fcs","vnd.jam":"jam","vnd.jcp.javame.midlet-rms":"rms","vnd.jisp":"jisp","vnd.joost.joda-archive":"joda","vnd.kahootz":["ktz","ktr"],"vnd.kde.karbon":"karbon","vnd.kde.kchart":"chrt","vnd.kde.kformula":"kfo","vnd.kde.kivio":"flw","vnd.kde.kontour":"kon","vnd.kde.kpresenter":["kpr","kpt"],"vnd.kde.kspread":"ksp","vnd.kde.kword":["kwd","kwt"],"vnd.kenameaapp":"htke","vnd.kidspiration":"kia","vnd.kinar":["kne","knp"],"vnd.koan":["skp","skd","skt","skm"],"vnd.kodak-descriptor":"sse","vnd.las.las+xml":"lasxml","vnd.llamagraphics.life-balance.desktop":"lbd","vnd.llamagraphics.life-balance.exchange+xml":"lbe","vnd.lotus-1-2-3":"123","vnd.lotus-approach":"apr","vnd.lotus-freelance":"pre","vnd.lotus-notes":"nsf","vnd.lotus-organizer":"org","vnd.lotus-screencam":"scm","vnd.lotus-wordpro":"lwp","vnd.macports.portpkg":"portpkg","vnd.mcd":"mcd","vnd.medcalcdata":"mc1","vnd.mediastation.cdkey":"cdkey","vnd.mfer":"mwf","vnd.mfmp":"mfm","vnd.micrografx.flo":"flo","vnd.micrografx.igx":"igx","vnd.mif":"mif","vnd.mobius.daf":"daf","vnd.mobius.dis":"dis","vnd.mobius.mbk":"mbk","vnd.mobius.mqy":"mqy","vnd.mobius.msl":"msl","vnd.mobius.plc":"plc","vnd.mobius.txf":"txf","vnd.mophun.application":"mpn","vnd.mophun.certificate":"mpc","vnd.ms-artgalry":"cil","vnd.ms-cab-compressed":"cab","vnd.ms-excel.addin.macroenabled.12":"xlam","vnd.ms-excel.sheet.binary.macroenabled.12":"xlsb","vnd.ms-excel.sheet.macroenabled.12":"xlsm","vnd.ms-excel.template.macroenabled.12":"xltm","vnd.ms-fontobject":"eot","vnd.ms-htmlhelp":"chm","vnd.ms-ims":"ims","vnd.ms-lrm":"lrm","vnd.ms-officetheme":"thmx","vnd.ms-powerpoint.addin.macroenabled.12":"ppam","vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","vnd.ms-powerpoint.slide.macroenabled.12":"sldm","vnd.ms-powerpoint.slideshow.macroenabled.12":"ppsm","vnd.ms-powerpoint.template.macroenabled.12":"potm","vnd.ms-project":["mpp","mpt"],"vnd.ms-word.document.macroenabled.12":"docm","vnd.ms-word.template.macroenabled.12":"dotm","vnd.ms-works":["wps","wks","wcm","wdb"],"vnd.ms-wpl":"wpl","vnd.ms-xpsdocument":"xps","vnd.mseq":"mseq","vnd.musician":"mus","vnd.muvee.style":"msty","vnd.mynfc":"taglet","vnd.neurolanguage.nlu":"nlu","vnd.nitf":["ntf","nitf"],"vnd.noblenet-directory":"nnd","vnd.noblenet-sealer":"nns","vnd.noblenet-web":"nnw","vnd.nokia.n-gage.data":"ngdat","vnd.nokia.n-gage.symbian.install":"n-gage","vnd.nokia.radio-preset":"rpst","vnd.nokia.radio-presets":"rpss","vnd.novadigm.edm":"edm","vnd.novadigm.edx":"edx","vnd.novadigm.ext":"ext","vnd.oasis.opendocument.chart-template":"otc","vnd.oasis.opendocument.formula-template":"odft","vnd.oasis.opendocument.image-template":"oti","vnd.olpc-sugar":"xo","vnd.oma.dd2+xml":"dd2","vnd.openofficeorg.extension":"oxt","vnd.openxmlformats-officedocument.presentationml.slide":"sldx","vnd.osgeo.mapguide.package":"mgp","vnd.osgi.dp":"dp","vnd.osgi.subsystem":"esa","vnd.palm":["pdb","pqa","oprc"],"vnd.pawaafile":"paw","vnd.pg.format":"str","vnd.pg.osasli":"ei6","vnd.picsel":"efif","vnd.pmi.widget":"wg","vnd.pocketlearn":"plf","vnd.powerbuilder6":"pbd","vnd.previewsystems.box":"box","vnd.proteus.magazine":"mgz","vnd.publishare-delta-tree":"qps","vnd.pvi.ptid1":"ptid","vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"vnd.realvnc.bed":"bed","vnd.recordare.musicxml":"mxl","vnd.recordare.musicxml+xml":"musicxml","vnd.rig.cryptonote":"cryptonote","vnd.rn-realmedia":"rm","vnd.rn-realmedia-vbr":"rmvb","vnd.route66.link66+xml":"link66","vnd.sailingtracker.track":"st","vnd.seemail":"see","vnd.sema":"sema","vnd.semd":"semd","vnd.semf":"semf","vnd.shana.informed.formdata":"ifm","vnd.shana.informed.formtemplate":"itp","vnd.shana.informed.interchange":"iif","vnd.shana.informed.package":"ipk","vnd.simtech-mindmapper":["twd","twds"],"vnd.smart.teacher":"teacher","vnd.solent.sdkm+xml":["sdkm","sdkd"],"vnd.spotfire.dxp":"dxp","vnd.spotfire.sfs":"sfs","vnd.stepmania.package":"smzip","vnd.stepmania.stepchart":"sm","vnd.sus-calendar":["sus","susp"],"vnd.svd":"svd","vnd.syncml+xml":"xsm","vnd.syncml.dm+wbxml":"bdm","vnd.syncml.dm+xml":"xdm","vnd.tao.intent-module-archive":"tao","vnd.tcpdump.pcap":["pcap","cap","dmp"],"vnd.tmobile-livetv":"tmo","vnd.trid.tpt":"tpt","vnd.triscape.mxs":"mxs","vnd.trueapp":"tra","vnd.ufdl":["ufd","ufdl"],"vnd.uiq.theme":"utz","vnd.umajin":"umj","vnd.unity":"unityweb","vnd.uoml+xml":"uoml","vnd.vcx":"vcx","vnd.visionary":"vis","vnd.vsf":"vsf","vnd.webturbo":"wtb","vnd.wolfram.player":"nbp","vnd.wqd":"wqd","vnd.wt.stf":"stf","vnd.xara":"xar","vnd.xfdl":"xfdl","vnd.yamaha.hv-dic":"hvd","vnd.yamaha.hv-script":"hvs","vnd.yamaha.hv-voice":"hvp","vnd.yamaha.openscoreformat":"osf","vnd.yamaha.openscoreformat.osfpvg+xml":"osfpvg","vnd.yamaha.smaf-audio":"saf","vnd.yamaha.smaf-phrase":"spf","vnd.yellowriver-custom-menu":"cmp","vnd.zul":["zir","zirz"],"vnd.zzazz.deck+xml":"zaz","voicexml+xml":"vxml",widget:"wgt",winhlp:"hlp","wsdl+xml":"wsdl","wspolicy+xml":"wspolicy","x-ace-compressed":"ace","x-authorware-bin":["aab","x32","u32","vox"],"x-authorware-map":"aam","x-authorware-seg":"aas","x-blorb":["blb","blorb"],"x-bzip":"bz","x-bzip2":["bz2","boz"],"x-cfs-compressed":"cfs","x-chat":"chat","x-conference":"nsc","x-dgc-compressed":"dgc","x-dtbncx+xml":"ncx","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-eva":"eva","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-freearc":"arc","x-gca-compressed":"gca","x-glulx":"ulx","x-gramps-xml":"gramps","x-install-instructions":"install","x-lzh-compressed":["lzh","lha"],"x-mie":"mie","x-mobipocket-ebook":["prc","mobi"],"x-ms-application":"application","x-ms-shortcut":"lnk","x-ms-xbap":"xbap","x-msbinder":"obd","x-mscardfile":"crd","x-msclip":"clp","x-msdownload":["exe","dll","com","bat","msi"],"x-msmediaview":["mvb","m13","m14"],"x-msmetafile":["wmf","wmz","emf","emz"],"x-msmoney":"mny","x-mspublisher":"pub","x-msschedule":"scd","x-msterminal":"trm","x-mswrite":"wri","x-nzb":"nzb","x-pkcs12":["p12","pfx"],"x-pkcs7-certificates":["p7b","spc"],"x-research-info-systems":"ris","x-silverlight-app":"xap","x-sql":"sql","x-stuffitx":"sitx","x-subrip":"srt","x-t3vm-image":"t3","x-tads":"gam","x-tex":"tex","x-tex-tfm":"tfm","x-tgif":"obj","x-xliff+xml":"xlf","x-xz":"xz","x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"xaml+xml":"xaml","xcap-diff+xml":"xdf","xenc+xml":"xenc","xml-dtd":"dtd","xop+xml":"xop","xproc+xml":"xpl","xslt+xml":"xslt","xv+xml":["mxml","xhvml","xvml","xvm"],yang:"yang","yin+xml":"yin",envoy:"evy",fractals:"fif","internet-property-stream":"acx",olescript:"axs","vnd.ms-outlook":"msg","vnd.ms-pkicertstore":"sst","x-compress":"z","x-compressed":"tgz","x-gzip":"gz","x-perfmon":["pma","pmc","pml","pmr","pmw"],"x-pkcs7-mime":["p7c","p7m"],"ynd.ms-pkipko":"pko"},audio:{amr:"amr","amr-wb":"awb",annodex:"axa",basic:["au","snd"],flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"prs.sid":"sid","x-aiff":["aif","aiff","aifc"],"x-gsm":"gsm","x-ms-wma":"wma","x-ms-wax":"wax","x-pn-realaudio":"ram","x-realaudio":"ra","x-sd2":"sd2","x-wav":"wav",adpcm:"adp",mp4:"mp4a",s3m:"s3m",silk:"sil","vnd.dece.audio":["uva","uvva"],"vnd.digital-winds":"eol","vnd.dra":"dra","vnd.dts":"dts","vnd.dts.hd":"dtshd","vnd.lucent.voice":"lvp","vnd.ms-playready.media.pya":"pya","vnd.nuera.ecelp4800":"ecelp4800","vnd.nuera.ecelp7470":"ecelp7470","vnd.nuera.ecelp9600":"ecelp9600","vnd.rip":"rip",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},chemical:{"x-alchemy":"alc","x-cache":["cac","cache"],"x-cache-csf":"csf","x-cactvs-binary":["cbin","cascii","ctab"],"x-cdx":"cdx","x-chem3d":"c3d","x-cif":"cif","x-cmdf":"cmdf","x-cml":"cml","x-compass":"cpa","x-crossfire":"bsd","x-csml":["csml","csm"],"x-ctx":"ctx","x-cxf":["cxf","cef"],"x-embl-dl-nucleotide":["emb","embl"],"x-gamess-input":["inp","gam","gamin"],"x-gaussian-checkpoint":["fch","fchk"],"x-gaussian-cube":"cub","x-gaussian-input":["gau","gjc","gjf"],"x-gaussian-log":"gal","x-gcg8-sequence":"gcg","x-genbank":"gen","x-hin":"hin","x-isostar":["istr","ist"],"x-jcamp-dx":["jdx","dx"],"x-kinemage":"kin","x-macmolecule":"mcm","x-macromodel-input":["mmd","mmod"],"x-mdl-molfile":"mol","x-mdl-rdfile":"rd","x-mdl-rxnfile":"rxn","x-mdl-sdfile":["sd","sdf"],"x-mdl-tgf":"tgf","x-mmcif":"mcif","x-mol2":"mol2","x-molconn-Z":"b","x-mopac-graph":"gpt","x-mopac-input":["mop","mopcrt","mpc","zmt"],"x-mopac-out":"moo","x-ncbi-asn1":"asn","x-ncbi-asn1-ascii":["prt","ent"],"x-ncbi-asn1-binary":["val","aso"],"x-pdb":["pdb","ent"],"x-rosdal":"ros","x-swissprot":"sw","x-vamas-iso14976":"vms","x-vmd":"vmd","x-xtel":"xtel","x-xyz":"xyz"},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"vnd.djvu":["djvu","djv"],"vnd.wap.wbmp":"wbmp","x-canon-cr2":"cr2","x-canon-crw":"crw","x-cmu-raster":"ras","x-coreldraw":"cdr","x-coreldrawpattern":"pat","x-coreldrawtemplate":"cdt","x-corelphotopaint":"cpt","x-epson-erf":"erf","x-icon":"ico","x-jg":"art","x-jng":"jng","x-nikon-nef":"nef","x-olympus-orf":"orf","x-photoshop":"psd","x-portable-anymap":"pnm","x-portable-bitmap":"pbm","x-portable-graymap":"pgm","x-portable-pixmap":"ppm","x-rgb":"rgb","x-xbitmap":"xbm","x-xpixmap":"xpm","x-xwindowdump":"xwd",bmp:"bmp",cgm:"cgm",g3fax:"g3",ktx:"ktx","prs.btif":"btif",sgi:"sgi","vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"vnd.dwg":"dwg","vnd.dxf":"dxf","vnd.fastbidsheet":"fbs","vnd.fpx":"fpx","vnd.fst":"fst","vnd.fujixerox.edmics-mmr":"mmr","vnd.fujixerox.edmics-rlc":"rlc","vnd.ms-modi":"mdi","vnd.ms-photo":"wdp","vnd.net-fpx":"npx","vnd.xiff":"xif",webp:"webp","x-3ds":"3ds","x-cmx":"cmx","x-freehand":["fh","fhc","fh4","fh5","fh7"],"x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod",pipeg:"jfif"},message:{rfc822:["eml","mime","mht","mhtml","nws"]},model:{iges:["igs","iges"],mesh:["msh","mesh","silo"],vrml:["wrl","vrml"],"x3d+vrml":["x3dv","x3dvz"],"x3d+xml":["x3d","x3dz"],"x3d+binary":["x3db","x3dbz"],"vnd.collada+xml":"dae","vnd.dwf":"dwf","vnd.gdl":"gdl","vnd.gtw":"gtw","vnd.mts":"mts","vnd.vtu":"vtu"},text:{"cache-manifest":["manifest","appcache"],calendar:["ics","icz","ifb"],css:"css",csv:"csv",h323:"323",html:["html","htm","shtml","stm"],iuls:"uls",mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx",scriptlet:["sct","wsc"],texmacs:["tm","ts"],"tab-separated-values":"tsv","vnd.sun.j2me.app-descriptor":"jad","vnd.wap.wml":"wml","vnd.wap.wmlscript":"wmls","x-bibtex":"bib","x-boo":"boo","x-c++hdr":["h++","hpp","hxx","hh"],"x-c++src":["c++","cpp","cxx","cc"],"x-component":"htc","x-dsrc":"d","x-diff":["diff","patch"],"x-haskell":"hs","x-java":"java","x-literate-haskell":"lhs","x-moc":"moc","x-pascal":["p","pas"],"x-pcs-gcd":"gcd","x-perl":["pl","pm"],"x-python":"py","x-scala":"scala","x-setext":"etx","x-tcl":["tcl","tk"],"x-tex":["tex","ltx","sty","cls"],"x-vcalendar":"vcs","x-vcard":"vcf",n3:"n3","prs.lines.tag":"dsc",sgml:["sgml","sgm"],troff:["t","tr","roff","man","me","ms"],turtle:"ttl","uri-list":["uri","uris","urls"],vcard:"vcard","vnd.curl":"curl","vnd.curl.dcurl":"dcurl","vnd.curl.scurl":"scurl","vnd.curl.mcurl":"mcurl","vnd.dvb.subtitle":"sub","vnd.fly":"fly","vnd.fmi.flexstor":"flx","vnd.graphviz":"gv","vnd.in3d.3dml":"3dml","vnd.in3d.spot":"spot","x-asm":["s","asm"],"x-c":["c","cc","cxx","cpp","h","hh","dic"],"x-fortran":["f","for","f77","f90"],"x-opml":"opml","x-nfo":"nfo","x-sfv":"sfv","x-uuencode":"uu",webviewhtml:"htt"},video:{avif:".avif","3gpp":"3gp",annodex:"axv",dl:"dl",dv:["dif","dv"],fli:"fli",gl:"gl",mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.dece.hd":["uvh","uvvh"],"vnd.dece.mobile":["uvm","uvvm"],"vnd.dece.pd":["uvp","uvvp"],"vnd.dece.sd":["uvs","uvvs"],"vnd.dece.video":["uvv","uvvv"],"vnd.dvb.file":"dvb","vnd.fvt":"fvt","vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"},"x-conference":{"x-cooltalk":"ice"},"x-world":{"x-vrml":["vrm","vrml","wrl","flr","wrz","xaf","xof"]}},pt=(()=>{const e={};for(let t in dt)if(dt.hasOwnProperty(t))for(let r in dt[t])if(dt[t].hasOwnProperty(r)){const n=dt[t][r];if("string"==typeof n)e[n]=t+"/"+r;else for(let o=0;o<n.length;o++)e[n[o]]=t+"/"+r}return e})(),ft=function(e){return e&&pt[e.split(".").pop().toLowerCase()]||"application/octet-stream"},gt=[];for(let e=0;e<256;e++){let t=e;for(let e=0;e<8;e++)1&t?t=t>>>1^3988292384:t>>>=1;gt[e]=t}const mt=class{constructor(e){this.crc=e||-1}append(e){let t=0|this.crc;for(let r=0,n=0|e.length;r<n;r++)t=t>>>8^gt[255&(t^e[r])];this.crc=t}get(){return~this.crc}},ht={concat(e,t){if(0===e.length||0===t.length)return e.concat(t);const r=e[e.length-1],n=ht.getPartial(r);return 32===n?e.concat(t):ht._shiftRight(t,n,0|r,e.slice(0,e.length-1))},bitLength(e){const t=e.length;if(0===t)return 0;const r=e[t-1];return 32*(t-1)+ht.getPartial(r)},clamp(e,t){if(32*e.length<t)return e;const r=(e=e.slice(0,Math.ceil(t/32))).length;return t&=31,r>0&&t&&(e[r-1]=ht.partial(t,e[r-1]&2147483648>>t-1,1)),e},partial:(e,t,r)=>32===e?t:(r?0|t:t<<32-e)+1099511627776*e,getPartial:e=>Math.round(e/1099511627776)||32,_shiftRight(e,t,r,n){for(void 0===n&&(n=[]);t>=32;t-=32)n.push(r),r=0;if(0===t)return n.concat(e);for(let o=0;o<e.length;o++)n.push(r|e[o]>>>t),r=e[o]<<32-t;const o=e.length?e[e.length-1]:0,a=ht.getPartial(o);return n.push(ht.partial(t+a&31,t+a>32?r:n.pop(),1)),n}},yt={bytes:{fromBits(e){const t=ht.bitLength(e)/8,r=new Uint8Array(t);let n;for(let o=0;o<t;o++)0==(3&o)&&(n=e[o/4]),r[o]=n>>>24,n<<=8;return r},toBits(e){const t=[];let r,n=0;for(r=0;r<e.length;r++)n=n<<8|e[r],3==(3&r)&&(t.push(n),n=0);return 3&r&&t.push(ht.partial(8*(3&r),n)),t}}},St={sha1:function(e){e?(this._h=e._h.slice(0),this._buffer=e._buffer.slice(0),this._length=e._length):this.reset()}};St.sha1.prototype={blockSize:512,reset:function(){const e=this;return e._h=this._init.slice(0),e._buffer=[],e._length=0,e},update:function(e){const t=this;"string"==typeof e&&(e=yt.utf8String.toBits(e));const r=t._buffer=ht.concat(t._buffer,e),n=t._length,o=t._length=n+ht.bitLength(e);if(o>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const a=new Uint32Array(r);let i=0;for(let e=t.blockSize+n-(t.blockSize+n&t.blockSize-1);e<=o;e+=t.blockSize)t._block(a.subarray(16*i,16*(i+1))),i+=1;return r.splice(0,16*i),t},finalize:function(){const e=this;let t=e._buffer;const r=e._h;t=ht.concat(t,[ht.partial(1,1)]);for(let e=t.length+2;15&e;e++)t.push(0);for(t.push(Math.floor(e._length/4294967296)),t.push(0|e._length);t.length;)e._block(t.splice(0,16));return e.reset(),r},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(e,t,r,n){return e<=19?t&r|~t&n:e<=39?t^r^n:e<=59?t&r|t&n|r&n:e<=79?t^r^n:void 0},_S:function(e,t){return t<<e|t>>>32-e},_block:function(e){const t=this,r=t._h,n=Array(80);for(let t=0;t<16;t++)n[t]=e[t];let o=r[0],a=r[1],i=r[2],s=r[3],c=r[4];for(let e=0;e<=79;e++){e>=16&&(n[e]=t._S(1,n[e-3]^n[e-8]^n[e-14]^n[e-16]));const r=t._S(5,o)+t._f(e,a,i,s)+c+n[e]+t._key[Math.floor(e/20)]|0;c=s,s=i,i=t._S(30,a),a=o,o=r}r[0]=r[0]+o|0,r[1]=r[1]+a|0,r[2]=r[2]+i|0,r[3]=r[3]+s|0,r[4]=r[4]+c|0}};const vt=class{constructor(e){const t=this;t._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],t._tables[0][0][0]||t._precompute();const r=t._tables[0][4],n=t._tables[1],o=e.length;let a,i,s,c=1;if(4!==o&&6!==o&&8!==o)throw new Error("invalid aes key size");for(t._key=[i=e.slice(0),s=[]],a=o;a<4*o+28;a++){let e=i[a-1];(a%o==0||8===o&&a%o==4)&&(e=r[e>>>24]<<24^r[e>>16&255]<<16^r[e>>8&255]<<8^r[255&e],a%o==0&&(e=e<<8^e>>>24^c<<24,c=c<<1^283*(c>>7))),i[a]=i[a-o]^e}for(let e=0;a;e++,a--){const t=i[3&e?a:a-4];s[e]=a<=4||e<4?t:n[0][r[t>>>24]]^n[1][r[t>>16&255]]^n[2][r[t>>8&255]]^n[3][r[255&t]]}}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){const e=this._tables[0],t=this._tables[1],r=e[4],n=t[4],o=[],a=[];let i,s,c,u;for(let e=0;e<256;e++)a[(o[e]=e<<1^283*(e>>7))^e]=e;for(let l=i=0;!r[l];l^=s||1,i=a[i]||1){let a=i^i<<1^i<<2^i<<3^i<<4;a=a>>8^255&a^99,r[l]=a,n[a]=l,u=o[c=o[s=o[l]]];let d=16843009*u^65537*c^257*s^16843008*l,p=257*o[a]^16843008*a;for(let r=0;r<4;r++)e[r][l]=p=p<<24^p>>>8,t[r][a]=d=d<<24^d>>>8}for(let r=0;r<5;r++)e[r]=e[r].slice(0),t[r]=t[r].slice(0)}_crypt(e,t){if(4!==e.length)throw new Error("invalid aes block size");const r=this._key[t],n=r.length/4-2,o=[0,0,0,0],a=this._tables[t],i=a[0],s=a[1],c=a[2],u=a[3],l=a[4];let d,p,f,g=e[0]^r[0],m=e[t?3:1]^r[1],h=e[2]^r[2],y=e[t?1:3]^r[3],S=4;for(let e=0;e<n;e++)d=i[g>>>24]^s[m>>16&255]^c[h>>8&255]^u[255&y]^r[S],p=i[m>>>24]^s[h>>16&255]^c[y>>8&255]^u[255&g]^r[S+1],f=i[h>>>24]^s[y>>16&255]^c[g>>8&255]^u[255&m]^r[S+2],y=i[y>>>24]^s[g>>16&255]^c[m>>8&255]^u[255&h]^r[S+3],S+=4,g=d,m=p,h=f;for(let e=0;e<4;e++)o[t?3&-e:e]=l[g>>>24]<<24^l[m>>16&255]<<16^l[h>>8&255]<<8^l[255&y]^r[S++],d=g,g=m,m=h,h=y,y=d;return o}},Et=class{constructor(e,t){this._prf=e,this._initIv=t,this._iv=t}reset(){this._iv=this._initIv}update(e){return this.calculate(this._prf,e,this._iv)}incWord(e){if(255==(e>>24&255)){let t=e>>16&255,r=e>>8&255,n=255&e;255===t?(t=0,255===r?(r=0,255===n?n=0:++n):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=n}else e+=1<<24;return e}incCounter(e){0===(e[0]=this.incWord(e[0]))&&(e[1]=this.incWord(e[1]))}calculate(e,t,r){let n;if(!(n=t.length))return[];const o=ht.bitLength(t);for(let o=0;o<n;o+=4){this.incCounter(r);const n=e.encrypt(r);t[o]^=n[0],t[o+1]^=n[1],t[o+2]^=n[2],t[o+3]^=n[3]}return ht.clamp(t,o)}},At=class{constructor(e){const t=this,r=t._hash=St.sha1,n=[[],[]],o=r.prototype.blockSize/32;t._baseHash=[new r,new r],e.length>o&&(e=r.hash(e));for(let t=0;t<o;t++)n[0][t]=909522486^e[t],n[1][t]=1549556828^e[t];t._baseHash[0].update(n[0]),t._baseHash[1].update(n[1]),t._resultHash=new r(t._baseHash[0])}reset(){const e=this;e._resultHash=new e._hash(e._baseHash[0]),e._updated=!1}update(e){this._updated=!0,this._resultHash.update(e)}digest(){const e=this,t=e._resultHash.finalize(),r=new e._hash(e._baseHash[1]).update(t).finalize();return e.reset(),r}},_t="Invalid pasword",bt=16,Tt="raw",It={name:"PBKDF2"},wt=Object.assign({hash:{name:"HMAC"}},It),Ct=Object.assign({iterations:1e3,hash:{name:"SHA-1"}},It),Ot=["deriveBits"],Dt=[8,12,16],Pt=[16,24,32],Nt=10,Rt=[0,0,0,0],Ut=yt.bytes,Lt=vt,Mt=Et,kt=At;class Bt{constructor(e,t,r){Object.assign(this,{password:e,signed:t,strength:r-1,pendingInput:new Uint8Array(0)})}async append(e){const t=this;if(t.password){const r=Kt(e,0,Dt[t.strength]+2);await async function(e,t,r){await Gt(e,r,Kt(t,0,Dt[e.strength]));const n=Kt(t,Dt[e.strength]),o=e.keys.passwordVerification;if(o[0]!=n[0]||o[1]!=n[1])throw new Error(_t)}(t,r,t.password),t.password=null,t.aesCtrGladman=new Mt(new Lt(t.keys.key),Array.from(Rt)),t.hmac=new kt(t.keys.authentication),e=Kt(e,Dt[t.strength]+2)}return xt(t,e,new Uint8Array(e.length-Nt-(e.length-Nt)%bt),0,Nt,!0)}flush(){const e=this,t=e.pendingInput,r=Kt(t,0,t.length-Nt),n=Kt(t,t.length-Nt);let o=new Uint8Array(0);if(r.length){const t=Ut.toBits(r);e.hmac.update(t);const n=e.aesCtrGladman.update(t);o=Ut.fromBits(n)}let a=!0;if(e.signed){const t=Kt(Ut.fromBits(e.hmac.digest()),0,Nt);for(let e=0;e<Nt;e++)t[e]!=n[e]&&(a=!1)}return{valid:a,data:o}}}class Ft{constructor(e,t){Object.assign(this,{password:e,strength:t-1,pendingInput:new Uint8Array(0)})}async append(e){const t=this;let r=new Uint8Array(0);t.password&&(r=await async function(e,t){const r=crypto.getRandomValues(new Uint8Array(Dt[e.strength]));return await Gt(e,t,r),jt(r,e.keys.passwordVerification)}(t,t.password),t.password=null,t.aesCtrGladman=new Mt(new Lt(t.keys.key),Array.from(Rt)),t.hmac=new kt(t.keys.authentication));const n=new Uint8Array(r.length+e.length-e.length%bt);return n.set(r,0),xt(t,e,n,r.length,0)}flush(){const e=this;let t=new Uint8Array(0);if(e.pendingInput.length){const r=e.aesCtrGladman.update(Ut.toBits(e.pendingInput));e.hmac.update(r),t=Ut.fromBits(r)}const r=Kt(Ut.fromBits(e.hmac.digest()),0,Nt);return{data:jt(t,r),signature:r}}}function xt(e,t,r,n,o,a){const i=t.length-o;let s;for(e.pendingInput.length&&(t=jt(e.pendingInput,t),r=function(e,t){if(t&&t>e.length){const r=e;(e=new Uint8Array(t)).set(r,0)}return e}(r,i-i%bt)),s=0;s<=i-bt;s+=bt){const o=Ut.toBits(Kt(t,s,s+bt));a&&e.hmac.update(o);const i=e.aesCtrGladman.update(o);a||e.hmac.update(i),r.set(Ut.fromBits(i),s+n)}return e.pendingInput=Kt(t,s),r}async function Gt(e,t,r){const n=(new TextEncoder).encode(t),o=await crypto.subtle.importKey(Tt,n,wt,!1,Ot),a=await crypto.subtle.deriveBits(Object.assign({salt:r},Ct),o,8*(2*Pt[e.strength]+2)),i=new Uint8Array(a);e.keys={key:Ut.toBits(Kt(i,0,Pt[e.strength])),authentication:Ut.toBits(Kt(i,Pt[e.strength],2*Pt[e.strength])),passwordVerification:Kt(i,2*Pt[e.strength])}}function jt(e,t){let r=e;return e.length+t.length&&(r=new Uint8Array(e.length+t.length),r.set(e,0),r.set(t,e.length)),r}function Kt(e,t,r){return e.subarray(t,r)}class $t{constructor(e,t){Object.assign(this,{password:e,passwordVerification:t}),zt(this,e)}append(e){const t=this;if(t.password){const r=Ht(t,e.subarray(0,12));if(t.password=null,r[11]!=t.passwordVerification)throw new Error(_t);e=e.subarray(12)}return Ht(t,e)}flush(){return{valid:!0,data:new Uint8Array(0)}}}class Vt{constructor(e,t){Object.assign(this,{password:e,passwordVerification:t}),zt(this,e)}append(e){const t=this;let r,n;if(t.password){t.password=null;const o=crypto.getRandomValues(new Uint8Array(12));o[11]=t.passwordVerification,r=new Uint8Array(e.length+o.length),r.set(Wt(t,o),0),n=12}else r=new Uint8Array(e.length),n=0;return r.set(Wt(t,e),n),r}flush(){return{data:new Uint8Array(0)}}}function Ht(e,t){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=Yt(e)^t[n],qt(e,r[n]);return r}function Wt(e,t){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=Yt(e)^t[n],qt(e,t[n]);return r}function zt(e,t){e.keys=[305419896,591751049,878082192],e.crcKey0=new mt(e.keys[0]),e.crcKey2=new mt(e.keys[2]);for(let r=0;r<t.length;r++)qt(e,t.charCodeAt(r))}function qt(e,t){e.crcKey0.append([t]),e.keys[0]=~e.crcKey0.get(),e.keys[1]=Zt(e.keys[1]+Qt(e.keys[0])),e.keys[1]=Zt(Math.imul(e.keys[1],134775813)+1),e.crcKey2.append([e.keys[1]>>>24]),e.keys[2]=~e.crcKey2.get()}function Yt(e){const t=2|e.keys[2];return Qt(Math.imul(t,1^t)>>>8)}function Qt(e){return 255&e}function Zt(e){return 4294967295&e}const Xt="deflate",Jt="inflate",er="Invalid signature";class tr{constructor(e,{signature:t,password:r,signed:n,compressed:o,zipCrypto:a,passwordVerification:i,encryptionStrength:s},{chunkSize:c}){const u=Boolean(r);Object.assign(this,{signature:t,encrypted:u,signed:n,compressed:o,inflate:o&&new e({chunkSize:c}),crc32:n&&new mt,zipCrypto:a,decrypt:u&&a?new $t(r,i):new Bt(r,n,s)})}async append(e){const t=this;return t.encrypted&&e.length&&(e=await t.decrypt.append(e)),t.compressed&&e.length&&(e=await t.inflate.append(e)),(!t.encrypted||t.zipCrypto)&&t.signed&&e.length&&t.crc32.append(e),e}async flush(){const e=this;let t,r=new Uint8Array(0);if(e.encrypted){const t=e.decrypt.flush();if(!t.valid)throw new Error(er);r=t.data}if((!e.encrypted||e.zipCrypto)&&e.signed){const r=new DataView(new Uint8Array(4).buffer);if(t=e.crc32.get(),r.setUint32(0,t),e.signature!=r.getUint32(0,!1))throw new Error(er)}return e.compressed&&(r=await e.inflate.append(r)||new Uint8Array(0),await e.inflate.flush()),{data:r,signature:t}}}class rr{constructor(e,{encrypted:t,signed:r,compressed:n,level:o,zipCrypto:a,password:i,passwordVerification:s,encryptionStrength:c},{chunkSize:u}){Object.assign(this,{encrypted:t,signed:r,compressed:n,deflate:n&&new e({level:o||5,chunkSize:u}),crc32:r&&new mt,zipCrypto:a,encrypt:t&&a?new Vt(i,s):new Ft(i,c)})}async append(e){const t=this;let r=e;return t.compressed&&e.length&&(r=await t.deflate.append(e)),t.encrypted&&r.length&&(r=await t.encrypt.append(r)),(!t.encrypted||t.zipCrypto)&&t.signed&&e.length&&t.crc32.append(e),r}async flush(){const e=this;let t,r=new Uint8Array(0);if(e.compressed&&(r=await e.deflate.flush()||new Uint8Array(0)),e.encrypted){r=await e.encrypt.append(r);const n=e.encrypt.flush();t=n.signature;const o=new Uint8Array(r.length+n.data.length);o.set(r,0),o.set(n.data,r.length),r=o}return e.encrypted&&!e.zipCrypto||!e.signed||(t=e.crc32.get()),{data:r,signature:t}}}const nr="init",or="append",ar="flush";let ir=!0;const sr=(e,t,r,n,o,a,i)=>(Object.assign(e,{busy:!0,codecConstructor:t,options:Object.assign({},r),scripts:i,terminate(){e.worker&&!e.busy&&(e.worker.terminate(),e.interface=null)},onTaskFinished(){e.busy=!1,o(e)}}),a?function(e,t){let r;const n={type:"module"};if(!e.interface){if(ir)try{e.worker=o()}catch(t){ir=!1,e.worker=o(n)}else e.worker=o(n);e.worker.addEventListener("message",(function(t){const n=t.data;if(r){const t=n.error,o=n.type;if(t){const n=new Error(t.message);n.stack=t.stack,r.reject(n),r=null,e.onTaskFinished()}else if(o==nr||o==ar||o==or){const t=n.data;o==ar?(r.resolve({data:new Uint8Array(t),signature:n.signature}),r=null,e.onTaskFinished()):r.resolve(t&&new Uint8Array(t))}}}),!1),e.interface={append:e=>a({type:or,data:e}),flush:()=>a({type:ar})}}return e.interface;function o(t={}){return new Worker(new URL(e.scripts[0],"file:///builds/dashlane/teams/code/webproduct/extension-monorepo/node_modules/.pnpm/@zip.js+zip.js@2.3.17/node_modules/@zip.js/zip.js/lib/core/codecs/codec-pool-worker.js"),t)}async function a(n){if(!r){const r=e.options,n=e.scripts.slice(1);await i({scripts:n,type:nr,options:r,config:{chunkSize:t.chunkSize}})}return i(n)}function i(t){const n=e.worker,o=new Promise(((e,t)=>r={resolve:e,reject:t}));try{if(t.data)try{t.data=t.data.buffer,n.postMessage(t,[t.data])}catch(e){n.postMessage(t)}else n.postMessage(t)}catch(t){r.reject(t),r=null,e.onTaskFinished()}return o}}(e,n):function(e,t){const r=function(e,t,r){return t.codecType.startsWith(Xt)?new rr(e,t,r):t.codecType.startsWith(Jt)?new tr(e,t,r):void 0}(e.codecConstructor,e.options,t);return{async append(t){try{return await r.append(t)}catch(t){throw e.onTaskFinished(),t}},async flush(){try{return await r.flush()}finally{e.onTaskFinished()}}}}(e,n));let cr=[],ur=[];function lr(e,t,r){const n=!(!t.compressed&&!t.signed&&!t.encrypted)&&(t.useWebWorkers||void 0===t.useWebWorkers&&r.useWebWorkers),o=n&&r.workerScripts?r.workerScripts[t.codecType]:[];if(cr.length<r.maxWorkers){const i={};return cr.push(i),sr(i,e,t,r,a,n,o)}{const i=cr.find((e=>!e.busy));return i?(dr(i),sr(i,e,t,r,a,n,o)):new Promise((r=>ur.push({resolve:r,codecConstructor:e,options:t,webWorker:n,scripts:o})))}function a(e){if(ur.length){const[{resolve:t,codecConstructor:n,options:o,webWorker:i,scripts:s}]=ur.splice(0,1);t(sr(e,n,o,r,a,i,s))}else e.worker?(dr(e),Number.isFinite(r.terminateWorkerTimeout)&&r.terminateWorkerTimeout>=0&&(e.terminateTimeout=setTimeout((()=>{cr=cr.filter((t=>t!=e)),e.terminate()}),r.terminateWorkerTimeout))):cr=cr.filter((t=>t!=e))}}function dr(e){e.terminateTimeout&&(clearTimeout(e.terminateTimeout),e.terminateTimeout=null)}function pr(){cr.forEach((e=>{dr(e),e.terminate()}))}const fr=(e,t={},r)=>({Deflate:gr(e.Deflate,t.deflate,r),Inflate:gr(e.Inflate,t.inflate,r)});function gr(e,t,r){return class{constructor(n){const o=this;o.codec=new e(Object.assign({},t,n)),r(o.codec,(e=>{if(o.pendingData){const t=o.pendingData;o.pendingData=new Uint8Array(t.length+e.length),o.pendingData.set(t,0),o.pendingData.set(e,t.length)}else o.pendingData=new Uint8Array(e)}))}async append(e){return this.codec.push(e),n(this)}async flush(){return this.codec.push(new Uint8Array(0),!0),n(this)}};function n(e){if(e.pendingData){const t=e.pendingData;return e.pendingData=null,t}return new Uint8Array(0)}}const mr="HTTP error ",hr="HTTP Range not supported",yr="text/plain",Sr="Content-Length",vr="Accept-Ranges",Er="Range",Ar="HEAD",_r="GET",br="bytes";class Tr{constructor(){this.size=0}init(){this.initialized=!0}}class Ir extends Tr{}class wr extends Tr{writeUint8Array(e){this.size+=e.length}}class Cr extends Ir{constructor(e){super(),this.blobReader=new Nr(new Blob([e],{type:yr}))}async init(){super.init(),this.blobReader.init(),this.size=this.blobReader.size}async readUint8Array(e,t){return this.blobReader.readUint8Array(e,t)}}class Or extends wr{constructor(e){super(),this.encoding=e,this.blob=new Blob([],{type:yr})}async writeUint8Array(e){super.writeUint8Array(e),this.blob=new Blob([this.blob,e.buffer],{type:yr})}getData(){const e=new FileReader;return new Promise(((t,r)=>{e.onload=e=>t(e.target.result),e.onerror=()=>r(e.error),e.readAsText(this.blob,this.encoding)}))}}class Dr extends Ir{constructor(e){super(),this.dataURI=e;let t=e.length;for(;"="==e.charAt(t-1);)t--;this.dataStart=e.indexOf(",")+1,this.size=Math.floor(.75*(t-this.dataStart))}async readUint8Array(e,t){const r=new Uint8Array(t),n=4*Math.floor(e/3),o=atob(this.dataURI.substring(n+this.dataStart,4*Math.ceil((e+t)/3)+this.dataStart)),a=e-3*Math.floor(n/4);for(let e=a;e<a+t;e++)r[e-a]=o.charCodeAt(e);return r}}class Pr extends wr{constructor(e){super(),this.data="data:"+(e||"")+";base64,",this.pending=[]}async writeUint8Array(e){super.writeUint8Array(e);let t=0,r=this.pending;const n=this.pending.length;for(this.pending="",t=0;t<3*Math.floor((n+e.length)/3)-n;t++)r+=String.fromCharCode(e[t]);for(;t<e.length;t++)this.pending+=String.fromCharCode(e[t]);r.length>2?this.data+=btoa(r):this.pending=r}getData(){return this.data+btoa(this.pending)}}class Nr extends Ir{constructor(e){super(),this.blob=e,this.size=e.size}async readUint8Array(e,t){const r=new FileReader;return new Promise(((n,o)=>{r.onload=e=>n(new Uint8Array(e.target.result)),r.onerror=()=>o(r.error),r.readAsArrayBuffer(this.blob.slice(e,e+t))}))}}class Rr extends wr{constructor(e){super(),this.contentType=e,this.arrayBuffers=[]}async writeUint8Array(e){super.writeUint8Array(e),this.arrayBuffers.push(e.buffer)}getData(){return this.blob||(this.blob=new Blob(this.arrayBuffers,{type:this.contentType})),this.blob}}class Ur extends Ir{constructor(e,t){super(),this.url=e,this.preventHeadRequest=t.preventHeadRequest,this.useRangeHeader=t.useRangeHeader,this.forceRangeRequests=t.forceRangeRequests,this.options=Object.assign({},t),delete this.options.preventHeadRequest,delete this.options.useRangeHeader,delete this.options.forceRangeRequests,delete this.options.useXHR}async init(){if(super.init(),$r(this.url)&&!this.preventHeadRequest){const e=await Mr(Ar,this.url,this.options);if(this.size=Number(e.headers.get(Sr)),!this.forceRangeRequests&&this.useRangeHeader&&e.headers.get(vr)!=br)throw new Error(hr);void 0===this.size&&await Lr(this,this.options)}else await Lr(this,this.options)}async readUint8Array(e,t){if(this.useRangeHeader){const r=await Mr(_r,this.url,this.options,Object.assign({},this.options.headers,{[Er]:br+"="+e+"-"+(e+t-1)}));if(206!=r.status)throw new Error(hr);return new Uint8Array(await r.arrayBuffer())}return this.data||await Lr(this,this.options),new Uint8Array(this.data.subarray(e,e+t))}}async function Lr(e,t){const r=await Mr(_r,e.url,t);e.data=new Uint8Array(await r.arrayBuffer()),e.size||(e.size=e.data.length)}async function Mr(e,t,r,n){n=Object.assign({},r.headers,n);const o=await fetch(t,Object.assign({},r,{method:e,headers:n}));if(o.status<400)return o;throw new Error(mr+(o.statusText||o.status))}class kr extends Ir{constructor(e,t){super(),this.url=e,this.preventHeadRequest=t.preventHeadRequest,this.useRangeHeader=t.useRangeHeader,this.forceRangeRequests=t.forceRangeRequests}async init(){if(super.init(),$r(this.url)&&!this.preventHeadRequest)return new Promise(((e,t)=>Fr(Ar,this.url,(r=>{this.size=Number(r.getResponseHeader(Sr)),this.useRangeHeader?this.forceRangeRequests||r.getResponseHeader(vr)==br?e():t(new Error(hr)):void 0===this.size?Br(this,this.url).then((()=>e())).catch(t):e()}),t)));await Br(this,this.url)}async readUint8Array(e,t){if(this.useRangeHeader){const r=await new Promise(((r,n)=>Fr(_r,this.url,(e=>r(e)),n,[[Er,br+"="+e+"-"+(e+t-1)]])));if(206!=r.status)throw new Error(hr);return new Uint8Array(r.response)}return this.data||await Br(this,this.url),new Uint8Array(this.data.subarray(e,e+t))}}function Br(e,t){return new Promise(((r,n)=>Fr(_r,t,(t=>{e.data=new Uint8Array(t.response),e.size||(e.size=e.data.length),r()}),n)))}function Fr(e,t,r,n,o=[]){const a=new XMLHttpRequest;return a.addEventListener("load",(()=>{a.status<400?r(a):n(mr+(a.statusText||a.status))}),!1),a.addEventListener("error",n,!1),a.open(e,t),o.forEach((e=>a.setRequestHeader(e[0],e[1]))),a.responseType="arraybuffer",a.send(),a}class xr extends Ir{constructor(e,t={}){super(),this.url=e,t.useXHR?this.reader=new kr(e,t):this.reader=new Ur(e,t)}set size(e){}get size(){return this.reader.size}async init(){super.init(),await this.reader.init()}async readUint8Array(e,t){return this.reader.readUint8Array(e,t)}}class Gr extends xr{constructor(e,t={}){t.useRangeHeader=!0,super(e,t)}}class jr extends Ir{constructor(e){super(),this.array=e,this.size=e.length}async readUint8Array(e,t){return this.array.slice(e,e+t)}}class Kr extends wr{constructor(){super(),this.array=new Uint8Array(0)}async writeUint8Array(e){super.writeUint8Array(e);const t=this.array;this.array=new Uint8Array(t.length+e.length),this.array.set(t),this.array.set(e,t.length)}getData(){return this.array}}function $r(e){if("undefined"!=typeof document){const t=document.createElement("a");return t.href=e,"http:"==t.protocol||"https:"==t.protocol}return/^https?:\/\//i.test(e)}const Vr=4294967295,Hr=65535,Wr=67324752,zr=33639248,qr=101010256,Yr=101075792,Qr=117853008,Zr=1,Xr=39169,Jr=10,en=1,tn=21589,rn=28789,nn=25461,on=1,an=6,sn=8,cn=2048,un="/",ln=new Date(2107,11,31),dn=new Date(1980,0,1),pn="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ".split(""),fn=e=>{let t="";for(let r=0;r<e.length;r++)t+=pn[e[r]];return t},gn=64,mn="Abort error";async function hn(e,t,r,n,o,a,i){const s=Math.max(a.chunkSize,gn);return async function a(c=0,u=0){const l=i.signal;if(c<o){yn(l,e);const d=await t.readUint8Array(c+n,Math.min(s,o-c)),p=d.length;yn(l,e);const f=await e.append(d);if(yn(l,e),u+=await Sn(r,f),i.onprogress)try{i.onprogress(c+p,o)}catch(e){}return a(c+s,u)}{const t=await e.flush();return u+=await Sn(r,t.data),{signature:t.signature,length:u}}}()}function yn(e,t){if(e&&e.aborted)throw t.flush(),new Error(mn)}async function Sn(e,t){return t.length&&await e.writeUint8Array(t),t.length}const vn=["filename","rawFilename","directory","encrypted","compressedSize","uncompressedSize","lastModDate","rawLastModDate","comment","rawComment","signature","extraField","rawExtraField","bitFlag","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","filenameUTF8","commentUTF8","offset","zip64","compressionMethod","extraFieldNTFS","lastAccessDate","creationDate","extraFieldExtendedTimestamp","version","versionMadeBy","msDosCompatible","internalFileAttribute","externalFileAttribute"];class En{constructor(e){vn.forEach((t=>this[t]=e[t]))}}const An="File format is not recognized",_n="End of central directory not found",bn="End of Zip64 central directory not found",Tn="End of Zip64 central directory locator not found",In="Central directory header not found",wn="Local file header not found",Cn="Zip64 extra field not found",On="File contains encrypted entry",Dn="Encryption method not supported",Pn="Compression method not supported",Nn="utf-8",Rn=["uncompressedSize","compressedSize","offset"];class Un{constructor(e,t={}){Object.assign(this,{reader:e,options:t,config:ut()})}async getEntries(e={}){const t=this,r=t.reader;if(r.initialized||await r.init(),r.size<22)throw new Error(An);const n=await async function(e,t,r,n,o){const a=new Uint8Array(4);!function(e,t,r){e.setUint32(0,101010256,!0)}(Wn(a));return await i(22)||await i(Math.min(1048582,r));async function i(t){const n=r-t,o=await zn(e,n,t);for(let e=o.length-22;e>=0;e--)if(o[e]==a[0]&&o[e+1]==a[1]&&o[e+2]==a[2]&&o[e+3]==a[3])return{offset:n+e,buffer:o.slice(e,e+22).buffer}}}(r,0,r.size);if(!n)throw new Error(_n);const o=Wn(n);let a=Vn(o,12),i=Vn(o,16),s=$n(o,8),c=0;if(i==Vr||a==Vr||s==Hr){const e=Wn(await zn(r,n.offset-20,20));if(Vn(e,0)!=Qr)throw new Error(bn);i=Hn(e,8);let t=await zn(r,i,56),o=Wn(t);const u=n.offset-20-56;if(Vn(o,0)!=Yr&&i!=u){const e=i;i=u,c=i-e,t=await zn(r,i,56),o=Wn(t)}if(Vn(o,0)!=Yr)throw new Error(Tn);s=Hn(o,32),a=Hn(o,40),i-=a}if(i<0||i>=r.size)throw new Error(An);let u=0,l=await zn(r,i,a),d=Wn(l);const p=n.offset-a;if(Vn(d,u)!=zr&&i!=p){const e=i;i=p,c=i-e,l=await zn(r,i,a),d=Wn(l)}if(i<0||i>=r.size)throw new Error(An);const f=[];for(let n=0;n<s;n++){const o=new Ln(r,t.config,t.options);if(Vn(d,u)!=zr)throw new Error(In);Mn(o,d,u+6);const a=Boolean(o.bitFlag.languageEncodingFlag),i=u+46,p=i+o.filenameLength,g=p+o.extraFieldLength,m=$n(d,u+4),h=0==(0&m);Object.assign(o,{versionMadeBy:m,msDosCompatible:h,compressedSize:0,uncompressedSize:0,commentLength:$n(d,u+32),directory:h&&16==(16&Kn(d,u+38)),offset:Vn(d,u+42)+c,internalFileAttribute:Vn(d,u+34),externalFileAttribute:Vn(d,u+38),rawFilename:l.subarray(i,p),filenameUTF8:a,commentUTF8:a,rawExtraField:l.subarray(p,g)});const y=g+o.commentLength;o.rawComment=l.subarray(g,y),o.filename=xn(o.rawFilename,o.filenameUTF8?Nn:Fn(t,e,"filenameEncoding")),o.comment=xn(o.rawComment,o.commentUTF8?Nn:Fn(t,e,"commentEncoding")),!o.directory&&o.filename.endsWith(un)&&(o.directory=!0),kn(o,o,d,u+6);const S=new En(o);if(S.getData=(e,t)=>o.getData(e,S,t),f.push(S),u=y,e.onprogress)try{e.onprogress(n+1,s,new En(o))}catch(e){}}return f}async close(){}}class Ln{constructor(e,t,r){Object.assign(this,{reader:e,config:t,options:r})}async getData(e,t,r={}){const n=this,{reader:o,offset:a,extraFieldAES:i,compressionMethod:s,config:c,bitFlag:u,signature:l,rawLastModDate:d,compressedSize:p}=n,f=n.localDirectory={};o.initialized||await o.init();let g=await zn(o,a,30);const m=Wn(g);let h=Fn(n,r,"password");if(h=h&&h.length&&h,i&&99!=i.originalCompressionMethod)throw new Error(Pn);if(0!=s&&8!=s)throw new Error(Pn);if(Vn(m,0)!=Wr)throw new Error(wn);Mn(f,m,4),g=await zn(o,a,30+f.filenameLength+f.extraFieldLength),f.rawExtraField=g.subarray(30+f.filenameLength),kn(n,f,m,4),t.lastAccessDate=f.lastAccessDate,t.creationDate=f.creationDate;const y=n.encrypted&&f.encrypted,S=y&&!i;if(y){if(!S&&void 0===i.strength)throw new Error(Dn);if(!h)throw new Error(On)}const v=await lr(c.Inflate,{codecType:Jt,password:h,zipCrypto:S,encryptionStrength:i&&i.strength,signed:Fn(n,r,"checkSignature"),passwordVerification:S&&(u.dataDescriptor?d>>>8&255:l>>>24&255),signature:l,compressed:0!=s,encrypted:y,useWebWorkers:Fn(n,r,"useWebWorkers")},c);e.initialized||await e.init();const E=Fn(n,r,"signal"),A=a+30+f.filenameLength+f.extraFieldLength;return await hn(v,o,e,A,p,c,{onprogress:r.onprogress,signal:E}),e.getData()}}function Mn(e,t,r){const n=e.rawBitFlag=$n(t,r+2),o=(n&on)==on,a=Vn(t,r+6);Object.assign(e,{encrypted:o,version:$n(t,r),bitFlag:{level:(n&an)>>1,dataDescriptor:(n&sn)==sn,languageEncodingFlag:(n&cn)==cn},rawLastModDate:a,lastModDate:Gn(a),filenameLength:$n(t,r+22),extraFieldLength:$n(t,r+24)})}function kn(e,t,r,n){const o=t.rawExtraField,a=t.extraField=new Map,i=Wn(new Uint8Array(o));let s=0;try{for(;s<o.length;){const e=$n(i,s),t=$n(i,s+2);a.set(e,{type:e,data:o.slice(s+4,s+4+t)}),s+=4+t}}catch(e){}const c=$n(r,n+4);t.signature=Vn(r,n+10),t.uncompressedSize=Vn(r,n+18),t.compressedSize=Vn(r,n+14);const u=a.get(Zr);u&&(function(e,t){t.zip64=!0;const r=Wn(e.data);e.values=[];for(let t=0;t<Math.floor(e.data.length/8);t++)e.values.push(Hn(r,0+8*t));const n=Rn.filter((e=>t[e]==Vr));for(let t=0;t<n.length;t++)e[n[t]]=e.values[t];Rn.forEach((r=>{if(t[r]==Vr){if(void 0===e[r])throw new Error(Cn);t[r]=e[r]}}))}(u,t),t.extraFieldZip64=u);const l=a.get(rn);l&&(Bn(l,"filename","rawFilename",t,e),t.extraFieldUnicodePath=l);const d=a.get(nn);d&&(Bn(d,"comment","rawComment",t,e),t.extraFieldUnicodeComment=d);const p=a.get(Xr);p?(function(e,t,r){const n=Wn(e.data);e.vendorVersion=Kn(n,0),e.vendorId=Kn(n,2);const o=Kn(n,4);e.strength=o,e.originalCompressionMethod=r,t.compressionMethod=e.compressionMethod=$n(n,5)}(p,t,c),t.extraFieldAES=p):t.compressionMethod=c;const f=a.get(Jr);f&&(function(e,t){const r=Wn(e.data);let n,o=4;try{for(;o<e.data.length&&!n;){const t=$n(r,o),a=$n(r,o+2);t==en&&(n=e.data.slice(o+4,o+4+a)),o+=4+a}}catch(e){}try{if(n&&24==n.length){const r=Wn(n),o=r.getBigUint64(0,!0),a=r.getBigUint64(8,!0),i=r.getBigUint64(16,!0);Object.assign(e,{rawLastModDate:o,rawLastAccessDate:a,rawCreationDate:i});const s=jn(o),c={lastModDate:s,lastAccessDate:jn(a),creationDate:jn(i)};Object.assign(e,c),Object.assign(t,c)}}catch(e){}}(f,t),t.extraFieldNTFS=f);const g=a.get(tn);g&&(function(e,t){const r=Wn(e.data),n=Kn(r,0),o=[],a=[];1==(1&n)&&(o.push("lastModDate"),a.push("rawLastModDate")),2==(2&n)&&(o.push("lastAccessDate"),a.push("rawLastAccessDate")),4==(4&n)&&(o.push("creationDate"),a.push("rawCreationDate"));let i=1;o.forEach(((n,o)=>{if(e.data.length>=i+4){const s=Vn(r,i);t[n]=e[n]=new Date(1e3*s);const c=a[o];e[c]=s}i+=4}))}(g,t),t.extraFieldExtendedTimestamp=g)}function Bn(e,t,r,n,o){const a=Wn(e.data);e.version=Kn(a,0),e.signature=Vn(a,1);const i=new mt;i.append(o[r]);const s=Wn(new Uint8Array(4));s.setUint32(0,i.get(),!0),e[t]=(new TextDecoder).decode(e.data.subarray(5)),e.valid=!o.bitFlag.languageEncodingFlag&&e.signature==Vn(s,0),e.valid&&(n[t]=e[t],n[t+"UTF8"]=!0)}function Fn(e,t,r){return void 0===t[r]?e.options[r]:t[r]}function xn(e,t){return t&&"cp437"!=t.trim().toLowerCase()?new TextDecoder(t).decode(e):fn(e)}function Gn(e){const t=(4294901760&e)>>16,r=65535&e;try{return new Date(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&r)>>11,(2016&r)>>5,2*(31&r),0)}catch(e){}}function jn(e){return new Date(Number(e/BigInt(1e4)-BigInt(116444736e5)))}function Kn(e,t){return e.getUint8(t)}function $n(e,t){return e.getUint16(t,!0)}function Vn(e,t){return e.getUint32(t,!0)}function Hn(e,t){return Number(e.getBigUint64(t,!0))}function Wn(e){return new DataView(e.buffer)}function zn(e,t,r){return e.readUint8Array(t,r)}const qn="File already exists",Yn="Zip file comment exceeds 64KB",Qn="File entry comment exceeds 64KB",Zn="File entry name exceeds 64KB",Xn="Version exceeds 65535",Jn="The strength must equal 1, 2, or 3",eo="Extra field type exceeds 65535",to="Extra field data exceeds 64KB",ro="Zip64 is not supported",no=new Uint8Array([7,0,2,0,65,69,3,0,0]);let oo=0;class ao{constructor(e,t={}){Object.assign(this,{writer:e,options:t,config:ut(),files:new Map,offset:e.size,pendingCompressedSize:0,pendingEntries:[]})}async add(e="",t,r={}){const n=this;if(!(oo<n.config.maxWorkers))return new Promise(((o,a)=>n.pendingEntries.push({name:e,reader:t,options:r,resolve:o,reject:a})));oo++;try{return await async function(e,t,r,n){if(t=t.trim(),n.directory&&!t.endsWith(un)?t+=un:n.directory=t.endsWith(un),e.files.has(t))throw new Error(qn);const o=(new TextEncoder).encode(t);if(o.length>Hr)throw new Error(Zn);const a=n.comment||"",i=(new TextEncoder).encode(a);if(i.length>Hr)throw new Error(Qn);const s=e.options.version||n.version||0;if(s>Hr)throw new Error(Xn);const c=e.options.versionMadeBy||n.versionMadeBy||20;if(c>Hr)throw new Error(Xn);const u=co(e,n,"lastModDate")||new Date,l=co(e,n,"lastAccessDate"),d=co(e,n,"creationDate"),p=co(e,n,"password"),f=co(e,n,"encryptionStrength")||3,g=co(e,n,"zipCrypto");if(void 0!==p&&void 0!==f&&(f<1||f>3))throw new Error(Jn);let m=new Uint8Array(0);const h=n.extraField;if(h){let e=0,t=0;h.forEach((t=>e+=4+t.length)),m=new Uint8Array(e),h.forEach(((e,r)=>{if(r>Hr)throw new Error(eo);if(e.length>Hr)throw new Error(to);go(m,new Uint16Array([r]),t),go(m,new Uint16Array([e.length]),t+2),go(m,e,t+4),t+=4+e.length}))}let y=co(e,n,"extendedTimestamp");void 0===y&&(y=!0);let S=0,v=co(e,n,"keepOrder");void 0===v&&(v=!0);let E=0,A=co(e,n,"msDosCompatible");void 0===A&&(A=!0);const _=co(e,n,"internalFileAttribute")||0,b=co(e,n,"externalFileAttribute")||0;r&&(r.initialized||await r.init(),E=r.size,S=function(e){return e+5*(Math.floor(e/16383)+1)}(E));let T=n.zip64||e.options.zip64||!1;if(e.offset+e.pendingCompressedSize>=Vr||E>=Vr||S>=Vr){if(!1===n.zip64||!1===e.options.zip64||!v)throw new Error(ro);T=!0}e.pendingCompressedSize+=S,await Promise.resolve();const I=co(e,n,"level"),w=co(e,n,"useWebWorkers"),C=co(e,n,"bufferedWrite");let O=co(e,n,"dataDescriptor"),D=co(e,n,"dataDescriptorSignature");const P=co(e,n,"signal");void 0===O&&(O=!0),O&&void 0===D&&(D=!0);const N=await async function(e,t,r,n){const o=e.files,a=e.writer,i=Array.from(o.values()).pop();let s,c,u,l={};o.set(t,l);try{let d,p,f;if(n.keepOrder&&(d=i&&i.lock),l.lock=f=new Promise((e=>u=e)),n.bufferedWrite||e.lockWrite||!n.dataDescriptor?(p=new Rr,p.init(),s=!0):(e.lockWrite=new Promise((e=>c=e)),a.initialized||await a.init(),p=a),l=await async function(e,t,r,n){const{rawFilename:o,lastAccessDate:a,creationDate:i,password:s,level:c,zip64:u,zipCrypto:l,dataDescriptor:d,dataDescriptorSignature:p,directory:f,version:g,versionMadeBy:m,rawComment:h,rawExtraField:y,useWebWorkers:S,onprogress:v,signal:E,encryptionStrength:A,extendedTimestamp:_,msDosCompatible:b,internalFileAttribute:T,externalFileAttribute:I}=n,w=Boolean(s&&s.length),C=0!==c&&!f;let O,D,P;if(w&&!l){O=new Uint8Array(no.length+2);const e=mo(O);lo(e,0,Xr),go(O,no,2),uo(e,8,A)}else O=new Uint8Array(0);if(_){P=new Uint8Array(9+(a?4:0)+(i?4:0));const t=mo(P);lo(t,0,tn),lo(t,2,P.length-4),uo(t,4,1+(a?2:0)+(i?4:0)),po(t,5,Math.floor(n.lastModDate.getTime()/1e3)),a&&po(t,9,Math.floor(a.getTime()/1e3)),i&&po(t,13,Math.floor(i.getTime()/1e3));try{D=new Uint8Array(36);const e=mo(D),t=so(n.lastModDate);lo(e,0,Jr),lo(e,2,32),lo(e,8,en),lo(e,10,24),fo(e,12,t),fo(e,20,so(a)||t),fo(e,28,so(i)||t)}catch(e){D=new Uint8Array(0)}}else D=P=new Uint8Array(0);const N={version:g||20,versionMadeBy:m,zip64:u,directory:Boolean(f),filenameUTF8:!0,rawFilename:o,commentUTF8:!0,rawComment:h,rawExtraFieldZip64:u?new Uint8Array(28):new Uint8Array(0),rawExtraFieldExtendedTimestamp:P,rawExtraFieldNTFS:D,rawExtraFieldAES:O,rawExtraField:y,extendedTimestamp:_,msDosCompatible:b,internalFileAttribute:T,externalFileAttribute:I};let R=N.uncompressedSize=0,U=cn;d&&(U|=sn);let L=0;C&&(L=8),u&&(N.version=N.version>45?N.version:45),w&&(U|=on,l||(N.version=N.version>51?N.version:51,L=99,C&&(N.rawExtraFieldAES[9]=8))),N.compressionMethod=L;const M=N.headerArray=new Uint8Array(26),k=mo(M);lo(k,0,N.version),lo(k,2,U),lo(k,4,L);const B=new Uint32Array(1),F=mo(B);let x;x=n.lastModDate<dn?dn:n.lastModDate>ln?ln:n.lastModDate,lo(F,0,(x.getHours()<<6|x.getMinutes())<<5|x.getSeconds()/2),lo(F,2,(x.getFullYear()-1980<<4|x.getMonth()+1)<<5|x.getDate());const G=B[0];po(k,6,G),lo(k,22,o.length);const j=O.length+P.length+D.length+N.rawExtraField.length;lo(k,24,j);const K=new Uint8Array(30+o.length+j);let $;po(mo(K),0,Wr),go(K,M,4),go(K,o,30),go(K,O,30+o.length),go(K,P,30+o.length+O.length),go(K,D,30+o.length+O.length+P.length),go(K,N.rawExtraField,30+o.length+O.length+P.length+D.length);let V=0;if(e){R=N.uncompressedSize=e.size;const n=await lr(r.Deflate,{codecType:Xt,level:c,password:s,encryptionStrength:A,zipCrypto:w&&l,passwordVerification:w&&l&&G>>8&255,signed:!0,compressed:C,encrypted:w,useWebWorkers:S},r);await t.writeUint8Array(K),N.dataWritten=!0,$=await hn(n,e,t,0,R,r,{onprogress:v,signal:E}),V=$.length}else await t.writeUint8Array(K),N.dataWritten=!0;let H,W=new Uint8Array(0),z=0;if(d&&(W=new Uint8Array(u?p?24:20:p?16:12),H=mo(W),p&&(z=4,po(H,0,134695760))),e){const e=$.signature;if(w&&!l||void 0===e||(po(k,10,e),N.signature=e,d&&po(H,z,e)),u){const e=mo(N.rawExtraFieldZip64);lo(e,0,Zr),lo(e,2,24),po(k,14,Vr),fo(e,12,BigInt(V)),po(k,18,Vr),fo(e,4,BigInt(R)),d&&(fo(H,z+4,BigInt(V)),fo(H,z+12,BigInt(R)))}else po(k,14,V),po(k,18,R),d&&(po(H,z+4,V),po(H,z+8,R))}d&&await t.writeUint8Array(W);const q=K.length+V+W.length;return Object.assign(N,{compressedSize:V,lastModDate:x,rawLastModDate:G,creationDate:i,lastAccessDate:a,encrypted:w,length:q}),N}(r,p,e.config,n),l.lock=f,o.set(t,l),l.filename=t,s){let t=0;const r=p.getData();let i;await Promise.all([e.lockWrite,d]);do{i=Array.from(o.values()).find((e=>e.writingBufferedData)),i&&await i.lock}while(i&&i.lock);if(l.writingBufferedData=!0,!n.dataDescriptor){const e=26,o=await io(r,0,e),i=new DataView(o);l.encrypted&&!n.zipCrypto||po(i,14,l.signature),l.zip64?(po(i,18,Vr),po(i,22,Vr)):(po(i,18,l.compressedSize),po(i,22,l.uncompressedSize)),await a.writeUint8Array(new Uint8Array(o)),t=e}await async function(e,t,r=0){const n=536870912;await async function o(){if(r<t.size){const a=await io(t,r,r+n);await e.writeUint8Array(new Uint8Array(a)),r+=n,await o()}}()}(a,r,t),delete l.writingBufferedData}if(l.offset=e.offset,l.zip64)fo(mo(l.rawExtraFieldZip64),20,BigInt(l.offset));else if(l.offset>=Vr)throw new Error(ro);return e.offset+=l.length,l}catch(r){throw(s&&l.writingBufferedData||!s&&l.dataWritten)&&(r.corruptedEntry=e.hasCorruptedEntries=!0,l.uncompressedSize&&(e.offset+=l.uncompressedSize)),o.delete(t),r}finally{u(),c&&c()}}(e,t,r,Object.assign({},n,{rawFilename:o,rawComment:i,version:s,versionMadeBy:c,lastModDate:u,lastAccessDate:l,creationDate:d,rawExtraField:m,zip64:T,password:p,level:I,useWebWorkers:w,encryptionStrength:f,extendedTimestamp:y,zipCrypto:g,bufferedWrite:C,keepOrder:v,dataDescriptor:O,dataDescriptorSignature:D,signal:P,msDosCompatible:A,internalFileAttribute:_,externalFileAttribute:b}));return S&&(e.pendingCompressedSize-=S),Object.assign(N,{name:t,comment:a,extraField:h}),new En(N)}(n,e,t,r)}finally{oo--;const e=n.pendingEntries.shift();e&&n.add(e.name,e.reader,e.options).then(e.resolve).catch(e.reject)}}async close(e=new Uint8Array(0),t={}){return await async function(e,t,r){const n=e.writer,o=e.files;let a=0,i=0,s=e.offset,c=o.size;for(const[,e]of o)i+=46+e.rawFilename.length+e.rawComment.length+e.rawExtraFieldZip64.length+e.rawExtraFieldAES.length+e.rawExtraFieldExtendedTimestamp.length+e.rawExtraFieldNTFS.length+e.rawExtraField.length;let u=r.zip64||e.options.zip64||!1;if(s>=Vr||i>=Vr||c>=Hr){if(!1===r.zip64||!1===e.options.zip64)throw new Error(ro);u=!0}const l=new Uint8Array(i+(u?98:22)),d=mo(l);if(t&&t.length){if(!(t.length<=Hr))throw new Error(Yn);lo(d,a+20,t.length)}for(const[t,n]of Array.from(o.values()).entries()){const{rawFilename:i,rawExtraFieldZip64:s,rawExtraFieldAES:c,rawExtraField:u,rawComment:p,versionMadeBy:f,headerArray:g,directory:m,zip64:h,msDosCompatible:y,internalFileAttribute:S,externalFileAttribute:v}=n;let E,A;if(n.extendedTimestamp){A=n.rawExtraFieldNTFS,E=new Uint8Array(9);const e=mo(E);lo(e,0,tn),lo(e,2,E.length-4),uo(e,4,1),po(e,5,Math.floor(n.lastModDate.getTime()/1e3))}else A=E=new Uint8Array(0);const _=s.length+c.length+E.length+A.length+u.length;if(po(d,a,zr),lo(d,a+4,f),go(l,g,a+6),lo(d,a+30,_),lo(d,a+32,p.length),po(d,a+34,S),v?po(d,a+38,v):m&&y&&uo(d,a+38,16),po(d,a+42,h?Vr:n.offset),go(l,i,a+46),go(l,s,a+46+i.length),go(l,c,a+46+i.length+s.length),go(l,E,a+46+i.length+s.length+c.length),go(l,A,a+46+i.length+s.length+c.length+E.length),go(l,u,a+46+i.length+s.length+c.length+E.length+A.length),go(l,p,a+46+i.length+_),a+=46+i.length+_+p.length,r.onprogress)try{r.onprogress(t+1,o.size,new En(n))}catch(e){}}u&&(po(d,a,Yr),fo(d,a+4,BigInt(44)),lo(d,a+12,45),lo(d,a+14,45),fo(d,a+24,BigInt(c)),fo(d,a+32,BigInt(c)),fo(d,a+40,BigInt(i)),fo(d,a+48,BigInt(s)),po(d,a+56,Qr),fo(d,a+64,BigInt(s)+BigInt(i)),po(d,a+72,1),c=Hr,s=Vr,i=Vr,a+=76),po(d,a,qr),lo(d,a+8,c),lo(d,a+10,c),po(d,a+12,i),po(d,a+16,s),await n.writeUint8Array(l),t&&t.length&&await n.writeUint8Array(t)}(this,e,t),this.writer.getData()}}function io(e,t,r){const n=new FileReader;return new Promise(((o,a)=>{n.onload=e=>o(e.target.result),n.onerror=()=>a(n.error),n.readAsArrayBuffer(t||r?e.slice(t,r):e)}))}function so(e){if(e)return(BigInt(e.getTime())+BigInt(116444736e5))*BigInt(1e4)}function co(e,t,r){return void 0===t[r]?e.options[r]:t[r]}function uo(e,t,r){e.setUint8(t,r)}function lo(e,t,r){e.setUint16(t,r,!0)}function po(e,t,r){e.setUint32(t,r,!0)}function fo(e,t,r){e.setBigUint64(t,r,!0)}function go(e,t,r){e.set(t,r)}function mo(e){return new DataView(e.buffer)}const ho=524288;class yo{constructor(e,t,r,n){const o=this;if(e.root&&n&&n.getChildByName(t))throw new Error("Entry filename already exists");r||(r={}),Object.assign(o,{fs:e,name:t,data:r.data,id:e.entries.length,parent:n,children:[],uncompressedSize:0}),e.entries.push(o),n&&o.parent.children.push(o)}moveTo(e){this.fs.move(this,e)}getFullname(){return this.getRelativeName()}getRelativeName(e=this.fs.root){let t=this.name,r=this.parent;for(;r&&r!=e;)t=(r.name?r.name+"/":"")+t,r=r.parent;return t}isDescendantOf(e){let t=this.parent;for(;t&&t.id!=e.id;)t=t.parent;return Boolean(t)}}class So extends yo{constructor(e,t,r,n){super(e,t,r,n);const o=this;o.Reader=r.Reader,o.Writer=r.Writer,r.getData&&(o.getData=r.getData)}async getData(e,t={}){const r=this;return!e||e.constructor==r.Writer&&r.data?r.data:(r.reader=new r.Reader(r.data,t),await r.reader.init(),e.initialized||await e.init(),r.uncompressedSize=r.reader.size,async function(e,t){return async function r(n=0){const o=n*ho;if(o<e.size){const a=await e.readUint8Array(o,Math.min(ho,e.size-o));return await t.writeUint8Array(a),r(n+1)}return t.getData()}()}(r.reader,e))}getText(e,t){return this.getData(new Or(e),t)}getBlob(e,t){return this.getData(new Rr(e),t)}getData64URI(e,t){return this.getData(new Pr(e),t)}getUint8Array(e){return this.getData(new Kr,e)}replaceBlob(e){Object.assign(this,{data:e,Reader:Nr,Writer:Rr,reader:null})}replaceText(e){Object.assign(this,{data:e,Reader:Cr,Writer:Or,reader:null})}replaceData64URI(e){Object.assign(this,{data:e,Reader:Dr,Writer:Pr,reader:null})}replaceUint8Array(e){Object.assign(this,{data:e,Reader:jr,Writer:Kr,reader:null})}}class vo extends yo{constructor(e,t,r,n){super(e,t,r,n),this.directory=!0}addDirectory(e){return Io(this,e,null,!0)}addText(e,t){return Io(this,e,{data:t,Reader:Cr,Writer:Or})}addBlob(e,t){return Io(this,e,{data:t,Reader:Nr,Writer:Rr})}addData64URI(e,t){return Io(this,e,{data:t,Reader:Dr,Writer:Pr})}addUint8Array(e,t){return Io(this,e,{data:t,Reader:jr,Writer:Kr})}addHttpContent(e,t,r={}){return Io(this,e,{data:t,Reader:class extends xr{constructor(e){super(e,r)}}})}async addFileSystemEntry(e){return async function(e,t){if(t.isDirectory){const n=e.addDirectory(t.name);return await r(n,t),n}return new Promise(((r,n)=>t.file((n=>r(e.addBlob(t.name,n))),n)));async function r(e,t){const n=await function(e){return new Promise(((t,r)=>{let n=[];function o(e){e.readEntries((r=>{r.length?(n=n.concat(r),o(e)):t(n)}),r)}e.isDirectory&&o(e.createReader()),e.isFile&&t(n)}))}(t);for(const t of n)t.isDirectory?await r(e.addDirectory(t.name),t):await new Promise(((r,n)=>{t.file((n=>{const o=e.addBlob(t.name,n);o.uncompressedSize=n.size,r(o)}),n)}))}}(this,e)}async addData(e,t){return Io(this,e,t)}async importBlob(e,t={}){await this.importZip(new Nr(e),t)}async importData64URI(e,t={}){await this.importZip(new Dr(e),t)}async importUint8Array(e,t={}){await this.importZip(new jr(e),t)}async importHttpContent(e,t={}){await this.importZip(new xr(e,t),t)}async exportBlob(e={}){return this.exportZip(new Rr("application/zip"),e)}async exportData64URI(e={}){return this.exportZip(new Pr("application/zip"),e)}async exportUint8Array(e={}){return this.exportZip(new Kr,e)}async importZip(e,t){e.initialized||await e.init();const r=new Un(e,t);(await r.getEntries()).forEach((e=>{let r=this;const n=e.filename.split("/"),o=n.pop();n.forEach((e=>r=r.getChildByName(e)||new vo(this.fs,e,null,r))),e.directory||Io(r,o,{data:e,Reader:Ao(Object.assign({},t))})}))}async exportZip(e,t){const r=this;await _o(r),await e.init();const n=new ao(e,t);return await async function(e,t,r,n){const o=t,a=new Map;await async function e(t,i){async function s(i){const s=n.relativePath?i.getRelativeName(o):i.getFullname();await t.add(s,i.reader,Object.assign({directory:i.directory},Object.assign({},n,{onprogress:e=>{if(n.onprogress){a.set(s,e);try{n.onprogress(Array.from(a.values()).reduce(((e,t)=>e+t)),r)}catch(e){}}}}))),await e(t,i)}await async function(){if(n.bufferedWrite)await Promise.all(i.children.map(s));else for(const e of i.children)await s(e)}()}(e,t)}(n,r,function(e,t){let r=0;return e.forEach((function e(t){r+=t.uncompressedSize,t.children&&t.children.forEach(e)})),r}([r]),t),await n.close(),e.getData()}getChildByName(e){const t=this.children;for(let r=0;r<t.length;r++){const n=t[r];if(n.name==e)return n}}}const Eo={FS:class{constructor(){To(this)}get children(){return this.root.children}remove(e){bo(e),this.entries[e.id]=null}move(e,t){if(e==this.root)throw new Error("Root directory cannot be moved");if(!t.directory)throw new Error("Target entry is not a directory");if(t.isDescendantOf(e))throw new Error("Entry is a ancestor of target entry");if(e!=t){if(t.getChildByName(e.name))throw new Error("Entry filename already exists");bo(e),e.parent=t,t.children.push(e)}}find(e){const t=e.split("/");let r=this.root;for(let e=0;r&&e<t.length;e++)r=r.getChildByName(t[e]);return r}getById(e){return this.entries[e]}getChildByName(e){return this.root.getChildByName(e)}addDirectory(e){return this.root.addDirectory(e)}addText(e,t){return this.root.addText(e,t)}addBlob(e,t){return this.root.addBlob(e,t)}addData64URI(e,t){return this.root.addData64URI(e,t)}addHttpContent(e,t,r){return this.root.addHttpContent(e,t,r)}async addFileSystemEntry(e){return this.root.addFileSystemEntry(e)}async addData(e,t){return this.root.addData(e,t)}async importBlob(e,t){To(this),await this.root.importBlob(e,t)}async importData64URI(e,t){To(this),await this.root.importData64URI(e,t)}async importHttpContent(e,t){To(this),await this.root.importHttpContent(e,t)}async exportBlob(e){return this.root.exportBlob(e)}async exportData64URI(e){return this.root.exportData64URI(e)}},ZipDirectoryEntry:vo,ZipFileEntry:So};function Ao(e){return class extends Ir{constructor(e,t={}){super(),this.entry=e,this.options=t}async init(){const t=this;t.size=t.entry.uncompressedSize;const r=await t.entry.getData(new Rr,Object.assign({},t.options,e));t.data=r,t.blobReader=new Nr(r)}async readUint8Array(e,t){return this.blobReader.readUint8Array(e,t)}}}async function _o(e){if(e.children.length)for(const t of e.children)t.directory?await _o(t):(t.reader=new t.Reader(t.data),await t.reader.init(),t.uncompressedSize=t.reader.size)}function bo(e){const t=e.parent.children;t.forEach(((r,n)=>{r.id==e.id&&t.splice(n,1)}))}function To(e){e.entries=[],e.root=new vo(e)}function Io(e,t,r,n){if(e.directory)return n?new vo(e.fs,t,r,e):new So(e.fs,t,r,e);throw new Error("Parent entry is not a directory")}(()=>{if("function"==typeof URL.createObjectURL){const e='\n\t\t\t\n\nconst t=[];for(let e=0;e<256;e++){let n=e;for(let t=0;t<8;t++)1&n?n=n>>>1^3988292384:n>>>=1;t[e]=n;}class e{constructor(t){this.crc=t||-1;}append(e){let n=0|this.crc;for(let i=0,a=0|e.length;i<a;i++)n=n>>>8^t[255&(n^e[i])];this.crc=n;}get(){return ~this.crc}}const n={concat(t,e){if(0===t.length||0===e.length)return t.concat(e);const i=t[t.length-1],a=n.getPartial(i);return 32===a?t.concat(e):n._shiftRight(e,a,0|i,t.slice(0,t.length-1))},bitLength(t){const e=t.length;if(0===e)return 0;const i=t[e-1];return 32*(e-1)+n.getPartial(i)},clamp(t,e){if(32*t.length<e)return t;const i=(t=t.slice(0,Math.ceil(e/32))).length;return e&=31,i>0&&e&&(t[i-1]=n.partial(e,t[i-1]&2147483648>>e-1,1)),t},partial:(t,e,n)=>32===t?e:(n?0|e:e<<32-t)+1099511627776*t,getPartial:t=>Math.round(t/1099511627776)||32,_shiftRight(t,e,i,a){for(void 0===a&&(a=[]);e>=32;e-=32)a.push(i),i=0;if(0===e)return a.concat(t);for(let n=0;n<t.length;n++)a.push(i|t[n]>>>e),i=t[n]<<32-e;const r=t.length?t[t.length-1]:0,s=n.getPartial(r);return a.push(n.partial(e+s&31,e+s>32?i:a.pop(),1)),a}},i={bytes:{fromBits(t){const e=n.bitLength(t)/8,i=new Uint8Array(e);let a;for(let n=0;n<e;n++)0==(3&n)&&(a=t[n/4]),i[n]=a>>>24,a<<=8;return i},toBits(t){const e=[];let i,a=0;for(i=0;i<t.length;i++)a=a<<8|t[i],3==(3&i)&&(e.push(a),a=0);return 3&i&&e.push(n.partial(8*(3&i),a)),e}}},a={sha1:function(t){t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset();}};a.sha1.prototype={blockSize:512,reset:function(){const t=this;return t._h=this._init.slice(0),t._buffer=[],t._length=0,t},update:function(t){const e=this;"string"==typeof t&&(t=i.utf8String.toBits(t));const a=e._buffer=n.concat(e._buffer,t),r=e._length,s=e._length=r+n.bitLength(t);if(s>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const o=new Uint32Array(a);let l=0;for(let t=e.blockSize+r-(e.blockSize+r&e.blockSize-1);t<=s;t+=e.blockSize)e._block(o.subarray(16*l,16*(l+1))),l+=1;return a.splice(0,16*l),e},finalize:function(){const t=this;let e=t._buffer;const i=t._h;e=n.concat(e,[n.partial(1,1)]);for(let t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(t._length/4294967296)),e.push(0|t._length);e.length;)t._block(e.splice(0,16));return t.reset(),i},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(t,e,n,i){return t<=19?e&n|~e&i:t<=39?e^n^i:t<=59?e&n|e&i|n&i:t<=79?e^n^i:void 0},_S:function(t,e){return e<<t|e>>>32-t},_block:function(t){const e=this,n=e._h,i=Array(80);for(let e=0;e<16;e++)i[e]=t[e];let a=n[0],r=n[1],s=n[2],o=n[3],l=n[4];for(let t=0;t<=79;t++){t>=16&&(i[t]=e._S(1,i[t-3]^i[t-8]^i[t-14]^i[t-16]));const n=e._S(5,a)+e._f(t,r,s,o)+l+i[t]+e._key[Math.floor(t/20)]|0;l=o,o=s,s=e._S(30,r),r=a,a=n;}n[0]=n[0]+a|0,n[1]=n[1]+r|0,n[2]=n[2]+s|0,n[3]=n[3]+o|0,n[4]=n[4]+l|0;}};const r={aes:class{constructor(t){const e=this;e._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],e._tables[0][0][0]||e._precompute();const n=e._tables[0][4],i=e._tables[1],a=t.length;let r,s,o,l=1;if(4!==a&&6!==a&&8!==a)throw new Error("invalid aes key size");for(e._key=[s=t.slice(0),o=[]],r=a;r<4*a+28;r++){let t=s[r-1];(r%a==0||8===a&&r%a==4)&&(t=n[t>>>24]<<24^n[t>>16&255]<<16^n[t>>8&255]<<8^n[255&t],r%a==0&&(t=t<<8^t>>>24^l<<24,l=l<<1^283*(l>>7))),s[r]=s[r-a]^t;}for(let t=0;r;t++,r--){const e=s[3&t?r:r-4];o[t]=r<=4||t<4?e:i[0][n[e>>>24]]^i[1][n[e>>16&255]]^i[2][n[e>>8&255]]^i[3][n[255&e]];}}encrypt(t){return this._crypt(t,0)}decrypt(t){return this._crypt(t,1)}_precompute(){const t=this._tables[0],e=this._tables[1],n=t[4],i=e[4],a=[],r=[];let s,o,l,_;for(let t=0;t<256;t++)r[(a[t]=t<<1^283*(t>>7))^t]=t;for(let d=s=0;!n[d];d^=o||1,s=r[s]||1){let r=s^s<<1^s<<2^s<<3^s<<4;r=r>>8^255&r^99,n[d]=r,i[r]=d,_=a[l=a[o=a[d]]];let c=16843009*_^65537*l^257*o^16843008*d,f=257*a[r]^16843008*r;for(let n=0;n<4;n++)t[n][d]=f=f<<24^f>>>8,e[n][r]=c=c<<24^c>>>8;}for(let n=0;n<5;n++)t[n]=t[n].slice(0),e[n]=e[n].slice(0);}_crypt(t,e){if(4!==t.length)throw new Error("invalid aes block size");const n=this._key[e],i=n.length/4-2,a=[0,0,0,0],r=this._tables[e],s=r[0],o=r[1],l=r[2],_=r[3],d=r[4];let c,f,u,h=t[0]^n[0],b=t[e?3:1]^n[1],w=t[2]^n[2],p=t[e?1:3]^n[3],x=4;for(let t=0;t<i;t++)c=s[h>>>24]^o[b>>16&255]^l[w>>8&255]^_[255&p]^n[x],f=s[b>>>24]^o[w>>16&255]^l[p>>8&255]^_[255&h]^n[x+1],u=s[w>>>24]^o[p>>16&255]^l[h>>8&255]^_[255&b]^n[x+2],p=s[p>>>24]^o[h>>16&255]^l[b>>8&255]^_[255&w]^n[x+3],x+=4,h=c,b=f,w=u;for(let t=0;t<4;t++)a[e?3&-t:t]=d[h>>>24]<<24^d[b>>16&255]<<16^d[w>>8&255]<<8^d[255&p]^n[x++],c=h,h=b,b=w,w=p,p=c;return a}}},s={ctrGladman:class{constructor(t,e){this._prf=t,this._initIv=e,this._iv=e;}reset(){this._iv=this._initIv;}update(t){return this.calculate(this._prf,t,this._iv)}incWord(t){if(255==(t>>24&255)){let e=t>>16&255,n=t>>8&255,i=255&t;255===e?(e=0,255===n?(n=0,255===i?i=0:++i):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=i;}else t+=1<<24;return t}incCounter(t){0===(t[0]=this.incWord(t[0]))&&(t[1]=this.incWord(t[1]));}calculate(t,e,i){let a;if(!(a=e.length))return [];const r=n.bitLength(e);for(let n=0;n<a;n+=4){this.incCounter(i);const a=t.encrypt(i);e[n]^=a[0],e[n+1]^=a[1],e[n+2]^=a[2],e[n+3]^=a[3];}return n.clamp(e,r)}}},o={hmacSha1:class{constructor(t){const e=this,n=e._hash=a.sha1,i=[[],[]],r=n.prototype.blockSize/32;e._baseHash=[new n,new n],t.length>r&&(t=n.hash(t));for(let e=0;e<r;e++)i[0][e]=909522486^t[e],i[1][e]=1549556828^t[e];e._baseHash[0].update(i[0]),e._baseHash[1].update(i[1]),e._resultHash=new n(e._baseHash[0]);}reset(){const t=this;t._resultHash=new t._hash(t._baseHash[0]),t._updated=!1;}update(t){this._updated=!0,this._resultHash.update(t);}digest(){const t=this,e=t._resultHash.finalize(),n=new t._hash(t._baseHash[1]).update(e).finalize();return t.reset(),n}}},l={name:"PBKDF2"},_=Object.assign({hash:{name:"HMAC"}},l),d=Object.assign({iterations:1e3,hash:{name:"SHA-1"}},l),c=["deriveBits"],f=[8,12,16],u=[16,24,32],h=[0,0,0,0],b=i.bytes,w=r.aes,p=s.ctrGladman,x=o.hmacSha1;class g{constructor(t,e,n){Object.assign(this,{password:t,signed:e,strength:n-1,pendingInput:new Uint8Array(0)});}async append(t){const e=this;if(e.password){const n=A(t,0,f[e.strength]+2);await async function(t,e,n){await k(t,n,A(e,0,f[t.strength]));const i=A(e,f[t.strength]),a=t.keys.passwordVerification;if(a[0]!=i[0]||a[1]!=i[1])throw new Error("Invalid pasword")}(e,n,e.password),e.password=null,e.aesCtrGladman=new p(new w(e.keys.key),Array.from(h)),e.hmac=new x(e.keys.authentication),t=A(t,f[e.strength]+2);}return m(e,t,new Uint8Array(t.length-10-(t.length-10)%16),0,10,!0)}flush(){const t=this,e=t.pendingInput,n=A(e,0,e.length-10),i=A(e,e.length-10);let a=new Uint8Array(0);if(n.length){const e=b.toBits(n);t.hmac.update(e);const i=t.aesCtrGladman.update(e);a=b.fromBits(i);}let r=!0;if(t.signed){const e=A(b.fromBits(t.hmac.digest()),0,10);for(let t=0;t<10;t++)e[t]!=i[t]&&(r=!1);}return {valid:r,data:a}}}class y{constructor(t,e){Object.assign(this,{password:t,strength:e-1,pendingInput:new Uint8Array(0)});}async append(t){const e=this;let n=new Uint8Array(0);e.password&&(n=await async function(t,e){const n=crypto.getRandomValues(new Uint8Array(f[t.strength]));return await k(t,e,n),v(n,t.keys.passwordVerification)}(e,e.password),e.password=null,e.aesCtrGladman=new p(new w(e.keys.key),Array.from(h)),e.hmac=new x(e.keys.authentication));const i=new Uint8Array(n.length+t.length-t.length%16);return i.set(n,0),m(e,t,i,n.length,0)}flush(){const t=this;let e=new Uint8Array(0);if(t.pendingInput.length){const n=t.aesCtrGladman.update(b.toBits(t.pendingInput));t.hmac.update(n),e=b.fromBits(n);}const n=A(b.fromBits(t.hmac.digest()),0,10);return {data:v(e,n),signature:n}}}function m(t,e,n,i,a,r){const s=e.length-a;let o;for(t.pendingInput.length&&(e=v(t.pendingInput,e),n=function(t,e){if(e&&e>t.length){const n=t;(t=new Uint8Array(e)).set(n,0);}return t}(n,s-s%16)),o=0;o<=s-16;o+=16){const a=b.toBits(A(e,o,o+16));r&&t.hmac.update(a);const s=t.aesCtrGladman.update(a);r||t.hmac.update(s),n.set(b.fromBits(s),o+i);}return t.pendingInput=A(e,o),n}async function k(t,e,n){const i=(new TextEncoder).encode(e),a=await crypto.subtle.importKey("raw",i,_,!1,c),r=await crypto.subtle.deriveBits(Object.assign({salt:n},d),a,8*(2*u[t.strength]+2)),s=new Uint8Array(r);t.keys={key:b.toBits(A(s,0,u[t.strength])),authentication:b.toBits(A(s,u[t.strength],2*u[t.strength])),passwordVerification:A(s,2*u[t.strength])};}function v(t,e){let n=t;return t.length+e.length&&(n=new Uint8Array(t.length+e.length),n.set(t,0),n.set(e,t.length)),n}function A(t,e,n){return t.subarray(e,n)}class U{constructor(t,e){Object.assign(this,{password:t,passwordVerification:e}),E(this,t);}append(t){const e=this;if(e.password){const n=z(e,t.subarray(0,12));if(e.password=null,n[11]!=e.passwordVerification)throw new Error("Invalid pasword");t=t.subarray(12);}return z(e,t)}flush(){return {valid:!0,data:new Uint8Array(0)}}}class S{constructor(t,e){Object.assign(this,{password:t,passwordVerification:e}),E(this,t);}append(t){const e=this;let n,i;if(e.password){e.password=null;const a=crypto.getRandomValues(new Uint8Array(12));a[11]=e.passwordVerification,n=new Uint8Array(t.length+a.length),n.set(I(e,a),0),i=12;}else n=new Uint8Array(t.length),i=0;return n.set(I(e,t),i),n}flush(){return {data:new Uint8Array(0)}}}function z(t,e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=M(t)^e[i],C(t,n[i]);return n}function I(t,e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=M(t)^e[i],C(t,e[i]);return n}function E(t,n){t.keys=[305419896,591751049,878082192],t.crcKey0=new e(t.keys[0]),t.crcKey2=new e(t.keys[2]);for(let e=0;e<n.length;e++)C(t,n.charCodeAt(e));}function C(t,e){t.crcKey0.append([e]),t.keys[0]=~t.crcKey0.get(),t.keys[1]=H(t.keys[1]+B(t.keys[0])),t.keys[1]=H(Math.imul(t.keys[1],134775813)+1),t.crcKey2.append([t.keys[1]>>>24]),t.keys[2]=~t.crcKey2.get();}function M(t){const e=2|t.keys[2];return B(Math.imul(e,1^e)>>>8)}function B(t){return 255&t}function H(t){return 4294967295&t}class V{constructor(t,{signature:n,password:i,signed:a,compressed:r,zipCrypto:s,passwordVerification:o,encryptionStrength:l},{chunkSize:_}){const d=Boolean(i);Object.assign(this,{signature:n,encrypted:d,signed:a,compressed:r,inflate:r&&new t({chunkSize:_}),crc32:a&&new e,zipCrypto:s,decrypt:d&&s?new U(i,o):new g(i,a,l)});}async append(t){const e=this;return e.encrypted&&t.length&&(t=await e.decrypt.append(t)),e.compressed&&t.length&&(t=await e.inflate.append(t)),(!e.encrypted||e.zipCrypto)&&e.signed&&t.length&&e.crc32.append(t),t}async flush(){const t=this;let e,n=new Uint8Array(0);if(t.encrypted){const e=t.decrypt.flush();if(!e.valid)throw new Error("Invalid signature");n=e.data;}if((!t.encrypted||t.zipCrypto)&&t.signed){const n=new DataView(new Uint8Array(4).buffer);if(e=t.crc32.get(),n.setUint32(0,e),t.signature!=n.getUint32(0,!1))throw new Error("Invalid signature")}return t.compressed&&(n=await t.inflate.append(n)||new Uint8Array(0),await t.inflate.flush()),{data:n,signature:e}}}class D{constructor(t,{encrypted:n,signed:i,compressed:a,level:r,zipCrypto:s,password:o,passwordVerification:l,encryptionStrength:_},{chunkSize:d}){Object.assign(this,{encrypted:n,signed:i,compressed:a,deflate:a&&new t({level:r||5,chunkSize:d}),crc32:i&&new e,zipCrypto:s,encrypt:n&&s?new S(o,l):new y(o,_)});}async append(t){const e=this;let n=t;return e.compressed&&t.length&&(n=await e.deflate.append(t)),e.encrypted&&n.length&&(n=await e.encrypt.append(n)),(!e.encrypted||e.zipCrypto)&&e.signed&&t.length&&e.crc32.append(t),n}async flush(){const t=this;let e,n=new Uint8Array(0);if(t.compressed&&(n=await t.deflate.flush()||new Uint8Array(0)),t.encrypted){n=await t.encrypt.append(n);const i=t.encrypt.flush();e=i.signature;const a=new Uint8Array(n.length+i.data.length);a.set(n,0),a.set(i.data,n.length),n=a;}return t.encrypted&&!t.zipCrypto||!t.signed||(e=t.crc32.get()),{data:n,signature:e}}}const j={init(t){t.scripts&&t.scripts.length&&importScripts.apply(void 0,t.scripts);const e=t.options;let n;self.initCodec&&self.initCodec(),e.codecType.startsWith("deflate")?n=self.Deflate:e.codecType.startsWith("inflate")&&(n=self.Inflate),O=function(t,e,n){return e.codecType.startsWith("deflate")?new D(t,e,n):e.codecType.startsWith("inflate")?new V(t,e,n):void 0}(n,e,t.config);},append:async t=>({data:await O.append(t.data)}),flush:()=>O.flush()};let O;addEventListener("message",(async t=>{const e=t.data,n=e.type,i=j[n];if(i)try{e.data&&(e.data=new Uint8Array(e.data));const t=await i(e)||{};if(t.type=n,t.data)try{t.data=t.data.buffer,postMessage(t,[t.data]);}catch(e){postMessage(t);}else postMessage(t);}catch(t){postMessage({type:n,error:{message:t.message,stack:t.stack}});}}));function P(t){return K(t.map((([t,e])=>new Array(t).fill(e,0,t))))}function K(t){return t.reduce(((t,e)=>t.concat(Array.isArray(e)?K(e):e)),[])}const G=[0,1,2,3].concat(...P([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function W(){const t=this;function e(t,e){let n=0;do{n|=1&t,t>>>=1,n<<=1;}while(--e>0);return n>>>1}t.build_tree=function(n){const i=t.dyn_tree,a=t.stat_desc.static_tree,r=t.stat_desc.elems;let s,o,l,_=-1;for(n.heap_len=0,n.heap_max=573,s=0;s<r;s++)0!==i[2*s]?(n.heap[++n.heap_len]=_=s,n.depth[s]=0):i[2*s+1]=0;for(;n.heap_len<2;)l=n.heap[++n.heap_len]=_<2?++_:0,i[2*l]=1,n.depth[l]=0,n.opt_len--,a&&(n.static_len-=a[2*l+1]);for(t.max_code=_,s=Math.floor(n.heap_len/2);s>=1;s--)n.pqdownheap(i,s);l=r;do{s=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(i,1),o=n.heap[1],n.heap[--n.heap_max]=s,n.heap[--n.heap_max]=o,i[2*l]=i[2*s]+i[2*o],n.depth[l]=Math.max(n.depth[s],n.depth[o])+1,i[2*s+1]=i[2*o+1]=l,n.heap[1]=l++,n.pqdownheap(i,1);}while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],function(e){const n=t.dyn_tree,i=t.stat_desc.static_tree,a=t.stat_desc.extra_bits,r=t.stat_desc.extra_base,s=t.stat_desc.max_length;let o,l,_,d,c,f,u=0;for(d=0;d<=15;d++)e.bl_count[d]=0;for(n[2*e.heap[e.heap_max]+1]=0,o=e.heap_max+1;o<573;o++)l=e.heap[o],d=n[2*n[2*l+1]+1]+1,d>s&&(d=s,u++),n[2*l+1]=d,l>t.max_code||(e.bl_count[d]++,c=0,l>=r&&(c=a[l-r]),f=n[2*l],e.opt_len+=f*(d+c),i&&(e.static_len+=f*(i[2*l+1]+c)));if(0!==u){do{for(d=s-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[s]--,u-=2;}while(u>0);for(d=s;0!==d;d--)for(l=e.bl_count[d];0!==l;)_=e.heap[--o],_>t.max_code||(n[2*_+1]!=d&&(e.opt_len+=(d-n[2*_+1])*n[2*_],n[2*_+1]=d),l--);}}(n),function(t,n,i){const a=[];let r,s,o,l=0;for(r=1;r<=15;r++)a[r]=l=l+i[r-1]<<1;for(s=0;s<=n;s++)o=t[2*s+1],0!==o&&(t[2*s]=e(a[o]++,o));}(i,t.max_code,n.bl_count);};}function L(t,e,n,i,a){const r=this;r.static_tree=t,r.extra_bits=e,r.extra_base=n,r.elems=i,r.max_length=a;}W._length_code=[0,1,2,3,4,5,6,7].concat(...P([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),W.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],W.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],W.d_code=function(t){return t<256?G[t]:G[256+(t>>>7)]},W.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],W.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],W.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],L.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],L.static_l_desc=new L(L.static_ltree,W.extra_lbits,257,286,15),L.static_d_desc=new L(L.static_dtree,W.extra_dbits,0,30,15),L.static_bl_desc=new L(null,W.extra_blbits,0,19,7);function T(t,e,n,i,a){const r=this;r.good_length=t,r.max_lazy=e,r.nice_length=n,r.max_chain=i,r.func=a;}const q=[new T(0,0,0,0,0),new T(4,4,8,4,1),new T(4,5,16,8,1),new T(4,6,32,32,1),new T(4,4,16,16,2),new T(8,16,32,32,2),new T(8,16,128,128,2),new T(8,32,128,256,2),new T(32,128,258,1024,2),new T(32,258,258,4096,2)],R=["need dictionary","stream end","","","stream error","data error","","buffer error","",""];function F(t,e,n,i){const a=t[2*e],r=t[2*n];return a<r||a==r&&i[e]<=i[n]}function J(){const t=this;let e,n,i,a,r,s,o,l,_,d,c,f,u,h,b,w,p,x,g,y,m,k,v,A,U,S,z,I,E,C,M,B,H;const V=new W,D=new W,j=new W;let O,P,K,G,T,J,N,Q;function X(){let e;for(e=0;e<286;e++)M[2*e]=0;for(e=0;e<30;e++)B[2*e]=0;for(e=0;e<19;e++)H[2*e]=0;M[512]=1,t.opt_len=t.static_len=0,K=T=0;}function Y(t,e){let n,i=-1,a=t[1],r=0,s=7,o=4;0===a&&(s=138,o=3),t[2*(e+1)+1]=65535;for(let l=0;l<=e;l++)n=a,a=t[2*(l+1)+1],++r<s&&n==a||(r<o?H[2*n]+=r:0!==n?(n!=i&&H[2*n]++,H[32]++):r<=10?H[34]++:H[36]++,r=0,i=n,0===a?(s=138,o=3):n==a?(s=6,o=3):(s=7,o=4));}function Z(e){t.pending_buf[t.pending++]=e;}function $(t){Z(255&t),Z(t>>>8&255);}function tt(t,e){let n;const i=e;Q>16-i?(n=t,N|=n<<Q&65535,$(N),N=n>>>16-Q,Q+=i-16):(N|=t<<Q&65535,Q+=i);}function et(t,e){const n=2*t;tt(65535&e[n],65535&e[n+1]);}function nt(t,e){let n,i,a=-1,r=t[1],s=0,o=7,l=4;for(0===r&&(o=138,l=3),n=0;n<=e;n++)if(i=r,r=t[2*(n+1)+1],!(++s<o&&i==r)){if(s<l)do{et(i,H);}while(0!=--s);else 0!==i?(i!=a&&(et(i,H),s--),et(16,H),tt(s-3,2)):s<=10?(et(17,H),tt(s-3,3)):(et(18,H),tt(s-11,7));s=0,a=i,0===r?(o=138,l=3):i==r?(o=6,l=3):(o=7,l=4);}}function it(){16==Q?($(N),N=0,Q=0):Q>=8&&(Z(255&N),N>>>=8,Q-=8);}function at(e,n){let i,a,r;if(t.pending_buf[G+2*K]=e>>>8&255,t.pending_buf[G+2*K+1]=255&e,t.pending_buf[O+K]=255&n,K++,0===e?M[2*n]++:(T++,e--,M[2*(W._length_code[n]+256+1)]++,B[2*W.d_code(e)]++),0==(8191&K)&&z>2){for(i=8*K,a=m-p,r=0;r<30;r++)i+=B[2*r]*(5+W.extra_dbits[r]);if(i>>>=3,T<Math.floor(K/2)&&i<Math.floor(a/2))return !0}return K==P-1}function rt(e,n){let i,a,r,s,o=0;if(0!==K)do{i=t.pending_buf[G+2*o]<<8&65280|255&t.pending_buf[G+2*o+1],a=255&t.pending_buf[O+o],o++,0===i?et(a,e):(r=W._length_code[a],et(r+256+1,e),s=W.extra_lbits[r],0!==s&&(a-=W.base_length[r],tt(a,s)),i--,r=W.d_code(i),et(r,n),s=W.extra_dbits[r],0!==s&&(i-=W.base_dist[r],tt(i,s)));}while(o<K);et(256,e),J=e[513];}function st(){Q>8?$(N):Q>0&&Z(255&N),N=0,Q=0;}function ot(e,n,i){tt(0+(i?1:0),3),function(e,n,i){st(),J=8,i&&($(n),$(~n)),t.pending_buf.set(l.subarray(e,e+n),t.pending),t.pending+=n;}(e,n,!0);}function lt(e,n,i){let a,r,s=0;z>0?(V.build_tree(t),D.build_tree(t),s=function(){let e;for(Y(M,V.max_code),Y(B,D.max_code),j.build_tree(t),e=18;e>=3&&0===H[2*W.bl_order[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(),a=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,r<=a&&(a=r)):a=r=n+5,n+4<=a&&-1!=e?ot(e,n,i):r==a?(tt(2+(i?1:0),3),rt(L.static_ltree,L.static_dtree)):(tt(4+(i?1:0),3),function(t,e,n){let i;for(tt(t-257,5),tt(e-1,5),tt(n-4,4),i=0;i<n;i++)tt(H[2*W.bl_order[i]+1],3);nt(M,t-1),nt(B,e-1);}(V.max_code+1,D.max_code+1,s+1),rt(M,B)),X(),i&&st();}function _t(t){lt(p>=0?p:-1,m-p,t),p=m,e.flush_pending();}function dt(){let t,n,i,a;do{if(a=_-v-m,0===a&&0===m&&0===v)a=r;else if(-1==a)a--;else if(m>=r+r-262){l.set(l.subarray(r,r+r),0),k-=r,m-=r,p-=r,t=u,i=t;do{n=65535&c[--i],c[i]=n>=r?n-r:0;}while(0!=--t);t=r,i=t;do{n=65535&d[--i],d[i]=n>=r?n-r:0;}while(0!=--t);a+=r;}if(0===e.avail_in)return;t=e.read_buf(l,m+v,a),v+=t,v>=3&&(f=255&l[m],f=(f<<w^255&l[m+1])&b);}while(v<262&&0!==e.avail_in)}function ct(t){let e,n,i=U,a=m,s=A;const _=m>r-262?m-(r-262):0;let c=C;const f=o,u=m+258;let h=l[a+s-1],b=l[a+s];A>=E&&(i>>=2),c>v&&(c=v);do{if(e=t,l[e+s]==b&&l[e+s-1]==h&&l[e]==l[a]&&l[++e]==l[a+1]){a+=2,e++;do{}while(l[++a]==l[++e]&&l[++a]==l[++e]&&l[++a]==l[++e]&&l[++a]==l[++e]&&l[++a]==l[++e]&&l[++a]==l[++e]&&l[++a]==l[++e]&&l[++a]==l[++e]&&a<u);if(n=258-(u-a),a=u-258,n>s){if(k=t,s=n,n>=c)break;h=l[a+s-1],b=l[a+s];}}}while((t=65535&d[t&f])>_&&0!=--i);return s<=v?s:v}function ft(e){return e.total_in=e.total_out=0,e.msg=null,t.pending=0,t.pending_out=0,n=113,a=0,V.dyn_tree=M,V.stat_desc=L.static_l_desc,D.dyn_tree=B,D.stat_desc=L.static_d_desc,j.dyn_tree=H,j.stat_desc=L.static_bl_desc,N=0,Q=0,J=8,X(),function(){_=2*r,c[u-1]=0;for(let t=0;t<u-1;t++)c[t]=0;S=q[z].max_lazy,E=q[z].good_length,C=q[z].nice_length,U=q[z].max_chain,m=0,p=0,v=0,x=A=2,y=0,f=0;}(),0}t.depth=[],t.bl_count=[],t.heap=[],M=[],B=[],H=[],t.pqdownheap=function(e,n){const i=t.heap,a=i[n];let r=n<<1;for(;r<=t.heap_len&&(r<t.heap_len&&F(e,i[r+1],i[r],t.depth)&&r++,!F(e,a,i[r],t.depth));)i[n]=i[r],n=r,r<<=1;i[n]=a;},t.deflateInit=function(e,n,a,_,f,p){return _||(_=8),f||(f=8),p||(p=0),e.msg=null,-1==n&&(n=6),f<1||f>9||8!=_||a<9||a>15||n<0||n>9||p<0||p>2?-2:(e.dstate=t,s=a,r=1<<s,o=r-1,h=f+7,u=1<<h,b=u-1,w=Math.floor((h+3-1)/3),l=new Uint8Array(2*r),d=[],c=[],P=1<<f+6,t.pending_buf=new Uint8Array(4*P),i=4*P,G=Math.floor(P/2),O=3*P,z=n,I=p,ft(e))},t.deflateEnd=function(){return 42!=n&&113!=n&&666!=n?-2:(t.pending_buf=null,c=null,d=null,l=null,t.dstate=null,113==n?-3:0)},t.deflateParams=function(t,e,n){let i=0;return -1==e&&(e=6),e<0||e>9||n<0||n>2?-2:(q[z].func!=q[e].func&&0!==t.total_in&&(i=t.deflate(1)),z!=e&&(z=e,S=q[z].max_lazy,E=q[z].good_length,C=q[z].nice_length,U=q[z].max_chain),I=n,i)},t.deflateSetDictionary=function(t,e,i){let a,s=i,_=0;if(!e||42!=n)return -2;if(s<3)return 0;for(s>r-262&&(s=r-262,_=i-s),l.set(e.subarray(_,_+s),0),m=s,p=s,f=255&l[0],f=(f<<w^255&l[1])&b,a=0;a<=s-3;a++)f=(f<<w^255&l[a+2])&b,d[a&o]=c[f],c[f]=a;return 0},t.deflate=function(_,h){let U,E,C,M,B;if(h>4||h<0)return -2;if(!_.next_out||!_.next_in&&0!==_.avail_in||666==n&&4!=h)return _.msg=R[4],-2;if(0===_.avail_out)return _.msg=R[7],-5;var H;if(e=_,M=a,a=h,42==n&&(E=8+(s-8<<4)<<8,C=(z-1&255)>>1,C>3&&(C=3),E|=C<<6,0!==m&&(E|=32),E+=31-E%31,n=113,Z((H=E)>>8&255),Z(255&H)),0!==t.pending){if(e.flush_pending(),0===e.avail_out)return a=-1,0}else if(0===e.avail_in&&h<=M&&4!=h)return e.msg=R[7],-5;if(666==n&&0!==e.avail_in)return _.msg=R[7],-5;if(0!==e.avail_in||0!==v||0!=h&&666!=n){switch(B=-1,q[z].func){case 0:B=function(t){let n,a=65535;for(a>i-5&&(a=i-5);;){if(v<=1){if(dt(),0===v&&0==t)return 0;if(0===v)break}if(m+=v,v=0,n=p+a,(0===m||m>=n)&&(v=m-n,m=n,_t(!1),0===e.avail_out))return 0;if(m-p>=r-262&&(_t(!1),0===e.avail_out))return 0}return _t(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(h);break;case 1:B=function(t){let n,i=0;for(;;){if(v<262){if(dt(),v<262&&0==t)return 0;if(0===v)break}if(v>=3&&(f=(f<<w^255&l[m+2])&b,i=65535&c[f],d[m&o]=c[f],c[f]=m),0!==i&&(m-i&65535)<=r-262&&2!=I&&(x=ct(i)),x>=3)if(n=at(m-k,x-3),v-=x,x<=S&&v>=3){x--;do{m++,f=(f<<w^255&l[m+2])&b,i=65535&c[f],d[m&o]=c[f],c[f]=m;}while(0!=--x);m++;}else m+=x,x=0,f=255&l[m],f=(f<<w^255&l[m+1])&b;else n=at(0,255&l[m]),v--,m++;if(n&&(_t(!1),0===e.avail_out))return 0}return _t(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(h);break;case 2:B=function(t){let n,i,a=0;for(;;){if(v<262){if(dt(),v<262&&0==t)return 0;if(0===v)break}if(v>=3&&(f=(f<<w^255&l[m+2])&b,a=65535&c[f],d[m&o]=c[f],c[f]=m),A=x,g=k,x=2,0!==a&&A<S&&(m-a&65535)<=r-262&&(2!=I&&(x=ct(a)),x<=5&&(1==I||3==x&&m-k>4096)&&(x=2)),A>=3&&x<=A){i=m+v-3,n=at(m-1-g,A-3),v-=A-1,A-=2;do{++m<=i&&(f=(f<<w^255&l[m+2])&b,a=65535&c[f],d[m&o]=c[f],c[f]=m);}while(0!=--A);if(y=0,x=2,m++,n&&(_t(!1),0===e.avail_out))return 0}else if(0!==y){if(n=at(0,255&l[m-1]),n&&_t(!1),m++,v--,0===e.avail_out)return 0}else y=1,m++,v--;}return 0!==y&&(n=at(0,255&l[m-1]),y=0),_t(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(h);}if(2!=B&&3!=B||(n=666),0==B||2==B)return 0===e.avail_out&&(a=-1),0;if(1==B){if(1==h)tt(2,3),et(256,L.static_ltree),it(),1+J+10-Q<9&&(tt(2,3),et(256,L.static_ltree),it()),J=7;else if(ot(0,0,!1),3==h)for(U=0;U<u;U++)c[U]=0;if(e.flush_pending(),0===e.avail_out)return a=-1,0}}return 4!=h?0:1};}function N(){const t=this;t.next_in_index=0,t.next_out_index=0,t.avail_in=0,t.total_in=0,t.avail_out=0,t.total_out=0;}function Q(t){const e=new N,n=(i=t&&t.chunkSize?t.chunkSize:65536)+5*(Math.floor(i/16383)+1);var i;const a=new Uint8Array(n);let r=t?t.level:-1;void 0===r&&(r=-1),e.deflateInit(r),e.next_out=a,this.append=function(t,i){let r,s,o=0,l=0,_=0;const d=[];if(t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=n,r=e.deflate(0),0!=r)throw new Error("deflating: "+e.msg);e.next_out_index&&(e.next_out_index==n?d.push(new Uint8Array(a)):d.push(a.slice(0,e.next_out_index))),_+=e.next_out_index,i&&e.next_in_index>0&&e.next_in_index!=o&&(i(e.next_in_index),o=e.next_in_index);}while(e.avail_in>0||0===e.avail_out);return d.length>1?(s=new Uint8Array(_),d.forEach((function(t){s.set(t,l),l+=t.length;}))):s=d[0]||new Uint8Array(0),s}},this.flush=function(){let t,i,r=0,s=0;const o=[];do{if(e.next_out_index=0,e.avail_out=n,t=e.deflate(4),1!=t&&0!=t)throw new Error("deflating: "+e.msg);n-e.avail_out>0&&o.push(a.slice(0,e.next_out_index)),s+=e.next_out_index;}while(e.avail_in>0||0===e.avail_out);return e.deflateEnd(),i=new Uint8Array(s),o.forEach((function(t){i.set(t,r),r+=t.length;})),i};}N.prototype={deflateInit:function(t,e){const n=this;return n.dstate=new J,e||(e=15),n.dstate.deflateInit(n,t,e)},deflate:function(t){const e=this;return e.dstate?e.dstate.deflate(e,t):-2},deflateEnd:function(){const t=this;if(!t.dstate)return -2;const e=t.dstate.deflateEnd();return t.dstate=null,e},deflateParams:function(t,e){const n=this;return n.dstate?n.dstate.deflateParams(n,t,e):-2},deflateSetDictionary:function(t,e){const n=this;return n.dstate?n.dstate.deflateSetDictionary(n,t,e):-2},read_buf:function(t,e,n){const i=this;let a=i.avail_in;return a>n&&(a=n),0===a?0:(i.avail_in-=a,t.set(i.next_in.subarray(i.next_in_index,i.next_in_index+a),e),i.next_in_index+=a,i.total_in+=a,a)},flush_pending:function(){const t=this;let e=t.dstate.pending;e>t.avail_out&&(e=t.avail_out),0!==e&&(t.next_out.set(t.dstate.pending_buf.subarray(t.dstate.pending_out,t.dstate.pending_out+e),t.next_out_index),t.next_out_index+=e,t.dstate.pending_out+=e,t.total_out+=e,t.avail_out-=e,t.dstate.pending-=e,0===t.dstate.pending&&(t.dstate.pending_out=0));}};const X=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Y=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],Z=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],$=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],tt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],et=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],nt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function it(){let t,e,n,i,a,r;function s(t,e,s,o,l,_,d,c,f,u,h){let b,w,p,x,g,y,m,k,v,A,U,S,z,I,E;A=0,g=s;do{n[t[e+A]]++,A++,g--;}while(0!==g);if(n[0]==s)return d[0]=-1,c[0]=0,0;for(k=c[0],y=1;y<=15&&0===n[y];y++);for(m=y,k<y&&(k=y),g=15;0!==g&&0===n[g];g--);for(p=g,k>g&&(k=g),c[0]=k,I=1<<y;y<g;y++,I<<=1)if((I-=n[y])<0)return -3;if((I-=n[g])<0)return -3;for(n[g]+=I,r[1]=y=0,A=1,z=2;0!=--g;)r[z]=y+=n[A],z++,A++;g=0,A=0;do{0!==(y=t[e+A])&&(h[r[y]++]=g),A++;}while(++g<s);for(s=r[p],r[0]=g=0,A=0,x=-1,S=-k,a[0]=0,U=0,E=0;m<=p;m++)for(b=n[m];0!=b--;){for(;m>S+k;){if(x++,S+=k,E=p-S,E=E>k?k:E,(w=1<<(y=m-S))>b+1&&(w-=b+1,z=m,y<E))for(;++y<E&&!((w<<=1)<=n[++z]);)w-=n[z];if(E=1<<y,u[0]+E>1440)return -3;a[x]=U=u[0],u[0]+=E,0!==x?(r[x]=g,i[0]=y,i[1]=k,y=g>>>S-k,i[2]=U-a[x-1]-y,f.set(i,3*(a[x-1]+y))):d[0]=U;}for(i[1]=m-S,A>=s?i[0]=192:h[A]<o?(i[0]=h[A]<256?0:96,i[2]=h[A++]):(i[0]=_[h[A]-o]+16+64,i[2]=l[h[A++]-o]),w=1<<m-S,y=g>>>S;y<E;y+=w)f.set(i,3*(U+y));for(y=1<<m-1;0!=(g&y);y>>>=1)g^=y;for(g^=y,v=(1<<S)-1;(g&v)!=r[x];)x--,S-=k,v=(1<<S)-1;}return 0!==I&&1!=p?-5:0}function o(s){let o;for(t||(t=[],e=[],n=new Int32Array(16),i=[],a=new Int32Array(15),r=new Int32Array(16)),e.length<s&&(e=[]),o=0;o<s;o++)e[o]=0;for(o=0;o<16;o++)n[o]=0;for(o=0;o<3;o++)i[o]=0;a.set(n.subarray(0,15),0),r.set(n.subarray(0,16),0);}this.inflate_trees_bits=function(n,i,a,r,l){let _;return o(19),t[0]=0,_=s(n,0,19,19,null,null,a,i,r,t,e),-3==_?l.msg="oversubscribed dynamic bit lengths tree":-5!=_&&0!==i[0]||(l.msg="incomplete dynamic bit lengths tree",_=-3),_},this.inflate_trees_dynamic=function(n,i,a,r,l,_,d,c,f){let u;return o(288),t[0]=0,u=s(a,0,n,257,$,tt,_,r,c,t,e),0!=u||0===r[0]?(-3==u?f.msg="oversubscribed literal/length tree":-4!=u&&(f.msg="incomplete literal/length tree",u=-3),u):(o(288),u=s(a,n,i,0,et,nt,d,l,c,t,e),0!=u||0===l[0]&&n>257?(-3==u?f.msg="oversubscribed distance tree":-5==u?(f.msg="incomplete distance tree",u=-3):-4!=u&&(f.msg="empty distance tree with lengths",u=-3),u):0)};}it.inflate_trees_fixed=function(t,e,n,i){return t[0]=9,e[0]=5,n[0]=Y,i[0]=Z,0};function at(){const t=this;let e,n,i,a,r=0,s=0,o=0,l=0,_=0,d=0,c=0,f=0,u=0,h=0;function b(t,e,n,i,a,r,s,o){let l,_,d,c,f,u,h,b,w,p,x,g,y,m,k,v;h=o.next_in_index,b=o.avail_in,f=s.bitb,u=s.bitk,w=s.write,p=w<s.read?s.read-w-1:s.end-w,x=X[t],g=X[e];do{for(;u<20;)b--,f|=(255&o.read_byte(h++))<<u,u+=8;if(l=f&x,_=n,d=i,v=3*(d+l),0!==(c=_[v]))for(;;){if(f>>=_[v+1],u-=_[v+1],0!=(16&c)){for(c&=15,y=_[v+2]+(f&X[c]),f>>=c,u-=c;u<15;)b--,f|=(255&o.read_byte(h++))<<u,u+=8;for(l=f&g,_=a,d=r,v=3*(d+l),c=_[v];;){if(f>>=_[v+1],u-=_[v+1],0!=(16&c)){for(c&=15;u<c;)b--,f|=(255&o.read_byte(h++))<<u,u+=8;if(m=_[v+2]+(f&X[c]),f>>=c,u-=c,p-=y,w>=m)k=w-m,w-k>0&&2>w-k?(s.window[w++]=s.window[k++],s.window[w++]=s.window[k++],y-=2):(s.window.set(s.window.subarray(k,k+2),w),w+=2,k+=2,y-=2);else {k=w-m;do{k+=s.end;}while(k<0);if(c=s.end-k,y>c){if(y-=c,w-k>0&&c>w-k)do{s.window[w++]=s.window[k++];}while(0!=--c);else s.window.set(s.window.subarray(k,k+c),w),w+=c,k+=c,c=0;k=0;}}if(w-k>0&&y>w-k)do{s.window[w++]=s.window[k++];}while(0!=--y);else s.window.set(s.window.subarray(k,k+y),w),w+=y,k+=y,y=0;break}if(0!=(64&c))return o.msg="invalid distance code",y=o.avail_in-b,y=u>>3<y?u>>3:y,b+=y,h-=y,u-=y<<3,s.bitb=f,s.bitk=u,o.avail_in=b,o.total_in+=h-o.next_in_index,o.next_in_index=h,s.write=w,-3;l+=_[v+2],l+=f&X[c],v=3*(d+l),c=_[v];}break}if(0!=(64&c))return 0!=(32&c)?(y=o.avail_in-b,y=u>>3<y?u>>3:y,b+=y,h-=y,u-=y<<3,s.bitb=f,s.bitk=u,o.avail_in=b,o.total_in+=h-o.next_in_index,o.next_in_index=h,s.write=w,1):(o.msg="invalid literal/length code",y=o.avail_in-b,y=u>>3<y?u>>3:y,b+=y,h-=y,u-=y<<3,s.bitb=f,s.bitk=u,o.avail_in=b,o.total_in+=h-o.next_in_index,o.next_in_index=h,s.write=w,-3);if(l+=_[v+2],l+=f&X[c],v=3*(d+l),0===(c=_[v])){f>>=_[v+1],u-=_[v+1],s.window[w++]=_[v+2],p--;break}}else f>>=_[v+1],u-=_[v+1],s.window[w++]=_[v+2],p--;}while(p>=258&&b>=10);return y=o.avail_in-b,y=u>>3<y?u>>3:y,b+=y,h-=y,u-=y<<3,s.bitb=f,s.bitk=u,o.avail_in=b,o.total_in+=h-o.next_in_index,o.next_in_index=h,s.write=w,0}t.init=function(t,r,s,o,l,_){e=0,c=t,f=r,i=s,u=o,a=l,h=_,n=null;},t.proc=function(t,w,p){let x,g,y,m,k,v,A,U=0,S=0,z=0;for(z=w.next_in_index,m=w.avail_in,U=t.bitb,S=t.bitk,k=t.write,v=k<t.read?t.read-k-1:t.end-k;;)switch(e){case 0:if(v>=258&&m>=10&&(t.bitb=U,t.bitk=S,w.avail_in=m,w.total_in+=z-w.next_in_index,w.next_in_index=z,t.write=k,p=b(c,f,i,u,a,h,t,w),z=w.next_in_index,m=w.avail_in,U=t.bitb,S=t.bitk,k=t.write,v=k<t.read?t.read-k-1:t.end-k,0!=p)){e=1==p?7:9;break}o=c,n=i,s=u,e=1;case 1:for(x=o;S<x;){if(0===m)return t.bitb=U,t.bitk=S,w.avail_in=m,w.total_in+=z-w.next_in_index,w.next_in_index=z,t.write=k,t.inflate_flush(w,p);p=0,m--,U|=(255&w.read_byte(z++))<<S,S+=8;}if(g=3*(s+(U&X[x])),U>>>=n[g+1],S-=n[g+1],y=n[g],0===y){l=n[g+2],e=6;break}if(0!=(16&y)){_=15&y,r=n[g+2],e=2;break}if(0==(64&y)){o=y,s=g/3+n[g+2];break}if(0!=(32&y)){e=7;break}return e=9,w.msg="invalid literal/length code",p=-3,t.bitb=U,t.bitk=S,w.avail_in=m,w.total_in+=z-w.next_in_index,w.next_in_index=z,t.write=k,t.inflate_flush(w,p);case 2:for(x=_;S<x;){if(0===m)return t.bitb=U,t.bitk=S,w.avail_in=m,w.total_in+=z-w.next_in_index,w.next_in_index=z,t.write=k,t.inflate_flush(w,p);p=0,m--,U|=(255&w.read_byte(z++))<<S,S+=8;}r+=U&X[x],U>>=x,S-=x,o=f,n=a,s=h,e=3;case 3:for(x=o;S<x;){if(0===m)return t.bitb=U,t.bitk=S,w.avail_in=m,w.total_in+=z-w.next_in_index,w.next_in_index=z,t.write=k,t.inflate_flush(w,p);p=0,m--,U|=(255&w.read_byte(z++))<<S,S+=8;}if(g=3*(s+(U&X[x])),U>>=n[g+1],S-=n[g+1],y=n[g],0!=(16&y)){_=15&y,d=n[g+2],e=4;break}if(0==(64&y)){o=y,s=g/3+n[g+2];break}return e=9,w.msg="invalid distance code",p=-3,t.bitb=U,t.bitk=S,w.avail_in=m,w.total_in+=z-w.next_in_index,w.next_in_index=z,t.write=k,t.inflate_flush(w,p);case 4:for(x=_;S<x;){if(0===m)return t.bitb=U,t.bitk=S,w.avail_in=m,w.total_in+=z-w.next_in_index,w.next_in_index=z,t.write=k,t.inflate_flush(w,p);p=0,m--,U|=(255&w.read_byte(z++))<<S,S+=8;}d+=U&X[x],U>>=x,S-=x,e=5;case 5:for(A=k-d;A<0;)A+=t.end;for(;0!==r;){if(0===v&&(k==t.end&&0!==t.read&&(k=0,v=k<t.read?t.read-k-1:t.end-k),0===v&&(t.write=k,p=t.inflate_flush(w,p),k=t.write,v=k<t.read?t.read-k-1:t.end-k,k==t.end&&0!==t.read&&(k=0,v=k<t.read?t.read-k-1:t.end-k),0===v)))return t.bitb=U,t.bitk=S,w.avail_in=m,w.total_in+=z-w.next_in_index,w.next_in_index=z,t.write=k,t.inflate_flush(w,p);t.window[k++]=t.window[A++],v--,A==t.end&&(A=0),r--;}e=0;break;case 6:if(0===v&&(k==t.end&&0!==t.read&&(k=0,v=k<t.read?t.read-k-1:t.end-k),0===v&&(t.write=k,p=t.inflate_flush(w,p),k=t.write,v=k<t.read?t.read-k-1:t.end-k,k==t.end&&0!==t.read&&(k=0,v=k<t.read?t.read-k-1:t.end-k),0===v)))return t.bitb=U,t.bitk=S,w.avail_in=m,w.total_in+=z-w.next_in_index,w.next_in_index=z,t.write=k,t.inflate_flush(w,p);p=0,t.window[k++]=l,v--,e=0;break;case 7:if(S>7&&(S-=8,m++,z--),t.write=k,p=t.inflate_flush(w,p),k=t.write,v=k<t.read?t.read-k-1:t.end-k,t.read!=t.write)return t.bitb=U,t.bitk=S,w.avail_in=m,w.total_in+=z-w.next_in_index,w.next_in_index=z,t.write=k,t.inflate_flush(w,p);e=8;case 8:return p=1,t.bitb=U,t.bitk=S,w.avail_in=m,w.total_in+=z-w.next_in_index,w.next_in_index=z,t.write=k,t.inflate_flush(w,p);case 9:return p=-3,t.bitb=U,t.bitk=S,w.avail_in=m,w.total_in+=z-w.next_in_index,w.next_in_index=z,t.write=k,t.inflate_flush(w,p);default:return p=-2,t.bitb=U,t.bitk=S,w.avail_in=m,w.total_in+=z-w.next_in_index,w.next_in_index=z,t.write=k,t.inflate_flush(w,p)}},t.free=function(){};}const rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function st(t,e){const n=this;let i,a=0,r=0,s=0,o=0;const l=[0],_=[0],d=new at;let c=0,f=new Int32Array(4320);const u=new it;n.bitk=0,n.bitb=0,n.window=new Uint8Array(e),n.end=e,n.read=0,n.write=0,n.reset=function(t,e){e&&(e[0]=0),6==a&&d.free(t),a=0,n.bitk=0,n.bitb=0,n.read=n.write=0;},n.reset(t,null),n.inflate_flush=function(t,e){let i,a,r;return a=t.next_out_index,r=n.read,i=(r<=n.write?n.write:n.end)-r,i>t.avail_out&&(i=t.avail_out),0!==i&&-5==e&&(e=0),t.avail_out-=i,t.total_out+=i,t.next_out.set(n.window.subarray(r,r+i),a),a+=i,r+=i,r==n.end&&(r=0,n.write==n.end&&(n.write=0),i=n.write-r,i>t.avail_out&&(i=t.avail_out),0!==i&&-5==e&&(e=0),t.avail_out-=i,t.total_out+=i,t.next_out.set(n.window.subarray(r,r+i),a),a+=i,r+=i),t.next_out_index=a,n.read=r,e},n.proc=function(t,e){let h,b,w,p,x,g,y,m;for(p=t.next_in_index,x=t.avail_in,b=n.bitb,w=n.bitk,g=n.write,y=g<n.read?n.read-g-1:n.end-g;;){let k,v,A,U,S,z,I,E;switch(a){case 0:for(;w<3;){if(0===x)return n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e);e=0,x--,b|=(255&t.read_byte(p++))<<w,w+=8;}switch(h=7&b,c=1&h,h>>>1){case 0:b>>>=3,w-=3,h=7&w,b>>>=h,w-=h,a=1;break;case 1:k=[],v=[],A=[[]],U=[[]],it.inflate_trees_fixed(k,v,A,U),d.init(k[0],v[0],A[0],0,U[0],0),b>>>=3,w-=3,a=6;break;case 2:b>>>=3,w-=3,a=3;break;case 3:return b>>>=3,w-=3,a=9,t.msg="invalid block type",e=-3,n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e)}break;case 1:for(;w<32;){if(0===x)return n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e);e=0,x--,b|=(255&t.read_byte(p++))<<w,w+=8;}if((~b>>>16&65535)!=(65535&b))return a=9,t.msg="invalid stored block lengths",e=-3,n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e);r=65535&b,b=w=0,a=0!==r?2:0!==c?7:0;break;case 2:if(0===x)return n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e);if(0===y&&(g==n.end&&0!==n.read&&(g=0,y=g<n.read?n.read-g-1:n.end-g),0===y&&(n.write=g,e=n.inflate_flush(t,e),g=n.write,y=g<n.read?n.read-g-1:n.end-g,g==n.end&&0!==n.read&&(g=0,y=g<n.read?n.read-g-1:n.end-g),0===y)))return n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e);if(e=0,h=r,h>x&&(h=x),h>y&&(h=y),n.window.set(t.read_buf(p,h),g),p+=h,x-=h,g+=h,y-=h,0!=(r-=h))break;a=0!==c?7:0;break;case 3:for(;w<14;){if(0===x)return n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e);e=0,x--,b|=(255&t.read_byte(p++))<<w,w+=8;}if(s=h=16383&b,(31&h)>29||(h>>5&31)>29)return a=9,t.msg="too many length or distance symbols",e=-3,n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e);if(h=258+(31&h)+(h>>5&31),!i||i.length<h)i=[];else for(m=0;m<h;m++)i[m]=0;b>>>=14,w-=14,o=0,a=4;case 4:for(;o<4+(s>>>10);){for(;w<3;){if(0===x)return n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e);e=0,x--,b|=(255&t.read_byte(p++))<<w,w+=8;}i[rt[o++]]=7&b,b>>>=3,w-=3;}for(;o<19;)i[rt[o++]]=0;if(l[0]=7,h=u.inflate_trees_bits(i,l,_,f,t),0!=h)return -3==(e=h)&&(i=null,a=9),n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e);o=0,a=5;case 5:for(;h=s,!(o>=258+(31&h)+(h>>5&31));){let r,d;for(h=l[0];w<h;){if(0===x)return n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e);e=0,x--,b|=(255&t.read_byte(p++))<<w,w+=8;}if(h=f[3*(_[0]+(b&X[h]))+1],d=f[3*(_[0]+(b&X[h]))+2],d<16)b>>>=h,w-=h,i[o++]=d;else {for(m=18==d?7:d-14,r=18==d?11:3;w<h+m;){if(0===x)return n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e);e=0,x--,b|=(255&t.read_byte(p++))<<w,w+=8;}if(b>>>=h,w-=h,r+=b&X[m],b>>>=m,w-=m,m=o,h=s,m+r>258+(31&h)+(h>>5&31)||16==d&&m<1)return i=null,a=9,t.msg="invalid bit length repeat",e=-3,n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e);d=16==d?i[m-1]:0;do{i[m++]=d;}while(0!=--r);o=m;}}if(_[0]=-1,S=[],z=[],I=[],E=[],S[0]=9,z[0]=6,h=s,h=u.inflate_trees_dynamic(257+(31&h),1+(h>>5&31),i,S,z,I,E,f,t),0!=h)return -3==h&&(i=null,a=9),e=h,n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e);d.init(S[0],z[0],f,I[0],f,E[0]),a=6;case 6:if(n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,1!=(e=d.proc(n,t,e)))return n.inflate_flush(t,e);if(e=0,d.free(t),p=t.next_in_index,x=t.avail_in,b=n.bitb,w=n.bitk,g=n.write,y=g<n.read?n.read-g-1:n.end-g,0===c){a=0;break}a=7;case 7:if(n.write=g,e=n.inflate_flush(t,e),g=n.write,y=g<n.read?n.read-g-1:n.end-g,n.read!=n.write)return n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e);a=8;case 8:return e=1,n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e);case 9:return e=-3,n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e);default:return e=-2,n.bitb=b,n.bitk=w,t.avail_in=x,t.total_in+=p-t.next_in_index,t.next_in_index=p,n.write=g,n.inflate_flush(t,e)}}},n.free=function(t){n.reset(t,null),n.window=null,f=null;},n.set_dictionary=function(t,e,i){n.window.set(t.subarray(e,e+i),0),n.read=n.write=i;},n.sync_point=function(){return 1==a?1:0};}const ot=[0,0,255,255];function lt(){const t=this;function e(t){return t&&t.istate?(t.total_in=t.total_out=0,t.msg=null,t.istate.mode=7,t.istate.blocks.reset(t,null),0):-2}t.mode=0,t.method=0,t.was=[0],t.need=0,t.marker=0,t.wbits=0,t.inflateEnd=function(e){return t.blocks&&t.blocks.free(e),t.blocks=null,0},t.inflateInit=function(n,i){return n.msg=null,t.blocks=null,i<8||i>15?(t.inflateEnd(n),-2):(t.wbits=i,n.istate.blocks=new st(n,1<<i),e(n),0)},t.inflate=function(t,e){let n,i;if(!t||!t.istate||!t.next_in)return -2;const a=t.istate;for(e=4==e?-5:0,n=-5;;)switch(a.mode){case 0:if(0===t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,8!=(15&(a.method=t.read_byte(t.next_in_index++)))){a.mode=13,t.msg="unknown compression method",a.marker=5;break}if(8+(a.method>>4)>a.wbits){a.mode=13,t.msg="invalid window size",a.marker=5;break}a.mode=1;case 1:if(0===t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,i=255&t.read_byte(t.next_in_index++),((a.method<<8)+i)%31!=0){a.mode=13,t.msg="incorrect header check",a.marker=5;break}if(0==(32&i)){a.mode=7;break}a.mode=2;case 2:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,a.need=(255&t.read_byte(t.next_in_index++))<<24&4278190080,a.mode=3;case 3:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,a.need+=(255&t.read_byte(t.next_in_index++))<<16&16711680,a.mode=4;case 4:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,a.need+=(255&t.read_byte(t.next_in_index++))<<8&65280,a.mode=5;case 5:return 0===t.avail_in?n:(n=e,t.avail_in--,t.total_in++,a.need+=255&t.read_byte(t.next_in_index++),a.mode=6,2);case 6:return a.mode=13,t.msg="need dictionary",a.marker=0,-2;case 7:if(n=a.blocks.proc(t,n),-3==n){a.mode=13,a.marker=0;break}if(0==n&&(n=e),1!=n)return n;n=e,a.blocks.reset(t,a.was),a.mode=12;case 12:return 1;case 13:return -3;default:return -2}},t.inflateSetDictionary=function(t,e,n){let i=0,a=n;if(!t||!t.istate||6!=t.istate.mode)return -2;const r=t.istate;return a>=1<<r.wbits&&(a=(1<<r.wbits)-1,i=n-a),r.blocks.set_dictionary(e,i,a),r.mode=7,0},t.inflateSync=function(t){let n,i,a,r,s;if(!t||!t.istate)return -2;const o=t.istate;if(13!=o.mode&&(o.mode=13,o.marker=0),0===(n=t.avail_in))return -5;for(i=t.next_in_index,a=o.marker;0!==n&&a<4;)t.read_byte(i)==ot[a]?a++:a=0!==t.read_byte(i)?0:4-a,i++,n--;return t.total_in+=i-t.next_in_index,t.next_in_index=i,t.avail_in=n,o.marker=a,4!=a?-3:(r=t.total_in,s=t.total_out,e(t),t.total_in=r,t.total_out=s,o.mode=7,0)},t.inflateSyncPoint=function(t){return t&&t.istate&&t.istate.blocks?t.istate.blocks.sync_point():-2};}function _t(){}function dt(t){const e=new _t,n=t&&t.chunkSize?Math.floor(2*t.chunkSize):131072,i=new Uint8Array(n);let a=!1;e.inflateInit(),e.next_out=i,this.append=function(t,r){const s=[];let o,l,_=0,d=0,c=0;if(0!==t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=n,0!==e.avail_in||a||(e.next_in_index=0,a=!0),o=e.inflate(0),a&&-5===o){if(0!==e.avail_in)throw new Error("inflating: bad input")}else if(0!==o&&1!==o)throw new Error("inflating: "+e.msg);if((a||1===o)&&e.avail_in===t.length)throw new Error("inflating: bad input");e.next_out_index&&(e.next_out_index===n?s.push(new Uint8Array(i)):s.push(i.slice(0,e.next_out_index))),c+=e.next_out_index,r&&e.next_in_index>0&&e.next_in_index!=_&&(r(e.next_in_index),_=e.next_in_index);}while(e.avail_in>0||0===e.avail_out);return s.length>1?(l=new Uint8Array(c),s.forEach((function(t){l.set(t,d),d+=t.length;}))):l=s[0]||new Uint8Array(0),l}},this.flush=function(){e.inflateEnd();};}_t.prototype={inflateInit:function(t){const e=this;return e.istate=new lt,t||(t=15),e.istate.inflateInit(e,t)},inflate:function(t){const e=this;return e.istate?e.istate.inflate(e,t):-2},inflateEnd:function(){const t=this;if(!t.istate)return -2;const e=t.istate.inflateEnd(t);return t.istate=null,e},inflateSync:function(){const t=this;return t.istate?t.istate.inflateSync(t):-2},inflateSetDictionary:function(t,e){const n=this;return n.istate?n.istate.inflateSetDictionary(n,t,e):-2},read_byte:function(t){return this.next_in[t]},read_buf:function(t,e){return this.next_in.subarray(t,t+e)}},self.initCodec=()=>{self.Deflate=Q,self.Inflate=dt;};\n\n\t\t',t=URL.createObjectURL(new Blob([e],{type:"text/javascript"}));lt({workerScripts:{inflate:[t],deflate:[t]}})}})(),lt({Deflate:function(e){const t=new oe,r=(n=e&&e.chunkSize?e.chunkSize:65536)+5*(Math.floor(n/16383)+1);var n;const o=S,a=new Uint8Array(r);let i=e?e.level:g;void 0===i&&(i=g),t.deflateInit(i),t.next_out=a,this.append=function(e,n){let i,s,c=0,u=0,l=0;const d=[];if(e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=r,i=t.deflate(o),i!=_)throw new Error("deflating: "+t.msg);t.next_out_index&&(t.next_out_index==r?d.push(new Uint8Array(a)):d.push(a.slice(0,t.next_out_index))),l+=t.next_out_index,n&&t.next_in_index>0&&t.next_in_index!=c&&(n(t.next_in_index),c=t.next_in_index)}while(t.avail_in>0||0===t.avail_out);return d.length>1?(s=new Uint8Array(l),d.forEach((function(e){s.set(e,u),u+=e.length}))):s=d[0]||new Uint8Array(0),s}},this.flush=function(){let e,n,o=0,i=0;const s=[];do{if(t.next_out_index=0,t.avail_out=r,e=t.deflate(A),e!=b&&e!=_)throw new Error("deflating: "+t.msg);r-t.avail_out>0&&s.push(a.slice(0,t.next_out_index)),i+=t.next_out_index}while(t.avail_in>0||0===t.avail_out);return t.deflateEnd(),n=new Uint8Array(i),s.forEach((function(e){n.set(e,o),o+=e.length})),n}},Inflate:function(e){const t=new it,r=e&&e.chunkSize?Math.floor(2*e.chunkSize):131072,n=new Uint8Array(r);let o=!1;t.inflateInit(),t.next_out=n,this.append=function(e,a){const i=[];let s,c,u=0,l=0,d=0;if(0!==e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=r,0!==t.avail_in||o||(t.next_in_index=0,o=!0),s=t.inflate(0),o&&s===de){if(0!==t.avail_in)throw new Error("inflating: bad input")}else if(s!==ae&&s!==ie)throw new Error("inflating: "+t.msg);if((o||s===ie)&&t.avail_in===e.length)throw new Error("inflating: bad input");t.next_out_index&&(t.next_out_index===r?i.push(new Uint8Array(n)):i.push(n.slice(0,t.next_out_index))),d+=t.next_out_index,a&&t.next_in_index>0&&t.next_in_index!=u&&(a(t.next_in_index),u=t.next_in_index)}while(t.avail_in>0||0===t.avail_out);return i.length>1?(c=new Uint8Array(d),i.forEach((function(e){c.set(e,l),l+=e.length}))):c=i[0]||new Uint8Array(0),c}},this.flush=function(){t.inflateEnd()}}})},83036:e=>{"use strict";e.exports=JSON.parse('{"ae.com":["aerie.com"],"alltrails.com":["alltrails.io"],"ancestry.se":["ancestry.no"],"anti-captcha.com":["antigate.com"],"anylist.com":["anylistapp.com"],"auchan.fr":["auchandirect.fr","auchandirect.com"],"blade.com":["flyblade.com"],"capitalone.com":["capitalone360.com"],"canalplus.com":["canal-plus.com","canalplus.fr"],"citi.com":["citibank.com","citibankonline.com","citicards.com"],"centralesupelec-alumni.com":["centraliens.net"],"clarin.com":["365.com.ar"],"data.ai":["appannie.com"],"discord.com":["discordapp.com","discord.gg"],"disneylandparis.com":["disneylandparis.fr"],"dropbox.com":["getdropbox.com"],"gmx.net":["gmx.de"],"google.com":["gmail.com"],"guardianlife.com":["guardiananytime.com"],"hilton.com":["hiltonhonors.com"],"istockphoto.com":["istock.com"],"kiute.fr":["leciseau.fr"],"latamairlines.com":["latam.com"],"live.com":["outlook.com"],"logmein.com":["logmeininc.com"],"mindbodyonline.com":["mndbdy.ly"],"ml.com":["mymerrill.com"],"onlinesbi.sbi":["onlinesbi.com"],"parsec.app":["parsecgaming.com"],"proton.me":["protonmail.com"],"rail-nation.com":["railnation.us"],"raymondjames.com":["rjf.com"],"rbcroyalbank.com":["royalbank.com"],"schwab.com":["schwabplan.com"],"sg.fr":["societegenerale.fr"],"shopdisney.com":["disneystore.com"],"shopdisney.co.uk":["disneystore.fr"],"sncf-connect.com":["oui.sncf"],"squareup.com":["square.com"],"surveymonkey.com":["surveymonkey.ca","surveymonkey.net","surveymonkey.nl","surveymonkey.eu","surveymonkey.fr"],"swile.co":["lunchr.co"],"tdameritrade.com":["ameritrade.com"],"telekom.de":["telekom-dienste.de"],"goto.com":["gotowebinar.com"],"twitch.tv":["twitch.com"],"twitter.com":["twitter.co","twitter.jp"],"verizon.com":["verizonwireless.com"],"wise.com":["transferwise.com"],"xfinity.com":["comcast.net"],"ya.ru":["yandex.net"],"yandex.com":["yandex.org","yandex.de"],"yandex.eu":["yandex.pl"],"yandex.ru":["yandex.com.ru"],"zoho.com":["zoho.eu"]}')},17030:e=>{"use strict";e.exports=JSON.parse('[["aa.com","americanairlines.com","americanairlines.jp"],["aeromexico.com","clubpremier.com"],["aetna.com","myplanportal.com"],["airfrance.com","klm.com","flyingblue.com"],["albertsons.com","acmemarkets.com","carrsqc.com","jewelosco.com","pavilions.com","randalls.com","safeway.com","shaws.com","starmarket.com","tomthumb.com","vons.com"],["airbnb.com.ar","airbnb.com.au","airbnb.at","airbnb.be","airbnb.com.bz","airbnb.com.bo","airbnb.com.br","airbnb.ca","airbnb.cl","airbnb.com.co","airbnb.co.cr","airbnb.cz","airbnb.dk","airbnb.com.ec","airbnb.com.sv","airbnb.fi","airbnb.fr","airbnb.de","airbnb.gr","airbnb.com.gt","airbnb.gy","airbnb.com.hn","airbnb.com.hk","airbnb.hu","airbnb.is","airbnb.co.in","airbnb.co.id","airbnb.ie","airbnb.it","airbnb.jp","airbnb.com.my","airbnb.com.mt","airbnb.mx","airbnb.nl","airbnb.co.nz","airbnb.com.ni","airbnb.no","airbnb.com.pa","airbnb.com.py","airbnb.com.pe","airbnb.pl","airbnb.pt","airbnb.ru","airbnb.com.sg","airbnb.co.kr","airbnb.es","airbnb.se","airbnb.ch","airbnb.com.tw","airbnb.com.tr","airbnb.co.uk","airbnb.com","airbnb.co.ve"],["alibaba.com","aliexpress.com","aliexpress.ru"],["amazon.com","amazon.ae","amazon.com.au","amazon.com.br","amazon.ca","amazon.fr","amazon.de","amazon.in","amazon.it","amazon.com.mx","amazon.nl","amazon.es","amazon.com.tr","amazon.co.uk","amazon.sa","amazon.sg","amazon.se","amazon.pl"],["amcrestcloud.com","amcrestview.com"],["americastestkitchen.com","cooksillustrated.com","cookscountry.com","onlinecookingschool.com"],["ancestry.com","ancestry.ca","ancestry.co.uk","ancestry.com.au","ancestry.de","ancestry.fr","ancestry.it","ancestry.mx","ancestry.se","ancestry.ie","ancestry.pl"],["anthem.com","sydneyhealth.com"],["apple.com","icloud.com"],["att.com","att.net"],["autohebdo.net","autotrader.ca"],["backcountry.com","competitivecyclist.com"],["backmarket.be","backmarket.fr"],["bahn.de","bahn.com"],["bilka.dk","br.dk","foetex.dk"],["bbc.com","bbc.co.uk"],["beachbodyondemand.com","teambeachbody.com"],["beavercreek.com","breckenridge.com","epicpass.com","keystoneresort.com","kirkwood.com","mountsunapee.com","northstarcalifornia.com","okemo.com","parkcitymountain.com","skicb.com","skiheavenly.com","snow.com","stevenspass.com","stowe.com","vail.com","whistlerblackcomb.com"],["bedbathandbeyond.com","buybuybaby.com"],["boudinbakery.com","boudincatering.com"],["cathaypacific.com","asiamiles.com"],["centralfcu.org","centralfcu.com"],["classicalradio.com","di.fm","jazzradio.com","radiotunes.com","rockradio.com","zenradio.com"],["coolblue.nl","coolblue.be","coolblue.de"],["curbed.com","grubstreet.com","nymag.com","thecut.com","vulture.com"],["dinersclubnorthamerica.com","dinersclubus.com"],["discordmerch.com","discord.store"],["dish.com","mydish.com","dishnetwork.com"],["drivethrurpg.com","drivethrucards.com","drivethrucomics.com","drivethrufiction.com","wargamevault.com","storytellersvault.com","dmsguild.com","ulisses-ebooks.de","pegasusdigital.de"],["ebgames.com.au","zingpopculture.com.au"],["epicgames.com","unrealengine.com"],["shopdisney.com","go.com","disneylandparis.com","shopdisney.fr","shopdisney.co.uk","shopdisney.de","shopdisney.es","shopdisney.eu","shopdisney.it","marvel.com","espn.com","disneyworld.eu","d23.com","thewaltdisneycompany.com","starwars.com","fxnetworks.com","disneymovieinsiders.com","abc.com"],["docusign.com","docusign.net"],["ebay.at","ebay.be","ebay.ca","ebay.ch","ebay.cn","ebay.co.th","ebay.co.uk","ebay.com","ebay.com.au","ebay.com.hk","ebay.com.my","ebay.com.sg","ebay.com.tw","ebay.de","ebay.es","ebay.fr","ebay.ie","ebay.it","ebay.nl","ebay.ph","ebay.pl","ebay.vn"],["eckerle.de","hirmer.de"],["envato.com","themeforest.net","codecanyon.net","videohive.net","audiojungle.net","graphicriver.net","placeit.net","photodune.net","tutsplus.com","3docean.net"],["eventbrite.at","eventbrite.be","eventbrite.ca","eventbrite.ch","eventbrite.cl","eventbrite.co","eventbrite.co.uk","eventbrite.co.nz","eventbrite.com","eventbrite.com.au","eventbrite.com.br","eventbrite.com.ar","eventbrite.com.mx","eventbrite.com.pe","eventbrite.de","eventbrite.dk","eventbrite.es","eventbrite.fi","eventbrite.fr","eventbrite.hk","eventbrite.ie","eventbrite.in","eventbrite.it","eventbrite.my","eventbrite.nl","eventbrite.ph","eventbrite.pt","eventbrite.se","eventbrite.sg"],["expedia.com","expedia.se","expedia.ru","expedia.no","expedia.nl","expedia.mx","expedia.it","expedia.gr","expedia.fr","expedia.fi","expedia.es","expedia.dk","expedia.de","expedia.com.vn","expedia.com.tw","expedia.com.sg","expedia.com.ph","expedia.com.my","expedia.com.hk","expedia.com.br","expedia.com.au","expedia.com.ar","expedia.co.uk","expedia.co.th","expedia.co.nz","expedia.co.kr","expedia.co.jp","expedia.co.in","expedia.co.id","expedia.cn","expedia.ch","expedia.cat","expedia.ca","expedia.be","expedia.at"],["expressvpn.com","expressvpn.net"],["facebook.com","messenger.com"],["fandango.com","fandangonow.com"],["findmypast.co.uk","findmypast.com","findmypast.com.au","findmypast.ie"],["firstbanktexas.com","savvyatfirstbanklubbock.com"],["fnac.com","fnacspectacles.com"],["fourleaf.net","fourleaf.cl"],["foursquare.com","swarmapp.com"],["francetelevisions.fr","france.tv"],["fxcm.com","myfxcm.com"],["glassdoor.com","glassdoor.com.ar","glassdoor.com.au","glassdoor.com.br","glassdoor.com.hk","glassdoor.com.mx","glassdoor.co.in","glassdoor.co.nz","glassdoor.co.uk","glassdoor.at","glassdoor.ch","glassdoor.sg","glassdoor.ie","glassdoor.it","glassdoor.nl","glassdoor.es","glassdoor.de","glassdoor.ca","glassdoor.fr","glassdoor.be"],["gmx.at","gmx.net"],["gogoair.com","gogoinflight.com"],["hcsc.net","bcbsil.com"],["hertz.com","hertz.fr","hertz.ch","hertz.nl","hertz.de","hertz.co.uk"],["impresa.pt","sic.pt","expresso.pt","expressoemprego.pt","bpiexpressoimobiliario.pt"],["interactivebrokers.co.uk","interactivebrokers.com","interactivebrokers.ca","interactivebrokers.com.hk","interactivebrokers.co.in","interactivebrokers.co.jp","interactivebrokers.com.au"],["intuit.com","mint.com"],["jobleads.com","jobleads.de","jobleads.fr","jobleads.it","jobleads.co.uk","jobleads.ca","jobleads.mx"],["kaiserpermanente.org","kp.org"],["kayak.com","kayak.ae","kayak.com.ar","kayak.com.au","kayak.com.br","kayak.ch","kayak.cl","kayak.com.co","kayak.de","kayak.dk","kayak.es","kayak.fr","kayak.co.uk","kayak.com.hk","kayak.co.id","kayak.ie","kayak.co.in","kayak.it","kayak.co.jp","kayak.co.kr","kayak.com.mx","kayak.com.my","kayak.nl","kayak.no","kayak.com.pe","kayak.com.ph","kayak.pl","kayak.pt","kayak.ru","kayak.sa","kayak.se","kayak.sg","kayak.co.th","kayak.com.tr"],["landmarkcu.com","landmarkcuonline.com"],["loiselet-daigremont.com","loiselet-daigremont.fr"],["lookmark.io","lookmark.link"],["lrz.de","mwn.de","mytum.de","tum.de"],["lufthansa.com","miles-and-more.com","swiss.com"],["marriott.com","marriottrewards.com","ritzcarlton.com","spg.com","starwoodhotels.com"],["e.leclerc","auto.leclerc","leclercdrive.fr","location.leclerc","chezmoi.leclerc","traiteur.leclerc","mesrecettes.leclerc"],["live.com","microsoftonline.com","office.com"],["markandgraham.com","pbteen.com","potterybarn.com","williams-sonoma.com"],["ml.com","merrill.com","merrilledge.com"],["mojang.com","minecraft.net"],["myheritage.com","myheritage.fr","myheritage.no","myheritage.nl","myheritage.co.il","myheritage.de","myheritage.se","myheritage.dk"],["myringgo.com","myringgo.co.uk"],["nextinpact.com","inpact-hardware.com"],["nintendolife.com","purexbox.com","pushsquare.com"],["nokia.com","withings.com"],["norwegianreward.com","norwegian.com"],["oesterreich.gv.at","handy-signatur.at"],["oneazcu.com","oneazcreditunion.com"],["opendsn.com","dnsomatic.com"],["opentable.com","opentable.co.uk","opentable.de","opentable.jp","opentable.com.au","opentable.com.mx","opentable.ie"],["optumrx.com","optum.com"],["pinterest.com","pinterest.ca","pinterest.co.uk","pinterest.fr","pinterest.de","pinterest.es","pin.it","pinterest.com.au","pinterest.se","pinterest.ph","pinterest.ch","pinterest.com.mx","pinterest.dk","pinterest.pt","pinterest.ru","pinterest.it","pinterest.at","pinterest.jp","pinterest.cl","pinterest.ie","pinterest.co.kr","pinterest.nz","pintrest.com"],["pocket.com","getpocket.com"],["poshmark.com","poshmark.ca","poshmark.com.au"],["post.at","shoepping.at"],["postman.com","getpostman.com"],["potterybarnkids.co.uk","westelm.co.uk"],["priorityguestrewards.com","aturahotels.com","independentcollection.com.au","qthotels.com","rydges.com"],["probikeshop.fr","bikeshop.es","probikeshop.it","probikeshop.pt","probikeshop.com"],["proton.me","protonvpn.com"],["prusa3d.com","prusaprinters.org"],["pornhub.com","pornhubpremium.com"],["postnl.nl","postnl.be"],["rakuten.com","rakuten.tv"],["riotgames.com","leagueoflegends.com"],["sas.dk","sas.no","sas.se","sas.fi","flysas.com"],["saxoinvestor.fr","saxoinvestor.com","saxotrader.com","saxotrader.fr"],["scholarshare529.com","secureaccountview.com"],["scribbr.com","scribbr.de","scribbr.dk","scribbr.es","scribbr.fi","scribbr.fr","scribbr.it","scribbr.nl","scribbr.no","scribbr.se"],["shopperplus.ca","123ink.ca","primecables.ca","living.ca"],["sncf.com","sncf-connect.com","monidentifiant.sncf","tgvinoui.sncf","tgvinouipro.sncf"],["sodexo.com","sodexopass.fr"],["sony.com","sonyentertainmentnetwork.com"],["spark.net","jdate.com"],["splitser.com","wiebetaaltwat.nl"],["stackoverflow.com","askubuntu.com","serverfault.com","stackexchange.com","superuser.com"],["starwellness.org","slhn.org"],["steampowered.com","steamcommunity.com","steamgames.com"],["surveymonkey.com","surveymonkey.de","surveymonkey.co.uk","surveymonkey.ru"],["tesla.com","teslamotors.com"],["thefork.com","thefork.at","thefork.fr","thefork.ch","thefork.no","thefork.de","thefork.co.uk","thefork.com.au"],["ticketcorner.ch","fansale.ch"],["ticketmaster.com","livenation.com"],["trello.com","atlassian.com"],["ubisoft.com","ubi.com","ubisoftconnect.com"],["uhaul.com","movinghelp.com"],["uhc.com","myuhc.com","healthsafe-id.com"],["umsystem.edu","mst.edu","umkc.edu","umsl.edu","missouri.edu"],["united.com","unitedwifi.com"],["uspowerboating.com","ussailing.org"],["verizonwireless.com","vzw.com"],["walgreens.com","alliancerxwp.com"],["wayfair.com","wayfair.co.uk","wayfair.ca","wayfair.de","jossandmain.com","allmodern.com","perigold.com","birchlane.com"],["wellsfargo.com","wellsfargoadvisors.com"],["wikipedia.org","mediawiki.org","wikibooks.org","wikidata.org","wikinews.org","wikiquote.org","wikisource.org","wikiversity.org","wikivoyage.org","wiktionary.org","wikimedia.org"],["wiimmfi.de","wii-homebrew.com"],["wilson.com","slugger.com","atecsports.com","demarini.com","evoshield.com","luxilon.com"],["wsj.com","dowjones.com"],["yandex.ru","yandex.ua","yandex.by","yandex.eu","yandex.ee","yandex.lt","yandex.lv","yandex.md","yandex.uz","yandex.tm","yandex.tj","yandex.az","yandex.com","yandex.co.il","yandex.fr","yandex.com.ge","yandex.com.am","yandex.com.tr","yandex.kz","yandex.kg"]]')},32508:e=>{"use strict";e.exports=JSON.parse('{"accessbanking.com.ar":["icbc.com.ar"],"airfrance.com":["airfrance.fr"],"amazon.ca":["audible.ca"],"amazon.co.jp":["audible.co.jp"],"amazon.co.uk":["audible.co.uk"],"amazon.com":["audible.com","primevideo.com"],"amazon.com.au":["audible.com.au"],"amazon.de":["audible.de"],"amazon.es":["audible.es"],"amazon.fr":["audible.fr"],"amazon.in":["audible.in"],"amazon.it":["audible.it"],"aura.com":["hotspotshield.com"],"battle.net":["blizzard.com"],"canada.ca":["gc.ca"],"connexion-mabanque.bnpparibas":["bnpparibas.com","bnpparibas.fr","mabanque.bnpparibas","mabanqueprivee.bnpparibas","mabanquepro.bnpparibas"],"decathlon.net":["decathlon.at","decathlon.be","decathlon.ch","decathlon.co.uk","decathlon.es","decathlon.fr","decathlon.hu","decathlon.it","decathlon.nl","decathlon.pl","decathlon.pt","decathlon.ro","decathlon.se","decathlon.sk"],"doordash.com":["trycaviar.com"],"ea.com":["origin.com"],"gm.com":["buick.com","cadillac.com","chevrolet.com","gmc.com"],"google.com":["google.at","google.ca","google.ch","google.co.jp","google.co.in","google.co.kr","google.co.uk","google.com.au","google.com.br","google.com.mx","google.de","google.es","google.fr","google.gr","google.it","google.nl","google.pt","google.ru","youtube.com"],"grassavoye.com":["witiwi.fr"],"hearstnp.com":["sfchronicle.com"],"just-eat.fr":["alloresto.fr","allo-resto.fr"],"laposte.fr":["digiposte.fr"],"liebherr.com":["myliebherr.com"],"live.com":["microsoft.com","skype.com","xbox.com"],"logi.com":["astrogaming.com","logitech.com","logitech.fr","logitechg.com","ultimateears.com"],"logmeininc.com":["goto.com"],"mercadolibre.com":["mercadopago.com.ar","mercadolibre.com.ar","mercadolibre.com.mx","mercadopago.com.mx"],"microsoftonline.com":["office.com","onenote.com"],"mytotalconnectcomfort.com":["honeywellhome.com"],"netteller.com":["myhhsb.com"],"nymag.com":["curbed.com","grubstreet.com","thecut.com","vulture.com"],"orange.fr":["sosh.fr"],"paydirekt.de":["giropay.de"],"pcid.ca":["pcoptimum.ca","shoppersdrugmart.ca","realcanadiansuperstore.ca","loblaws.ca","zehrs.ca","atlanticsuperstore.ca","yourindependentgrocer.ca","nofrills.ca","fortinos.ca","maxi.ca","provigo.ca","newfoundlandgrocerystores.ca","independentcitymarket.ca","valumart.ca","wholesaleclub.ca","extrafoods.ca","pcchef.ca"],"riotgames.com":["playruneterra.com","playvalorant.com","lolesports.com"],"seek.com":["seek.com.au","seek.co.nz"],"shopify.com":["shopify.no","shopify.se","shopify.com.ng","shopify.nl","shopify.hk","shopify.co.id","shopify.dk","shopify.ie","shopify.com.ph","shopify.co.za","shopify.my","shopify.com.sg","shopify.co.nz","shopify.be","shopify.de","shopify.com.au","shopify.co.uk","shopify.fr","shopify.ca","shopify.dev","shopify.in"],"sims.co.uk":["sims-parent.co.uk","sims-student.co.uk"],"sony.com":["playstation.com"],"surveymonkey.com":["research.net"],"swisscom.ch":["bluewin.ch"],"thefork.fr":["lafourchette.com","tfk.io"],"velocityfrequentflyer.com":["virginaustralia.com"],"vertafore.com":["ams360.com"],"vistaprint.com":["vistaprint.ca","vistaprint.fr"],"voxmedia.com":["eater.com","polygon.com","sbnation.com","theverge.com"],"zalando.com":["zalon.de","zalando.at","zalando.be","zalando.ch","zalando.co.uk","zalando.cz","zalando.de","zalando.dk","zalando.ee","zalando.es","zalando.fi","zalando.fr","zalando.hr","zalando.hu","zalando.ie","zalando.it","zalando.lt","zalando.lu","zalando.lv","zalando.nl","zalando.no","zalando.pl","zalando.pt","zalando.ro","zalando.se","zalando.si","zalando.sk"]}')}}]);