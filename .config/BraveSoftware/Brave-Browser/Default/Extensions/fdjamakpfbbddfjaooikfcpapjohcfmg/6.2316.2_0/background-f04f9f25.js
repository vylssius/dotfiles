"use strict";(self.webpackChunk_dashlane_amphora=self.webpackChunk_dashlane_amphora||[]).push([[691],{17825:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.assertUnreachable=void 0,t.assertUnreachable=function(e,t="Didn't expect to reach this code."){throw new Error(t)}},32663:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.asyncFilter=void 0,t.asyncFilter=async function(e,t){const r=await Promise.all(e.map(t));return e.filter(((e,t)=>r[t]))}},27627:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.asyncMapLimit=void 0;const o=r(4939);t.asyncMapLimit=(e,t,r,n=e.length)=>{const i=e.length;let a=0;const s=[];let c=0;const u=o=>n=>{if(s[o]=n,a++,i===a)return r(s);c<i-1&&(c++,t(e[c],u(c)))},d=Math.max(Math.min(i,n),1);c=d-1;for(let r=0;r<d;r++)t(e[r],u(r)).catch((e=>(0,o.logWarn)({message:e.message})))}},63311:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0,t.debounce=function(e,t){let r;return function(o,...n){var i=this;clearTimeout(r),o.immediateCall?(r=null,e.apply(i,n)):r=setTimeout((function(){r=null,e.apply(i,n)}),t)}}},5851:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decipherDatabaseRules=void 0;const o=r(56668),n=r(83570);t.decipherDatabaseRules=(e,t)=>(async(e,t)=>{const r=await(0,o.decipherDashlaneSecureData)(t,e,"",(0,n.makeGetDerivateKeyWithCacheAndQueue)());return(0,o.deflatedUtf8ToUtf16)(r)})(e,t)},82761:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeTransactions=void 0;t.sanitizeTransactions=e=>e.filter(Boolean)},93564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getWindowLocalStorage=void 0,t.getWindowLocalStorage=function(){return self.localStorage||null}},96186:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.inMemoryInterSessionUnsyncedSliceReducer=void 0;var o=r(75486);Object.defineProperty(t,"inMemoryInterSessionUnsyncedSliceReducer",{enumerable:!0,get:function(){return o.inMemoryInterSessionUnsyncedSliceReducer}})},16373:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetAllLoginNotification=t.addNewLoginNotification=t.RESET_ALL_LOGIN_NOTIFICATIONS=t.ADD_NEW_LOGIN_NOTIFICATION=void 0,t.ADD_NEW_LOGIN_NOTIFICATION="ADD_NEW_LOGIN_NOTIFICATION",t.RESET_ALL_LOGIN_NOTIFICATIONS="RESET_ALL_LOGIN_NOTIFICATIONS";t.addNewLoginNotification=e=>({type:t.ADD_NEW_LOGIN_NOTIFICATION,notification:e});t.resetAllLoginNotification=()=>({type:t.RESET_ALL_LOGIN_NOTIFICATIONS})},71907:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(16373);t.default=(e=[],t)=>{switch(t.type){case o.ADD_NEW_LOGIN_NOTIFICATION:return[...e,t.notification];case o.RESET_ALL_LOGIN_NOTIFICATIONS:return[];default:return e}}},40042:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoginNotificationType=void 0,function(e){e.RELOGIN_NEEDED="RELOGIN_NEEDED",e.SSO_FEATURE_BLOCKED="SSO_FEATURE_BLOCKED",e.SSO_SETUP_ERROR="SSO_SETUP_ERROR",e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(t.LoginNotificationType||(t.LoginNotificationType={}))},75486:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.inMemoryInterSessionUnsyncedSliceReducer=void 0;const o=r(82422),n=r(71907);t.inMemoryInterSessionUnsyncedSliceReducer=(0,o.combineReducers)({loginNotification:n.default})},96637:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TsEventBusCommandQueryBus=void 0;var o=r(42278);Object.defineProperty(t,"TsEventBusCommandQueryBus",{enumerable:!0,get:function(){return o.TsEventBusCommandQueryBus}})},15911:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.liveSlot=void 0;const o=r(71796),n={noBuffer:!0};t.liveSlot=()=>(0,o.slot)(n)},42278:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TsEventBusCommandQueryBus=void 0;const o=r(71796),n=r(30137),i=r(7036);class a extends n.CommandQueryBus{constructor(e,t,r){super(e),this.bus=r,r||(this.bus=(0,o.createEventBus)({events:t}))}registerCommand(e,t){this.bus[e].on(t)}registerQuery(e,t){this.bus[e].on(t)}registerLiveQuery(e,t){(0,i.connectLazySlot)(this.bus[e],t)}}t.TsEventBusCommandQueryBus=a},76901:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageEventStore=void 0;const o=r(33968),n=r(15660);class i extends o.EventStore{constructor(e){super(),this.localStorageService=e}async store(e){await this.localStorageService.getInstance().storeEventStore(e)}async retrieve(){const e=await this.localStorageService.getInstance().getEventStore();return null===e?n.defaultCarbonEventStore:{healthUpdates:e.healthUpdates||n.defaultCarbonEventStore.healthUpdates,iconsUpdates:e.iconsUpdates||n.defaultCarbonEventStore.iconsUpdates}}}t.LocalStorageEventStore=i},42898:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventStoreConsumer=void 0;const o=r(28354);t.EventStoreConsumer=class{constructor(e,t){this.eventStore=e,this.hooks=t,this.liveConsumptionSubs={},this.lockIds={},this.startTopic=e=>{this.startLiveConsumption(e),this.consumeTopic(e)},this.lockTopic=e=>{this.stopLiveConsumption(e);const t=(0,o.v4)();return this.lockIds[e]=(this.lockIds[e]||new Set).add(t),t},this.releaseTopic=(e,t)=>{const r=this.lockIds[e];r&&r.delete(t),r&&0!==r.size||this.startTopic(e)},this.teardown=()=>{Object.keys(this.liveConsumptionSubs).forEach(this.stopLiveConsumption)},this.consumeTopic=async e=>{const t=await this.eventStore.getItems(e);for(const r of t)this.handleItem(e,r)},this.startLiveConsumption=e=>{this.liveConsumptionSubs[e]||(this.liveConsumptionSubs[e]=this.eventStore.newItems$(e).subscribe((t=>this.handleItem(e,t))))},this.stopLiveConsumption=e=>{this.liveConsumptionSubs[e]&&(this.liveConsumptionSubs[e].unsubscribe(),delete this.liveConsumptionSubs[e])},this.handleItem=async(e,t)=>{const r=this.hooks[e];r||await this.eventStore.remove(e,t.id);await r(t.event)&&await this.eventStore.remove(e,t.id)}}}},36606:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebugConnector=void 0;const o=r(71796);t.DebugConnector={log:(0,o.slot)(),info:(0,o.slot)(),warning:(0,o.slot)(),error:(0,o.slot)()}},44261:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},92231:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(44261),t),n(r(36606),t)},31335:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(78759),n=r(91296);t.config={commands:{},queries:{getIsBrazeContentDisabled:{selector:o.disableBrazeContentCardsSelector},getIsLoginFlowMigrationDisabled:{selector:o.disableLoginFlowMigrationSelector},getIsAutoSSOLoginDisabled:{selector:o.disableAutoSSOLoginSelector}},liveQueries:{liveIsBrazeContentDisabled:{operator:n.disableBrazeContentCardsOperator$},liveIsLoginFlowMigrationDisabled:{operator:n.disableLoginFlowMigrationOperator$},liveIsAutoSSOLoginDisabled:{operator:n.disableAutoSSOLoginOperator$}}}},19469:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(31335);t.bootstrap=e=>{e.register(o.config)}},13240:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RequestedKillSwitches=void 0,function(e){e.DisableAutofill="disableAutofill",e.BrazeContentCardsDisabled="brazeContentCardsDisabled",e.DisableLoginFlowMigration="disableLoginFlowMigration",e.DisableAutoSSOLogin="disableAutoSSOLogin"}(t.RequestedKillSwitches||(t.RequestedKillSwitches={}))},36641:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerKillswitchCron=void 0;const o=r(55030);let n=null;const i=36e5;t.triggerKillswitchCron=function(e){return n||((0,o.updateKillswitchState)(e),n=setInterval((()=>{try{(0,o.updateKillswitchState)(e)}catch{}}),i)),n}},61:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(19469);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},55030:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateKillswitchState=void 0;const o=r(66677),n=r(46298),i=r(10857),a=r(13240);t.updateKillswitchState=async e=>{const t=Object.values(a.RequestedKillSwitches),r=await(0,o.getKillSwitches)(e,t);if((0,n.isApiError)(r))throw new Error(`[Killswitch] - updateKillswitchState : ${r.message} (${r.code})`);e.dispatch((0,i.killswitchStateUpdated)({disableAutofill:r.disableAutofill||!1,brazeContentCardsDisabled:r.brazeContentCardsDisabled||!1,disableLoginFlowMigration:r.disableLoginFlowMigration||!1,disableAutoSSOLogin:r.disableAutoSSOLogin||!1}))}},91296:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableAutoSSOLoginOperator$=t.disableLoginFlowMigrationOperator$=t.disableBrazeContentCardsOperator$=void 0;const o=r(18948),n=r(3343),i=r(78759);t.disableBrazeContentCardsOperator$=()=>(0,o.pipe)((0,n.map)(i.disableBrazeContentCardsSelector),(0,n.distinctUntilChanged)());t.disableLoginFlowMigrationOperator$=()=>(0,o.pipe)((0,n.map)(i.disableLoginFlowMigrationSelector),(0,n.distinctUntilChanged)());t.disableAutoSSOLoginOperator$=()=>(0,o.pipe)((0,n.map)(i.disableAutoSSOLoginSelector),(0,n.distinctUntilChanged)())},78759:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableAutoSSOLoginSelector=t.disableLoginFlowMigrationSelector=t.disableBrazeContentCardsSelector=t.disableAutofillSelector=t.killswitchSelector=void 0;const o=r(79390);t.killswitchSelector=e=>e.userSession.killswitch||(0,o.getEmptyKillswitchState)();t.disableAutofillSelector=e=>(0,t.killswitchSelector)(e).disableAutofill||!1;t.disableBrazeContentCardsSelector=e=>(0,t.killswitchSelector)(e).brazeContentCardsDisabled||!1;t.disableLoginFlowMigrationSelector=e=>(0,t.killswitchSelector)(e).disableLoginFlowMigration||!1;t.disableAutoSSOLoginSelector=e=>(0,t.killswitchSelector)(e).disableAutoSSOLogin},23299:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(36641);t.setupSubscriptions=function(e,t){e.appInitialized.on((()=>{const{storeService:e}=t;(0,o.triggerKillswitchCron)(e)}))}},89855:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isBackupCryptError=t.BackupCryptError=t.BackupCryptErrorMessages=t.BackupCryptErrorCode=void 0;const o=r(92263);var n;!function(e){e[e.TRANSACTION_CLEAR_CONTENT_EMPTY=0]="TRANSACTION_CLEAR_CONTENT_EMPTY",e[e.EMPTY_CLEAR_FULL_BACKUP_FILE_XML=1]="EMPTY_CLEAR_FULL_BACKUP_FILE_XML",e[e.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY=2]="CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY",e[e.EMPTY_FULL_BACKUP_FILE=3]="EMPTY_FULL_BACKUP_FILE",e[e.NULL_FULL_BACKUP_FILE_MAP=4]="NULL_FULL_BACKUP_FILE_MAP",e[e.EMPTY_FULL_BACKUP_FILE_MAP=5]="EMPTY_FULL_BACKUP_FILE_MAP",e[e.EMPTY_CLEAR_FULL_BACKUP_FILE=6]="EMPTY_CLEAR_FULL_BACKUP_FILE",e[e.CLEAR_FULL_BACKUP_FILE_NOT_XML=7]="CLEAR_FULL_BACKUP_FILE_NOT_XML",e[e.FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE=8]="FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE",e[e.FULL_BACKUP_FILE_ITEM_WITHOUT_ID=9]="FULL_BACKUP_FILE_ITEM_WITHOUT_ID",e[e.TRANSACTION_CONTENT_NOT_XML=10]="TRANSACTION_CONTENT_NOT_XML"}(n=t.BackupCryptErrorCode||(t.BackupCryptErrorCode={})),t.BackupCryptErrorMessages={[n.TRANSACTION_CLEAR_CONTENT_EMPTY]:"Empty transaction content",[n.EMPTY_CLEAR_FULL_BACKUP_FILE_XML]:"Empty full backup file XML",[n.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY]:"Full backup file XML not resolved as an array",[n.EMPTY_FULL_BACKUP_FILE]:"Empty full backup file",[n.NULL_FULL_BACKUP_FILE_MAP]:"Null full backup file map",[n.EMPTY_FULL_BACKUP_FILE_MAP]:"Empty full backup file map",[n.EMPTY_CLEAR_FULL_BACKUP_FILE]:"Deciphered full backup file content is empty",[n.CLEAR_FULL_BACKUP_FILE_NOT_XML]:"WRONG_PASSWORD",[n.FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE]:"Full backup file item without kwType",[n.FULL_BACKUP_FILE_ITEM_WITHOUT_ID]:"Full backup file item without Id",[n.TRANSACTION_CONTENT_NOT_XML]:"WRONG_PASSWORD"},t.BackupCryptError={codes:n,name:"BackupCryptError",messages:t.BackupCryptErrorMessages};t.isBackupCryptError=e=>(0,o.isCarbonError)(e,t.BackupCryptError)},46e3:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decryptFullBackupFile=void 0;const o=r(80469),n=r(89855),i=r(83638),a=r(56668),s=r(92263),c=r(61797),u=r(70252),d=r(58582),l=async(e,t)=>{try{const e=await(0,c.parseDashlaneXml)(t);if(!e)throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE_XML);if(!Array.isArray(e))throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY);return e}catch(t){throw e(d.announcements.decipherFullBackupParseFailed(t)),t}},p=(e,t,r)=>{if(null==t)return e(d.announcements.decipherFullBackupSkipped()),!1;if(""===t)throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.EMPTY_FULL_BACKUP_FILE);if(null===r)throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.NULL_FULL_BACKUP_FILE_MAP);if(t&&0===r.size)throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.EMPTY_FULL_BACKUP_FILE_MAP);return!0},S=async(e,t,r)=>{try{const t=await e.decrypt(r),o=(0,a.deflatedUtf8ToUtf16)(t);if(!o){const e=new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE);throw u.sendExceptionLog({error:e}),e}if("string"==typeof o&&!o.trim().startsWith("<"))throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_NOT_XML);return o}catch(n){const i=(0,o.attemptReadCryptoPayload)(e,r);throw t(d.announcements.decipherFullBackupDecipherFailed(n,i)),n}},g=(e,t,r)=>{const{Id:o,kwType:a}=t,c=r.get(o);if(void 0===c)return e(d.announcements.decipherFullBackupItemSkipped(new Error("Transaction not in full backup list skipped"),{itemType:a,itemId:o})),null;const u=t instanceof Object?Object.keys(t):[];if(!a){const t=new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE);throw e(d.announcements.decipherFullBackupItemReadFailed(t.addAdditionalInfo({itemId:o,itemKeys:u}),o)),t}return o?(e(d.announcements.decipherFullBackupItemRead(a,o,c)),{type:(0,i.getTransactionTypeFromDataModelType)(a),backupDate:c,action:"BACKUP_EDIT",identifier:o,content:t}):(e(d.announcements.decipherFullBackupItemSkipped(new Error("Transaction without id skipped"),{itemType:a})),null)},E=(e,t,r)=>{const o=t.length,n=[],i=new Set;for(let a=0;a<o;++a){const o=t[a];o.Id&&i.add(o.Id);const s=g(e,o,r);s&&n.push(s)}return((e,t,r)=>{for(const o in t.keys())r.has(o)||e(d.announcements.decipherFullBackupItemSkipped(new Error("Missing full backup item content"),{itemId:o}))})(e,r,i),n};t.decryptFullBackupFile=async function(e,t,r,i){try{if(!p(t,r,i))return[];t(d.announcements.decipherFullBackupStarted());const n=await S(e,t,r),a=await l(t,n),s=(0,o.fixKwType)(a),c=E(t,s,i);return t(d.announcements.decipherFullBackupFinished(c.length)),c}catch(e){if(t(d.announcements.decipherFullBackupFailed(e)),(0,s.isCarbonError)(e,n.BackupCryptError,n.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE))return[];throw e}}},63713:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encryptSingleTransaction=t.decrypt=void 0;const o=r(16516),n=r(46e3),i=r(16859);Object.defineProperty(t,"encryptSingleTransaction",{enumerable:!0,get:function(){return i.encryptSingleTransaction}});const a=r(59700),s=r(58582),c=e=>(0,o.partition)((e=>"SETTINGS"===e.type),e),u=e=>(0,o.partition)((e=>!!e.content),e),d=e=>e.map((e=>({...e,content:null})));t.decrypt=async function(e,t,r,o,l){if(null===l)throw new Error("null transactions");const p=Number(r&&o.size);t(s.announcements.decipherStarted(p));const S=await(0,n.decryptFullBackupFile)(e,t,r,o);t(s.announcements.decipherTransactionsStarted());const[g,E]=c(l),y=await(0,i.decryptSingleTransactions)(e,t,g),[_,A]=u(E),m=(0,a.makeOpenSessionProgressService)();m.init(_.length);const T=await(0,i.decryptSingleTransactions)(e,t,_,m),v=d(A);t(s.announcements.decipherTransactionsFinished());const f=[...S,...y,...v,...T];return t(s.announcements.decipherFinished(f)),f}},59700:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeOpenSessionProgressService=void 0;const o=r(19697);t.makeOpenSessionProgressService=()=>{let e,t,r,n;const i=(i=!1)=>{const a=(0,o.default)();if(!a)return;const s=t/e*100;(i||Date.now()-n>=500&&s!==r)&&(r=s,n=Date.now(),a.openSessionProgressChanged({statusDescription:"percentage of work done before session opening",statusProgress:r}))};return{init(o){e=o,t=0,r=0,n=Date.now(),i(!0)},incrementJobsDone(){if(void 0===e)throw new Error("openSessionProgressService must be initialized before begin used");t++,i()},decrementJobsTodo(){e--}}}},16859:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encryptSingleTransaction=t.decryptSingleTransactions=t.decryptSingleTransaction=t.parseTransactionContentXml=t.decryptTransactionContent=void 0;const o=r(53576),n=r(80469),i=r(89855),a=r(92263),s=r(61797),c=r(70252),u=r(56668),d=r(58582);t.decryptTransactionContent=async(e,t,{content:r})=>{try{const t=await e.decrypt(r);return(0,u.deflatedUtf8ToUtf16)(t)}catch(o){const i=(0,n.attemptReadCryptoPayload)(e,r);throw t(d.announcements.decipherTransactionDecipherFailed(o,i)),o}};t.parseTransactionContentXml=async(e,t)=>{try{return(e=>{if(!e){const e=new a.CarbonError(i.BackupCryptError,i.BackupCryptErrorCode.TRANSACTION_CLEAR_CONTENT_EMPTY);throw c.sendExceptionLog({error:e}),e}})(t),(e=>{if("string"==typeof e&&!e.trim().startsWith("<"))throw new a.CarbonError(i.BackupCryptError,i.BackupCryptErrorCode.TRANSACTION_CONTENT_NOT_XML)})(t),await(0,s.parseDashlaneXml)(t)}catch(t){throw e(d.announcements.decipherTransactionParseFailed(t)),t}};const l=(e,t)=>Object.assign({},e,{content:t});async function p(e,r,a){try{r(d.announcements.decipherTransactionStarted(a));const o=await(0,t.decryptTransactionContent)(e,r,a),i=await(0,t.parseTransactionContentXml)(r,o),s=(0,n.fixKwType)(i),c=l(a,s);return r(d.announcements.decipherTransactionFinished(a)),c}catch(e){const{type:t}=a;if((0,i.isBackupCryptError)(e)){const{action:r,backupDate:n,identifier:i}=a,s=(0,o.getDataModelTypeFromTransactionType)(t);e.addAdditionalInfo({itemId:i,itemType:s,action:r,backupDate:n})}if(r(d.announcements.decipherTransactionFailed(e,a)),"SETTINGS"===t)throw e;return null}}t.decryptSingleTransaction=p,t.decryptSingleTransactions=async function(e,t,r,o){const n=r.map((async r=>{const n=await p(e,t,r);return o&&o.incrementJobsDone(),n}));return(await Promise.all(n)).filter(Boolean)},t.encryptSingleTransaction=async function(e,t,r={}){const o=(0,u.utf16ToDeflatedUtf8)(t.content),n=await e.getInstance().encrypt(o,r);return{...t,content:n}}},80469:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fixKwType=t.attemptReadCryptoPayload=void 0;const o=r(54218);t.attemptReadCryptoPayload=(e,t)=>{try{return e.readCryptoPayload(t)}catch(e){}return""},t.fixKwType=function e(t){return Array.isArray(t)?t.map((t=>e(t))):(0,o.default)(t)?Object.keys(t).reduce(((r,o)=>{const n=t[o];return"__type__"===o?r.kwType=n:r[o]=e(n),r}),{}):t}},17936:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(44317),t)},44317:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeDiagnosticReportMonitor=void 0;const o=r(53576),n=r(54034),i=r(92263),a=r(89855);t.makeDiagnosticReportMonitor=()=>{let e="",t="";const r="fullBackupFile";return(s,{timestamp:c})=>{switch(s.type){case"DecipherFullBackupStarted":(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:"[decryptFullBackupFile] - Start Decryption"});break;case"DecipherFullBackupItemRead":{const{itemId:e}=s;(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:`[fullBackupFileItemsContent] - ${e} succeed`,status:"succeed"})}break;case"DecipherFullBackupItemSkipped":{const{itemId:e}=s;(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:e?`[fullBackupFileItemsContent] - ${e} does not have backupDate => return null`:"[fullBackupFileItemsContent] - does not have id => return null",status:"failed"})}break;case"DecipherFullBackupParseFailed":{const{error:t}=s;e=(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE_XML)?"parseXml does not failed but result nothing => reject err: WRONG_PASSWORD":(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY)?"parseXml result not an Array => reject err: fullBackupFileItemsContent is not an Array":`parseXml failed => reject err: ${t}`}break;case"DecipherFullBackupDecipherFailed":{const{error:t}=s;e=(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_NOT_XML)?'decrypt result with xml string which does not start with "<" => throw new Error WRONG_PASSWORD':(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE)?"decrypt result with empty xml => throw new Error (Decrypt FullBackupFile empty result)":"failed to decipher fullBackupFile"}break;case"DecipherFullBackupFailed":(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:`[decryptFullBackupFile] - ${e}: null`,status:"failed"});break;case"DecipherFullBackupFinished":(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:`[decryptFullBackupFile] - ${e}: null`,status:"succeed"});break;case"DecipherTransactionStarted":{const{identifier:e,action:r,backupDate:i,time:a,transactionType:u}=s;t=e,(0,n.triggerSendTransactionDecipheringDiagnosticLog)({identifier:e,action:r,backupDate:i,time:a,type:o.TransactionType[u],date:c,message:"[decryptSingleTransaction] - Start Decryption"})}break;case"DecipherTransactionDecipherFailed":{const{error:t}=s;e=(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.TRANSACTION_CONTENT_NOT_XML)?'decrypt resolve with xml string that does not start with "<"':(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.TRANSACTION_CLEAR_CONTENT_EMPTY)?"decrypt resolve empty xml content":"Decryption failed with error"}break;case"DecipherTransactionParseFailed":e="failed to parse XML content";break;case"DecipherTransactionFailed":(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:t,message:`[decryptSingleTransaction] - ${e}: null`,status:"failed"});break;case"DecipherTransactionFinished":(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:t,message:"[decryptSingleTransaction] - Success",status:"succeed"})}}}},91453:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatStep=void 0;const o=r(2695),n=r(17825);t.formatStep=e=>{switch(e){case o.SyncLoggerStep.Main:return"[Sync]";case o.SyncLoggerStep.Chronological:return"[Sync|Chrono]";case o.SyncLoggerStep.Latest:return"[Sync|Latest]";case o.SyncLoggerStep.Decipher:return"[Sync|Decipher]";case o.SyncLoggerStep.DecipherFullBackup:return"[Sync|Decipher|FullBackup]";case o.SyncLoggerStep.DecipherTransactions:return"[Sync|Decipher|Transactions]";case o.SyncLoggerStep.Duplicate:return"[Sync|Duplicate]";case o.SyncLoggerStep.Cipher:return"[Sync|Cipher]";case o.SyncLoggerStep.Upload:return"[Sync|Upload]";case o.SyncLoggerStep.Save:return"[Sync|Save]";case o.SyncLoggerStep.TreatProblem:return"[Sync|TreatProblem]";case o.SyncLoggerStep.TreatProblemSummary:return"[Sync|TreatProblem|Summary]";case o.SyncLoggerStep.Sharing:return"[Sync|Sharing]";case o.SyncLoggerStep.TeamAdminData:return"[Sync|TeamAdminData]";default:(0,n.assertUnreachable)(e)}}},92221:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(71044),t)},71369:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logSyncVerbose=t.logSyncDebug=t.logSyncInfo=t.logSyncWarn=t.logSyncError=void 0;const o=r(95623),n=(0,o.withTag)("Sync");t.logSyncError=n(o.logError),t.logSyncWarn=n(o.logWarn),t.logSyncInfo=n(o.logInfo),t.logSyncDebug=n(o.logDebug),t.logSyncVerbose=n(o.logVerbose)},71044:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeSyncLoggerMonitor=void 0;const o=r(58582),n=r(2695),i=r(90635),a=r(91453),s=r(71369);t.makeSyncLoggerMonitor=()=>{let e=null;const t=e=>"object"==typeof e&&e.message||`${e}`,r=(e,t)=>`${(0,a.formatStep)(e)} ${t}`;return(a,{timestamp:c})=>{switch(a.type){case"SyncStarted":{const{syncType:t}=a;e=c,(0,s.logSyncInfo)({message:r(n.SyncLoggerStep.Main,"Start"),details:{step:n.SyncLoggerStep.Main,Type:(0,i.syncTypeForSyncLogger)(t)}})}break;case"ChronologicalSyncStarted":{const{updatesCount:t,deletesCount:o}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Chronological,"Start"),details:{step:n.SyncLoggerStep.Chronological,Timestamp:e,Update:t,Delete:o}})}break;case"LatestRequested":{const{lock:t,needsKeys:o}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Latest,"Request"),details:{step:n.SyncLoggerStep.Latest,Timestamp:e,Lock:t,SharingKeys:o}})}break;case"LatestSucceeded":{const{updatesCount:t,deletesCount:o,fullBackupSize:i}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Latest,"Success"),details:{step:n.SyncLoggerStep.Latest,Timestamp:e,Update:t,Delete:o,FullBackup:i}})}break;case"LatestFailed":{const{error:e}=a;(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.Latest,"Error"),details:{step:n.SyncLoggerStep.Latest,Cause:t(e)}})}break;case"DecipherStarted":{const{fullBackupFileSize:e}=a;(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Decipher,"Start"),details:{step:n.SyncLoggerStep.Decipher,Count:e}})}break;case"DecipherFullBackupSkipped":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.DecipherFullBackup,"Skip"),details:{step:n.SyncLoggerStep.DecipherFullBackup}});break;case"DecipherFullBackupStarted":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.DecipherFullBackup,"Start"),details:{step:n.SyncLoggerStep.DecipherFullBackup}});break;case"DecipherFullBackupItemRead":{const{itemType:e,itemId:t,backupDate:o}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.DecipherFullBackup,"Transaction"),details:{step:n.SyncLoggerStep.DecipherFullBackup,Type:e,Id:t,Date:o}})}break;case"DecipherFullBackupItemSkipped":{const{error:e,itemType:o,itemId:i}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.DecipherFullBackup,"TransactionSkipped"),details:{step:n.SyncLoggerStep.DecipherFullBackup,Type:o,Id:i,Cause:t(e)}})}break;case"DecipherFullBackupFinished":{const{itemsCount:e}=a;(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.DecipherFullBackup,"Done"),details:{step:n.SyncLoggerStep.DecipherFullBackup,Count:e}})}break;case"DecipherFullBackupFailed":{const{error:e}=a;(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.DecipherFullBackup,"Error"),details:{step:n.SyncLoggerStep.DecipherFullBackup,Cause:t(e)}})}break;case"DecipherTransactionsStarted":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.DecipherTransactions,"Start"),details:{step:n.SyncLoggerStep.DecipherTransactions}});break;case"DecipherTransactionFinished":{const{action:e,transactionType:t,identifier:o,backupDate:i}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.DecipherTransactions,"Transaction"),details:{step:n.SyncLoggerStep.DecipherTransactions,Action:e,Type:t,Id:o,Date:i}})}break;case"DecipherTransactionFailed":{const{error:e,transactionType:o,identifier:i,backupDate:c}=a;(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.DecipherTransactions,"Error"),details:{step:n.SyncLoggerStep.DecipherTransactions,Cause:t(e),Type:o,Id:i,Date:c}})}break;case"DecipherTransactionsFinished":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.DecipherTransactions,"Done"),details:{step:n.SyncLoggerStep.DecipherTransactions}});break;case"DecipherFinished":{const{updatesCount:e,deletesCount:t}=a;(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Decipher,"Done"),details:{step:n.SyncLoggerStep.Decipher,Transactions:e+t}})}break;case"TransactionDuplicated":{const{transactionType:e,identifier:t,backupDate:o}=a;(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.Duplicate,"Transaction"),details:{step:n.SyncLoggerStep.Duplicate,Type:e,Id:t,Date:o}})}break;case"CipherStarted":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Cipher,"Start"),details:{step:n.SyncLoggerStep.Cipher}});break;case"TransactionCiphered":{const{transactionType:e,itemId:t,backupDate:o}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Cipher,"Transaction"),details:{step:n.SyncLoggerStep.Cipher,Type:e,Id:t,Date:o}})}break;case"CipherFinished":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Cipher,"Done"),details:{step:n.SyncLoggerStep.Cipher}});break;case"UploadRequested":{const{updatedCount:e,deletedCount:t}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Upload,"Request"),details:{step:n.SyncLoggerStep.Upload,Update:e,Delete:t}})}break;case"UploadSucceeded":{const{timestamp:e}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Upload,"Success"),details:{step:n.SyncLoggerStep.Upload,Timestamp:e}})}break;case"UploadFailed":{const{error:e}=a;(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.Upload,"Error"),details:{step:n.SyncLoggerStep.Upload,Cause:t(e)}})}break;case"SaveStarted":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Save,"Start"),details:{step:n.SyncLoggerStep.Save}});break;case"SaveFinished":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Save,"Done"),details:{step:n.SyncLoggerStep.Save}});break;case"ChronologicalSyncFinished":{const{summarySize:e}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Chronological,"Done"),details:{step:n.SyncLoggerStep.Chronological,Summary:e}})}break;case"TreatProblemStarted":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TreatProblem,"Start"),details:{step:n.SyncLoggerStep.TreatProblem}});break;case"TreatProblemSummaryStarted":{const{localItemsCount:e,remoteItemsCount:t}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TreatProblemSummary,"Start"),details:{step:n.SyncLoggerStep.TreatProblemSummary,Local:e,Remote:t}})}break;case"TreatProblemSummaryCompared":{const{result:e,cause:t,transactionType:i,identifier:c,localDate:u,remoteDate:d}=a,l=void 0!==d?{RemoteDate:d}:{},p=t?{Cause:o.TreatProblemSummaryComparedCause[t]}:{},S=u?{LocalDate:u}:{};(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TreatProblemSummary,"Comparison"),details:{step:n.SyncLoggerStep.TreatProblemSummary,Result:o.TreatProblemSummaryComparedResult[e],...p,Type:i,Id:c,...S,...l}})}break;case"TreatProblemSummaryFinished":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TreatProblemSummary,"Done"),details:{step:n.SyncLoggerStep.TreatProblemSummary}});break;case"TreatProblemDiffComputed":{const{transactionsToDownloadCount:e,transactionsToUploadCount:t}=a;0===e&&0===t?(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.TreatProblem,"Diff UpToDate"),details:{step:n.SyncLoggerStep.TreatProblem}}):(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.TreatProblem,"Diff"),details:{step:n.SyncLoggerStep.TreatProblem,Download:e,Upload:t}})}break;case"TreatProblemFinished":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TreatProblem,"Done"),details:{step:n.SyncLoggerStep.TreatProblem}});break;case"TeamAdminDataSyncStarted":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TeamAdminData,"Start"),details:{step:n.SyncLoggerStep.TeamAdminData}});break;case"TeamAdminDataSyncFinished":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TeamAdminData,"Done"),details:{step:n.SyncLoggerStep.TeamAdminData}});break;case"SharingSyncStarted":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Sharing,"Start"),details:{step:n.SyncLoggerStep.Sharing}});break;case"SharingSyncFinished":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Sharing,"Done"),details:{step:n.SyncLoggerStep.Sharing}});break;case"SyncFinished":(0,s.logSyncInfo)({message:r(n.SyncLoggerStep.Main,"Done"),details:{step:n.SyncLoggerStep.Main}});break;case"SyncFailed":{const{error:e}=a;(0,s.logSyncError)({message:r(n.SyncLoggerStep.Main,"Failed"),details:{step:n.SyncLoggerStep.Main,Cause:t(e)}})}}}}},2695:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncLoggerStep=void 0,function(e){e[e.Main=0]="Main",e[e.Chronological=1]="Chronological",e[e.Latest=2]="Latest",e[e.Decipher=3]="Decipher",e[e.DecipherFullBackup=4]="DecipherFullBackup",e[e.DecipherTransactions=5]="DecipherTransactions",e[e.Duplicate=6]="Duplicate",e[e.Cipher=7]="Cipher",e[e.Upload=8]="Upload",e[e.Save=9]="Save",e[e.TreatProblem=10]="TreatProblem",e[e.TreatProblemSummary=11]="TreatProblemSummary",e[e.Sharing=12]="Sharing",e[e.TeamAdminData=13]="TeamAdminData"}(t.SyncLoggerStep||(t.SyncLoggerStep={}))},90635:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.syncTypeForSyncLogger=void 0;const o=r(37898),n=r(17825);t.syncTypeForSyncLogger=e=>{switch(e){case o.SyncType.LIGHT_SYNC:return"Light";case o.SyncType.FULL_SYNC:return"Full";case o.SyncType.FIRST_SYNC:return"Initial";default:(0,n.assertUnreachable)(e)}}},98083:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.treatProblemSummaryFinished=t.treatProblemSummaryCompared=t.treatProblemSummaryStarted=t.transactionDuplicated=t.decipherTransactionFinished=t.decipherTransactionFailed=t.decipherTransactionParseFailed=t.decipherTransactionDecipherFailed=t.decipherTransactionStarted=t.decipherFullBackupFinished=t.decipherFullBackupFailed=t.decipherFullBackupItemReadFailed=t.decipherFullBackupItemSkipped=t.decipherFullBackupItemRead=t.decipherFullBackupDecipherFailed=t.decipherFullBackupParseFailed=t.decipherFullBackupStarted=t.decipherFullBackupSkipped=t.cipherFinished=t.transactionCiphered=t.cipherStarted=t.uploadFailed=t.uploadSucceeded=t.uploadRequested=t.syncTypeChanged=t.syncFailed=t.syncFinished=t.decipherTransactionsFinished=t.decipherTransactionsStarted=t.decipherFinished=t.decipherStarted=t.latestFailed=t.latestSucceeded=t.latestRequested=t.teamAdminDataSyncFinished=t.teamAdminDataSyncFailed=t.teamAdminDataSyncStarted=t.sharingSyncFinished=t.sharingSyncFailed=t.sharingSyncInvalidSyncData=t.sharingSyncStarted=t.treatSharingKeysFailed=t.treatProblemFinished=t.treatProblemDiffComputed=t.treatProblemFailed=t.treatProblemStarted=t.chronologicalSyncFinished=t.chronologicalSyncFailed=t.chronologicalSyncStarted=t.syncStarted=void 0,t.saveFinished=t.saveStarted=void 0;const o=r(31982),n=r(90826),i=r(1347),a=r(63002);t.syncStarted=(e,t)=>({type:"SyncStarted",trigger:e,syncType:t});t.chronologicalSyncStarted=e=>({type:"ChronologicalSyncStarted",updatesCount:(0,a.countEditionUploadChanges)(e?.changesToUpload||[]),deletesCount:(0,a.countDeletionUploadChanges)(e?.changesToUpload||[])});t.chronologicalSyncFailed=e=>({type:"ChronologicalSyncFailed",error:e});t.chronologicalSyncFinished=(e,t)=>({type:"ChronologicalSyncFinished",summarySize:(0,o.countSyncSummaryTransactions)(e),fullBackupFileSize:t});t.treatProblemStarted=()=>({type:"TreatProblemStarted"});t.treatProblemFailed=e=>({type:"TreatProblemFailed",error:e});t.treatProblemDiffComputed=(e,t)=>({type:"TreatProblemDiffComputed",transactionsToDownloadCount:e,transactionsToUploadCount:t});t.treatProblemFinished=()=>({type:"TreatProblemFinished"});t.treatSharingKeysFailed=e=>({type:"TreatSharingKeysFailed",error:e});t.sharingSyncStarted=()=>({type:"SharingSyncStarted"});t.sharingSyncInvalidSyncData=(e,t)=>({type:"SharingSyncInvalidSyncData",itemGroupId:e,errorName:t});t.sharingSyncFailed=e=>({type:"SharingSyncFailed",error:e});t.sharingSyncFinished=()=>({type:"SharingSyncFinished"});t.teamAdminDataSyncStarted=()=>({type:"TeamAdminDataSyncStarted"});t.teamAdminDataSyncFailed=e=>({type:"TeamAdminDataSyncFailed",error:e});t.teamAdminDataSyncFinished=()=>({type:"TeamAdminDataSyncFinished"});t.latestRequested=(e,t)=>({type:"LatestRequested",lock:"nolock"!==e,needsKeys:t});t.latestSucceeded=e=>({type:"LatestSucceeded",updatesCount:(0,n.countEditionTransactions)(e.transactionList),deletesCount:(0,n.countRemoveTransactions)(e.transactionList),fullBackupSize:(e.fullBackupFileList||[]).length});t.latestFailed=e=>({type:"LatestFailed",error:e});t.decipherStarted=e=>({type:"DecipherStarted",fullBackupFileSize:e});t.decipherFinished=e=>({type:"DecipherFinished",updatesCount:(0,n.countEditionTransactions)(e),deletesCount:(0,n.countRemoveTransactions)(e)});t.decipherTransactionsStarted=()=>({type:"DecipherTransactionsStarted"});t.decipherTransactionsFinished=()=>({type:"DecipherTransactionsFinished"});t.syncFinished=()=>({type:"SyncFinished"});t.syncFailed=e=>({type:"SyncFailed",error:e});t.syncTypeChanged=e=>({type:"SyncTypeChanged",syncType:e});t.uploadRequested=(e,t)=>({type:"UploadRequested",updatedCount:e,deletedCount:t});t.uploadSucceeded=(e,t,r)=>({type:"UploadSucceeded",updatedCount:e,deletedCount:t,timestamp:r});t.uploadFailed=e=>({type:"UploadFailed",error:e});t.cipherStarted=()=>({type:"CipherStarted"});t.transactionCiphered=(e,t,r)=>({type:"TransactionCiphered",transactionType:e,itemId:t,backupDate:r});t.cipherFinished=()=>({type:"CipherFinished"});t.decipherFullBackupSkipped=()=>({type:"DecipherFullBackupSkipped"});t.decipherFullBackupStarted=()=>({type:"DecipherFullBackupStarted"});t.decipherFullBackupParseFailed=e=>({type:"DecipherFullBackupParseFailed",error:e});t.decipherFullBackupDecipherFailed=(e,t)=>({type:"DecipherFullBackupDecipherFailed",error:e,cryptoPayload:t});t.decipherFullBackupItemRead=(e,t,r)=>({type:"DecipherFullBackupItemRead",itemType:e,itemId:t,backupDate:r});t.decipherFullBackupItemSkipped=(e,t)=>({type:"DecipherFullBackupItemSkipped",itemType:t?.itemType,itemId:t?.itemId,error:e});t.decipherFullBackupItemReadFailed=(e,t)=>({type:"DecipherFullBackupItemReadFailed",error:e,itemId:t});t.decipherFullBackupFailed=e=>({type:"DecipherFullBackupFailed",error:e});t.decipherFullBackupFinished=e=>({type:"DecipherFullBackupFinished",itemsCount:e});t.decipherTransactionStarted=({action:e,backupDate:t,identifier:r,time:o,type:n})=>({type:"DecipherTransactionStarted",time:o,action:e,backupDate:t,identifier:r,transactionType:n});t.decipherTransactionDecipherFailed=(e,t)=>({type:"DecipherTransactionDecipherFailed",error:e,cryptoPayload:t});t.decipherTransactionParseFailed=e=>({type:"DecipherTransactionParseFailed",error:e});t.decipherTransactionFailed=(e,{backupDate:t,identifier:r,type:o})=>({type:"DecipherTransactionFailed",error:e,transactionType:o,identifier:r,backupDate:t});t.decipherTransactionFinished=({action:e,backupDate:t,identifier:r,type:o})=>({type:"DecipherTransactionFinished",action:e,transactionType:o,identifier:r,backupDate:t});t.transactionDuplicated=(e,t,r)=>({type:"TransactionDuplicated",transactionType:e,identifier:t,backupDate:r});t.treatProblemSummaryStarted=(e,t)=>({type:"TreatProblemSummaryStarted",localItemsCount:(0,i.countPersonalDataItems)(e),remoteItemsCount:(0,o.countSyncSummaryTransactions)(t)});t.treatProblemSummaryCompared=(e,t,r,o)=>({type:"TreatProblemSummaryCompared",result:e,transactionType:t,identifier:r,...o?.cause?{cause:o.cause}:{},...o?.localDate?{localDate:o.localDate}:{},...o?.remoteDate?{remoteDate:o.remoteDate}:{}});t.treatProblemSummaryFinished=()=>({type:"TreatProblemSummaryFinished"});t.saveStarted=()=>({type:"SaveStarted"});t.saveFinished=()=>({type:"SaveFinished"})},58582:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.announcements=void 0;const i=r(98083);t.announcements=i,n(r(76921),t)},76921:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TreatProblemSummaryComparedCause=t.TreatProblemSummaryComparedResult=void 0,function(e){e[e.UpToDate=0]="UpToDate",e[e.Upload=1]="Upload",e[e.Download=2]="Download"}(t.TreatProblemSummaryComparedResult||(t.TreatProblemSummaryComparedResult={})),function(e){e[e.OutOfDate=0]="OutOfDate",e[e.Missing=1]="Missing"}(t.TreatProblemSummaryComparedCause||(t.TreatProblemSummaryComparedCause={}))},32523:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateLocalDuplicates=void 0;const o=r(16516),n=r(17509),i=r(70705),a=r(49551),s=r(78320),c=r(30144),u=r(75270),d=r(53628),l=r(92210),p=(e,t,r)=>{const o=i.mergingRules[t.type];if(!o||0===o.length)return!1;if(!t.content)return!1;const a=(0,d.fixPersonalDataItemFromExternalSource)(t.content,t.identifier);for(const{property:i,canonize:s}of o){let o=e[i],u=a[i];"Domain"===i&&"AUTHENTIFIANT"===t.type&&o&&u&&(o=r?new l.ParsedURL(e.Url).getRootDomain():(0,n.getParsedUrl)(e.Url).rootDomain,u=r?new l.ParsedURL(a.Url).getRootDomain():(0,n.getParsedUrl)(a.Url).rootDomain);if((s?(0,c.canonizeText)(o):o)!==(s?(0,c.canonizeText)(u):u))return!0}return!1};t.generateLocalDuplicates=function(e,t,r,n){return(0,a.filterDataModelObjects)(t,e,["changeHistories"]).reduce(((e,t)=>{const i=(e=>{const t=(0,u.findTransaction)(e.Id,r);return!t||(0,u.isRemovalTransaction)(t)?null:p(e,t,n)?{duplicate:{...(0,o.clone)(e),AnonId:(0,s.generateItemUuid)(),Id:(0,s.generateItemUuid)()},duplicatedFromId:e.Id}:null})(t);return i?(e.push(i),e):e}),[])}},70705:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mergingRules=void 0,t.mergingRules={ADDRESS:[{property:"AddressFull",canonize:!1},{property:"City",canonize:!1},{property:"ZipCode",canonize:!0}],AUTH_CATEGORY:[{property:"CategoryName",canonize:!1}],AUTHENTIFIANT:[{property:"Domain",canonize:!1},{property:"Email",canonize:!1},{property:"Login",canonize:!1},{property:"Note",canonize:!1},{property:"OtpSecret",canonize:!1},{property:"OtpUrl",canonize:!1},{property:"Password",canonize:!1},{property:"SubdomainOnly",canonize:!1},{property:"Title",canonize:!1},{property:"TrustedUrl",canonize:!1},{property:"UseFixedUrl",canonize:!1}],BANKSTATEMENT:[{property:"BankAccountIBAN",canonize:!0}],COMPANY:[{property:"Name",canonize:!1},{property:"JobTitle",canonize:!1}],DATA_CHANGE_HISTORY:[{property:"ObjectId",canonize:!0}],DRIVERLICENCE:[{property:"Number",canonize:!0}],EMAIL:[{property:"Email",canonize:!0}],FISCALSTATEMENT:[{property:"FiscalNumber",canonize:!0},{property:"TeledeclarantNumber",canonize:!0}],GENERATED_PASSWORD:[{property:"Domain",canonize:!1},{property:"GeneratedDate",canonize:!1},{property:"Password",canonize:!1}],IDCARD:[{property:"Number",canonize:!0}],IDENTITY:[{property:"FirstName",canonize:!1},{property:"LastName",canonize:!1}],PASSPORT:[{property:"Number",canonize:!0}],PAYMENTMEAN_PAYPAL:[{property:"Login",canonize:!1},{property:"Password",canonize:!1}],PAYMENTMEANS_CREDITCARD:[{property:"Bank",canonize:!0},{property:"CardNumber",canonize:!0},{property:"CardNumberLastDigits",canonize:!0},{property:"ExpireMonth",canonize:!0},{property:"ExpireYear",canonize:!0},{property:"OwnerName",canonize:!0}],PERSONALWEBSITE:[{property:"Website",canonize:!1}],PHONE:[{property:"Number",canonize:!0}],PURCHASE_CATEGORY:[{property:"CategoryName",canonize:!1}],PURCHASEBASKET:[{property:"Id",canonize:!1}],PURCHASEPAIDBASKET:[{property:"AutoTitle",canonize:!1},{property:"Comment",canonize:!1},{property:"DeliveryAddressDescription",canonize:!1},{property:"DeliveryAddressName",canonize:!1},{property:"MerchantDomain",canonize:!0},{property:"PaymentMeanDescription",canonize:!1},{property:"PaymentMeanName",canonize:!1},{property:"PurchaseDate",canonize:!0},{property:"TotalAmount",canonize:!0},{property:"UserTitle",canonize:!1}],SECURENOTE:[{property:"Title",canonize:!1},{property:"Content",canonize:!1}],SECURENOTE_CATEGORY:[{property:"CategoryName",canonize:!1}],SOCIALSECURITYSTATEMENT:[{property:"SocialSecurityNumber",canonize:!0}]}},96457:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mergeChangeHistories=void 0;const o=r(16516);t.mergeChangeHistories=function(e,t){const r=(0,o.eqBy)((0,o.prop)("Id")),n=(0,o.ascend)((0,o.prop)("ModificationDate")),i=(0,o.unionWith)(r,e.ChangeSets,t.ChangeSets);return{...e,ChangeSets:(0,o.sort)(n,i)}}},1947:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mergeLocalAndRemote=t.getMergeableTransactions=t.supportedTransactionTypesForMerge=t.unMergeableTransaction=void 0;const o=r(16516),n=r(96457),i=r(75270);t.unMergeableTransaction=["DEFAULT_AUTHENTIFIANT","DEFAULT_CONFIDENTIAL","DEFAULT_IDENTITY","DEFAULT_PAYMENTMEANS","DEFAULT_MISC","DEFAULT_REWARDCARD","POINTS","SETTINGS","SECURITYALERTS"],t.supportedTransactionTypesForMerge=["DATA_CHANGE_HISTORY"],t.getMergeableTransactions=function(e,r){const n=(0,o.map)((0,o.prop)("itemId"),r);return e.filter((e=>!t.unMergeableTransaction.includes(e.type))).filter((e=>"BACKUP_REMOVE"!==e.action)).filter((e=>n.includes(e.identifier))).filter((e=>t.supportedTransactionTypesForMerge.includes(e.type)))},t.mergeLocalAndRemote=function(e,t){const r=[],o=e.changeHistories.map((e=>{const o=(0,i.findTransaction)(e.Id,t),a=n.mergeChangeHistories(e,o.content);return r.push({...o,content:a}),a}));return{personalData:{...e,changeHistories:o},remoteTransactions:r}}},37744:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(16516),n=r(95623),i=r(1347),a=r(70252),s=r(90503),c=r(1947),u=r(63002),d=r(75270),l=r(83638),p=r(32523),S=r(58582),g=r(51064);t.default=function(e,t,r,E,y){const{changesToUpload:_,editConflicts:A,transactionsToDownload:m}=function(e,t,r){if(0===t.length)return{changesToUpload:e,transactionsToDownload:t,editConflicts:[]};const n=(0,o.intersection)((0,o.pluck)("identifier",t),(0,o.pluck)("itemId",e));if(0===e.filter((e=>n.includes(e.itemId))).length)return{changesToUpload:e,transactionsToDownload:t,editConflicts:[]};const i=(0,o.reject)((e=>(0,u.isRemovalUploadChange)(e)&&n.includes(e.itemId)),e),a=(0,o.reject)((e=>((0,d.isRemovalTransaction)(e)||r.has(e.identifier))&&n.includes(e.identifier)),t);return{changesToUpload:i,transactionsToDownload:a,editConflicts:(0,o.intersection)((0,o.pluck)("identifier",a),(0,o.pluck)("itemId",i))}}(t.changesToUpload,E,r);if(0===A.length)return{personalData:{...t,changesToUpload:_},remoteTransactions:[...m]};const T=`[Sync] conflict on local/remote changes, ${A.length} conflicts`;n.default.log(T),(0,a.sendExceptionLog)({error:new Error(T),code:s.ExceptionCriticality.WARNING});const{duplicateObjects:v,uploadChangesWithDuplicates:f,usableRemoteTransactions:h}=function(e,t,r,o,n,i){if(0===n.length)return{uploadChangesWithDuplicates:r,usableRemoteTransactions:o,duplicateObjects:[]};const a=(0,p.generateLocalDuplicates)(n,t,o,i),s=a.map((e=>e.duplicate)),c=s.map((e=>({action:"BACKUP_EDIT",backupDate:0,identifier:e.Id,objectType:"transaction",time:Date.now(),type:(0,l.getTransactionTypeFromDataModelType)(e.kwType),content:e})));c.forEach((({backupDate:t,identifier:r,type:o})=>{e(S.announcements.transactionDuplicated(o,r,t))}));const u=a.map((e=>e.duplicatedFromId));return{uploadChangesWithDuplicates:r.filter((e=>!u.includes(e.itemId))).concat(s.map(g.createUploadChangeForItem)),duplicateObjects:s,usableRemoteTransactions:o.filter((e=>!n.includes(e.identifier)||u.includes(e.identifier))).concat(c)}}(e,t,_,m,A,y),D=(0,i.saveObjects)(t,v),O=c.getMergeableTransactions(h,f);if(0===O.length)return{personalData:{...D,changesToUpload:f},remoteTransactions:[...h]};const P=c.mergeLocalAndRemote(D,O);return{personalData:{...P.personalData,changesToUpload:f},remoteTransactions:[...h,...P.remoteTransactions]}}},67805:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSyncEventErrorName=t.getSyncEventExtent=t.createInitialSyncEvent=void 0;const o=r(37898),n=r(25576),i=r(17825),a=r(92263),s=r(14656),c=r(20750),u=r(10203);t.createInitialSyncEvent=(e,r,o)=>({extent:(0,t.getSyncEventExtent)(e),trigger:r,timestamp:o,duration:{sync:0,chronological:0,treat_problem:0,sharing:0}});t.getSyncEventExtent=e=>{switch(e){case o.SyncType.LIGHT_SYNC:return u.Extent.Light;case o.SyncType.FULL_SYNC:return u.Extent.Full;case o.SyncType.FIRST_SYNC:return u.Extent.Initial;default:(0,i.assertUnreachable)(e)}},t.getSyncEventErrorName=function(e){let t=u.ErrorName.Other;return(0,a.isCarbonError)(e)&&(e.errorType===s.HttpError?t=(({errorCode:e})=>e===s.HttpErrorCode.CLIENT_ERROR||e===s.HttpErrorCode.SERVER_ERROR||e===s.HttpErrorCode.STATUS_CODE)(e)?u.ErrorName.HttpStatus:u.ErrorName.HttpIo:e.errorType===c.WSError&&(t=u.ErrorName.ResponseContent)),e instanceof Error&&e?.message&&void 0!==n.AuthenticationCode[e.message]&&(t=u.ErrorName.Authentication),t}},41007:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(37729),t)},37729:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeEventLoggerSyncMonitor=void 0;const o=r(75439),n=r(10203);t.makeEventLoggerSyncMonitor=(e,t={sendLogOnSyncComplete:!0})=>{let r=(0,o.getEmptyState)();return{monitor:async(i,a)=>{r=(0,o.reduceState)(r,i,a);const{syncEvent:s}=r,c=t.sendLogOnSyncComplete;switch(i.type){case"SharingSyncInvalidSyncData":await e.logSync(new n.UserSyncEvent({errorStep:n.ErrorStep.Sharing,errorName:i.errorName,itemGroupId:i.itemGroupId,duration:s.duration,error:s.error,extent:s.extent,fullBackupSize:s.fullBackupSize,incomingDeleteCount:s.incomingDeleteCount,incomingUpdateCount:s.incomingUpdateCount,outgoingDeleteCount:s.outgoingDeleteCount,outgoingUpdateCount:s.outgoingUpdateCount,timestamp:s.timestamp,trigger:s.trigger,treatProblem:s.treatProblem}));break;case"SyncFinished":case"SyncFailed":c&&(await e.logSync(new n.UserSyncEvent({duration:s.duration,error:s.error,extent:s.extent,fullBackupSize:s.fullBackupSize,incomingDeleteCount:s.incomingDeleteCount,incomingUpdateCount:s.incomingUpdateCount,outgoingDeleteCount:s.outgoingDeleteCount,outgoingUpdateCount:s.outgoingUpdateCount,timestamp:s.timestamp,trigger:s.trigger,treatProblem:s.treatProblem})),e.flushEventQueue())}},getSyncEvent:()=>r.syncEvent}}},75439:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reduceState=t.getEmptyState=void 0;const o=r(67805),n=r(10203),i=(e,t)=>({...e,syncEvent:{...e.syncEvent,...t}}),a=(e,t)=>e>0&&t>0?n.TreatProblem.UploadAndDownload:t>0?n.TreatProblem.Upload:e>0?n.TreatProblem.Download:n.TreatProblem.NotNeeded,s=e=>Date.now()-e;t.getEmptyState=()=>({syncStartTimestamp:null,chronologicalStartTimestamp:null,treatProblemStartTimestamp:null,sharingSyncStartTimestamp:null,syncEvent:null});t.reduceState=(e,t,r)=>{switch(t.type){case"SyncStarted":return((e,{trigger:t,syncType:r},{timestamp:n})=>({...e,syncStartTimestamp:n,syncEvent:(0,o.createInitialSyncEvent)(r,t,Math.floor(n/1e3))}))(e,t,r);case"ChronologicalSyncStarted":return((e,{timestamp:t})=>({...e,chronologicalStartTimestamp:t}))(e,r);case"ChronologicalSyncFinished":return((e,{fullBackupFileSize:t})=>i(e,{duration:{...e.syncEvent.duration,chronological:s(e.chronologicalStartTimestamp)},fullBackupSize:t||0}))(e,t);case"ChronologicalSyncFailed":return(e=>i(e,{duration:{...e.syncEvent.duration,chronological:s(e.chronologicalStartTimestamp)},error:{step:n.ErrorStep.Chronological,name:n.ErrorName.Other}}))(e);case"TreatProblemStarted":return((e,{timestamp:t})=>({...e,treatProblemStartTimestamp:t}))(e,r);case"TreatProblemDiffComputed":return((e,{transactionsToDownloadCount:t,transactionsToUploadCount:r})=>i(e,{treatProblem:a(t,r)}))(e,t);case"TreatProblemFinished":return(e=>i(e,{duration:{...e.syncEvent.duration,treat_problem:s(e.treatProblemStartTimestamp)}}))(e);case"TreatProblemFailed":return(e=>i(e,{duration:{...e.syncEvent.duration,treat_problem:s(e.treatProblemStartTimestamp)},error:{step:n.ErrorStep.TreatProblem,name:n.ErrorName.Other}}))(e);case"TreatSharingKeysFailed":return(e=>i(e,{error:{step:n.ErrorStep.TreatProblem,name:n.ErrorName.Other}}))(e);case"SharingSyncStarted":return((e,{timestamp:t})=>({...e,sharingSyncStartTimestamp:t}))(e,r);case"SharingSyncFinished":return(e=>i(e,{duration:{...e.syncEvent.duration,sharing:s(e.sharingSyncStartTimestamp)}}))(e);case"SharingSyncFailed":return(e=>i(e,{duration:{...e.syncEvent.duration,sharing:s(e.sharingSyncStartTimestamp)},error:{step:n.ErrorStep.Sharing,name:n.ErrorName.Other}}))(e);case"DecipherFinished":return((e,{updatesCount:t,deletesCount:r})=>{const o=e.syncEvent.incomingUpdateCount||0,n=e.syncEvent.incomingDeleteCount||0;return i(e,{incomingUpdateCount:o+t,incomingDeleteCount:n+r})})(e,t);case"UploadSucceeded":return((e,{updatedCount:t,deletedCount:r})=>{const o=e.syncEvent.outgoingUpdateCount||0,n=e.syncEvent.outgoingDeleteCount||0;return i(e,{outgoingUpdateCount:o+t,outgoingDeleteCount:n+r})})(e,t);case"SyncFinished":return(e=>i(e,{duration:{...e.syncEvent.duration,sync:s(e.syncStartTimestamp)}}))(e);case"SyncFailed":return((e,{error:t})=>i(e,{duration:{...e.syncEvent.duration,sync:s(e.syncStartTimestamp)},error:{...e.syncEvent.error,name:(0,o.getSyncEventErrorName)(t)}}))(e,t);case"SyncTypeChanged":return((e,{syncType:t})=>i(e,{extent:(0,o.getSyncEventExtent)(t)}))(e,t)}return e}},75270:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.findTransaction=t.isRemovalTransaction=t.isEditionTransaction=t.createNewTransaction=t.getTransactionXml=t.supportedForUploadKwTypeToTransactionTypeMap=t.supportedDataTypesForUpload=void 0;const o=r(16516),n=r(83638),i=r(95623),a=r(70252),s=r(90503),c=r(53),u=r(56668),d=r(61797),l=r(58582);function p(e){return t.supportedForUploadKwTypeToTransactionTypeMap[e.kwType]?(0,d.getDashlaneXml)(e):(i.default.error(`Unsupported kwType "${e.kwType}" for transformation to XML`),"")}t.supportedDataTypesForUpload=["KWAddress","KWAuthCategory","KWAuthentifiant","KWBankStatement","KWCollection","KWCompany","KWDataChangeHistory","KWDriverLicence","KWEmail","KWFiscalStatement","KWGeneratedPassword","KWIdentity","KWIDCard","KWPasskey","KWPassport","KWPaymentMean_creditCard","KWPersonalWebsite","KWPhone","KWSecureFileInfo","KWSecureNote","KWSecureNoteCategory","KWSecurityBreach","KWSettingsManagerApp","KWSocialSecurityStatement"],t.supportedForUploadKwTypeToTransactionTypeMap=(0,o.pick)(t.supportedDataTypesForUpload,n.DATAMODEL_TYPE_TO_TRANSACTION_TYPE),t.getTransactionXml=p,t.createNewTransaction=async function(e,r,o){try{const{itemId:n,kwType:i,content:a}=o,s=t.supportedForUploadKwTypeToTransactionTypeMap[i];if("REMOVE"===o.action){const e={type:s,action:"BACKUP_REMOVE",identifier:n,objectType:"transaction",time:(0,c.getUnixTimestamp)(),backupDate:0,content:""};return Promise.resolve(e)}const d=(0,u.utf16ToDeflatedUtf8)(p(a)),S=await e.encrypt(d),g=0,E={type:s,action:"BACKUP_EDIT",identifier:n,objectType:"transaction",time:(0,c.getUnixTimestamp)(),backupDate:g,content:S};return r(l.announcements.transactionCiphered(s,n,g)),E}catch(e){const t=new Error(`[Sync] - upload: failed to create transaction. ${e}`);return(0,a.sendExceptionLog)({error:t,code:s.ExceptionCriticality.ERROR}),null}};const S=(0,o.propEq)("identifier");t.isEditionTransaction=(0,o.propEq)("action","BACKUP_EDIT"),t.isRemovalTransaction=(0,o.propEq)("action","BACKUP_REMOVE"),t.findTransaction=(0,o.curry)(((e,t)=>(0,o.find)(S(e),t)))},83638:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionType=t.getTransactionTypeFromDataModelType=t.getDataModelTypeFromTransactionType=t.DATAMODEL_TYPE_TO_TRANSACTION_TYPE=void 0;const o=r(53576);Object.defineProperty(t,"DATAMODEL_TYPE_TO_TRANSACTION_TYPE",{enumerable:!0,get:function(){return o.DATAMODEL_TYPE_TO_TRANSACTION_TYPE}}),Object.defineProperty(t,"getDataModelTypeFromTransactionType",{enumerable:!0,get:function(){return o.getDataModelTypeFromTransactionType}}),Object.defineProperty(t,"getTransactionTypeFromDataModelType",{enumerable:!0,get:function(){return o.getTransactionTypeFromDataModelType}}),Object.defineProperty(t,"TransactionType",{enumerable:!0,get:function(){return o.TransactionType}})},90826:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.countRemoveTransactions=t.countEditionTransactions=void 0;const r=(e,t)=>e.reduce(((e,r)=>r.identifier&&r.action===t?e+1:e),0);t.countEditionTransactions=e=>r(e,"BACKUP_EDIT");t.countRemoveTransactions=e=>r(e,"BACKUP_REMOVE")},58217:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMissingIdentifiers=void 0;const o=r(53576),n=r(16516),i=r(84977),a=r(58582),s=r(51064);t.getMissingIdentifiers=function(e,t,r){e(a.announcements.treatProblemSummaryStarted(t,r));const c=o.transactionTypes.reduce(((c,u)=>{return d=c,l=function(e,t,r,c){const u=o.TRANSACTION_TYPE_TO_DATAMODEL_TYPE[t];if(!u||!i.default[u])return{missingLocally:[],missingRemotely:[]};const d=i.default[u];if(!r[d])return{missingLocally:[],missingRemotely:[]};const l=c.transactions[t]||{},p=new Set(r.changesToUpload.filter((({kwType:e})=>e===u)).map((({itemId:e})=>e))),S=r[d].filter((({Id:e})=>!p.has(e))),g=Object.keys(l).filter((e=>!p.has(e))),E=(0,n.difference)(g,(0,n.pluck)("Id",S));E.forEach((r=>{e(a.announcements.treatProblemSummaryCompared(a.TreatProblemSummaryComparedResult.Download,t,r,{cause:a.TreatProblemSummaryComparedCause.Missing,remoteDate:l[r]}))}));const y=a.announcements.treatProblemSummaryCompared;return S.reduce(((r,{Id:o,LastBackupTime:n})=>{const i=l[o],c=1e3*n;if(!i||i/1e3<n){const n=i?{remoteDate:i}:{};e(y(a.TreatProblemSummaryComparedResult.Upload,t,o,{cause:i?a.TreatProblemSummaryComparedCause.OutOfDate:a.TreatProblemSummaryComparedCause.Missing,localDate:c,...n}));const d=(0,s.createUploadChange)({action:"EDIT",kwType:u,itemId:o});return{missingLocally:r.missingLocally,missingRemotely:[...r.missingRemotely,d]}}return i/1e3>n?(e(y(a.TreatProblemSummaryComparedResult.Download,t,o,{cause:a.TreatProblemSummaryComparedCause.OutOfDate,localDate:c,remoteDate:i})),{missingLocally:[...r.missingLocally,o],missingRemotely:r.missingRemotely}):(e(y(a.TreatProblemSummaryComparedResult.UpToDate,t,o,{localDate:c})),r)}),{missingLocally:E,missingRemotely:[]})}(e,u,t,r),{missingLocally:[...d.missingLocally,...l.missingLocally],missingRemotely:[...d.missingRemotely,...l.missingRemotely]};var d,l}),{missingLocally:[],missingRemotely:[]});return e(a.announcements.treatProblemSummaryFinished()),c}},63002:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUploadChangesWithoutSettings=t.isSettingUploadChange=t.countDeletionUploadChanges=t.countEditionUploadChanges=t.findUploadChange=t.isRemovalUploadChange=t.isEditionUploadChange=void 0;const o=r(16516),n=(0,o.propEq)("itemId");t.isEditionUploadChange=(0,o.propEq)("action","EDIT"),t.isRemovalUploadChange=(0,o.propEq)("action","REMOVE"),t.findUploadChange=(0,o.curry)(((e,t)=>(0,o.find)(n(e),t)));t.countEditionUploadChanges=e=>e.filter((e=>(0,t.isEditionUploadChange)(e))).length;t.countDeletionUploadChanges=e=>e.filter((e=>(0,t.isRemovalUploadChange)(e))).length,t.isSettingUploadChange=(0,o.propEq)("kwType","KWSettingsManagerApp");t.getUploadChangesWithoutSettings=e=>(0,o.reject)(t.isSettingUploadChange,e)},39048:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UploadChangeStatus=void 0,function(e){e.ReadyForNextSync="ReadyForNextSync",e.ScheduledForSync="ScheduledForSync"}(t.UploadChangeStatus||(t.UploadChangeStatus={}))},62210:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.markChangeAsReadyForNextSync=t.markChangeAsScheduled=t.filterOutUploadedChanges=void 0;const o=r(39048);t.filterOutUploadedChanges=(e,t)=>e.filter((({itemId:e,status:r})=>!t.includes(e)||r!==o.UploadChangeStatus.ScheduledForSync));const n=e=>t=>({...t,status:e});t.markChangeAsScheduled=n(o.UploadChangeStatus.ScheduledForSync),t.markChangeAsReadyForNextSync=n(o.UploadChangeStatus.ReadyForNextSync)},51064:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createUploadChangeForDeletion=t.createUploadChangeForItem=t.createUploadChange=void 0;const o=r(39048);t.createUploadChange=({itemId:e,kwType:t,action:r="EDIT",status:n=o.UploadChangeStatus.ReadyForNextSync})=>({itemId:e,kwType:t,action:r,status:n});t.createUploadChangeForItem=e=>(0,t.createUploadChange)((e=>({itemId:e.Id,kwType:e.kwType}))(e));t.createUploadChangeForDeletion=e=>r=>(0,t.createUploadChange)({itemId:r,kwType:e,action:"REMOVE"})},26632:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isUploadNeeded=t.upload=t.gatherContentsToUpload=void 0;const o=r(16516),n=r(63002),i=r(75270),a=r(90826),s=r(84977),c=r(58582),u=Object.keys(i.supportedForUploadKwTypeToTransactionTypeMap),d=(0,o.flip)(o.contains)(u),l=(0,o.compose)(o.uniq,(0,o.filter)((0,o.propSatisfies)(d,"kwType")),(0,o.filter)((0,o.propSatisfies)(Boolean,"itemId")),(0,o.defaultTo)([]));function p(e,t){return l(e.changesToUpload).map((r=>{const{action:i,kwType:a,itemId:c}=r,u=s.default[a];if((0,n.isRemovalUploadChange)(r))return{action:i,kwType:a,itemId:c,content:null};if("KWSettingsManagerApp"===r.kwType&&"SETTINGS_userId"===c)return{action:i,kwType:a,itemId:c,content:t};const d=(0,o.find)((0,o.propEq)("Id",c),e[u]);return d?{action:i,kwType:a,itemId:c,content:d}:null})).filter(o.identity)}t.gatherContentsToUpload=p;const S=async(e,t,r)=>{t(c.announcements.cipherStarted());const o=r.map((r=>(0,i.createNewTransaction)(e,t,r))),n=await Promise.all(o);return t(c.announcements.cipherFinished()),n.filter(Boolean)};t.upload=async function(e){const{announce:t,cryptoCenterService:r,personalData:o,personalSettings:n}=e,i=p(o,n),s=await S(r,t,i);if(0===s.length)return{uploadedTransactionsId:[]};try{const r=(0,a.countEditionTransactions)(s),o=(0,a.countRemoveTransactions)(s);t(c.announcements.uploadRequested(r,o));const n=await e.ws.backup.upload({login:e.login,uki:e.uki,lock:e.lock,transactions:s,privateKey:e.privateKey,publicKey:e.publicKey}),i=s.reduce(((e,t)=>(t.identifier&&e.push(t.identifier),e)),[]);return t(c.announcements.uploadSucceeded(r,o,n.timestamp)),{uploadedTransactionsId:i,lastSyncTimestamp:Number(n.timestamp),summary:n.summary}}catch(e){throw t(c.announcements.uploadFailed(e)),e}},t.isUploadNeeded=function(e){const t=(0,o.propOr)([],"changesToUpload",e);return 0!==t.length&&l(t).length>0}},31982:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.countSyncSummaryTransactions=void 0,t.countSyncSummaryTransactions=function(e){return e?Object.keys(e.transactions).reduce(((t,r)=>t+(Object.keys(e.transactions[r])||[]).length),0):0}},25963:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLastSuccessfulSyncTimestamp=t.sync=t.MAX_SYNC_TIMESTAMP=t.MIN_SYNC_TIMESTAMP=void 0;const o=r(16516),n=r(37898),i=r(36081),a=r(26632),s=r(88205),c=r(37744),u=r(95623),d=r(62844),l=r(58582),p=r(35668),S=r(63002),g=r(45291),E=r(70252),y=r(92263),_=r(51504),A=(e,t)=>{const r=new Set,o=e&&e.items||[];for(const e of o)e&&"object"==typeof e&&e.id&&r.add(e.id);for(const e of t.items)e&&"object"==typeof e&&e.itemId&&r.add(e.itemId);return r};function m(e,t){const r=Number(t);return""===t||(0,o.isNil)(t)||isNaN(r)?e:r}t.MIN_SYNC_TIMESTAMP=999999999999,t.MAX_SYNC_TIMESTAMP=2070753783e3,t.sync=async function(e){const{announce:r,storeService:T}=e;let v;try{const f=T.getState(),h=(0,s.featuresSelector)(f);!function(e){switch(e.syncType){case n.SyncType.FIRST_SYNC:{if(0!==e.lastSyncTimestamp)throw new Error("Sync Error: lastSyncTimestamp should be 0 on First Sync");const t=(0,S.getUploadChangesWithoutSettings)(e.personalData?.changesToUpload??[]);if(t?.length)throw new Error("Sync Error: should not have changes to upload on First Sync");break}case n.SyncType.LIGHT_SYNC:case n.SyncType.FULL_SYNC:if(null===e.lastSyncTimestamp||e.lastSyncTimestamp<t.MIN_SYNC_TIMESTAMP||e.lastSyncTimestamp>t.MAX_SYNC_TIMESTAMP){const t=new Error("Sync Error: non valid lastSyncTimestamp"),r=y.CarbonError.fromAnyError(t).addContextInfo("SYNC","verifySyncArgs").addAdditionalInfo({libError:`lastSyncTimestamp: ${e.lastSyncTimestamp}`});throw(0,E.sendExceptionLog)({error:r}),t}break;default:{const t=new Error("Sync Error: unexpected syncType"),r=y.CarbonError.fromAnyError(t).addContextInfo("SYNC","verifySyncArgs").addAdditionalInfo({libError:`syncType: ${e.syncType}`});throw(0,E.sendExceptionLog)({error:r}),t}}}(e);const D=e.personalData||T.getPersonalData(),{isUploadEnabled:O}=T.getSyncStatus();u.Debugger.log(`[Sync] User allowed to Upload: ${O}`),O&&(0,a.isUploadNeeded)(D)&&(u.Debugger.log("[Sync] Found local data to upload"),e.syncType=n.SyncType.FULL_SYNC,r(l.announcements.syncTypeChanged(e.syncType))),T.dispatch((0,g.scheduleChangesForSync)()),v=await(0,i.latest)(e);const P=()=>({...(0,o.dissoc)("lock",v),syncType:e.syncType,isUploadEnabled:v.isUploadEnabled,lastSyncTimestamp:m(e.lastSyncTimestamp,v.lastSyncTimestamp),uploadedTransactions:[],summary:v.summary});if((0,d.changeMPinProgressSelector)(f))return P();if(e.syncType!==n.SyncType.FULL_SYNC||!v.isUploadEnabled)return v.isUploadEnabled&&(0,p.unlock)(e,v.lock),P();const I=A(v.sharing2,T.getSharingData()),C=h[_.NEW_URL_PARSER_FF]||h[_.NEW_URL_PARSER_FF_PROD],{personalData:R,remoteTransactions:L}=(0,c.default)(r,D,I,v.clearTransactions,C),b=(0,o.isNil)(e.pushKeysToServer)?null:{publicKey:e.pushKeysToServer.public,privateKey:e.pushKeysToServer.private},N={login:e.login,uki:e.uki,lock:v.lock,ws:e.ws,cryptoCenterService:e.dataEncryptorService.getInstance(),personalData:R,personalSettings:T.getPersonalSettings(),...b,announce:r},U=await(0,a.upload)(N);return 0===U.uploadedTransactionsId.length&&(0,p.unlock)(e,v.lock),T.dispatch((0,g.clearUploadedChanges)(U.uploadedTransactionsId)),{...(0,o.dissoc)("lock",v),clearTransactions:L,syncType:e.syncType,isUploadEnabled:v.isUploadEnabled,uploadedTransactions:U.uploadedTransactionsId,lastSyncTimestamp:m(e.lastSyncTimestamp,U.lastSyncTimestamp),summary:U.summary||v.summary}}catch(t){throw v&&(0,p.unlock)(e,v.lock),t&&t.message,t}finally{T.dispatch((0,g.unscheduleRemainingChanges)())}},t.getLastSuccessfulSyncTimestamp=m},36081:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildFullBackupFileMap=t.buildLatestArgs=t.latest=void 0;const o=r(28354),n=r(16516),i=r(63713),a=r(95623),s=r(25576),c=r(37898),u=r(58582),d=r(35668),l=r(92263),p=r(70252);function S(e){const{lastSyncTimestamp:t,login:r,needsKeys:n,storeService:i,syncType:a,transactionIds:s,uki:u}=e,d=s&&s.length,S={lock:a===c.SyncType.FULL_SYNC||d?(0,o.v4)():"nolock",login:r,needsKeys:n,sharing2:!0,teamAdminGroups:!0,timestamp:t,version:i.getPlatform().info.appVersion,uki:u};switch(s&&(S.transactions=s),a){case c.SyncType.FIRST_SYNC:if(0!==S.timestamp)throw new Error("timestamp should be null for FIRST_SYNC");break;case c.SyncType.LIGHT_SYNC:case c.SyncType.FULL_SYNC:if(isNaN(S.timestamp))S.timestamp=0;else if(null===S.timestamp||S.timestamp<999999999999||S.timestamp>2070753783e3){const e=new Error("non valid lastSyncTimestamp"),t=l.CarbonError.fromAnyError(e).addContextInfo("SYNC","buildLatestArgs").addAdditionalInfo({libError:`lastSyncTimestamp: ${S.timestamp}`});throw(0,p.sendExceptionLog)({error:t}),e}break;default:{const e=new Error("unexpected syncType"),t=l.CarbonError.fromAnyError(e).addContextInfo("SYNC","buildLatestArgs").addAdditionalInfo({libError:`syncType: ${a}`});throw(0,p.sendExceptionLog)({error:t}),e}}return S}function g(e){const t=new Map;return e&&e.forEach((e=>{t.set(e.identifier,e.backupDate)})),t}t.latest=async function(e){const t=S(e),{announce:r}=e;let o;try{const{lock:n,needsKeys:i}=t;if(r(u.announcements.latestRequested(n,i)),o=await e.ws.backup.latest(t),"message"===o.objectType)throw"Incorrect authentification"===o.content?new Error(s.AuthenticationCode[s.AuthenticationCode.INVALID_UKI]):"Temporarily disabled"===o.content?new Error("Sync service unavailable"):new Error(s.AuthenticationCode[s.AuthenticationCode.UNKNOWN_SYNC_ERROR]);if(void 0!==o.objectType)throw new Error("unexpected objectType");if(!o.transactionList)throw a.default.log("Backup sync failed"),new Error("Backup sync failed");if(!function(e){if(e.find((e=>!e.backupDate||e.backupDate<999999999999||e.backupDate>2070753783e3)))return!1;return!0}(o.transactionList))throw new Error("wrongly formatted backupDate")}catch(e){throw r(u.announcements.latestFailed(e)),e}r(u.announcements.latestSucceeded(o));const c=g(o.fullBackupFileList);try{const a=await i.decrypt(e.dataEncryptorService.getInstance(),r,o.fullBackupFile,c,o.transactionList);return{clearTransactions:a,sharing2:o.sharing2,lastSyncTimestamp:o.timestamp,lock:t.lock,keys:o.keys,isUploadEnabled:(0,n.defaultTo)(!1,o.uploadEnabled),summary:o.summary,fullBackupFileSize:c.size}}catch(r){throw(0,d.unlock)(e,t.lock),r}},t.buildLatestArgs=S,t.buildFullBackupFileMap=g},37898:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncType=void 0,function(e){e[e.FIRST_SYNC=0]="FIRST_SYNC",e[e.LIGHT_SYNC=1]="LIGHT_SYNC",e[e.FULL_SYNC=2]="FULL_SYNC"}(t.SyncType||(t.SyncType={}))},35668:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unlock=void 0;const o=r(95623);t.unlock=async function(e,t){if(!function(e){return e&&"nolock"!==e}(t))return;const{login:r,ws:n,uki:i}=e;try{await n.backup.unlock({login:r,uki:i,lock:t})}catch(e){(0,o.logWarn)({tag:"Sync",message:`Unlock failed: ${e}`})}}},59890:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.binaryFindLastIndex=t.binaryFindIndex=t.binaryContains=void 0;const o=r(16516);t.binaryContains=(0,o.curry)((function e(t,r){const o=t.length;if(0===o)return!1;const n=Math.floor(o/2),i=t[n];if(i===r)return!0;if(i<r){return e(t.slice(n+1,o),r)}return e(t.slice(0,n),r)})),t.binaryFindIndex=function e(t,r,o){const n=t.length;if(0===n)return-1;const i=o?Math.min(o,n-1):Math.floor(n/2);if(r(t[i])){const o=e(t.slice(0,i),r);return-1===o?i:o}{const o=e(t.slice(i+1,n),r);return-1===o?-1:i+o+1}},t.binaryFindLastIndex=function e(t,r,o){const n=t.length;if(0===n)return-1;const i=o?Math.min(o,n-1):Math.floor(n/2);if(r(t[i])){const o=e(t.slice(i+1,n),r);return-1===o?i:i+o+1}return e(t.slice(0,i),r)}},72365:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeDataEncryptorService=t.setObfuscatingKey=void 0;const o=r(56668);t.setObfuscatingKey=function(e){return e.setInstance({raw:[214,238,100,106,146,140,114].concat([110,232,72,104,108,100,204]).map((e=>e/2)).map((e=>String.fromCharCode(e))).join("")},""),e},t.makeDataEncryptorService=function(e){let t=null;return{setInstance:(r,n,i)=>{t=(0,o.makeCryptoCenterService)(r,n,e,i)},getInstance:()=>{if(!t)throw new Error("makeDataEncryptorService: you must call setInstance(password,serverKey) before getting the instance");return t},close:()=>{t=null},hasBeenSet:()=>Boolean(t)}}},56584:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertDashlaneSecureDataKWC3ToTransportableData=void 0;const o=r(16038);t.convertDashlaneSecureDataKWC3ToTransportableData=e=>{const t=e.salt,r=(0,o.utf8ToBase64Buffer)(e.version),n=e.encryptedData;return(0,o.concatBuffers)(t,r,n)}},16038:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBufferToHex=t.deflateBuffer=t.removeQtCompressionHeader=t.addQtCompressHeader=t.isBase64Encoded=t.getSubDataByteArray=t.concatBuffers=t.ab2str=t.str2ab=t.base64ToBigInteger=t.pemToSpki=t.spkitoPem=t.pkcs8toPem=t.CrlfToLF=t.pemTopkcs8=t.base64BufferToText=t.utf8ToBase64=t.base64ToUtf8=t.utf8ToBase64Buffer=t.base64BufferToUtf8=t.arrayBufferToText=t.uint8ArrayToText=t.utf8ChunkDecode=t.utf8ChunkEncode=t.base64ToBuffer=t.bufferToBase64=t.applyXorOnBuffers=void 0;const o=r(93513),n=r(63969),i=r(63290),a=r(97224),s=r(10001),c=r(93347),u=r(30543),d=16383,l=Math.pow(10,6),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=new Uint8Array(256);for(let e=0;e<p.length;e++)S[p.charCodeAt(e)]=e;function g(e){const t=e.length,r=[];for(let o=0;o<t;o+=3)r.push(p[e[o]>>2]),r.push(p[(3&e[o])<<4|e[o+1]>>4]),r.push(p[(15&e[o+1])<<2|e[o+2]>>6]),r.push(p[63&e[o+2]]);return r.join("")}function E(e,t=l){const r=new Uint8Array(e),o=r.length,n=t%3,i=0===n?t:t+(3-n),a=Math.ceil(o/i);let s="",c=-1;for(;c++<a;){const e=c*i,t=c===a-1?o:(c+1)*i,n=g(r.slice(e,t));s=s.concat(n)}return o%3==2?s.substring(0,s.length-1)+"=":o%3==1?s.substring(0,s.length-2)+"==":s}function y(e){let t=.75*e.length;const r=e.length;let o,n,i,a,s,c=0;e.endsWith("=")&&(t--,"="===e[e.length-2]&&t--);const u=new ArrayBuffer(t),d=new Uint8Array(u);for(o=0;o<r;o+=4)n=S[e.charCodeAt(o)],i=S[e.charCodeAt(o+1)],a=S[e.charCodeAt(o+2)],s=S[e.charCodeAt(o+3)],d[c++]=n<<2|i>>4,d[c++]=(15&i)<<4|a>>2,d[c++]=(3&a)<<6|63&s;return u}function _(e,t=l){const r=e.length;if(0===r)return"";let o="",n=0,i=Math.min(n+t,r);for(;i<=r;){const a=e.charCodeAt(i-1);if(a>=55296&&a<=56319){if(i++,i>r)throw new Error("Invalid string provided to utf8ChunkEncode");continue}const s=e.slice(n,i),c=u.encode(s);if(o=o.concat(c),i===r)break;n=i,i=Math.min(n+t,r)}return o}function A(e){return e>>6==2}function m(e,t=l){const r=e.length;if(0===r)return"";let o="",n=0,i=Math.min(n+t,r);for(;i<=r;){const s=e.charCodeAt(i-1);if((A(a=s)||function(e){return e>>5==6||e>>4==14||e>>3==30}(a))&&i<r){if(A(e.charCodeAt(i))){i++;continue}}const c=e.slice(n,i),d=u.decode(c);if(o=o.concat(d),i===r)break;n=i,i=Math.min(n+t,r)}var a;return o}function T(e){const t=new Uint16Array(e),r=t.length;let o="",n=d;for(let e=0;e<r;e+=n)e+n>r&&(n=r-e),o+=String.fromCharCode.apply(null,t.subarray(e,e+n));return o}function v(e){return T(new Uint8Array(e))}t.applyXorOnBuffers=function(e,t){if(e.byteLength!==t.byteLength)throw new Error("xorBuffer: buffers are not same length");const r=new Uint8Array(e),o=new Uint8Array(t),n=e.byteLength,i=new Uint8Array(n);for(let e=0;e<n;e++)i[e]=r[e]^o[e];return i.buffer},t.bufferToBase64=E,t.base64ToBuffer=y,t.utf8ChunkEncode=_,t.utf8ChunkDecode=m,t.uint8ArrayToText=T,t.arrayBufferToText=v,t.base64BufferToUtf8=function(e){const t=E(e);return m(o.decode(t))},t.utf8ToBase64Buffer=function(e){const t=_(e);return y(o.encode(t))},t.base64ToUtf8=function(e){return m(o.decode(e))},t.utf8ToBase64=function(e){const t=_(e);return o.encode(t)},t.base64BufferToText=function(e){const t=E(e);return o.decode(t)},t.pemTopkcs8=function(e){const t=n.privateKeyFromPem(e),r=n.privateKeyToAsn1(t),o=n.wrapRsaPrivateKey(r);return f(s.toDer(o).getBytes())};function f(e){const t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let t=0;t<e.length;++t)r[t]=e.charCodeAt(t);return t}function h(...e){const t=e.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(t);return e.reduce(((e,t)=>(r.set(new Uint8Array(t),e),e+t.byteLength)),0),r.buffer}t.CrlfToLF=e=>e.replace(/(?:\\[r]|[\r\n]+)+/g,"\n"),t.pkcs8toPem=function(e){const r=new i.ByteBuffer(e),o=s.fromDer(r),a=n.privateKeyFromAsn1(o),c=n.privateKeyToPem(a);return(0,t.CrlfToLF)(c)},t.spkitoPem=function(e){const r=new i.ByteBuffer(e),o=s.fromDer(r),a=n.publicKeyFromAsn1(o),c=n.publicKeyToRSAPublicKeyPem(a);return(0,t.CrlfToLF)(c)},t.pemToSpki=function(e){const t=n.publicKeyFromPem(e),r=n.publicKeyToAsn1(t);return f(s.toDer(r).getBytes())},t.base64ToBigInteger=function(e){const t=(e+"===".slice((e.length+3)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=i.decode64(t);return new a.BigInteger(i.bytesToHex(r),16)},t.str2ab=f,t.ab2str=v,t.concatBuffers=h,t.getSubDataByteArray=function(e,t,r){return e.slice(t,r)},t.isBase64Encoded=function(e){return e&&/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/.test(e)},t.addQtCompressHeader=function(e){var t;return h((t=e.byteLength,new Uint8Array([(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]).buffer),e)},t.removeQtCompressionHeader=function(e){return e.slice(4)},t.deflateBuffer=function(e){return c.deflate(new Uint8Array(e),{level:7}).buffer},t.convertBufferToHex=function(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}},55623:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomValues=void 0;const o=r(97588),n=r(81106);t.getRandomValues=function(e){const t=(0,n.getWebCrypto)();return t?t.getRandomValues(new Uint8Array(e)):(0,o.generateRandomValues)(e)}},3678:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.jwkToSpki=t.evpBytesToKey=void 0;const o=r(63969),n=r(10001),i=r(46445),a=r(16038);t.evpBytesToKey=async function(e){const{derivedKey:t,salt:r,keyLength:o,ivLength:n}=e,s=(0,a.concatBuffers)(t,r.slice(0,8)),c=await(0,i.computeHashSha1)(s),u=await(0,i.computeHashSha1)((0,a.concatBuffers)(c,s)),d=await(0,i.computeHashSha1)((0,a.concatBuffers)(u,s)),l=(0,a.concatBuffers)(c,u,d);return Promise.resolve(l.slice(o,o+n))};t.jwkToSpki=e=>{const{modulus:t,exponent:r}=e,i=o.setRsaPublicKey((0,a.base64ToBigInteger)(t),(0,a.base64ToBigInteger)(r)),s=o.publicKeyToAsn1(i),c=n.toDer(s).getBytes();return(0,a.str2ab)(c)}},64910:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNoDerivationCryptoConfig=void 0;const o=r(65675),n=r(91301);t.getNoDerivationCryptoConfig=function(){return(0,o.parsePayload)(n.CRYPTO_NODERIVATION_HMAC64).cryptoConfig}},81106:(e,t)=>{function r(){return self.crypto||null}Object.defineProperty(t,"__esModule",{value:!0}),t.getWebCryptoSubtle=t.getWebCrypto=void 0,t.getWebCrypto=r,t.getWebCryptoSubtle=function(){const e=r();return e?e.subtle?e.subtle:e.webkitSubtle?e.webkitSubtle:null:null}},33769:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateLocalkeyAndSetupEncryptorService=t.getEncryptionKeyBuffer=void 0;const o=r(64910),n=r(16038),i=r(69530),a=r(16356),s=r(25576);t.getEncryptionKeyBuffer=function(e,t,r){if(r.skipDerivation){if(e.byteLength<64)throw new Error(`createEncryptionKey: password should be at least 64 bytes long but is: ${e.byteLength}`);return(0,n.applyXorOnBuffers)(e,t)}return(0,n.concatBuffers)(t,e)},t.generateLocalkeyAndSetupEncryptorService=async function(e,t,r,c){const u=await(0,i.generate64BytesKey)(),d=(0,n.base64BufferToText)(u),l=(0,o.getNoDerivationCryptoConfig)();e.setInstance({raw:d},"",l),t.dispatch((0,a.updateLocalKey)(d)),c===s.PersistData.PERSIST_DATA_YES&&await r.getInstance().user.persistLocalKey(d)}},83570:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeGetDerivateKeyWithCacheAndQueue=void 0;const o=r(65675),n=r(16038),i=r(86723),a=r(46445);t.makeGetDerivateKeyWithCacheAndQueue=function(){const e=new Map,t=new Map;function r(t){return e.get(t)}function s(r,o){const n=t.get(r);n&&n.forEach((({resolve:e})=>e(o))),t.set(r,[]),e.set(r,o)}function c(r,o,n,a){return new Promise(((c,u)=>{const d=t.get(r)||[];d.push({resolve:c,reject:u}),t.set(r,d);const l=e.get(r);if(l)s(r,l);else if(1===d.length){({pbkdf2:i.deriveKeyWithPBKDF2,argon2d:i.deriveKeyWithArgon2d})[a.method](o,n,a).then((e=>{s(r,e)})).catch((o=>{!function(r,o){const n=t.get(r);n&&n.forEach((({reject:e})=>e(o))),t.set(r,[]),e.delete(r)}(r,o)}))}}))}return(e,t,i)=>function(e,t,r,i,s){return function(e,t,r){if((0,o.isNoDerivation)(r))return Promise.resolve((0,n.arrayBufferToText)(e));const i=(0,o.isPbkdf2Derivation)(r)?r.iterations:r.t_cost;return new Promise(((o,s)=>{(0,a.computeHashSha256)((0,n.str2ab)(`${(0,n.arrayBufferToText)(e)}_${(0,n.arrayBufferToText)(t)}_${r.method}_${i}`)).then((e=>(0,n.arrayBufferToText)(e))).then(o,s)}))}(r,i,s).then((o=>{const n=e(o);return n||t(o,r,i,s)}))}(r,c,e,t,i)}},56984:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.verify=t.sign=t.decrypt=t.encrypt=t.generateRsaOaepKeyPair=t.DefaultAsymmetricOptions=t.HashAlgorithm=t.RSASA_PKCS1=t.RSA_OAEP=void 0;const o=r(16038);t.RSA_OAEP="RSA-OAEP",t.RSASA_PKCS1="RSASSA-PKCS1-v1_5";const n=new Uint8Array([1,0,1]);var i;!function(e){e.SHA_1="SHA-1",e.SHA_256="SHA-256"}(i=t.HashAlgorithm||(t.HashAlgorithm={})),t.DefaultAsymmetricOptions={hashAlgorithm:i.SHA_256};const a=e=>({name:t.RSASA_PKCS1,hash:{name:e}}),s=e=>({name:t.RSA_OAEP,hash:{name:e}});t.generateRsaOaepKeyPair=async(e=i.SHA_256)=>{const r=await self.crypto.subtle.generateKey({name:t.RSA_OAEP,modulusLength:2048,publicExponent:n,hash:{name:e}},!0,["encrypt","decrypt"]),{publicKey:a,privateKey:s}=await async function({privateKey:e,publicKey:t}){return{privateKey:await self.crypto.subtle.exportKey("pkcs8",e),publicKey:await self.crypto.subtle.exportKey("spki",t)}}({...r});return function({publicKey:e,privateKey:t}){return{publicKey:(0,o.spkitoPem)(e),privateKey:(0,o.pkcs8toPem)(t)}}({publicKey:a,privateKey:s})},t.encrypt=async function({publicKey:e,data:r,options:o=t.DefaultAsymmetricOptions}){const n=await self.crypto.subtle.importKey("spki",e,s(o.hashAlgorithm),!1,["encrypt"]);return await self.crypto.subtle.encrypt(s(o.hashAlgorithm),n,r)},t.decrypt=async function({privateKey:e,data:r,options:o=t.DefaultAsymmetricOptions}){const n=await self.crypto.subtle.importKey("pkcs8",e,s(o.hashAlgorithm),!1,["decrypt"]);return await self.crypto.subtle.decrypt(s(o.hashAlgorithm),n,r)},t.sign=async function({privateKey:e,data:r,options:o=t.DefaultAsymmetricOptions}){const n=await self.crypto.subtle.importKey("pkcs8",e,a(o.hashAlgorithm),!1,["sign"]);return await self.crypto.subtle.sign(a(o.hashAlgorithm),n,r)},t.verify=async function({publicKey:e,signature:r,data:o,options:n=t.DefaultAsymmetricOptions}){const i=await self.crypto.subtle.importKey("spki",e,a(n.hashAlgorithm),!1,["verify"]);return await self.crypto.subtle.verify(a(n.hashAlgorithm),i,r,o)}},73626:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKeyWithArgon2d=void 0;const o=r(11814),n=r(95623),i=r(70252),a=r(35558);t.deriveKeyWithArgon2d=async(e,t,r)=>{try{if(null===e||null===t||null===r)throw new Error("deriveKeyWithArgon2d parameters are null");if(!o.env.isBrowserEnvironment()&&!o.env.isWorkerEnvironment())throw new Error("Environment is not supported");return(async(e,t,r)=>{const o={argon2d:a.ArgonType.Argon2d,argon2i:a.ArgonType.Argon2i},{hash:n}=await(0,a.hash)({pass:new Uint8Array(e),salt:new Uint8Array(t),time:r.t_cost,mem:r.m_cost,hashLen:32,parallelism:r.parallelism,type:o[r.method]});return n})(e,t,r)}catch(e){const t=new Error(`[Derivation] - deriveKeyWithArgon2d: ${e}`);throw n.Debugger.error(t),(0,i.sendExceptionLog)({error:t}),e}}},86723:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKeyWithArgon2d=t.deriveKeyWithPBKDF2=void 0;var o=r(33713);Object.defineProperty(t,"deriveKeyWithPBKDF2",{enumerable:!0,get:function(){return o.deriveKeyWithPBKDF2}});var n=r(73626);Object.defineProperty(t,"deriveKeyWithArgon2d",{enumerable:!0,get:function(){return n.deriveKeyWithArgon2d}})},33713:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKeyWithPBKDF2=void 0;const o=r(81106),n=r(97588),i=r(975),a=r(95623),s=r(4673),c={sha1:"SHA-1",sha256:"SHA-256"};t.deriveKeyWithPBKDF2=async(e,t,r)=>{if(null===e||null===t||null===r)throw new Error("deriveKeyWithPBKDF2 parameters are null");const u=(0,s.getPlugins)().pbkdf2Plugin;if(u)return new Promise((o=>{o(u.deriveKey(new Uint8Array(e),new Uint8Array(t),r.iterations,r.hashMethod?c[r.hashMethod]:"SHA-256",32).buffer)}));const d=(0,o.getWebCryptoSubtle)();if(!d)return(0,n.deriveKeyPolyfill)(e,t,r);try{const o=await d.importKey("raw",e,"PBKDF2",!1,["deriveKey"]);return await d.deriveKey({name:"PBKDF2",salt:t,iterations:r.iterations,hash:{name:r.hashMethod?c[r.hashMethod]:"SHA-256"}},o,{name:i.AES_CBC,length:256},!0,["encrypt","decrypt"]).then((e=>d.exportKey("raw",e)))}catch(o){return(o=>{const i=new Error(`[Derivation] - deriveKeyWithPBKDF2: ${o}`);return a.Debugger.error(i),(0,n.deriveKeyPolyfill)(e,t,r)})(o)}}},46445:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hashAndSplitKey=t.computeHashMD5=t.computeHashSha512=t.computeHashSha256=t.computeHashSha1=void 0;const o=r(30960),n=r(16038);async function i({hashAlgorithm:e,data:t}){return await self.crypto.subtle.digest({name:e},t)}async function a(e){return await i({hashAlgorithm:"SHA-512",data:e})}t.computeHashSha1=async function(e){return await i({hashAlgorithm:"SHA-1",data:e})},t.computeHashSha256=async function(e){return await i({hashAlgorithm:"SHA-256",data:e})},t.computeHashSha512=a;t.computeHashMD5=e=>{const t=o.create();return t.update(e),t.digest().toHex()},t.hashAndSplitKey=async function(e){const t=await a(e),r=t.byteLength,o=(0,n.getSubDataByteArray)(new Uint8Array(t),0,r/2),i=(0,n.getSubDataByteArray)(new Uint8Array(t),r/2,r);return{aes:o.buffer,hmac:i.buffer}}},69530:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.verifyHashHmacSHA256=t.signHashHmacSHA256=t.decryptAES256=t.encryptAES256=t.importKeyAES256=t.generate64BytesKey=t.generateAESKey=void 0;const o=r(16038),n="AES-CBC",i=256,a={name:"HMAC",hash:{name:"SHA-256"}};async function s(){const e=await self.crypto.subtle.generateKey({name:n,length:i},!0,["encrypt","decrypt"]);return await self.crypto.subtle.exportKey("raw",e)}async function c(e){return await self.crypto.subtle.importKey("raw",e,n,!1,["encrypt","decrypt"])}async function u(e){return await self.crypto.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!0,["sign","verify"])}t.generateAESKey=s,t.generate64BytesKey=async function(){const e=await s(),t=await s();return(0,o.concatBuffers)(e,t)},t.importKeyAES256=c,t.encryptAES256=async function({key:e,iv:t,clearData:r}){const o=await c(e);return await self.crypto.subtle.encrypt({name:n,iv:t},o,r)},t.decryptAES256=async function({key:e,iv:t,encryptedData:r}){const o=await c(e);return await self.crypto.subtle.decrypt({name:n,iv:t},o,r)},t.signHashHmacSHA256=async function({key:e,data:t}){const r=await u(e);return await self.crypto.subtle.sign(a,r,t)},t.verifyHashHmacSHA256=async function({key:e,signature:t,data:r}){const o=await u(e);return await self.crypto.subtle.verify(a,o,t,r)}},975:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AES_KEY_SIZE=t.AES_CBC=void 0,t.AES_CBC="AES-CBC",t.AES_KEY_SIZE=32},97588:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.verifyRsa=t.signRSA=t.decryptRSA=t.encryptRSA=t.generateRsaKeyPair=t.deriveKeyPolyfill=t.verifyHashHmacSHA256=t.signHashHmacSHA256=t.decryptAES256=t.encryptAES256=t.generateAESKey=t.computeHashSha512=t.computeHashSha256=t.computeHashSha1=t.generateRandomValues=t.arrayBufferToBuffer=void 0;const o=r(61384),n=r(16038),i=r(95623),a=r(56984),s=r(975),c=r(63969),u=r(59018),d=r(58654),l=r(63290),p=r(11087),S=r(85469),g=r(33803),E=r(15313).Buffer;function y(e){const t=new E(e.byteLength),r=new Uint8Array(e);for(let e=0;e<t.length;++e)t[e]=r[e];return t}t.arrayBufferToBuffer=y,t.generateRandomValues=function(e){const t=u.getBytesSync(e);return(0,n.str2ab)(t)};t.computeHashSha1=e=>new Promise(((t,r)=>{try{const r=(0,n.base64BufferToText)(e),o=p.sha1.create();return o.update(r),t((0,n.str2ab)(o.digest().data))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [computeHashSha1]",e),r(e)}}));t.computeHashSha256=e=>new Promise(((t,r)=>{try{const r=(0,n.base64BufferToText)(e),o=p.sha256.create();return o.update(r),t((0,n.str2ab)(o.digest().data))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [computeHashSha256]",e),r(e)}}));t.computeHashSha512=e=>new Promise(((t,r)=>{try{const r=(0,n.base64BufferToText)(e),o=p.sha512.create();return o.update(r),t((0,n.str2ab)(o.digest().data))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [computeHashSha512]",e),r(e)}}));t.generateAESKey=()=>new Promise(((e,t)=>{try{u.getBytes(s.AES_KEY_SIZE,(function(r,o){return r?t(r):e((0,n.str2ab)(o))}))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [generateAESKey]",e),t(e)}}));t.encryptAES256=(e,t,r)=>new Promise(((o,a)=>{try{const i=new l.ByteBuffer(e),a=new l.ByteBuffer(t),c=new l.ByteBuffer(r),u=d.createCipher(s.AES_CBC,i);u.start({iv:a}),u.update(c),u.finish();const p=u.output.data;return o((0,n.str2ab)(p))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [encryptAES256]",e),a(e)}}));t.decryptAES256=(e,t,r)=>new Promise(((o,a)=>{try{const i=new l.ByteBuffer(e),a=new l.ByteBuffer(t),c=new l.ByteBuffer(r),u=d.createDecipher(s.AES_CBC,i);u.start({iv:a}),u.update(c),u.finish();const p=u.output.data;return o((0,n.str2ab)(p))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [decryptAES256]",e),a(e)}}));t.signHashHmacSHA256=(e,t)=>new Promise(((r,o)=>{try{const o=(0,n.base64BufferToText)(t),i=(0,n.base64BufferToText)(e),a=S.create();return a.start("sha256",i),a.update(o),r((0,n.str2ab)(a.digest().data))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [signHashHmacSHA256]",e),o(e)}}));t.verifyHashHmacSHA256=(e,r)=>{try{return(0,t.signHashHmacSHA256)(e,r).then((e=>e==e))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [verifyHashHmacSHA256]",e),Promise.reject(e)}};t.deriveKeyPolyfill=(e,t,r)=>new Promise(((n,a)=>{try{const i=(0,o.getWorkerPath)("pbkdf2PolyfillWorker");if(void 0===i){const o=y(e),i=y(t);return void g.pbkdf2(o,i,r.iterations,32,r.hashMethod,((e,t)=>{e?a(e):n(t.buffer)}))}(0,o.getWorker)(i).then((i=>{i.onmessage=function(e){n(e.data),(0,o.freeWorker)(i)},i.onerror=function(e){a(new Error(`[WebCryptoPolyfill] - deriveKeyPolyfill: ${e.message}`)),(0,o.freeWorker)(i)},i.postMessage([e,t,r.iterations,32,r.hashMethod])}))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [deriveKeyFrom]",e),void a(e)}}));t.generateRsaKeyPair=()=>new Promise(((e,t)=>{try{const r=(0,o.getWorkerPath)("WebCryptoPolyfill");c.rsa.generateKeyPair({bits:2048,workers:-1,workerScript:r},(function(r,o){if(r)return t(r);const i={publicKey:(0,n.CrlfToLF)(c.publicKeyToRSAPublicKeyPem(o.publicKey)),privateKey:(0,n.CrlfToLF)(c.privateKeyToPem(o.privateKey))};return e(i)}))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [generateRsaKeyPair]",e),t(e)}}));t.encryptRSA=(e,t)=>new Promise(((r,o)=>{try{const o=(0,n.spkitoPem)(e),i=c.publicKeyFromPem(o),s=(0,n.base64BufferToText)(t),u=i.encrypt(s,a.RSA_OAEP,{md:p.sha256.create()});return r((0,n.str2ab)(u))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [encryptRSA]",e),o(e)}}));t.decryptRSA=(e,t,r=a.HashAlgorithm.SHA_256)=>new Promise(((o,s)=>{try{const i=(0,n.pkcs8toPem)(e),s=c.privateKeyFromPem(i),u=(0,n.base64BufferToText)(t),d=s.decrypt(u,a.RSA_OAEP,{md:r===a.HashAlgorithm.SHA_256?p.sha256.create():p.sha1.create()});return o((0,n.str2ab)(d))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [decryptRSA]",e),s(e)}}));t.signRSA=(e,t)=>new Promise(((r,o)=>{try{const o=(0,n.pkcs8toPem)(e),i=c.privateKeyFromPem(o),a=(0,n.base64BufferToText)(t),s=p.sha256.create();s.update(a);const u=i.sign(s);return r((0,n.str2ab)(u))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [signRSA]",e),o(e)}}));t.verifyRsa=(e,t,r)=>new Promise(((o,a)=>{try{const i=(0,n.spkitoPem)(e),a=c.publicKeyFromPem(i),s=(0,n.base64BufferToText)(r),u=(0,n.base64BufferToText)(t),d=p.sha256.create();d.update(s);return o(a.verify(d.digest().bytes(),u))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [verifyRsa]",e),a(e)}}))},36513:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeAsymmetricEncryption=t.makeSymmetricEncryption=t.makeCryptoService=void 0;const o=r(93347),n=r(56668),i=r(53576),a=r(61797),s=r(69530),c=r(27993),u=r(56984),d=r(16038),l=r(3678),p=r(46445),S=r(63985);t.makeCryptoService=()=>({symmetricEncryption:(0,t.makeSymmetricEncryption)(),asymmetricEncryption:(0,t.makeAsymmetricEncryption)()});async function g(e,t){const r=(0,d.base64ToBuffer)(t),o=(0,d.base64ToBuffer)(e),n=await(0,p.hashAndSplitKey)(o),i=(0,c.parseDashlaneKw5SecureData)(new Uint8Array(r)),a=(0,d.concatBuffers)(i.iv,i.secured),u=await(0,s.signHashHmacSHA256)({key:n.hmac,data:a});if((0,d.bufferToBase64)(u)!==(0,d.bufferToBase64)(i.hash))throw new Error("Sharing - Data has been tampered with");return(0,s.decryptAES256)({key:n.aes,iv:i.iv,encryptedData:i.secured})}t.makeSymmetricEncryption=()=>({generateNewAESKey:()=>(0,s.generateAESKey)().then(d.bufferToBase64),encryptAES256:async(e,t)=>{const r=(0,d.base64ToBuffer)(t),o=(0,d.base64ToBuffer)(e),n=await(0,p.hashAndSplitKey)(o),i=(0,c.generateIV)();return(0,s.encryptAES256)({key:n.aes,iv:i,clearData:r}).then((async e=>{const t=(0,d.concatBuffers)(i,e),o=await(0,s.signHashHmacSHA256)({key:n.hmac,data:t}),a=(0,c.makeKWC5DashlaneSecureData)(r,e,i,o),u=(0,c.convertKw5ToTransportableData)(a);return(0,d.bufferToBase64)(u)}))},encryptSharingItem:async(e,r)=>{const n=(0,t.makeSymmetricEncryption)(),i=(0,a.getDashlaneXml)(r),s=(0,d.utf8ToBase64)(i),c=(0,d.base64ToBuffer)(s),u=o.deflate(new Uint8Array(c)).buffer,l=(0,d.addQtCompressHeader)(u),p=(0,d.bufferToBase64)(l);return n.encryptAES256(e,p)},decryptAES256:async(e,t)=>{const r=await g(e,t);let o="";try{o=(0,d.base64BufferToUtf8)(r)}catch{o=(0,d.bufferToBase64)(r)}return o},decryptSharingItem:async(e,t)=>{const r=await g(e,t);try{const e=new Uint8Array(r),t=(0,d.uint8ArrayToText)(e);return JSON.parse(t)}catch{const e=(0,n.deflatedUtf8ToUtf16)(r),{__type__:t,...o}=await(0,a.parseDashlaneXml)(e),s={...o,kwType:o.kwType||t};return(0,i.isCredential)(s)?(0,S.fixCredentialTypesFromTransaction)(s):(0,i.isNote)(s)?(0,S.fixNoteTypesFromTransaction)(s):s}},signHmacSHA256:(e,t)=>{const r=(0,d.base64ToBuffer)(t),o=(0,d.base64ToBuffer)(e);return(0,s.signHashHmacSHA256)({key:o,data:r}).then((e=>(0,d.bufferToBase64)(e)))},verifyHmacSHA256:(e,t,r)=>{const o=(0,d.base64ToBuffer)(r),n=(0,d.base64ToBuffer)(e),i=(0,d.base64ToBuffer)(t);return(0,s.verifyHashHmacSHA256)({key:n,signature:i,data:o})}});t.makeAsymmetricEncryption=(e=u.DefaultAsymmetricOptions)=>({generateRsaKeyPair:()=>(0,u.generateRsaOaepKeyPair)(e.hashAlgorithm),encrypt:(t,r)=>{const o=(0,d.base64ToBuffer)(r),n=(0,d.pemToSpki)(t);return(0,u.encrypt)({publicKey:n,data:o,options:e}).then(d.bufferToBase64)},decrypt:(t,r)=>{const o=(0,d.base64ToBuffer)(r),n=(0,d.pemTopkcs8)(t);return(0,u.decrypt)({privateKey:n,data:o,options:e}).then(d.bufferToBase64)},sign:(t,r)=>{const o=(0,d.pemTopkcs8)(t),n=(0,d.base64ToBuffer)(r);return(0,u.sign)({privateKey:o,data:n,options:e}).then(d.bufferToBase64)},verify:(t,r,o)=>{const n=(0,d.pemToSpki)(t),i=(0,d.base64ToBuffer)(o),a=(0,d.base64ToBuffer)(r);return(0,u.verify)({publicKey:n,signature:a,data:i,options:e})},verifyJwk:(t,r,o)=>{const n=(0,l.jwkToSpki)(t),i=(0,d.base64ToBuffer)(r),a=(0,d.base64ToBuffer)(o);return(0,u.verify)({publicKey:n,signature:i,data:a,options:e})}})},1860:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeKeyBasedCrypto=t.makeKeyDataEncryptorService=t.DATA_TAMPERED_ERROR=void 0;const o=r(95623),n=r(70252),i=r(16038),a=r(46445),s=r(27993),c=r(69530);t.DATA_TAMPERED_ERROR="KeyBasedCrypto - Data has been tampered with",t.makeKeyDataEncryptorService=function(){let e=null;return{setInstance:r=>{e=(0,t.makeKeyBasedCrypto)(r)},getInstance:()=>{if(!e)throw new Error("makeKeyDataEncryptorService: you must call setInstance(password,serverKey) before getting the instance");return e},close:()=>{e=null},hasBeenSet:()=>Boolean(e)}};t.makeKeyBasedCrypto=e=>{const r=function(e){return e.raw&&(0,i.isBase64Encoded)(e.raw)?(0,i.base64ToBuffer)(e.raw):e.raw?(0,i.str2ab)(e.raw):e.buffer}(e);return{isKey:()=>{throw new Error("makeKeyBasedCrypto:isKey not implemented")},encrypt:e=>Promise.resolve().then((()=>(0,a.hashAndSplitKey)(r).then((t=>{const r=(0,s.generateIV)();return(0,c.encryptAES256)({key:t.aes,iv:r,clearData:e}).then((o=>{const n=(0,i.concatBuffers)(r,o);return(0,c.signHashHmacSHA256)({key:t.hmac,data:n}).then((t=>{const n=(0,s.makeKWC5DashlaneSecureData)(e,o,r,t),a=(0,s.convertKw5ToTransportableData)(n);return(0,i.bufferToBase64)(a)}))}))})))).catch((e=>(function(e,t){const r=new Error(`${e}: ${t}`);throw(0,n.sendExceptionLog)({error:r}),o.Debugger.log(r),r}("[makeKeyBasedCrypto] - Error while encrypting data.",e),null))),decrypt:e=>Promise.resolve().then((()=>{const o=(0,i.base64ToBuffer)(e);return(0,a.hashAndSplitKey)(r).then((e=>{const r=(0,s.parseDashlaneKw5SecureData)(new Uint8Array(o)),n=(0,i.concatBuffers)(r.iv,r.secured);return(0,c.signHashHmacSHA256)({key:e.hmac,data:n}).then((o=>{if((0,i.bufferToBase64)(o)!==(0,i.bufferToBase64)(r.hash))throw new Error(t.DATA_TAMPERED_ERROR);return(0,c.decryptAES256)({key:e.aes,iv:r.iv,encryptedData:r.secured})}))}))})),prepareCrypto:()=>Promise.resolve(),readCryptoPayload:e=>{const t=(0,i.base64ToBuffer)(e);return(0,s.parseDashlaneKw5SecureData)(new Uint8Array(t)).version}}}},91301:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CRYPTO_NODERIVATION_HMAC64=void 0,t.CRYPTO_NODERIVATION_HMAC64="$1$noderivation$aes256$cbchmac64$16$"},56668:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.prepareCrypto=t.deflatedUtf8ToUtf16=t.utf16ToDeflatedUtf8=t.inflateUtf16=t.deflateUtf16=t.cipherDashlaneSecureData=t.decipherDashlaneSecureData=t.makeCryptoCenterService=t.PBKDF2_DEFAULT_PAYLOAD=t.ARGON2_DEFAULT_PAYLOAD=void 0;const o=r(93347),n=r(62802),i=r(16038),a=r(3678),s=r(65675);Object.defineProperty(t,"ARGON2_DEFAULT_PAYLOAD",{enumerable:!0,get:function(){return s.ARGON2_DEFAULT_PAYLOAD}}),Object.defineProperty(t,"PBKDF2_DEFAULT_PAYLOAD",{enumerable:!0,get:function(){return s.PBKDF2_DEFAULT_PAYLOAD}});const c=r(69530),u=r(46445),d=r(55623),l=r(56584),p=r(83570),S=r(95623),g=r(16356),E=r(27517);function y(e,t,r){const o=t+r;return(0,s.isCryptoConfigKWC3)(e.derivation)?(0,i.str2ab)(o):(0,i.utf8ToBase64Buffer)(o)}t.makeCryptoCenterService=function(e,r,o,n){const a=(0,p.makeGetDerivateKeyWithCacheAndQueue)(),c=e.raw,u=(0,i.str2ab)(r+c);return{isKey:(e,t)=>e+t===r+c,decrypt:(e,o={})=>(0,t.decipherDashlaneSecureData)(e,c,r,a,o),encrypt:(e,i={})=>{const{cryptoConfig:s}=i,u=s||n,d={...i,cryptoConfig:u};return(0,t.cipherDashlaneSecureData)(c,r,e,o,a,d)},prepareCrypto:()=>f(o,u,a,n),readCryptoPayload:e=>(0,s.readCryptoPayload)(e)}};t.decipherDashlaneSecureData=async(e,t,r,o,n={})=>{const{forceKeyKWC5:a,forceSalt:u}=n,d=(0,i.base64ToBuffer)(e),l=(0,s.parseCipheredData)(new Uint8Array(d)),p=l.cryptoConfig;let S,g;if(((0,s.isDashlaneSecureDataFlexible)(l)||(0,s.isDashlaneSecureDataKWC3)(l))&&(S=u||l.salt),(0,s.isDashlaneSecureDataKWC5)(l)&&a)g=a;else if((0,s.isNoDerivation)(p.derivation))g=(0,i.str2ab)(t);else{const e=y(p,r,t);g=await o(e,S,p.derivation)}const E=await async function(e,t,r){return"evpByteToKey"===e.cryptoConfig.ciphering.options.ivGeneration.method?_(e.cryptoConfig,t,r):(0,s.isDashlaneSecureDataFlexible)(e)||(0,s.isDashlaneSecureDataKWC5)(e)?e.iv:void 0}(l,S,g),{signatureKey:T,cipheringKey:v}=await A(l.cryptoConfig,g);return await m(l,T,E),await(0,c.decryptAES256)({key:v,iv:E,encryptedData:l.cipheredContent})};const _=async(e,t,r)=>{const o={derivedKey:r,salt:t,keyLength:32,ivLength:e.ciphering.options.ivLength};return(0,a.evpBytesToKey)(o)},A=async(e,t)=>{if("skip"===e.signature.method)return{signatureKey:new ArrayBuffer(0),cipheringKey:t};const r="hmac64"===e.signature.method?t:await(0,u.computeHashSha512)(t);if(64!==r.byteLength)throw new Error(`[cryptoCenter][prepareKeys] - cryptoKey's length must be 64B but is ${r.byteLength}B`);return{cipheringKey:(0,i.getSubDataByteArray)(new Uint8Array(r),0,r.byteLength/2).buffer,signatureKey:(0,i.getSubDataByteArray)(new Uint8Array(r),r.byteLength/2,r.byteLength).buffer}},m=(e,t,r)=>{if("skip"===e.cryptoConfig.signature.method)return Promise.resolve();const o=(0,i.concatBuffers)(r,e.cipheredContent),n=e;return(0,c.signHashHmacSHA256)({key:t,data:o}).then((e=>{if((0,i.bufferToBase64)(e)!==(0,i.bufferToBase64)(n.hash))throw new Error("[decipherFlexibleMarker] Data are corrupted: HMAC signature cannot be verified")}))};t.cipherDashlaneSecureData=async(e,t,r,o,n,a={})=>{const{cryptoConfig:u,forceSalt:l,forceIv:p}=a,S=u||(0,s.getCryptoConfig)(o);let g,E;if((0,s.isNoDerivation)(S.derivation))g=(0,i.str2ab)(e);else{E=l||h(o,S.derivation);const r=y(S,t,e);g=await n(r,E,S.derivation)}const m=p||await async function(e,t,r){const o=e.ciphering.options.ivGeneration.method;if("evpByteToKey"===o)return _(e,t,r);return(0,d.getRandomValues)(e.ciphering.options.ivLength)}(S,E,g),{signatureKey:f,cipheringKey:D}=await A(S,g),O=await(0,c.encryptAES256)({key:D,iv:m,clearData:r}),P=await T(O,S,f,m);return v(E,m,P,O,S)};t.deflateUtf16=e=>o.deflate(e,{level:7});t.inflateUtf16=e=>{const t=new Uint8Array(e);return o.inflate(t,{to:"string"})};t.utf16ToDeflatedUtf8=(e,t={})=>{const{skipDeflate:r,skipUtf8Encoding:o}=t,n=o?e:(0,i.utf8ChunkEncode)(e),a=(0,i.str2ab)(n);return r?a:(0,i.addQtCompressHeader)((0,i.deflateBuffer)(a))};t.deflatedUtf8ToUtf16=(e,t={})=>{const{skipUtf8Decoding:r,skipInflate:a,unescapeXml:s}=t,c=new Uint8Array(e),u=a?c:(e=>{const t=(0,i.removeQtCompressionHeader)(e),r=Math.pow(2,14)-1,a=new o.Inflate({chunkSize:r});if(a.push(t,n.Z_FINISH),a.err)throw new Error(`[Crypto] - postTreatData: unable to uncompress data - ${a.msg} (code ${a.err})`);return a.result})(c);let d=(0,i.uint8ArrayToText)(u);if(s&&(d=decodeURI(d)),!r)try{d=(0,i.utf8ChunkDecode)(d)}catch(e){S.Debugger.log("Cannot utf8.decode "+e)}return d};const T=(e,t,r,o)=>{if("skip"===t.signature.method)return Promise.resolve().then((()=>new ArrayBuffer(0)));const n=(0,i.concatBuffers)(o,e);return(0,c.signHashHmacSHA256)({key:r,data:n})},v=(e,t,r,o,n)=>{if((0,s.isCryptoConfigKWC3)(n.derivation)){const t=(0,l.convertDashlaneSecureDataKWC3ToTransportableData)({encryptedData:o,salt:e,version:"KWC3"});return(0,i.bufferToBase64)(t)}const a={salt:e,iv:t,hash:r,cipheredContent:o,cryptoConfig:n},c=(0,s.convertDashlaneSecureDataFlexibleToTransportableData)(a);return(0,i.bufferToBase64)(c)};async function f(e,t,r,o){const n=o??(0,s.getCryptoConfig)(e),i=n.derivation;if("noderivation"===i.method)return;const a=h(e,n.derivation);await r(t,a,i)}function h(e,t){return(0,s.isCryptoConfigKWC3)(t)?function(e){if(e.getUserSession().cryptoKwc3FixedSalt)return(0,i.base64ToBuffer)(e.getUserSession().cryptoKwc3FixedSalt);const t=(0,d.getRandomValues)(32),r=(0,i.bufferToBase64)(t);return e.dispatch((0,g.updateCryptoKwc3FixedSalt)(r)),t}(e):function(e){if(e.getPersonalSettings().CryptoFixedSalt)return(0,i.base64ToBuffer)(e.getPersonalSettings().CryptoFixedSalt);const t=(0,d.getRandomValues)(16),r={CryptoFixedSalt:(0,i.bufferToBase64)(t)};return e.dispatch((0,E.editPersonalSettings)(r)),t}(e)}t.prepareCrypto=f},27993:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeKWC5DashlaneSecureData=t.generateIV=t.parseDashlaneKw5SecureData=t.convertKw5ToTransportableData=void 0;const o=r(55623),n=r(16038);t.convertKw5ToTransportableData=e=>{let t=new ArrayBuffer(32);if("KWC5"!==e.version)throw new Error("Version must be KWC5");if(null===e.hash)throw new Error("hmacSha2 from DashlaneSecureData is null");if(null===e.iv)throw new Error("iv from DashlaneSecureData is null");e.iv&&(t=(0,n.concatBuffers)(e.iv,(0,o.getRandomValues)(16)));const r=(0,n.utf8ToBase64Buffer)(e.version);return(0,n.concatBuffers)(t,r,e.hash,e.secured)};t.parseDashlaneKw5SecureData=e=>{if(e.byteLength<36)throw new Error(`Data length should be at least 36 long but was ${e.byteLength}`);let t=0;const r=(0,n.getSubDataByteArray)(e,t,16).buffer;t+=32;const o=(0,n.getSubDataByteArray)(e,t,t+4),i=(0,n.uint8ArrayToText)(o);if("KWC5"!==i)throw new Error("Version must be KWC5");t+=4;const a=(0,n.getSubDataByteArray)(e,t,t+32).buffer;t+=32;return{iv:r,version:i,hash:a,secured:(0,n.getSubDataByteArray)(e,t,e.byteLength).buffer}};t.generateIV=()=>(0,o.getRandomValues)(16);t.makeKWC5DashlaneSecureData=(e,t,r,o)=>({version:"KWC5",clearData:e,secured:t,iv:r,hash:o})},65675:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PBKDF2_DEFAULT_PAYLOAD=t.ARGON2_DEFAULT_PAYLOAD=t.KWC3_DEFAULT_PAYLOAD=t.getUserCryptoPayload=t.getCryptoUserPayload=t.getCryptoConfig=t.makeFlexibleMarkerCryptoConfig=t.makeFlexibleMarkerPbkdf2Config=t.makeFlexibleMarkerArgon2dConfig=t.makeKWC3CryptoConfig=t.convertDashlaneSecureDataFlexibleToTransportableData=t.makeFlexibleMarkerPayloadBuffer=t.makeFlexibleMarkerPayloadString=t.makeFlexibleCryptoConfig=t.readCryptoPayload=t.parseCipheredData=t.getFlexibleSecureData=t.getLegacySecureData=t.getLegacyMarker=t.getLegacyCryptoConfig=t.parsePayload=t.getSignatureConfig=t.getCipheringConfiguration=t.getDerivationConfiguration=t.getPbkdf2DerivationConfig=t.getArgon2DerivationConfig=t.extractNextPayloadComponent=t.isDashlaneSecureDataFlexible=t.isDashlaneSecureDataKWC5=t.isDashlaneSecureDataKWC3=t.DashlaneCipherVersion=t.isSupportedAESMode=t.isSupportedDerivationMethod=t.isCryptoConfigKWC3=t.isNoDerivation=t.isArgon2Derivation=t.isPbkdf2Derivation=void 0;const o=r(16516),n=r(50415),i=r(16038);function a(e){return"pbkdf2"===e.method}function s(e){return"noderivation"===e.method||"skip"===e.method}function c(e){return Boolean(["argon2d","pbkdf2","noderivation","skip"].find((t=>t===e)))}function u(e){return Boolean(["cbchmac","cbchmac64","cbc","gcm"].find((t=>t===e)))}t.isPbkdf2Derivation=a,t.isArgon2Derivation=function(e){return"argon2d"===e.method},t.isNoDerivation=s,t.isCryptoConfigKWC3=function(e){return a(e)&&10204===e.iterations&&"sha1"===e.hashMethod},t.isSupportedDerivationMethod=c,t.isSupportedAESMode=u,t.DashlaneCipherVersion=(0,n.Enum)("KWC3","KWC5");t.isDashlaneSecureDataKWC3=e=>e.marker===t.DashlaneCipherVersion.KWC3;t.isDashlaneSecureDataKWC5=e=>e.marker===t.DashlaneCipherVersion.KWC5;t.isDashlaneSecureDataFlexible=e=>void 0!==e.iv;t.extractNextPayloadComponent=e=>{if(null===e)return"";let t=e;t.startsWith("$")&&(t=t.substring(1,e.length));return t.substring(0,t.indexOf("$"))};t.getArgon2DerivationConfig=e=>{let r=0;const o={};if(o.saltLength=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.saltLength.toString().length+1,o.t_cost=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.t_cost.toString().length+1,o.m_cost=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.m_cost.toString().length+1,o.parallelism=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.parallelism.toString().length+1,isNaN(o.saltLength)||0===o.saltLength||isNaN(o.t_cost)||0===o.t_cost||isNaN(o.m_cost)||0===o.m_cost||isNaN(o.parallelism)||0===o.parallelism)throw new Error("Wrong parameters in payload");return o};t.getPbkdf2DerivationConfig=e=>{let r=0;const o={};if(o.saltLength=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.saltLength.toString().length+1,o.iterations=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.iterations.toString().length+1,o.hashMethod=String((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.hashMethod.length+1,isNaN(o.saltLength)||isNaN(o.iterations))throw new Error("Wrong parameters in payload");return o};t.getDerivationConfiguration=e=>{let r=0,o={};const n=String((0,t.extractNextPayloadComponent)(e.substring(r,e.length)));if(!c(n))throw new Error("Derivation method not supported");if(o.method=n,"noderivation"===n||"skip"===n)return o;if(r+=o.method.length+1,"argon2d"===o.method){const n=(0,t.getArgon2DerivationConfig)(e.substring(r,e.length));o={...o,...n}}if("pbkdf2"===o.method){const n=(0,t.getPbkdf2DerivationConfig)(e.substring(r,e.length));o={...o,...n}}return o};t.getCipheringConfiguration=e=>{const r={options:{}};let o=0;if(r.method=String((0,t.extractNextPayloadComponent)(e.substring(o,e.length))),o+=r.method.length+1,"aes256"!==r.method)throw new Error(`[getCipheringConfiguration]: Wrong ciphering method expected "aes256" but get ${r.method}`);{const n=String((0,t.extractNextPayloadComponent)(e.substring(o,e.length)));if(!u(n))throw new Error("[getCipheringConfiguration]: unsupported AES mode");if(r.options.mode=n,o+=r.options.mode.length+1,r.options.ivLength=Number((0,t.extractNextPayloadComponent)(e.substring(o,e.length))),isNaN(r.options.ivLength)||0===r.options.ivLength)throw new Error("[getCipheringConfiguration]: Wrong parameters in payload")}return r};t.getSignatureConfig=e=>{const t={method:"skip"};return"cbchmac"===e&&(t.method="hmac"),"cbchmac64"===e&&(t.method="hmac64"),t};t.parsePayload=e=>{if(null===e)throw new Error("parsePayload: No payload to parse");if(e.startsWith("$")){let r=0;const n=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length)));if(1!==n)throw new Error(`parsePayload: version should be 1 but is ${n}`);r+=n.toString().length+1;const i=(0,t.getDerivationConfiguration)(e.substring(r,e.length)),a=(0,o.reduce)(((e,t)=>e+(`${t}`.length+1)));r=a(r,(0,o.values)(i));const s=(0,t.getCipheringConfiguration)(e.substring(r,e.length));r+=String(s.method).length+1,r=a(r,(0,o.values)(s.options));const c={method:"data"};return{cryptoConfig:{derivation:i,signature:(0,t.getSignatureConfig)(s.options.mode),ciphering:{method:s.method,options:{...s.options,ivGeneration:c}}},payloadLength:r+1}}throw new Error("parsePayload: Unable to parse payload")};t.getLegacyCryptoConfig=e=>{if("KWC3"===e)return{derivation:{method:"pbkdf2",saltLength:32,iterations:10204,hashMethod:"sha1"},signature:{method:"skip"},ciphering:{method:"aes256",options:{mode:"cbc",ivLength:16,ivGeneration:{method:"evpByteToKey"}}}};if("KWC5"===e)return{derivation:{method:"skip"},signature:{method:"hmac"},ciphering:{method:"aes256",options:{mode:"cbchmac",ivLength:16,ivGeneration:{method:"data"}}}};throw new Error("Wrong marker")};t.getLegacyMarker=e=>{const r=(0,i.getSubDataByteArray)(e,32,36),o=(0,i.uint8ArrayToText)(r);return o===t.DashlaneCipherVersion.KWC3||o===t.DashlaneCipherVersion.KWC5?o:null};t.getLegacySecureData=(e,r)=>{if(e===t.DashlaneCipherVersion.KWC3){return{marker:e,salt:(0,i.getSubDataByteArray)(r,0,32).buffer,cipheredContent:(0,i.getSubDataByteArray)(r,36,r.byteLength).buffer,cryptoConfig:(0,t.getLegacyCryptoConfig)(e)}}if(e===t.DashlaneCipherVersion.KWC5){const o=16,n=32;return{marker:e,iv:(0,i.getSubDataByteArray)(r,0,o).buffer,hash:(0,i.getSubDataByteArray)(r,36,36+n).buffer,cipheredContent:(0,i.getSubDataByteArray)(r,36+n,r.byteLength).buffer,cryptoConfig:(0,t.getLegacyCryptoConfig)(e)}}throw new Error("Wrong marker")};t.getFlexibleSecureData=e=>{const r=(0,i.uint8ArrayToText)(e),{cryptoConfig:o,payloadLength:n}=(0,t.parsePayload)(r);let a=n;const c=s(o.derivation)?0:o.derivation.saltLength,u=o.ciphering.options.ivLength,d=(0,i.getSubDataByteArray)(e,a,a+c).buffer;a+=c;const l=(0,i.getSubDataByteArray)(e,a,a+u).buffer;a+=u;const p=(0,i.getSubDataByteArray)(e,a,a+32).buffer;a+=32;return{salt:d,iv:l,hash:p,cipheredContent:(0,i.getSubDataByteArray)(e,a,e.length).buffer,cryptoConfig:o}};t.parseCipheredData=e=>{const r=(0,t.getLegacyMarker)(e);if(r)return(0,t.getLegacySecureData)(r,e);if("$"===(0,i.uint8ArrayToText)((0,i.getSubDataByteArray)(e,0,1)))return(0,t.getFlexibleSecureData)(e);throw new Error("Unable to parse ciphered data")};t.readCryptoPayload=e=>{const r=(0,i.base64ToBuffer)(e),o=new Uint8Array(r),n=(0,t.getLegacyMarker)(o);if(n)return n;const a=(0,i.uint8ArrayToText)(o),{payloadLength:s}=(0,t.parsePayload)(a);return a.substr(0,s)};t.makeFlexibleCryptoConfig=e=>e.cryptoConfig;t.makeFlexibleMarkerPayloadString=e=>{let t="$1";const r=(0,o.reduce)(((e,t)=>"string"==typeof t||"number"==typeof t?e+`$${String(t)}`:e));t=r(t,(0,o.values)(e.derivation)),t=r(t,[e.ciphering.method]);return t=r(t,(0,o.values)((0,o.omit)(["ivGeneration"],e.ciphering.options))),t+="$",t};t.makeFlexibleMarkerPayloadBuffer=e=>{const r=(0,t.makeFlexibleMarkerPayloadString)(e);return(0,i.str2ab)(r)};function d(){return{derivation:{method:"pbkdf2",saltLength:32,iterations:10204,hashMethod:"sha1"},signature:{method:"skip"},ciphering:{method:"aes256",options:{mode:"cbc",ivLength:16,ivGeneration:{method:"evpByteToKey"}}}}}function l(){return{method:"argon2d",saltLength:16,t_cost:3,m_cost:32768,parallelism:2}}function p(){return{method:"pbkdf2",saltLength:16,iterations:2e5,hashMethod:"sha256"}}function S(e){return{derivation:"argon2d"===e?{method:"argon2d",saltLength:16,t_cost:3,m_cost:32768,parallelism:2}:{method:"pbkdf2",saltLength:16,iterations:2e5,hashMethod:"sha256"},signature:{method:"hmac"},ciphering:{method:"aes256",options:{mode:"cbchmac",ivLength:16,ivGeneration:{method:"data"}}}}}function g(e){return e.getPersonalSettings().CryptoUserPayload||t.ARGON2_DEFAULT_PAYLOAD}t.convertDashlaneSecureDataFlexibleToTransportableData=e=>{const{cipheredContent:r,cryptoConfig:o,hash:n,iv:a,salt:c}=e,u=(0,t.makeFlexibleMarkerPayloadBuffer)(o);return s(o.derivation)?(0,i.concatBuffers)(u,a,n,r):(0,i.concatBuffers)(u,c,a,n,r)},t.makeKWC3CryptoConfig=d,t.makeFlexibleMarkerArgon2dConfig=l,t.makeFlexibleMarkerPbkdf2Config=p,t.makeFlexibleMarkerCryptoConfig=S,t.getCryptoConfig=function(e){const r=g(e);return(0,o.isNil)(r)?S("argon2d"):"KWC3"===r?{derivation:{method:"pbkdf2",saltLength:32,iterations:10204,hashMethod:"sha1"},signature:{method:"skip"},ciphering:{method:"aes256",options:{mode:"cbc",ivLength:16,ivGeneration:{method:"evpByteToKey"}}}}:(0,t.parsePayload)(r).cryptoConfig},t.getCryptoUserPayload=g;t.getUserCryptoPayload=e=>{if("pbkdf2_kwc3"===e)return{CryptoUserPayload:t.KWC3_DEFAULT_PAYLOAD};const r="argon2"===e?"argon2d":"pbkdf2";return{CryptoUserPayload:(0,o.compose)(i.base64BufferToUtf8,t.makeFlexibleMarkerPayloadBuffer,S)(r)}},t.KWC3_DEFAULT_PAYLOAD="KWC3",t.ARGON2_DEFAULT_PAYLOAD="$1$argon2d$16$3$32768$2$aes256$cbchmac$16$",t.PBKDF2_DEFAULT_PAYLOAD="$1$pbkdf2$16$200000$sha256$aes256$cbchmac$16$"},15215:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeCanonicalRequest=void 0;const o=r(16516);t.makeCanonicalRequest=e=>{const t=e=>e.toLowerCase(),r=n(e.headers),i=e.headersToSign?o.pick(o.map(t,o.values(e.headersToSign)),o.mapObjIndexed(t,r)):r,d=a(e.uri),l=s(e.query),p=c(i),S=u(i);return{canonicalRequest:[e.method,d,l,p,S,e.hashedPayload].join("\n"),signedHeaders:S}};const n=e=>o.pipe(o.toPairs,o.map((([e,t])=>[e.toLowerCase(),t])),d)(e),i=e=>e.replace(/[^A-Za-z0-9_.~\-]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())),a=e=>(e=>e.split("/").map((e=>i(e))).join("/"))(e),s=e=>o.pipe((e=>o.toPairs(e)),o.sortBy((e=>e[0])),o.map((([e,t])=>((e,t)=>{const r=i(e),n=Array.isArray(t)?t:[t];return o.pipe(o.map((e=>i(e))),o.map((e=>[r,e])),o.sortBy(o.reduce(o.concat,"")))(n)})(e,t))),o.unnest,o.map((([e,t])=>`${e}=${t}`)),o.join("&"))(e),c=e=>o.pipe((e=>o.toPairs(e)),o.sortBy((e=>e[0].toLowerCase())),o.map((([e,t])=>((e,t)=>e.toLowerCase()+":"+t.trim().replace(/\s+/g," ")+"\n")(e,t))),o.join(""))(e),u=e=>o.pipe(o.keys,o.map((e=>e.toLowerCase())),o.sortBy(o.identity),o.join(";"))(e),d=e=>{const t={};for(let r=0;r<e.length;++r)t[e[r][0]]=e[r][1];return t}},51907:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getApiCredentials=void 0;const o=r(56915),n=r(17825),i=r(45956);t.getApiCredentials=function(e,t){if(t.authenticationType===i.ApiAuthType.None)return{type:t.authenticationType};const r={appKeys:(0,o.appKeysSelector)(e)};switch(t.authenticationType){case i.ApiAuthType.App:return{type:i.ApiAuthType.App,...r};case i.ApiAuthType.UserDevice:return{type:i.ApiAuthType.UserDevice,...r,login:t.login,deviceKeys:(0,o.deviceKeysSelector)(e)};case i.ApiAuthType.Session:return{type:i.ApiAuthType.Session,...r,login:t.login,sessionKeys:(0,o.sessionKeysSelector)(e),deviceId:(0,o.getDeviceIdSelector)(e,t.login)};case i.ApiAuthType.TeamDevice:return{type:i.ApiAuthType.TeamDevice,...r,teamUuid:t.teamUuid,deviceKeys:(0,o.deviceKeysSelector)(e)};default:(0,n.assertUnreachable)(t.authenticationType)}}},90338:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.prepareApiEndpoint=void 0;const o=r(45956),n=r(55730);t.prepareApiEndpoint=function(e){const{authenticationType:t,endpoint:r,group:i,method:a,version:s,accept:c,responseType:u}=e,d=`/${o.ApiVersion[s]}/${i}/${r}`;return(0,n.getMakeApiRequest)(d,t,a,u??"json",c)}},27054:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeSafeDeviceName=t.makeSafeLanguage=t.makeSafeCountry=void 0;const r="ZZ";t.makeSafeCountry=function(e){return!e||e.length<2||e.length>5?r:e};const o="und";t.makeSafeLanguage=function(e){return!e||e.length<2||e.length>5?o:e};const n="Device";t.makeSafeDeviceName=function(e){return e||n}},2978:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCode=void 0;const o=r(45956);t.getCode=(e,t)=>{const r=t.indexOf(e);return r<0?o.UnknownError:t[r]}},84101:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(27054),t),n(r(85188),t),n(r(2978),t)},85188:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isExtraDeviceTokenValid=t.isEmailTokenValid=void 0,t.isEmailTokenValid=function(e){return/^\d{6}$/.test(e)},t.isExtraDeviceTokenValid=function(e){return/^[A-Za-z0-9+/]{64}$/.test(e)}},46298:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownError=t.isApiErrorOfType=t.isApiError=void 0;var i=r(45956);Object.defineProperty(t,"isApiError",{enumerable:!0,get:function(){return i.isApiError}}),Object.defineProperty(t,"isApiErrorOfType",{enumerable:!0,get:function(){return i.isApiErrorOfType}}),Object.defineProperty(t,"UnknownError",{enumerable:!0,get:function(){return i.UnknownError}}),n(r(91503),t),n(r(84101),t)},55730:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getApiClientAgentHeader=t.validateStatus=t.makeApiResponse=t.getMethodParams=t.getAuthParams=t.getMakeApiRequest=void 0;const o=r(53),n=r(17825),i=r(86056),a=r(14656),s=r(56915),c=r(45956),u=r(78577),d=r(51907),l=r(48749),p=r(45800);function S(e,{login:t,teamUuid:r}){switch(e){case c.ApiAuthType.App:case c.ApiAuthType.None:return{authenticationType:e};case c.ApiAuthType.UserDevice:case c.ApiAuthType.Session:return{authenticationType:e,login:t};case c.ApiAuthType.TeamDevice:return{authenticationType:e,teamUuid:r};default:(0,n.assertUnreachable)(e)}}function g(e,t){switch(e){case c.ApiRequestMethod.GET:return{method:e};case c.ApiRequestMethod.POST:return{method:e,payload:t};default:(0,n.assertUnreachable)(e)}}function E(e){const t=function({errors:e}){if(Array.isArray(e)&&e.length>0)return e[0];return null}(e);return t||function(e){return{code:"success",data:e.data?null:e,...e.data}}(e)}t.getMakeApiRequest=function(e,r,_,A,m){return async(T,v)=>{const f={login:"",teamUuid:"",payload:{},...v||{}},h=g(_,f.payload),D=S(r,{login:f.login,teamUuid:f.teamUuid}),O=(0,d.getApiCredentials)(T.getState(),D),P={Accept:m??"application/json","Content-Type":"application/json; charset=UTF-8","dashlane-client-agent":y((0,i.getPlatformInfo)())},I={...P,Host:new URL(l.config.DASHLANE_API_HOST_WITH_SCHEME).hostname},C=await async function(e,t,r,i,a){if(r.type===c.ApiAuthType.None)return{};const d=(0,s.dashlaneServerDeltaTimestampSelector)(e.getState())||0,l=Math.round((0,o.getUnixTimestamp)()-d),p=function(e){switch(e.method){case c.ApiRequestMethod.GET:return"";case c.ApiRequestMethod.POST:return JSON.stringify(e.payload);default:(0,n.assertUnreachable)(e)}}(a),{method:S}=a,g={pathname:t,method:S,rawBody:p,headers:i},E=await(0,u.signRequest)({request:g,timestamp:l,credentials:r});return{Authorization:E}}(T,e,O,I,h),R={...P,...C,...(0,p.getCloudflareHeaders)()},L=`${l.config.DASHLANE_API_HOST_WITH_SCHEME}${e}`,{data:b}=await function(e,r,o,i){const s={headers:o,validateStatus:t.validateStatus,responseType:i};switch(e.method){case c.ApiRequestMethod.GET:return(0,a.get)(r,s);case c.ApiRequestMethod.POST:return(0,a.post)(r,e.payload,s);default:(0,n.assertUnreachable)(e)}}(h,L,R,A);return E(b)}},t.getAuthParams=S,t.getMethodParams=g,t.makeApiResponse=E;function y(e){return JSON.stringify({platform:e.platformName,version:e.appVersion})}t.validateStatus=e=>e>=100&&e<=500,t.getApiClientAgentHeader=y},41075:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAndEvaluateForUser=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.abtesting,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetAndEvaluateForUser"},a=(0,n.prepareApiEndpoint)(i);t.getAndEvaluateForUser=async function(e,t,r){return a(e,{login:t,payload:r})}},14651:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountInfo=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.account,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"AccountInfo"},a=(0,o.prepareApiEndpoint)(i);t.accountInfo=async function(e,t){return a(e,{login:t,payload:{}})}},45468:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createUserWithSSO=void 0;const o=r(90338),n=r(45956),i={authenticationType:n.ApiAuthType.App,endpoint:"CreateUserWithSSO",group:n.ApiEndpointGroups.account,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},a=(0,o.prepareApiEndpoint)(i);t.createUserWithSSO=async function(e,t){return a(e,{payload:t})}},55710:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createUser=t.MissingContactPhone=void 0;const o=r(90338),n=r(45956);t.MissingContactPhone="missing_contact_phone";const i={group:n.ApiEndpointGroups.account,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"CreateUser"},a=(0,o.prepareApiEndpoint)(i);t.createUser=async function(e,t){return a(e,{payload:t})}},25011:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPremiumStatus=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.premium,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetPremiumStatus"},a=(0,o.prepareApiEndpoint)(i);t.getPremiumStatus=function(e,t){return a(e,{login:t,payload:{}}).then((e=>e))}},31375:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSubscriptionInformation=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.premium,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetSubscriptionInfo"},a=(0,o.prepareApiEndpoint)(i);t.getSubscriptionInformation=function(e,t){return a(e,{login:t,payload:{}}).then((e=>e))}},97421:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestAccountCreation=t.AccountExistsStatus=void 0;const o=r(90338),n=r(45956);!function(e){e.AccountExists="yes",e.AccountDoesntExist="no",e.AccountDoesntExistInvalid="no_invalid",e.AccountDoesntExistUnlikely="no_unlikely"}(t.AccountExistsStatus||(t.AccountExistsStatus={}));const i={group:n.ApiEndpointGroups.account,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"RequestAccountCreation"},a=(0,o.prepareApiEndpoint)(i);t.requestAccountCreation=function(e,t){return a(e,{payload:t})}},63339:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateContactInfo=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.account,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"UpdateContactInfo"},a=(0,o.prepareApiEndpoint)(i);t.updateContactInfo=async function(e,t,r){return a(e,{login:t,payload:r})}},34957:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExistingSecureRemembermeSession=t.MismatchedSessionSecurity=t.SessionNotFound=t.AuthenticatorNotAvailableOnDevice=t.AuthenticationTypeNotSupported=t.AuthenticatorNotRegistered=t.AssertionRejected=t.AttestationRejected=t.ChallengeVerificationFailed=t.ChallengeExpired=t.ChallengeNotFound=t.UserHasNoActiveAuthenticator=t.FailedToContactAuthenticatorDevice=t.VerificationMethodDisabled=t.VerificationFailed=t.ClientVersionDoesNotSupportSSOMigration=t.SSOBlocked=t.UserNotFound=t.U2fBadRequest=t.InvalidOTPBlocked=t.InvalidOTPAlreadyUsed=t.DeviceNotFound=t.DeviceDeactivated=void 0,t.DeviceDeactivated="device_deactivated",t.DeviceNotFound="device_not_found",t.InvalidOTPAlreadyUsed="invalid_otp_already_used",t.InvalidOTPBlocked="invalid_otp_blocked",t.U2fBadRequest="u2f_bad_request",t.UserNotFound="user_not_found",t.SSOBlocked="SSO_BLOCKED",t.ClientVersionDoesNotSupportSSOMigration="CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION",t.VerificationFailed="verification_failed",t.VerificationMethodDisabled="verification_method_disabled",t.FailedToContactAuthenticatorDevice="FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE",t.UserHasNoActiveAuthenticator="USER_HAS_NO_ACTIVE_AUTHENTICATOR",t.ChallengeNotFound="CHALLENGE_NOT_FOUND",t.ChallengeExpired="CHALLENGE_EXPIRED",t.ChallengeVerificationFailed="CHALLENGE_VERIFICATION_FAILED",t.AttestationRejected="ATTESTATION_REJECTED",t.AssertionRejected="ASSERTION_REJECTED",t.AuthenticatorNotRegistered="AUTHENTICATOR_NOT_REGISTERED",t.AuthenticationTypeNotSupported="AUTHENTICATION_TYPE_NOT_SUPPORTED",t.AuthenticatorNotAvailableOnDevice="AUTHENTICATOR_NOT_AVAILABLE_ON_DEVICE",t.SessionNotFound="SESSION_NOT_FOUND",t.MismatchedSessionSecurity="MISMATCHED_SESSION_SECURITY",t.ExistingSecureRemembermeSession="EXISTING_SECURE_REMEMBERME_SESSION"},8124:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeDeviceRegistrationWithAuthTicket=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"CompleteDeviceRegistrationWithAuthTicket"},a=(0,n.prepareApiEndpoint)(i);t.completeDeviceRegistrationWithAuthTicket=async function(e,t){return a(e,{payload:t})}},67747:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeExtraDeviceRegistrationWithToken=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"CompleteExtraDeviceRegistrationWithToken"},a=(0,n.prepareApiEndpoint)(i);t.completeExtraDeviceRegistrationWithToken=async function(e,t){return a(e,{payload:t})}},62712:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeLoginWithAuthTicket=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.App,endpoint:"CompleteLoginWithAuthTicket",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.completeLoginWithAuthTicket=async function(e,t){return a(e,{payload:t})}},13271:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeRememberMeOpenSession=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.Session,endpoint:"CompleteRememberMeOpenSession"},a=(0,n.prepareApiEndpoint)(i);t.completeRememberMeOpenSession=async function(e,t,r){return a(e,{login:t,payload:r})}},51837:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeRememberMeRegistration=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"CompleteRememberMeRegistration"},a=(0,n.prepareApiEndpoint)(i);t.completeRememberMeRegistration=async function(e,t,r){return a(e,{login:t,payload:r})}},34569:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeTotpActivation=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.UserDevice,endpoint:"CompleteTOTPActivation",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.completeTotpActivation=async function(e,t,r){return a(e,{login:t,payload:r})}},61054:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeWebAuthnAuthenticatorRegistration=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"CompleteWebAuthnAuthenticatorRegistration"},a=(0,n.prepareApiEndpoint)(i);t.completeWebAuthnAuthenticatorRegistration=async function(e,t,r){return a(e,{login:t,payload:r})}},8111:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateRememberMe=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateRememberMe"},a=(0,n.prepareApiEndpoint)(i);t.deactivateRememberMe=async function(e,t,r){return a(e,{login:t,payload:r})}},39446:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTotpVerification=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateTOTP",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.deactivateTotpVerification=async function(e,t,r){return a(e,{login:t,payload:r})}},36602:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateWebAuthnAuthenticator=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateWebAuthnAuthenticator"},a=(0,n.prepareApiEndpoint)(i);t.deactivateWebAuthnAuthenticator=async function(e,t,r){return a(e,{login:t,payload:r})}},32924:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAuthenticationTokenForCardUpdate=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"CreateTokenExtAuth"},a=(0,o.prepareApiEndpoint)(i);t.getAuthenticationTokenForCardUpdate=function(e,t,r){return a(e,{login:t,payload:r})}},60132:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAvailableWebAuthnAuthenticators=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.Session,endpoint:"GetAvailableWebAuthnAuthenticators"},a=(0,n.prepareApiEndpoint)(i);t.getAvailableWebAuthnAuthenticators=async function(e,t){return a(e,{login:t,payload:{}})}},12407:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMasterPasswordCipheringKey=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.Session,endpoint:"GetMasterPasswordCipheringKey"},a=(0,o.prepareApiEndpoint)(i);t.getMasterPasswordCipheringKey=async function(e,t){return a(e,{login:t,payload:{}})}},56736:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTokens=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.GET,authenticationType:n.ApiAuthType.App,endpoint:"GetTokens"},a=(0,o.prepareApiEndpoint)(i);t.getTokens=async function(e){return a(e)}},80585:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTwoFactorAuthenticationStatus=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"Get2FAStatus"},a=(0,o.prepareApiEndpoint)(i);t.getTwoFactorAuthenticationStatus=function(e,t){return a(e,{login:t,payload:{}})}},6862:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getU2FDevices=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetU2FDevices",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.getU2FDevices=async function(e,t){return a(e,{login:t,payload:{}})}},48974:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUnauthorizedProfiles=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"GetUnauthorizedProfiles"},a=(0,n.prepareApiEndpoint)(i);t.getUnauthorizedProfiles=async function(e,t){return a(e,{payload:t})}},97343:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserSSOInfo=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.TeamDevice,endpoint:"GetUserSSOInfo"},a=(0,n.prepareApiEndpoint)(i);t.getUserSSOInfo=async function(e,t){const{login:r,teamUuid:o,userServiceProviderKey:n}=t;return a(e,{login:r,teamUuid:o,payload:{login:r,userServiceProviderKey:n}})}},99850:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getWebAuthnAuthenticators=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetWebAuthnAuthenticators"},a=(0,n.prepareApiEndpoint)(i);t.getWebAuthnAuthenticators=async function(e,t){return a(e,{login:t,payload:{}})}},43339:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initRememberMasterPassword=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"InitRememberMasterPassword"},a=(0,o.prepareApiEndpoint)(i);t.initRememberMasterPassword=async function(e,t,r){return a(e,{login:t,payload:r})}},71336:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performDashlaneAuthenticatorVerification=t.verificationTimeoutError=void 0;const o=r(59821),n=r(45956),i=r(90338);t.verificationTimeoutError={code:o.VerificationTimeout,message:"The authentication request has timed out",type:o.BusinessError};const a={authenticationType:n.ApiAuthType.App,endpoint:"PerformDashlaneAuthenticatorVerification",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},s=(0,i.prepareApiEndpoint)(a);t.performDashlaneAuthenticatorVerification=async function(e,t){return s(e,{payload:t})}},87992:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performDuoPushVerification=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.App,endpoint:"PerformDuoPushVerification",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.performDuoPushVerification=async function(e,t){return a(e,{payload:t})}},4685:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performEmailTokenVerification=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.App,endpoint:"PerformEmailTokenVerification",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.performEmailTokenVerification=async function(e,t){return a(e,{payload:t})}},78876:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performSsoVerification=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.App,endpoint:"PerformSsoVerification",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.performSsoVerification=async function(e,t){return a(e,{payload:t})}},96425:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performTotpVerification=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.App,endpoint:"PerformTotpVerification",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.performTotpVerification=async function(e,t){return a(e,{payload:t})}},99289:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performU2FVerification=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.App,endpoint:"PerformU2FVerification",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.performU2FVerification=async function(e,t){return a(e,{payload:t})}},88077:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestDeviceRegistration=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"RequestDeviceRegistration"},a=(0,n.prepareApiEndpoint)(i);t.requestDeviceRegistration=async function(e,t){return a(e,{payload:t})}},58539:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestExternalDeviceRegistration=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"RequestExternalDeviceRegistration"},a=(0,o.prepareApiEndpoint)(i);t.requestExternalDeviceRegistration=async function(e,t){return a(e,{payload:t})}},1371:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestExtraDeviceRegistration=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"RequestExtraDeviceRegistration"},a=(0,n.prepareApiEndpoint)(i);t.requestExtraDeviceRegistration=async function(e,t){return a(e,{login:t,payload:{tokenType:"shortLived"}})}},9439:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestLogin=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"RequestLogin"},a=(0,n.prepareApiEndpoint)(i);t.requestLogin=async function(e,t){return a(e,{payload:t})}},51296:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestTOTPActivation=t.RequestTOTPActivationError=void 0;const o=r(45956),n=r(90338);!function(e){e.INTERNAL_ERROR="internal_error",e.CANNOT_SEED_FOR_USER_WITH_TOTP_ENABLED="cannot_seed_for_user_with_TOTP_enabled",e.OTP_FAILED="otp_failed",e.TOTP_TYPE_IS_NOT_SET_TO_EMAIL_TOKEN="totp_type_is_not_set_to_email_token",e.PHONE_VALIDATION_FAILED="phone_validation_failed"}(t.RequestTOTPActivationError||(t.RequestTOTPActivationError={}));const i={authenticationType:o.ApiAuthType.UserDevice,endpoint:"RequestTOTPActivation",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.requestTOTPActivation=async function(e,t,r){return a(e,{login:t,payload:r})}},48253:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeU2FAuthenticator=t.U2FAuthenticatorRemovalBusinessErrors=void 0;const o=r(90338),n=r(45956);!function(e){e.VERIFICATION_METHOD_INVALID="verification_method_invalid",e.INVALID_AUTH_TICKET="invalid_auth_ticket",e.NO_KEYHANDLE_FOUND="NO_KEYHANDLE_FOUND"}(t.U2FAuthenticatorRemovalBusinessErrors||(t.U2FAuthenticatorRemovalBusinessErrors={}));const i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"DeactivateU2FDevice"},a=(0,o.prepareApiEndpoint)(i);t.removeU2FAuthenticator=async function(e,t,r){return a(e,{login:t,payload:r})}},48730:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestWebauthnOpenSession=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.Session,endpoint:"RequestWebauthnOpenSession"},a=(0,n.prepareApiEndpoint)(i);t.requestWebauthnOpenSession=async function(e,t){return a(e,{login:t,payload:{}})}},24925:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestWebauthnRegistration=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"RequestWebauthnRegistration"},a=(0,n.prepareApiEndpoint)(i);t.requestWebauthnRegistration=async function(e,t){return a(e,{login:t,payload:{}})}},31197:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addPrivateBreach=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.dataleakQA,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"AddTestLeak"},a=(0,n.prepareApiEndpoint)(i);t.addPrivateBreach=async function(e,t){return a(e,{payload:{...t}})}},77074:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createOrUpdateDarkWebBreach=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.dataleakQA,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"SetTestDataBreach"},a=(0,n.prepareApiEndpoint)(i);t.createOrUpdateDarkWebBreach=async function(e,t){return a(e,{payload:{...t}})}},72579:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createPublicBreach=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.breachesQA,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"CreateTestBreach"},a=(0,n.prepareApiEndpoint)(i);t.createPublicBreach=async function(e,t){return a(e,{payload:t})}},72911:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSubscriptionTokens=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.dataleak,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"GetSubscriptionTokens"},a=(0,n.prepareApiEndpoint)(i);t.getSubscriptionTokens=async function(e){return a(e,{payload:{}})}},82512:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDarkWebInsightReport=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetDarkWebInsightsReportDetails"},a=(0,n.prepareApiEndpoint)(i);t.getDarkWebInsightReport=async function(e,t,r){return a(e,{login:t,payload:r})}},19667:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDarkWebInsightsSummaryRequest=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetDarkWebInsightsSummary"},a=(0,n.prepareApiEndpoint)(i);t.getDarkWebInsightsSummaryRequest=async function(e,t){return a(e,{login:t,payload:{}})}},91063:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateDevices=t.CLIENT_STILL_OVERFLOWING=t.PAIRING_GROUPS_NOT_FOUND=t.CLIENT_DEVICES_NOT_FOUND=void 0;const o=r(45956),n=r(90338);t.CLIENT_DEVICES_NOT_FOUND="CLIENT_DEVICES_NOT_FOUND",t.PAIRING_GROUPS_NOT_FOUND="PAIRING_GROUPS_NOT_FOUND",t.CLIENT_STILL_OVERFLOWING="CLIENT_STILL_OVERFLOWING";const i={group:o.ApiEndpointGroups.devices,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateDevices"},a=(0,n.prepareApiEndpoint)(i);t.deactivateDevices=async function(e,t,r){return a(e,{login:t,payload:r})}},18625:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listDevices=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.devices,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ListDevices"},a=(0,n.prepareApiEndpoint)(i);t.listDevices=async function(e,t){return a(e,{login:t,payload:{}})}},59821:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidTeamDeviceLogin=t.BasicConfigNotFound=t.DeactivatedTeamDevice=t.DeviceKeyNotFound=t.DeviceAccountMappingAlreadyExists=t.B2bSsoUserNotFound=t.NoFreeSlot=t.NotProposedNeitherAccepted=t.InvalidSsoToken=t.InvalidUser=t.DomainNotValidForTeam=t.TotpActiveOrNotSeeded=t.ConfigurationNotFound=t.TeamDeviceEncryptedConfigNotFound=t.InvalidTOTPStatus=t.VerificationMethodInvalid=t.InvalidAuthTicket=t.WrongPublicKey=t.VerificationTimeout=t.VerificationRequiresRequest=t.VerificationFailedTooManyTimes=t.UpdateOfVerificationMethodNotSupported=t.UnexpectedError=t.UnchangedPrivateKey=t.TwofaSettingSameAsCurrent=t.TwofaServerKeyProvidedIncorrectly=t.TwofaServerKeyNotProvided=t.TeamDoesNotExist=t.TemporaryDisabled=t.NoMpEncryptionKey=t.NotAdmin=t.NoSharingKeys=t.NothingToUpdate=t.NoExternalToken=t.MissingSettingsTransaction=t.InvalidSessionAccessKey=t.InvalidKey=t.InsufficientTier=t.ExternalTokenSignatureNotAvailableForPartner=t.Current2faSettingCannotBeChangedAtUpload=t.ConflictingUpload=t.AccountBlockedContactSupport=t.ServerError=t.RateLimitError=t.InvalidRequestError=t.InjectedError=t.BusinessError=void 0,t.BusinessError="business_error",t.InjectedError="injected_error",t.InvalidRequestError="invalid_request_error",t.RateLimitError="rate_limit_error",t.ServerError="server_error",t.AccountBlockedContactSupport="account_blocked_contact_support",t.ConflictingUpload="conflicting_upload",t.Current2faSettingCannotBeChangedAtUpload="current_2fa_setting_cannot_be_changed_at_upload",t.ExternalTokenSignatureNotAvailableForPartner="external_token_signature_not_available_for_partner",t.InsufficientTier="INSUFFICIENT_TIER",t.InvalidKey="invalid_key",t.InvalidSessionAccessKey="invalid_session_access_key",t.MissingSettingsTransaction="MISSING_SETTINGS_TRANSACTION",t.NoExternalToken="no_external_token",t.NothingToUpdate="NOTHING_TO_UPDATE",t.NoSharingKeys="NO_SHARING_KEYS",t.NotAdmin="NOT_ADMIN",t.NoMpEncryptionKey="no_mp_encryption_key",t.TemporaryDisabled="temporary_disabled",t.TeamDoesNotExist="TEAM_DOES_NOT_EXIST",t.TwofaServerKeyNotProvided="2fa_server_key_not_provided",t.TwofaServerKeyProvidedIncorrectly="2fa_server_key_provided_incorrectly",t.TwofaSettingSameAsCurrent="2fa_setting_same_as_current",t.UnchangedPrivateKey="UNCHANGED_PRIVATE_KEY",t.UnexpectedError="unexpected_error",t.UpdateOfVerificationMethodNotSupported="UPDATE_OF_VERIFICATION_METHOD_NOT_SUPPORTED",t.VerificationFailedTooManyTimes="verification_failed_too_many_times",t.VerificationRequiresRequest="verification_requires_request",t.VerificationTimeout="verification_timeout",t.WrongPublicKey="WRONG_PUBLIC_KEY",t.InvalidAuthTicket="invalid_auth_ticket",t.VerificationMethodInvalid="verification_method_invalid",t.InvalidTOTPStatus="invalid_totp_status",t.TeamDeviceEncryptedConfigNotFound="TEAM_DEVICE_CONFIGURATION_NOT_FOUND",t.ConfigurationNotFound="TEAM_DEVICE_CONFIGURATION_NOT_FOUND",t.TotpActiveOrNotSeeded="totp_active_or_not_seeded",t.DomainNotValidForTeam="DOMAIN_NOT_VALID_FOR_TEAM",t.InvalidUser="invalid_user",t.InvalidSsoToken="invalid_sso_token",t.NotProposedNeitherAccepted="not_proposed_neither_accepted",t.NoFreeSlot="no_free_slot",t.B2bSsoUserNotFound="B2B_SSO_USER_NOT_FOUND",t.DeviceAccountMappingAlreadyExists="DEVICE_ACCOUNT_MAPPING_ALREADY_EXISTS",t.DeviceKeyNotFound="DEVICE_KEY_NOT_FOUND",t.DeactivatedTeamDevice="DEACTIVATED_TEAM_DEVICE",t.BasicConfigNotFound="BASIC_CONFIGURATION_NOT_FOUND",t.InvalidTeamDeviceLogin="INVALID_TEAM_DEVICE_LOGIN"},4933:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeFamilyMemberErrors=t.leaveFamilyErrors=t.joinFamilyErrors=t.UserMustCancelPremiumPlusRenewalToDowngradeToFamily=t.UserNotMemberOfFamily=t.CannotRemoveFamilyAdmin=t.UserMustBeFamilyAdmin=t.FamilyHasBeenDiscontinued=t.UserSubscriptionIsUpForRenewal=t.JoinFamilyTokenNotFound=t.AlreadyJoinedThisFamily=t.CannotJoinMultipleFamilies=t.FamilyFull=t.BadLogin=void 0,t.BadLogin="BAD_LOGIN",t.FamilyFull="FAMILY_FULL",t.CannotJoinMultipleFamilies="CANNOT_JOIN_MULTIPLE_FAMILIES",t.AlreadyJoinedThisFamily="ALREADY_JOINED_THIS_FAMILY",t.JoinFamilyTokenNotFound="JOIN_FAMILY_TOKEN_NOT_FOUND",t.UserSubscriptionIsUpForRenewal="USER_SUBSCRIPTION_IS_UP_FOR_RENEWAL",t.FamilyHasBeenDiscontinued="FAMILY_HAS_BEEN_DISCONTINUED",t.UserMustBeFamilyAdmin="USER_MUST_BE_FAMILY_ADMIN",t.CannotRemoveFamilyAdmin="CANNOT_REMOVE_FAMILY_ADMIN",t.UserNotMemberOfFamily="USER_NOT_MEMBER_OF_FAMILY",t.UserMustCancelPremiumPlusRenewalToDowngradeToFamily="USER_MUST_CANCEL_PREMIUM_PLUS_RENEWAL_TO_DOWNGRADE_TO_FAMILY",t.joinFamilyErrors=[t.BadLogin,t.FamilyFull,t.CannotJoinMultipleFamilies,t.AlreadyJoinedThisFamily,t.JoinFamilyTokenNotFound,t.UserSubscriptionIsUpForRenewal,t.FamilyHasBeenDiscontinued,t.UserMustCancelPremiumPlusRenewalToDowngradeToFamily],t.leaveFamilyErrors=[t.CannotRemoveFamilyAdmin,t.UserNotMemberOfFamily],t.removeFamilyMemberErrors=[t.UserMustBeFamilyAdmin,t.CannotRemoveFamilyAdmin,t.UserNotMemberOfFamily]},53e3:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFamilyDetails=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.familyplan,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetFamilyDetails"},a=(0,o.prepareApiEndpoint)(i);t.getFamilyDetails=async function(e,t){return a(e,{login:t,payload:{}})}},11560:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.joinFamily=t.FamilyStopRenewalPlatform=t.FamilyStopRenewalState=void 0;const o=r(90338),n=r(45956);!function(e){e.STOPPED="stopped",e.NOT_STOPPED="not_stopped"}(t.FamilyStopRenewalState||(t.FamilyStopRenewalState={})),function(e){e.IOS_APP_STORE="ios",e.MAC_STORE="mac",e.PLAY_STORE="playstore",e.PAYPAL="paypal",e.STRIPE="stripe",e.PROCESSOUT="processout"}(t.FamilyStopRenewalPlatform||(t.FamilyStopRenewalPlatform={}));const i={group:n.ApiEndpointGroups.familyplan,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"JoinFamily"},a=(0,o.prepareApiEndpoint)(i);t.joinFamily=async function(e,t){return a(e,{payload:t})}},86661:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.leaveFamily=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.familyplan,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"LeaveFamily"},a=(0,o.prepareApiEndpoint)(i);t.leaveFamily=async function(e,t){return a(e,{login:t,payload:{}})}},15244:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeFamilyMember=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.familyplan,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"RemoveFamilyMember"},a=(0,o.prepareApiEndpoint)(i);t.removeFamilyMember=async function(e,t,r){return a(e,{login:t,payload:r})}},29591:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetFamilyJoinToken=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.familyplan,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ResetJoinToken"},a=(0,o.prepareApiEndpoint)(i);t.resetFamilyJoinToken=async function(e,t){return a(e,{login:t,payload:{}})}},64272:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isGetFilesMetaSuccess=t.getFilesMeta=t.endpoint=void 0;const o=r(90338),n=r(45956);t.endpoint="GetFileMeta";const i={group:n.ApiEndpointGroups.file,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:t.endpoint},a=(0,o.prepareApiEndpoint)(i);t.getFilesMeta=(e,t,r)=>a(e,{login:t,payload:r});t.isGetFilesMetaSuccess=e=>"success"===e.code},91503:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(59821),t),n(r(97421),t),n(r(55710),t),n(r(63339),t),n(r(45468),t),n(r(91063),t),n(r(18625),t),n(r(11560),t),n(r(53e3),t),n(r(15244),t),n(r(29591),t),n(r(86661),t),n(r(34957),t),n(r(8124),t),n(r(67747),t),n(r(62712),t),n(r(13271),t),n(r(51837),t),n(r(61054),t),n(r(39446),t),n(r(8111),t),n(r(36602),t),n(r(60132),t),n(r(12407),t),n(r(56736),t),n(r(80585),t),n(r(6862),t),n(r(99850),t),n(r(48974),t),n(r(43339),t),n(r(87992),t),n(r(4685),t),n(r(78876),t),n(r(96425),t),n(r(99289),t),n(r(71336),t),n(r(88077),t),n(r(1371),t),n(r(58539),t),n(r(9439),t),n(r(48253),t),n(r(51296),t),n(r(24925),t),n(r(48730),t),n(r(3278),t),n(r(71633),t),n(r(19336),t),n(r(13445),t),n(r(49481),t),n(r(86680),t),n(r(18959),t),n(r(98802),t),n(r(36420),t),n(r(32042),t),n(r(42216),t),n(r(54268),t),n(r(8499),t),n(r(56026),t),n(r(81926),t),n(r(28974),t),n(r(46583),t),n(r(43775),t),n(r(9161),t),n(r(34252),t),n(r(92006),t),n(r(80474),t),n(r(10554),t),n(r(41780),t),n(r(25094),t),n(r(3330),t),n(r(80359),t),n(r(74895),t)},66677:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getKillSwitches=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.killswitch,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"GetKillSwitches"},a=(0,o.prepareApiEndpoint)(i);t.getKillSwitches=async function(e,t){return a(e,{payload:{requestedKillswitches:t}})}},3330:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestPairing=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.pairing,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"RequestPairing"},a=(0,o.prepareApiEndpoint)(i);t.requestPairing=async function(e,t){return a(e,{login:t,payload:{}})}},48008:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCustomerInvoice=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.payments,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetCustomerInvoice",accept:"application/pdf",responseType:"arraybuffer"},a=(0,o.prepareApiEndpoint)(i);t.getCustomerInvoice=async function(e,t,r){return a(e,{login:t,payload:r})}},36273:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listInvoices=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.payments,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ListInvoices"},a=(0,o.prepareApiEndpoint)(i);t.listInvoices=async function(e,t){return a(e,{login:t,payload:{}})}},48523:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.grantFullRefundAndCancelSubscription=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.payments,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GrantFullRefundAndCancelSubscription"},a=(0,o.prepareApiEndpoint)(i);t.grantFullRefundAndCancelSubscription=async function(e,t,r){return a(e,{login:t,payload:r})}},80359:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getHashes=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.pwleak,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"GetHashes"},a=(0,o.prepareApiEndpoint)(i);t.getHashes=async function(e,t){return a(e,{payload:t})}},3278:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.confirmMasterPasswordChangeDone=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.UserDevice,endpoint:"ConfirmMasterPasswordChangeDone",group:o.ApiEndpointGroups.sync,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.confirmMasterPasswordChangeDone=async function(e,t,r){return a(e,{login:t,payload:r})}},71633:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDataForMasterPasswordChange=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetDataForMasterPasswordChange",group:o.ApiEndpointGroups.sync,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.getDataForMasterPasswordChange=async function(e,t,r){return a(e,{login:t,payload:r})}},19336:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLatestContent=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.sync,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetLatestContent"},a=(0,n.prepareApiEndpoint)(i);t.getLatestContent=async function(e,t,r){return a(e,{login:t,payload:r})}},69214:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.uploadDataForCryptoChange=void 0;const o=r(90338),n=r(45956),i={authenticationType:n.ApiAuthType.UserDevice,endpoint:"UploadDataForCryptoUpdate",group:n.ApiEndpointGroups.sync,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},a=(0,o.prepareApiEndpoint)(i);t.uploadDataForCryptoChange=async function(e,t,r){return await a(e,{login:t,payload:r})}},13445:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.uploadDataForMasterPasswordChange=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.UserDevice,endpoint:"UploadDataForMasterPasswordChange",group:o.ApiEndpointGroups.sync,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.uploadDataForMasterPasswordChange=async function(e,t,r){return a(e,{login:t,payload:r})}},49481:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.lastADSyncDate=t.lastADSyncDateErrors=void 0;const o=r(46298),n=r(90338),i=r(45956);t.lastADSyncDateErrors=[o.NotAdmin,o.InsufficientTier,o.UnknownError];const a={group:i.ApiEndpointGroups.teams,version:i.ApiVersion.v1,method:i.ApiRequestMethod.POST,authenticationType:i.ApiAuthType.UserDevice,endpoint:"LastADSyncDate"},s=(0,n.prepareApiEndpoint)(a);t.lastADSyncDate=function(e,t){return s(e,{login:t,payload:{}})}},11848:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addSeatsRequest=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"AddSeats"},a=(0,n.prepareApiEndpoint)(i);t.addSeatsRequest=async function(e,t,r){return await a(e,{login:t,payload:{seats:r}})}},18959:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAuditLogsQueryResults=t.InternalErrorCode=t.NotAdminErrorCode=void 0;const o=r(90338),n=r(45956);t.NotAdminErrorCode="NOT_ADMIN",t.InternalErrorCode="internal_error";const i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetAuditLogQueryResults"},a=(0,o.prepareApiEndpoint)(i);t.getAuditLogsQueryResults=function(e,t,r){return a(e,{login:t,payload:r})}},86680:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.startAuditLogsQuery=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"StartAuditLogsQuery"},a=(0,o.prepareApiEndpoint)(i);t.startAuditLogsQuery=function(e,t,r){return a(e,{login:t,payload:r})}},38115:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.changeTierMidCycleRequest=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ChangeTierMidCycle"},a=(0,n.prepareApiEndpoint)(i);t.changeTierMidCycleRequest=async function(e,t,r,o,n,i,s,c){return await a(e,{login:t,payload:{amountToPay:r,taxes:o,planId:n,couponCode:i,seatsToAdd:s,billingContactEmail:c}})}},21712:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.computePlanPricingRequest=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ComputePlanPricing"},a=(0,n.prepareApiEndpoint)(i);t.computePlanPricingRequest=async function(e,t,r){return await a(e,{login:t,payload:{seats:r}})}},81926:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listTeamDevicesErrors=t.getTeamDeviceErrors=t.createTeamDeviceAccountErrors=t.deactivateTeamDeviceErrors=t.registerTeamDeviceErrors=t.TeamDevicePlatform=void 0;const o=r(59821),n=r(45956);!function(e){e.SSO_CONNECTOR="sso_connector",e.ENCRYPTION_SERVICE="encryption_service",e.NITRO="nitro_encryption_service"}(t.TeamDevicePlatform||(t.TeamDevicePlatform={})),t.registerTeamDeviceErrors=[o.NotAdmin,n.UnknownError],t.deactivateTeamDeviceErrors=[o.NotAdmin,n.UnknownError,o.DeviceKeyNotFound,o.DeactivatedTeamDevice],t.createTeamDeviceAccountErrors=[o.NotAdmin,n.UnknownError,o.DeviceAccountMappingAlreadyExists,o.InvalidTeamDeviceLogin],t.getTeamDeviceErrors=[o.NotAdmin,n.UnknownError],t.listTeamDevicesErrors=[o.NotAdmin,n.UnknownError]},28974:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTeamDeviceAccount=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"CreateTeamDeviceAccount"},a=(0,o.prepareApiEndpoint)(i);t.createTeamDeviceAccount=(e,t,r)=>a(e,{login:t,payload:r})},43775:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTeamDevice=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"DeactivateTeamDevice"},a=(0,o.prepareApiEndpoint)(i);t.deactivateTeamDevice=function(e,t,r){return a(e,{login:t,payload:r})}},9161:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDevice=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetTeamDevice"},a=(0,o.prepareApiEndpoint)(i);t.getTeamDevice=async function(e,t,r){return await a(e,{login:t,payload:r})}},34252:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listTeamDevices=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ListTeamDevices"},a=(0,o.prepareApiEndpoint)(i);t.listTeamDevices=async(e,t)=>await a(e,{login:t,payload:{}})},46583:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.registerTeamDevice=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"RegisterTeamDevice"},a=(0,o.prepareApiEndpoint)(i);t.registerTeamDevice=function(e,t,r){return a(e,{login:t,payload:r})}},98802:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DomainStatusResponse=void 0,function(e){e.pending="pending",e.valid="valid",e.expired="expired",e.invalid="invalid"}(t.DomainStatusResponse||(t.DomainStatusResponse={}))},36420:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeDomainRegistrationErrors=t.completeDomainRegistration=void 0;const o=r(90338),n=r(45956),i=r(59821),a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"CompleteDomainsRegistration"},s=(0,o.prepareApiEndpoint)(a);t.completeDomainRegistration=async function(e,t){return s(e,{login:t,payload:{}})},t.completeDomainRegistrationErrors=[i.NotAdmin]},32042:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateDomain=t.deactivateDomainErrors=void 0;const o=r(90338),n=r(45956),i=r(59821);t.deactivateDomainErrors=[i.NotAdmin,i.DomainNotValidForTeam];const a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"DeactivateDomain"},s=(0,o.prepareApiEndpoint)(a);t.deactivateDomain=async function(e,t,r){return s(e,{login:t,payload:r})}},42216:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listDomains=t.listDomainErrors=void 0;const o=r(90338),n=r(45956),i=r(59821);t.listDomainErrors=[i.ServerError,i.InvalidRequestError];const a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ListDomains"},s=(0,o.prepareApiEndpoint)(a);t.listDomains=async function(e,t){return s(e,{login:t,payload:{}})}},54268:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestDomainRegistration=t.requestDomainRegistrationErrors=t.DomainContainsNonTeamUsers=t.InvalidPublicDomain=t.DomainAlreadyExists=void 0;const o=r(90338),n=r(45956),i=r(59821);t.DomainAlreadyExists="DOMAIN_ALREADY_EXISTS",t.InvalidPublicDomain="INVALID_PUBLIC_DOMAIN",t.DomainContainsNonTeamUsers="DOMAIN_CONTAINS_EXISTING_NONTEAM_USERS",t.requestDomainRegistrationErrors=[i.TeamDoesNotExist,t.DomainAlreadyExists,i.NotAdmin,t.InvalidPublicDomain,t.DomainContainsNonTeamUsers];const a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"RequestDomainRegistration"},s=(0,o.prepareApiEndpoint)(a);t.requestDomainRegistration=function(e,t,r){return s(e,{login:t,payload:r})}},30782:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getExpectedTaxInformationRequest=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetExpectedTaxInformation"},a=(0,n.prepareApiEndpoint)(i);t.getExpectedTaxInformationRequest=async function(e,t,r){return await a(e,{login:t,payload:{priceInCents:r}})}},78607:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMidCycleTierUpgradePriceRequest=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetMidCycleTierUpgradePrice"},a=(0,n.prepareApiEndpoint)(i);t.getMidCycleTierUpgradePriceRequest=async function(e,t,r,o){return await a(e,{login:t,payload:{numberOfSeats:o,newPlan:r}})}},47115:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamOffersRequest=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetTeamOffers"},a=(0,n.prepareApiEndpoint)(i);t.getTeamOffersRequest=async function(e,t,r){return await a(e,{login:t,payload:{couponCode:r,withStarterOffer:!0}})}},93934:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.changeInviteLinkTeamKey=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ChangeTeamKey"},a=(0,o.prepareApiEndpoint)(i);t.changeInviteLinkTeamKey=(e,t,r)=>a(e,{login:t,payload:r})},5928:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLinkErrors=void 0;const o=r(38250);t.getInviteLinkErrors=[o.InviteLinkResponseErrorCode.NotAdmin,o.InviteLinkResponseErrorCode.InviteLinkNotFound,o.InviteLinkResponseErrorCode.TeamKeyNotFound,o.InviteLinkResponseErrorCode.UserInviteLinkNotFound]},32811:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createInviteLink=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"CreateTeamSignUpPage"},a=(0,o.prepareApiEndpoint)(i);t.createInviteLink=(e,t,r)=>a(e,{login:t,payload:r})},44609:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLinkForAdmin=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetTeamSignUpPageForAdmin"},a=(0,o.prepareApiEndpoint)(i);t.getInviteLinkForAdmin=(e,t,r)=>a(e,{login:t,payload:r})},6563:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLink=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"GetTeamSignUpPage"},a=(0,o.prepareApiEndpoint)(i);t.getInviteLink=(e,t)=>a(e,{payload:t})},41780:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(5928),t),n(r(93934),t),n(r(32811),t),n(r(6563),t),n(r(44609),t),n(r(92020),t),n(r(25731),t)},25731:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestInviteLinkToken=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"RequestTeamInviteToken"},a=(0,o.prepareApiEndpoint)(i);t.requestInviteLinkToken=(e,t)=>a(e,{payload:t})},92020:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toggleInviteLink=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ToggleTeamSignUpPage"},a=(0,o.prepareApiEndpoint)(i);t.toggleInviteLink=(e,t,r)=>a(e,{login:t,payload:r})},74528:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRecoveryCodesAsTeamCaptain=t.GetRecoveryCodesAsTeamCaptainInternalErrorCode=t.GetRecoveryCodesAsTeamCaptainNotAdminErrorCode=void 0;const o=r(90338),n=r(45956);t.GetRecoveryCodesAsTeamCaptainNotAdminErrorCode="not_billing_admin",t.GetRecoveryCodesAsTeamCaptainInternalErrorCode="internal_error";const i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetRecoveryCodesAsTeamCaptain"},a=(0,o.prepareApiEndpoint)(i);t.getRecoveryCodesAsTeamCaptain=function(e,t,r){return a(e,{login:t,payload:r})}},95375:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamMembers=t.GetTeamMembersInternalErrorCode=t.GetTeamMembersInvalidLimitErrorCode=void 0;const o=r(90338),n=r(45956);t.GetTeamMembersInvalidLimitErrorCode="invalid_limit",t.GetTeamMembersInternalErrorCode="internal_error";const i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetTeamMembers"},a=(0,o.prepareApiEndpoint)(i);t.getTeamMembers=function(e,t,r){return a(e,{login:t,payload:r})}},8499:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.report=t.reportErrors=void 0;const o=r(90338),n=r(45956),i=r(59821);t.reportErrors=[i.InvalidRequestError,i.NotAdmin,i.ServerError,n.UnknownError];const a={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"Report"},s=(0,o.prepareApiEndpoint)(a);t.report=async function(e,t,r){return s(e,{login:t,payload:void 0!==r?r:{}})}},92006:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamDeviceEncryptedConfigErrors=t.getTeamDeviceEncryptedConfigErrors=void 0;const o=r(59821),n=r(45956);t.getTeamDeviceEncryptedConfigErrors=[o.TeamDeviceEncryptedConfigNotFound,o.NotAdmin,n.UnknownError],t.updateTeamDeviceEncryptedConfigErrors=[o.NotAdmin,n.UnknownError,o.DeviceAccountMappingAlreadyExists,o.DeviceKeyNotFound]},80474:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDeviceEncryptedConfig=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetTeamDeviceEncryptedConfiguration"},a=(0,o.prepareApiEndpoint)(i);t.getTeamDeviceEncryptedConfig=(e,t,r)=>a(e,{login:t,payload:r})},10554:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamDeviceEncryptedConfig=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"UpdateTeamDeviceEncryptedConfiguration"},a=(0,o.prepareApiEndpoint)(i);t.updateTeamDeviceEncryptedConfig=(e,t,r)=>a(e,{login:t,payload:r})},56026:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.teamStatus=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"TeamStatus"},a=(0,o.prepareApiEndpoint)(i);t.teamStatus=function(e,t){return a(e,{login:t,payload:{}})}},25094:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRemoteTime=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.time,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.None,endpoint:"GetRemoteTime"},a=(0,o.prepareApiEndpoint)(i);t.getRemoteTime=async function(e,t){return a(e,{payload:t??{}})}},74895:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateCredential=t.GetVpnCredentialBusinessErrors=void 0;const o=r(90338),n=r(45956);!function(e){e.USER_DOESNT_HAVE_VPN_CAPABILITY="USER_DOESNT_HAVE_VPN_CAPABILITY",e.USER_ALREADY_HAS_AN_ACCOUNT="USER_ALREADY_HAS_AN_ACCOUNT",e.USER_ALREADY_HAS_AN_ACCOUNT_FOR_PROVIDER="USER_ALREADY_HAS_AN_ACCOUNT_FOR_PROVIDER",e.USER_ALREADY_HAVE_ACTIVE_VPN_SUBSCRIPTION="USER_ALREADY_HAVE_ACTIVE_VPN_SUBSCRIPTION"}(t.GetVpnCredentialBusinessErrors||(t.GetVpnCredentialBusinessErrors={}));const i={group:n.ApiEndpointGroups.vpn,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetCredentials"},a=(0,o.prepareApiEndpoint)(i);t.generateCredential=async(e,t,r)=>await a(e,{login:t,payload:r})},78577:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.signRequest=t.allowedUnsignedHeaders=t.allowedUnsignedProxyHeaders=t.allowedUnsignedClientHeaders=t.signatureAlgorithm=void 0;const o=r(16516),n=r(46445),i=r(16038),a=r(69530),s=r(53),c=r(45956),u=r(15215),d=r(17825);t.signatureAlgorithm="DL1-HMAC-SHA256",t.allowedUnsignedClientHeaders=["origin","content-length","content-encoding","authorization","user-agent","accept-encoding"],t.allowedUnsignedProxyHeaders=["x-forwarded-for","x-forwarded-proto","x-forwarded-port","x-amzn-trace-id"],t.allowedUnsignedHeaders=[...t.allowedUnsignedClientHeaders,...t.allowedUnsignedProxyHeaders];function l(e){const{appKeys:t}=e,r=["AppAccessKey="+t.accessKey];switch(e.type){case c.ApiAuthType.App:return r;case c.ApiAuthType.UserDevice:{const{login:t,deviceKeys:o}=e;return[`Login=${t}`,...r,`DeviceAccessKey=${o.accessKey}`]}case c.ApiAuthType.Session:{const{deviceId:t,login:o,sessionKeys:n}=e;return[`Login=${o}`,...r,`SessionAccessKey=${n.accessKey}`,`DeviceAccessKey=${t}`]}case c.ApiAuthType.TeamDevice:{const{teamUuid:t,deviceKeys:o}=e;return[`TeamUuid=${t}`,...r,`DeviceAccessKey=${o.accessKey}`]}default:(0,d.assertUnreachable)(e)}}t.signRequest=async e=>{const{request:r,credentials:p,headersToSign:S,timestamp:g=(0,s.getUnixTimestamp)()}=e,{method:E,pathname:y,headers:_,query:A={},rawBody:m}=r,T=e=>Promise.resolve(e),v=(0,o.compose)(i.str2ab,i.utf8ChunkEncode),f=(0,o.composeP)((0,o.compose)(T,i.convertBufferToHex),n.computeHashSha256,(0,o.compose)(T,v)),h=await f(m),{canonicalRequest:D,signedHeaders:O}=(0,u.makeCanonicalRequest)({method:E,uri:y,headers:_,query:A,hashedPayload:h,headersToSign:S}),P=await f(D),I=[t.signatureAlgorithm,g,P].join("\n"),C=function(e){const{appKeys:t}=e;switch(e.type){case c.ApiAuthType.App:return t.secretKey;case c.ApiAuthType.UserDevice:{const{deviceKeys:r}=e;return`${t.secretKey}\n${r.secretKey}`}case c.ApiAuthType.Session:{const{sessionKeys:r}=e;return`${t.secretKey}\n${r.secretKey}`}case c.ApiAuthType.TeamDevice:{const{deviceKeys:r}=e;return`${t.secretKey}\n${r.secretKey}`}default:(0,d.assertUnreachable)(e)}}(p),R=v(I),L=await(0,a.signHashHmacSHA256)({key:(0,i.str2ab)(C),data:R}),b=(0,i.convertBufferToHex)(L);return t.signatureAlgorithm+" "+[...l(p),`Timestamp=${g}`,`SignedHeaders=${O}`,`Signature=${b}`].join(",")}},45956:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isApiErrorOfType=t.isApiError=t.UnknownError=t.ApiEndpointGroups=t.ApiVersion=t.ApiRequestMethod=t.ApiAuthType=void 0,t.ApiAuthType={App:"App",UserDevice:"UserDevice",None:"None",Session:"Session",TeamDevice:"TeamDevice"},t.ApiRequestMethod={GET:"GET",POST:"POST"},function(e){e[e.v1=0]="v1"}(t.ApiVersion||(t.ApiVersion={})),function(e){e.abtesting="abtesting",e.account="account",e.authentication="authentication",e.breachesQA="breaches-qa",e.dataleak="dataleak",e.dataleakQA="dataleak-qa",e.darkwebinsights="darkwebinsights",e.devices="devices",e.familyplan="familyplan",e.file="file",e.killswitch="killswitch",e.pairing="pairing",e.premium="premium",e.pwleak="pwleak",e.sync="sync",e.teams="teams",e.time="time",e.payments="payments",e.vpn="vpn"}(t.ApiEndpointGroups||(t.ApiEndpointGroups={})),t.UnknownError="UNKNOWN_ERROR",t.isApiError=function(e){return"object"==typeof e&&"success"!==e.code},t.isApiErrorOfType=function(e,t){return"object"==typeof t&&t.type===e}},90190:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownError=t.UnknownErrorMessages=t.UnknownErrorCode=void 0,function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR"}(r=t.UnknownErrorCode||(t.UnknownErrorCode={})),t.UnknownErrorMessages={[r.UNKNOWN_ERROR]:"Unknown error"},t.UnknownError={codes:r,name:"UnknownError",messages:t.UnknownErrorMessages}},92263:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.isCarbonError=t.CarbonError=void 0;const i=r(90190);class a extends Error{constructor(e,t){super(e.messages[t]),this.errorType=e,this.errorCode=t,this.additionalInfo={},Object.setPrototypeOf(this,a.prototype),this.name="CarbonError",Error.captureStackTrace&&Error.captureStackTrace(this,a)}errorTypeName(){return this.errorType.name}stringErrorCode(){const{errorType:{codes:e,name:t},errorCode:r}=this;return`${t}#${e[r]}`}addAdditionalInfo(e){return this.additionalInfo={...this.additionalInfo,...e},this}getAdditionalInfo(){return this.additionalInfo}addContextInfo(e,t){const{errorCode:r,errorType:o}=this;return this.message=`[${e}] - ${t}: ${o.messages[r]}`,this}toString(){return`CarbonError: ${this.message} (code ${this.stringErrorCode()})`}static fromAnyError(e,t,r){if(s(e))return e;const o=new a(t||i.UnknownError,void 0===r?i.UnknownErrorCode.UNKNOWN_ERROR:r);return s(o,i.UnknownError,i.UnknownErrorCode.UNKNOWN_ERROR)&&(o.message=e.message||`${e}`),e.stack&&(o.stack=e.stack),o}}function s(e,t,r){return e instanceof Error&&"CarbonError"===e.name&&(void 0===t||t===e.errorType)&&(void 0===r||r===e.errorCode)}t.CarbonError=a,t.isCarbonError=s,n(r(35706),t)},35706:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},45800:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCloudflareHeaders=t.setCloudflareHeaders=void 0;let r={};t.setCloudflareHeaders=(e,t)=>{if(Object.isFrozen(r))throw new Error("Trying to set Cloudflare headers after initialization");e&&t&&(r={"CF-Access-Client-Id":e,"CF-Access-Client-Secret":t},Object.freeze(r))};t.getCloudflareHeaders=()=>Object.isFrozen(r)?r:{}},39266:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isHttpError=t.HttpError=t.HttpErrorMessages=t.HttpErrorCode=void 0;const o=r(92263);var n;!function(e){e[e.CLIENT_ERROR=0]="CLIENT_ERROR",e[e.SERVER_ERROR=1]="SERVER_ERROR",e[e.STATUS_CODE=2]="STATUS_CODE",e[e.CONNECTION_ABORTED=3]="CONNECTION_ABORTED",e[e.CONNECTION_TIMED_OUT=4]="CONNECTION_TIMED_OUT",e[e.NETWORK_ERROR=5]="NETWORK_ERROR",e[e.NO_RESPONSE=6]="NO_RESPONSE",e[e.SETUP_FAILED=7]="SETUP_FAILED"}(n=t.HttpErrorCode||(t.HttpErrorCode={})),t.HttpErrorMessages={[n.CLIENT_ERROR]:"Http response with client error status",[n.SERVER_ERROR]:"Http response with server error status",[n.STATUS_CODE]:"Http response with non-succesful status",[n.CONNECTION_ABORTED]:"Connection aborted",[n.CONNECTION_TIMED_OUT]:"Connection timed out",[n.NETWORK_ERROR]:"Network error",[n.NO_RESPONSE]:"No response to Http request",[n.SETUP_FAILED]:"Failed to setup Http request"},t.HttpError={codes:n,name:"HttpError",messages:t.HttpErrorMessages};t.isHttpError=(e,r)=>(0,o.isCarbonError)(e,t.HttpError,r)},62628:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get=void 0;const o=r(55539);t.get=function(e,t={}){return(0,o.httpGetUsingFetch)(e,t)}},55539:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.httpGetUsingFetch=void 0;const o=r(87248);t.httpGetUsingFetch=async function(e,t={}){const r=(0,o.setTimeoutAbort)();try{const n={credentials:"omit",signal:r},i=t.headers?{...n,headers:t.headers}:n,a=await fetch(e,i);if((t.validateStatus&&!t.validateStatus(a.status))??!a.ok){const t=new o.FetchError(`HTTP ${a.status} - ${e}`);throw t.response=a,t}const s=await(0,o.getResponseBody)(a,t.responseType);return{headers:a.headers,data:s,status:a.status,statusText:a.statusText}}catch(e){throw(0,o.getCarbonHttpError)(e,r)}}},87248:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCarbonHttpError=t.FetchError=t.setTimeoutAbort=t.getResponseBody=t.HttpStatusCode=void 0;const o=r(17825),n=r(92263),i=r(39266);!function(e){e[e.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT"}(t.HttpStatusCode||(t.HttpStatusCode={})),t.getResponseBody=async function(e,t="json"){switch(t){case"json":return e.json();case"text":return e.text();case"arraybuffer":return e.arrayBuffer();default:(0,o.assertUnreachable)(t)}},t.setTimeoutAbort=function(e=6e4){const t=new AbortController;return setTimeout((()=>t.abort()),e),t.signal};class a extends Error{constructor(e){super(e),this.response=void 0}}t.FetchError=a;t.getCarbonHttpError=(e,t)=>{let r=null;if(function(e){return e instanceof a}(e)&&e.response){const{response:t}=e,{status:o}=t;r=o>=400&&o<500?new n.CarbonError(i.HttpError,i.HttpErrorCode.CLIENT_ERROR):o>=500?new n.CarbonError(i.HttpError,i.HttpErrorCode.SERVER_ERROR):new n.CarbonError(i.HttpError,i.HttpErrorCode.STATUS_CODE),r.addAdditionalInfo({response:t})}else r="AbortError"===e.name&&t.aborted?new n.CarbonError(i.HttpError,i.HttpErrorCode.CONNECTION_TIMED_OUT):"AbortError"===e.name?new n.CarbonError(i.HttpError,i.HttpErrorCode.CONNECTION_ABORTED):self?.navigator?.onLine?new n.CarbonError(i.HttpError,i.HttpErrorCode.SETUP_FAILED):new n.CarbonError(i.HttpError,i.HttpErrorCode.NETWORK_ERROR);return r.addAdditionalInfo({libError:e.message}),r}},14656:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.post=t.get=void 0;var i=r(62628);Object.defineProperty(t,"get",{enumerable:!0,get:function(){return i.get}});var a=r(68109);Object.defineProperty(t,"post",{enumerable:!0,get:function(){return a.post}}),n(r(39266),t)},68109:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.post=void 0;const o=r(80057);t.post=function(e,t,r={}){return(0,o.httpPostUsingFetch)(e,t,r)}},80057:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.httpPostUsingFetch=void 0;const o=r(87248);t.httpPostUsingFetch=async function(e,t,r={}){const n=(0,o.setTimeoutAbort)();try{const i=r.headers||{},a=function(e,t="application/json"){const r=t.trim().toLowerCase();if(r.startsWith("application/json"))return JSON.stringify(e);if(r.startsWith("application/x-www-form-urlencoded"))return new URLSearchParams(function(e){if("string"==typeof e)return e;return Object.keys(e).reduce(((t,r)=>{const o=e[r];return void 0===o||(t[r]="string"==typeof o?o:JSON.stringify(o)),t}),{})}(e));if(r.startsWith("multipart/form-data")){const t=new FormData;for(const[r,o]of Object.entries(e))t.append(r,o);return t}if((r.startsWith("text/plain")||r.startsWith("application/x-jsonlines"))&&"string"==typeof e)return e;throw new Error("Unsupported Content-Type for HTTP POST")}(t,i["Content-Type"]),s={method:"POST",headers:i,body:a,credentials:"omit",signal:n},c=await fetch(e,s);if((r.validateStatus&&!r.validateStatus(c.status))??!c.ok){const t=new o.FetchError(`HTTP ${c.status} - ${e}`);throw t.response=c,t}const u=await(0,o.getResponseBody)(c,r.responseType);return{headers:c.headers,data:u,status:c.status,statusText:c.statusText}}catch(e){throw(0,o.getCarbonHttpError)(e,n)}}},73439:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateOtpFromSecret=void 0;const o=r(68243),n=r(95623),i=r(70252);t.generateOtpFromSecret=function(e){try{const t=e.toUpperCase().replace(/[^A-Z2-7=]/g,"");return o.authenticator.generate(t)}catch(e){const t=new Error(`[Otp] - generateOtpFromSecret: ${e}`);return n.Debugger.log(t),(0,i.sendExceptionLog)({error:t}),""}}},36540:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},89021:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBatch=void 0;const o=r(78912),n=r(59890);t.getBatch=function(e,t,r){const i="zero"===t.startCursor.type?0:(0,n.binaryFindIndex)(r,(r=>(0,o.isAfterTokenStart)(e,t,!1,r)));if(-1===i)return[];const a=r.slice(i),s="infinite"===t.endCursor.type?a.length:(0,n.binaryFindIndex)(a,(r=>(0,o.isAfterTokenEnd)(e,t,!1,r)),t.initialBatchSize),c=-1===s?a.length:s;return a.slice(0,c)}},20553:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBatch=t.generatePrevToken=t.generateNextToken=t.generateFirstToken=void 0;var o=r(93669);Object.defineProperty(t,"generateFirstToken",{enumerable:!0,get:function(){return o.generateFirstToken}}),Object.defineProperty(t,"generateNextToken",{enumerable:!0,get:function(){return o.generateNextToken}}),Object.defineProperty(t,"generatePrevToken",{enumerable:!0,get:function(){return o.generatePrevToken}});var n=r(89021);Object.defineProperty(t,"getBatch",{enumerable:!0,get:function(){return n.getBatch}})},78912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isBeforeTokenStart=t.isAfterTokenEnd=t.isBeforeTokenEnd=t.isAfterTokenStart=void 0;const o=r(16516),n=r(35893);function i(e,t){return e>t}function a(e,t){return e<t}function s(e,t){return(0,o.compose)(n.normalizeStringMapper,e[t])}const c=(0,o.curry)((function(e,t,{0:r,1:o}){const{direction:c,field:u}=r,d=s(e,u);return(e=>"ascend"===e?i:a)(c)(d(t),(0,n.normalizeStringMapper)(o))})),u=(0,o.curry)((function(e,t,{0:r,1:o}){const{direction:n,field:c}=r,u=s(e,c);return(e=>"ascend"===e?a:i)(n)(u(t),o)})),d=(0,o.curry)((function(e,t,{0:r,1:o}){const{field:n}=r;return s(e,n)(t)===o}));function l(e){return void 0!==e&&[!0,!1].includes(e)}function p(e){return{direction:"ascend",field:e}}const S=(e,t)=>(r,n,i,a)=>{const{sortCriteria:s,uniqField:S}=n.sortToken,g="start"===t?n.startCursor:n.endCursor;if("zero"===g.type)return"after"===e;if("infinite"===g.type)return"before"===e;const E=d(r,a),y=((e,t)=>r=>r.reduce(((r,o)=>l(r)?r:function(e,t,r){return!!e(r)||!!t(r)&&void 0}(e,t,o)),void 0))("before"===e?u(r,a):c(r,a),E),_=y((0,o.zip)(s,g.sortValues));if(l(_))return _;const A=y([{0:p(S),1:g.uniqValue}]);return l(A)?A:!i};t.isAfterTokenStart=S("after","start"),t.isBeforeTokenEnd=S("before","end"),t.isAfterTokenEnd=S("after","end"),t.isBeforeTokenStart=S("before","start")},33627:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sameBatch=void 0;const o=r(16516);t.sameBatch=function(e,t){return e.length===t.length&&e.every(((e,r)=>(0,o.equals)(t[r],e)))}},93669:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateFirstToken=t.generatePrevToken=t.generateNextToken=t.zeroCursor=t.infiniteCursor=void 0;const o=r(16516),n=r(35893),i=r(59890),a=r(78912);function s(e,t,r){return r.sortCriteria.map((r=>{const{field:i}=r;return(0,o.compose)(n.normalizeStringMapper,e[i])(t)}))}function c(e,r,o,n,i){const a=n+o-1;if(a>=i.length-1)return t.infiniteCursor;const c=i[a];return{type:"positional",sortValues:s(e,c,r),uniqValue:String(e[r.uniqField](c))}}function u(e,r,o){const{initialBatchSize:n,startCursor:c,sortToken:u}=r;if("zero"===c.type)throw new Error("Cannot generate cursor before zero start cursor.");const d=(0,i.binaryFindLastIndex)(o,(t=>(0,a.isBeforeTokenStart)(e,r,!0,t)));if(-1===d)return t.zeroCursor;const l=function(e,r,o,n,i){const a=n-o+1;if(a<0)return t.zeroCursor;const c=i[a];return{type:"positional",sortValues:s(e,c,r),uniqValue:String(e[r.uniqField](c))}}(e,u,n,d,o);return l}t.infiniteCursor={type:"infinite"},t.zeroCursor={type:"zero"},t.generateNextToken=function(e,r,o){if("infinite"===r.endCursor.type)return;const n=function(e,r,o){const{initialBatchSize:n,endCursor:s,sortToken:u}=r;if("infinite"===s.type)throw new Error("Cannot generate cursor after infinite end cursor.");const d=(0,i.binaryFindIndex)(o,(t=>(0,a.isAfterTokenEnd)(e,r,!1,t)));return-1===d?t.infiniteCursor:c(e,u,n,d,o)}(e,r,o);return{...r,startCursor:r.endCursor,endCursor:n}},t.generatePrevToken=function(e,t,r){if("zero"===t.startCursor.type)return;const o=u(e,t,r);return{...t,startCursor:o,endCursor:t.startCursor}},t.generateFirstToken=function(e,r,o,n){const{sortToken:i,filterToken:a}=r,s=c(e,i,o,0,n);return{sortToken:i,filterToken:a,initialBatchSize:o,startCursor:t.zeroCursor,endCursor:s}}},4673:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPlugins=t.setPlugins=void 0;let r={};t.setPlugins=function(e){r=e},t.getPlugins=function(){return r}},60946:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(74211),t),n(r(20378),t)},20378:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupProbe=void 0;const o=r(16516),n=r(95623),i=(e,t)=>r=>(0,o.forEach)(((e,t)=>r=>{try{e(r,t)}catch(e){(0,n.logWarn)({message:`Monitor raised an error on announcement ${r.type}`,tag:"Probe",details:{error:e}})}})(r,t),e);t.setupProbe=(...e)=>(...t)=>{const r={timestamp:Date.now()};(0,o.forEach)(i(t,r),e)}},74211:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},59865:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.filterData=void 0;const o=r(16516),n=r(2974),i=r(17825);t.filterData=function(e,t,r,a){return r.filterCriteria.reduce(((r,a)=>{const s=function(e,t,r){const{value:a}=r,s=(0,n.normalizeStringMapper)(a),c=t=>(0,o.compose)(n.normalizeStringMapper,e[t]);switch(r.type){case"equals":return e=>c(r.field)(e)===s;case"differs":return e=>c(r.field)(e)!==s;case"matches":return e=>t(s,e);case"in":return e=>{const t=c(r.field)(e);return s.indexOf(t)>-1};case"contains":return e=>{const t=c(r.field)(e);if(!Array.isArray(t))throw new Error("[Query] - filter: expected an array");return t.includes(s)};default:(0,i.assertUnreachable)(r)}}(e,t,a);return r.filter(s)}),a)}},35893:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeStringMapper=t.queryData=t.sortData=t.filterData=t.stringifyToken=t.parseToken=t.optimizeBatchSelector=t.createOptimizedSortTokenSelector=t.createOptimizedFilterTokenSelector=void 0;var o=r(23736);Object.defineProperty(t,"createOptimizedFilterTokenSelector",{enumerable:!0,get:function(){return o.createOptimizedFilterTokenSelector}}),Object.defineProperty(t,"createOptimizedSortTokenSelector",{enumerable:!0,get:function(){return o.createOptimizedSortTokenSelector}}),Object.defineProperty(t,"optimizeBatchSelector",{enumerable:!0,get:function(){return o.optimizeBatchSelector}});var n=r(54410);Object.defineProperty(t,"parseToken",{enumerable:!0,get:function(){return n.parseToken}}),Object.defineProperty(t,"stringifyToken",{enumerable:!0,get:function(){return n.stringifyToken}});var i=r(59865);Object.defineProperty(t,"filterData",{enumerable:!0,get:function(){return i.filterData}});var a=r(32541);Object.defineProperty(t,"sortData",{enumerable:!0,get:function(){return a.sortData}});var s=r(7994);Object.defineProperty(t,"queryData",{enumerable:!0,get:function(){return s.queryData}});var c=r(2974);Object.defineProperty(t,"normalizeStringMapper",{enumerable:!0,get:function(){return c.normalizeStringMapper}})},2974:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeStringMapper=void 0;const o=r(16516),n=r(97601),i=(0,o.compose)(n.normalizeString,o.toLower);t.normalizeStringMapper=e=>"string"==typeof e?i(e):Array.isArray(e)?e.map(t.normalizeStringMapper):e},7994:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.queryData=void 0;const o=r(59865),n=r(32541);t.queryData=function(e,t,r,i,a){const s=(0,o.filterData)(e,t,i,a);return(0,n.sortData)(e,r,s)}},23736:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.optimizeBatchSelector=t.createOptimizedFilterTokenSelector=t.createOptimizedSortTokenSelector=void 0;const o=r(16516),n=r(32034);t.createOptimizedSortTokenSelector=(0,n.createSelectorCreator)(n.defaultMemoize,((e,t)=>e.uniqField===t.uniqField&&e.sortCriteria.length===t.sortCriteria.length&&e.sortCriteria.every(((e,r)=>Object.keys(e).every((o=>e[o]===t.sortCriteria[r][o]))))));t.createOptimizedFilterTokenSelector=(0,n.createSelectorCreator)(n.defaultMemoize,((e,t)=>e.filterCriteria.length===t.filterCriteria.length&&e.filterCriteria.every(((e,r)=>Object.keys(e).every((o=>e[o]===t.filterCriteria[r][o]))))));const i=(0,n.createSelectorCreator)(n.defaultMemoize,((e,t)=>e.length===t.length&&e.every(((e,r)=>t[r]===e))));t.optimizeBatchSelector=e=>i(e,o.identity)},32541:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sortData=void 0;const o=r(2974),n=r(16516);function i(e,t){const{direction:r}=t,i=function(e,t){const{field:r}=t;return(0,n.compose)(o.normalizeStringMapper,e[r])}(e,t);return function(e){return"ascend"===e?n.ascend:n.descend}(r)(i)}t.sortData=function(e,t,r){const o=(0,n.compose)(String,e[t.uniqField]),a=[...t.sortCriteria.map((t=>i(e,t))),(0,n.ascend)(o)];return(0,n.sortWith)(a)(r)}},54410:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyToken=t.parseToken=void 0;const o=r(16038),n=r(93513);t.parseToken=function(e){const t=n.decode(e),r=(0,o.utf8ChunkDecode)(t);return JSON.parse(r)},t.stringifyToken=function(e){if(void 0===e)return"";const t=JSON.stringify(e),r=(0,o.utf8ChunkEncode)(t);return n.encode(r)}},74752:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeAutoLoginService=t.loadMPFromStorageToStore=t.shouldTrigger=t.createMasterPasswordCipheringKey=t.AUTOLOGIN_EXPIRATION_DATE=void 0;const o=r(11814),n=r(69530),i=r(16038),a=r(16356),s=r(53),c=r(70252),u=r(95623),d=r(56915),l=r(46298),p=r(16593),S=r(61740),g=r(98226),E=r(93564);t.AUTOLOGIN_EXPIRATION_DATE=1209600;t.createMasterPasswordCipheringKey=()=>(0,n.generateAESKey)();const y=()=>{try{const e=(()=>{const e=(0,E.getWindowLocalStorage)();return o.env.isBrowserEnvironment()&&e?parseInt(e["QA.EXTENSION-1474.expirationTimeSeconds"],10):void 0})();if(Number.isSafeInteger(e)&&e<t.AUTOLOGIN_EXPIRATION_DATE)return e}catch(e){(0,u.logError)(e)}return t.AUTOLOGIN_EXPIRATION_DATE};t.shouldTrigger=async(e,t,r)=>{try{if(t.setInstance(r),e.isAuthenticated())return!1;if(!await(0,S.hasSessionKeysInStorage)(t))return!1;await(0,S.loadSessionKeysToStore)(e,t);const o=(0,d.sessionKeysSelector)(e.getState());return!!(0,S.areSessionKeysValid)(o)&&t.getInstance().doesMasterPasswordExist()}catch(e){if(e.message!==S.RememberMeErrorCode.EMPTY_SESSION_KEYS){const t=new Error(`[Autologin] - shouldTrigger: ${e}`);(0,c.sendExceptionLog)({error:t}),(0,u.logError)(e)}return!1}};t.loadMPFromStorageToStore=async(e,t,r,o)=>{const n=await(0,l.getMasterPasswordCipheringKey)(e,o);if((0,l.isApiError)(n))throw new Error(n.message);t.setInstance({raw:n.rememberMasterPasswordCipheringKey},"");const i=await r.getInstance().getMasterPassword();e.dispatch((0,a.updateMasterPassword)(i))};t.makeAutoLoginService=e=>({initialize:()=>(async e=>{try{const{storeService:r,localStorageService:o}=e;if(!r.isAuthenticated())throw new Error(S.RememberMeErrorCode.USER_NOT_AUTHENTICATED);const n=r.getState(),c=(0,d.deviceKeysSelector)(n),u=(0,d.ukiSelector)(n),E=(0,d.sessionKeysSelector)(n),_=(0,p.userLoginSelector)(n);if(!c||!u)throw new Error(S.RememberMeErrorCode.EMPTY_DEVICE_KEYS);if((0,S.areSessionKeysValid)(E))return;const A=await(0,t.createMasterPasswordCipheringKey)(),m=(0,i.bufferToBase64)(A),T=await(0,l.initRememberMasterPassword)(r,_,{rememberMasterPasswordCipheringKey:m});if((0,l.isApiError)(T))throw new Error(T.code);const v=(0,s.getUnixTimestamp)()+y(),f={accessKey:T.sessionAccessKey,secretKey:T.sessionSecretKey,expirationTimeSeconds:v};r.dispatch((0,a.loadSessionKeys)(f)),await o.getInstance().storeAuthenticationKeys(f),e.autoLoginEncryptorService.setInstance({raw:null,buffer:A},"");const h=(0,p.masterPasswordSelector)(n);await o.getInstance().storeMasterPassword(h),await(0,S.persistLocalAccountRememberMeType)(r,"autologin"),r.dispatch((0,g.setRememberMeTypeAction)("autologin"))}catch(e){const t=new Error(`[Autologin] - initialize: ${e}`);(0,c.sendExceptionLog)({error:t}),(0,u.logError)(t)}})(e),process:r=>(async(e,r)=>{try{const{storeService:o,autoLoginEncryptorService:n,localStorageService:i}=e;if(!await(0,t.shouldTrigger)(o,i,r))return;return await(0,t.loadMPFromStorageToStore)(o,n,i,r)}catch(e){const t=new Error(`[Autologin] - processAutoLogin: ${e}`);(0,c.sendExceptionLog)({error:t}),(0,u.logError)(t)}})(e,r),shouldTrigger:r=>(0,t.shouldTrigger)(e.storeService,e.localStorageService,r)})},93990:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWebAuthnAuthenticationService=t.shouldTrigger=void 0;const o=r(16038),n=r(95623),i=r(69530),a=r(56915),s=r(46298),c=r(16593),u=r(16356),d=r(70252),l=r(64910),p=r(61740),S=r(98226);t.shouldTrigger=async(e,t,r)=>{try{if(t.setInstance(r),(0,c.isAuthenticatedSelector)(e.getState()))return!1;if(!await(0,p.hasSessionKeysInStorage)(t))return!1;await(0,p.loadSessionKeysToStore)(e,t);const o=(0,a.sessionKeysSelector)(e.getState());return!!(0,p.areSessionKeysValid)(o)&&t.getInstance().doesMasterPasswordExist()}catch(e){if(e.message!==p.RememberMeErrorCode.EMPTY_SESSION_KEYS){const t=new Error(`[WebAuthnAuthentication] - shouldTrigger: ${e}`);(0,d.sendExceptionLog)({error:t}),(0,n.logError)(t)}return!1}};t.makeWebAuthnAuthenticationService=e=>({initialize:t=>(async(e,t)=>{try{const{storeService:r,localStorageService:n,webAuthnAuthenticationEncryptorService:a}=e,d=r.getState(),g=(0,c.userLoginSelector)(d),E=await(0,i.generate64BytesKey)(),y=(0,o.bufferToBase64)(E),_=atob(y),A=await(0,s.completeRememberMeRegistration)(r,g,{masterPasswordEncryptionKey:y,authenticator:t});if((0,s.isApiError)(A))throw new Error(A.code);const m={accessKey:A.sessionAccessKey,secretKey:A.sessionSecretKey,expirationTimeSeconds:A.sessionExpirationDateUnix};r.dispatch((0,u.loadSessionKeys)(m)),await n.getInstance().storeAuthenticationKeys(m);const T="",v=(0,l.getNoDerivationCryptoConfig)();a.setInstance({raw:_},T,v);const f=(0,c.masterPasswordSelector)(d);return await n.getInstance().storeWebAuthnMasterPassword(f),await(0,p.persistLocalAccountRememberMeType)(r,"webauthn"),r.dispatch((0,S.setRememberMeTypeAction)("webauthn")),!0}catch(e){const t=new Error(`[WebAuthnAuthentication] - initialize: ${e}`);return(0,d.sendExceptionLog)({error:t}),(0,n.logError)(t),!1}})(e,t),process:(t,r)=>(async(e,t,r)=>{try{const{storeService:o,webAuthnAuthenticationEncryptorService:n,localStorageService:i}=e,a=await(0,s.completeRememberMeOpenSession)(o,t,{authenticator:r});if((0,s.isApiError)(a))throw new Error(a.message);const c="",d=(0,l.getNoDerivationCryptoConfig)(),p=a.masterPasswordEncryptionKey,S=atob(p);n.setInstance({raw:S},c,d);const g=await i.getInstance().getWebAuthnMasterPassword();o.dispatch((0,u.updateMasterPassword)(g))}catch(e){const t=new Error(`[WebAuthnAuthentication] - processWebAuthnAuthentication: ${e}`);(0,d.sendExceptionLog)({error:t}),(0,n.logError)(t)}})(e,t,r),shouldTrigger:r=>(0,t.shouldTrigger)(e.storeService,e.localStorageService,r),deactivate:t=>(async(e,t)=>{const{storeService:r,localStorageService:o}=e,n=(0,a.deviceKeysSelector)(r.getState());if(!n)return!1;const i=await(0,s.deactivateRememberMe)(r,t,{deviceAccessKey:n.accessKey});return!(0,s.isApiError)(i)&&(await o.getInstance().cleanAuthenticationKey(),await(0,p.persistLocalAccountRememberMeType)(r,"disabled"),r.dispatch((0,S.setRememberMeTypeAction)("disabled")),!0)})(e,t)})},61740:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.areSessionKeysValid=t.loadSessionKeysToStore=t.hasSessionKeysInStorage=t.shouldAskMasterPassword=t.cleanRememberMeStorageData=t.getLocalAccountRememberMeType=t.persistLocalAccountRememberMeType=t.RememberMeErrorCode=void 0;const o=r(2246),n=r(63739),i=r(25576),a=r(1860),s=r(16356),c=r(53),u=r(16593),d=r(46298),l=r(56915),p=r(92263),S=r(70252),g=r(95623);var E;!function(e){e.USER_NOT_AUTHENTICATED="USER_NOT_AUTHENTICATED",e.EMPTY_DEVICE_KEYS="EMPTY_DEVICE_KEYS",e.EMPTY_SESSION_KEYS="EMPTY_SESSION_KEYS"}(E=t.RememberMeErrorCode||(t.RememberMeErrorCode={}));t.persistLocalAccountRememberMeType=async(e,t)=>{const{login:r,persistData:n}=e.getAccountInfo();n===i.PersistData.PERSIST_DATA_YES&&await(0,o.storeUserPublicSetting)(r,"rememberMeType",t)};t.getLocalAccountRememberMeType=e=>(0,o.getUserPublicSetting)(e,"rememberMeType");t.cleanRememberMeStorageData=async(e,r)=>{const o=(0,u.userLoginSelector)(e.getState()),i=[(0,n.removeData)(r,o,"authenticationKeys"),(0,n.removeData)(r,o,"registry"),(0,t.persistLocalAccountRememberMeType)(e,"disabled")];if("disabled"!==(0,l.rememberMeTypeSelector)(e.getState())){const t=new Promise((t=>{(async(e,t)=>{const r=(0,l.deviceKeysSelector)(e.getState());r&&await(0,d.deactivateRememberMe)(e,t,{deviceAccessKey:r.accessKey})})(e,o).then(t).catch((e=>{const r=p.CarbonError.fromAnyError(e).addContextInfo("RememberMe","cleanRememberMeStorageData");(0,g.logError)({message:"Error when deactivating remember me server side"}),(0,S.sendExceptionLog)({error:r}),t()}))}));i.push(t)}await Promise.all(i)};t.shouldAskMasterPassword=e=>{const t=(0,o.getUserPublicSetting)(e,"lastMasterPasswordOpenSessionTimestamp")||void 0;if(!t)return;return Date.now()-t>12096e5};t.hasSessionKeysInStorage=async e=>await e.getInstance().doesAuthenticationKeysExist();t.loadSessionKeysToStore=async(e,r)=>{try{if(!(0,t.hasSessionKeysInStorage)(r))throw new Error(E.EMPTY_SESSION_KEYS);const o=await r.getInstance().getAuthenticationKeys();e.dispatch((0,s.loadSessionKeys)(o))}catch(e){throw e.message.indexOf(a.DATA_TAMPERED_ERROR)>-1&&r.getInstance().cleanAuthenticationKey(),e}};t.areSessionKeysValid=e=>e?.expirationTimeSeconds>(0,c.getUnixTimestamp)()},31937:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.restoreLastAuthenticatedUser=void 0;const o=r(95623),n=r(88610),i=r(70252),a=r(48990),s=r(52968),c=r(35924),u=r(78759);t.restoreLastAuthenticatedUser=async function(e,t){try{const{applicationModulesAccess:r}=e,o=t.find((e=>e.isLastSuccessfulLogin));if(!o||o.hasLoginOtp)return;if(e.storeService.getState().userSession.ssoSettings.ssoUser)return;const i=o.login,d=e.storeService.getState().authentication.localUsers;if(void 0!==d[i]&&d[i].ssoActivatedUser){return void((0,u.disableAutoSSOLoginSelector)(e.storeService.getState())||(e.storeService.dispatch((0,c.updateLoginStepInfoLogin)(i)),"sso"===o.rememberMeType&&await r.createClients().authenticationFlow.commands.initiateAutologinWithSSO({login:i??""})))}if("webauthn"===o.rememberMeType)return void function({storeService:e}){try{document.featurePolicy.features().includes("publickey-credentials-get")&&e.dispatch((0,a.reactivationStatusUpdated)(s.ReactivationStatus.WEBAUTHN))}catch(t){e.dispatch((0,a.reactivationStatusUpdated)(s.ReactivationStatus.CLASSIC))}}(e);const l=await e.autoLoginService.shouldTrigger(i),p=(0,n.makeLoginController)(e);if(!l)return void p.openSession(i);await e.autoLoginService.process(i);const S=e.storeService.getUserSession().masterPassword;if(!S)return;await p.openSessionWithMasterPassword(i,S,{triggeredByRememberMeType:"autologin"})}catch(e){const t=`[index] - restoreLastAuthenticatedUser: ${e}`,r=new Error(t);(0,o.logError)({message:t,details:{error:r}}),(0,i.sendExceptionLog)({error:r})}}},98416:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeLocalStorageService=void 0;const o=r(63739);t.makeLocalStorageService=e=>{let t=null;return{setInstance:r=>{t=(0,o.makeUserLocalDataService)(e,r)},getInstance:()=>{if(!t)throw new Error("makeLocalStorageService: You must call setInstance(login: string) before getting the instance");return t}}}},63739:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserLocalDataService=t.deleteAllLocalUserData=t.isDataStored=t.removeData=t.getStorageDebugKey=t.getStorageKey=t.STORAGE_VERSION=t.StoredUserDataTypeEnum=void 0;const o=r(95623),n=r(25576),i=r(41265),a=r(16038),s=r(16593),c=r(10897),u=r(19695),d=r(56668),l=r(1110),p=r(93513);t.StoredUserDataTypeEnum=["abTests","authentication","authenticationKeys","darkWebMonitoring","dataLeaksEmailStatusList","eventStore","health","healthWasComputed","icons","localDataBackupLastLoginSuccessful","localDataBackupTmp","localKey","localSettings","notificationsStatus","personalData","personalFeatures","personalSettings","recoveryData","recoveryLocalKey","recoverySessionCredential","registry","remoteFileContent","remoteFileMeta","sharingData","sharingSync","teamAdminData","userActivity","vaultReport","analyticsIds","userAutofillCorrections","userAutofillCorrectionsMigrated"],t.STORAGE_VERSION="v1";t.getStorageKey=(e,r,o=t.STORAGE_VERSION)=>`${e}.${r}.${o}`;t.getStorageDebugKey=(e,r,o=t.STORAGE_VERSION)=>(0,t.getStorageKey)(e,r,o)+".clear";const S=(e,t)=>`${e}.${t}`,g=async(e,t,r)=>{const o=await e.getLocalStorage().readItem(r);if("string"!=typeof o||0===o.length)throw new Error(`value ${t} undefined`);return o},E=async(e,r,i,s)=>{const c=r.getLocalStorage(),u=(0,t.getStorageKey)(i,s);if(await c.itemExists(u))return(async(e,t,r,o)=>{const n=await g(t,r,o),i=await e.getInstance().decrypt(n),a=(0,d.inflateUtf16)(i);return JSON.parse(a)})(e,r,s,u);const l=S(i,s);if(await c.itemExists(l))return(async(e,t,r,i)=>{const s=await g(t,r,i),c=await e.getInstance().decrypt(s),u=(0,d.deflatedUtf8ToUtf16)(c,{skipUtf8Decoding:!0});if(0===u.length)throw new Error(n.AuthenticationCode[n.AuthenticationCode.WRONG_PASSWORD]);const l=p.decode(u);try{const e=(0,a.utf8ChunkDecode)(l);return JSON.parse(e)}catch(e){return o.default.log(e),l}})(e,r,s,l);const E=new Error("value "+s+" undefined");throw o.default.error(E),E},y=async(e,r,n,a,s)=>{try{const o=e.getLocalStorage(),c=(0,t.getStorageKey)(r,a);if(await o.writeItem(c,n),(0,i.isInternalTestUser)(r)&&s){const o=(0,t.getStorageDebugKey)(r,a);await e.getLocalStorage().writeItem(o,s)}}catch(e){const t=new Error(`[storeData] failed for dataType: ${a} with error: ${e}`);throw o.default.error(t),t}},_=async(e,t,r,o,n)=>{const i=JSON.stringify(o),a=(0,d.deflateUtf16)(i),s=await e.getInstance().encrypt(a);await y(t,r,s,n,o)};t.removeData=async(e,r,o)=>{const n=(0,t.getStorageKey)(r,o),a=S(r,o),s=(0,t.getStorageDebugKey)(r,o),c=((e,t)=>S(e,t)+".clear")(r,o),u=e.getLocalStorage(),d=[u.removeItem(n),u.removeItem(a),...(0,i.isInternalTestUser)(r)?[u.removeItem(s),u.removeItem(c)]:[]];await Promise.all(d)};t.isDataStored=async(e,r,o)=>{const n=e.getLocalStorage(),i=(0,t.getStorageKey)(r,o);if(await n.itemExists(i))return!0;const a=S(r,o);return await n.itemExists(a)},t.deleteAllLocalUserData=async function(e,r,o){const n=o.trim();await Promise.all([...t.StoredUserDataTypeEnum,...l.FileNamesList].map((async r=>{await(0,t.removeData)(e,n,r)}))),await async function(e,t){await e.commands.mitigationDeleteGrapheneUserData({login:t})}(r.createClients()["carbon-legacy"],o)};t.makeUserLocalDataService=(e,r)=>{const n=()=>{const{storeService:t,masterPasswordEncryptorService:r,localDataEncryptorService:o}=e;return(0,s.isLocalKeyActivatedSelector)(t.getState())?o:r};return{storePersonalData:t=>_(n(),e.storageService,r,t,"personalData"),getPersonalData:()=>(o.default.log("Load Personal Data"),E(n(),e.storageService,r,"personalData")),doesPersonalDataExist:()=>(o.default.log("Check Personal Data existence"),(0,t.isDataStored)(e.storageService,r,"personalData")),storeLocalSettings:t=>_(n(),e.storageService,r,t,"localSettings"),getLocalSettings:()=>(o.default.log("Load Local Settings"),E(n(),e.storageService,r,"localSettings")),storePersonalSettings:t=>_(n(),e.storageService,r,t,"personalSettings"),getPersonalSettings:()=>(o.default.log("Load Personal Settings"),E(n(),e.storageService,r,"personalSettings")),storePersonalFeatures:t=>_(n(),e.storageService,r,t,"personalFeatures"),getPersonalFeatures:()=>(o.default.log("Load Personal Features"),E(n(),e.storageService,r,"personalFeatures")),storeNotificationsStatus:t=>_(n(),e.storageService,r,t,"notificationsStatus"),doesNotificationStatusExist:()=>(o.default.log("Check Notification Status existence"),(0,t.isDataStored)(e.storageService,r,"notificationsStatus")),getNotificationStatus:()=>(o.default.log("Load Notifications Status"),E(n(),e.storageService,r,"notificationsStatus")),storeFeatures:t=>_(n(),e.storageService,r,t,"personalFeatures"),getFeatures:()=>(o.default.log("Load Feature Flipping"),E(n(),e.storageService,r,"personalFeatures")),storeSharingData:t=>_(n(),e.storageService,r,t,"sharingData"),getSharingData:()=>(o.default.log("Load Sharing Data"),E(n(),e.storageService,r,"sharingData")),storeSharingSync:t=>_(n(),e.storageService,r,t,"sharingSync"),getSharingSync:()=>(o.default.log("Load Sharing Sync"),E(n(),e.storageService,r,"sharingSync")),doesSharingSyncExist:()=>(0,t.isDataStored)(e.storageService,r,"sharingSync"),storeTeamAdminData:t=>_(n(),e.storageService,r,t,"teamAdminData"),getTeamAdminData:()=>(o.default.log("Load Team Admin Data"),E(n(),e.storageService,r,"teamAdminData")),storeAuthenticationKeys:t=>_(e.authorizationKeysEncryptorService,e.storageService,r,t,"authenticationKeys"),getAuthenticationKeys:()=>(o.default.log("Load Authentication Keys"),E(e.authorizationKeysEncryptorService,e.storageService,r,"authenticationKeys").then((e=>e))),doesAuthenticationKeysExist:()=>(o.default.log("Check Authentication Keys existence"),(0,t.isDataStored)(e.storageService,r,"authenticationKeys")),cleanAuthenticationKey:()=>(0,t.removeData)(e.storageService,r,"authenticationKeys"),storeAuthenticationData:t=>_(n(),e.storageService,r,t,"authentication"),getAuthenticationData:()=>E(n(),e.storageService,r,"authentication"),hasAuthenticationData:()=>(0,t.isDataStored)(e.storageService,r,"authentication"),doesMasterPasswordExist:()=>(o.default.log("Check Master Password Keys existence"),(0,t.isDataStored)(e.storageService,r,"registry")),getMasterPassword:()=>(o.default.log("Load Master Password via Auto login"),E(e.autoLoginEncryptorService,e.storageService,r,"registry")),storeMasterPassword:t=>(o.default.log("Store Master Password via Auto login"),_(e.autoLoginEncryptorService,e.storageService,r,t,"registry")),getWebAuthnMasterPassword:()=>(o.default.log("Load Master Password via WebAuthn login"),E(e.webAuthnAuthenticationEncryptorService,e.storageService,r,"registry")),storeWebAuthnMasterPassword:t=>(o.default.log("Store Master Password via WebAuthn login"),_(e.webAuthnAuthenticationEncryptorService,e.storageService,r,t,"registry")),getLocalKey:()=>E(e.masterPasswordEncryptorService,e.storageService,r,"localKey"),doesLocalKeyExist:()=>(0,t.isDataStored)(e.storageService,r,"localKey"),storeLocalKey:t=>_(e.masterPasswordEncryptorService,e.storageService,r,t,"localKey"),doesLocalDataExist:()=>Promise.all(["localSettings","personalData","personalSettings"].map((o=>(0,t.isDataStored)(e.storageService,r,o)))).then((e=>e.every((e=>e)))),storeUserABTests:t=>_(n(),e.storageService,r,t,"abTests"),getUserABTests:()=>(o.default.log("Load User AB Tests"),E(n(),e.storageService,r,"abTests")),doesDarkWebExist:()=>(0,t.isDataStored)(e.storageService,r,"darkWebMonitoring"),storeDarkWeb:t=>_(n(),e.storageService,r,t,"darkWebMonitoring"),getDarkWeb:()=>(o.default.log("Load Dark Web Monitoring"),E(n(),e.storageService,r,"darkWebMonitoring")),storeHealth:t=>{if(!e.storeService.getPersonalFeatures().features.ims_web_ph_mv3_dev){const o=(0,c.healthToStorage)(t);return _(n(),e.storageService,r,o,"health")}return null},getHealth:async()=>{if(!await(0,t.isDataStored)(e.storageService,r,"health"))return null;const o=await E(n(),e.storageService,r,"health");return(0,c.healthFromStorage)(o)},storeIcons:async t=>{const o=(0,u.iconsToStorage)(t);return _(n(),e.storageService,r,o,"icons")},getIcons:async()=>{if(!await(0,t.isDataStored)(e.storageService,r,"icons"))return null;const o=await E(n(),e.storageService,r,"icons");return(0,u.iconsFromStorage)(o)},doesUserActivityExist:()=>(0,t.isDataStored)(e.storageService,r,"userActivity"),storeUserActivity:t=>_(n(),e.storageService,r,t,"userActivity"),getUserActivity:()=>E(n(),e.storageService,r,"userActivity"),doesVaultReportExist:()=>(0,t.isDataStored)(e.storageService,r,"vaultReport"),storeVaultReport:t=>_(n(),e.storageService,r,t,"vaultReport"),getVaultReport:()=>E(n(),e.storageService,r,"vaultReport"),storeEventStore:t=>_(n(),e.storageService,r,t,"eventStore"),getEventStore:async()=>await(0,t.isDataStored)(e.storageService,r,"eventStore")?E(n(),e.storageService,r,"eventStore"):null,storeHealthWasComputed:t=>_(n(),e.storageService,r,t,"healthWasComputed"),getHealthWasComputed:async()=>!!await(0,t.isDataStored)(e.storageService,r,"healthWasComputed")&&E(n(),e.storageService,r,"healthWasComputed"),storeRecoveryLocalKey:async t=>{const o=e.storageService;return y(o,r,t,"recoveryLocalKey")},getRecoveryLocalKey:async()=>{const o=(0,t.getStorageKey)(r,"recoveryLocalKey");return await g(e.storageService,"recoveryLocalKey",o)},storeRecoverySessionCredential:t=>_(n(),e.storageService,r,t,"recoverySessionCredential"),getRecoverySessionCredential:async()=>E(n(),e.storageService,r,"recoverySessionCredential"),doesRecoverySessionCredentialExist:async()=>(0,t.isDataStored)(e.storageService,r,"recoverySessionCredential"),cleanRecoverySetupData:async()=>{const o=e.storageService;return await(0,t.removeData)(o,r,"recoverySessionCredential"),await(0,t.removeData)(o,r,"recoveryLocalKey")},doesRecoveryLocalKeyExist:async()=>(0,t.isDataStored)(e.storageService,r,"recoveryLocalKey"),cleanRecoveryData:async()=>{const o=e.storageService;return await(0,t.removeData)(o,r,"recoveryData")},storeRecoveryData:async t=>{const o=e.storageService;return await y(o,r,t,"recoveryData")},getRecoveryData:async()=>{const o=(0,t.getStorageKey)(r,"recoveryData");return await g(e.storageService,"recoveryData",o)},doesRecoveryDataExist:()=>(0,t.isDataStored)(e.storageService,r,"recoveryData"),storeAnalyticsIds:t=>_(n(),e.storageService,r,t,"analyticsIds"),getAnalyticsIds:()=>((0,o.log)({message:"Load Analytics IDs"}),E(n(),e.storageService,r,"analyticsIds")),doesAnalyticsIdsExist:()=>((0,o.log)({message:"Check Analytics IDs existence"}),(0,t.isDataStored)(e.storageService,r,"analyticsIds")),storeRemoteFileContent:(t,o)=>_(n(),e.storageService,r,o,t),storeRemoteFileMeta:t=>_(n(),e.storageService,r,t,"remoteFileMeta"),getRemoteFileMeta:()=>E(n(),e.storageService,r,"remoteFileMeta"),getRemoteFileContent:t=>E(n(),e.storageService,r,t),cleanAllRemoteFiles:async()=>{const o=e.storageService;await(0,t.removeData)(o,r,"remoteFileMeta");for(const e of l.FileNamesList)await(0,t.removeData)(o,r,e)},cleanSingleFileStorage:async o=>{const i=e.storageService;await(0,t.removeData)(i,r,o);const a=await E(n(),e.storageService,r,"remoteFileMeta");return delete a[o],_(n(),e.storageService,r,a,"remoteFileMeta")},isRemoteFileMetaDataExist:()=>(0,t.isDataStored)(e.storageService,r,"remoteFileMeta"),isRemoteFileContentExist:o=>(0,t.isDataStored)(e.storageService,r,o)}}},18539:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeStorageService=t.CarbonLocalStorage=void 0;const o=r(95623);t.CarbonLocalStorage=class{constructor(e){this._storage=e}itemExists(e){return this._storage.itemExists(e)}readItem(e){return this._storage.readItem(e)}async writeItem(e,t){const r=await this.backupItem(e);try{await this._storage.writeItem(e,t),r&&await r.clean()}catch(e){o.Debugger.error("CarbonLocalStorage:writeItem error:",e),r?(o.Debugger.error("CarbonLocalStorage couldn't save data, reverting to backup version"),await r.restoreAndClean()):o.Debugger.error("CarbonLocalStorage couldn't save data and no backup version to restore")}}removeItem(e){return this._storage.removeItem(e)}async getSuitableBackupKey(e){const t=t=>e+"."+t;let r=1;for(;await this._storage.itemExists(t(r));)r++;return t(r)}async backupItem(e){if(!await this._storage.itemExists(e))return null;const t=await this.getSuitableBackupKey(e),r=await this._storage.readItem(e);await this._storage.writeItem(t,r);const o=this._storage;async function n(){return await o.removeItem(t)}return{clean:n,restoreAndClean:async function(){const r=await o.readItem(t);return await o.writeItem(e,r),await n()}}}};t.makeStorageService=()=>{let e=null;return{setInstance:t=>{e=t},getLocalStorage:()=>{if(!e)throw new Error("makeStorageService: You must call setInstance(instance: AsyncStorage) before getting the instance");return e}}}},97601:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeString=void 0;t.normalizeString=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()},45570:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getStyxApiCredentials=void 0;const o=r(45956),n=r(39261);t.getStyxApiCredentials=function(e,t){if(t.authenticationType!==o.ApiAuthType.App)return{type:o.ApiAuthType.None};const r={appKeys:(0,n.styxKeysSelector)(e)};return{type:o.ApiAuthType.App,...r}}},76330:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMakeStyxApiRequest=t.getEventsPayload=void 0;const o=r(56915),n=r(55730),i=r(45956),a=r(53),s=r(48749),c=r(14656),u=r(17825),d=r(45570),l=r(41265),p=r(30913),S=r(59600),g=r(78577);t.getEventsPayload=function(e){return e.map((e=>JSON.stringify(e))).join("\n")},t.getMakeStyxApiRequest=function(e,t,r){return async(E,y)=>{const _={login:"",teamUuid:"",payload:"",...y||{}},A=(0,n.getMethodParams)(r,_.payload),m=(0,n.getAuthParams)(t,{login:_.login,teamUuid:_.teamUuid}),T="POST"===A.method?A.payload:"",v=(0,o.dashlaneServerDeltaTimestampSelector)(E.getState())||0,f=Math.round((0,a.getUnixTimestamp)()-v),h=(0,d.getStyxApiCredentials)(E.getState(),m),D=(0,o.platformInfoSelector)(E.getState()),O={"Content-Type":"application/x-jsonlines","X-TIMESTAMP":f.toString()},P={"dashlane-client-agent":(0,n.getApiClientAgentHeader)(D)},I=function(e){const t=e.getAccountInfo().login,r=t&&(0,l.isInternalTestUser)(t),o=(0,p.applicationBuildTypeSelector)(e.getState()),n=o===S.ApplicationBuildType.DEV||o===S.ApplicationBuildType.QA;return r||n}(E);I&&(O["X-DL-TEST"]="true");const C=Object.keys(P),R=await async function(e,t,r,n,s,c){if(r.type===i.ApiAuthType.None)return{};const u=(0,o.dashlaneServerDeltaTimestampSelector)(e.getState())||0,d=Math.round((0,a.getUnixTimestamp)()-u),l={pathname:t,method:"POST",rawBody:c,headers:n};return{Authorization:await(0,g.signRequest)({request:l,timestamp:d,credentials:r,headersToSign:s})}}(E,e,h,{...P,...O},C,T),L={...P,...R,...O},b=`${s.config.DASHLANE_STYX_HOST_WITH_SCHEME}${e}`,{data:N}=await function(e,t,r){const o={headers:r,validateStatus:n.validateStatus};switch(e.method){case i.ApiRequestMethod.GET:return(0,c.get)(t,o);case i.ApiRequestMethod.POST:return(0,c.post)(t,e.payload,o);default:(0,u.assertUnreachable)(e)}}(A,b,L);return N}}},72636:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SendTokenStatus=t.makeWSAuthentication=void 0;const o=r(66646),n=7,i="authentication";var a;function s(e){if("string"!=typeof e){const t=JSON.stringify(e);throw new Error(`unsupported_response - ${t}`)}}t.makeWSAuthentication=()=>({askServerToSendToken:e=>function(e){return(0,o._makeRequest)(i,n,"sendtoken",e,{responseType:"text"}).then((e=>{if(s(e),void 0===a[e])throw new Error(`unknown_status - ${e}`);return a[e]}))}(e),registerUki:e=>function(e){return(0,o._makeRequest)(i,n,"registeruki",e,{responseType:"text"}).then((e=>{if(s(e),"ERROR"===e)throw new Error("Error: Failed to register the UKI");return e}))}(e),getTemporaryToken:e=>function(e){return(0,o._makeRequest)(i,n,"getTemporaryToken",e).then((e=>(s(e.token),e.token)))}(e),validity:e=>function(e){return(0,o._makeRequest)(i,n,"validity",e,{responseType:"text"})}(e)}),function(e){e[e.ERROR=0]="ERROR",e[e.SUCCESS=1]="SUCCESS",e[e.OTP_NEEDED=2]="OTP_NEEDED",e[e.UNKNOWN_USER=3]="UNKNOWN_USER"}(a=t.SendTokenStatus||(t.SendTokenStatus={}))},32239:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSBackup=void 0;const o=r(66646),n="backup";t.makeWSBackup=()=>({latest:e=>i(e),upload:e=>a(e),unlock:e=>s(e),erase:e=>c(e)});const i=e=>(0,o._makeRequest)(n,12,"latest",Object.assign({},e,{sharingTimestamp:0})),a=e=>(0,o._makeRequest)(n,12,"upload",e),s=e=>(0,o._makeRequest)(n,12,"unlock",e),c=e=>(0,o._makeRequest)(n,12,"erase",e)},33633:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSBreaches=void 0;const o=r(66646);t.makeWSBreaches=()=>({get:e=>(0,o._makeRequest)("breaches",1,"get",e)})},5692:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSContactInfo=void 0;const o=r(66646),n=1,i="contactinfos";t.makeWSContactInfo=()=>({getContactInfo:e=>function(e){return(0,o._makeRequest)(i,n,"get",{login:e.login,uki:e.uki})}(e)})},69376:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSCountry=void 0;const o=r(66646),n=1,i="country";t.makeWSCountry=()=>({getCurrentCountry:(e={})=>function(e){return(0,o._makeRequest)(i,n,"get",e).then((e=>e.content))}(e)})},32868:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getWSDataLeaksEmailErrorCode=t.isWSDataLeaksEmailResponseSuccess=t.makeWSDataLeaks=void 0;const o=r(28445),n=r(92263),i=r(20750),a=r(48749),s="dataleak",c=1;function u(e){return g(s,c,"optin",e)}function d(e){return g(s,c,"optout",e)}function l(e){return g(s,c,"status",e)}function p(e){return g(s,c,"leaks",e)}function S(e){return g(s,c,"confirm",e)}async function g(e,t,r,s){const c=`${a.config.DASHLANE_WS_HOST_WITH_SCHEME}/${t}/${e}/${r}`,{data:u}=await(0,o.postDataToUrl)(c,s);return function(e,t){if(429===t.code||t.error&&-32600===t.error.code){throw new n.CarbonError(i.WSError,i.WSErrorCode.THROTTLED).addAdditionalInfo({webService:e})}return t}(c,u)}t.makeWSDataLeaks=()=>({confirm:S,optin:u,optout:d,status:l,leaks:p}),t.isWSDataLeaksEmailResponseSuccess=function(e){return 200===e.code},t.getWSDataLeaksEmailErrorCode=function(e){return e.content&&e.content.results.length>0?e.content.results[0].result:""}},35595:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSDevices=void 0;const o=r(66646),n="devices";t.makeWSDevices=()=>({list:e=>i(e),deactivate:e=>a(e),changeName:e=>s(e)});const i=e=>(0,o._makeRequest)(n,1,"list",{login:e.login,uki:e.uki}).then((e=>e.content)),a=e=>(0,o._makeRequest)(n,1,"deactivate",{login:e.login,uki:e.uki,deviceId:e.deviceId}),s=e=>(0,o._makeRequest)(n,1,"changename",{login:e.login,uki:e.uki,deviceId:e.deviceId,updatedName:e.updatedDeviceName})},20750:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.WSError=t.WSErrorMessages=t.WSErrorCode=void 0,function(e){e[e.THROTTLED=0]="THROTTLED",e[e.REQUEST_FAILED=1]="REQUEST_FAILED"}(r=t.WSErrorCode||(t.WSErrorCode={})),t.WSErrorMessages={[r.THROTTLED]:"THROTTLED",[r.REQUEST_FAILED]:"WebService responded with error code in payload"},t.WSError={codes:r,name:"WSError",messages:t.WSErrorMessages}},66316:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSFeatures=void 0;const o=r(66646),n=1,i="features";t.makeWSFeatures=()=>({fetchFeatures:e=>function(e){return(0,o._makeRequest)(i,n,"getForUser",e).then((e=>e.content))}(e)})},56776:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSIconCrawler=void 0;const o=r(66646);t.makeWSIconCrawler=()=>({getIcons:n});const n=async e=>(0,o._makeRequest)("iconcrawler",2,"getIcons",{domainsInfo:e})},1577:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NewCardToken=void 0;const o=r(66646);t.NewCardToken=function(e,t){return(0,o._makeRequest)(t.name,t.version,"getNewCardToken",{login:e.login,uki:e.uki,teamId:e.teamId??null})}},87327:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDirectPayment=t.makeWSPremium=void 0;const o=r(66646),n="premium",i=3;t.makeWSPremium=()=>({status:e=>function(e){return(0,o._makeRequest)(n,i,"status",{login:e.login,uki:e.uki,billingInformation:e.billingInformation,spaces:e.spaces,autoRenewal:e.autoRenewal,familyInformation:e.familyInformation,previousPlan:e.previousPlan,needsAutoRenewalFailed:e.needsAutoRenewalFailed,teamInformation:!1,capabilities:!0}).then((e=>{if(!e.success)throw new Error("failed fetching premium status");return e.hasOwnProperty("billingInformation")&&(e.billingInformation=function(e){if(!e)return;return{cardExpirationYear:Number(e.card_exp_year),cardExpirationMonth:Number(e.card_exp_month),cardLast4Digits:Number(e.card_last4),cardType:e.card_type}}(e.billingInformation)),e}))}(e),setAutoRenewal:e=>function(e){return(0,o._makeRequest)(n,i,"setAutoRenewal",{login:e.login,uki:e.uki,enabled:e.enabled})}(e),updateCardToken:e=>function(e){return(0,o._makeRequest)(n,i,"updateCardToken",{login:e.login,uki:e.uki,tokenId:e.tokenId,stripeAccount:e.stripeAccount})}(e),getABTestingVersionDetails:e=>function(e){return(0,o._makeRequest)(n,i,"getABTestingVersionDetails",e)}(e),getSubscriptionCode:e=>function({login:e,uki:t}){return(0,o._makeRequest)(n,i,"getSubscriptionCode",{login:e,uki:t})}(e)}),t.getDirectPayment=function(e){return(0,o._makeRequest)(n,i,"directpayment",{login:e})}},55898:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSQA=void 0;const o=r(66646),n=1,i="qa";t.makeWSQA=()=>({tokens:e=>function(e){return(0,o._makeRequest)(i,n,"tokens",e)}(e)})},56692:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSRecovery=void 0;const o=r(66646),n=1,i="recovery";t.makeWSRecovery=()=>({getSetupRequisites:e=>async function(e){return(0,o._makeRequest)(i,n,"getSetupRequisites",e)}(e),setRecoveryClientKeys:e=>async function(e){return(0,o._makeRequest)(i,n,"setRecoveryClientKeys",e)}(e),request:e=>async function(e){return(0,o._makeRequest)(i,n,"request",e)}(e),getPendingRequests:e=>async function(e){const{content:t}=await(0,o._makeRequest)(i,n,"getPendingRequests",e);return t}(e),acceptRequest:e=>async function(e){return(0,o._makeRequest)(i,n,"accept",e)}(e),refuseRequest:e=>async function(e){return(0,o._makeRequest)(i,n,"refuse",e)}(e),cancelRequest:e=>async function(e){return(0,o._makeRequest)(i,n,"cancel",e)}(e)})},90732:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSSecureFile=void 0;const o=r(66646),n=1,i="securefile";function a(e){return(0,o._makeRequest)(i,n,"getDownloadLink",e)}function s(e){return(0,o._makeRequest)(i,n,"delete",e)}function c(e){return(0,o._makeRequest)(i,n,"getUploadLink",e)}function u(e){return(0,o._makeRequest)(i,n,"commit",e)}t.makeWSSecureFile=()=>({getDownloadLink:a,getUploadLink:c,commit:u,delete:s})},66696:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setTeamSettings=t.getTeamSettings=t.makeWSSettings=void 0;const o=r(66646),n=1,i="teamPlans";function a(e){return(0,o._makeRequest)(i,n,"status",e)}function s(e){return(0,o._makeRequest)(i,n,"editSettings",e)}t.makeWSSettings=()=>({getTeamSettings:e=>a(e),setTeamSettings:e=>s(e)}),t.getTeamSettings=a,t.setTeamSettings=s},64528:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeSharingWS=t.get=void 0;const o=r(66646),n=2,i="sharing";function a(e,t,r){const a={login:e,uki:t,action:JSON.stringify(r)};return(0,o._makeRequest)(i,n,"get",a).then((({content:e})=>e))}t.get=a;t.makeSharingWS=()=>({get:(e,t,r)=>a(e,t,r)})},98892:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemWS=void 0;const o=r(66646),n=2,i="sharing",a="performItemGroupAction";t.makeItemWS=()=>({updateItem:(e,t,r)=>function(e,t,r){const s={login:e,uki:t,action:JSON.stringify(r)};return(0,o._makeRequest)(i,n,a,s).then((e=>{const t=e.content,r=t.itemErrors;if(r&&r.length>0)throw new Error(r[0].message);return t}))}(e,t,r)})},63698:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemGroupWS=void 0;const o=r(66646),n=2,i="sharing",a="performItemGroupAction";function s(e,t,r){const s={login:e,uki:t,action:JSON.stringify(r)};return(0,o._makeRequest)(i,n,a,s).then((e=>{const t=e.content,r=t.itemGroupErrors;if(r&&r.length>0)throw new Error(r[0].message);const{itemGroups:o,items:n}=t;return{itemGroups:o,items:n}}))}t.makeItemGroupWS=()=>({createSpecialItemGroup:(e,t,r)=>s(e,t,r).then((({itemGroups:e})=>e&&e[0])),createItemGroup:s,deleteGroup:(e,t,r)=>s(e,t,r),addItems:(e,t,r)=>s(e,t,r),updateItem:(e,t,r)=>s(e,t,r),removeItems:(e,t,r)=>s(e,t,r),acceptItemGroup:s,refuseItemGroup:s,inviteItemGroupMembers:s,revokeItemGroupMembers:s,updateItemGroupMembers:s})},52931:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserGroupWS=void 0;const o=r(66646),n=1,i="userGroup",a="performUserGroupAction";function s(e,t,r){const s={login:e,uki:t,action:JSON.stringify(r)};return(0,o._makeRequest)(i,n,a,s).then((e=>{const{itemGroups:t,items:r,userGroupErrors:o,userGroups:n}=e.content;if(o&&o.length>0)throw new Error(o[0].message);return{itemGroups:t,items:r,userGroups:n}}))}t.makeUserGroupWS=()=>({create:(e,t,r)=>s(e,t,r),delete:(e,t,r)=>s(e,t,r),rename:(e,t,r)=>s(e,t,r),invite:(e,t,r)=>s(e,t,r),revoke:(e,t,r)=>s(e,t,r),update:(e,t,r)=>s(e,t,r),accept:(e,t,r)=>s(e,t,r),refuse:(e,t,r)=>s(e,t,r)})},12832:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CheckChangePasswordStatus=t.makeWSStrongAuth=void 0;const o=r(66646),n=r(95623),i=3,a="strongauth";var s;t.makeWSStrongAuth=()=>({checkChangeMasterPassword:e=>function({login:e,otp:t,deviceId:r}){return(0,o._makeRequest)(a,i,"getServerKey",{login:e,otp:t,deviceID:r,isMxAware:!0}).then((e=>{if(n.default.log("checkChangeMasterPassword: "+(e?JSON.stringify(e):"response null")),!e||!e.message)throw new Error("Unknown response from server");if(void 0===s[e.message])throw new Error(`unknown_message - ${JSON.stringify(e)}`);return{status:s[e.message],content:e.content}}))}(e)}),function(e){e[e.Unauthorized=0]="Unauthorized",e[e.OK=1]="OK"}(s=t.CheckChangePasswordStatus||(t.CheckChangePasswordStatus={}))},42883:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSTeamPlans=void 0;const o=r(66646),n=1,i="teamPlans";t.makeWSTeamPlans=()=>({findUserGroups:e=>function(e){return(0,o._makeRequest)(i,n,"findUserGroups",e)}(e),proposeMembers:e=>function(e){return(0,o._makeRequest)(i,n,"proposeMembers",e)}(e),acceptTeam:e=>function(e){return(0,o._makeRequest)(i,n,"acceptTeam",e)}(e),addTeamAdmin:e=>function(e){return(0,o._makeRequest)(i,n,"addTeamCaptain",e)}(e),removeTeamAdmin:e=>function(e){return(0,o._makeRequest)(i,n,"removeTeamCaptain",e)}(e),registerFreeTrial:e=>function(e){return(0,o._makeRequest)(i,n,"registerFreeTrial",e)}(e),confirmFreeTrial:e=>function(e){return(0,o._makeRequest)(i,n,"confirmFreeTrial",e)}(e),getDirectorySyncRequest:e=>function(e){return(0,o._makeRequest)(i,n,"getDirectorySyncRequest",e)}(e),updateDirectorySyncRequestStatus:e=>function(e){return(0,o._makeRequest)(i,n,"updateDirectorySyncRequestStatus",e)}(e),spaceDeleted:e=>function(e){return(0,o._makeRequest)(i,n,"spaceDeleted",e)}(e)})},85870:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.makeWSUserActivity=void 0;const o=r(66646),n="useractivity",i=2;async function a(e){return await(0,o._makeRequest)(n,i,"create",e)}t.makeWSUserActivity=()=>({create:a}),t.create=a},50141:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSUserAlias=void 0;const o=r(66646),n=1,i="userAlias";t.makeWSUserAlias=()=>({findUsersByAliases:e=>function(e){return(0,o._makeRequest)(i,n,"findUsers",{login:e.login,uki:e.uki,aliases:e.aliases}).then((e=>e.content))}(e)})},32607:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isWSResponseSuccess=void 0,t.isWSResponseSuccess=function(e){return 200===e.code}},89016:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSService=void 0;const o=r(72636),n=r(5692),i=r(69376),a=r(32868),s=r(35595),c=r(66316),u=r(87327),d=r(56692),l=r(12832),p=r(42883),S=r(50141),g=r(66696),E=r(63698),y=r(55898),_=r(64528),A=r(32239),m=r(33633),T=r(52931),v=r(85870),f=r(56776),h=r(90732);t.makeWSService=()=>({authentication:(0,o.makeWSAuthentication)(),backup:(0,A.makeWSBackup)(),breaches:(0,m.makeWSBreaches)(),contactInfo:(0,n.makeWSContactInfo)(),country:(0,i.makeWSCountry)(),dataleaks:(0,a.makeWSDataLeaks)(),devices:(0,s.makeWSDevices)(),features:(0,c.makeWSFeatures)(),iconCrawler:(0,f.makeWSIconCrawler)(),itemGroup:(0,E.makeItemGroupWS)(),premium:(0,u.makeWSPremium)(),recovery:(0,d.makeWSRecovery)(),settings:(0,g.makeWSSettings)(),strongAuth:(0,l.makeWSStrongAuth)(),teamPlans:(0,p.makeWSTeamPlans)(),userAlias:(0,S.makeWSUserAlias)(),sharing:(0,_.makeSharingWS)(),userGroup:(0,T.makeUserGroupWS)(),qa:(0,y.makeWSQA)(),userActivity:(0,v.makeWSUserActivity)(),secureFile:(0,h.makeWSSecureFile)()})},66646:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._makeRequest=t.WsError=void 0;const o=r(28445),n=r(92263),i=r(45800),a=r(20750),s=r(48749);!function(e){e[e.THROTTLED=-999]="THROTTLED"}(t.WsError||(t.WsError={})),t._makeRequest=function(e,t,r,c,u){const d=`${s.config.DASHLANE_WS_HOST_WITH_SCHEME}/${t}/${e}/${r}`,l={...u,headers:{...(0,i.getCloudflareHeaders)()}};return(0,o.postDataToUrl)(d,c,l).then((e=>{const t="string"==typeof e?e:e.data;return function(e,t){if("string"==typeof t)return t;if(429===t.code||t.error&&-32600===t.error.code){throw new n.CarbonError(a.WSError,a.WSErrorCode.THROTTLED).addAdditionalInfo({webService:e})}const r="code"in t&&200!==t.code||"success"in t&&!t.success||"error"in t&&t.error;if(r){throw new n.CarbonError(a.WSError,a.WSErrorCode.REQUEST_FAILED).addAdditionalInfo({webService:e,message:t.message,webServiceSubMessage:t.content?.message||t.content?.error||t.content,code:t.code})}return t}(d,t)}))}},61384:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.freeWorker=t.getWorker=t.getWorkerPath=t.setWorkerPath=t.setWorkersPath=void 0;const o=r(11814);let n={};t.setWorkersPath=function(e){n=e},t.setWorkerPath=function(e,t){n[e]=t},t.getWorkerPath=function(e){return n[e]};const i=[],a=[];function s(e){const t=new Worker(e);return i.push(t),t}t.getWorker=function(e){return new Promise((t=>{if(i.length<function(){const e=o.navigator.getNavigator();return e&&e.hardwareConcurrency?e.hardwareConcurrency:4}()){t(s(e))}else a.push({resolve:t,path:e})}))},t.freeWorker=function(e){const t=i.indexOf(e);if(t<0)console.error("freeWorker: trying to terminate a worker that does not exist");else if(e.terminate(),i.splice(t,1),a.length>0){const{resolve:e,path:t}=a.shift();e(s(t))}}},81885:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.KWXMLError=t.KWXMLErrorMessages=t.KWXMLErrorCode=void 0,function(e){e[e.PARSING_FAILED=0]="PARSING_FAILED"}(r=t.KWXMLErrorCode||(t.KWXMLErrorCode={})),t.KWXMLErrorMessages={[r.PARSING_FAILED]:"Failed to parse Dashlane XML"},t.KWXMLError={codes:r,name:"KWXMLError",messages:t.KWXMLErrorMessages}},61797:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.findAllKWXMLElementsOfType=t.removeNamespace=t.getDashlaneXml=t.parseDashlaneXml=void 0;const o=r(16516),n=r(44015),i=r(92263),a=r(81885),s=r(54218),c=r(51104),u=r(63985);function d(e){const t={KWAuthentifiant:u.fixCredentialTypesFromStore,KWSecureNote:u.fixNoteTypesFromStore,KWSecurityBreach:u.fixBreachTypesFromStore,KWSettingsManagerApp:c.fixPersonalSettingTypes.fromStore};let r=(0,o.compose)((0,o.reject)(o.isNil),(0,o.omit)((0,o.defaultTo)([],{KWAuthentifiant:["domainIcon"],KWSettingsManagerApp:["kwType","LastBackupTime","Id"]}[e.kwType])))(function(e,t){function r(t){return(0,s.default)(t)?Object.keys(t).reduce(((n,i)=>{const a=e[i]||i,c=t[i];return Array.isArray(c)?n[a]=c.map((0,o.unary)(r)):(0,s.default)(c)?n[a]=r(c):n[a]=c,n}),{}):t}return r(t)}({kwType:"__type__"},e));return t[e.kwType]&&(r=t[e.kwType](r)),r}function l(e){if(e.includes(":")){const t=e.indexOf(":");return e.substring(t+1,e.length)}return e}t.parseDashlaneXml=async function(e){try{return await new Promise(((t,r)=>{(0,n.parseXml)(((e,o)=>e?r(e):t(o)),e,{fixType:!1})}))}catch(e){throw new i.CarbonError(a.KWXMLError,a.KWXMLErrorCode.PARSING_FAILED).addAdditionalInfo({libError:`${e}`})}},t.getDashlaneXml=function(e){const t=Array.isArray(e)?(0,o.map)(d,e):d(e);return(0,n.toXml)(t,{pretty:!1,allowEmpty:!0})},t.removeNamespace=l,t.findAllKWXMLElementsOfType=function e(t,r,o=[]){if(l(t.__type__)===r&&o.push(t),t.__children__&&t.__children__.length>0)for(let i=0;i<t.__children__.length;i++){const a=t.__children__[i];(0,n.isKWXMLElement)(a)&&e(a,r,o)}return o}},46430:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(9639),n=r(81080),i=r(18039),a=r(15876),s=r(63093),c=r(36172),u=r(69718);t.config={commands:{abortDeviceLimitFlow:{handler:c.abortDeviceLimitFlow},loginViaSSO:{handler:o.loginViaSSO},addLoginNotification:{handler:u.addLoginNotification},unlinkPreviousDevice:{handler:i.unlinkPreviousDevice},unlinkMultipleDevices:{handler:a.unlinkMultipleDevices}},queries:{getLoginDeviceLimitFlow:{selector:n.viewedLoginDeviceLimitFlowSelector}},liveQueries:{liveLoginDeviceLimitFlow:{operator:s.loginDeviceLimitFlowView$}}}},6629:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.LoginDeviceLimitFlowStage=t.USER_STILL_OVERFLOWING=t.AuthenticationCode=t.SsoMigrationServerMethod=t.LoginViaSsoCode=void 0;var i=r(92029);Object.defineProperty(t,"LoginViaSsoCode",{enumerable:!0,get:function(){return i.LoginViaSsoCode}}),Object.defineProperty(t,"SsoMigrationServerMethod",{enumerable:!0,get:function(){return i.SsoMigrationServerMethod}});var a=r(25576);Object.defineProperty(t,"AuthenticationCode",{enumerable:!0,get:function(){return a.AuthenticationCode}});var s=r(93841);Object.defineProperty(t,"USER_STILL_OVERFLOWING",{enumerable:!0,get:function(){return s.USER_STILL_OVERFLOWING}});var c=r(31240);Object.defineProperty(t,"LoginDeviceLimitFlowStage",{enumerable:!0,get:function(){return c.LoginDeviceLimitFlowStage}}),n(r(37888),t),n(r(10137),t),n(r(39460),t),n(r(61268),t)},20938:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unlinkMultipleDevicesErrorReached=t.multipleDevicesLimitStillReached=t.oneDeviceLimitStillReached=t.sessionOpenedAfterDeviceLimitRemoval=t.refreshDeviceLimitStatusFailed=t.deviceLimitRemoved=t.deviceLimitStatusUpdated=t.unlinkingSucceeded=t.unlinkingFailed=t.unlinkingMultipleDevicesRequested=t.unlinkPreviousDeviceRequested=t.multipleDevicesLimitReached=t.oneDeviceLimitReached=t.UNLINK_MULTIPLE_DEVICES_ERROR=t.UNLINKING_SUCCEEDED=t.UNLINKING_FAILED=t.UNLINK_MULTIPLE_DEVICES_REQUESTED=t.UNLINK_PREVIOUS_DEVICE_REQUESTED=t.SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL=t.REFRESH_DEVICE_LIMIT_STATUS_FAILED=t.MULTIPLE_DEVICES_LIMIT_STILL_REACHED=t.MULTIPLE_DEVICES_LIMIT_REACHED=t.ONE_DEVICE_LIMIT_STILL_REACHED=t.ONE_DEVICE_LIMIT_REACHED=t.DEVICE_LIMIT_STATUS_UPDATED=t.DEVICE_LIMIT_REMOVED=void 0,t.DEVICE_LIMIT_REMOVED="DEVICE_LIMIT_REMOVED",t.DEVICE_LIMIT_STATUS_UPDATED="DEVICE_LIMIT_STATUS_UPDATED",t.ONE_DEVICE_LIMIT_REACHED="ONE_DEVICE_LIMIT_REACHED",t.ONE_DEVICE_LIMIT_STILL_REACHED="ONE_DEVICE_LIMIT_STILL_REACHED",t.MULTIPLE_DEVICES_LIMIT_REACHED="MULTIPLE_DEVICES_LIMIT_REACHED",t.MULTIPLE_DEVICES_LIMIT_STILL_REACHED="MULTIPLE_DEVICES_LIMIT_STILL_REACHED",t.REFRESH_DEVICE_LIMIT_STATUS_FAILED="REFRESH_DEVICE_LIMIT_STATUS_FAILED",t.SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL="SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL",t.UNLINK_PREVIOUS_DEVICE_REQUESTED="UNLINK_PREVIOUS_DEVICE_REQUESTED",t.UNLINK_MULTIPLE_DEVICES_REQUESTED="UNLINK_MULTIPLE_DEVICES_REQUESTED",t.UNLINKING_FAILED="UNLINKING_FAILED",t.UNLINKING_SUCCEEDED="UNLINKING_SUCCEEDED",t.UNLINK_MULTIPLE_DEVICES_ERROR="UNLINK_MULTIPLE_DEVICES_ERROR";t.oneDeviceLimitReached=e=>({type:t.ONE_DEVICE_LIMIT_REACHED,deviceLimitStatus:e.deviceLimitStatus,login:e.login,subscriptionCode:e.subscriptionCode});t.multipleDevicesLimitReached=e=>({type:t.MULTIPLE_DEVICES_LIMIT_REACHED,deviceLimitStatus:e.deviceLimitStatus,login:e.login,subscriptionCode:e.subscriptionCode});t.unlinkPreviousDeviceRequested=()=>({type:t.UNLINK_PREVIOUS_DEVICE_REQUESTED});t.unlinkingMultipleDevicesRequested=()=>({type:t.UNLINK_MULTIPLE_DEVICES_REQUESTED});t.unlinkingFailed=()=>({type:t.UNLINKING_FAILED});t.unlinkingSucceeded=()=>({type:t.UNLINKING_SUCCEEDED});t.deviceLimitStatusUpdated=()=>({type:t.DEVICE_LIMIT_STATUS_UPDATED});t.deviceLimitRemoved=()=>({type:t.DEVICE_LIMIT_REMOVED});t.refreshDeviceLimitStatusFailed=()=>({type:t.REFRESH_DEVICE_LIMIT_STATUS_FAILED});t.sessionOpenedAfterDeviceLimitRemoval=()=>({type:t.SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL});t.oneDeviceLimitStillReached=e=>({type:t.ONE_DEVICE_LIMIT_STILL_REACHED,updatedDeviceLimitStatus:e.updatedDeviceLimitStatus});t.multipleDevicesLimitStillReached=e=>({type:t.MULTIPLE_DEVICES_LIMIT_STILL_REACHED,updatedDeviceLimitStatus:e.updatedDeviceLimitStatus});t.unlinkMultipleDevicesErrorReached=e=>({type:t.UNLINK_MULTIPLE_DEVICES_ERROR,retryPayload:e.retryPayload})},15868:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyLoginDeviceLimitFlowState=void 0;const o=r(20938),n=r(31240),i=r(10984),a=r(17825),s=(e,t)=>t.type===o.ONE_DEVICE_LIMIT_REACHED?(0,i.atOneDeviceLimitReachedStage)({login:t.login,subscriptionCode:t.subscriptionCode,deviceLimitStatus:t.deviceLimitStatus}):t.type===o.MULTIPLE_DEVICES_LIMIT_REACHED?(0,i.atMultipleDevicesLimitReachedStage)({login:t.login,subscriptionCode:t.subscriptionCode,deviceLimitStatus:t.deviceLimitStatus}):e,c=(e,t)=>{switch(t.type){case o.UNLINK_PREVIOUS_DEVICE_REQUESTED:return(0,i.atUnlinkingAndOpeningSessionStage)(e);case o.DEVICE_LIMIT_STATUS_UPDATED:return(0,i.atRefreshingDeviceLimitStatusStage)(e)}return e},u=(e,t)=>{switch(t.type){case o.UNLINK_MULTIPLE_DEVICES_REQUESTED:return(0,i.atUnlinkingAndOpeningSessionStage)(e);case o.DEVICE_LIMIT_STATUS_UPDATED:return(0,i.atRefreshingDeviceLimitStatusStage)(e)}return e},d=(e,t)=>{switch(t.type){case o.UNLINK_MULTIPLE_DEVICES_ERROR:return(0,i.atUnlinkMultipleDevicesErrorStage)({...e,retryPayload:t.retryPayload});case o.UNLINK_MULTIPLE_DEVICES_REQUESTED:return(0,i.atUnlinkingAndOpeningSessionStage)(e);case o.UNLINKING_SUCCEEDED:return(0,i.atDeviceLimitDoneStage)(e)}return e},l=e=>{const{deviceLimitStatus:t}=e;switch(t._tag){case"limitedToOneDevice":return(0,i.atOneDeviceLimitReachedStage)({...e,deviceLimitStatus:t});case"limitedToMultipleDevices":return(0,i.atMultipleDevicesLimitReachedStage)({...e,deviceLimitStatus:t});default:(0,a.assertUnreachable)(t)}},p=(e,t)=>{switch(t.type){case o.ONE_DEVICE_LIMIT_STILL_REACHED:return(0,i.atOneDeviceLimitReachedStage)({...e,deviceLimitStatus:t.updatedDeviceLimitStatus});case o.MULTIPLE_DEVICES_LIMIT_STILL_REACHED:return(0,i.atMultipleDevicesLimitReachedStage)({...e,deviceLimitStatus:t.updatedDeviceLimitStatus});case o.REFRESH_DEVICE_LIMIT_STATUS_FAILED:return l(e);case o.DEVICE_LIMIT_REMOVED:return(0,i.atOpeningSessionAfterDeviceLimitRemovalStage)(e)}return e},S=(e,t)=>{switch(t.type){case o.UNLINKING_SUCCEEDED:return(0,i.atDeviceLimitDoneStage)(e);case o.UNLINKING_FAILED:return l(e);case o.UNLINK_MULTIPLE_DEVICES_ERROR:return(0,i.atUnlinkMultipleDevicesErrorStage)({...e,retryPayload:t.retryPayload})}return e};function g(){return{flow:null}}t.default=(e={flow:null},t)=>{if(null===e.flow)return{flow:s(null,t)};switch(e.flow.name){case n.LoginDeviceLimitFlowStage.OneDeviceLimitReached:return{flow:c(e.flow,t)};case n.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError:return{flow:d(e.flow,t)};case n.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached:return{flow:u(e.flow,t)};case n.LoginDeviceLimitFlowStage.RefreshingDeviceLimitStatus:return{flow:p(e.flow,t)};case n.LoginDeviceLimitFlowStage.UnlinkingAndOpeningSession:return{flow:S(e.flow,t)};case n.LoginDeviceLimitFlowStage.OpeningSessionAfterDeviceLimitRemoval:case n.LoginDeviceLimitFlowStage.DeviceLimitDone:return e;default:return(0,a.assertUnreachable)(e.flow)}},t.getEmptyLoginDeviceLimitFlowState=g},36172:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.abortDeviceLimitFlow=void 0;const o=r(34029),n=r(20698),i=r(70252);t.abortDeviceLimitFlow=async function(e){const{sessionService:t}=e;try{return await t.getInstance().user.closeSession(),{success:!0}}catch(e){const t=(0,n.augmentDeviceLimitError)(e,"abortDeviceLimitFlow");return(0,i.sendExceptionLog)({error:t}),{success:!1,error:{code:o.AbortDeviceLimitFlowError.UnexpectedError}}}}},31859:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPairingGroupDevices=t.findMyPairingGroup=t.isDevicePartOfPairingGroup=t.isDesktopPlatform=void 0;const o=r(58470);t.isDesktopPlatform=e=>e===o.Platform.DesktopLegacyWindows||e===o.Platform.DesktopLegacyMacOS||e===o.Platform.DesktopUWP;t.isDevicePartOfPairingGroup=(e,t)=>t.devices.includes(e.deviceId);t.findMyPairingGroup=(e,t)=>e.find((e=>e.pairingGroupUUID===t));t.getPairingGroupDevices=(e,t)=>t.filter((({deviceId:t})=>e.devices.includes(t)))},32573:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeDeviceInfoService=void 0;const o=r(16516),n=r(46298),i=r(58470),a={[i.Platform.Android]:"server_android",[i.Platform.CarbonSimulator]:"server_carbon_simulator",[i.Platform.CarbonTests]:"server_carbon_tests",[i.Platform.CarbonUnknown]:"server_carbon_unknown",[i.Platform.DesktopLegacyMacOS]:"server_macosx",[i.Platform.DesktopLegacyWindows]:"server_win",[i.Platform.DesktopUWP]:"desktop_win",[i.Platform.IPad]:"server_ipad",[i.Platform.IPhone]:"server_iphone",[i.Platform.IPod]:"server_ipod",[i.Platform.StandaloneExtension]:"server_standalone",[i.Platform.TeamAdminConsole]:"server_tac",[i.Platform.WebApp]:"server_leeloo",[i.Platform.WebAppDev]:"server_leeloo_dev"},s=(0,o.invertObj)(a),c=e=>{return{deviceId:e.deviceId,deviceName:e.deviceName,devicePlatform:(t=e.devicePlatform,s[t]),lastActivityDate:e.lastActivityDateUnix,isBucketOwner:e.isBucketOwner,temporary:e.temporary};var t},u=e=>({pairingGroupUUID:e.pairingGroupUUID,devices:e.devices,isBucketOwner:e.isBucketOwner});t.makeDeviceInfoService=e=>({getDevicesInfo:t=>(async(e,t)=>{const r=await n.listDevices(e,t);if(n.isApiError(r))throw new Error(`Failed to get devices: ${r.message}`);return{devices:r.devices.map(c),pairingGroups:r.pairingGroups.map(u)}})(e,t)})},58470:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Platform=void 0,function(e){e[e.Android=0]="Android",e[e.CarbonSimulator=1]="CarbonSimulator",e[e.CarbonTests=2]="CarbonTests",e[e.CarbonUnknown=3]="CarbonUnknown",e[e.DesktopLegacyMacOS=4]="DesktopLegacyMacOS",e[e.DesktopLegacyWindows=5]="DesktopLegacyWindows",e[e.DesktopUWP=6]="DesktopUWP",e[e.IPad=7]="IPad",e[e.IPhone=8]="IPhone",e[e.IPod=9]="IPod",e[e.StandaloneExtension=10]="StandaloneExtension",e[e.TeamAdminConsole=11]="TeamAdminConsole",e[e.WebApp=12]="WebApp",e[e.WebAppDev=13]="WebAppDev"}(t.Platform||(t.Platform={}))},89961:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toPlatformView=void 0;const o=r(58470),n=r(10137),i={[o.Platform.Android]:n.PlatformView.Android,[o.Platform.CarbonSimulator]:n.PlatformView.Other,[o.Platform.CarbonTests]:n.PlatformView.Other,[o.Platform.CarbonUnknown]:n.PlatformView.Other,[o.Platform.DesktopLegacyMacOS]:n.PlatformView.DesktopMacOS,[o.Platform.DesktopLegacyWindows]:n.PlatformView.DesktopWindows,[o.Platform.DesktopUWP]:n.PlatformView.DesktopWindows,[o.Platform.IPad]:n.PlatformView.IPad,[o.Platform.IPhone]:n.PlatformView.IPhone,[o.Platform.IPod]:n.PlatformView.IPod,[o.Platform.StandaloneExtension]:n.PlatformView.StandaloneExtension,[o.Platform.TeamAdminConsole]:n.PlatformView.TeamAdminConsole,[o.Platform.WebApp]:n.PlatformView.WebApp,[o.Platform.WebAppDev]:n.PlatformView.WebApp};t.toPlatformView=e=>i[e]},10137:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformView=void 0,function(e){e.Android="android",e.DesktopMacOS="macosx",e.DesktopWindows="windows",e.IPad="ipad",e.IPhone="iphone",e.IPod="ipod",e.Other="other",e.StandaloneExtension="saex",e.TeamAdminConsole="tac",e.WebApp="webapp"}(t.PlatformView||(t.PlatformView={}))},49154:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceLimitCapabilityEventBus=void 0;t.DeviceLimitCapabilityEventBus=class{constructor(e,t){this.services=e,this.connector=t}register(e){const t=[];return Object.keys(e).forEach((r=>{const{handler:o}=e[r],n=this.connector[r].on((()=>o(this.services)));t.push(n)})),()=>{t.forEach((e=>e()))}}}},99080:(e,t,r)=>{t.r=void 0;const o=r(71796);t.r={deviceLimitCapabilityUpdated:(0,o.slot)()}},27331:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceLimitFlowEventsManager=t.DeviceLimitFlowEventsManager=void 0;const o=r(28354),n=r(63093),i=r(3343);class a{constructor(e){this.registrations=[];e.getState$().pipe((0,n.loginDeviceLimitFlow$)(),(0,i.pairwise)()).subscribe(this.onTransition.bind(this))}addEventListener(e,t){const r=(0,o.v4)();return this.registrations.push({id:r,event:e,listener:t}),r}removeTransitionEventListener(e){this.registrations=this.registrations.filter((t=>t.id!==e))}onTransition([e,t]){this.registrations.forEach((({event:r,listener:o})=>{("exit"===r.type&&r.from===e?.name||"entry"===r.type&&r.to===t?.name)&&o(r)}))}}let s;t.DeviceLimitFlowEventsManager=a;t.getDeviceLimitFlowEventsManager=e=>(s||(s=new a(e)),s)},10984:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.atUnlinkMultipleDevicesErrorStage=t.atDeviceLimitDoneStage=t.atRefreshingDeviceLimitStatusStage=t.atOpeningSessionAfterDeviceLimitRemovalStage=t.atUnlinkingAndOpeningSessionStage=t.atMultipleDevicesLimitReachedStage=t.atOneDeviceLimitReachedStage=void 0;const o=r(31240);t.atOneDeviceLimitReachedStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.OneDeviceLimitReached});t.atMultipleDevicesLimitReachedStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached});t.atUnlinkingAndOpeningSessionStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.UnlinkingAndOpeningSession});t.atOpeningSessionAfterDeviceLimitRemovalStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.OpeningSessionAfterDeviceLimitRemoval});t.atRefreshingDeviceLimitStatusStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.RefreshingDeviceLimitStatus});t.atDeviceLimitDoneStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.DeviceLimitDone});t.atUnlinkMultipleDevicesErrorStage=e=>({...e,deviceLimitStatus:e.deviceLimitStatus,name:o.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError})},63093:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginDeviceLimitFlowView$=t.loginDeviceLimitFlow$=void 0;const o=r(18948),n=r(3343),i=r(81080);t.loginDeviceLimitFlow$=()=>(0,o.pipe)((0,n.map)(i.loginDeviceLimitFlowSelector),(0,n.distinctUntilChanged)(((e,t)=>e?.name===t?.name)));t.loginDeviceLimitFlowView$=()=>(0,o.pipe)((0,n.map)(i.viewedLoginDeviceLimitFlowSelector),(0,n.distinctUntilChanged)(((e,t)=>e?.name===t?.name)))},81080:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.viewedLoginDeviceLimitFlowSelector=t.loginDeviceLimitFlowSelector=void 0;const o=r(46802);t.loginDeviceLimitFlowSelector=e=>e.userSession.loginDeviceLimitFlow.flow;t.viewedLoginDeviceLimitFlowSelector=e=>{const r=(0,t.loginDeviceLimitFlowSelector)(e);return r?(0,o.toLoginDeviceLimitFlowView)(r):null}},31240:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoginDeviceLimitFlowStage=void 0,function(e){e.OneDeviceLimitReached="OneDeviceLimitReached",e.MultipleDevicesLimitReached="MultipleDevicesLimitReached",e.UnlinkingAndOpeningSession="UnlinkingAndOpeningSession",e.UnlinkingMultipleDevicesError="UnlinkingMultipleDevicesError",e.RefreshingDeviceLimitStatus="RefreshingDeviceLimitStatus",e.OpeningSessionAfterDeviceLimitRemoval="OpeningSessionAfterDeviceLimitRemoval",e.DeviceLimitDone="DeviceLimitDone"}(t.LoginDeviceLimitFlowStage||(t.LoginDeviceLimitFlowStage={}))},46802:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toLoginDeviceLimitFlowView=t.toMultipleDevicesLimitErrorStageView=t.toMultipleDevicesLimitReachedStageView=void 0;const o=r(31240),n=r(35520),i=r(88068),a=r(17825);t.toMultipleDevicesLimitReachedStageView=e=>({name:o.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached,login:e.login,devicesToDeactivate:e.deviceLimitStatus.devices.map(i.toDeviceToDeactivateInfoView),subscriptionCode:e.subscriptionCode});t.toMultipleDevicesLimitErrorStageView=e=>({name:o.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError,login:e.login,retryPayload:e.retryPayload,subscriptionCode:e.subscriptionCode});t.toLoginDeviceLimitFlowView=e=>{switch(e.name){case o.LoginDeviceLimitFlowStage.OneDeviceLimitReached:return s=e,{name:o.LoginDeviceLimitFlowStage.OneDeviceLimitReached,login:s.login,previousDevice:(0,n.toPreviousDeviceInfo)(s.deviceLimitStatus.bucketOwner),subscriptionCode:s.subscriptionCode};case o.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached:return(0,t.toMultipleDevicesLimitReachedStageView)(e);case o.LoginDeviceLimitFlowStage.UnlinkingAndOpeningSession:case o.LoginDeviceLimitFlowStage.DeviceLimitDone:case o.LoginDeviceLimitFlowStage.RefreshingDeviceLimitStatus:case o.LoginDeviceLimitFlowStage.OpeningSessionAfterDeviceLimitRemoval:return r=e.name,i=e.login,{name:r,login:i};case o.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError:return(0,t.toMultipleDevicesLimitErrorStageView)(e);default:return(0,a.assertUnreachable)(e)}var r,i,s}},37888:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},85822:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.startDeviceLimitFlow=t.getDeviceLimitStatus=t.attemptGetDeviceLimitStatus=void 0;const o=r(88205),n=r(16593),i=r(15718),a=r(82652),s=r(22589),c=r(32573),u=r(36077),d=r(20938),l=r(90622),p=r(56915),S=r(38981),g=r(92263),E=r(14656);t.attemptGetDeviceLimitStatus=async e=>{try{return await Promise.race([(0,t.getDeviceLimitStatus)(e),new Promise((e=>setTimeout((()=>e((0,u.noDeviceLimit)())),3e3)))])}catch(e){return(e=>{if(!(0,g.isCarbonError)(e,E.HttpError,E.HttpErrorCode.NETWORK_ERROR)&&!(0,g.isCarbonError)(e,E.HttpError,E.HttpErrorCode.CONNECTION_ABORTED)&&!(0,g.isCarbonError)(e,E.HttpError,E.HttpErrorCode.CONNECTION_TIMED_OUT))throw e;return(0,u.noDeviceLimit)()})(e)}};t.getDeviceLimitStatus=async e=>{const{storeService:t}=e,r=t.getState();if((0,S.isSSOUserSelector)(r))return(0,u.noDeviceLimit)();const d=(0,o.featuresSelector)(r),g=(0,i.pairingIdSelector)(r),E=(0,n.premiumStatusSelector)(r),y=(0,n.userLoginSelector)(r),_=(0,c.makeDeviceInfoService)(t),A=await _.getDevicesInfo(y),m=(0,p.getDeviceIdSelector)(r,y),T=(0,l.deviceKeysSelector)(t.getState()),v=(0,a.isOneDeviceLimitApplicable)(d,g,A,m,E);if("limitedToOneDevice"===v._tag)return(0,u.limitedToOneDevice)(v.bucketOwner);const f=(0,s.isMultipleDevicesLimitApplicable)(A,E,T);return"limitedToMultipleDevices"===f._tag?(0,u.limitedToMultipleDevices)(f.devices):(0,u.noDeviceLimit)()};t.startDeviceLimitFlow=async(e,t)=>{const{sessionService:r,storeService:o}=e,i=o.getState(),a=(0,n.userLoginSelector)(i),s=r.getInstance().user,c=await s.fetchSubscriptionCode();if("limitedToOneDevice"===t._tag){const e=(0,d.oneDeviceLimitReached)({deviceLimitStatus:t,subscriptionCode:c,login:a});o.dispatch(e)}else if("limitedToMultipleDevices"===t._tag){const e=(0,d.multipleDevicesLimitReached)({deviceLimitStatus:t,subscriptionCode:c,login:a});o.dispatch(e)}}},36077:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.noDeviceLimit=t.limitedToMultipleDevices=t.limitedToOneDevice=void 0;t.limitedToOneDevice=e=>({_tag:"limitedToOneDevice",bucketOwner:e});t.limitedToMultipleDevices=e=>({_tag:"limitedToMultipleDevices",devices:e});t.noDeviceLimit=()=>({_tag:"noDeviceLimit"})},34029:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AbortDeviceLimitFlowError=void 0,function(e){e.UnexpectedError="UNEXPECTED_ERROR"}(t.AbortDeviceLimitFlowError||(t.AbortDeviceLimitFlowError={}))},75903:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refreshDeviceLimitStatus=void 0;const o=r(70252),n=r(88610),i=r(20698),a=r(20938),s=r(85822);t.refreshDeviceLimitStatus=async e=>{const{sessionService:t,storeService:r}=e;try{const c=t.getInstance().user;await c.refreshSessionData();const u=await(0,s.getDeviceLimitStatus)(e);if("noDeviceLimit"===u._tag)r.dispatch((0,a.deviceLimitRemoved)()),await(async e=>{const{sessionService:t,storeService:r}=e;try{await(0,n.sessionDidOpen)(e),r.dispatch((0,a.sessionOpenedAfterDeviceLimitRemoval)())}catch(r){(0,i.notifyDeviceLimitError)(e,r);const n=(0,i.augmentDeviceLimitError)(r,"openSessionAfterDeviceLimitRemoval");(0,o.sendExceptionLog)({error:n}),t.close()}})(e);else if("limitedToOneDevice"===u._tag){const e=(0,a.oneDeviceLimitStillReached)({updatedDeviceLimitStatus:u});r.dispatch(e)}else if("limitedToMultipleDevices"===u._tag){const e=(0,a.multipleDevicesLimitStillReached)({updatedDeviceLimitStatus:u});r.dispatch(e)}}catch(e){r.dispatch((0,a.refreshDeviceLimitStatusFailed)());const t=(0,i.augmentDeviceLimitError)(e,"refreshDeviceLimitStatus");(0,o.sendExceptionLog)({error:t})}}},20698:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.augmentDeviceLimitError=t.notifyDeviceLimitError=void 0;const o=r(16373),n=r(40042),i=e=>"object"==typeof e&&e instanceof Error,a=e=>i(e)?e.message:"No valid error reported";t.notifyDeviceLimitError=async function(e,t){const{storeService:r}=e,i=(0,o.addNewLoginNotification)({type:n.LoginNotificationType.UNKNOWN_ERROR,message:a(t)});r.dispatch(i)},t.augmentDeviceLimitError=function(e,t){const r=`[DeviceLimit] - ${t}: ${a(e)}`,o=new Error(r);return i(e)&&(o.stack=e.stack),o}},22589:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isMultipleDevicesLimitApplicable=void 0;const o=r(87314),n=(e,t)=>t.lastActivityDate-e.lastActivityDate;t.isMultipleDevicesLimitApplicable=(e,t,r)=>{if((t?.capabilities?.devicesLimit?.info?.limit||0)<=1)return(0,o.notLimitedToMultipleDevices)();const{nonPairedDevices:i,pairingGroups:a}=(({pairingGroups:e,devices:t})=>{const r=t.filter((t=>!e.find((e=>e.devices.includes(t.deviceId)))&&t),[]);return{pairingGroups:e,nonPairedDevices:r}})(e);if(t.capabilities.devicesLimit.info.limit<i.length+a.length){const t=(({pairingGroups:e,devices:t,nonPairedDevices:r,deviceKeys:o})=>{const i=[...t].sort(n),a=[];for(const r of e){let e;e=r.devices.includes(o?.accessKey)?{...t.find((e=>e.deviceId===o?.accessKey)),isCurrentDevice:!0}:i.find((e=>r.devices.includes(e.deviceId))),a.push({...e,deviceId:r.pairingGroupUUID,isPairingGroup:!0})}const s=r.map((e=>e.deviceId===o?.accessKey?{...e,isCurrentDevice:!0}:e));return[...a,...s].sort(n)})({devices:e.devices,nonPairedDevices:i,pairingGroups:a,deviceKeys:r});return(0,o.limitedToMultipleDevices)(t)}return(0,o.notLimitedToMultipleDevices)()}},87314:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.limitedToMultipleDevices=t.notLimitedToMultipleDevices=void 0;t.notLimitedToMultipleDevices=()=>({_tag:"notLimitedToMultipleDevices"});t.limitedToMultipleDevices=e=>({_tag:"limitedToMultipleDevices",devices:e})},93841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UNEXPECTED_ERROR=t.USER_STILL_OVERFLOWING=void 0,t.USER_STILL_OVERFLOWING="USER_STILL_OVERFLOWING",t.UNEXPECTED_ERROR="UNEXPECTED_ERROR"},88068:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toDeviceToDeactivateInfoView=void 0;const o=r(89961),n=r(10137);t.toDeviceToDeactivateInfoView=e=>({...e,platform:e.devicePlatform?(0,o.toPlatformView)(e.devicePlatform):n.PlatformView.Other})},61268:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},82652:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMonoBucketOwner=t.isOneDeviceLimitApplicable=void 0;const o=r(16516),n=r(31859),i=r(44179),a="MonoBucket_carbon_release";function s(e){const{devices:t,pairingGroups:r}=e;let i=null,a=t.find((e=>e.isBucketOwner))??null;if(!a&&(i=r.find((e=>e.isBucketOwner))??null,i)){const e=(0,n.getPairingGroupDevices)(i,t),r=(e,t)=>e.lastActivityDate-t.lastActivityDate;e.sort(r);const s=e=>Boolean(e.devicePlatform&&(0,n.isDesktopPlatform)(e.devicePlatform)),c=(0,o.partition)(s,e);a=(0,o.unnest)(c)[0]||null}return{bucketOwner:a,bucketOwnerPairingGroup:i}}t.isOneDeviceLimitApplicable=function(e,t,r,o,c){const{bucketOwner:u,bucketOwnerPairingGroup:d}=s(r),{pairingGroups:l}=r;if(!(e&&e[a]))return(0,i.notLimitedToOneDevice)();if(!Boolean(1===c?.capabilities?.devicesLimit?.info?.limit))return(0,i.notLimitedToOneDevice)();const p=!(!d||!t)&&d.pairingGroupUUID===t,S=(0,n.findMyPairingGroup)(l,t??""),g=!(!u||!S)&&(0,n.isDevicePartOfPairingGroup)(u,S);return!u||u.deviceId===o||p||g?(0,i.notLimitedToOneDevice)():(0,i.limitedToOneDevice)(u)},t.getMonoBucketOwner=s},44179:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notLimitedToOneDevice=t.limitedToOneDevice=void 0;t.limitedToOneDevice=e=>({_tag:"limitedToOneDevice",bucketOwner:e});t.notLimitedToOneDevice=()=>({_tag:"notLimitedToOneDevice"})},93298:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnlinkPreviousDeviceError=void 0,function(e){e.UnexpectedError="UNEXPECTED_ERROR"}(t.UnlinkPreviousDeviceError||(t.UnlinkPreviousDeviceError={}))},35520:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toPreviousDeviceInfo=void 0;const o=r(89961),n=r(10137);t.toPreviousDeviceInfo=({deviceName:e,devicePlatform:t,lastActivityDate:r})=>({name:e??"",platform:t?(0,o.toPlatformView)(t):n.PlatformView.Other,lastActive:r})},39460:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},57634:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupDeviceLimitEventBus=void 0;const o=r(31240),n=r(75903),i=r(20938),a={deviceLimitCapabilityUpdated:{handler:e=>{const t=(0,i.deviceLimitStatusUpdated)();e.storeService.dispatch(t),(0,n.refreshDeviceLimitStatus)(e)}}},s={type:"entry",to:o.LoginDeviceLimitFlowStage.OneDeviceLimitReached},c={type:"exit",from:o.LoginDeviceLimitFlowStage.OneDeviceLimitReached},u={type:"entry",to:o.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached},d={type:"exit",from:o.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached};t.setupDeviceLimitEventBus=(e,t)=>{let r;const o=()=>r=e.register(a),n=()=>r();t.addEventListener(s,o),t.addEventListener(c,n),t.addEventListener(u,o),t.addEventListener(d,n)}},15876:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unlinkMultipleDevices=void 0;const o=r(16593),n=r(46298),i=r(22589),a=r(88610),s=r(16373),c=r(38250),u=r(32573),d=r(20938),l=r(20698),p=r(70252),S=r(93841),g=r(90622);t.unlinkMultipleDevices=async(e,t)=>{const{storeService:r,sessionService:E}=e,y=r.getState(),_=(0,o.userLoginSelector)(y);r.dispatch((0,d.unlinkingMultipleDevicesRequested)());const A=await(async(e,t,r)=>{const{storeService:o}=e,i=e=>{const t=(0,d.unlinkMultipleDevicesErrorReached)({retryPayload:r});return o.dispatch(t),{success:!1,error:{code:e.code}}};try{const e=await(0,n.deactivateDevices)(o,t,r);if((0,n.isApiError)(e)&&e.code!==n.CLIENT_DEVICES_NOT_FOUND&&e.code!==n.PAIRING_GROUPS_NOT_FOUND)return i(e)}catch(e){return i(e)}})(e,_,t);if(A)return A;const m=await(async(e,t)=>{const{storeService:r}=e,n=r.getState(),a=(0,o.premiumStatusSelector)(n),l=(0,u.makeDeviceInfoService)(r),p=await l.getDevicesInfo(t),E=(0,g.deviceKeysSelector)(r.getState()),y=(0,i.isMultipleDevicesLimitApplicable)(p,a,E);if("limitedToMultipleDevices"===y._tag){r.dispatch((0,d.deviceLimitStatusUpdated)());const e=(0,s.addNewLoginNotification)({type:c.LoginNotificationType.UNKNOWN_ERROR,message:`${S.USER_STILL_OVERFLOWING}`});r.dispatch(e);const t=(0,d.multipleDevicesLimitStillReached)({updatedDeviceLimitStatus:{_tag:"limitedToMultipleDevices",devices:y.devices}});return r.dispatch(t),{success:!1,error:{code:S.USER_STILL_OVERFLOWING}}}return!1})(e,_);if(m)return m;try{return await(0,a.sessionDidOpen)(e),r.dispatch((0,d.unlinkingSucceeded)()),{success:!0}}catch(t){return E.close(),(0,l.notifyDeviceLimitError)(e,t),r.dispatch((0,d.unlinkingFailed)()),(0,p.sendExceptionLog)({error:(0,l.augmentDeviceLimitError)(t,"unlinkMultipleDevices")}),{success:!1,error:{code:S.UNEXPECTED_ERROR}}}}},18039:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unlinkPreviousDevice=void 0;const o=r(88610),n=r(20938),i=r(93298),a=r(20698),s=r(70252);t.unlinkPreviousDevice=async function(e){const{storeService:t}=e;try{return t.dispatch((0,n.unlinkPreviousDeviceRequested)()),await(0,o.sessionDidOpen)(e),t.dispatch((0,n.unlinkingSucceeded)()),{success:!0}}catch(r){t.dispatch((0,n.unlinkingFailed)()),(0,a.notifyDeviceLimitError)(e,r);const o=(0,a.augmentDeviceLimitError)(r,"unlinkPreviousDevice");return(0,s.sendExceptionLog)({error:o}),{success:!1,error:{code:i.UnlinkPreviousDeviceError.UnexpectedError}}}}},88610:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DifferentLoginAuthorized=t.sessionDidOpen=t.openSessionWithMasterPassword=t.updateSessionUponLoginAction=t.makeLoginController=void 0;const o=r(10203),n=r(53576),i=r(28096),a=r(70414),s=r(28287),c=r(89160),u=r(28096),d=r(16356),l=r(86797),p=r(59489),S=r(2246),g=r(25576),E=r(5464),y=r(76089),_=r(28445),A=r(64910),m=r(33769),T=r(19399),v=r(56915),f=r(62844),h=r(52653),D=r(75226),O=r(71938),P=r(63739),I=r(658),C=r(15606),R=r(16593),L=r(38981),b=r(29303),N=r(27885),U=r(61740),w=r(7624),M=r(17825),k=r(69763),F=r(15718),K=r(85822),B=r(61259),G=r(35924),j=r(33831),V=r(46298),W=r(98226);async function H(e,t,r,o){const{storeService:n,sessionService:a}=e;if(ne(n))throw new Error(i.AuthenticationCode[i.AuthenticationCode.SESSION_ALREADY_OPENED]);if(""===t)throw new Error(i.AuthenticationCode[i.AuthenticationCode.EMPTY_LOGIN]);if(!(0,_.isValidLogin)(t))throw new Error(i.AuthenticationCode[i.AuthenticationCode.INVALID_LOGIN]);if(n.dispatch((0,G.updateLoginStepInfoLogin)(t)),""===r)throw new Error(i.AuthenticationCode[i.AuthenticationCode.EMPTY_MASTER_PASSWORD]);let s=se.FORBIDDEN;if(o&&void 0!==o.authorizeDifferentLogin&&(s=o.authorizeDifferentLogin),n.getUserLogin()&&n.getUserLogin()!==t&&(n.isAuthenticated()&&await a.close(),s===se.FORBIDDEN))throw new Error(i.AuthenticationCode[i.AuthenticationCode.DIFFERENT_LOGIN_PROVIDED_WITH_TOKEN_OR_OTP]);n.hasSessionId()&&n.getUserLogin()===t&&r&&n.dispatch((0,d.updateMasterPassword)(r));const c=o&&o.serverKey;if(c&&n.dispatch((0,d.updateServerKey)(c)),n.getUserLogin()!==t||void 0===r){const e=(0,L.ssoSettingsSelector)(n.getState());await a.close(),a.setInstance(t,r),e.ssoToken&&n.dispatch((0,w.storeSSOSettings)(e))}}async function x(e,t,r,o,s,c,d){try{const{storeService:l,sessionService:p}=e,S=(0,_.normalizeEmail)(t);await H(e,S,r),await ie(o);if(await p.getInstance().user.accountExistsLocally())throw new Error("Unexpected local account presence during OTP1 step");if(await a.registerDevice(l,s,(0,g.makeOTP)(o),d??!1,c)!==i.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from device registration");return r?q(e,S,r,{isDataPersisted:s}):(u.triggerAskMasterPassword(S),n.LoginResultEnum.MasterPasswordMissing)}catch(t){throw te(t)&&(0,I.sendOTPForNewDeviceErrorLog)(e,d),u.triggerOpenSessionFailed(t),t}}async function q(e,t,r,o,s){try{const{storeService:u,sessionService:l,masterPasswordEncryptorService:p,localDataEncryptorService:S,remoteDataEncryptorService:E,localStorageService:y}=e;let T=o&&o.isDataPersisted;s?.(`isDataPersisted? ${T}`),void 0===T&&(T=u.getAccountInfo().persistData);const v=o&&o.serverKey;s?.(`serverKey null, undefined, or empty? ${!v}`);const f=Boolean(o&&o.rememberMasterPassword);s?.(`rememberMasterPassword? ${f}`);const h=Boolean(o?.shouldRememberMeForSSO);t=(0,_.normalizeEmail)(t),s?.("updateSessionUponLoginAction START"),await H(e,t,r,{authorizeDifferentLogin:se.AUTHORIZED,serverKey:v}),s?.("updateSessionUponLoginAction SUCCESS");const D=await l.getInstance().user.accountExistsLocally();if(s?.(`accountExistLocally? ${D}`),D){const t=y.getInstance(),r=await t.doesLocalKeyExist();if(s?.(`doesLocalKeyExist? ${r}`),r)try{const e=await t.getLocalKey();e.length<64&&(s?.("localKeyMigrationRequired? true"),u.dispatch((0,d.updateIsLocalKeyMigrationRequired)(!0)));const r="";s?.("set localDataEncryptorService START");const o=(0,A.getNoDerivationCryptoConfig)();S.setInstance({raw:e},r,o),s?.("set localDataEncryptorService SUCCESS"),s?.("updateLocalKey START"),u.dispatch((0,d.updateLocalKey)(e)),s?.("updateLocalKey SUCCESS")}catch(t){throw(0,I.sendMasterPasswordLoginErrorLog)(e,!1),new Error(i.AuthenticationCode[i.AuthenticationCode.WRONG_PASSWORD])}s?.("loadLocalData START"),await c.loadLocalData(l,u,p),s?.("loadLocalData SUCCESS")}else{const e=u.getState(),t=(0,R.isRemoteKeyActivatedSelector)(e)&&E?E:p;s?.("validateMasterPassword START"),await a.validateMasterPassword(u,t),s?.("validateMasterPassword SUCCESS")}return s?.("rememberMasterPasswordUpdated START"),o?.rememberMasterPassword&&u.dispatch((0,d.rememberMasterPasswordUpdated)(f)),s?.("rememberMasterPasswordUpdated SUCCESS"),h&&u.dispatch((0,d.shouldRememberMeForSSOUpdated)(h)),D?(s?.("initLocalSession START"),(0,I.sendLoginSuccessEventLog)({services:e,isInitial:!1,isSsoLogin:o?.isSsoLogin,rememberMeType:o?.triggeredByRememberMeType??"disabled"}),await async function(e,t){const{sessionService:r,storeService:o,localDataEncryptorService:i}=e,a=r.getInstance().user,s=o.getState();(0,R.isLocalKeyMigrationRequiredSelector)(s)&&(await(0,m.generateLocalkeyAndSetupEncryptorService)(i,o,r,g.PersistData.PERSIST_DATA_YES),await a.persistAllData());await a.refreshSessionData(),t?.requiredPermissions&&await Y(o,r,t.requiredPermissions);const c=await(0,K.attemptGetDeviceLimitStatus)(e);if("noDeviceLimit"!==c._tag)return await(0,K.startDeviceLimitFlow)(e,c),n.LoginResultEnum.DeviceLimitFlow;return Z(e,t)}(e,o)):(s?.("initInitialSession START"),(0,I.sendLoginSuccessEventLog)({services:e,isInitial:!0,isSsoLogin:o?.isSsoLogin}),await J(e,T,o))}catch(t){throw t.message&&t.message===i.AuthenticationCode[i.AuthenticationCode.WRONG_PASSWORD]&&(0,I.sendMasterPasswordLoginErrorLog)(e,!0),u.triggerOpenSessionFailed(t),t}}t.makeLoginController=e=>({openSession:(t,r)=>async function(e,t,r){const{storeService:a,sessionService:s,wsService:c,storageService:d,applicationModulesAccess:p}=e;t=(0,_.normalizeEmail)(t);try{const S=r&&r.password;await H(e,t,S,{authorizeDifferentLogin:se.AUTHORIZED});let E=await s.getInstance().user.accountExistsLocally();switch(await oe(a,d,p,c,E)){case i.AuthenticationCode.SSO_LOGIN_BYPASS:return(0,I.sendAskSSOAuthenticationEventLog)(e,o.VerificationMode.None),u.triggerOpenSessionSsoRedirectionToIdpRequired((0,B.triggerServiceProviderUrlRedirect)(a.getState(),t),(0,L.ssoProviderInfoSelector)(a.getState()).isNitroProvider),n.LoginResultEnum.SSOLogin;case i.AuthenticationCode.ASK_MASTER_PASSWORD:if(!E)throw new Error("checkLogin should never return ASK_MASTER_PASSWORD for remote accounts");return S?q(e,t,S):((0,I.sendAskAuthenticationEventLog)(e,o.VerificationMode.None),a.dispatch((0,G.updateLoginStepInfoStep)(j.LoginStep.Password)),u.triggerAskMasterPassword(t),n.LoginResultEnum.MasterPasswordMissing);case i.AuthenticationCode.ASK_OTP:return(0,I.sendAskAuthenticationEventLog)(e,o.VerificationMode.Otp2),a.dispatch((0,G.updateLoginStepInfoStep)(j.LoginStep.OTP2)),u.triggerOpenSessionOTPSent({hasU2F:!1}),n.LoginResultEnum.OTPMissing;case i.AuthenticationCode.ASK_OTP_FOR_NEW_DEVICE:const{otpType:r}=a.getAccountInfo();return(0,I.sendAskAuthenticationEventLog)(e,r===l.OtpType.OTP_NEW_DEVICE?o.VerificationMode.Otp1:o.VerificationMode.Otp2),a.dispatch((0,G.updateLoginStepInfoStep)(j.LoginStep.OTP1)),u.triggerOpenSessionOTPForNewDeviceRequired(),n.LoginResultEnum.OTPMissing;case i.AuthenticationCode.ASK_TOKEN:if(E=await s.getInstance().user.accountExistsLocally(),E)throw new Error("Unexpected local account presence during email token step");return(0,I.sendAskAuthenticationEventLog)(e,o.VerificationMode.EmailToken),a.dispatch((0,G.updateLoginStepInfoStep)(j.LoginStep.OTPToken)),u.triggerOpenSessionTokenSent({isResendAction:!1}),n.LoginResultEnum.TokenMissing;case i.AuthenticationCode.USE_LOCAL_UKI:if((0,v.ukiSelector)(a.getState()))return J(e,g.PersistData.PERSIST_DATA_YES);throw new Error(i.AuthenticationCode[i.AuthenticationCode.UNKNOWN_UKI]);case i.AuthenticationCode.ASK_DASHLANE_AUTHENTICATOR:if(E=await s.getInstance().user.accountExistsLocally(),E)throw new Error("Unexpected local account presence during dashlane authenticator step");return(0,I.sendAskAuthenticationEventLog)(e,o.VerificationMode.AuthenticatorApp),a.dispatch((0,G.updateLoginStepInfoStep)(j.LoginStep.DashlaneAuthenticator)),u.triggerOpenSessionDashlaneAuthenticator(),n.LoginResultEnum.DashlaneAuthenticatorApprovalMissing;default:throw new Error(i.AuthenticationCode[i.AuthenticationCode.UNKNOWN_ERROR])}}catch(e){if(u.getAuthenticationCodeFromError(e)===i.AuthenticationCode.USER_DOESNT_EXIST){let r;try{r=await(0,V.requestAccountCreation)(a,{login:t})}catch{}if(void 0!==r&&!(0,V.isApiError)(r)&&r.ssoServiceProviderUrl){const e=new Error(i.AuthenticationCode[i.AuthenticationCode.USER_DOESNT_EXIST_SSO]);u.triggerOpenSessionFailed(e)}else u.triggerOpenSessionFailed(e)}else u.triggerOpenSessionFailed(e);throw e}}(e,t,r),openSessionWithToken:(t,r,o,s,c)=>async function(e,t,r,o,s,c){try{const{storeService:d,sessionService:l}=e;t=(0,_.normalizeEmail)(t),await H(e,t,r),await ae(o);if(await l.getInstance().user.accountExistsLocally())throw new Error(i.AuthenticationCode[i.AuthenticationCode.TOKEN_PROVIDED_FOR_LOCAL_SESSION]);if(await a.registerDevice(d,s,(0,g.makeEmailToken)(o),!1,c)!==i.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from verifyOtpOrToken");return r?q(e,t,r,{isDataPersisted:s}):(u.triggerAskMasterPassword(t),n.LoginResultEnum.MasterPasswordMissing)}catch(t){throw te(t)&&(0,I.sendEmailTokenErrorLog)(e),u.triggerOpenSessionFailed(t),t}}(e,t,r,o,s,c),openSessionWithDashlaneAuthenticator:(t,r,o,s)=>async function(e,t,r,o,s){try{const{storeService:c,sessionService:d}=e;t=(0,_.normalizeEmail)(t),await H(e,t,r);if(await d.getInstance().user.accountExistsLocally())throw new Error(i.AuthenticationCode[i.AuthenticationCode.DASHLANE_AUTHENTICATOR_ASKED_FOR_LOCAL_SESSION]);const l=await a.registerDeviceWithDashlaneAuthenticator(c,o,s);if(l===i.AuthenticationCode.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED)return(0,I.sendDashlaneAuthenticatorErrorLog)(e),n.LoginResultEnum.DashlaneAuthenticatorApprovalCancelled;if(l!==i.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from verifyDashlaneAuthenticatorPush");return r?q(e,t,r,{isDataPersisted:o}):(u.triggerAskMasterPassword(t),n.LoginResultEnum.MasterPasswordMissing)}catch(t){re(t)&&(0,I.sendDashlaneAuthenticatorErrorLog)(e),u.triggerOpenSessionFailed(t)}}(e,t,r,o,s),cancelDashlaneAuthenticatorRegistration:()=>a.cancelRegistrationWithDashlaneAuthenticator(),openSessionWithOTP:(t,r,o,a,p)=>async function(e,t,r,o,a,p){const{storageService:S,storeService:E,sessionService:y,applicationModulesAccess:A}=e;try{t=(0,_.normalizeEmail)(t),await H(e,t,r),await ie(o);if(!await y.getInstance().user.accountExistsLocally())return x(e,t,r,o,a,void 0,p);if(E.dispatch((0,d.updateisUsingBackupCode)(p)),E.getAccountInfo().otpType!==l.OtpType.OTP_LOGIN)throw new Error(i.AuthenticationCode[i.AuthenticationCode.OTP_PROVIDED_FOR_LOCAL_NON_OTP_SESSION]);const m=await(0,s.convertTokenToAuthTicket)(E,(0,g.makeOTP)(o));if(!1===m.success){const{error:{code:e,message:t}}=m;if(e===i.AuthenticationCode.BUSINESS_ERROR)throw new Error(t);throw new Error(i.AuthenticationCode[e])}const T=m.authTicket;if(await c.completeLogin(E,S,A,T,p??!1)!==i.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from verifyOtpOrToken");return r?q(e,t,r,{isDataPersisted:a}):(u.triggerAskMasterPassword(t),n.LoginResultEnum.MasterPasswordMissing)}catch(t){if(ee(t)){const e=await(0,D.getLocalAccounts)(E,S);u.sendLocalAccounts(e)}throw te(t)&&(0,I.sendOTPErrorLog)(e,p),u.triggerOpenSessionFailed(t),t}}(e,t,r,o,a,p),openSessionWithOTPForNewDevice:(t,r,o,n,i,a)=>x(e,t,r,o,n,i,a),openSessionWithMasterPassword:(t,r,o)=>q(e,t,r,o),openSessionResendToken:t=>async function(e,t){await a.askServerToSendToken(e,t),u.triggerOpenSessionTokenSent({isResendAction:!0})}(e.wsService,t),loadAccountCreationInfos:(t,r,o,n,i,a)=>async function(e,t,r,o,n,i,a){const s=(0,T.secureDeviceName)(o);await H(e,t,r),e.storeService.dispatch((0,h.deviceRegistered)((0,h.makeDeviceRegistrationKeys)(n.accessKey,n.secretKey),a,t)),e.storeService.dispatch((0,y.registerDeviceName)(s)),e.storeService.dispatch((0,y.registerLastSync)(i))}(e,t,r,o,n,i,a),openExtraDeviceSession:(t,r)=>async function(e,t,r){try{const{sessionService:o}=e;t=(0,_.normalizeEmail)(t);const a=r&&r.password,s=r&&r.serverKey;await H(e,t,a,{authorizeDifferentLogin:se.AUTHORIZED,serverKey:s});const c=await o.getInstance().user.accountExistsLocally(),d=ce(c);switch(d){case i.AuthenticationCode.PROVIDE_EXTRA_DEVICE_TOKEN:return u.triggerOpenSessionExtraDeviceTokenRequired(),n.LoginResultEnum.ExtraDeviceTokenMissing;case i.AuthenticationCode.ASK_MASTER_PASSWORD:return a?q(e,t,a,{serverKey:s}):(u.triggerAskMasterPassword(t),n.LoginResultEnum.MasterPasswordMissing);default:(0,M.assertUnreachable)(d)}}catch(e){throw u.triggerOpenSessionFailed(e),e}}(e,t,r),openSessionWithExtraDeviceToken:(t,r,o,s)=>async function(e,t,r,o,s){try{const{storeService:c,sessionService:d}=e;t=(0,_.normalizeEmail)(t);const l=s&&s.password;await H(e,t,l,{authorizeDifferentLogin:se.AUTHORIZED}),await ae(r);if(await d.getInstance().user.accountExistsLocally())throw new Error(i.AuthenticationCode[i.AuthenticationCode.TOKEN_PROVIDED_FOR_LOCAL_SESSION]);const p=s&&s.deviceName;return await a.registerDevice(c,o,(0,g.makeExtraDeviceToken)(r),!1,p),l?q(e,t,l):(u.triggerAskMasterPassword(t),n.LoginResultEnum.MasterPasswordMissing)}catch(e){throw u.triggerOpenSessionFailed(e),e}}(e,t,r,o,s)}),t.updateSessionUponLoginAction=H,t.openSessionWithMasterPassword=q;const Y=async(e,t,r)=>{const o=(0,N.hasTACAccessInCurrentSpace)(e);if(n.possibleAdminPermissions.includes(r)&&!o)throw e.isAuthenticated()&&await t.close(),new Error(i.AuthenticationCode[i.AuthenticationCode.USER_UNAUTHORIZED])},$=async(e,t,r)=>{const o=e.getState(),n=(0,F.pairingIdSelector)(o);u.triggerSessionOpened(e,t,r,n)},z=(e,t)=>{const{login:r,persistData:o,sessionStartTime:n}=e.getAccountInfo();o===g.PersistData.PERSIST_DATA_YES&&((0,S.storeUserPublicSetting)(r,"lastSuccessfulLoginTime",n),void 0!==t?.triggeredByRememberMeType&&"disabled"!==t?.triggeredByRememberMeType||(0,S.storeUserPublicSetting)(r,"lastMasterPasswordOpenSessionTimestamp",n))},X=async e=>{await e.accountExistsLocally()?await e.attemptSync(o.Trigger.Login):await e.sync(o.Trigger.InitialLogin)},Q=async e=>{const{sessionService:t,storeService:r}=e,o=t.getInstance().user,n=r.getState(),a=(0,b.recoveryInProgressSelector)(n);if(void 0!==(0,L.ssoMigrationInfoSelector)(n).migration||a)return!0;const s=!await o.accountExistsLocally(),c=(0,f.changeMPinProgressSelector)(n);if(s||c){try{await X(o)}catch(e){throw new Error(i.AuthenticationCode[i.AuthenticationCode.UNKNOWN_SYNC_ERROR])}return!0}return!1};async function J(e,t,r){const{localDataEncryptorService:o,sessionService:i,storageService:a,storeService:s,applicationModulesAccess:c}=e,{login:u,otpType:d}=s.getAccountInfo();await(0,P.deleteAllLocalUserData)(a,c,u),await(0,m.generateLocalkeyAndSetupEncryptorService)(o,s,i,t),t===g.PersistData.PERSIST_DATA_YES&&(d===l.OtpType.OTP_LOGIN&&(0,S.storeUserPublicSetting)(s.getAccountInfo().login,"otp2",!0),await(0,k.persistLocalUsersAuthenticationData)(a,s));const p=i.getInstance().user;await p.refreshSessionData(),r?.requiredPermissions&&await Y(s,i,r.requiredPermissions);const E=await(0,K.getDeviceLimitStatus)(e);return"noDeviceLimit"!==E._tag?(await(0,K.startDeviceLimitFlow)(e,E),n.LoginResultEnum.DeviceLimitFlow):Z(e,r)}async function Z(e,t){try{const{autoLoginService:r,eventBusService:o,sessionService:a,storeService:s,storageService:c,wsService:u}=e,l=a.getInstance().user,S=s.getState(),g=(0,R.userLoginSelector)(S);s.dispatch((0,p.confirmUserAuthentication)()),z(s,t);const y=(0,b.recoveryInProgressSelector)(S),_=await Q(e);if(!y){const e=await(0,E.getAndTriggerRefreshAccountInfo)(s,a,u);$(s,c,e)}if(!1===_)try{await X(l)}catch(e){throw new Error(i.AuthenticationCode[i.AuthenticationCode.UNKNOWN_SYNC_ERROR])}const A=await(0,D.getLocalAccounts)(s,c);(0,i.sendLocalAccounts)(A);const m="webauthn"!==(0,U.getLocalAccountRememberMeType)(g);return s.getUserSession().rememberMasterPassword&&m&&r.initialize(),s.getUserSession().shouldRememberMeForSSO&&m&&(await(0,U.persistLocalAccountRememberMeType)(s,"sso"),s.dispatch((0,W.setRememberMeTypeAction)("sso"))),o.sessionOpened({login:g}),"autologin"!==t?.triggeredByRememberMeType&&s.dispatch((0,d.updateLastMasterPasswordCheck)()),l.startPeriodic2FAInfoRefresh(),(0,O.refreshTwoFactorAuthenticationInfoService)(s,u),s.dispatch((0,d.updateSessionDidOpen)(!0)),n.LoginResultEnum.LoggedIn}catch(t){const{storeService:r}=e;throw r.dispatch((0,p.userAuthenticationFailed)()),r.dispatch((0,d.updateSessionDidOpen)(!1)),t}}t.sessionDidOpen=Z;const ee=e=>e&&"object"==typeof e&&e.message===i.AuthenticationCode[i.AuthenticationCode.DEVICE_NOT_REGISTERED],te=e=>e?.message&&C.TokenOrOTPErrorCode.includes(e.message),re=e=>e?.message&&C.DashlaneAuthenticatorErrorCode.includes(e.message),oe=async(e,t,r,o,n)=>{if(n)try{return await c.checkLogin(e,t,r)}catch(e){if(!ee(e))throw e}const i=(0,v.ukiSelector)(e.getState());return i?a.checkLoginWithUki(e,o,i):a.requestDeviceRegistration(e)},ne=e=>e.getAccountInfo().isAuthenticated;function ie(e){if(!e||0===e.length)throw new Error(i.AuthenticationCode[i.AuthenticationCode.EMPTY_OTP])}function ae(e){if(!e||0===e.length)throw new Error(i.AuthenticationCode[i.AuthenticationCode.EMPTY_TOKEN])}var se;!function(e){e[e.AUTHORIZED=0]="AUTHORIZED",e[e.FORBIDDEN=1]="FORBIDDEN"}(se=t.DifferentLoginAuthorized||(t.DifferentLoginAuthorized={}));const ce=e=>e?i.AuthenticationCode.ASK_MASTER_PASSWORD:i.AuthenticationCode.PROVIDE_EXTRA_DEVICE_TOKEN},9639:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginViaSSO=void 0;const o=r(35105),n=r(751),i=r(56915),a=r(50058),s=r(16373),c=r(40042),u=r(28445),d=r(88610),l=r(19399),p=r(64910),S=r(33769),g=r(16038),E=r(56668),y=r(46298),_=r(92029),A=r(25576),m=r(16356),T=r(70414),v=r(25576),f=r(16593),h=r(38981),D=r(17387),O=r(62712),P=r(61259),I=r(19083),C=r(61380),R=r(28287),L=r(86797),b=r(7624),N=r(658);t.loginViaSSO=async function(e,t){const{sessionService:r,storeService:i}=e,{ssoServiceProviderKey:a,exist:d,ssoToken:p,consents:S,currentAuths:g=_.SsoMigrationServerMethod.SSO,expectedAuths:E=_.SsoMigrationServerMethod.SSO,inStore:y,anonymousUserId:A}=t,m=(0,u.normalizeEmail)(t.login),T=(0,l.secureDeviceName)(t.deviceName),v={...t,login:m,deviceName:T};if(!(a&&m||y))return i.dispatch((0,s.addNewLoginNotification)({type:c.LoginNotificationType.SSO_SETUP_ERROR})),(0,P.makeReturnErrorObject)(_.LoginViaSsoCode.EMPTY_LOGIN);try{if(!d){const t={ssoServiceProviderKey:a,login:m,deviceName:T,ssoToken:p,consents:S,anonymousUserId:A};return await(0,n.createSSOAccount)(e,t)}if(!(0,P.isSupportedTransitionFlow)(g,E))return i.dispatch((0,s.addNewLoginNotification)({type:c.LoginNotificationType.SSO_SETUP_ERROR})),(0,P.makeReturnErrorObject)(_.LoginViaSsoCode.UNSUPPORTED_TRANSITION);if(g===_.SsoMigrationServerMethod.MP&&E===_.SsoMigrationServerMethod.SSO)return await U(e,v);if(g===_.SsoMigrationServerMethod.SSO&&E===_.SsoMigrationServerMethod.MP){const e={ssoUser:!0,migration:o.SSOMigrationType.SSO_TO_MP};i.dispatch((0,b.storeSSOSettings)(e)),v.requiredPermissions=null}r.setInstance(m,void 0);return await r.getInstance().user.accountExistsLocally()?await w(e,v):await M(e,v)}catch(t){return(0,N.sendSsoLoginErrorLog)(e),i.dispatch((0,s.addNewLoginNotification)({type:c.LoginNotificationType.UNKNOWN_ERROR,message:t.message})),(0,P.makeReturnErrorObject)(_.LoginViaSsoCode.UNKNOWN_ERROR,t.message)}};const U=async(e,t)=>{const{storeService:r}=e;let{ssoServiceProviderKey:n,ssoToken:i}=t;const{login:a}=t,{isAuthenticated:u,otpType:l}=r.getAccountInfo();if(t.inStore){const e=(0,h.ssoSettingsSelector)(r.getState());if(n=e.ssoServiceProviderKey,i=e.ssoToken,!n||!i)return r.dispatch((0,s.addNewLoginNotification)({type:c.LoginNotificationType.SSO_SETUP_ERROR})),(0,P.makeReturnErrorObject)(_.LoginViaSsoCode.SSO_VERIFICATION_FAILED)}if(!u){const t={ssoUser:!0,serviceProviderUrl:"",ssoServiceProviderKey:n,ssoToken:i,migration:o.SSOMigrationType.MP_TO_SSO};r.dispatch((0,b.storeSSOSettings)(t));return(0,d.makeLoginController)(e).openSession(a),r.dispatch((0,s.addNewLoginNotification)({type:c.LoginNotificationType.RELOGIN_NEEDED})),(0,P.makeReturnErrorObject)(_.LoginViaSsoCode.INNACTIVE_SESSION)}if(l===L.OtpType.NO_OTP){const{success:e}=await(0,R.convertTokenToAuthTicket)(r,(0,D.makeSsoToken)(i));if(!e)return r.dispatch((0,s.addNewLoginNotification)({type:c.LoginNotificationType.SSO_SETUP_ERROR})),(0,P.makeReturnErrorObject)(_.LoginViaSsoCode.SSO_VERIFICATION_FAILED)}const p={newPassword:n,flow:C.ChangeMPFlowPath.MP_TO_SSO},S=await(0,I.changeMasterPassword)(e,p);return!1===S.success?(r.dispatch((0,s.addNewLoginNotification)({type:c.LoginNotificationType.UNKNOWN_ERROR,message:S.error.code})),S):(r.dispatch((0,b.resetSSOSettings)()),(0,P.successResponse)())},w=async(e,{login:t,ssoServiceProviderKey:r,ssoToken:o,requiredPermissions:n,shouldRememberMeForSSO:a})=>{const{storeService:u}=e,l=(0,i.getDeviceIdSelector)(u.getState(),t);if(null===l)throw new Error(A.AuthenticationCode[A.AuthenticationCode.DEVICE_NOT_REGISTERED]);const T=await(0,R.convertTokenToAuthTicket)(u,(0,D.makeSsoToken)(o));if(!1===T.success){const{error:{message:e}}=T;return u.dispatch((0,s.addNewLoginNotification)({type:c.LoginNotificationType.SSO_SETUP_ERROR})),(0,P.makeReturnErrorObject)(_.LoginViaSsoCode.SSO_VERIFICATION_FAILED,e)}const f=T.authTicket,h=await(0,O.completeLoginWithAuthTicket)(u,{login:t,deviceAccessKey:l,authTicket:f});if((0,y.isApiError)(h))return(0,P.formatAPIError)(h);const{masterPasswordEncryptorService:I,remoteDataEncryptorService:C}=e,{ssoServerKey:L,remoteKeys:b}=h,N=(0,g.base64ToBuffer)(L),U=b.filter((e=>"sso"===e.type))[0];let w;try{const e=(0,g.base64ToBuffer)(r),t=(0,S.getEncryptionKeyBuffer)(e,N,{skipDerivation:!0});w=(0,g.arrayBufferToText)(t);const o=(0,p.getNoDerivationCryptoConfig)();I.setInstance({raw:w},"",o);const n=await I.getInstance().decrypt(U.key),i=(0,E.deflatedUtf8ToUtf16)(n,{skipUtf8Decoding:!0,skipInflate:!0});C.setInstance({raw:i},"",o),u.dispatch((0,m.updateRemoteKey)(i))}catch(e){return{success:!1,error:{code:_.LoginViaSsoCode.WRONG_PASSWORD}}}const M=v.PersistData.PERSIST_DATA_YES;return await(0,d.openSessionWithMasterPassword)(e,t,w,{isDataPersisted:M,serverKey:"",requiredPermissions:n,isSsoLogin:!0,shouldRememberMeForSSO:a}),(0,P.successResponse)()},M=async(e,t)=>{const{storeService:r,masterPasswordEncryptorService:o,remoteDataEncryptorService:n}=e,{deviceName:i,ssoToken:s,login:c,ssoServiceProviderKey:u,requiredPermissions:l,shouldRememberMeForSSO:p}=t;r.dispatch((0,a.updateLocalUserInfo)(c,{ssoActivatedUser:!0}));const S=v.PersistData.PERSIST_DATA_YES,g={masterPasswordEncryptorService:o,remoteDataEncryptorService:n,ssoServiceProviderKey:u};await(0,T.registerDevice)(r,S,(0,D.makeSsoToken)(s),!1,i,g);const E=e.storeService.getState(),y=(0,f.masterPasswordSelector)(E);return await(0,d.openSessionWithMasterPassword)(e,c,y,{isDataPersisted:S,serverKey:"",requiredPermissions:l,isSsoLogin:!0,shouldRememberMeForSSO:p}),(0,P.successResponse)()}},92029:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoginViaSsoCode=t.SsoMigrationServerMethod=void 0,function(e){e.SSO="sso",e.MP="master_password"}(t.SsoMigrationServerMethod||(t.SsoMigrationServerMethod={})),function(e){e.SUCCESS="SUCCESS",e.ASK_NEW_MP="ASK_NEW_MP",e.EMPTY_LOGIN="EMPTY_LOGIN",e.INNACTIVE_SESSION="INNACTIVE_SESSION",e.SSO_VERIFICATION_FAILED="SSO_VERIFICATION_FAILED",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.UNSUPPORTED_TRANSITION="UNSUPPORTED_TRANSITION",e.WRONG_PASSWORD="WRONG_PASSWORD"}(t.LoginViaSsoCode||(t.LoginViaSsoCode={}))},61259:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerServiceProviderUrlRedirect=t.successResponse=t.makeReturnErrorObject=t.formatAPIError=t.isSupportedTransitionFlow=void 0;const o=r(92029),n=r(46298),i=r(81228),a=r(38981);t.isSupportedTransitionFlow=(e,t)=>e===o.SsoMigrationServerMethod.SSO?t===o.SsoMigrationServerMethod.SSO||t===o.SsoMigrationServerMethod.MP:e===o.SsoMigrationServerMethod.MP&&t===o.SsoMigrationServerMethod.SSO;t.formatAPIError=e=>{switch(e.code){case n.B2bSsoUserNotFound:case n.InvalidSsoToken:case n.DeviceNotFound:case n.InvalidAuthTicket:return(0,t.makeReturnErrorObject)(o.LoginViaSsoCode.SSO_VERIFICATION_FAILED,e.message);default:return(0,t.makeReturnErrorObject)(o.LoginViaSsoCode.UNKNOWN_ERROR,e.message)}};t.makeReturnErrorObject=(e,t)=>({success:!1,error:{code:e,message:t}});t.successResponse=(e=o.LoginViaSsoCode.SUCCESS)=>({success:!0,code:e}),t.triggerServiceProviderUrlRedirect=function(e,t){const r=`${(0,a.serviceProviderUrlSelector)(e)}?username=${t}`;return(0,i.emitServiceProviderUrl)(r),r}},30322:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(46430),n=r(57634),i=r(49154),a=r(27331);t.bootstrap=(e,t,r)=>{if(e.register(o.config),r.connectors.deviceLimit){const e=new i.DeviceLimitCapabilityEventBus(t,r.connectors.deviceLimit),o=(0,a.getDeviceLimitFlowEventsManager)(t.storeService);(0,n.setupDeviceLimitEventBus)(e,o)}}},658:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendMasterPasswordLoginErrorLog=t.sendSsoLoginErrorLog=t.sendBiometricLoginErrorLog=t.sendDashlaneAuthenticatorErrorLog=t.sendOTPErrorLog=t.sendOTPForNewDeviceErrorLog=t.sendEmailTokenErrorLog=t.sendLoginSuccessEventLog=t.sendAskSSOAuthenticationEventLog=t.sendAskBiometricAuthenticationEventLog=t.sendAskAuthenticationEventLog=void 0;const o=r(10203),n=r(66102),i=r(86797);var a;!function(e){e.AUTOLOGIN="autologin",e.WEBAUTHN="webauthn",e.DISABLED="disabled"}(a||(a={}));const s=(e,t,r)=>{switch(e){case i.OtpType.NO_OTP:return t?r?o.VerificationMode.AuthenticatorApp:o.VerificationMode.EmailToken:o.VerificationMode.None;case i.OtpType.OTP_NEW_DEVICE:return o.VerificationMode.Otp1;case i.OtpType.OTP_LOGIN:return o.VerificationMode.Otp2;default:return o.VerificationMode.None}},c=async(e,t,r)=>{await(0,n.logEvent)(t,{event:new o.UserAskAuthenticationEvent({mode:e,reason:o.Reason.Login,verificationMode:r})})};t.sendAskAuthenticationEventLog=c.bind(null,o.Mode.MasterPassword),t.sendAskBiometricAuthenticationEventLog=c.bind(null,o.Mode.Biometric),t.sendAskSSOAuthenticationEventLog=c.bind(null,o.Mode.Sso);t.sendLoginSuccessEventLog=async({services:e,isInitial:t,isSsoLogin:r,rememberMeType:i})=>{r?await(async(e,t)=>{await(0,n.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.Sso,status:o.Status.Success,isFirstLogin:t,isBackupCode:!1,verificationMode:o.VerificationMode.None})})})(e,t):i&&i===a.WEBAUTHN?await(async e=>{await(0,n.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.Biometric,status:o.Status.Success,isFirstLogin:!1,isBackupCode:!1,verificationMode:o.VerificationMode.None})})})(e):i&&i===a.DISABLED&&await(async(e,t)=>{const{otpType:r}=e.storeService.getAccountInfo(),{isUsingBackupCode:i,isUsingDashlaneAuthenticator:a}=e.storeService.getUserSession(),c=s(r,t,a);await(0,n.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.MasterPassword,status:o.Status.Success,isFirstLogin:t,isBackupCode:i,verificationMode:c})})})(e,t)};t.sendEmailTokenErrorLog=async e=>{await(0,n.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.MasterPassword,status:o.Status.ErrorWrongOtp,isFirstLogin:!0,isBackupCode:!1,verificationMode:o.VerificationMode.EmailToken})})};t.sendOTPForNewDeviceErrorLog=async(e,t)=>{const{otpType:r}=e.storeService.getAccountInfo();await(0,n.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.MasterPassword,status:o.Status.ErrorWrongOtp,isFirstLogin:!0,isBackupCode:t,verificationMode:r===i.OtpType.OTP_LOGIN?o.VerificationMode.Otp2:o.VerificationMode.Otp1})})};t.sendOTPErrorLog=async(e,t)=>{await(0,n.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.MasterPassword,status:o.Status.ErrorWrongOtp,isFirstLogin:!1,isBackupCode:t,verificationMode:o.VerificationMode.Otp2})})};t.sendDashlaneAuthenticatorErrorLog=async e=>{await(0,n.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.MasterPassword,status:o.Status.ErrorWrongOtp,isFirstLogin:!0,isBackupCode:!1,verificationMode:o.VerificationMode.AuthenticatorApp})})};t.sendBiometricLoginErrorLog=async e=>{await(0,n.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.Biometric,status:o.Status.ErrorUnknown,isFirstLogin:!1,isBackupCode:!1,verificationMode:o.VerificationMode.None})})};t.sendSsoLoginErrorLog=async e=>{await(0,n.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.Sso,status:o.Status.ErrorInvalidSso,isBackupCode:!1,verificationMode:o.VerificationMode.None})})};t.sendMasterPasswordLoginErrorLog=async(e,t)=>{const{otpType:r}=e.storeService.getAccountInfo(),{isUsingBackupCode:i,isUsingDashlaneAuthenticator:a}=e.storeService.getUserSession(),c=s(r,t,a);await(0,n.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.MasterPassword,status:o.Status.ErrorWrongPassword,isFirstLogin:t,isBackupCode:i,verificationMode:c})})}},69718:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addLoginNotification=void 0;const o=r(16373);t.addLoginNotification=async function(e,t){const{storeService:r}=e;r.dispatch((0,o.addNewLoginNotification)(t))}},26392:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(30322);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},24579:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(28096),n=r(1965),i=r(90622),a=r(48990),s=r(31937),c=r(18216);t.setupSubscriptions=function(e,t){e.appInitialized.on((async e=>{if(e.initMode===c.InitMode.FirstInit){const{storageService:e,storeService:r,applicationModulesAccess:c}=t;await(0,n.deviceRemoteDeletion)(r,e,c);const u=await(0,i.getLocalAccounts)(r,e);await(0,s.restoreLastAuthenticatedUser)(t,u),(0,o.sendLocalAccounts)(u),t.storeService.dispatch((0,a.localAccountsListUpdated)(u))}}))}},15606:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DashlaneAuthenticatorErrorCode=t.TokenOrOTPErrorCode=void 0;const o=r(6629);t.TokenOrOTPErrorCode=[o.AuthenticationCode.TOKEN_EXPIRED,o.AuthenticationCode.TOKEN_NOT_VALID,o.AuthenticationCode.TOKEN_TOO_MANY_ATTEMPTS,o.AuthenticationCode.EMPTY_TOKEN,o.AuthenticationCode.OTP_ALREADY_USED,o.AuthenticationCode.OTP_NOT_VALID,o.AuthenticationCode.OTP_TOO_MANY_ATTEMPTS,o.AuthenticationCode.EMPTY_OTP,o.AuthenticationCode.BACKUP_CODE_NOT_VALID],t.DashlaneAuthenticatorErrorCode=[o.AuthenticationCode.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED,o.AuthenticationCode.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED,o.AuthenticationCode.FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE]},13465:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(90822),n=r(96205),i=r(85316);t.config={commands:{clearAllStoredLoginNotification:{handler:n.clearAllStoredLoginNotification}},queries:{getLoginNotifications:{selector:o.loginNotificationListSelector}},liveQueries:{liveLoginNotifications:{operator:i.loginNotificationList$}}}},97046:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(13465);t.bootstrap=e=>{e.register(o.config)}},39952:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(97046);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},85316:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginNotificationList$=void 0;const o=r(18948),n=r(3343),i=r(90822);t.loginNotificationList$=()=>(0,o.pipe)((0,n.map)(i.loginNotificationListSelector),(0,n.distinctUntilChanged)())},90822:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginNotificationListSelector=void 0;t.loginNotificationListSelector=e=>e.inMemoryInterSessionUnsynced.loginNotification},96205:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearAllStoredLoginNotification=void 0;const o=r(16373);t.clearAllStoredLoginNotification=async e=>(e.storeService.dispatch((0,o.resetAllLoginNotification)()),{success:!0})},2207:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoginNotificationType=void 0;var o=r(40042);Object.defineProperty(t,"LoginNotificationType",{enumerable:!0,get:function(){return o.LoginNotificationType}})},90014:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(16088),n=r(85493),i=r(93069),a=r(6737);t.config={commands:{updateLoginStepInfo:{handler:i.updateLoginStepInfoHandler},resetLoginStepInfo:{handler:a.resetLoginStepInfoHandler}},queries:{getLoginStepInfo:{selector:o.loginStepInfoSelector}},liveQueries:{liveLoginStepInfo:{operator:n.liveLoginStepInfo$}}}},74536:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoginStep=void 0;var o=r(33831);Object.defineProperty(t,"LoginStep",{enumerable:!0,get:function(){return o.LoginStep}})},35924:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetLoginStepInfo=t.updateLoginStepInfoStep=t.updateLoginStepInfoLogin=t.RESET_LOGIN_STEP_INFO=t.UPDATE_LOGIN_STEP_INFO_STEP=t.UPDATE_LOGIN_STEP_INFO_LOGIN=void 0,t.UPDATE_LOGIN_STEP_INFO_LOGIN="UPDATE_LOGIN_STEP_INFO_LOGIN",t.UPDATE_LOGIN_STEP_INFO_STEP="UPDATE_LOGIN_STEP_INFO_STEP",t.RESET_LOGIN_STEP_INFO="RESET_LOGIN_STEP_INFO";t.updateLoginStepInfoLogin=e=>({type:t.UPDATE_LOGIN_STEP_INFO_LOGIN,login:e});t.updateLoginStepInfoStep=e=>({type:t.UPDATE_LOGIN_STEP_INFO_STEP,step:e});t.resetLoginStepInfo=()=>({type:t.RESET_LOGIN_STEP_INFO})},16088:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginStepInfoSelector=void 0;t.loginStepInfoSelector=e=>{const t=e.userSession.localSettings.loginStepInfo;return t?.step?t:null}},24413:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(90014);t.bootstrap=e=>{e.register(o.config)}},6737:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetLoginStepInfoHandler=void 0;const o=r(35924);t.resetLoginStepInfoHandler=e=>(e.storeService.dispatch((0,o.resetLoginStepInfo)()),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},93069:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateLoginStepInfoHandler=void 0;const o=r(35924);t.updateLoginStepInfoHandler=(e,t)=>(void 0!==t.login&&e.storeService.dispatch((0,o.updateLoginStepInfoLogin)(t.login)),void 0!==t.step&&e.storeService.dispatch((0,o.updateLoginStepInfoStep)(t.step)),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},37824:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(24413);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},85493:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.liveLoginStepInfo$=void 0;const o=r(18948),n=r(3343),i=r(16088);t.liveLoginStepInfo$=()=>(0,o.pipe)((0,n.map)(i.loginStepInfoSelector),(0,n.distinctUntilChanged)())},33831:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoginStep=void 0,function(e){e.Email="email",e.Welcome="welcome",e.OTP1="OTP1",e.OTP2="OTP2",e.BackupCodeOTP1="backupCodeOTP1",e.BackupCodeOTP2="backupCodeOTP2",e.OTPToken="token",e.Password="password",e.SSO="SSO",e.ActivateSSO="activateSSO",e.WebAuthn="webAuthn",e.WebAuthnError="webAuthnError",e.DeviceLimitReached="deviceLimitReached",e.DashlaneAuthenticator="dashlaneAuthenticator"}(t.LoginStep||(t.LoginStep={}))},82413:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Debugger=void 0;const o=r(4939),n=r(4407),i=([e,...t])=>{let r="",o=[];"string"==typeof e?r=e:o=[e],o=[...o,...t];const n=(e=>e.reduce(((e,t)=>{const r=Object.keys(e).length;return{...e,[r]:t}}),{}))(o);return{message:r,details:n}};const a=function(){const e=e=>(...t)=>{const r={...i(t),level:e};(0,o.log)(r)};return{log:e(n.LogLevel.Debug),info:e(n.LogLevel.Info),warn:e(n.LogLevel.Warn),error:e(n.LogLevel.Error)}}();t.Debugger=a,t.default=a},4939:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.redirectConsoleLogs=t.logVerbose=t.logDebug=t.logInfo=t.logWarn=t.logError=t.log=void 0;const o=r(16516),n=r(48749),i=r(43051),a=r(4407),s=r(82569),c=r(17825),u=r(32588);let d=null;const l=e=>t=>{const{level:r=a.LogLevel.Error}=t,o=(e=>{switch(e){case a.LogLevel.Error:return console.error;case a.LogLevel.Warn:return console.warn;case a.LogLevel.Info:return console.info;case a.LogLevel.Verbose:return console.log;case a.LogLevel.Debug:return console.debug;default:return(0,c.assertUnreachable)(e)}})(r),n=e(t);o.call(this,n)},p=(0,s.formatLogEntry)(s.formatLogEntryDetail),S=(e,t)=>r=>o=>t(o[e])&&r(o),g=S("tag",((e=[])=>{const t=n.config.LOG_TAGS||[],r="string"==typeof t?[t]:[...t],o="string"==typeof e?[e]:[...e];return!r.length||r.some((e=>o.includes(e)))})),E=S("level",(e=>e>=n.config.LOG_LEVEL)),y=(0,o.pipe)((e=>t=>(d||l(e))(t)),E,g)(p);y({message:"~~~ Logs activated ~~~",level:a.LogLevel.Info,tag:[u.LOGS_LOG_TAG,u.DEBUGGER_LOG_TAG]}),t.log=y,t.logError=(0,i.withErrorLevel)(y),t.logWarn=(0,i.withWarnLevel)(y),t.logInfo=(0,i.withInfoLevel)(y),t.logDebug=(0,i.withDebugLevel)(y),t.logVerbose=(0,i.withVerboseLevel)(y);t.redirectConsoleLogs=e=>(d=e,()=>{d=null})},43051:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.withVerboseLevel=t.withDebugLevel=t.withInfoLevel=t.withWarnLevel=t.withErrorLevel=t.withTag=t.withLevel=void 0;const o=r(4407),n=(e,t)=>r=>o=>r({[e]:t,...o});t.withLevel=e=>n("level",e);t.withTag=e=>n("tag",e),t.withErrorLevel=(0,t.withLevel)(o.LogLevel.Error),t.withWarnLevel=(0,t.withLevel)(o.LogLevel.Warn),t.withInfoLevel=(0,t.withLevel)(o.LogLevel.Info),t.withDebugLevel=(0,t.withLevel)(o.LogLevel.Debug),t.withVerboseLevel=(0,t.withLevel)(o.LogLevel.Verbose)},82569:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatLogEntryDetail=t.formatLogEntry=void 0;const o=r(92263),n=r(4407),i=":",a=" ",s="|";function c(e){const{stack:t}=e;let r=`${e}`;if(t&&"string"==typeof t){t.substr(0,t.indexOf("\n"))===r&&(r="")}return`${r}${r?`\n${t}`:t}`}const u={[n.LogLevel.Error]:"(e)",[n.LogLevel.Warn]:"(w)",[n.LogLevel.Info]:"(i)",[n.LogLevel.Debug]:"(d)",[n.LogLevel.Verbose]:"(v)"};t.formatLogEntry=e=>t=>{const{details:r={},level:o=n.LogLevel.Debug,message:c,tag:d=[]}=t,l=function(e){const t=Array.isArray(e)?e:[e];return t.length?` [${t.join(s)}]`:""}(d),p=u[o],S=Boolean(c),g=S?` ${c}`:"",E=function(e,t,r){return Object.keys(t).reduce(((o,n)=>!Number.isInteger(parseInt(n,10))&&r?`${o}${a}${n}${i}${e(t[n])}`:`${o}${a}${e(t[n])}`),"")}(e,r,S);return`${p}${l}${g}${E}`};t.formatLogEntryDetail=e=>(0,o.isCarbonError)(e)?function(e){const t=JSON.stringify(e.getAdditionalInfo()),r=t?`\n${t}`:"";return`${c(e)}${r}`}(e):e instanceof Error?c(e):"object"==typeof e?JSON.stringify(e):String(e)},95623:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.withWarnLevel=t.withVerboseLevel=t.withTag=t.withLevel=t.withInfoLevel=t.withErrorLevel=t.withDebugLevel=t.Silent=t.LogLevel=t.redirectConsoleLogs=t.logWarn=t.logVerbose=t.logInfo=t.logError=t.logDebug=t.log=void 0;const i=r(82413);t.default=i.Debugger;var a=r(4939);Object.defineProperty(t,"log",{enumerable:!0,get:function(){return a.log}}),Object.defineProperty(t,"logDebug",{enumerable:!0,get:function(){return a.logDebug}}),Object.defineProperty(t,"logError",{enumerable:!0,get:function(){return a.logError}}),Object.defineProperty(t,"logInfo",{enumerable:!0,get:function(){return a.logInfo}}),Object.defineProperty(t,"logVerbose",{enumerable:!0,get:function(){return a.logVerbose}}),Object.defineProperty(t,"logWarn",{enumerable:!0,get:function(){return a.logWarn}}),Object.defineProperty(t,"redirectConsoleLogs",{enumerable:!0,get:function(){return a.redirectConsoleLogs}}),n(r(82413),t);var s=r(4407);Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return s.LogLevel}}),Object.defineProperty(t,"Silent",{enumerable:!0,get:function(){return s.Silent}});var c=r(43051);Object.defineProperty(t,"withDebugLevel",{enumerable:!0,get:function(){return c.withDebugLevel}}),Object.defineProperty(t,"withErrorLevel",{enumerable:!0,get:function(){return c.withErrorLevel}}),Object.defineProperty(t,"withInfoLevel",{enumerable:!0,get:function(){return c.withInfoLevel}}),Object.defineProperty(t,"withLevel",{enumerable:!0,get:function(){return c.withLevel}}),Object.defineProperty(t,"withTag",{enumerable:!0,get:function(){return c.withTag}}),Object.defineProperty(t,"withVerboseLevel",{enumerable:!0,get:function(){return c.withVerboseLevel}}),Object.defineProperty(t,"withWarnLevel",{enumerable:!0,get:function(){return c.withWarnLevel}})},4407:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Silent=t.LogLevel=void 0,function(e){e[e.Verbose=0]="Verbose",e[e.Debug=10]="Debug",e[e.Info=20]="Info",e[e.Warn=30]="Warn",e[e.Error=40]="Error"}(t.LogLevel||(t.LogLevel={})),t.Silent=100},59398:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(66102);t.config={commands:{logEvent:{handler:o.logEvent},logPageView:{handler:o.logPageView},flushQueue:{handler:o.flushQueue}},queries:{},liveQueries:{}}},82481:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StyxApiResult=void 0,function(e){e[e.AllBatchesSent=0]="AllBatchesSent",e[e.SomeBatchesSent=1]="SomeBatchesSent",e[e.NoBatchesSent=2]="NoBatchesSent"}(t.StyxApiResult||(t.StyxApiResult={}))},38912:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateEventLoggerVirtualStoreState=t.UPDATE_EVENT_LOGGER_STATE=t.createEventLoggerVirtualStore=t.CREATE_EVENT_LOGGER_VIRTUAL_STORE=void 0,t.CREATE_EVENT_LOGGER_VIRTUAL_STORE="CREATE_EVENT_LOGGER_VIRTUAL_STORE";t.createEventLoggerVirtualStore=({storeName:e,initialState:r})=>({type:t.CREATE_EVENT_LOGGER_VIRTUAL_STORE,storeName:e,initialState:r}),t.UPDATE_EVENT_LOGGER_STATE="UPDATE_EVENT_LOGGER_STATE";t.updateEventLoggerVirtualStoreState=({storeName:e,updater:r})=>({type:t.UPDATE_EVENT_LOGGER_STATE,storeName:e,updater:r})},52895:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(59398);t.bootstrap=(e,t)=>{e.register(o.config),t.eventLoggerService.initRepository()}},87911:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decryptEvents=t.encryptEvents=void 0;const o=r(72365),n=r(91301),i=r(65675),a=r(56668);t.encryptEvents=async function(e,t,r){const s=JSON.stringify(t),c=(0,a.deflateUtf16)(s);return await async function({storeService:e,encryptionKey:t,data:r}){const a=(0,o.makeDataEncryptorService)(e),{cryptoConfig:s}=(0,i.parsePayload)(n.CRYPTO_NODERIVATION_HMAC64);a.setInstance({raw:t},"",s);const c=await a.getInstance().encrypt(r);return a.close(),c}({storeService:e,encryptionKey:r,data:c})},t.decryptEvents=async function(e,t,r){const n=await async function({storeService:e,encryptedData:t,encryptionKey:r}){const n=(0,o.makeDataEncryptorService)(e);n.setInstance({raw:r},"");const i=await n.getInstance().decrypt(t);return n.close(),i}({storeService:e,encryptedData:t,encryptionKey:r}),i=(0,a.inflateUtf16)(n);return JSON.parse(i)}},26415:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.chunkArray=t.getOsContext=t.getOsVersion=t.getOsType=t.getBrowserContext=t.getAppContext=t.applicationBuildTypeToHermesBuildType=t.platformStringToAppPlatform=t.createLogger=void 0;const o=r(10203),n=r(11814),i=r(48749),a=r(59600);t.createLogger=e=>{const{eventLoggerService:t}=e,r=t.getRepository();return{logger:r.createLogger(),logRepository:r}};t.platformStringToAppPlatform=e=>{switch(e){case"server_standalone":case"server_carbon_simulator":case"server_carbon_unknown":case"server_carbon_tests":return o.Platform.Saex;case"server_leeloo_dev":case"server_leeloo":case"server_tac":return o.Platform.Web;case"desktop_win":throw new Error(`Hermes Web SDK: Unsupported platform "${e}" detected. This platform is not supported by the Hermes Web SDK or Styx API.`)}};t.applicationBuildTypeToHermesBuildType=e=>{switch(e){case a.ApplicationBuildType.DEV:return o.BuildType.Dev;case a.ApplicationBuildType.QA:return o.BuildType.Qa;case a.ApplicationBuildType.NIGHTLY:return o.BuildType.Nightly;default:return o.BuildType.Production}};t.getAppContext=e=>{const r=e.getPlatformInfo(),o=e.getState().device.application.settings.buildType;return{platform:(0,t.platformStringToAppPlatform)(r.platformName),version:(n=r.appVersion,a=i.config.MANIFEST_VERSION,a?n+"-mv"+a:n),build_type:(0,t.applicationBuildTypeToHermesBuildType)(o)};var n,a};t.getBrowserContext=()=>({name:n.browser.getBrowserName(),version:n.browser.getBrowserVersion(),user_agent:n.navigator.getNavigator().userAgent});t.getOsType=e=>{let t=o.OsType.Other;const r=e.os.toLowerCase().replace(/[ -/]+/g,"_");return Object.values(o.OsType).map((e=>e.toString())).includes(r)&&(t=r),t};t.getOsVersion=e=>{const t="Mac OS"===e.os?e.osVersion.replace("OS_X_","").replace(/_/g,"."):e.osVersion,r=/([0-9]{1,3}(?:\.[0-9]{0,4}){0,2})/.exec(t);return r&&r.length>=2?r[1]:"0"};t.getOsContext=e=>{const r=e.getPlatformInfo();return{type:(0,t.getOsType)(r),version:(0,t.getOsVersion)(r),locale:r.lang}},t.chunkArray=function e(t,r){return t.length<=r?[t]:[t.slice(0,r),...e(t.slice(r),r)]}},74412:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeEventLoggerService=t.bootstrap=void 0;const o=r(10203),n=r(48749),i=r(26415),a=r(2246),s=r(87564),c=r(10460),u=r(78671),d=r(99921);var l=r(52895);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return l.bootstrap}});t.makeEventLoggerService=e=>{let t=null;const r=()=>{if(!t)throw new Error("makeEventLoggerService: You must call initRepository() before getting the repository instance");const r=e.storeService.getUserSession();return(r.analyticsIds?.userAnalyticsId||r.analyticsIds?.deviceAnalyticsId)&&t.setTrackingInfo(r.analyticsIds.userAnalyticsId,r.analyticsIds.deviceAnalyticsId),t};return{initRepository:()=>{const r=e.storeService,s=(0,i.getAppContext)(r),c=(0,i.getOsContext)(r),u=(0,i.getBrowserContext)(),l=(0,a.getCommonAppSetting)("installationId"),p=new d.EventLoggerStoreFactory(r);t=new o.LogRepository(s,c,u,l,void 0,!1,p);const S=r.getUserSession();(S.analyticsIds?.userAnalyticsId||S.analyticsIds?.deviceAnalyticsId)&&t.setTrackingInfo(S.analyticsIds.userAnalyticsId,S.analyticsIds.deviceAnalyticsId),3===n.config.MANIFEST_VERSION&&t.setServiceWorkerStartTime((new Date).toISOString())},getRepository:r,logEvent:async o=>{const{interactionDataConsent:n}=await(0,u.getGlobalExtensionSettings)(e);if(!(!1!==n))return;return r().createLogger().logEvent(o),(0,c.storeEventsInQueue)(e,t)},logSync:async o=>{const{interactionDataConsent:n}=await(0,u.getGlobalExtensionSettings)(e);if(!(!1!==n))return;return r().createLogger().logEvent(o),(0,c.storeEventsInQueue)(e,t)},flushEventQueue:()=>(0,s.sendEventQueueToStyx)(e)}}},4296:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.immediatelySendEvents=t.queueEvents=t.queueLogRepositoryEvents=void 0;const o=r(59600),n=r(30913),i=r(82481),a=r(87564),s=r(10460);async function c(e,t){const r=t.logStorage.containsPriorityEvent();try{if(await(0,s.storeEventsInQueue)(e,t),r){return await(0,a.sendEventQueueToStyx)(e)}return{success:!0,result:i.StyxApiResult.NoBatchesSent}}catch(e){return{success:!1,result:i.StyxApiResult.NoBatchesSent}}}async function u(e,t){try{return await(0,a.immediatelySendEventsToStyx)(e,t)}catch(e){return{success:!1,result:i.StyxApiResult.NoBatchesSent}}}t.queueLogRepositoryEvents=async function(e,t){return(0,n.applicationBuildTypeSelector)(e.storeService.getState())===o.ApplicationBuildType.QA?u(e,t):c(e,t)},t.queueEvents=c,t.immediatelySendEvents=u},19764:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.eventLoggerReducer=void 0;const o=r(38912);t.eventLoggerReducer=(e={},t)=>{switch(t.type){case o.CREATE_EVENT_LOGGER_VIRTUAL_STORE:return{[t.storeName]:t.initialState};case o.UPDATE_EVENT_LOGGER_STATE:return{[t.storeName]:t.updater(e[t.storeName])};default:return e}}},39261:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.styxKeysSelector=void 0;t.styxKeysSelector=e=>e.userSession.sdkAuthentication.styxKeys},87564:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.immediatelySendEventsToStyx=t.sendEventQueueToStyx=void 0;const o=r(2246),n=r(45956),i=r(76330),a=r(38250),s=r(87911),c=r(26415),u=r(10460),d=450;let l=!1;async function p(e,t,r){let o=[];if(!t||0===t.length)return o;const a=(0,i.getMakeStyxApiRequest)(r,n.ApiAuthType.App,n.ApiRequestMethod.POST),s=(0,c.chunkArray)(t,d);try{for(const t of s){if(!(await a(e,{payload:(0,i.getEventsPayload)(t)})).success)break;o=o.concat(t.map((({id:e})=>e)))}}catch{return o}return o}t.sendEventQueueToStyx=async function(e){if(!0===l)return{success:!0,result:a.StyxApiResult.NoBatchesSent};l=!0;const{storageService:t,storeService:r}=e,n=t.getLocalStorage(),i=(0,o.getCommonAppSetting)("eventLoggerQueueKey");if(!await n.itemExists(u.EVENT_QUEUE_STORAGE_KEY))return l=!1,{success:!0,result:a.StyxApiResult.NoBatchesSent};const c=await n.readItem(u.EVENT_QUEUE_STORAGE_KEY);if(!c)return l=!1,{success:!0,result:a.StyxApiResult.NoBatchesSent};if("string"!=typeof c)throw new Error("value of EventLogger.eventQueue is expected to be a string");const d=await(0,s.decryptEvents)(r,c,i),S=d.filter((e=>"anonymous"===e.category)),g=d.filter((e=>"user"===e.category)),E=await p(r,S,"/v1/event/anonymous"),y=await p(r,g,"/v1/event/user"),_=await n.readItem(u.EVENT_QUEUE_STORAGE_KEY);if("string"!=typeof _)throw new Error("value of EventLogger.eventQueue is expected to be a string");const A=(await(0,s.decryptEvents)(r,_,i)).filter((({id:e})=>!(E.includes(e)||y.includes(e)))),m=await(0,s.encryptEvents)(r,A,i);await n.writeItem(u.EVENT_QUEUE_STORAGE_KEY,m);const T=E.length>0||y.length>0,v=0===m.length;let f=a.StyxApiResult.NoBatchesSent;return v?f=a.StyxApiResult.AllBatchesSent:T&&(f=a.StyxApiResult.SomeBatchesSent),l=!1,{success:!0,result:f}},t.immediatelySendEventsToStyx=async function(e,t){const{storeService:r}=e,o=t.logStorage.copy();t.logStorage.removeEvents(o.map((e=>e.id)));const n=o.filter((e=>"anonymous"===e.category)),i=o.filter((e=>"user"===e.category)),s=await p(r,n,"/v1/event/anonymous"),c=await p(r,i,"/v1/event/user"),u=s.length>0||c.length>0,d=s.length+c.length===o.length;let l=a.StyxApiResult.NoBatchesSent;return d?l=a.StyxApiResult.AllBatchesSent:u&&(l=a.StyxApiResult.SomeBatchesSent),{success:!0,result:l}}},66102:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.flushQueue=t.logToggleAnalyticsEvent=t.logPageView=t.logEvent=void 0;const o=r(10203),n=r(78671),i=r(82481),a=r(26415),s=r(4296),c=r(87564),u=r(10460);t.logEvent=async function(e,t){const{interactionDataConsent:r}=await(0,n.getGlobalExtensionSettings)(e);if(!(!1!==r))return{result:i.StyxApiResult.NoBatchesSent,success:!1};const{logger:o,logRepository:c}=(0,a.createLogger)(e);return o.logEvent(t.event),(0,s.queueLogRepositoryEvents)(e,c)},t.logPageView=async function(e,t){const{interactionDataConsent:r}=await(0,n.getGlobalExtensionSettings)(e);if(!(!1!==r))return{result:i.StyxApiResult.NoBatchesSent,success:!1};const{logger:o,logRepository:c}=(0,a.createLogger)(e);return o.logView(t.pageView,t.browseComponent),(0,s.queueLogRepositoryEvents)(e,c)},t.logToggleAnalyticsEvent=async function(e){const{interactionDataConsent:t}=await(0,n.getGlobalExtensionSettings)(e),{logger:r,logRepository:i}=(0,a.createLogger)(e),c=!1!==t;if(c||(0,u.clearEventQueue)(e,i),r.logEvent(new o.UserToggleAnalyticsEvent({isAnalyticsEnabled:c})),!t)try{return(0,s.immediatelySendEvents)(e,i)}catch{return(0,s.queueLogRepositoryEvents)(e,i)}return(0,s.queueLogRepositoryEvents)(e,i)},t.flushQueue=function(e){return(0,c.sendEventQueueToStyx)(e)}},10460:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearEventQueue=t.storeEventsInQueue=t.EVENT_QUEUE_STORAGE_KEY=void 0;const o=r(2246),n=r(87911);t.EVENT_QUEUE_STORAGE_KEY="EventLogger.eventQueue",t.storeEventsInQueue=async function(e,r){const{storageService:i,storeService:a}=e,s=i.getLocalStorage(),c=(0,o.getCommonAppSetting)("eventLoggerQueueKey"),u=r.logStorage.copy();let d=[];const l=[];if(await s.itemExists(t.EVENT_QUEUE_STORAGE_KEY)){const e=await s.readItem(t.EVENT_QUEUE_STORAGE_KEY);if("string"!=typeof e)throw new Error("value of EventLogger.eventQueue is expected to be a string");e&&(d=await(0,n.decryptEvents)(a,e,c))}d=d.concat(u),d.map((e=>l.filter((t=>t.id===e.id)).length>0?null:l.push(e)));const p=await(0,n.encryptEvents)(a,l,c);await s.writeItem(t.EVENT_QUEUE_STORAGE_KEY,p);const S=u.map((e=>e.id));r.logStorage.removeEvents(S)},t.clearEventQueue=async function(e,r){const{storageService:i,storeService:a}=e,s=i.getLocalStorage(),c=(0,o.getCommonAppSetting)("eventLoggerQueueKey"),u=await(0,n.encryptEvents)(a,[],c);await s.writeItem(t.EVENT_QUEUE_STORAGE_KEY,u);const d=r.logStorage.copy().map((e=>e.id));r.logStorage.removeEvents(d)}},99921:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventLoggerStoreFactory=void 0;const o=r(38912);t.EventLoggerStoreFactory=class{constructor(e){this.storeService=e}createStore(e,t){const{storeService:r}=this;return r.dispatch((0,o.createEventLoggerVirtualStore)({storeName:e,initialState:t.initialState})),this.makeStore(e)}getStore(e){if(!this.hasStore(e))throw new Error(`Store ${e} was not found`);return this.makeStore(e)}hasStore(e){const{storeService:t}=this;return e in t.getState().device.eventLogger}makeStore(e){const{storeService:t}=this;return{getState:()=>t.getState().device.eventLogger[e],updateState:r=>t.dispatch((0,o.updateEventLoggerVirtualStoreState)({storeName:e,updater:r}))}}}},33341:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(14414);t.config={commands:{logException:{handler:o.logException}},liveQueries:{},queries:{}}},69335:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},55101:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(33341);t.bootstrap=e=>{e.register(o.config)}},70252:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendTypedExceptionLog=t.sendExceptionLog=t.setAllowedToSendExceptionLog=t.bootstrap=void 0;const o=r(74450),n=r(12126),i=r(95623);var a=r(55101);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return a.bootstrap}});let s=!0;t.setAllowedToSendExceptionLog=e=>s=e,t.sendExceptionLog=async function(e){if(s)try{await(0,o.default)((0,n.default)("carbonException",e))}catch(e){i.Debugger.error(`[Exception] - sendExceptionLog: ${e.message||e}`)}},t.sendTypedExceptionLog=async function(e,t){if(s)try{await(0,o.default)((0,n.default)(e,t))}catch(e){i.Debugger.error(`[Exception] - sendTypedExceptionLog: ${e.message||e}`)}}},12126:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.anonymousSessionId=void 0;const o=r(28354),n=r(86056),i=r(90503),a=r(92263),s=r(48749);function c(e){const r=function(e){const t={...e,codeName:s.config.CODE_NAME,manifestVersion:s.config.MANIFEST_VERSION};return JSON.stringify(t)}(e.additionalInfo);return{action:"logOnline",code:e.code===i.ExceptionCriticality.WARNING?i.ExceptionCriticality.WARNING:i.ExceptionCriticality.ERROR,message:e.message||"",exceptiontype:e.type,functionName:e.funcName,file:e.fileName,legacy:Boolean(e.legacy),line:e.line,stack:e.precisions,sessionId:t.anonymousSessionId,additionalInfo:r,errorCount:1,featureFlips:[],initialUseCaseModule:e.initialUseCaseModule??"carbon",initialUseCaseName:e.initialUseCaseName,useCaseStacktrace:e.useCaseStacktrace??[]}}function u(e,t){const r=t;if(r.error){const t=r.error.precisions&&"string"==typeof r.error.precisions?`${r.error.message}\n${r.error.precisions}`:r.error.message,o=(0,a.isCarbonError)(r.error)?r.error.getAdditionalInfo():{};return c({type:e,message:t,code:r.code||r.error.errorLevel,precisions:r.error.stack,additionalInfo:o,initialUseCaseModule:"carbon",initialUseCaseName:""})}return c(Object.assign({type:e},t))}t.anonymousSessionId=(0,o.v4)(),t.default=function(e,t){return{...(r=(0,n.getPlatformInfo)(),{type:r.platformName,version:r.appVersion,osVersion:r.osVersion,browser:r.browser,browserVersion:r.browserVersion,os:r.os}),...u(e,t)};var r}},74450:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EXCEPTION_LOG_ENDPOINT=void 0;const o=r(28445),n=r(95623);t.EXCEPTION_LOG_ENDPOINT="https://kck3hlb9.dashlane.com/1/softwarelog/create";const i=10;t.default=function(e){return function(e,t,r){const o=e.message||e.functionName||e.file||"UNKNOWN_EXCEPTION";if(a[o]=a[o]||0,a[o]++,a[o]>t)return Promise.resolve();return r()}(e,i,(()=>(0,o.postDataToUrl)(t.EXCEPTION_LOG_ENDPOINT,e).then((()=>{})).catch((e=>n.default.log(e)))))};const a={}},14414:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logException=void 0;const o=r(70252);t.logException=async function(e,t){return await(0,o.sendTypedExceptionLog)(t.exceptionType,t.log),{success:!0}}},90503:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExceptionCriticality=void 0,function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR"}(t.ExceptionCriticality||(t.ExceptionCriticality={}))},32588:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EXCEPTION_LOG_TAG=t.DEBUGGER_LOG_TAG=t.LOGS_LOG_TAG=void 0,t.LOGS_LOG_TAG="Logs",t.DEBUGGER_LOG_TAG="Debugger",t.EXCEPTION_LOG_TAG="Exception"},88393:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(24375),n=r(55111),i=r(90235),a=r(26972),s=r(56857);t.config={commands:{markNotificationAsInteracted:{handler:o.markNotificationAsInteracted},markNotificationAsSeen:{handler:n.markNotificationAsSeen},markNotificationAsUnseen:{handler:i.markNotificationAsUnseen}},queries:{getNotificationStatus:{selector:s.notificationsStatusSelector}},liveQueries:{liveNotificationStatus:{operator:a.notificationsStatus$}}}},66869:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationStatus=t.NotificationName=void 0;var o=r(82028);Object.defineProperty(t,"NotificationName",{enumerable:!0,get:function(){return o.NotificationName}}),Object.defineProperty(t,"NotificationStatus",{enumerable:!0,get:function(){return o.NotificationStatus}})},42122:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(88393);t.bootstrap=e=>{e.register(o.config)}},70530:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(42122);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},24375:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.markNotificationAsInteracted=void 0;const o=r(34287),n=r(56857);t.markNotificationAsInteracted=async(e,t)=>{const{storeService:r,localStorageService:i}=e;r.dispatch((0,o.markAsInteracted)(t));const a=(0,n.notificationsStatusSelector)(r.getState());i.getInstance().storeNotificationsStatus(a)}},55111:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.markNotificationAsSeen=void 0;const o=r(34287),n=r(56857);t.markNotificationAsSeen=async(e,t)=>{const{storeService:r,localStorageService:i}=e;r.dispatch((0,o.markAsSeen)(t));const a=(0,n.notificationsStatusSelector)(r.getState());i.getInstance().storeNotificationsStatus(a)}},90235:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.markNotificationAsUnseen=void 0;const o=r(34287),n=r(56857);t.markNotificationAsUnseen=async(e,t)=>{const{storeService:r,localStorageService:i}=e;r.dispatch((0,o.markAsUnseen)(t));const a=(0,n.notificationsStatusSelector)(r.getState());i.getInstance().storeNotificationsStatus(a)}},82028:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationStatus=t.NotificationName=void 0,function(e){e.PaymentFailureChurning="paymentFailureChurning",e.PaymentFailureChurned="paymentFailureChurned",e.IdsPromotion="idsPromotion",e.SwitchToMlAnalysisEngine="switchToMlAnalysisEngine",e.DWMb2bAutoEnrollTooltip="dWMb2bAutoEnrollTooltip",e.VpnProviderIsNowHotspot="vpnProviderIsNowHotspot",e.VpnHostpotshieldInstalled="vpnHostpotshieldInstalled",e.PopupIncomingTabPayments="popupIncomingTabPayments",e.PopupIncomingTabSecureNotes="popupIncomingTabSecureNotes",e.PopupIncomingTabPersonalInfo="popupIncomingTabPersonalInfo",e.PopupIncomingTabIDs="popupIncomingTabIDs",e.NewAccountMenuTooltip="newAccountMenuTooltip",e.TacGetTheExtensionBanner="tacGetTheExtensionBanner",e.TacEnableAccountRecoveryBanner="tacEnableAccountRecoveryBanner",e.TacOnlyOneAdminBanner="tacOnlyOneAdminBanner",e.TacDarkWebInsightsNewBadge="tacDarkWebInsightsNewBadge",e.PasswordHistoryBanner="passwordHistoryBanner",e.SharingCenterDisabledBanner="sharingCenterDisabledBanner",e.MultiselectGuideDelete="multiselectGuideDelete",e.MultiselectGuideShift="multiselectGuideShift",e.AccountRecoveryAvailableAdminTooltip="accountRecoveryAvailableAdminTooltip",e.AccountRecoveryAvailableEmployeeDialog="accountRecoveryAvailableEmployeeDialog",e.ActivateInviteLink="activateInviteLink"}(t.NotificationName||(t.NotificationName={})),function(e){e.Interacted="interacted",e.Seen="seen",e.Unseen="unseen"}(t.NotificationStatus||(t.NotificationStatus={}))},62952:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(57470),n=r(45709),i=r(91880);t.config={commands:{generatePassword:{handler:o.generatePasswordHandler},generateAndSavePassword:{handler:o.generateAndSavePasswordHandler},savePasswordGenerationSettings:{handler:n.savePasswordGenerationSettingsHandler}},queries:{getPasswordGenerationSettings:{selector:i.passwordGenerationSettingsSelector}},liveQueries:{}}},64811:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(62952);t.bootstrap=e=>{e.register(o.config)}},57470:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateAndSavePasswordHandler=t.generatePasswordHandler=void 0;const o=r(47975),n=r(95623),i=r(70252),a=r(5464);t.generatePasswordHandler=async function(e,t){try{const r=(0,a.makeSessionController)(e).generatePassword(t.settings);return{success:!0,password:r,strength:await(0,o.evaluatePasswordStrength)(r)}}catch(e){return(0,n.logError)(e),(0,i.sendExceptionLog)({error:e}),{success:!1}}},t.generateAndSavePasswordHandler=async function(e,t){try{const r=(0,a.makeSessionController)(e).generateAndSavePassword(t.url);return{success:!0,password:r,strength:await(0,o.evaluatePasswordStrength)(r)}}catch(e){return(0,n.logError)(e),(0,i.sendExceptionLog)({error:e}),{success:!1}}}},45709:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.savePasswordGenerationSettingsHandler=void 0;const o=r(10203),n=r(95623),i=r(70252),a=r(44908),s=r(29954),c=r(23136);t.savePasswordGenerationSettingsHandler=async function(e,t){try{const n=(0,a.fixIncoherentSettings)(t),i={GeneratorDefaultSize:(r=n).length,GeneratorDefaultAvoidAmbiguousChars:r.avoidAmbiguous,GeneratorDefaultDigits:r.digits,GeneratorDefaultLetters:r.letters,GeneratorDefaultSymbols:r.symbols};(0,s.updatePersonalSettings)(e.storeService,e.sessionService,i),(0,c.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},o.Trigger.SettingsChange)}catch(e){(0,n.logError)(e),(0,i.sendExceptionLog)({error:e})}var r}},91880:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.passwordGenerationSettingsSelector=void 0;const o=r(16593),n=r(44908);t.passwordGenerationSettingsSelector=function(e){const t=(0,o.personalSettingsSelector)(e);return(0,n.getDefaultPasswordGenerationSettings)(t)}},73496:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordLeakErrors=void 0,function(e){e.GET_LAST_CHECK_TIMESTAMP="GET_LAST_CHECK_TIMESTAMP",e.GET_IS_MP_LEAKED="GET_IS_MP_LEAKED"}(t.PasswordLeakErrors||(t.PasswordLeakErrors={}))},76860:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checkPasswordLeaked=void 0;const o=r(18948),n=r(10203),i=r(58807),a=r(73496);t.checkPasswordLeaked=async function(e,t){const{password:r}=t,{eventLoggerService:s,applicationModulesAccess:c}=e,{queries:{lastCheckTimestamp:u,isMasterPasswordLeaked:d},commands:{temporaryCheckMasterPassword:l}}=c.createClients().masterPasswordSecurity,p=await(0,o.firstValueFrom)(u());if((0,i.isFailure)(p))return{success:!1,error:{code:a.PasswordLeakErrors.GET_LAST_CHECK_TIMESTAMP}};await l({password:r});const S=await(0,o.firstValueFrom)(u());if((0,i.isFailure)(S))return{success:!1,error:{code:a.PasswordLeakErrors.GET_LAST_CHECK_TIMESTAMP}};const g=await(0,o.firstValueFrom)(d());if((0,i.isFailure)(g))return{success:!1,error:{code:a.PasswordLeakErrors.GET_IS_MP_LEAKED}};const{data:E}=g;return p.data!==S.data&&await s.logEvent(new n.AnonymousMasterPasswordHealthReportEvent({isLeaked:E})),{success:!0,response:{isLeaked:E}}}},43057:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(20478);t.setupSubscriptions=async function(e,t){e.sessionOpened.on((()=>(0,o.triggerMasterPasswordLeakCheck)(t)))}},20478:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerMasterPasswordLeakCheck=void 0;const o=r(76860),n=r(16593),i=r(38981);t.triggerMasterPasswordLeakCheck=async function(e){const t=e.storeService.getState();if((0,i.isSSOUserSelector)(t))return;const r=(0,n.masterPasswordSelector)(t);(0,o.checkPasswordLeaked)(e,{password:r})}},34161:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(30467),n=r(53264),i=r(18693),a=r(97475),s=r(50893);t.config={commands:{cancelAutoRenew:{handler:i.cancelAutoRenew},downloadCustomerInvoice:{handler:n.downloadCustomerInvoice},fetchInvoiceList:{handler:a.fetchInvoiceList},requestRefund:{handler:s.requestRefund}},queries:{getInvoicesCount:{selector:o.allInvoicesLengthSelector},getInvoiceList:{selector:o.viewedQueriedInvoicesSelector},getInvoiceListYears:{selector:o.invoiceListYearsSelector}},liveQueries:{}}},83042:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OrderDir=void 0,function(e){e.ascending="ascending",e.descending="descending"}(t.OrderDir||(t.OrderDir={}))},78025:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(34161);t.bootstrap=e=>{e.register(o.config)}},18693:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cancelAutoRenew=void 0;const o=r(70252);t.cancelAutoRenew=async function(e){const{sessionService:t,storeService:r}=e;if(!r.isAuthenticated())return{success:!1};try{return await t.getInstance().payment.cancelPremiumSubscription(),{success:!0}}catch(e){const t=`[SessionController] - cancelPremiumSubscription: ${e}`,r=new Error(t);return(0,o.sendExceptionLog)({error:r}),{success:!1,error:{code:t}}}}},53264:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.downloadCustomerInvoice=void 0;const o=r(46298),n=r(48008);t.downloadCustomerInvoice=async function(e,t){const{storeService:r}=e,i=r.getUserLogin(),a=await(0,n.getCustomerInvoice)(r,i,t);return(0,o.isApiError)(a)?{success:!1}:{success:!0,data:JSON.stringify({data:Array.apply(null,new Uint8Array(a.data))})}}},97475:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fetchInvoiceList=void 0;const o=r(46298),n=r(36273),i=r(95944);t.fetchInvoiceList=async function(e){const{storeService:t}=e,r=t.getUserLogin();if(!t.isAuthenticated())return{success:!1};try{const e=await(0,n.listInvoices)(t,r);return(0,o.isApiError)(e)?{success:!1}:(t.dispatch((0,i.receivedInvoiceList)(e.invoices)),{success:!0})}catch(e){return{success:!1}}}},50893:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestRefund=void 0;const o=r(46298),n=r(48523),i=r(5464);t.requestRefund=async function(e,t){const{sessionService:r,storeService:a,wsService:s}=e,c=a.getUserLogin();if(!a.isAuthenticated())return{success:!1};try{const e=await(0,n.grantFullRefundAndCancelSubscription)(a,c,t);return(0,o.isApiError)(e)?{success:!1}:(t&&!t.dryRun&&(0,i.refeshAccountInfo)(a,r,s),{success:!0})}catch(e){return{success:!1}}}},7753:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(78025);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},98584:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getInvoiceMappers=void 0;const o=r(25424);t.getInvoiceMappers=()=>({amountPaid:e=>e.amountPaid,invoiceId:e=>e.invoiceId,planName:e=>(e=>"advanced"===e.planFeature?"ADVANCED":"essentials"===e.planFeature?"ESSENTIALS":["family_created","family_renewed"].includes(e.eventType)?"FAMILY":"sync"===e.planFeature?"PREMIUM":"OTHER")(e),startDate:e=>e.startDate,startYear:e=>(e=>(0,o.fromUnixTime)(e.startDate).getFullYear().toString())(e)})},73938:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(28903),n=r(64331),i=r(81846),a=r(84547);t.config={commands:{unlockProtectedItems:{handler:o.unlockProtectedItems},disableCredentialProtection:{handler:a.disableCredentialProtectionHandler}},queries:{areProtectedItemsUnlocked:{selector:i.areProtectedItemsAvailableSelector}},liveQueries:{liveAreProtectedItemsUnlocked:{operator:n.areProtectedItemsUnlocked$}}}},18982:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unlockProtectedItemsWrongPasswordError=t.UnlockProtectedItemsStatus=t.DisableCredentialProtectionStatus=void 0;var o=r(64966);Object.defineProperty(t,"DisableCredentialProtectionStatus",{enumerable:!0,get:function(){return o.DisableCredentialProtectionStatus}}),Object.defineProperty(t,"UnlockProtectedItemsStatus",{enumerable:!0,get:function(){return o.UnlockProtectedItemsStatus}}),Object.defineProperty(t,"unlockProtectedItemsWrongPasswordError",{enumerable:!0,get:function(){return o.unlockProtectedItemsWrongPasswordError}})},28903:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unlockProtectedItems=void 0;const o=r(64966),n=r(28287);t.unlockProtectedItems=async function(e,t){const{storeService:r,masterPasswordEncryptorService:i}=e;return await(0,n.validateMasterPassword)(r,i,t)?{status:o.UnlockProtectedItemsStatus.SUCCESS}:{status:o.UnlockProtectedItemsStatus.ERROR,error:{code:o.unlockProtectedItemsWrongPasswordError}}}},64710:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(73938);t.bootstrap=e=>{e.register(o.config)}},84547:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableCredentialProtectionHandler=void 0;const o=r(38250),n=r(18344);t.disableCredentialProtectionHandler=async function(e,{credentialId:t}){const{storeService:r,sessionService:i,eventLoggerService:a,applicationModulesAccess:s}=e;try{return await(0,n.disableCredentialProtection)({storeService:r,sessionService:i,eventLoggerService:a,applicationModulesAccess:s},t),{status:o.DisableCredentialProtectionStatus.SUCCESS}}catch(e){return{status:o.DisableCredentialProtectionStatus.ERROR}}}},18344:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableCredentialProtection=void 0;const o=r(19736),n=r(88779),i=({update:{autoprotected:e}})=>({AutoProtected:e});t.disableCredentialProtection=async function({storeService:e,sessionService:t,eventLoggerService:r,applicationModulesAccess:a},s){const c=e.getState();if(!(0,o.credentialSelector)(c,s))throw new Error("Credential does not exist, cant update");(0,n.updateCredential)({storeService:e,sessionService:t,eventLoggerService:r,applicationModulesAccess:a},{id:s,update:{autoprotected:!1}},i)}},88530:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var i=r(64710);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return i.bootstrap}}),n(r(18982),t)},64331:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.areProtectedItemsUnlocked$=void 0;const o=r(18948),n=r(81846),i=r(3343);t.areProtectedItemsUnlocked$=()=>(0,o.pipe)((0,i.map)((e=>(0,o.interval)(1e3).pipe((0,i.map)((()=>e))))),(0,i.switchMap)((e=>e)),(0,i.map)(n.areProtectedItemsAvailableSelector),(0,i.distinctUntilChanged)())},81846:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.areProtectedItemsAvailableSelector=t.areProtectedItemsUnlockedSelector=void 0;const o=r(38981),n=r(16593);t.areProtectedItemsUnlockedSelector=e=>Date.now()-(0,n.lastMasterPasswordCheckSelector)(e)<(e=>/^kw_test_auto_fmpc_.*/.test((0,n.userLoginSelector)(e))?5e3:3e5)(e);t.areProtectedItemsAvailableSelector=e=>(0,t.areProtectedItemsUnlockedSelector)(e)||(0,o.isSSOUserSelector)(e)},64966:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DisableCredentialProtectionStatus=t.unlockProtectedItemsWrongPasswordError=t.UnlockProtectedItemsStatus=void 0,function(e){e.SUCCESS="success",e.ERROR="error"}(t.UnlockProtectedItemsStatus||(t.UnlockProtectedItemsStatus={})),t.unlockProtectedItemsWrongPasswordError="WRONG PASSWORD",function(e){e.SUCCESS="success",e.ERROR="error"}(t.DisableCredentialProtectionStatus||(t.DisableCredentialProtectionStatus={}))},20054:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(85423),n=r(97810),i=r(43591),a=r(16593),s=r(18191);t.config={commands:{activateAccountRecovery:{handler:n.activateAccountRecovery},setupMasterPasswordForRecovery:{handler:i.setupMasterPasswordForRecovery},deactivateAccountRecovery:{handler:n.deactivateAccountRecovery},registerDeviceForRecovery:{handler:i.registerDeviceForRecovery},startAccountRecovery:{handler:i.startAccountRecovery},sendRecoveryRequest:{handler:i.sendRecoveryRequest},cancelRecoveryRequest:{handler:i.cancelRecoveryRequest},checkRecoveryRequestStatus:{handler:i.checkRecoveryRequestStatus},recoverUserData:{handler:i.recoverUserData},checkDoesLocalRecoveryKeyExist:{handler:i.checkDoesLocalRecoveryKeyExist},isRecoveryRequestPending:{handler:n.isRecoveryRequestPending}},queries:{getRecoveryOptInSetting:{selector:a.accountRecoveryOptInSelector},getShouldShowFeatureActivationModal:{selector:o.shouldShowFeatureActivationModalSelector},getAccountRecoveryRequestCount:{selector:o.accountRecoveryRequestsCountSelector}},liveQueries:{liveAccountRecoveryRequestCount:{operator:s.accountRecoveryRequestsCount$}}}},41346:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},15444:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeRecoveryController=void 0;const o=r(36513),n=r(95623),i=r(70252),a=r(34376),s=r(43927);function c(e,t,r){return(0,i.sendExceptionLog)({error:t}),n.Debugger.log(e,t),{error:{message:t.message,action:r}}}t.makeRecoveryController=(e,t)=>({getMasterPasswordResetDemandList:r=>function(e,t,r,o){const n=o.teamId;return t.recovery.getPendingRequests({login:r.login,uki:r.uki,teamId:n}).then((t=>{const o=e.getTeamAdminData(),i=Object.assign({},o),a=t.filter((e=>e.login!==r.login));return i.teams[n]&&(i.teams[n].notifications={accountRecoveryRequests:a},(0,s.updateTeamAdminData)(e,i)),{demands:a}})).catch((e=>({demands:[],error:c("Master Password Reset: Error while getPendingRequests",e,o).error})))}(e,t,(0,a.getCurrentUserInfo)(e),r),acceptMasterPasswordResetDemand:r=>function(e,t,r){const n=(0,o.makeAsymmetricEncryption)();return n.decrypt(t.privateKey,r.recoveryKey).then((e=>n.encrypt(r.userPublicKey,e))).then((o=>e.recovery.acceptRequest({login:t.login,uki:t.uki,sourceLogin:r.login,payload:o}))).then((()=>({}))).catch((e=>c("Master Password Reset: Error while acceptRequest",e,r)))}(t,(0,a.getCurrentUserInfo)(e),r),declineMasterPasswordResetDemand:r=>function(e,t,r){return e.recovery.refuseRequest({login:t.login,uki:t.uki,sourceLogin:r.login}).then((()=>({}))).catch((e=>c("Master Password Reset: Error while refuseRequest",e,r)))}(t,(0,a.getCurrentUserInfo)(e),r)})},63395:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(20054);t.bootstrap=e=>{e.register(o.config)}},76569:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(63395);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},18191:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountRecoveryRequestsCount$=void 0;const o=r(18948),n=r(3343),i=r(85423);t.accountRecoveryRequestsCount$=function(){return(0,o.pipe)((0,n.map)((e=>(0,i.accountRecoveryRequestsCountSelector)(e))),(0,n.distinctUntilChanged)())}},85423:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountRecoveryRequestsCountSelector=t.selectTeamAdminData=t.recoveryHashFromPremiumStatusSelector=t.recoveryHashFromPersonalSettingsSelector=t.shouldShowFeatureActivationModalSelector=void 0;const o=r(88205),n=r(26634),i=r(38981),a=r(16593),s=r(27885);t.shouldShowFeatureActivationModalSelector=e=>{const t=(0,o.hasFeatureSelector)(e,"SAEXAccountRecoveryv3"),r=(0,n.isRecoveryEnabledSelector)(e),a="boolean"==typeof e.userSession.personalSettings.RecoveryOptIn,s=(0,i.isSSOUserSelector)(e),c=e.userSession.session.isFirstSessionAfterAccountCreation;return!s&&t&&r&&!a&&!c};t.recoveryHashFromPersonalSettingsSelector=e=>(0,a.personalSettingsSelector)(e).RecoveryHash||"";t.recoveryHashFromPremiumStatusSelector=e=>(0,a.premiumStatusSelector)(e).recoveryHash||"";t.selectTeamAdminData=e=>e.userSession.teamAdminData??{teams:{}};t.accountRecoveryRequestsCountSelector=e=>{const r=(0,s.getCurrentTeamId)(e.userSession.spaceData);if(!r)return 0;const{teams:o}=(0,t.selectTeamAdminData)(e);return Number(o[r]?.notifications?.accountRecoveryRequests?.length??0)}},43591:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.recoverUserData=t.checkDoesLocalRecoveryKeyExist=t.cancelRecoveryRequest=t.checkRecoveryRequestStatus=t.sendRecoveryRequest=t.setupMasterPasswordForRecovery=t.registerDeviceForRecovery=t.startAccountRecovery=void 0;const o=r(53576),n=r(33476),i=r(70252),a=r(70414),s=r(25576),c=r(87855),u=r(36513),d=r(46298),l=r(88077),p=r(29303),S=r(16593),g=r(16356),E=r(28096),y=r(95363),_=r(88610),A=r(47820);t.startAccountRecovery=async function(e,t){const{storeService:r}=e,{login:o}=t,i=await(0,l.requestDeviceRegistration)(r,{login:o});return(0,d.isApiError)(i)?{success:!1,error:{code:n.ApiErrorType.StartAccountRecoveryFailed,message:`Start account recovery failed: ${i.message}`}}:(r.dispatch((0,y.saveRecoverySessionData)({verificationMethod:i.verification})),{success:!0,verification:i.verification})},t.registerDeviceForRecovery=async function(e,t){try{const{token:r,login:o}=t,{storeService:i,wsService:u}=e,S=i.getState(),g=i.getPlatformInfo().platformName,E=!0,_=await(0,l.requestDeviceRegistration)(i,{login:o});if((0,d.isApiError)(_))return{success:!1,error:{code:n.ApiErrorType.RegisterDeviceFailed,message:"Recovery Device request registration failed"}};const A=(0,p.recoveryIsOtpSelector)(S),m=await(0,c.ensureDeviceId)(),T=(0,a.generateUki)(m),v={uki:T,login:o,platform:g,temporary:s.PersistData.PERSIST_DATA_NO,recovery:E},f=A?{otp:r}:{token:r};if("SUCCESS"!==await u.authentication.registerUki({...v,...f}))return{success:!1,error:{code:n.ApiErrorType.RegisterDeviceFailed,message:"Recovery Device registration failed"}};i.dispatch((0,y.saveRecoverySessionData)({recoveryUki:T}))}catch(e){return(0,i.sendExceptionLog)({error:e}),{success:!1,error:{code:n.ApiErrorType.RegisterDeviceFailed,message:e.message}}}return{success:!0}},t.setupMasterPasswordForRecovery=async function(e,t){let r="[Account Recovery PI] - Setup Master Password For Recovery ";const o=e=>{r+=`- ${e} \n`};try{const{storeService:a,localStorageService:s}=e,{masterPassword:c}=t,d=a.getState();o("recoveryUki select START");const l=(0,p.recoveryUkiSelector)(d);if(!l){const e={code:n.ApiErrorType.SetupMasterPasswordForRecoveryFailed,message:"recoveryUki does not exist"};return o(`setupMasterPasswordForRecovery failed with error: ${e.code} ${e.message}`),(0,i.sendExceptionLog)({message:r,funcName:"setupMasterPasswordForRecovery"}),{success:!1,error:e}}o("recoveryUki select SUCCESS"),o("dispatch updateMasterPassword START"),a.dispatch((0,g.updateMasterPassword)(c)),o("dispatch updateMasterPassword SUCCESS"),o("makeCyptoService START");const S=(0,u.makeCryptoService)();o("makeCyptoService SUCCESS"),o("generateRsaKeyPair START");const{publicKey:E,privateKey:_}=await S.asymmetricEncryption.generateRsaKeyPair();o("generateRsaKeyPair SUCCESS"),o("dispatch saveRecoverySessionData START"),a.dispatch((0,y.saveRecoverySessionData)({publicKey:E})),o("dispatch saveRecoverySessionData SUCCESS"),o("encryptUkiAndPrivateKey START");const m=await(0,A.encryptUkiAndPrivateKey)(l,_,c,a);return o("encryptUkiAndPrivateKey SUCCESS"),o("storeRecoveryData START"),await s.getInstance().storeRecoveryData(m),o("storeRecoveryData SUCCESS"),{success:!0}}catch(e){return o(`setupMasterPasswordForRecovery failed with error: ${e}`),(0,i.sendExceptionLog)({message:r,funcName:"setupMasterPasswordForRecovery",precisions:e.stack}),{success:!1,error:{code:n.ApiErrorType.SetupMasterPasswordForRecoveryFailed,message:e.message}}}},t.sendRecoveryRequest=async function(e){try{const{storeService:t,wsService:r}=e;return await(0,A.sendRecoveryRequestToAdmin)(t,r),{success:!0}}catch(e){return(0,i.sendExceptionLog)({error:e}),{success:!1,error:{code:n.ApiErrorType.RecoveryRequestFailed,message:e.message}}}},t.checkRecoveryRequestStatus=async function(e,t){try{const{storeService:r,localStorageService:o,wsService:i}=e,{masterPassword:a}=t,s=r.getState(),c=(0,S.userLoginSelector)(s);if(!c)return{success:!1,error:{code:n.ApiErrorType.CheckRecoveryStatusFailed,message:"Missing login"}};r.dispatch((0,g.updateMasterPassword)(a));const u=await(0,A.retrieveRecoveryUkiFromStorage)(r,o,a),{content:{status:d,payload:l,recoveryServerKey:p}}=await i.recovery.request({login:c,uki:u});return l&&p&&r.dispatch((0,y.saveRecoverySessionData)({userServerProtectedSymmetricalKey:l,recoveryServerKeyBase64:p})),{success:!0,response:{status:d}}}catch(e){return{success:!1,error:{code:n.ApiErrorType.CheckRecoveryStatusFailed,message:e.message}}}},t.cancelRecoveryRequest=async function(e){try{const{storeService:t,localStorageService:r,wsService:o}=e,n=t.getState(),i=(0,S.userLoginSelector)(n),a=(0,S.masterPasswordSelector)(n),s=await(0,A.retrieveRecoveryUkiFromStorage)(t,r,a);return await o.recovery.cancelRequest({login:i,uki:s}),await r.getInstance().cleanRecoveryData(),{success:!0}}catch(e){return{success:!1,error:{code:n.ApiErrorType.CancelRecoveryRequestFailed,message:e.message}}}},t.checkDoesLocalRecoveryKeyExist=async function(e){try{const{localStorageService:t}=e,r=t.getInstance();return{success:!0,doesExist:await r.doesRecoveryLocalKeyExist()}}catch(e){return{success:!1,error:{code:n.ApiErrorType.CheckLocalRecoveryKeyFailed,message:e.message}}}},t.recoverUserData=async function(e,t){const{localStorageService:r,storeService:a,sessionService:c}=e,d=a.getState(),l=r.getInstance(),g=await(0,A.validateInitialData)(d,l);let m="[Account Recovery PI] - Recover User Data ";const T=e=>{m+=`- ${e} \n`};if(!g.success)return g;const{masterPassword:v}=t;try{T("Extract PrKey START");const t=await(0,A.extractPrivateKeyFromRecoveryData)(e,v,T);T("Extract PrKey SUCCESS");const{userServerProtectedSymmetricalKey:r}=(0,p.recoveryDataSelector)(d),c=await(0,u.makeAsymmetricEncryption)();T("Decrypt user protected key START");const g=await c.decrypt(t,r);T("Decrypt user protected key SUCCESS"),T("Decrypt server protected key START");const E=await(0,A.extractRecoveryKey)(a,g,T);T("Decrypt server protected key SUCCESS"),T("Extract local Key START");const f=await(0,A.extractLocalKey)(e,E,T);T("Extract local Key SUCCESS"),await(0,A.prepareLocalDataEncryptorService)(e,f),T("Get recovery credentials START");const h=await l.getRecoverySessionCredential();T("Get recovery credentials SUCCESS");const{masterPassword:D}=JSON.parse(atob(h)),O=(0,S.userLoginSelector)(d),P=s.PersistData.PERSIST_DATA_YES;a.dispatch((0,y.saveRecoverySessionData)({recoveryInProgress:!0})),T("Open session START");const I=await(0,_.openSessionWithMasterPassword)(e,O,D,{isDataPersisted:P,serverKey:(0,S.serverKeySelector)(d)},T);if(T("Open session SUCCESS"),I!==o.LoginResultEnum.LoggedIn)return T("Open session SUCCESS but user not logged in"),(0,i.sendExceptionLog)({message:m,funcName:"recoverUserData"}),(0,A.recoveryFlowError)(n.ApiErrorType.RecoverUserDataFailed,`Unable to login with ${I}`);a.dispatch((0,y.saveRecoverySessionData)({recoveryInProgress:!1,currentPassword:D}))}catch(e){return T(`Recovery failed with error: ${e}`),(0,i.sendExceptionLog)({message:m,funcName:"recoverUserData",precisions:e.stack}),a.dispatch((0,y.resetRecoverySessionData)()),await c.close(),(0,E.triggerOpenSessionFailed)(new Error(E.AuthenticationCode[E.AuthenticationCode.WRONG_PASSWORD])),(0,A.recoveryFlowError)(n.ApiErrorType.RecoverUserDataFailed,"Unable to decipher data")}return{success:!0}}},47820:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.storeSessionCredentialForRecovery=t.prepareLocalDataEncryptorService=t.extractLocalKey=t.extractRecoveryKey=t.extractPrivateKeyFromRecoveryData=t.validateInitialData=t.recoveryFlowError=t.retrieveRecoveryUkiFromStorage=t.triggerCleanOrSetupAccountRecovery=t.isARFeatureActivatedForUser=t.isARAvailableForUser=t.sendRecoveryRequestToAdmin=t.encryptUkiAndPrivateKey=t.resetAdminProtectedSymmetricalKeys=t.sendAdminProtectedSymmetricalKeys=t.getAdminProtectedSymmetricalKeys=t.encryptRecoveryData=t.getRecoveryKey=t.getSetupRequisitesData=void 0;const o=r(90622),n=r(56668),i=r(72365),a=r(16038),s=r(69530),c=r(64910),u=r(36513),d=r(65675),l=r(70252),p=r(16593),S=r(38981),g=r(95363),E=r(16356),y=r(29303),_=r(25576),A=r(26634),m=r(97810),T=r(33476),v=r(85423);function f(e){const t=e.getState(),r=(0,p.activeSpacesSelector)(t)[0],n=r?.teamId;if(!n)throw new Error("[getSetupRequisitesData] - user should be part of a team to activate Account Recovery");const i=Number(n),a=(0,p.userLoginSelector)(t),s=(0,o.ukiSelector)(t);if(!a||!s)throw new Error("[getSetupRequisitesData] - missing login or uki");return{teamId:i,login:a,uki:s}}async function h({storeService:e,encryptionKey:t,data:r}){const o=(0,i.makeDataEncryptorService)(e),n=(0,d.getCryptoConfig)(e);o.setInstance({raw:t},"",n);const a=await o.getInstance().encrypt(r);return o.close(),a}async function D({storeService:e,encryptedData:t,encryptionKey:r}){const o=(0,i.makeDataEncryptorService)(e),{cryptoConfig:n}=(0,d.parsePayload)(d.ARGON2_DEFAULT_PAYLOAD);o.setInstance({raw:r},"",n);const a=await o.getInstance().decrypt(t,{logging:!0});return o.close(),a}function O(e){const t=(0,S.isSSOUserSelector)(e),r=(0,A.isRecoveryEnabledSelector)(e);return!t&&r}function P(e){const t=O(e),r=(0,p.accountRecoveryOptInSelector)(e);return t&&r}t.getSetupRequisitesData=async function(e,t){try{const{teamId:r,login:o,uki:n}=f(e),{content:i}=await t.recovery.getSetupRequisites({login:o,uki:n,teamId:r});return i}catch(e){throw new Error(`[getSetupRequisitesData] - getSetupRequisites failed with error ${e}`)}},t.getRecoveryKey=async function(e){const t=e.getState();let r,o=(0,p.recoveryKeySelector)(t);return o?r=(0,a.base64ToBuffer)(o):(r=await(0,s.generateAESKey)(),o=(0,a.bufferToBase64)(r)),{recoveryKeyBufferClear:r,recoveryKeyBase64Clear:o,recoveryKeyRawClear:atob(o)}},t.encryptRecoveryData=h,t.getAdminProtectedSymmetricalKeys=async function(e,t){const r=(0,u.makeAsymmetricEncryption)(),o=[];for(const n of e){const{login:e,publicKey:i}=n,a=await r.encrypt(i,t);o.push({login:e,key:a})}return o},t.sendAdminProtectedSymmetricalKeys=async function(e,t,r){try{const o=JSON.stringify(r),{teamId:n,login:i,uki:a}=f(e);return void await t.recovery.setRecoveryClientKeys({login:i,uki:a,recoveryClientKeys:o,teamId:n})}catch(e){throw new Error(`[sendAdminProtectedSymmetricalKeys] - setRecoveryClientKeys failed with error ${e}`)}},t.resetAdminProtectedSymmetricalKeys=async function(e,t){try{const{teamId:r,login:o,uki:n}=f(e),i=JSON.stringify([]);return void await t.recovery.setRecoveryClientKeys({login:o,uki:n,recoveryClientKeys:i,teamId:r})}catch(e){throw new Error(`[resetAdminProtectedSymmetricalKeys] - setRecoveryClientKeys failed with error ${e}`)}},t.encryptUkiAndPrivateKey=async function(e,t,r,o){const i=JSON.stringify({recoveryUki:e,privateKey:t}),a=(0,n.deflateUtf16)(i);return await h({storeService:o,encryptionKey:r,data:a})},t.sendRecoveryRequestToAdmin=async function(e,t){try{const r=e.getState(),o=(0,p.userLoginSelector)(r),{recoveryUki:n,publicKey:i}=(0,y.recoveryDataSelector)(r);if(!o||!n||!i)throw new Error("Missing recoveryUki or publicKey");return void await t.recovery.request({login:o,uki:n,publicKey:i})}catch(e){throw new Error(`[sendAccountRecoveryRequest] - failed with error ${e}`)}},t.isARAvailableForUser=O,t.isARFeatureActivatedForUser=P,t.triggerCleanOrSetupAccountRecovery=async function(e){const{storeService:t,localStorageService:r,wsService:o}=e,n=t.getState();if((0,y.recoveryInProgressSelector)(n))return;await r.getInstance().cleanRecoveryData();if(await async function(e,t){const r=e.getState();if(!P(r))return Promise.resolve(!1);const{persistData:o}=e.getAccountInfo();if(o===_.PersistData.PERSIST_DATA_NO)return Promise.resolve(!1);const n=!!(0,p.recoveryKeySelector)(r),i=!!await t.getInstance().doesRecoveryLocalKeyExist();if(n&&i)return(0,v.recoveryHashFromPersonalSettingsSelector)(r)!==(0,v.recoveryHashFromPremiumStatusSelector)(r);return!0}(t,r))return void await(0,m.setupAccountRecoveryForDevice)(t,r,o);await async function(e,t){const r=P(e.getState()),o=t.getInstance(),n=!!await o.doesRecoveryLocalKeyExist(),i=!!await o.doesRecoverySessionCredentialExist();return!r&&(n||i)}(t,r)&&await r.getInstance().cleanRecoverySetupData()},t.retrieveRecoveryUkiFromStorage=async function(e,t,r){try{const o=await t.getInstance().getRecoveryData(),i=await D({storeService:e,encryptedData:o,encryptionKey:r}),a=(0,n.inflateUtf16)(i),{recoveryUki:s}=JSON.parse(a);return s}catch(e){const t=`retrieveRecoveryUkiFromStorage failed with error ${e.message}`;throw new Error(t)}};t.recoveryFlowError=(e,t)=>{const r=new Error(`[AccountRecovery]: ${e} ${t}`);return(0,l.sendExceptionLog)({error:r}),{success:!1,error:{code:e,message:t}}},t.validateInitialData=async function(e,r){if(!await r.doesRecoveryLocalKeyExist()||!await r.doesRecoveryDataExist()||!await r.doesRecoverySessionCredentialExist())return(0,t.recoveryFlowError)(T.ApiErrorType.RecoverUserDataFailed,"Missing local data");const{userServerProtectedSymmetricalKey:o,recoveryServerKeyBase64:n}=(0,y.recoveryDataSelector)(e);return o&&n?{success:!0}:(0,t.recoveryFlowError)(T.ApiErrorType.RecoveryRequestFailed,"missing payload")},t.extractPrivateKeyFromRecoveryData=async function(e,t,r){const{localStorageService:o,storeService:i}=e,s=o.getInstance();r("extractPrivateKeyFromRecoveryData - getRecoveryData");const c=await s.getRecoveryData(),u=i.getPlatformInfo();r(`[extra] platform: ${u.platformName}`),r(`[extra] browser: ${u.browser} @ ${u.browserVersion}`);const l=(0,a.base64ToBuffer)(c),p=(0,d.parseCipheredData)(new Uint8Array(l));r(`[extra] cryptoConfig derivation: ${JSON.stringify(p.cryptoConfig)}`),r("extractPrivateKeyFromRecoveryData - decryptRecoveryData");const S=await D({storeService:i,encryptedData:c,encryptionKey:t});r("extractPrivateKeyFromRecoveryData - inflateUtf16 data");const E=(0,n.inflateUtf16)(S);r("extractPrivateKeyFromRecoveryData - parse JSON data");const{recoveryUki:y,privateKey:_}=JSON.parse(E);return i.dispatch((0,g.saveRecoverySessionData)({recoveryUki:y})),_},t.extractRecoveryKey=async function(e,t,r){const o=e.getState(),{recoveryServerKeyBase64:n}=(0,y.recoveryDataSelector)(o);if(!n)throw new Error("Missing payload");const i=atob(n),s=e.getPlatformInfo();r(`[extra] platform: ${s.platformName}`),r(`[extra] browser: ${s.browser} @ ${s.browserVersion}`);const c=(0,a.base64ToBuffer)(t),u=(0,d.parseCipheredData)(new Uint8Array(c));r(`[extra] cryptoConfig derivation: ${JSON.stringify(u.cryptoConfig)}`),r("extractRecoveryKey - decryptRecoveryData");const l=await D({storeService:e,encryptedData:t,encryptionKey:i});return r("extractRecoveryKey - arrayBufferToText"),(0,a.arrayBufferToText)(l)},t.extractLocalKey=async function(e,t,r){const{storeService:o,localStorageService:i}=e,s=i.getInstance();r("extractLocalKey - getRecoveryLocalKey");const c=await s.getRecoveryLocalKey(),u=e.storeService.getPlatformInfo();r(`[extra] platform: ${u.platformName}`),r(`[extra] browser: ${u.browser} @ ${u.browserVersion}`);const l=(0,a.base64ToBuffer)(c),p=(0,d.parseCipheredData)(new Uint8Array(l));r(`[extra] cryptoConfig derivation: ${JSON.stringify(p.cryptoConfig)}`),r("extractLocalKey - decryptRecoveryData");const S=await D({storeService:o,encryptedData:c,encryptionKey:t});return r("extractLocalKey - inflateUtf16 localKey"),(0,n.inflateUtf16)(S)},t.prepareLocalDataEncryptorService=async function(e,t){const{localDataEncryptorService:r,storeService:o}=e,n=e.storeService.getUserSession().serverKey,i=(0,c.getNoDerivationCryptoConfig)();r.setInstance({raw:t},n,i),await r.getInstance().prepareCrypto(),o.dispatch((0,E.updateLocalKey)(t))},t.storeSessionCredentialForRecovery=async function(e,t){const r=e.getState(),o=(0,p.masterPasswordSelector)(r);if(P(r)&&o){const e={masterPassword:o,recoveryKey:null},r=btoa(JSON.stringify(e));await t.getInstance().storeRecoverySessionCredential(r)}}},97810:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isRecoveryRequestPending=t.deactivateAccountRecovery=t.setupAccountRecoveryForDevice=t.activateAccountRecovery=void 0;const o=r(56668),n=r(47820),i=r(33476),a=r(5464),s=r(16593),c=r(27517);async function u(e,t,r){const{hash:i,recipients:a,recoveryServerKey:s}=await(0,n.getSetupRequisitesData)(e,r),{recoveryKeyBufferClear:u,recoveryKeyBase64Clear:d,recoveryKeyRawClear:l}=await(0,n.getRecoveryKey)(e),p=t.getInstance(),S=await p.getLocalKey(),g=(0,o.deflateUtf16)(S),E=await(0,n.encryptRecoveryData)({storeService:e,encryptionKey:l,data:g});t.getInstance().storeRecoveryLocalKey(E);const y=atob(s),_=await(0,n.encryptRecoveryData)({storeService:e,encryptionKey:y,data:u}),A=await(0,n.getAdminProtectedSymmetricalKeys)(a,_);await(0,n.sendAdminProtectedSymmetricalKeys)(e,r,A);const m={RecoveryHash:i,RecoveryKey:d};e.dispatch((0,c.editPersonalSettings)(m)),await(0,n.storeSessionCredentialForRecovery)(e,t)}t.activateAccountRecovery=async function(e){const{sessionService:t,storeService:r,localStorageService:o,wsService:d}=e,l=r.getState();if(!(0,n.isARAvailableForUser)(l))return{success:!1,error:{code:i.ApiErrorType.AccountRecoveryNotAvailableError}};(0,s.accountRecoveryOptInSelector)(l)||r.dispatch((0,c.editPersonalSettings)({RecoveryOptIn:!0}));try{await u(r,o,d),await t.getInstance().user.persistPersonalSettings(),await(0,a.sessionForceSync)(t)}catch(e){return{success:!1,error:{code:i.ApiErrorType.RecoverySetupFailed,message:e.message}}}return{success:!0}},t.setupAccountRecoveryForDevice=u,t.deactivateAccountRecovery=async function(e){const{sessionService:t,storeService:r,localStorageService:o,wsService:a}=e,s=r.getState();if(!(0,n.isARAvailableForUser)(s))return{success:!1,error:{code:i.ApiErrorType.AccountRecoveryNotAvailableError}};const u={RecoveryKey:"",RecoveryHash:"",RecoveryOptIn:!1};try{r.dispatch((0,c.editPersonalSettings)(u)),await t.getInstance().user.persistPersonalSettings(),await o.getInstance().cleanRecoverySetupData(),await(0,n.resetAdminProtectedSymmetricalKeys)(r,a)}catch(e){return{success:!1,error:{code:i.ApiErrorType.RecoveryDeactivationFailed,message:e.message}}}return{success:!0}},t.isRecoveryRequestPending=async function(e){try{return{success:!0,response:await e.localStorageService.getInstance().doesRecoveryDataExist()}}catch(e){return{success:!1,error:{code:i.ApiErrorType.IsRecoveryRequestPendingFailed,message:e}}}}},63678:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(47820);t.setupSubscriptions=function(e,t){e.sessionOpened.on((()=>(0,o.triggerCleanOrSetupAccountRecovery)(t))),e.syncSuccess.on((()=>(0,o.triggerCleanOrSetupAccountRecovery)(t)))}},33476:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RequestStatus=t.ApiErrorType=void 0,function(e){e.CheckRecoveryStatusFailed="CHECK_RECOVERY_STATUS_FAILED",e.RecoverySetupFailed="RECOVERY_SETUP_FAILED",e.RecoveryDeactivationFailed="RECOVERY_DEACTIVATION_FAILED",e.RecoveryRequestFailed="RECOVERY_REQUEST_FAILED",e.RegisterDeviceFailed="REGISTER_DEVICE_FAILED",e.SetupMasterPasswordForRecoveryFailed="SETUP_MASTERPASSWORD_FOR_RECOVERY_FAILED",e.CancelRecoveryRequestFailed="CANCEL_RECOVERY_REQUEST_FAILED",e.RecoverUserDataFailed="RECOVER_REQUEST_FAILED",e.CheckLocalRecoveryKeyFailed="CHECK_LOCAL_RECOVERY_KEY_FAILED",e.StartAccountRecoveryFailed="START_ACCOUNT_RECOVERY_FAILED",e.AccountRecoveryNotAvailableError="ACCOUNT_RECOVERY_NOT_AVAILABLE_ERROR",e.IsRecoveryRequestPendingFailed="IS_RECOVERY_REQUEST_PENDING_FAILED"}(t.ApiErrorType||(t.ApiErrorType={})),function(e){e.PENDING="PENDING",e.APPROVED="APPROVED",e.REFUSED="REFUSED",e.OVERRIDDEN="OVERRIDDEN",e.CANCELED="CANCELED"}(t.RequestStatus||(t.RequestStatus={}))},47390:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(66961),n=r(89122),i=r(96405);t.config={commands:{decipherRemoteFile:{handler:o.decipherRemoteFileHandler}},queries:{getFileContent:{selector:i.fileContentStrSelector}},liveQueries:{liveFileMeta:{operator:n.fileMetaUpdate$}}}},64438:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(47390);t.bootstrap=e=>{e.register(o.config)}},1110:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FILE_SETTINGS=t.FileNamesList=t.REMOTE_FILE_KEY_PROD=t.REMOTE_FILE_KEY_DEV=void 0,t.REMOTE_FILE_KEY_DEV="-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAzOFwZBlj8livLhzIN8xm\ny/c+gn9FpUNOEIPoiN7kcAlj+oIlWqW5TgRZLqvyA0WxhTcG7icTpC+UwBXvENdV\n3nTzmuB8W6ZnRTjrtAlSxqp0Yfr2eQEGZFTlfBFUneqq4RZ6e/B3nIRHG1sEkVhd\noBbenPWou+WHqaqnah0AZVfxx4bJq1wor1LpH7gxELthvsThBelQz4Lmns4hCjzq\nRCDjQ1PG9HpDwwRHyi9xJYWoLR6C3rHZ1mmldg7TS41cCWkKsPDiIrIzEN+94dGG\nqSAx4kti0ltRcjLcBuJhQ3FHaAU7ksSubEg+l0W8PWAKjNbhUpFXduqXjxZ9nhuS\n2sxETZoadgU6YDEyqk3W7c+dhpTioMZEsJXpBVdC2jbblPHBRXBTmdOdb7xlBrGQ\nzoyPpS0PcI9oa8o9na9J8DSqnEbLwXdOlv4TUoxrswD6nmnR31/W+C4PSC8yEUEx\nESiG6IfAakFICxVESBp1VZA7NUbT6JkrhQaz//AVuGAyMoDuXorRGQPit+9DgF2l\neSr0zLzO2MVfMXXKBnueZmjNLvYy2Q2e8QX1jsuvwFhDBt1QmfisdiGSPC7jp0rO\nXdu5eCQuHVYeApipVKry58So783jimUa+mpA0/NUyiYaON7zndtZlQv/y+dqvseT\na2iA73nMVy4y9F95mwdG8ykCAwEAAQ==\n-----END PUBLIC KEY-----",t.REMOTE_FILE_KEY_PROD="-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAvlEdqD2jCU30/OembiWY\nJKxrjiZuRgweXtV2e7yF1T5XyHkqDZ31a9W0rLWrVRbjr1qDdwU94L1iW/8RrUPK\n2ue+2XH/8e8EH44Y9HYBeIUTciBKU6dqyqflaxY/wm3VO5af303ba564BVzv/31S\nJiHa7QkeVqjY/Za1rv1ZOIwsYBC/SPIK+ofU7qSi6eY8PNe8bje0CFPcwfWRRkNB\nZLQwUwIED1w7playTR8boX5iju+TagAjKSphkj6u+fIkYPdFQgFjSTGu8OwTAerC\nxqAWDSVy7fMxLdrDNrdwMTuQvlUIWiK+1CRHm1r6AXGywqCmrndw6q1LvFcwOgI1\n2brPOx1BdDabUwau26lICDgPqA67Sk7GLTCv3hA2bHvJhK7E0c260u96hRwjDk/L\n8tspQAYGzosyIMTmN29fEtBMlPwClZPqSVa7I7b3Csx4lhRkXI76WxAOmxf5dNQI\n2O6dlrxumdfpM8O6ye3iq51D7ZNNegelee/BIrZEcJZzymvkrDDZHJs6oFQ7bERd\np+nJlr4xoiFd9BPCus6z994/8j7lNTvLanNwsdUYRP/tQJZqlhZ7vY+KpyXn+RGw\nMYFeWXuH3cG05NwryH6676tcOrkboxbxMCMBUMvZK1CWS57noH/iztYivKNyItxf\ni8uoqgc+vDOPPsdujlsgOkcCAwEAAQ==\n-----END PUBLIC KEY-----",t.FileNamesList=["overrides.json","phishing_urls_test.json"],t.FILE_SETTINGS={"overrides.json":{},"phishing_urls_test.json":{isLoadedWhileLoggedOut:!0}}},66961:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decipherRemoteFileHandler=void 0;const o=r(10174),n=r(16593);t.decipherRemoteFileHandler=async({storeService:e},t)=>({decipheredFile:await(0,o.decipherRemoteFileUpdate)(t.cipheredFileContent,t.fileMetaData,(0,n.sharingKeysSelector)(e.getState()).privateKey)})},97890:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.downloadRemoteFileHandler=t.fetchFile=void 0;const o=r(46298),n=r(64272),i=r(10174),a=r(85845),s=r(87993),c=r(56523),u=r(19601),d=r(96405),l=r(16593),p=r(55539),S=r(23201),g=r(10203),E=r(76905);async function y(e){try{return(await(0,p.httpGetUsingFetch)(e,{responseType:"arraybuffer"})).data}catch(e){throw new u.RemoteFileError(g.RemoteFileUpdateError.DownloadError,e.message)}}function _(e,t,r){const{storeService:o,eventBusService:n}=e;o.dispatch((0,a.updateFileContentAction)({[r.name]:r})),o.dispatch((0,a.updateFileMetaAction)({[r.name]:t})),n.remoteFileChanged(r.name)}async function A(e,[t,r]){const{storeService:o,eventLoggerService:n}=e;if(!function(e){switch(e.status){case c.UPDATE_AVAILABLE_HTTP_STATUS:return!0;case c.NO_CURRENT_UPDATE_HTTP_STATUS:case c.FILE_NOT_FOUND_HTTP_STATUS:case c.SERVER_ERROR_HTTP_STATUS:default:return!1}}(r))return{fileName:t,isUpdated:!1,fileMetaData:r};try{const n=await async function(e,t,r){const o=await y(t.url);if(!t.key)return new E.DownloadedFile(e,o);const n=await(0,i.decipherRemoteFileUpdate)(o,t,(0,l.sharingKeysSelector)(r.getState()).privateKey);return new E.DownloadedFile(e,n)}(t,r,o);_(e,r.revision,n)}catch(e){return(0,u.assertRemoteFileError)(n,e),{fileName:t,isUpdated:!1,fileMetaData:r}}return{fileName:t,isUpdated:!0,fileMetaData:r}}t.fetchFile=y;t.downloadRemoteFileHandler=async(e,t)=>{const{storeService:r}=e,i=await async function(e,t){const r=await(0,s.retrieveFileMetaDataFromCipheredLocalStorage)(e);return Object.entries(t).reduce(((e,[t,o])=>(e[t]=null!==r&&t in r?o.revision??r[t]:0,e)),{})}(e,t);try{const t=await async function(e,t){const r=await(0,n.getFilesMeta)(e,(0,l.userLoginSelector)(e.getState()),t);if((0,n.isGetFilesMetaSuccess)(r)){const{code:e,data:t,...o}=r;return o}if((0,o.isApiError)(r))throw new u.RemoteFileError(g.RemoteFileUpdateError.ServerError,r.message)}(r,i);if(0!==Object.keys(t).length){const o=await(c=t,p=e,Promise.all(Object.entries(c).map((e=>A(p,e))))),n=await async function(e,t){const{eventLoggerService:r}=e;return await Promise.all(t.filter((({isUpdated:e})=>e)).map((async({fileName:t})=>{try{return await(0,s.writeFileInLocalStorage)(e,t),(0,S.logReceiveRemoteFileSuccess)(r),[t,!0]}catch(e){return(0,u.assertRemoteFileError)(r,e),[t,!1]}})))}(e,o),d=n.filter((([e,t])=>!t)).map((([e,t])=>e));r.dispatch((0,a.deleteFileMetaAction)(d)),await function(e,t,r){const o=e.localStorageService.getInstance();return Promise.all(t.filter((({isUpdated:e})=>!e)).map((async({fileName:t})=>{if(!o.isRemoteFileContentExist(t))return;const n=await(0,s.readFileFromLocalStorage)(e,t);null!==n&&_(e,r[t],n)})))}(e,o,i),await(0,s.persistFileMetaInCipheredLocalStorage)(e)}}catch(t){(0,u.assertRemoteFileError)(e.eventLoggerService,t)}var c,p;return(0,d.fileMetaUpdateSelector)(r.getState())}},16179:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadFilesAtInit=t.loadFileContentAtInit=void 0;const o=r(1110),n=r(87993),i=r(19601),a=r(85845);async function s(e,t){const r=await(0,n.readFileFromLocalStorage)(e,t);return null!==r&&(e.storeService.dispatch((0,a.updateFileContentAction)({[t]:r})),!0)}t.loadFileContentAtInit=s,t.loadFilesAtInit=async function(e){await Object.keys(o.FILE_SETTINGS).map((async t=>{if(o.FILE_SETTINGS[t].isLoadedWhileLoggedOut)try{await s(e,t)&&e.eventBusService.remoteFileChanged(t)}catch(t){(0,i.assertRemoteFileError)(e.eventLoggerService,t)}}))}},76905:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadedFile=void 0;const o=r(16038);class n{constructor(e,t){this._buf=t,this.name=e}static fromBase64Str(e,t){return new n(e,(0,o.base64ToBuffer)(t))}toBlob(){return new Blob([this._buf])}toString(){return(0,o.ab2str)(this._buf)}toBase64String(){return(0,o.bufferToBase64)(this._buf)}}t.DownloadedFile=n},10174:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decipherRemoteFileUpdate=t.decipherFileIntoBlob=t.verifyRemoteFileSignature=t.decipherDecryptionKey=t.computePublicKeyForSignature=void 0;const o=r(56668),n=r(83570),i=r(16038),a=r(56984),s=r(36513),c=r(1110),u=r(19601),d=r(10203),l=r(93513),p="https://static.dashlane.com/runtime-resources/ci/";async function S(e,t){const r=(0,s.makeAsymmetricEncryption)({hashAlgorithm:a.HashAlgorithm.SHA_1});try{return l.decode(await r.decrypt(t,e))}catch(e){throw new u.RemoteFileError(d.RemoteFileUpdateError.DecipherError,"Invalid encryption on deciphering key")}}async function g(e,{signature:r,url:o},n){const i=(0,t.computePublicKeyForSignature)(o);return await e.verify(i,r,n)}async function E(e,t){try{return(0,i.str2ab)((0,o.deflatedUtf8ToUtf16)(await(0,o.decipherDashlaneSecureData)(e,t,"",(0,n.makeGetDerivateKeyWithCacheAndQueue)()),{skipInflate:!0}))}catch(e){throw new u.RemoteFileError(d.RemoteFileUpdateError.DecipherError,"Invalid encryption on file")}}t.computePublicKeyForSignature=e=>{if((e=>e.startsWith(p+"prod/"))(e))return c.REMOTE_FILE_KEY_PROD;if((e=>e.startsWith(p+"dev/"))(e))return c.REMOTE_FILE_KEY_DEV;throw new u.RemoteFileError(d.RemoteFileUpdateError.DecipherError,"The file URL is not matching production or dev environnement")},t.decipherDecryptionKey=S,t.verifyRemoteFileSignature=g,t.decipherFileIntoBlob=E,t.decipherRemoteFileUpdate=async function(e,t,r){const o=(0,i.bufferToBase64)(e),n=await S(t.key,r),c=(0,s.makeAsymmetricEncryption)({hashAlgorithm:a.HashAlgorithm.SHA_256});if(!await g(c,t,o))throw new u.RemoteFileError(d.RemoteFileUpdateError.DecipherError,"Invalid signature detected on file");return await E(o,n)}},91313:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(64438);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},89122:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fileMetaUpdate$=void 0;const o=r(18948),n=r(3343),i=r(96405);t.fileMetaUpdate$=()=>(0,o.pipe)((0,n.map)(i.fileMetaUpdateSelector),(0,n.distinctUntilChanged)())},23201:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logReceiveRemoteFileError=t.logReceiveRemoteFileSuccess=void 0;const o=r(10203),n=(e,t,r=undefined)=>{e.logEvent(new o.UserReceiveRemoteFileUpdateEvent({flowStep:t,remoteFileUpdateError:r}))};t.logReceiveRemoteFileSuccess=e=>n(e,o.FlowStep.Complete);t.logReceiveRemoteFileError=(e,t)=>n(e,o.FlowStep.Error,t)},87993:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.writeFileInLocalStorage=t.readFileFromLocalStorage=t.retrieveFileContentFromNonCipheredLocalStorage=t.retrieveFileContentFromCipheredLocalStorage=t.retrieveFileMetaDataFromCipheredLocalStorage=t.persistSingleFileInNonCipheredLocalStorage=t.persistSingleFileContentInCipheredLocalStorage=t.persistFileMetaInCipheredLocalStorage=void 0;const o=r(25576),n=r(96405),i=r(1110),a=r(19601),s=r(10203),c=r(76905),u=e=>{if(!e)throw new a.RemoteFileError(s.RemoteFileUpdateError.LocalStorageError,"LocalStorageService is not initalized")};async function d({localStorageService:e,storeService:t},r){const{persistData:i,isAuthenticated:c}=t.getAccountInfo(),d=e.getInstance();if(!c||i===o.PersistData.PERSIST_DATA_NO)return;u(d);const l=await(0,n.fileSelector)(t.getState(),r);try{await d.storeRemoteFileContent(r,l.toBase64String())}catch(e){throw new a.RemoteFileError(s.RemoteFileUpdateError.LocalStorageError,`Cannot persist ${r} content in local storage`)}}async function l({storeService:e,storageService:t},r){const{persistData:i,isAuthenticated:c}=e.getAccountInfo();if(!c||i===o.PersistData.PERSIST_DATA_NO)return;const d=t.getLocalStorage();u(d);const l=await(0,n.fileSelector)(e.getState(),r);try{await d.writeItem(r,l.toBase64String())}catch(e){throw new a.RemoteFileError(s.RemoteFileUpdateError.LocalStorageError,`Cannot persist ${r} content in local storage`)}}async function p(e,t){const r=e.getInstance();u(r);return await r.isRemoteFileContentExist(t)?c.DownloadedFile.fromBase64Str(t,await r.getRemoteFileContent(t)):Promise.resolve(null)}async function S(e,t){const r=e.getLocalStorage();u(r);return await r.itemExists(t)?c.DownloadedFile.fromBase64Str(t,await r.readItem(t)):Promise.resolve(null)}t.persistFileMetaInCipheredLocalStorage=async function({localStorageService:e,storeService:t}){e.getInstance();const{persistData:r,isAuthenticated:i}=t.getAccountInfo();if(!i||r===o.PersistData.PERSIST_DATA_NO)return;u(e);const c=e.getInstance();try{await c.storeRemoteFileMeta((0,n.fileMetaUpdateSelector)(t.getState()))}catch{throw new a.RemoteFileError(s.RemoteFileUpdateError.LocalStorageError,"Cannot persist file metadata in local storage")}},t.persistSingleFileContentInCipheredLocalStorage=d,t.persistSingleFileInNonCipheredLocalStorage=l,t.retrieveFileMetaDataFromCipheredLocalStorage=async function({localStorageService:e}){const t=e.getInstance();return u(t),await t.isRemoteFileMetaDataExist()?await t.getRemoteFileMeta():Promise.resolve(null)},t.retrieveFileContentFromCipheredLocalStorage=p,t.retrieveFileContentFromNonCipheredLocalStorage=S,t.readFileFromLocalStorage=function(e,t){return i.FILE_SETTINGS[t].isLoadedWhileLoggedOut?S(e.storageService,t):p(e.localStorageService,t)},t.writeFileInLocalStorage=function(e,t){return i.FILE_SETTINGS[t].isLoadedWhileLoggedOut?l(e,t):d(e,t)}},19601:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.assertRemoteFileError=t.RemoteFileError=void 0;const o=r(23201),n=r(70252);class i extends Error{constructor(e,t){super(t),this.name=e,this.name=e}}t.RemoteFileError=i,i.errorInstance="REMOTE_FILE_ERROR",t.assertRemoteFileError=function(e,t){!function(e){return e instanceof i}(t)?(0,n.sendExceptionLog)({error:t}):(0,o.logReceiveRemoteFileError)(e,t.name)}},96405:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fileContentStrSelector=t.fileSelector=t.fileMetaUpdateSelector=void 0;const r=e=>e.device.remoteFile;t.fileMetaUpdateSelector=e=>r(e).fileMetaData;t.fileSelector=(e,t)=>r(e).fileContentState[t];t.fileContentStrSelector=(e,r)=>(0,t.fileSelector)(e,r).toString()},98202:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(36428),n=r(18216),i=r(16593);t.setupSubscriptions=function(e,t){e.sessionOpened.on((()=>(0,o.triggerDownloadRemoteFileUpdate)(t,!0))),e.sessionClosed.on((()=>(0,o.triggerDownloadRemoteFileUpdate)(t,!1))),e.coreServicesReady.on((e=>{e.initMode===n.InitMode.Resume&&((0,i.isAuthenticatedSelector)(t.storeService.getState())?(0,o.triggerDownloadRemoteFileUpdate)(t,!0):(0,o.triggerLoadFileAtInit)(t))})),e.appInitialized.on((()=>{(0,o.triggerLoadFileAtInit)(t)}))}},36428:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerDownloadRemoteFileUpdate=t.triggerLoadFileAtInit=t.callRemoteFileUpdateHandler=void 0;const o=r(97890),n=r(1110),i=r(16179),a=18e5;async function s(e){await(0,o.downloadRemoteFileHandler)(e,n.FILE_SETTINGS)}t.callRemoteFileUpdateHandler=s,t.triggerLoadFileAtInit=async function(e){await(0,i.loadFilesAtInit)(e)};let c=null;t.triggerDownloadRemoteFileUpdate=function(e,t){c&&function(e){clearInterval(e)}(c),t&&(c=function(e){return s(e),setInterval((()=>{try{s(e)}catch{}}),a)}(e))}},56523:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SERVER_ERROR_HTTP_STATUS=t.FILE_NOT_FOUND_HTTP_STATUS=t.NO_CURRENT_UPDATE_HTTP_STATUS=t.UPDATE_AVAILABLE_HTTP_STATUS=void 0,t.UPDATE_AVAILABLE_HTTP_STATUS="update_available",t.NO_CURRENT_UPDATE_HTTP_STATUS="unknown_revision",t.FILE_NOT_FOUND_HTTP_STATUS="not_found",t.SERVER_ERROR_HTTP_STATUS="error_server"},1933:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(4886),n=r(98850),i=r(58551);t.config={commands:{updateMigrationOnboarding:{handler:i.updateMigrationOnboarding}},queries:{getMigrationOnboarding:{selector:o.migrationOnboardingSelector},getDesktopLogin:{selector:o.desktopLoginSelector}},liveQueries:{liveMigrationOnboarding:{operator:n.migrationOnboarding$}}}},4216:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MigrationOnboardingStep=void 0;var o=r(17604);Object.defineProperty(t,"MigrationOnboardingStep",{enumerable:!0,get:function(){return o.MigrationOnboardingStep}})},73416:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(1933);t.bootstrap=e=>{e.register(o.config)}},63935:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(73416);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},98850:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.migrationOnboarding$=void 0;const o=r(18948),n=r(3343),i=r(4886);t.migrationOnboarding$=()=>(0,o.pipe)((0,n.map)(i.migrationOnboardingSelector),(0,n.distinctUntilChanged)())},4886:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.desktopLoginSelector=t.migrationOnboardingSelector=void 0;t.migrationOnboardingSelector=e=>e.userSession.localSettings.migrationOnboarding;t.desktopLoginSelector=e=>e.device.application.settings.desktopLogin},48723:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initializeMigrationOnboarding=void 0;const o=r(30913),n=r(17604),i=r(76089);t.initializeMigrationOnboarding=async function(e){const{storeService:t,sessionService:r}=e,a=(0,o.migratedToSAEXSelector)(t.getState());if(void 0!==a){const e=function(e,t){return"Known"===e.type?e.value:t?n.MigrationOnboardingStep.NOT_SEEN:n.MigrationOnboardingStep.SEEN}(t.getLocalSettings().migrationOnboarding,a);t.dispatch((0,i.migrationOnboardingUpdated)(e)),await r.getInstance().user.persistLocalSettings()}return{success:!0}}},58551:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateMigrationOnboarding=void 0;const o=r(76089);t.updateMigrationOnboarding=async function({storeService:e,sessionService:t},r){return e.dispatch(o.migrationOnboardingUpdated(r)),await t.getInstance().user.persistLocalSettings(),{success:!0}}},71295:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(48723);t.setupSubscriptions=async function(e,t){e.sessionOpened.on((()=>{(0,o.initializeMigrationOnboarding)(t)}))}},17604:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MigrationOnboardingStep=void 0,function(e){e.NOT_SEEN="NOT_SEEN",e.SEEN="SEEN"}(t.MigrationOnboardingStep||(t.MigrationOnboardingStep={}))},25661:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(17338),n=r(21587),i=r(23881),a=r(64369),s=r(93820),c=r(90622),u=r(74219),d=r(15209),l=r(21583),p=r(21647),S=r(88548),g=r(99293),E=r(55861),y=r(74412),_=r(70252),A=r(49409),m=r(43542),T=r(44389),v=r(16359),f=r(26392),h=r(37824),D=r(61),O=r(39952),P=r(70530),I=r(64811),C=r(88530),R=r(76569),L=r(76592),b=r(63935),N=r(17387),U=r(33719),w=r(49183),M=r(14581),k=r(51168),F=r(7753),K=r(53156),B=r(16667),G=r(91313),j=r(25560),V=[n.bootstrap,i.bootstrap,c.bootstrap,u.bootstrap,p.bootstrap,d.bootstrap,l.bootstrap,S.bootstrap,g.bootstrap,E.bootstrap,y.bootstrap,_.bootstrap,a.bootstrap,A.bootstrap,m.bootstrap,T.bootstrap,v.bootstrap,D.bootstrap,f.bootstrap,O.bootstrap,P.bootstrap,C.bootstrap,R.bootstrap,L.bootstrap,N.bootstrap,U.bootstrap,w.bootstrap,M.bootstrap,k.bootstrap,b.bootstrap,I.bootstrap,s.bootstrap,B.vpnApiBootstrap,F.bootstrap,K.bootstrap,h.bootstrap,G.bootstrap,j.bootstrap];t.bootstrap=(e,t,r)=>{const n=(0,o.getCoreServices)(e);V.forEach((e=>{e(t,n,r)}))}},74318:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCurrentLocation=t.initCarbon=t.setPlatform=void 0;const o=r(53576),n=r(71796),i=r(4798),a=r(75391),s=r(44242),c=r(20849),u=r(44273),d=r(30855),l=r(87855),p=r(86056),S=r(95623),g=r(17338),E=r(61384),y=r(12995),_=r(70252),A=r(90503),m=r(4673),T=r(50643),v=r(47975),f=r(73011),h=r(96637),D=r(25661),O=r(2646),P=r(18539),I=r(18216),C=r(28486),R=r(88322),L=r(45800);t.setPlatform=(e,t,r)=>{if(r===I.InitMode.FirstInit){e.getInstance(g.CarbonServicesTypeEnum.StoreService).getStore().dispatch((0,y.savePlatformInfo)(t))}(0,p.setPlatformInfo)(t)},t.initCarbon=async function(e){if((0,O.setPublicPath)(e.publicPath),!e.storageLayer)throw new Error("Missing Storage layer prevents Carbon initialization");e.keys.cloudflareAccess&&e.keys.cloudflareSecret&&(0,L.setCloudflareHeaders)(e.keys.cloudflareAccess,e.keys.cloudflareSecret);const r=(0,g.carbonServices)({storageLayer:new P.CarbonLocalStorage(e.storageLayer),sessionStorage:e.sessionStorage,createClients:e.createClients}),{storeService:p,storageService:y}=(0,g.getCoreServices)(r);await p.completeRehydration(),(0,R.loadAnonymousApplicationId)(y,p);const _=function(e){const t=e.getState(),r=(0,C.appSessionIdSelector)(t)?I.InitMode.Resume:I.InitMode.FirstInit;return(0,S.logVerbose)({message:`Inferred init mode : ${r}`}),r}(p);(0,t.setPlatform)(r,e.platformInfo,_);const A=await(0,f.setupEventBus)(r);await A.coreServicesReady({initMode:_}),(0,v.loadFrequencyLists)(),e.workers&&(0,E.setWorkersPath)(e.workers),e.plugins&&(0,m.setPlugins)(e.plugins);try{await(0,l.initAuthenticatedCarbonApplication)(e,r,_)}catch(e){throw S.Debugger.error(e,"error while initializing SDK"),e}const{debug:b,e2e:N}=e.connectors;let{leeloo:U,maverick:w,extension:M,diagnostic:k,api:F}=e.connectors;U=U||(0,n.createEventBus)({events:o.CarbonLeelooConnector}),w=w||(0,n.createEventBus)({events:o.CarbonMaverickConnector}),M=M||(0,n.createEventBus)({events:o.ExtensionCarbonConnector}),k=k||(0,n.createEventBus)({events:o.CarbonDiagnosticConnector}),F=F||(0,n.createEventBus)({events:T.apiEvents}),b&&(0,c.subscribeToDebugEvents)(b),N&&(0,d.subscribeToE2EEvents)(N,r),(0,i.subscribeToExtensionEvents)(M,r),(0,a.subscribeToLeelooEvents)(U,r),(0,s.subscribeToMaverickEvents)(w,r),(0,u.subscribeToDiagnosticEvents)(k);const K=new h.TsEventBusCommandQueryBus(r,T.apiEvents,F);return(0,D.bootstrap)(r,K,e?.infrastructure),A.appInitialized({initMode:_,abTestForcedVersion:e.abTestForcedVersion}),r},t.fetchCurrentLocation=function(e,t){return e.country.getCurrentCountry().then((e=>{t.dispatch((0,y.saveCurrentLocation)(e))})).catch((e=>{const t=new Error(`[Sdk/Default] - fetchCurrentLocation: ${e}`);(0,_.sendExceptionLog)({error:t,code:A.ExceptionCriticality.WARNING})}))}},73011:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupEventBus=void 0;const o=r(17338),n=r(52346),i=r(99293),a=r(24579),s=r(10672),c=r(17387),u=r(33719),d=r(71295),l=r(51168),p=r(92184),S=r(49821),g=r(43057),E=r(63678),y=r(9991),_=r(23299),A=r(33045),m=r(63549),T=r(3149),v=r(98202),f=r(46564),h=r(83060);t.setupEventBus=async function(e){const t=(0,o.getCoreServices)(e),r=t.eventBusService,D=[n.setupSubscriptions,E.setupSubscriptions,A.setupSubscriptions,m.setupSubscriptions,y.setupSubscriptions,i.setupSubscriptions,_.setupSubscriptions,a.setupSubscriptions,g.setupSubscriptions,d.setupSubscriptions,s.setupSubscriptions,c.setupSubscriptions,l.setupSubscriptions,u.setupSubscriptions,p.setupSubscriptions,S.setupSubscriptions,T.setupUserSettingsLogSubscriptions,v.setupSubscriptions,f.setupSubscriptions,h.setupSubscriptions].map((e=>e(r,t)));return await Promise.all(D),r}},10672:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(74318),n=r(18216),i=r(28096);t.setupSubscriptions=function(e,t){e.appInitialized.on((async e=>{const{wsService:r,storeService:a}=t;e.initMode===n.InitMode.FirstInit&&(await(0,o.fetchCurrentLocation)(r,a),(0,i.sendLocationInfo)(a.getPlatform().location))}))}},18216:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InitMode=void 0,function(e){e.FirstInit="FirstInit",e.Resume="Resume"}(t.InitMode||(t.InitMode={}))},63340:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeApplicationModulesAccess=void 0,t.makeApplicationModulesAccess=function(e){return{createClients:()=>e()}}},82568:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeApplicationModulesAccess=void 0;var o=r(63340);Object.defineProperty(t,"makeApplicationModulesAccess",{enumerable:!0,get:function(){return o.makeApplicationModulesAccess}})},17338:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCoreServices=t.carbonServices=t.CarbonServicesTypeEnum=void 0;const o=r(80722),n=r(72365),i=r(98416),a=r(18539),s=r(77627),c=r(89016),u=r(1860),d=r(74752),l=r(93990),p=r(73297),S=r(74412),g=r(82568);var E;!function(e){e.StoreService="StoreService",e.StorageService="StorageService",e.SessionService="SessionService",e.MasterPasswordEncryptorService="MasterPasswordEncryptorService",e.LocalDataEncryptorService="LocalDataEncryptorService",e.RemoteDataEncryptorService="RemoteDataEncryptorService",e.AuthorizationKeysEncryptorService="AuthorizationKeysEncryptorService",e.LocalStorageService="LocalStorageService",e.WSService="WSService",e.AutoLoginService="AutoLoginService",e.WebAuthnAuthenticationService="WebAuthnAuthenticationService",e.EventBusService="EventBusService",e.EventLoggerService="EventLoggerService",e.TeamDeviceEncryptedConfigEncryptorService="TeamDeviceEncryptedConfigEncryptorService",e.ApplicationModulesAccess="ApplicationModulesAccess"}(E=t.CarbonServicesTypeEnum||(t.CarbonServicesTypeEnum={}));t.carbonServices=e=>{const t=(0,o.makeStoreService)({sessionStorage:e.sessionStorage,store:void 0}),r=(0,p.makeEventBusService)(),y=e.masterPasswordEncryptorService?e.masterPasswordEncryptorService():(0,n.makeDataEncryptorService)(t),_=e.localDataEncryptorService?e.localDataEncryptorService():(0,n.makeDataEncryptorService)(t),A=e.remoteDataEncryptorService?e.remoteDataEncryptorService():(0,n.makeDataEncryptorService)(t),m=e.teamDeviceEncryptedConfigEncryptorService?e.teamDeviceEncryptedConfigEncryptorService():(0,n.makeDataEncryptorService)(t),T=(0,u.makeKeyDataEncryptorService)(),v=(0,n.makeDataEncryptorService)(t),f=Object.assign({},(0,c.makeWSService)(),e.wsService?e.wsService(t):{}),h=(0,a.makeStorageService)();h.setInstance(e.storageLayer);const D=e.authorizationKeysEncryptorService?e.authorizationKeysEncryptorService():(0,u.makeKeyDataEncryptorService)();(0,n.setObfuscatingKey)(D);const O=(0,i.makeLocalStorageService)({masterPasswordEncryptorService:y,localDataEncryptorService:_,authorizationKeysEncryptorService:D,autoLoginEncryptorService:T,webAuthnAuthenticationEncryptorService:v,storageService:h,storeService:t}),P=(0,S.makeEventLoggerService)({storeService:t,storageService:h}),I=(0,g.makeApplicationModulesAccess)(e.createClients),C=(0,s.makeSessionService)({applicationModulesAccess:I,masterPasswordEncryptorService:y,localDataEncryptorService:_,remoteDataEncryptorService:A,storeService:t,localStorageService:O,storageService:h,wsService:f,eventBusService:r,eventLoggerService:P,teamDeviceEncryptedConfigEncryptorService:m}),R=(0,d.makeAutoLoginService)({autoLoginEncryptorService:T,localStorageService:O,wsService:f,authorizationKeysEncryptorService:D,storeService:t}),L=(0,l.makeWebAuthnAuthenticationService)({webAuthnAuthenticationEncryptorService:v,storeService:t,localStorageService:O,authorizationKeysEncryptorService:D});return{services:[{type:E.WSService,instance:f},{type:E.StoreService,instance:t},{type:E.StorageService,instance:h},{type:E.LocalStorageService,instance:O},{type:E.SessionService,instance:C},{type:E.AuthorizationKeysEncryptorService,instance:D},{type:E.AutoLoginService,instance:R},{type:E.WebAuthnAuthenticationService,instance:L},{type:E.EventBusService,instance:r},{type:E.MasterPasswordEncryptorService,instance:y},{type:E.RemoteDataEncryptorService,instance:A},{type:E.LocalDataEncryptorService,instance:_},{type:E.EventLoggerService,instance:P},{type:E.TeamDeviceEncryptedConfigEncryptorService,instance:m},{type:E.ApplicationModulesAccess,instance:I}],getInstance:function(e){const t=this.services.find((t=>t.type===e));if(void 0===t)throw new Error("Service "+e+" not defined");return t.instance}}};t.getCoreServices=e=>({storeService:e.getInstance(E.StoreService),remoteDataEncryptorService:e.getInstance(E.RemoteDataEncryptorService),masterPasswordEncryptorService:e.getInstance(E.MasterPasswordEncryptorService),localDataEncryptorService:e.getInstance(E.LocalDataEncryptorService),authorizationKeysEncryptorService:e.getInstance(E.AuthorizationKeysEncryptorService),localStorageService:e.getInstance(E.LocalStorageService),storageService:e.getInstance(E.StorageService),sessionService:e.getInstance(E.SessionService),wsService:e.getInstance(E.WSService),autoLoginService:e.getInstance(E.AutoLoginService),webAuthnAuthenticationService:e.getInstance(E.WebAuthnAuthenticationService),eventBusService:e.getInstance(E.EventBusService),eventLoggerService:e.getInstance(E.EventLoggerService),teamDeviceEncryptedConfigEncryptorService:e.getInstance(E.TeamDeviceEncryptedConfigEncryptorService),applicationModulesAccess:e.getInstance(E.ApplicationModulesAccess)})},34066:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(16593),n=r(38981),i=r(6e3),a=r(81228),s=r(28287),c=r(10447),u=r(38328),d=r(17095),l=r(18203),p=r(94275);t.config={commands:{validateToken:{handler:s.validateToken},validateMasterPassword:{handler:s.validateMasterPasswordHandler},resetProtectedItemAutofillTimer:{handler:s.resetProtectedItemAutofillTimerHandler},forceSync:{handler:c.forceSyncHandler},updatePremiumChurningDismissDate:{handler:u.updatePremiumChurningDismissDateHandler},setCredentialSearchOrder:{handler:d.setCredentialSearchOrderHandler},refreshSubscriptionInformation:{handler:l.refreshSubscriptionInformationHandler},updateAccountRecoveryKeyPersonalSettings:{handler:p.updateAccountRecoveryKeyPersonalSettingsHandler}},queries:{getActiveSpaces:{selector:o.activeSpacesSelector},getMasterPasswordAndServerKey:{selector:o.masterPasswordAndServerKeySelector,allowedPlatforms:["desktop_win"]},getIsAuthenticated:{selector:o.isAuthenticatedSelector},getSyncInfo:{selector:o.syncSelector},getIsSyncInProgress:{selector:o.syncIsInProgressSelector},getPremiumStatus:{selector:o.premiumStatusSelector},getNodePremiumStatus:{selector:o.nodePremiumStatusSelector},getSubscriptionInformation:{selector:o.subscriptionInformationSelector},getIsSSOUser:{selector:n.isSSOUserSelector},getSSOMigrationInfo:{selector:n.ssoMigrationInfoSelector},getSSOProviderInfo:{selector:n.ssoProviderInfoSelector},getUserLogin:{selector:o.userLoginSelector},getPublicUserId:{selector:o.publicUserIdSelector},getAnalyticsInstallationId:{selector:o.analyticsInstallationIdSelector},getUserLoginStatus:{selector:i.loginStatusSelector},getWebOnboardingMode:{selector:o.webOnboardingModeSelector},getPremiumChurningDismissDate:{selector:o.premiumChurningDismissDateSelector},getIsPaymentFailureChurningDismissed:{selector:o.isPaymentFailureChurningDismissedSelector},getCredentialSearchOrder:{selector:o.getCredentialSearchOrderSelector},getDidOpen:{selector:o.didOpenSelector},getPlatformName:{selector:o.platformNameSelector}},liveQueries:{liveSyncInfo:{operator:a.syncInfo$},liveIsSyncInProgress:{operator:a.syncInProgress$},liveLoginStatus:{operator:i.getLoginStatus$},livePremiumStatus:{operator:a.premiumStatus$},liveSubscriptionInformation:{operator:a.subscriptionInformation$},liveServiceProviderUrl:{subject:a.getServiceProviderUrl$},liveWebOnboardingMode:{operator:a.webOnboardingMode$},liveDidOpen:{operator:a.didOpen$}}}},92987:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncStatuses=t.CredentialSearchOrder=void 0;var o=r(25576);Object.defineProperty(t,"CredentialSearchOrder",{enumerable:!0,get:function(){return o.CredentialSearchOrder}}),Object.defineProperty(t,"SyncStatuses",{enumerable:!0,get:function(){return o.SyncStatuses}})},54034:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerSendTransactionDecipheringDiagnosticLog=void 0;const o=r(44273),n=r(95623);t.triggerSendTransactionDecipheringDiagnosticLog=function(e){n.default.log("SendDecipheringLog"),(0,o.default)().decipheringDiagnosticLogEvent(e)}},56269:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendFeaturesUpdateEvent=t.persistFeatures=t.getFeatures=t.factory=void 0;const o=r(20317),n=r(25576),i=r(28096);function a(){return{getFeatures:function(e,t,r,n){return t.features.fetchFeatures({login:r,uki:n}).then((t=>{e.dispatch((0,o.refreshedFeatures)(t))}))},persistFeatures:function(e,t,r){return t.persistData===n.PersistData.PERSIST_DATA_NO?Promise.resolve():e?e.storePersonalFeatures(r).then((()=>{})):void 0},sendFeaturesUpdateEvent:function(e){const t=e.getPersonalFeatures();if(t.features){const e={lastUpdate:t.lastUpdateTimestamp,list:t.features};(0,i.sendFeatures)(e)}}}}t.factory=a;const s=a(),c=s.getFeatures;t.getFeatures=c;const u=s.persistFeatures;t.persistFeatures=u;const d=s.sendFeaturesUpdateEvent;t.sendFeaturesUpdateEvent=d},89160:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUsersSSOInfo=t.loadLocalData=t.completeLogin=t.checkLogin=void 0;const o=r(35105),n=r(2246),i=r(25576),a=r(59489),s=r(86797),c=r(7624),u=r(16356),d=r(56915),l=r(90622),p=r(46298),S=r(17825),g=r(14656),E=r(92263),y=r(1965),_=r(16593);t.checkLogin=async function(e,r,o){const u=e.getState(),A=(0,_.userLoginSelector)(u);let m,T;try{const t=await async function(e,t){const r=await(0,l.getLocalAccounts)(e,t);return r.map((e=>e.login)).map((t=>({login:t,deviceAccessKey:(0,d.getDeviceAccessKeySelector)(e.getState(),t)})))}(e,r),n=(0,d.getDeviceAccessKeySelector)(u,A),a=await(0,p.requestLogin)(e,{login:A,deviceAccessKey:n,profiles:t});if((0,p.isApiError)(a))return async function(e,t,r,o){if(!(0,p.isApiErrorOfType)(p.BusinessError,r))throw new Error(`Failed to request login (${r.code})`);const n=r.code;switch(n){case p.DeviceDeactivated:case p.DeviceNotFound:throw await(0,y.wipeOutLocalAccounts)(e,t,[o]),new Error(i.AuthenticationCode[i.AuthenticationCode.DEVICE_NOT_REGISTERED]);case p.ClientVersionDoesNotSupportSSOMigration:throw new Error(i.AuthenticationCode[i.AuthenticationCode.CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION]);default:(0,S.assertUnreachable)(n)}}(r,o,a,A);!async function(e,t,r){const{profilesToDelete:o}=r;if((o||[]).length>0)return;const n=o.map((e=>e.login));await(0,y.wipeOutLocalAccounts)(e,t,n)}(r,o,a),m=a.verification,T=a.ssoInfo}catch(e){if(!(0,E.isCarbonError)(e,g.HttpError))throw e;m=function(e){const t=function(e){const t=(0,n.getUserPublicSetting)(e,"otp2");return t?s.OtpType.OTP_LOGIN:null}(e);return t===s.OtpType.OTP_LOGIN?[{type:"totp"}]:[]}(A)}const v=function(e,t=[],r){if(t.some((({type:e})=>"sso"===e))&&r?.serviceProviderUrl)return i.AuthenticationCode.SSO_LOGIN_BYPASS;const o=function(e){const t=e.some((e=>"totp"===e.type));if(t)return s.OtpType.OTP_LOGIN;if(e.length>0)throw new Error("Unsupported 2FA method requested");return null}(t);if(function(e,t){(0,n.storeUserPublicSetting)(e,"otp2",t===s.OtpType.OTP_LOGIN)}(e,o),o===s.OtpType.OTP_LOGIN)return i.AuthenticationCode.ASK_OTP;return i.AuthenticationCode.ASK_MASTER_PASSWORD}(A,m,T);return function(e,r,o){switch(e){case i.AuthenticationCode.SSO_LOGIN_BYPASS:if(!o?.serviceProviderUrl)throw new Error("[LocalAuthentication] - Unable to use SSO verification. Missing SSO information.");r.dispatch((0,c.storeSSOSettings)({ssoUser:!0,...(0,t.getUsersSSOInfo)(o)}));break;case i.AuthenticationCode.ASK_OTP:r.dispatch((0,a.enableOtp)(s.OtpType.OTP_LOGIN))}e!==i.AuthenticationCode.SSO_LOGIN_BYPASS&&r.dispatch((0,c.storeSSOSettings)({ssoUser:!1,...(0,t.getUsersSSOInfo)(o)}))}(v,e,T),v},t.completeLogin=async function(e,t,r,o,n){const a=e.getUserLogin(),s={login:a,deviceAccessKey:(0,d.getDeviceAccessKeySelector)(e.getState(),a),authTicket:o},c=await(0,p.completeLoginWithAuthTicket)(e,s);if((0,p.isApiError)(c))return async function(e,t,r,o){if(!(0,p.isApiErrorOfType)(p.BusinessError,r))throw new Error(`Failed to complete login (${r.code})`);const n=r.code;switch(n){case p.DeviceNotFound:throw await(0,y.wipeOutLocalAccounts)(e,t,[o]),new Error(i.AuthenticationCode[i.AuthenticationCode.DEVICE_NOT_REGISTERED]);case p.InvalidAuthTicket:throw new Error(i.AuthenticationCode[i.AuthenticationCode.TOKEN_NOT_VALID]);default:(0,S.assertUnreachable)(n)}}(t,r,c,a);const{serverKey:l}=c;if(!l)throw new Error(i.AuthenticationCode[i.AuthenticationCode.SERVER_KEY_MISSING]);return e.dispatch((0,u.updateisUsingDashlaneAuthenticator)(n)),e.dispatch((0,u.updateServerKey)(l)),i.AuthenticationCode.ASK_MASTER_PASSWORD},t.loadLocalData=async function(e,t,r){return r.getInstance().prepareCrypto(),await e.getInstance().user.loadSessionData(),t.dispatch((0,a.localDataLoaded)()),i.AuthenticationCode.LOGGEDIN};t.getUsersSSOInfo=e=>{if(!e)return{serviceProviderUrl:""};const t=(e=>{if(e.migration)switch(e.migration){case"mp_user_to_sso_member":return o.SSOMigrationType.MP_TO_SSO;case"sso_member_to_admin":case"sso_member_to_mp_user":return o.SSOMigrationType.SSO_TO_MP}})(e);return{serviceProviderUrl:e.serviceProviderUrl?e.serviceProviderUrl:"",...void 0!==t?{migration:t}:{},isNitroProvider:e.isNitroProvider}}},6e3:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLoginStatus$=t.loginStatusSelector=void 0;const o=r(32034),n=r(16516),i=r(18948),a=r(3343),s=r(27754),c=r(38981),u=(0,o.createSelector)(s.sessionIdSelector,(e=>e.userSession.account.isAuthenticated),((e,t)=>e&&t));t.loginStatusSelector=(0,o.createSelector)(u,(e=>e.userSession.account),c.ssoMigrationInfoSelector,((e,t,r)=>{if(!e)return{login:null,loggedIn:!1,needsSSOMigration:!1};const{isAuthenticated:o,login:n}=t;return{loggedIn:o,login:n,needsSSOMigration:void 0!==r}}));t.getLoginStatus$=()=>(0,i.pipe)((0,a.map)(t.loginStatusSelector),(0,a.distinctUntilChanged)(n.equals))},38865:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateWebOnboardingMode=void 0;const o=r(76089),n=r(28096);t.updateWebOnboardingMode=function(e,t,r){if(!e.isAuthenticated())throw new Error("No session set");e.dispatch(o.webOnboardingModeUpdated(r));const i=e.getLocalSettings().webOnboardingMode;n.sendWebOnboardingModeUpdate(i),t.getInstance().user.persistLocalSettings()}},57789:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isOnboardingNotificationShowing=void 0;const o=r(53576);t.isOnboardingNotificationShowing=e=>{const{completedSteps:t,flowLoginCredentialOnWeb:r,leelooStep:n,popoverStep:i}=e,{SHOW_LOGIN_USING_EXTENSION_NOTIFICATION:a,SHOW_PASSWORD_SAVE_SUCCESS:s,SHOW_WEB_SAVE_AND_AUTOLOGIN_COMPLETED:c}=o.WebOnboardingLeelooStep,{SHOW_LOGIN_NOTIFICATION:u}=o.WebOnboardingPopoverStep,d=r&&n===a,l=t.saveCredentialOnWeb&&n===s,p=t.saveCredentialOnWeb&&t.loginCredentialOnWeb&&n===c;return d||l||p||r&&i===u}},36960:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeDashlaneApiPairingService=void 0;const o=r(46298),n=r(95623);t.makeDashlaneApiPairingService=e=>({requestPairing:t=>(async(e,t)=>{try{const r=await o.requestPairing(e,t);if(o.isApiError(r))throw r;return r}catch(e){return void(0,n.logError)({message:`Pairing request failed: ${e}`})}})(e,t)})},15718:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pairingIdSelector=t.isPairingEnabledSelector=void 0;t.isPairingEnabledSelector=e=>Boolean(e.userSession.session.pairingId);t.pairingIdSelector=e=>e.userSession.session.pairingId},10824:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestPairing=void 0;const o=r(15718),n=r(2246),i=r(16356),a=r(36960);t.requestPairing=async(e,t)=>{const r=e.getState();if((0,o.pairingIdSelector)(r))return;if(!(0,n.getSyncAppSetting)("syncWithLocalClients"))return;const s=(0,a.makeDashlaneApiPairingService)(e),c=await s.requestPairing(t),u=c?.pairingId;u&&e.dispatch((0,i.pairingSucceeded)(u))}},35507:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.transformNodePremiumStatus=t.getFreshPremiumStatus=t.refreshSubscriptionInformation=t.refreshPremiumStatus=void 0;const o=r(16516),n=r(95623),i=r(70252),a=r(48313),s=r(66833),c=r(25576),u=r(25011),d=r(31375),l=r(76089);async function p(e,t){const r=e.getLocalSettings().subscriptionInformation;try{const r=await(0,d.getSubscriptionInformation)(e,t);return e.dispatch((0,l.localSettingsSubscriptionInformationStatusUpdated)(r)),r}catch(e){const t=new Error(`[PremiumController] - refreshUserSubscriptionStatus: ${e}`);if(n.default.error(t),(0,i.sendExceptionLog)({error:t}),r)return r;throw e}}t.refreshPremiumStatus=async function(e,t,r,o){const c=e.getLocalSettings().premiumStatus,d=e.getLocalSettings().nodePremiumStatus,S=!d?.currentTimestampUnix||Date.now()-d.currentTimestampUnix>1e4;if(d&&!S)return c;try{const[n,i]=await Promise.all([E(t,r,o),(0,u.getPremiumStatus)(e,r),p(e,r)]),c=n?.spaces||[],d=m(i),S={...n,planName:n?.planName?.toLowerCase()??null};return e.dispatch((0,a.premiumStatusUpdated)(S)),e.dispatch((0,l.localSettingsNodePremiumStatusUpdated)(d)),(0,s.refreshSpaceData)(e,c),n}catch(e){const t=new Error(`[PremiumController] - refreshPremiumStatus: ${e}`);if(n.default.error(t),(0,i.sendExceptionLog)({error:t}),c)return c;throw e}},t.refreshSubscriptionInformation=p;const S=e=>{if(!e.capabilities||!e.capabilities.length)return;return e.capabilities.reduce(((e,t)=>{const{capability:r,...o}=t;return e[r]=o,e}),{})},g=e=>e.familyMembership?e.familyMembership[0]:void 0;function E(e,t,r){return e.premium.status({login:t,uki:r,billingInformation:!0,spaces:!0,autoRenewal:!0,familyInformation:!0,previousPlan:!0,needsAutoRenewalFailed:!0}).then((e=>{const t=(0,o.pick)(["statusCode","billingInformation","planName","planType","planFeature","endDate","spaces","autoRenewal","previousPlan","autoRenewalFailed","autoRenewInfo","recoveryHash"],e);return t.capabilities=S(e),e.hasOwnProperty("familyMembership")&&(t.familyMembership=g(e)),t}))}t.getFreshPremiumStatus=E;const y=e=>{if(e.capabilities?.length)return e.capabilities.reduce(((e,t)=>{const{capability:r,...o}=t;return e[r]=o,e}),{})},_=e=>{switch(e.b2cStatus.statusCode){case c.B2CStatusCode.Subscribed:return e.b2cStatus.planName.includes("grace")?c.PremiumStatusCode.GRACE_PERIOD:e.b2cStatus.isTrial?c.PremiumStatusCode.NEW_USER:e.b2cStatus.autoRenewal?c.PremiumStatusCode.PREMIUM_CANCELLED:c.PremiumStatusCode.PREMIUM;case c.B2CStatusCode.Legacy:return c.PremiumStatusCode.OLD_ACCOUNT;case c.B2CStatusCode.Free:default:return c.PremiumStatusCode.NO_PREMIUM}};function A(e){const t=[];return e.currentTeam&&t.push({associatedEmail:e.currentTeam.associatedEmail,billingAdmins:e.currentTeam.teamMembership.billingAdmins,color:e.currentTeam.teamInfo.color,companyName:e.currentTeam.teamName,info:{...e.currentTeam.teamInfo},invitationDate:e.currentTeam.invitationDateUnix,isBillingAdmin:e.currentTeam.teamMembership.isBillingAdmin,isSSOUser:e.currentTeam.teamMembership.isSSOUser,isTeamAdmin:e.currentTeam.teamMembership.isTeamAdmin,isGroupManager:e.currentTeam.teamMembership.isGroupManager,joinDate:e.currentTeam.joinDateUnix,letter:e.currentTeam.teamInfo.letter,membersNumber:e.currentTeam.teamInfo.membersNumber,planType:e.currentTeam.teamInfo.planType,revokeDate:null,shouldDelete:!1,status:c.SpaceStatus.Accepted,teamAdmins:{...e.currentTeam.teamMembership.teamAdmins},teamId:e.currentTeam.teamId.toString(),teamName:e.currentTeam.teamName,tier:e.currentTeam.planFeature}),e.pastTeams&&e.pastTeams.forEach((e=>{t.push({associatedEmail:e.associatedEmail,billingAdmins:e.teamMembership.billingAdmins,color:e.teamInfo.color,companyName:e.teamName,info:{...e.info},invitationDate:e.invitationDateUnix,isBillingAdmin:e.teamMembership.isBillingAdmin,isSSOUser:e.teamMembership.isSSOUser,isTeamAdmin:e.teamMembership.isTeamAdmin,isGroupManager:e.teamMembership.isGroupManager,joinDate:e.joinDateUnix,letter:e.teamInfo.letter,membersNumber:e.teamInfo.membersNumber,planType:e.teamInfo.planType,revokeDate:e.revokeDateUnix,shouldDelete:e.shouldDelete,status:e.status,teamAdmins:{...e.teamMembership.teamAdmins},teamId:e.teamId.toString(),teamName:e.teamName,tier:e.planFeature})})),t}function m(e){return{...e.b2cStatus,planName:e.b2cStatus?.planName?.toLowerCase()??null,currentTimestampUnix:Date.now(),isTrial:e.b2cStatus.isTrial,statusCode:_(e),spaces:e.b2bStatus?A(e.b2bStatus):[],b2bStatus:{...e.b2bStatus},capabilities:y(e)}}t.transformNodePremiumStatus=m},70414:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUsersSSOInfo=t.validateMasterPassword=t.registerDevice=t.registerDeviceWithDashlaneAuthenticator=t.cancelRegistrationWithDashlaneAuthenticator=t.generateUki=t.askServerToSendToken=t.checkLoginWithUki=t.requestDeviceRegistration=t.SendTokenStatus=void 0;const o=r(28354),n=r(16516),i=r(35105),a=r(25576),s=r(72636),c=r(95623),u=r(76089),d=r(86797),l=r(59489),p=r(25963),S=r(63713),g=r(48313),E=r(16038),y=r(64910),_=r(33769),A=r(56668),m=r(16356),T=r(11814),v=r(7624),f=r(43739);var h=r(72636);Object.defineProperty(t,"SendTokenStatus",{enumerable:!0,get:function(){return h.SendTokenStatus}});const D=r(17825),O=r(19399),P=r(28287),I=r(16593),C=r(46298),R=r(70252),L=r(92263);let b,N;t.requestDeviceRegistration=async function(e){const r=e.getAccountInfo().login,o=await(0,C.requestDeviceRegistration)(e,{login:r,hasDashlaneAuthenticatorSupport:!0});if((0,C.isApiError)(o))return function(e){if(!(0,C.isApiErrorOfType)(C.BusinessError,e))throw new Error(`Failed to request device registration (${e.code})`);const t=e.code;switch(t){case C.UserNotFound:throw new Error(a.AuthenticationCode[a.AuthenticationCode.USER_DOESNT_EXIST]);case C.SSOBlocked:throw new Error(a.AuthenticationCode[a.AuthenticationCode.SSO_BLOCKED]);case C.ClientVersionDoesNotSupportSSOMigration:throw new Error(a.AuthenticationCode[a.AuthenticationCode.CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION]);default:(0,D.assertUnreachable)(t)}}(o);const{verification:n,ssoInfo:i}=o;if(!n)throw new Error("[requestDeviceRegistration] - No verfication in API response.");const s=function(e=[],t){if(e.some((({type:e})=>"sso"===e))&&t?.serviceProviderUrl)return a.AuthenticationCode.SSO_LOGIN_BYPASS;if(e.some((({type:e})=>"email_token"===e)))return a.AuthenticationCode.ASK_TOKEN;if(e.some((({type:e})=>"totp"===e)))return a.AuthenticationCode.ASK_OTP_FOR_NEW_DEVICE;if(e.some((({type:e})=>"dashlane_authenticator"===e)))return a.AuthenticationCode.ASK_DASHLANE_AUTHENTICATOR;throw new Error("[requestDeviceRegistration - getVerificationType] - Verification not supported!")}(n,i);return function(e,r,o){if(e===a.AuthenticationCode.SSO_LOGIN_BYPASS){if(!o?.serviceProviderUrl)throw new Error("[requestDeviceRegistration - processVerification] - Unable to use SSO verification. Missing SSO information.");r.dispatch((0,v.storeSSOSettings)({ssoUser:!0,...(0,t.getUsersSSOInfo)(o)}))}e!==a.AuthenticationCode.SSO_LOGIN_BYPASS&&r.dispatch((0,v.storeSSOSettings)({ssoUser:!1,...(0,t.getUsersSSOInfo)(o)}))}(s,e,i),s},t.checkLoginWithUki=async function(e,t,r){const o=e.getAccountInfo().login;if(!await async function(e,t,r){const o=await e.authentication.validity({login:t,uki:r});return"UKI VALID"===o}(t,o,r))throw new Error(a.AuthenticationCode[a.AuthenticationCode.INVALID_UKI]);return e.dispatch((0,l.confirmUserAuthentication)()),Promise.resolve(a.AuthenticationCode.USE_LOCAL_UKI)},t.askServerToSendToken=async function(e,t){const r=await e.authentication.askServerToSendToken({login:t});if(r!==s.SendTokenStatus.SUCCESS)throw c.default.log(`Server failed to send a token with status: ${s.SendTokenStatus[r]}`),new Error(a.AuthenticationCode[a.AuthenticationCode.SEND_TOKEN_FAILED])};const U=(e,t)=>{t?e.dispatch((0,l.enableOtp)(d.OtpType.OTP_LOGIN)):e.dispatch((0,l.enableOtp)(d.OtpType.OTP_NEW_DEVICE))};t.generateUki=function(e){return`${e}-${(0,o.v4)()}`};const w=(e,t,r,o,n)=>{const i=n||T.device.getDefaultDeviceName(),s=e.getPlatformInfo(),c=e.getAccountInfo().login,u={deviceName:(0,O.secureDeviceName)(i),appVersion:s.appVersion,platform:s.platformName,osCountry:(0,C.makeSafeCountry)(e.getLocation().country||s.country),osLanguage:(0,C.makeSafeLanguage)(s.lang),temporary:r!==a.PersistData.PERSIST_DATA_YES};switch(t.type){case"extraDeviceToken":return(0,C.completeExtraDeviceRegistrationWithToken)(e,{device:u,login:c,verification:{token:(0,a.extractExtraDeviceToken)(t)}});case"emailToken":case"otp":case"sso":return(0,C.completeDeviceRegistrationWithAuthTicket)(e,{device:u,login:c,authTicket:o});default:(0,D.assertUnreachable)(t)}},M=(e,t,r,o)=>{const n=o||T.device.getDefaultDeviceName(),i=e.getPlatformInfo(),s=e.getAccountInfo().login,c={deviceName:(0,O.secureDeviceName)(n),appVersion:i.appVersion,platform:i.platformName,osCountry:(0,C.makeSafeCountry)(e.getLocation().country||i.country),osLanguage:(0,C.makeSafeLanguage)(i.lang),temporary:t!==a.PersistData.PERSIST_DATA_YES};return(0,C.completeDeviceRegistrationWithAuthTicket)(e,{device:c,login:s,authTicket:r})},k=async(e,t)=>{const r=await(0,P.dashlaneAuthenticatorGetAuthTicket)(e,t);if(!1===r.success){const{error:{code:e,message:t}}=r;if(e===a.AuthenticationCode.BUSINESS_ERROR)throw new Error(t);throw new Error(a.AuthenticationCode[e])}return b?.(a.CancelDashlaneAuthenticatorRegistration.COMPLETED),r.authTicket};t.cancelRegistrationWithDashlaneAuthenticator=async function(){N?.(a.CancelDashlaneAuthenticatorRegistration.CANCELLED)},t.registerDeviceWithDashlaneAuthenticator=async function(e,t,r){const o=new Promise(((e,t)=>{b=e,N=t}));let n;try{n=(await Promise.all([k(e,r),o]))[0]}catch(e){if(e===a.CancelDashlaneAuthenticatorRegistration.CANCELLED)return a.AuthenticationCode.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED;throw e}finally{N=void 0,b=void 0}if(n){const o=await M(e,t,n,r);(0,C.isApiError)(o)&&function(e){if(!(0,C.isApiErrorOfType)(C.BusinessError,e))throw new Error(`Failed to complete device registration (${e.code})`);const t=e.code;if(t===C.InvalidAuthTicket)throw new Error(a.AuthenticationCode[a.AuthenticationCode.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED]);(0,D.assertUnreachable)(t)}(o);const{deviceAccessKey:i,deviceSecretKey:s,settings:c,serverKey:u,deviceAnalyticsId:d,userAnalyticsId:l,publicUserId:p}=o,{login:S}=e.getAccountInfo();return e.dispatch((0,f.deviceRegistered)((0,f.makeDeviceRegistrationKeys)(i,s),t,S)),e.dispatch((0,m.updateisUsingDashlaneAuthenticator)(!0)),e.dispatch((0,m.updateisUsingBackupCode)(!1)),u&&e.dispatch((0,m.updateServerKey)(u)),e.dispatch((0,m.updateSettingsForMPValidation)(c)),d&&e.dispatch((0,m.updateDeviceAnalyticsId)(d)),l&&e.dispatch((0,m.updateUserAnalyticsId)(l)),p&&e.dispatch((0,m.updatePublicUserId)(p)),a.AuthenticationCode.ASK_MASTER_PASSWORD}throw new Error("Authentication Ticket is missing")};const F=async(e,t)=>{const r=await(0,P.convertTokenToAuthTicket)(e,t);if(!1===r.success){const{error:{code:e,message:t}}=r;if(e===a.AuthenticationCode.BUSINESS_ERROR)throw new Error(t);throw new Error(a.AuthenticationCode[e])}return r.authTicket};t.registerDevice=async function(e,t,r,o,i,s){const c=await F(e,r),u=await w(e,r,t,c,i);if((0,C.isApiError)(u))return function(e,t){if(!(0,C.isApiErrorOfType)(C.BusinessError,e))throw new Error(`Failed to complete device registration (${e.code})`);const r=e.code;switch(r){case C.UserNotFound:throw new Error(a.AuthenticationCode[a.AuthenticationCode.INVALID_LOGIN]);case C.VerificationFailed:case C.InvalidAuthTicket:if("otp"===t.type)throw new Error(a.AuthenticationCode[a.AuthenticationCode.OTP_NOT_VALID]);throw new Error(a.AuthenticationCode[a.AuthenticationCode.TOKEN_NOT_VALID]);case C.VerificationMethodDisabled:throw new Error(a.AuthenticationCode[a.AuthenticationCode.REGISTER_DEVICE_FAILED]);default:(0,D.assertUnreachable)(r)}}(u,r);const{deviceAccessKey:d,deviceSecretKey:l,settings:p,serverKey:S,ssoServerKey:g,remoteKeys:T,deviceAnalyticsId:v,userAnalyticsId:h,publicUserId:O}=u;if(g){const{masterPasswordEncryptorService:t,remoteDataEncryptorService:r,ssoServiceProviderKey:o}=s;if(!T||(0,n.isEmpty)(T))throw new Error("registerDevice failed with error: ssoServerKey or remoteKeys is missing");const i=(0,E.base64ToBuffer)(g),a=T.filter((e=>"sso"===e.type))[0];try{const n=(0,E.base64ToBuffer)(o),s=(0,_.getEncryptionKeyBuffer)(n,i,{skipDerivation:!0}),c=(0,E.arrayBufferToText)(s),u="",d=(0,y.getNoDerivationCryptoConfig)();e.dispatch((0,m.updateMasterPassword)(c)),await t.setInstance({raw:c},u,d);const l=await t.getInstance().decrypt(a.key),p=(0,A.deflatedUtf8ToUtf16)(l,{skipUtf8Decoding:!0,skipInflate:!0});await r.setInstance({raw:p},u,d),e.dispatch((0,m.updateRemoteKey)(p))}catch(e){throw new Error(`registerDevice failed deciphering remoteKey with error: ${e}`)}}const{login:P}=e.getAccountInfo();return e.dispatch((0,f.deviceRegistered)((0,f.makeDeviceRegistrationKeys)(d,l),t,P)),e.dispatch((0,m.updateisUsingDashlaneAuthenticator)(!1)),e.dispatch((0,m.updateisUsingBackupCode)(o)),S&&e.dispatch((0,m.updateServerKey)(S)),e.dispatch((0,m.updateSettingsForMPValidation)(p)),"otp"===r?.type&&U(e,S),v&&e.dispatch((0,m.updateDeviceAnalyticsId)(v)),h&&e.dispatch((0,m.updateUserAnalyticsId)(h)),O&&e.dispatch((0,m.updatePublicUserId)(O)),a.AuthenticationCode.ASK_MASTER_PASSWORD},t.validateMasterPassword=async function(e,t){try{const r=e.getState(),o=(0,I.masterPasswordValidationDataSelector)(r),n=e=>{},[i]=await S.decrypt(t.getInstance(),n,null,new Map,[o]);return e.dispatch(await(0,g.applyTransaction)(i)),e.dispatch(u.registerLastSync(p.MIN_SYNC_TIMESTAMP)),a.AuthenticationCode.LOGGEDIN}catch(e){const t=L.CarbonError.fromAnyError(e).addContextInfo("REMOTE LOGIN","validateMasterPassword");throw(0,R.sendExceptionLog)({error:t}),new Error(a.AuthenticationCode[a.AuthenticationCode.WRONG_PASSWORD])}};t.getUsersSSOInfo=e=>{if(!e)return{serviceProviderUrl:""};const t=(e=>{if(e.migration)switch(e.migration){case"mp_user_to_sso_member":return i.SSOMigrationType.MP_TO_SSO;case"sso_member_to_admin":case"sso_member_to_mp_user":return i.SSOMigrationType.SSO_TO_MP}})(e);return{serviceProviderUrl:e.serviceProviderUrl?e.serviceProviderUrl:"",...void 0!==t?{migration:t}:{},isNitroProvider:e.isNitroProvider}}},28096:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendConfirmCreateAccountResult=t.sendEncryptSettingsResult=t.sendFeatures=t.sendWebOnboardingModeUpdate=t.sendTeamAdminDataUpdate=t.sendAccountInfo=t.changeDeviceNameResult=t.deactivateDeviceResult=t.updatePaymentCardTokenResult=t.reportDataUpdate=t.getDataUpdates=t.sendLocationInfo=t.sendLocalAccounts=t.triggerSessionSyncStatus=t.triggerSessionOpened=t.triggerOpenSessionFailed=t.getAuthenticationCodeFromError=t.triggerServerSidePairingStatusChanged=t.triggerLoginStatusChanged=t.triggerOpenSessionSsoRedirectionToIdpRequired=t.triggerOpenSessionExtraDeviceTokenRequired=t.triggerOpenSessionDashlaneAuthenticator=t.triggerOpenSessionTokenSent=t.triggerAskMasterPassword=t.triggerOpenSessionOTPForNewDeviceRequired=t.triggerOpenSessionOTPSent=t.SessionResumingCode=t.AuthenticationCode=void 0;const o=r(16516),n=r(53576),i=r(21726),a=r(19697),s=r(70252),c=r(90503),u=r(95623),d=r(39373),l=r(46083),p=r(92263),S=r(14656),g=r(90622),E=r(25576);Object.defineProperty(t,"AuthenticationCode",{enumerable:!0,get:function(){return E.AuthenticationCode}}),Object.defineProperty(t,"SessionResumingCode",{enumerable:!0,get:function(){return E.SessionResumingCode}});const y=r(19979),_=r(56814),A=r(91892),m=r(41717),T=r(38981),v=r(27885);function f(e){u.default.log(`Session status updated for ${e.login}`);const t=(0,i.default)();t&&t.loginStatusChanged(e);const r=(0,a.default)();r&&r.loginStatusChanged(e)}function h(e){if(a.default){const t=(0,a.default)();t&&t.serverSidePairingStatusChanged(e)}}function D(e){let t=e&&e.message&&void 0!==E.AuthenticationCode[e.message]?E.AuthenticationCode[e.message]:E.AuthenticationCode.UNKNOWN_ERROR;return t===E.AuthenticationCode.UNKNOWN_ERROR&&((0,p.isCarbonError)(e,S.HttpError,S.HttpErrorCode.NETWORK_ERROR)&&(t=E.AuthenticationCode.NETWORK_ERROR),e?.message?.includes("TOKEN_NOT_VALID")&&(t=E.AuthenticationCode.TOKEN_NOT_VALID)),t}function O(e){switch(e){case E.AuthenticationCode.INVALID_LOGIN:case E.AuthenticationCode.EMPTY_LOGIN:case E.AuthenticationCode.EMPTY_MASTER_PASSWORD:case E.AuthenticationCode.EMPTY_TOKEN:case E.AuthenticationCode.EMPTY_OTP:case E.AuthenticationCode.NETWORK_ERROR:case E.AuthenticationCode.USER_DOESNT_EXIST:case E.AuthenticationCode.OTP_NOT_VALID:case E.AuthenticationCode.TOKEN_NOT_VALID:case E.AuthenticationCode.TOKEN_TOO_MANY_ATTEMPTS:case E.AuthenticationCode.WRONG_PASSWORD:return c.ExceptionCriticality.WARNING;default:return c.ExceptionCriticality.ERROR}}function P(e){return Promise.resolve({localAccounts:e}).then((e=>{u.default.log("send localAccountsListUpdated to leeloo");const t=(0,i.default)();t&&t.localAccountsListUpdated(e);const r=(0,a.default)();r&&r.localAccountsListUpdated(e)}))}function I(e){const t=e.getPersonalData(),r=e.getSpaceData(),n=e.getSharingData(),i=e.getUserLogin(),a=(0,o.curry)(d.removeCredentialsWithQuarantinedSpaces)(r),s=(0,o.pipe)(a,d.fixCredentialsWithMissingTitles)(t.credentials),c=["changesToUpload","changeHistories"],u=(0,o.omit)(c,{...t,credentials:s}),p=(0,d.handleLimitedSharedCredentialsPassword)(s,n,i),S=(0,l.handleLimitedSharedNotes)(t.notes,n,i);return{personalDataToSend:u,obfuscatedPersonalDataToSend:(0,o.omit)(c,{...t,credentials:p,notes:S})}}function C(e){const t=e.getState(),r=e.getSpaceData(),{obfuscatedPersonalDataToSend:o}=I(e),n=(0,i.default)(),s=(0,a.default)();if(n&&n.dataModelUpdated(o),s&&s.spaceDataUpdated(r),n){const e=(0,y.getIconsUrlsForCredentials)(o.credentials),r=(0,_.getFormattedDomainsFromUrls)(e),i=(0,_.decryptIconsDomains)((0,A.iconsSelector)(t),r),a={...o,credentials:(0,y.getCredentialsWithWebsiteIcon)(o.credentials,i,m.defaultIconTypes)};n.dataModelUpdated(a)}}function R(e,t){const r=(0,i.default)();r&&r.accountInfoChanged({accountInfo:e,spaceData:t});const o=(0,a.default)();o&&o.accountInfoChanged({accountInfo:e,spaceData:t})}function L(e){const t=(0,i.default)();t&&t.webOnboardingModeUpdated(e);const r=(0,a.default)();r&&r.webOnboardingModeUpdated(e)}function b(e){const t=(0,i.default)();t&&t.accountFeaturesChanged(e);const r=(0,a.default)();r&&r.accountFeaturesChanged(e)}t.triggerOpenSessionOTPSent=function(e){u.default.log("Ask for OTP");const t=(0,i.default)();t&&t.openSessionOTPSent(e);const r=(0,a.default)();r&&r.openSessionOTPSent(e)},t.triggerOpenSessionOTPForNewDeviceRequired=function(){const e=(0,i.default)();e&&e.openSessionOTPForNewDeviceRequired();const t=(0,a.default)();t&&t.openSessionOTPForNewDeviceRequired()},t.triggerAskMasterPassword=function(e){u.default.log("Ask for master password");const t=(0,i.default)();t&&t.openSessionAskMasterPassword({login:e});const r=(0,a.default)();r&&r.openSessionAskMasterPassword({login:e})},t.triggerOpenSessionTokenSent=function(e){u.default.log("Ask for new device e-mail token");const t=(0,i.default)();t&&t.openSessionTokenSent(e);const r=(0,a.default)();r&&r.openSessionTokenSent(e)},t.triggerOpenSessionDashlaneAuthenticator=function(){(0,u.logDebug)({message:"Ask for new device dashlane authenticator push notification"});const e=(0,i.default)();e&&e.openSessionDashlaneAuthenticator();const t=(0,a.default)();t&&t.openSessionDashlaneAuthenticator()},t.triggerOpenSessionExtraDeviceTokenRequired=function(){const e=(0,i.default)();e&&e.openSessionExtraDeviceTokenRequired();const t=(0,a.default)();t&&t.openSessionExtraDeviceTokenRequired()},t.triggerOpenSessionSsoRedirectionToIdpRequired=function(e,t){const r=(0,i.default)();r&&r.openSessionSsoRedirectionToIdpRequired({serviceProviderRedirectUrl:e,isNitroProvider:t});const o=(0,a.default)();o&&o.openSessionSsoRedirectionToIdpRequired({serviceProviderRedirectUrl:e,isNitroProvider:t})},t.triggerLoginStatusChanged=f,t.triggerServerSidePairingStatusChanged=h,t.getAuthenticationCodeFromError=D,t.triggerOpenSessionFailed=function(e){u.default.log("Failed to open Session"),u.default.log(`error: ${e}`);const t=D(e),r=t===E.AuthenticationCode.UNKNOWN_ERROR?e&&e.message&&"string"==typeof e.message?e.message:"89645128":"",o=new Error(`[SessionCommunication] - triggerOpenSessionFailed: ${e}`);o.stack=e.stack,u.default.error(o),(0,s.sendExceptionLog)({error:o,code:O(t)});const n={errorCode:E.AuthenticationCode[t],additionalErrorInfo:r,displayErrorCode:!0},c=(0,i.default)();c&&c.openSessionFailed(n);const d=(0,a.default)();d&&d.openSessionFailed(n)},t.triggerSessionOpened=function(e,t,r,o){const i=void 0!==(0,T.ssoMigrationInfoSelector)(e.getState()).migration;if(f({loggedIn:!0,login:e.getAccountInfo().login,needsSSOMigration:i}),R(r,(0,v.getNodePremiumStatusSpaceData)(e)),C(e),L(e.getLocalSettings().webOnboardingMode),(0,g.getLocalAccounts)(e,t).then((e=>{P(e)})),function(e){const t=e.getPersonalFeatures();t.features&&b({lastUpdate:t.lastUpdateTimestamp,list:t.features})}(e),void 0!==o){h({serverSidePairingStatus:o?n.ServerSidePairingStatus.PAIRED:n.ServerSidePairingStatus.UNPAIRED})}},t.triggerSessionSyncStatus=function(e){const t=(0,i.default)();t&&t.sessionSyncStatus(e);const r=(0,a.default)();r&&r.sessionSyncStatus(e)},t.sendLocalAccounts=P,t.sendLocationInfo=function(e){const t=(0,a.default)();t&&t.currentLocationUpdated(e)},t.getDataUpdates=I,t.reportDataUpdate=C,t.updatePaymentCardTokenResult=function(e){const t=(0,a.default)();t&&t.updatePaymentCardTokenResult(e)},t.deactivateDeviceResult=function(e){const t=(0,i.default)();t&&t.deactivateDeviceResult(e);const r=(0,a.default)();r&&r.deactivateDeviceResult(e)},t.changeDeviceNameResult=function(e){const t=(0,i.default)();t&&t.changeDeviceNameResult(e);const r=(0,a.default)();r&&r.changeDeviceNameResult(e)},t.sendAccountInfo=R,t.sendTeamAdminDataUpdate=function(e){const t=(0,a.default)();t&&t.teamAdminDataUpdated(e)},t.sendWebOnboardingModeUpdate=L,t.sendFeatures=b,t.sendEncryptSettingsResult=function(e){const t=(0,a.default)();t&&t.encryptSettingsResultUpdated(e)},t.sendConfirmCreateAccountResult=function(e){const t=(0,a.default)();t&&t.confirmCreateAccountResultUpdated(e)}},5464:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refeshAccountInfo=t.AutofillProtectionStatus=t.getOtpForCredential=t.askWebsiteInfo=t.saveGeneratedPassword=t.generatePassword=t.getPasswordGenerationSettings=t.generateAndSavePassword=t.resumeSession=t.sessionForceSync=t.getAndTriggerRefreshAccountInfo=t.makeSessionController=void 0;const o=r(10203),n=r(50415),i=r(95623),a=r(28096),s=r(95648),c=r(18862),u=r(70252),d=r(44908),l=r(35507),p=r(19697),S=r(49551),g=r(87496),E=r(29954),y=r(73439),_=r(9486),A=r(19399),m=r(6e3),T=r(56915),v=r(16593),f=r(28287),h=r(34376),D=r(27885);t.makeSessionController=e=>({askWebsiteInfo:t=>M(e.storeService,t),cancelPremiumSubscription:()=>async function(e,t,r){if(!e.isAuthenticated())return{success:!1};try{return await t.getInstance().payment.cancelPremiumSubscription(),I(e,t,r).then(C).catch((e=>{})),{success:!0}}catch(e){const t=e.message,r=new Error(`[SessionController] - cancelPremiumSubscription: ${e}`);return i.default.log(r),u.sendExceptionLog({error:r}),{success:!1,reason:t}}}(e.storeService,e.sessionService,e.wsService),changeDeviceName:(t,r)=>function(e,t,r,o){if(e.isAuthenticated()){const e=(0,A.secureDeviceName)(o);return t.getInstance().device.changeDeviceName(r,e).catch((e=>{const t=new Error(`[SessionController] - changeDeviceName: ${e}`);i.default.log(t),u.sendExceptionLog({error:t})}))}return Promise.resolve(null)}(e.storeService,e.sessionService,t,r),closeSession:()=>{return t=e.sessionService,i.default.log("SessionController/closeSession called"),t.close();var t},lockSession:()=>e.sessionService.lock(),deactivateDevice:t=>function(e,t,r){if(e.isAuthenticated())return t.getInstance().device.deactivateDevice(r).catch((e=>{const t=new Error(`[SessionController] - deactivateDevice: ${e}`);i.default.log(t),u.sendExceptionLog({error:t})}));return Promise.resolve(null)}(e.storeService,e.sessionService,t),generateAndSavePassword:t=>b(e.storeService,e.sessionService,t),generatePassword:t=>U(e.storeService,t),getAndTriggerRefreshAccountInfo:()=>P(e.storeService,e.sessionService,e.wsService),getPasswordGenerationSettings:()=>N(e.storeService),getCurrentUserInfo:()=>(0,h.getCurrentUserInfo)(e.storeService),getDevicesList:()=>function(e,t){if(e.isAuthenticated())return t.getInstance().device.fetchDevicesList().catch((e=>(i.default.log("Error while fetching Devices list",e),[])));return Promise.resolve([])}(e.storeService,e.sessionService),getInvoices:()=>function(e,t){if(e.isAuthenticated())return t.getInstance().payment.fetchInvoices().catch((e=>{const t=new Error(`[SessionController] - getInvoices: ${e}`);return i.default.log(t),u.sendExceptionLog({error:t}),null}));return Promise.resolve(null)}(e.storeService,e.sessionService),getLoginStatus:()=>function(e){const t=e.getState();return(0,m.loginStatusSelector)(t)}(e.storeService),getPersonalData:()=>e.storeService.getPersonalData(),getPersonalSettings:()=>{return t=e.storeService,Promise.resolve(t.getPersonalSettings());var t},getTemporaryToken:()=>function(e,t){if(e.hasSessionId())return t.getInstance().device.fetchTemporaryToken().catch((e=>(i.default.log("Error while fetching Temporary token",e),null)));return Promise.resolve(null)}(e.storeService,e.sessionService),getUki:()=>{return t=e.storeService,{uki:(0,T.ukiSelector)(t.getState())};var t},isSaveCredentialDisabled:t=>(0,E.isSaveCredentialDisabledOnDomain)(e.storeService,t),signalSaveCredentialDisabled:t=>(0,E.signalSaveCredentialDisabled)(e.storeService,e.sessionService,t),resumeSession:()=>L(e.storeService,e.storageService,e.sessionService,e.wsService),saveGeneratedPassword:(t,r)=>w(e.storeService,e.sessionService,t,r),sendCredentialLoginUrl:(t,r)=>function(e,t,r){if(!e.isAuthenticated())return;const o=(0,S.findDataModelObject)(t,e.getPersonalData().credentials);o&&(0,p.default)().credentialLoginUrlRetrieved({requestId:r,credentialId:t,url:(0,g.getGoToUrlForCredential)(o)})}(e.storeService,t,r),sessionForceSync:(t=o.Trigger.Manual)=>R(e.sessionService,t),updateCardToken:(t,r)=>async function(e,t,r,o,n){try{if(!e.isAuthenticated())return;const{payment:i}=t.getInstance(),s=await i.updatePaymentCard(o,n);a.updatePaymentCardTokenResult(s),I(e,t,r).then(C).catch((e=>{}))}catch(e){const t=e.message,r=new Error(`[SessionController] - updateCardToken: ${e}`);i.default.log(r),u.sendExceptionLog({error:r}),a.updatePaymentCardTokenResult({success:!1,reason:t})}}(e.storeService,e.sessionService,e.wsService,t,r),getOtpForCredential:t=>k(e.storeService,t),validateMasterPassword:t=>(0,f.validateMasterPassword)(e.storeService,e.masterPasswordEncryptorService,t)});const O={devicesCount:0,premiumStatus:{statusCode:null},contactInfo:{},subscriptionCode:null};async function P(e,t,r){if(!e.isAuthenticated())return e.dispatch((0,c.saveAccountContactInfo)(O.contactInfo)),O;try{const o=await I(e,t,r),n=o.accountInfo;return e.dispatch((0,c.saveAccountContactInfo)(n.contactInfo)),C(o),n}catch(t){i.default.error("Error during getRefreshedAccountInfo",t);const r=(0,v.premiumStatusSelector)(e.getState()),o=r?{premiumStatus:r}:{};return{...O,...o}}}async function I(e,t,r){const{device:o,user:n}=t.getInstance(),a=(0,l.refreshPremiumStatus)(e,r,e.getUserLogin(),(0,T.ukiSelector)(e.getState())).then((()=>({premiumStatus:e.getLocalSettings().premiumStatus,nodePremiumStatusSpaceData:(0,D.getNodePremiumStatusSpaceData)(e)}))),s=o.fetchDevicesList().then((e=>e.length)).catch((e=>1)),c=n.fetchContactInfo(),d=n.fetchSubscriptionCode();try{await n.fetchAccountInfo()}catch(e){(0,i.logError)(e),u.sendExceptionLog({error:e})}const[p,S,g,E]=await Promise.all([a,s,c,d]),{premiumStatus:y,nodePremiumStatusSpaceData:_}=p;if(!y)throw new Error("premium info should exist");return{accountInfo:{premiumStatus:y,devicesCount:S,contactInfo:g,subscriptionCode:E},nodePremiumStatusSpaceData:_}}function C(e){a.sendAccountInfo(e.accountInfo,e.nodePremiumStatusSpaceData)}async function R(e,t=o.Trigger.Manual){await e.getInstance().user.attemptSync(t)}function L(e,t,r,o){return(0,_.triggerABTestingChanged)(e.getABTesting()),a.sendLocationInfo(e.getPlatform().location),e.isAuthenticated()?P(e,r,o).then((r=>(a.triggerSessionOpened(e,t,r),!0))):Promise.resolve(null)}function b(e,t,r){return d.generateAndSavePassword(e,t,r)}function N(e){return d.getDefaultPasswordGenerationSettings(e.getPersonalSettings())}function U(e,t){return d.generatePassword(e.getPersonalSettings(),t)}function w(e,t,r,o){return d.saveGeneratedPassword(e,t,r,o)}function M(e,t){return(0,s.getWebsiteInfo)(e,t)}function k(e,t){const r=(0,S.findDataModelObject)(t,e.getPersonalData().credentials);return r?.OtpSecret?(0,y.generateOtpFromSecret)(r.OtpSecret):""}t.getAndTriggerRefreshAccountInfo=P,t.sessionForceSync=R,t.resumeSession=L,t.generateAndSavePassword=b,t.getPasswordGenerationSettings=N,t.generatePassword=U,t.saveGeneratedPassword=w,t.askWebsiteInfo=M,t.getOtpForCredential=k,t.AutofillProtectionStatus=(0,n.Enum)("UNPROTECTED","LOCKED","UNLOCKED"),t.refeshAccountInfo=function(e,t,r){I(e,t,r).then(C).catch((e=>{}))}},66833:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFreshSpaceData=t.updateCurrentSpaceWith=t.updateSpaceData=t.refreshSpaceData=void 0;const o=r(36738),n=r(28096);function i(e,t){const r={spaces:t};e.dispatch((0,o.spaceDataUpdated)(r)),(0,n.reportDataUpdate)(e)}function a(e){return(e||[]).map((e=>({teamId:e.teamId,details:e})))}t.refreshSpaceData=function(e,t){const r=a(t);return i(e,r),Promise.resolve(r)},t.updateSpaceData=i,t.updateCurrentSpaceWith=function(e,t){const r=e.getSpaceData().spaces.map((e=>"accepted"===e.details.status?t(e):e));i(e,r)},t.getFreshSpaceData=a},16661:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconsCacheLoaded=t.iconsRefreshed=t.iconsUpdated=t.ICONS_CACHE_LOADED=t.ICONS_REFRESHED=t.ICONS_UPDATED=void 0,t.ICONS_UPDATED="ICONS_UPDATED",t.ICONS_REFRESHED="ICONS_REFRESHED",t.ICONS_CACHE_LOADED="ICONS_CACHE_LOADED";t.iconsUpdated=e=>({type:t.ICONS_UPDATED,data:e});t.iconsRefreshed=e=>({type:t.ICONS_REFRESHED,data:e});t.IconsCacheLoaded=e=>({type:t.ICONS_CACHE_LOADED,data:e})},19695:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.iconsFromStorage=t.iconsToStorage=void 0;t.iconsToStorage=e=>({...e,domains:Array.from(e.domains.entries())});t.iconsFromStorage=e=>({...e,domains:new Map(e.domains)})},58174:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyIconByDomains=void 0;const o=r(16661),n=r(53),i=r(46445);function a(){return{domains:new Map,lastUpdateTimeSeconds:0}}t.default=(e=a(),t)=>{switch(t.type){case o.ICONS_UPDATED:return{...e,domains:s(e,t.data)};case o.ICONS_REFRESHED:return{...e,domains:s(e,t.data),lastUpdateTimeSeconds:(0,n.getUnixTimestamp)()};case o.ICONS_CACHE_LOADED:return t.data;default:return e}},t.getEmptyIconByDomains=a;const s=(e,t)=>t.reduce(((e,t)=>{const{domain:r,...o}=t;if(!r)return e;const n=(0,i.computeHashMD5)(r);return e.get(n)||e.set(n,o),e}),new Map(e.domains))},43416:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadedStoredUserABTests=t.refreshedUserABTests=t.SENT_AB_TEST_USAGE_LOG=t.STORED_USER_AB_TEST_LOADED=t.USER_AB_TESTS_UPDATED=void 0,t.USER_AB_TESTS_UPDATED="USER_AB_TEST_UPDATED",t.STORED_USER_AB_TEST_LOADED="STORED_USER_AB_TEST_LOADED",t.SENT_AB_TEST_USAGE_LOG="SENT_AB_TEST_USAGE_LOG";t.refreshedUserABTests=e=>({type:t.USER_AB_TESTS_UPDATED,lastUpdateTimestamp:Date.now(),tests:e});t.loadedStoredUserABTests=e=>({type:t.STORED_USER_AB_TEST_LOADED,userABTests:e})},1678:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyTests=void 0;const o=r(43416);function n(){return{lastUpdateTimestamp:null,tests:{}}}t.getEmptyTests=n,t.default=(e={lastUpdateTimestamp:null,tests:{}},t)=>{switch(t.type){case o.USER_AB_TESTS_UPDATED:return{...e,tests:t.tests,lastUpdateTimestamp:t.lastUpdateTimestamp};case o.STORED_USER_AB_TEST_LOADED:return{...e,...t.userABTests};default:return e}}},62627:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userABTestVariantSelector=t.userABTestSelector=t.userABTestsSelector=void 0;t.userABTestsSelector=e=>e.userSession.abTests;t.userABTestSelector=(e,r)=>(0,t.userABTestsSelector)(e).tests[r];t.userABTestVariantSelector=(e,r)=>{const o=(0,t.userABTestSelector)(e,r);return o?o.variant:void 0}},18862:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.saveAccountContactInfo=t.SAVE_ACCOUNT_CONTACT_INFO=void 0,t.SAVE_ACCOUNT_CONTACT_INFO="SAVE_ACCOUNT_CONTACT_INFO";t.saveAccountContactInfo=e=>({type:t.SAVE_ACCOUNT_CONTACT_INFO,accountContactInfo:e})},39727:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(18862);t.default=(e={},t)=>t.type===o.SAVE_ACCOUNT_CONTACT_INFO?{...e,...t.accountContactInfo}:e},43461:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountCreationStarted=t.saveAccountKeys=t.saveAccountSettings=t.ACCOUNT_CREATION_STARTED=t.SAVE_ACCOUNT_KEYS=t.SAVE_ACCOUNT_SETTINGS=void 0,t.SAVE_ACCOUNT_SETTINGS="SAVE_ACCOUNT_SETTINGS",t.SAVE_ACCOUNT_KEYS="SAVE_ACCOUNT_KEYS",t.ACCOUNT_CREATION_STARTED="ACCOUNT_CREATION_STARTED",t.saveAccountSettings=function(e){return{type:t.SAVE_ACCOUNT_SETTINGS,settings:e}},t.saveAccountKeys=function(e){return{type:t.SAVE_ACCOUNT_KEYS,accountKey:e}},t.accountCreationStarted=function(e){return{type:t.ACCOUNT_CREATION_STARTED,isSSO:e.isSSO}}},12659:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyAccountCreation=void 0;const o=r(43461),n=r(95648);function i(){return{settings:{personalSettings:(0,n.getEmptyPersonalSettings)(),promise:null},accountKey:{promise:null},isSSO:!1}}t.default=(e=i(),t)=>{switch(t.type){case o.SAVE_ACCOUNT_SETTINGS:return{...e,settings:{...t.settings,personalSettings:(0,n.getUpdatedPersonalSettings)(e.settings.personalSettings,t.settings.personalSettings)}};case o.SAVE_ACCOUNT_KEYS:return{...e,accountKey:t.accountKey};case o.ACCOUNT_CREATION_STARTED:return{...i(),isSSO:t.isSSO};default:return e}},t.getEmptyAccountCreation=i},12706:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSSOAccountCreationSelector=void 0;t.isSSOAccountCreationSelector=e=>e.userSession.accountCreation.isSSO},59489:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setPasswordLeaked=t.saveSubscriptionCode=t.localDataLoaded=t.userAuthenticationFailed=t.confirmUserAuthentication=t.enableOtp=t.USER_AUTHENTICATION_FAILED=t.SET_PASSWORD_LEAKED=t.SAVE_SUBSCRIPTION_CODE=t.LOCAL_DATA_LOADED=t.CONFIRM_USER_AUTHENTICATION=t.ENABLE_OTP=void 0;const o=r(25576);t.ENABLE_OTP="ENABLE_OTP",t.CONFIRM_USER_AUTHENTICATION="CONFIRM_USER_AUTHENTICATION",t.LOCAL_DATA_LOADED="LOCAL_DATA_LOADED",t.SAVE_SUBSCRIPTION_CODE="SAVE_SUBSCRIPTION_CODE",t.SET_PASSWORD_LEAKED="SET_PASSWORD_LEAKED",t.USER_AUTHENTICATION_FAILED="USER_AUTHENTICATION_FAILED";t.enableOtp=e=>({type:t.ENABLE_OTP,otpType:e});t.confirmUserAuthentication=()=>({type:t.CONFIRM_USER_AUTHENTICATION,sessionStartTime:Date.now()});t.userAuthenticationFailed=()=>({type:t.USER_AUTHENTICATION_FAILED});t.localDataLoaded=()=>({type:t.LOCAL_DATA_LOADED,persistData:o.PersistData.PERSIST_DATA_YES});t.saveSubscriptionCode=e=>({type:t.SAVE_SUBSCRIPTION_CODE,code:e});t.setPasswordLeaked=e=>({type:t.SET_PASSWORD_LEAKED,isPasswordLeaked:e})},86797:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyAccount=t.OtpType=void 0;const o=r(48313),n=r(43739),i=r(59489);var a;function s(){return{login:null,isAuthenticated:!1,sessionStartTime:null,persistData:null,otpType:a.NO_OTP,subscriptionCode:null,isPasswordLeaked:!1}}!function(e){e[e.NO_OTP=0]="NO_OTP",e[e.OTP_NEW_DEVICE=1]="OTP_NEW_DEVICE",e[e.OTP_LOGIN=2]="OTP_LOGIN"}(a=t.OtpType||(t.OtpType={})),t.getEmptyAccount=s,t.default=(e=s(),t)=>{switch(t.type){case o.OPEN_SESSION:return{...e,login:t.login};case n.DEVICE_REGISTERED:case i.LOCAL_DATA_LOADED:return{...e,persistData:t.persistData};case i.CONFIRM_USER_AUTHENTICATION:return{...e,isAuthenticated:!0,sessionStartTime:t.sessionStartTime};case i.USER_AUTHENTICATION_FAILED:return{...e,isAuthenticated:!1,sessionStartTime:null};case i.ENABLE_OTP:return{...e,otpType:t.otpType};case i.SAVE_SUBSCRIPTION_CODE:return{...e,subscriptionCode:t.code};case i.SET_PASSWORD_LEAKED:return{...e,isPasswordLeaked:t.isPasswordLeaked};default:return e}}},48313:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyTransaction=t.premiumStatusUpdated=t.localSettingsUpdated=t.closeSession=t.openSession=t.saveGeneratedPassword=t.savePersonalDataItems=t.savePersonalDataItem=t.SAVE_PERSONAL_ITEMS=t.SAVE_PERSONAL_ITEM=t.SAVE_GENERATED_PASSWORD=t.PREMIUM_STATUS_UPDATED=t.LOCAL_SETTINGS_UPDATED=t.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION=t.ADD_PERSONAL_ITEM_FROM_TRANSACTION=t.CLOSE_SESSION=t.OPEN_SESSION=void 0;const o=r(84977),n=r(27517);t.OPEN_SESSION="OPEN_SESSION",t.CLOSE_SESSION="CLOSE_SESSION",t.ADD_PERSONAL_ITEM_FROM_TRANSACTION="ADD_PERSONAL_ITEM_FROM_TRANSACTION",t.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION="REMOVE_PERSONAL_ITEM_FROM_TRANSACTION",t.LOCAL_SETTINGS_UPDATED="LOAD_STORED_LOCAL_SETTINGS",t.PREMIUM_STATUS_UPDATED="PREMIUM_STATUS_UPDATED",t.SAVE_GENERATED_PASSWORD="SAVE_GENERATED_PASSWORD",t.SAVE_PERSONAL_ITEM="SAVE_PERSONAL_ITEM",t.SAVE_PERSONAL_ITEMS="SAVE_PERSONAL_ITEMS",t.savePersonalDataItem=function(e,r,n){return{type:t.SAVE_PERSONAL_ITEM,dataType:o.default[r],dataModelObject:e,changeHistory:n}},t.savePersonalDataItems=function(e,r,n){return{type:t.SAVE_PERSONAL_ITEMS,dataType:o.default[r],dataModelObjects:e,changeHistory:n}},t.saveGeneratedPassword=function(e){return{type:t.SAVE_GENERATED_PASSWORD,generatedPassword:e}};t.openSession=e=>({type:t.OPEN_SESSION,login:e});t.closeSession=()=>({type:t.CLOSE_SESSION});t.localSettingsUpdated=e=>({type:t.LOCAL_SETTINGS_UPDATED,data:Object.assign({},e)});t.premiumStatusUpdated=e=>({type:t.PREMIUM_STATUS_UPDATED,premiumStatus:e});t.applyTransaction=async e=>{let r;return r="SETTINGS"===e.type?n.PersonalSettingsActionType.EditFromTransaction:"BACKUP_REMOVE"===e.action?t.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION:t.ADD_PERSONAL_ITEM_FROM_TRANSACTION,"BACKUP_EDIT"===e.action&&e.content&&(e.content.LastBackupTime=Math.floor(e.backupDate/1e3)),{type:r,itemId:e.identifier,content:e.content}}},42282:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetAuthTicketInfo=t.updateAuthTicketInfo=void 0;const o=r(4190);t.updateAuthTicketInfo=e=>({type:o.ADD_AUTH_TICKET_DATA,data:e});t.resetAuthTicketInfo=()=>({type:o.RESET_AUTH_TICKET_DATA})},78663:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyAuthTicketInfo=void 0;const o=r(4190);t.getEmptyAuthTicketInfo=()=>({login:null,date:0,authTicket:null}),t.default=(e=(0,t.getEmptyAuthTicketInfo)(),r)=>{switch(r.type){case o.ADD_AUTH_TICKET_DATA:return{...e,...r.data};case o.RESET_AUTH_TICKET_DATA:return{...e,...(0,t.getEmptyAuthTicketInfo)()};default:return e}}},4190:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RESET_AUTH_TICKET_DATA=t.ADD_AUTH_TICKET_DATA=void 0,t.ADD_AUTH_TICKET_DATA="ADD_AUTH_TICKET_DATA",t.RESET_AUTH_TICKET_DATA="RESET_AUTH_TICKET_DATA"},28417:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.blacklistedUserSessionKeys=void 0,t.blacklistedUserSessionKeys=["iconsCache","health","personalData","teamAdminData","sharingSync","sharingData"]},16194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.changeMPDone=t.changeMPStart=t.SET_CHANGE_MP_DONE=t.SET_CHANGE_MP_START=void 0,t.SET_CHANGE_MP_START="SET_CHANGE_MP_START",t.SET_CHANGE_MP_DONE="SET_CHANGE_MP_DONE";t.changeMPStart=()=>({type:t.SET_CHANGE_MP_START});t.changeMPDone=()=>({type:t.SET_CHANGE_MP_DONE})},66403:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyChangeMPData=void 0;const o=r(16194);function n(){return{changeMPinProgress:!1}}t.getEmptyChangeMPData=n,t.default=(e={changeMPinProgress:!1},t)=>{switch(t.type){case o.SET_CHANGE_MP_START:return{...e,changeMPinProgress:!0};case o.SET_CHANGE_MP_DONE:return{...e,changeMPinProgress:!1};default:return e}}},66417:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTPUpdatedAction=t.CREDENTIAL_OTP_UPDATED=void 0,t.CREDENTIAL_OTP_UPDATED="CREDENTIAL_OTP_UPDATED";t.credentialOTPUpdatedAction=(e,r)=>({type:t.CREDENTIAL_OTP_UPDATED,credentialId:e,otp:r})},11406:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTPUpdatedAction=t.credentialOTPs=void 0;var o=r(27547);Object.defineProperty(t,"credentialOTPs",{enumerable:!0,get:function(){return o.credentialOTPs}});var n=r(66417);Object.defineProperty(t,"credentialOTPUpdatedAction",{enumerable:!0,get:function(){return n.credentialOTPUpdatedAction}})},27547:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTPs=void 0,t.credentialOTPs=function(e={},t){return"CREDENTIAL_OTP_UPDATED"===t.type?{...e,[t.credentialId]:t.otp}:e}},31177:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.darkWebOnboardingStateUpdated=t.dataLeaksEmailStatusListUpdated=t.ONBOARDING_STATE_UPDATED=t.DATA_LEAKS_BREACHES_UPDATED=t.DATA_LEAKS_EMAIL_STATUS_UPDATED=void 0,t.DATA_LEAKS_EMAIL_STATUS_UPDATED="DATA_LEAKS_EMAIL_STATUS_UPDATED",t.DATA_LEAKS_BREACHES_UPDATED="DATA_LEAKS_BREACHES_UPDATED",t.ONBOARDING_STATE_UPDATED="ONBOARDING_STATE_UPDATED";t.dataLeaksEmailStatusListUpdated=e=>({type:t.DATA_LEAKS_EMAIL_STATUS_UPDATED,emailList:e});t.darkWebOnboardingStateUpdated=e=>({type:t.ONBOARDING_STATE_UPDATED,onboardingState:e})},4980:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyDarkWebState=void 0;const o=r(31177),n=r(53582);function i(){return{emails:[],onboardingState:n.DarkWebOnboardingState.UNKNOWN}}t.getEmptyDarkWebState=i,t.default=(e=i(),t)=>{switch(t.type){case o.DATA_LEAKS_EMAIL_STATUS_UPDATED:return{...e,emails:t.emailList};case o.ONBOARDING_STATE_UPDATED:return{...e,onboardingState:t.onboardingState};default:return e}}},19478:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.teamDirectorySyncNotInProgress=t.teamDirectorySyncInProgress=t.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS=t.TEAM_DIRECTORY_SYNC_IN_PROGRESS=void 0,t.TEAM_DIRECTORY_SYNC_IN_PROGRESS="TEAM_DIRECTORY_SYNC_IN_PROGRESS",t.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS="TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS";t.teamDirectorySyncInProgress=e=>({type:t.TEAM_DIRECTORY_SYNC_IN_PROGRESS,teamId:e});t.teamDirectorySyncNotInProgress=e=>({type:t.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS,teamId:e})},48005:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isTeamDirectorySyncInProgress=t.getEmptyState=void 0;const o=r(19478);function n(){return{syncsInProgress:{}}}t.getEmptyState=n,t.isTeamDirectorySyncInProgress=function(e,t){return e.syncsInProgress[t]},t.default=(e={syncsInProgress:{}},t)=>{switch(t.type){case o.TEAM_DIRECTORY_SYNC_IN_PROGRESS:const{teamId:r}=t;return{...e,syncsInProgress:{...e.syncsInProgress,[r]:!0}};case o.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS:const{teamId:n}=t;return{...e,syncsInProgress:{...e.syncsInProgress,[n]:!1}};default:return e}}},20317:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refreshedFeatures=t.loadedStoredFeatures=t.LOADED_STORED_FEATURES=t.FEATURES_UPDATED=void 0,t.FEATURES_UPDATED="FEATURES_UPDATED",t.LOADED_STORED_FEATURES="STORED_FEATURES_LOADED";t.loadedStoredFeatures=e=>({type:t.LOADED_STORED_FEATURES,data:e});t.refreshedFeatures=e=>({type:t.FEATURES_UPDATED,lastUpdateTimestamp:Date.now(),features:e})},51504:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NEW_URL_PARSER_FF_PROD=t.NEW_URL_PARSER_FF=void 0,t.NEW_URL_PARSER_FF="platform_web_new_url_parser_dev",t.NEW_URL_PARSER_FF_PROD="platform_web_new_url_parser"},62942:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyFeatures=void 0;const o=r(20317);function n(){return{lastUpdateTimestamp:0,features:{}}}t.default=(e={lastUpdateTimestamp:0,features:{}},t)=>{switch(t.type){case o.FEATURES_UPDATED:return Object.assign({},e,{lastUpdateTimestamp:t.lastUpdateTimestamp,features:t.features});case o.LOADED_STORED_FEATURES:return Object.assign({},e,t.data);default:return e}},t.getEmptyFeatures=n},85845:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.deleteFileMetaAction=t.updateFileContentAction=t.updateFileMetaAction=t.FileActionsType=void 0,function(e){e.UpdateFileMeta="UPDATE_FILE_META",e.UpdateFileContent="UPDATE_FILE_CONTENT",e.DeleteFileMeta="DELETE_FILE_META"}(r=t.FileActionsType||(t.FileActionsType={}));t.updateFileMetaAction=e=>({type:r.UpdateFileMeta,filesMeta:e});t.updateFileContentAction=e=>({type:r.UpdateFileContent,filesContent:e});t.deleteFileMetaAction=e=>({type:r.DeleteFileMeta,fileNames:e})},75417:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.remoteFileReducer=t.defaultRemoteFileState=void 0;const o=r(85845);function n(e,t){const r={...e};for(const e of t)e in r&&delete r[e];return r}t.defaultRemoteFileState=()=>({fileMetaData:{},fileContentState:{}});t.remoteFileReducer=(e=(0,t.defaultRemoteFileState)(),r)=>{switch(r?.type){case o.FileActionsType.UpdateFileMeta:return((e,t)=>({...e,fileMetaData:{...e.fileMetaData,...t.filesMeta}}))(e,r);case o.FileActionsType.UpdateFileContent:return((e,t)=>({...e,fileContentState:{...e.fileContentState,...t.filesContent}}))(e,r);case o.FileActionsType.DeleteFileMeta:return((e,t)=>({...e,fileMetaData:n(e.fileMetaData,t.fileNames)}))(e,r)}return e}},6093:(e,t)=>{function r(e){return"boolean"==typeof e?e:"string"==typeof e?"true"===e.toLowerCase()||"yes"===e.toLowerCase():Boolean(e)}function o(e,t){return"boolean"===t?e?"true":"false":"yes-no"===t?e?"YES":"NO":null}function n(e){return"object"==typeof e?e:JSON.parse(e)}function i(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.fixProperties=t.fixPropertiesTypes=t.ObjectToJson=t.jsonToObject=t.booleanToString=t.stringToBoolean=void 0,t.stringToBoolean=r,t.booleanToString=o,t.jsonToObject=n,t.ObjectToJson=i,t.fixPropertiesTypes=function(e,t,o,i,a){const s={};return e.filter((e=>!!a[e])).forEach((e=>{s[e]=r(a[e])})),t.filter((e=>!!a[e])).forEach((e=>{s[e]=Number(a[e])})),o.filter((e=>!!a[e])).forEach((e=>{s[e]=n(a[e])})),i.filter((e=>a.hasOwnProperty(e))).forEach((e=>{const t=a[e];s[e]=null===t?"":String(t)})),Object.assign({},a,s)},t.fixProperties={fromStore:function(e,t,r,n){const a={};return Object.keys(e).filter((e=>!!n[e])).forEach((t=>{a[t]=o(n[t],e[t])})),Object.keys(t).filter((e=>!!n[e])).forEach((e=>{a[e]=n[e]&&n[e].toString()})),Object.keys(r).filter((e=>!!n[e])).forEach((e=>{a[e]=i(n[e])})),Object.assign({},n,a)},fromTransaction:function(e,t,o,i){const a={};return Object.keys(e).filter((e=>!!i[e])).forEach((e=>{a[e]=r(i[e])})),Object.keys(t).filter((e=>!!i[e])).forEach((e=>{a[e]=Number(i[e])})),Object.keys(o).filter((e=>!!i[e])).forEach((e=>{a[e]=n(i[e])})),Object.assign({},i,a)}}},89438:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.healthStateUpdated=t.breachedPasswordsUpdated=void 0;const o=r(71144);t.breachedPasswordsUpdated=e=>({type:o.BREACHED_PASSWORD_UPDATED,breachedPasswords:e});t.healthStateUpdated=e=>({type:o.HEALTH_STATE_UPDATED,healthState:e})},10897:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.healthFromStorage=t.healthToStorage=void 0;t.healthToStorage=e=>({...e,similarPasswords:Object.keys(e.similarPasswords||[]).reduce(((t,r)=>e.similarPasswords[r]?{...t,[r]:Array.from(e.similarPasswords[r])}:t),{})});t.healthFromStorage=e=>({...e,similarPasswords:Object.keys(e.similarPasswords||[]).reduce(((t,r)=>({...t,[r]:new Set(e.similarPasswords[r])})),{})})},87399:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyHealthState=void 0;const o=r(71144);function n(){return{breachedPasswords:{},credentialsHealth:{},similarPasswords:{}}}t.default=(e={breachedPasswords:{},credentialsHealth:{},similarPasswords:{}},t)=>{switch(t.type){case o.BREACHED_PASSWORD_UPDATED:return{...e,breachedPasswords:t.breachedPasswords};case o.HEALTH_STATE_UPDATED:return{...e,...t.healthState};default:return e}},t.getEmptyHealthState=n},71144:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HEALTH_STATE_UPDATED=t.BREACHED_PASSWORD_UPDATED=void 0,t.BREACHED_PASSWORD_UPDATED="BREACHED_PASSWORD_UPDATED",t.HEALTH_STATE_UPDATED="HEALTH_STATE_UPDATED"},10857:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.killswitchStateUpdated=void 0;const o=r(86142);t.killswitchStateUpdated=e=>({type:o.KILLSWITCH_STATE_UPDATED,killswitchState:e})},79390:(e,t)=>{function r(){return{disableAutofill:!1,disableLoginFlowMigration:!1,brazeContentCardsDisabled:!1,disableAutoSSOLogin:!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyKillswitchState=void 0,t.getEmptyKillswitchState=r,t.default=(e={disableAutofill:!1,disableLoginFlowMigration:!1,brazeContentCardsDisabled:!1,disableAutoSSOLogin:!1},t)=>({...e,...t.killswitchState})},86142:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KILLSWITCH_STATE_UPDATED=void 0,t.KILLSWITCH_STATE_UPDATED="KILLSWITCH_STATE_UPDATED"},76089:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialSearchOrderUpdated=t.premiumChurningDismissDateUpdated=t.migrationOnboardingUpdated=t.webOnboardingModeUpdated=t.webOnboardingModeReset=t.localSettingsSubscriptionInformationStatusUpdated=t.localSettingsNodePremiumStatusUpdated=t.localSettingsPremiumStatusUpdated=t.registerDeviceName=t.registerLastSync=t.loadStoredLocalSettings=t.CREDENTIAL_SEARCH_ORDER_UPDATED=t.PREMIUM_CHURNING_DISMISS_DATE_UPDATED=t.MIGRATION_ONBOARDING_UPDATED=t.WEB_ONBOARDING_MODE_RESET=t.WEB_ONBOARDING_MODE_UPDATED=t.SUBSCRIPTION_INFORMATION_UPDATED=t.NODE_PREMIUM_STATUS_UPDATED=t.PREMIUM_STATUS_UPDATED=t.REGISTER_DEVICE_NAME=t.REGISTER_LAST_SYNC=t.LOAD_STORED_LOCAL_SETTINGS=void 0,t.LOAD_STORED_LOCAL_SETTINGS="LOCAL_SETTINGS/LOAD_STORED_LOCAL_SETTINGS",t.REGISTER_LAST_SYNC="LOCAL_SETTINGS/REGISTER_LAST_SYNC",t.REGISTER_DEVICE_NAME="LOCAL_SETTINGS/REGISTER_DEVICE_NAME",t.PREMIUM_STATUS_UPDATED="LOCAL_SETTINGS/PREMIUM_STATUS_UPDATED",t.NODE_PREMIUM_STATUS_UPDATED="LOCAL_SETTINGS/NODE_PREMIUM_STATUS_UPDATED",t.SUBSCRIPTION_INFORMATION_UPDATED="LOCAL_SETTINGS/SUBSCRIPTION_INFORMATION_UPDATED",t.WEB_ONBOARDING_MODE_UPDATED="LOCAL_SETTINGS/WEB_ONBOARDING_MODE_UPDATED",t.WEB_ONBOARDING_MODE_RESET="LOCAL_SETTINGS/WEB_ONBOARDING_MODE_RESET",t.MIGRATION_ONBOARDING_UPDATED="LOCAL_SETTINGS/MIGRATION_ONBOARDING_UPDATED",t.PREMIUM_CHURNING_DISMISS_DATE_UPDATED="PREMIUM_CHURNING_DISMISS_DATE_UPDATED",t.CREDENTIAL_SEARCH_ORDER_UPDATED="CREDENTIAL_SEARCH_ORDER_UPDATED";t.loadStoredLocalSettings=e=>({type:t.LOAD_STORED_LOCAL_SETTINGS,data:Object.assign({},e)});t.registerLastSync=e=>({type:t.REGISTER_LAST_SYNC,lastSync:e});t.registerDeviceName=e=>({type:t.REGISTER_DEVICE_NAME,deviceName:e});t.localSettingsPremiumStatusUpdated=e=>({type:t.PREMIUM_STATUS_UPDATED,premiumStatus:e});t.localSettingsNodePremiumStatusUpdated=e=>({type:t.NODE_PREMIUM_STATUS_UPDATED,nodePremiumStatus:e});t.localSettingsSubscriptionInformationStatusUpdated=e=>({type:t.SUBSCRIPTION_INFORMATION_UPDATED,subscriptionInformation:e});t.webOnboardingModeReset=()=>({type:t.WEB_ONBOARDING_MODE_RESET});t.webOnboardingModeUpdated=e=>({type:t.WEB_ONBOARDING_MODE_UPDATED,webOnboardingMode:e});t.migrationOnboardingUpdated=e=>({type:t.MIGRATION_ONBOARDING_UPDATED,migrationOnboardingStep:e});t.premiumChurningDismissDateUpdated=e=>({type:t.PREMIUM_CHURNING_DISMISS_DATE_UPDATED,premiumChurningDismissDate:e});t.credentialSearchOrderUpdated=e=>({type:t.CREDENTIAL_SEARCH_ORDER_UPDATED,credentialSearchOrder:e})},73472:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyLocalSettings=t.getEmptyOnboardingMode=t.getEmptyLoginStepInfo=void 0;const o=r(16516),n=r(33831),i=r(35924),a=r(76089),s=r(65210),c=r(43739);function u(){return{step:null,login:"",validated:!1}}t.getEmptyLoginStepInfo=u;const d=(e,t)=>[n.LoginStep.Password,n.LoginStep.OTPToken].includes(t)?t:e.step,l=(e,t)=>t===n.LoginStep.OTPToken?Boolean(e.login):![n.LoginStep.OTP1,n.LoginStep.OTP2].includes(t)&&e.validated,p=(e,t)=>Object.entries(t).every((([t,r])=>e?.[t]===r));t.default=(e=S(),r)=>{switch(r.type){case a.LOAD_STORED_LOCAL_SETTINGS:{const t=S();return{...t,...e,...r.data,webOnboardingMode:{...t.webOnboardingMode,...e.webOnboardingMode,...r.data.webOnboardingMode,completedSteps:{...t.webOnboardingMode.completedSteps,...e.webOnboardingMode.completedSteps,...r.data.webOnboardingMode.completedSteps}}}}case c.DEVICE_REGISTERED:return"uki"===r.registrationType.type?{...e,uki:r.registrationType.uki}:e;case a.REGISTER_LAST_SYNC:return Object.assign({},e,{lastSync:r.lastSync});case a.REGISTER_DEVICE_NAME:return Object.assign({},e,{deviceName:r.deviceName});case a.PREMIUM_STATUS_UPDATED:return Object.assign({},e,{premiumStatus:r.premiumStatus});case a.NODE_PREMIUM_STATUS_UPDATED:return Object.assign({},e,{nodePremiumStatus:r.nodePremiumStatus});case a.SUBSCRIPTION_INFORMATION_UPDATED:return Object.assign({},e,{subscriptionInformation:r.subscriptionInformation});case a.WEB_ONBOARDING_MODE_UPDATED:{const t=(0,o.mergeDeepRight)(S(),e);return(0,o.mergeDeepRight)(t,{webOnboardingMode:r.webOnboardingMode})}case a.WEB_ONBOARDING_MODE_RESET:return Object.assign({},e,{webOnboardingMode:(0,t.getEmptyOnboardingMode)()});case a.MIGRATION_ONBOARDING_UPDATED:return Object.assign({},e,{migrationOnboarding:{type:"Known",value:r.migrationOnboardingStep}});case a.PREMIUM_CHURNING_DISMISS_DATE_UPDATED:return Object.assign({},e,{premiumChurningDismissDate:r.premiumChurningDismissDate});case a.CREDENTIAL_SEARCH_ORDER_UPDATED:return Object.assign({},e,{credentialSearchOrder:r.credentialSearchOrder});case s.USER_MESSAGE_ADDED:return Object.assign({},e,{userMessages:[...e.userMessages,r.userMessage]});case s.USER_MESSAGES_DISMISSED:return Object.assign({},e,{userMessages:e.userMessages.some((e=>p(e,r.predicate)))?e.userMessages.map((e=>p(e,r.predicate)?{...e,dismissedAt:Date.now()}:e)):[...e.userMessages,{...r.predicate,dismissedAt:Date.now()}]});case i.UPDATE_LOGIN_STEP_INFO_LOGIN:return Object.assign({},e,{loginStepInfo:{...e.loginStepInfo,login:r.login}});case i.UPDATE_LOGIN_STEP_INFO_STEP:return Object.assign({},e,{loginStepInfo:{...e.loginStepInfo,step:d(e.loginStepInfo,r.step),validated:l(e.loginStepInfo,r.step)}});case i.RESET_LOGIN_STEP_INFO:return Object.assign({},e,{loginStepInfo:{step:null,login:"",validated:!1}});default:return e}};function S(){return{uki:null,lastSync:0,premiumStatus:null,nodePremiumStatus:null,subscriptionInformation:null,deviceName:null,migrationOnboarding:{type:"Unknown"},webOnboardingMode:(0,t.getEmptyOnboardingMode)(),premiumChurningDismissDate:null,credentialSearchOrder:null,userMessages:[],loginStepInfo:{step:null,login:"",validated:!1}}}t.getEmptyOnboardingMode=()=>({flowCredentialInApp:!1,flowLoginCredentialOnWeb:!1,flowLoginCredentialOnWebSite:null,flowSaveCredentialOnWeb:!1,flowImportPasswords:!1,flowAddMobileOnWeb:!1,flowTryAutofillOnWeb:!1,leelooStep:null,popoverStep:null,completedSteps:{saveCredentialInApp:!1,loginCredentialOnWeb:!1,saveCredentialOnWeb:!1,importPasswordsShown:!1,onboardingHubShown:!1,addMobileOnWeb:!1,tryAutofillOnWeb:!1}}),t.getEmptyLocalSettings=S},73299:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deviceNameSelector=void 0;t.deviceNameSelector=e=>e.userSession.localSettings.deviceName},34287:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadNotificationsStatus=t.markAsInteracted=t.markAsUnseen=t.markAsSeen=t.LOAD_NOTIFICATIONS_STATE=t.MARK_AS_INTERACTED=t.MARK_AS_UNSEEN=t.MARK_AS_SEEN=void 0,t.MARK_AS_SEEN="MarkAsSeen",t.MARK_AS_UNSEEN="MarkAsUnseen",t.MARK_AS_INTERACTED="MarkAsInteracted",t.LOAD_NOTIFICATIONS_STATE="LoadNotificationsState";t.markAsSeen=e=>({type:t.MARK_AS_SEEN,notification:e});t.markAsUnseen=e=>({type:t.MARK_AS_UNSEEN,notification:e});t.markAsInteracted=e=>({type:t.MARK_AS_INTERACTED,notification:e});t.loadNotificationsStatus=e=>({type:t.LOAD_NOTIFICATIONS_STATE,state:e})},98496:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyNotificationsState=void 0;const o=r(34287),n=r(82028),i={paymentFailureChurned:n.NotificationStatus.Unseen,paymentFailureChurning:n.NotificationStatus.Unseen,idsPromotion:n.NotificationStatus.Unseen,switchToMlAnalysisEngine:n.NotificationStatus.Unseen,dWMb2bAutoEnrollTooltip:n.NotificationStatus.Unseen,vpnProviderIsNowHotspot:n.NotificationStatus.Unseen,vpnHostpotshieldInstalled:n.NotificationStatus.Unseen,popupIncomingTabPayments:n.NotificationStatus.Unseen,popupIncomingTabPersonalInfo:n.NotificationStatus.Unseen,popupIncomingTabIDs:n.NotificationStatus.Unseen,popupIncomingTabSecureNotes:n.NotificationStatus.Unseen,newAccountMenuTooltip:n.NotificationStatus.Unseen,tacGetTheExtensionBanner:n.NotificationStatus.Unseen,tacEnableAccountRecoveryBanner:n.NotificationStatus.Unseen,tacOnlyOneAdminBanner:n.NotificationStatus.Unseen,tacDarkWebInsightsNewBadge:n.NotificationStatus.Unseen,passwordHistoryBanner:n.NotificationStatus.Unseen,sharingCenterDisabledBanner:n.NotificationStatus.Unseen,multiselectGuideDelete:n.NotificationStatus.Unseen,multiselectGuideShift:n.NotificationStatus.Unseen,accountRecoveryAvailableAdminTooltip:n.NotificationStatus.Unseen,accountRecoveryAvailableEmployeeDialog:n.NotificationStatus.Unseen,activateInviteLink:n.NotificationStatus.Unseen};function a(){return i}t.getEmptyNotificationsState=a,t.default=(e=a(),t)=>{switch(t.type){case o.MARK_AS_INTERACTED:return{...e,[t.notification]:n.NotificationStatus.Interacted};case o.MARK_AS_SEEN:return{...e,[t.notification]:n.NotificationStatus.Seen};case o.MARK_AS_UNSEEN:return{...e,[t.notification]:n.NotificationStatus.Unseen};case o.LOAD_NOTIFICATIONS_STATE:return{...e,...t.state};default:return e}}},26972:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notificationsStatus$=void 0;const o=r(18948),n=r(3343),i=r(56857);t.notificationsStatus$=function(){const e=i.notificationsStatusSelector;return(0,o.pipe)((0,n.map)(e),(0,n.distinctUntilChanged)())}},56857:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notificationsStatusSelector=void 0;t.notificationsStatusSelector=e=>e.userSession.notificationsStatus},95944:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.receivedInvoiceList=t.RECEIVED_INVOICE_LIST=void 0,t.RECEIVED_INVOICE_LIST="RECEIVED_USER_LIST";t.receivedInvoiceList=e=>({type:t.RECEIVED_INVOICE_LIST,invoicesList:e})},70325:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyPaymentsState=void 0;const o=r(95944);function n(){return{invoicesList:[]}}t.getEmptyPaymentsState=n,t.default=(e={invoicesList:[]},t)=>t.type===o.RECEIVED_INVOICE_LIST?{...e,invoicesList:t.invoicesList}:e},30467:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.viewedQueriedInvoicesSelector=t.searchGetters=t.invoiceMappersSelector=t.invoiceListYearsSelector=t.allInvoicesLengthSelector=t.allInvoicesSelector=void 0;const o=r(25424),n=r(24589),i=r(64455),a=r(82234),s=r(98584);t.allInvoicesSelector=e=>e.userSession.paymentsState.invoicesList;t.allInvoicesLengthSelector=e=>e.userSession.paymentsState.invoicesList.length;t.invoiceListYearsSelector=e=>{const t=e.userSession.paymentsState.invoicesList;if(t.length){const e=t.map((e=>(0,o.fromUnixTime)(e.startDate).getFullYear().toString()));return[...new Set(e)]}return[]};t.invoiceMappersSelector=e=>(0,s.getInvoiceMappers)(),t.searchGetters=[(0,a.stringProp)("amountPaid"),(0,a.stringProp)("planName"),(0,a.stringProp)("startDate"),(0,a.stringProp)("invoiceId"),(0,a.stringProp)("startYear")];const c=(0,i.match)(t.searchGetters),u=(0,n.getQuerySelector)(t.allInvoicesSelector,(()=>c),t.invoiceMappersSelector);t.viewedQueriedInvoicesSelector=(e,t)=>u(e,t)},45291:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateBreachesUpdaterStatus=t.teamSpaceContentControlApplied=t.storeChangesToUpload=t.breachesUpdated=t.updateLastBackupTime=t.removePersonalItem=t.saveNoteCategory=t.saveCredentialCategory=t.saveGeneratedPassword=t.savePaymentCard=t.unscheduleRemainingChanges=t.clearUploadedChanges=t.scheduleChangesForSync=t.loadStoredPersonalData=t.UNSCHEDULE_REMAINING_CHANGES=t.CLEAR_UPLOADED_CHANGES=t.SCHEDULE_CHANGES_FOR_SYNC=t.UPDATE_BREACHES_UPDATER_STATUS=t.TEAMSPACE_CONTENT_CONTROLLED=t.STORE_CHANGES_TO_UPLOAD=t.BREACHES_UPDATED=t.UPDATE_LAST_BACKUP_TIME=t.REMOVE_PERSONAL_ITEM=t.SAVE_PAYMENT_CARD=t.SAVE_NOTE_CATEGORY=t.SAVE_CREDENTIAL_CATEGORY=t.SAVE_PERSONAL_ITEMS=t.SAVE_PERSONAL_ITEM=t.SAVE_GENERATED_PASSWORD=t.LOAD_STORED_PERSONAL_DATA=void 0,t.LOAD_STORED_PERSONAL_DATA="PERSONAL_DATA/LOAD_STORED_PERSONAL_DATA",t.SAVE_GENERATED_PASSWORD="PERSONAL_DATA/SAVE_GENERATED_PASSWORD",t.SAVE_PERSONAL_ITEM="PERSONAL_DATA/SAVE_PERSONAL_ITEM",t.SAVE_PERSONAL_ITEMS="PERSONAL_DATA/SAVE_PERSONAL_ITEMS",t.SAVE_CREDENTIAL_CATEGORY="SAVE_CREDENTIAL_CATEGORY",t.SAVE_NOTE_CATEGORY="SAVE_NOTE_CATEGORY",t.SAVE_PAYMENT_CARD="SAVE_PAYMENT_CARD",t.REMOVE_PERSONAL_ITEM="REMOVE_PERSONAL_ITEM",t.UPDATE_LAST_BACKUP_TIME="UPDATE_LAST_BACKUP_TIME",t.BREACHES_UPDATED="BREACHES_UPDATED",t.STORE_CHANGES_TO_UPLOAD="STORE_CHANGES_TO_UPLOAD",t.TEAMSPACE_CONTENT_CONTROLLED="TEAMSPACE_CONTENT_CONTROLLED",t.UPDATE_BREACHES_UPDATER_STATUS="UPDATE_BREACHES_UPDATER_STATUS",t.SCHEDULE_CHANGES_FOR_SYNC="SCHEDULE_CHANGES_FOR_SYNC",t.CLEAR_UPLOADED_CHANGES="CLEAR_UPLOADED_CHANGES",t.UNSCHEDULE_REMAINING_CHANGES="UNSCHEDULE_REMAINING_CHANGES";t.loadStoredPersonalData=e=>({type:t.LOAD_STORED_PERSONAL_DATA,data:Object.assign({},e)});t.scheduleChangesForSync=()=>({type:t.SCHEDULE_CHANGES_FOR_SYNC});t.clearUploadedChanges=e=>({type:t.CLEAR_UPLOADED_CHANGES,uploadedItemIds:e});t.unscheduleRemainingChanges=()=>({type:t.UNSCHEDULE_REMAINING_CHANGES}),t.savePaymentCard=function(e){return{type:t.SAVE_PAYMENT_CARD,paymentCard:e}},t.saveGeneratedPassword=function(e){return{type:t.SAVE_GENERATED_PASSWORD,generatedPassword:e}},t.saveCredentialCategory=function(e){return{type:t.SAVE_CREDENTIAL_CATEGORY,credentialCategory:e}},t.saveNoteCategory=function(e){return{type:t.SAVE_NOTE_CATEGORY,noteCategory:e}},t.removePersonalItem=function(e,r,o){return{type:t.REMOVE_PERSONAL_ITEM,kwType:e,itemId:r,changeHistory:o}},t.updateLastBackupTime=function(e,r){return{type:t.UPDATE_LAST_BACKUP_TIME,transactions:e,backupTimeSec:r}},t.breachesUpdated=function(e,r,o){return{type:t.BREACHES_UPDATED,changes:e,revision:r,dataLeaksRefreshDate:o}},t.storeChangesToUpload=function(e){return{type:t.STORE_CHANGES_TO_UPLOAD,changesToUpload:e}},t.teamSpaceContentControlApplied=function(e,r,o){return{type:t.TEAMSPACE_CONTENT_CONTROLLED,updates:e,deletions:r,changeHistories:o}};t.updateBreachesUpdaterStatus=e=>({type:t.UPDATE_BREACHES_UPDATER_STATUS,breachesUpdaterStatus:e})},84977:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PERSONAL_DATA_COLLECTIONS_KEYS=t.DATAMODELOBJECT_TYPE_TO_STORE_KEY=void 0,t.DATAMODELOBJECT_TYPE_TO_STORE_KEY={KWAddress:"addresses",KWAuthCategory:"credentialCategories",KWAuthentifiant:"credentials",KWBankStatement:"bankAccounts",KWCollection:"collections",KWCompany:"companies",KWDataChangeHistory:"changeHistories",KWDriverLicence:"driverLicenses",KWEmail:"emails",KWFiscalStatement:"fiscalIds",KWGeneratedPassword:"generatedPasswords",KWIDCard:"idCards",KWIdentity:"identities",KWPasskey:"passkeys",KWPassport:"passports",KWPaymentMean_creditCard:"paymentCards",KWPaymentMean_paypal:"paypalAccounts",KWPersonalWebsite:"personalWebsites",KWPhone:"phones",KWSecureNote:"notes",KWSecureNoteCategory:"noteCategories",KWSecurityBreach:"securityBreaches",KWSocialSecurityStatement:"socialSecurityIds",KWSecureFileInfo:"secureFileInfo"},t.default=t.DATAMODELOBJECT_TYPE_TO_STORE_KEY,t.PERSONAL_DATA_COLLECTIONS_KEYS=Object.keys(t.DATAMODELOBJECT_TYPE_TO_STORE_KEY).map((e=>t.DATAMODELOBJECT_TYPE_TO_STORE_KEY[e]))},1347:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.countPersonalDataItems=t.getEmptyBreachesMetadata=t.getLegacyEmptyBreaches=t.saveChangesToUpload=t.breachesUpdated=t.updateCredential=t.updateCredentials=t.updateLastBackupTime=t.saveObjects=t.saveNoteCategory=t.saveCredentialCategory=t.saveGeneratedPassword=t.savePersonalDataItems=t.savePersonalDataItem=t.savePaymentCard=t.removePersonalItem=t.teamSpaceContentControlApplied=t.savePersonalSettings=t.removePersonalItemFromTransaction=t.addPersonalItemFromTransaction=t.getEmptyPersonalDataState=void 0;const o=r(16516),n=r(53576),i=r(84977),a=r(53628),s=r(45291),c=r(48313),u=r(77163),d=r(27517),l=r(95377),p=r(51064),S=r(62210);function g(){return{addresses:[],bankAccounts:[],changesToUpload:[],changeHistories:[],collections:[],companies:[],credentialCategories:[],credentials:[],driverLicenses:[],emails:[],fiscalIds:[],generatedPasswords:[],idCards:[],identities:[],noteCategories:[],notes:[],passkeys:[],passports:[],paymentCards:[],paypalAccounts:[],personalWebsites:[],phones:[],securityBreaches:[],securityBreachesMetadata:(0,t.getEmptyBreachesMetadata)(),socialSecurityIds:[],breachesUpdaterStatus:l.BreachesUpdaterStatus.UNKNOWN,secureFileInfo:[]}}t.default=(e=g(),t,r)=>{switch(t.type){case s.LOAD_STORED_PERSONAL_DATA:return{...e,...(0,a.fixPersistedPersonalData)(t.data)};case c.ADD_PERSONAL_ITEM_FROM_TRANSACTION:return y(e,t);case c.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION:return _(e,t);case s.REMOVE_PERSONAL_ITEM:return h(e,t);case s.SAVE_PAYMENT_CARD:return D(e,t);case s.SAVE_PERSONAL_ITEM:return O(e,t,r);case s.SAVE_PERSONAL_ITEMS:return P(e,t,r);case s.SAVE_GENERATED_PASSWORD:return I(e,t,r);case s.SAVE_CREDENTIAL_CATEGORY:return C(e,t);case s.SAVE_NOTE_CATEGORY:return R(e,t);case s.CLEAR_UPLOADED_CHANGES:return m(e,t);case s.SCHEDULE_CHANGES_FOR_SYNC:return A(e,t);case s.UNSCHEDULE_REMAINING_CHANGES:return T(e,t);case d.PersonalSettingsActionType.Edit:return v(e);case s.UPDATE_LAST_BACKUP_TIME:return L(e,t);case s.BREACHES_UPDATED:return N(e,t);case s.STORE_CHANGES_TO_UPLOAD:return U(e,t);case s.TEAMSPACE_CONTENT_CONTROLLED:return f(e,t);case s.UPDATE_BREACHES_UPDATER_STATUS:return{...e,breachesUpdaterStatus:t.breachesUpdaterStatus};default:return e}},t.getEmptyPersonalDataState=g;const E=(e,t)=>!e||!t||!i.default.hasOwnProperty(t.kwType);function y(e,t){if(E(t.itemId,t.content))return e;const r=i.default[t.content.kwType],o=(0,a.fixPersonalDataItemFromExternalSource)(t.content,t.itemId);return{...e,[r]:w(e[r],o)}}function _(e,t){return t.itemId?t.content?K(e,[t.itemId],t.content.kwType):K(e,[t.itemId]):e}t.addPersonalItemFromTransaction=y,t.removePersonalItemFromTransaction=_;const A=(e,t)=>({...e,changesToUpload:e.changesToUpload.map(S.markChangeAsScheduled)}),m=(e,t)=>({...e,changesToUpload:(0,S.filterOutUploadedChanges)(e.changesToUpload,t.uploadedItemIds)}),T=(e,t)=>({...e,changesToUpload:e.changesToUpload.map(S.markChangeAsReadyForNextSync)});function v(e){if(e.changesToUpload.find((e=>"KWSettingsManagerApp"===e.kwType)))return e;const t=(0,p.createUploadChange)({itemId:"SETTINGS_userId",kwType:"KWSettingsManagerApp",action:"EDIT"});return{...e,changesToUpload:[...e.changesToUpload,t]}}function f(e,t){const{updates:r,deletions:o,changeHistories:n}=t,a=r.reduce(((e,t)=>{const{kwType:r}=t,o=i.default[r];return o?{...e,[o]:w(e[o]||[],t)}:e}),e),s=r.map(p.createUploadChangeForItem),c=Object.keys(o).reduce(((e,t)=>K(e,o[t],t)),a),u=Object.keys(o).reduce(((e,t)=>e.concat(o[t].map((0,p.createUploadChangeForDeletion)(t)))),[]),d=M(e.changeHistories,n),l=[...s,...u,...n.map(p.createUploadChangeForItem)];return{...c,changesToUpload:k(e.changesToUpload,l),changeHistories:d}}function h(e,t){const{changeHistory:r,kwType:o,itemId:n}=t,i=K(e,[n],o),a=[(0,p.createUploadChangeForDeletion)(o)(n),...r?[(0,p.createUploadChangeForItem)(r)]:[]],s=r?{changeHistories:w(e.changeHistories,r)}:{};return{...i,changesToUpload:k(i.changesToUpload,a),...s}}function D(e,{paymentCard:t}){return{...e,changesToUpload:k(e.changesToUpload,(0,p.createUploadChangeForItem)(t)),paymentCards:w(e.paymentCards,t)}}function O(e,{dataType:t,dataModelObject:r,changeHistory:o},n){const i=(0,u.associateTeamSpaceId)(r,n.spaces,e.credentials),a=o?{changeHistories:w(e.changeHistories,o)}:{},s=o?[(0,p.createUploadChangeForItem)(o)]:[],c=[(0,p.createUploadChangeForItem)(r),...s];return{...e,changesToUpload:k(e.changesToUpload,c),[t]:w(e[t],i),...a}}function P(e,{dataType:t,dataModelObjects:r,changeHistory:o},n){const i=r.map((t=>(0,u.associateTeamSpaceId)(t,n.spaces,e.credentials))),a=[...r.map(p.createUploadChangeForItem),...o.map(p.createUploadChangeForItem)];return{...e,changesToUpload:k(e.changesToUpload,a),[t]:M(e[t],i),changeHistories:M(e.changeHistories,o)}}function I(e,{generatedPassword:t},r){const o=(0,u.associateTeamSpaceId)(t,r.spaces,e.credentials);return{...e,changesToUpload:k(e.changesToUpload,(0,p.createUploadChangeForItem)(t)),generatedPasswords:w(e.generatedPasswords,o)}}function C(e,{credentialCategory:t}){return{...e,changesToUpload:k(e.changesToUpload,(0,p.createUploadChangeForItem)(t)),credentialCategories:w(e.credentialCategories,t)}}function R(e,{noteCategory:t}){return{...e,changesToUpload:k(e.changesToUpload,(0,p.createUploadChangeForItem)(t)),noteCategories:w(e.noteCategories,t)}}function L(e,{transactions:t,backupTimeSec:r}){return Object.keys(e).reduce(((o,n)=>(Array.isArray(e[n])&&(o[n]=function(e,t,r){const o=e.filter((e=>t.includes(e.Id))).map((e=>Object.assign(e,{LastBackupTime:r})));return e.filter((e=>!t.includes(e.Id))).concat(o)}(e[n],t,r)),o)),e)}function b(e,t){const{credentials:r}=e,o=w(r,t);return{...e,credentials:o}}function N(e,t){const{changes:{updates:r,deletions:o}}=t,i=n.DataModelType.KWSecurityBreach,a=K(e,o,i),s=r.map(p.createUploadChangeForItem),c=o.map((0,p.createUploadChangeForDeletion)(i)),u=k(a.changesToUpload,[...s,...c]),d=M(a.securityBreaches,r),l=void 0!==t.dataLeaksRefreshDate?t.dataLeaksRefreshDate:a.securityBreachesMetadata.latestDataLeaksBreachesUpdate;return{...a,securityBreaches:d,securityBreachesMetadata:{latestPublicBreachesRevision:t.revision,latestDataLeaksBreachesUpdate:l},changesToUpload:u}}function U(e,{changesToUpload:t}){return{...e,changesToUpload:k(e.changesToUpload,t)}}function w(e,t){const r=function(e,t){return e.filter((e=>e.Id!==t))}(e,t.Id);return r.concat(t)}function M(e,t){return[...F(e,t.map((e=>e.Id))),...t]}function k(e,t){const r=(t=Array.isArray(t)?t:[t]).concat(e||[]);return(0,o.uniqBy)((0,o.prop)("itemId"),r)}function F(e,t){return e.filter((e=>!t.includes(e.Id)))}function K(e,t,r){if(r&&i.default[r]){const o=i.default[r];return{...e,[o]:e[o]&&F(e[o],t)}}return i.PERSONAL_DATA_COLLECTIONS_KEYS.reduce(((r,o)=>{if(!(o in e))return r;const n=F(e[o],t);return{...r,[o]:n}}),e)}t.savePersonalSettings=v,t.teamSpaceContentControlApplied=f,t.removePersonalItem=h,t.savePaymentCard=D,t.savePersonalDataItem=O,t.savePersonalDataItems=P,t.saveGeneratedPassword=I,t.saveCredentialCategory=C,t.saveNoteCategory=R,t.saveObjects=function(e,t){return(0,o.reduce)(((e,t)=>{const r=i.default[t.kwType];return r&&(e[r]=e[r].concat(t)),e}),{...e},t)},t.updateLastBackupTime=L,t.updateCredentials=function(e,t){return t.reduce(((e,t)=>b(e,t)),e)},t.updateCredential=b,t.breachesUpdated=N,t.saveChangesToUpload=U;t.getLegacyEmptyBreaches=()=>({revision:0,breaches:[]});t.getEmptyBreachesMetadata=()=>({latestPublicBreachesRevision:0,latestDataLeaksBreachesUpdate:0});t.countPersonalDataItems=e=>Object.keys(i.default).reduce(((t,r)=>t+e[i.default[r]].length),0)},30641:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(16516),n=r(53576),i=r(49901);t.default=function(e){const t=(0,o.isNil)(e.LocaleFormat)?n.Country.UNIVERSAL:e.LocaleFormat,r=(0,o.isNil)(e.SpaceId)?i.PERSONAL_SPACE_ID:e.SpaceId;return{...e,LocaleFormat:t,SpaceId:r}}},63985:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fixPasskeyTypesFromTransaction=t.fixBreachTypesFromStore=t.fixBreachTypesFromTransaction=t.fixCommonPropertiesTypes=t.fixGeneratedPasswordsTypes=t.fixCredentialTypesFromStore=t.fixNoteTypesFromStore=t.fixAttachmentProperties=t.fixNoteTypesFromTransaction=t.fixAllStringObject=t.fixLinkedServicesTypes=t.fixDomainIconTypes=t.fixTrustedUrlTypes=t.fixCredentialTypesFromTransaction=void 0;const o=r(6093),n=["CreationDatetime","LastBackupTime","UserModificationDatetime"],i=["Id","AnonId","SpaceId"];function a(e){return(0,o.fixPropertiesTypes)([],[],[],["TrustedUrl","TrustedUrlExpire"],e)}function s(e){const{urls:t,...r}=(0,o.fixPropertiesTypes)([],[],[],["backgroundColor","mainColor"],e);return{...r,urls:"object"==typeof t&&null!==t?d(t):{}}}function c(e){const t=Array.isArray(e.associated_domains)?e.associated_domains.map(u):[];return{...e,associated_domains:t}}function u(e){return(0,o.fixPropertiesTypes)([],[],[],["domain","source"],e)}function d(e){const t=Object.keys(e);return(0,o.fixPropertiesTypes)([],[],[],t,e)}function l(e){return(0,o.fixPropertiesTypes)([],["version","localSize","remoteSize","creationDatetime","userModificationDatetime"],[],["id","type","filename","downloadKey","cryptoKey","owner"],e)}t.fixCredentialTypesFromTransaction=function(e){const t=["LastUse","ModificationDatetime","NumberUse","Strength"].concat(n),r=["Alias","Category","ConnectionOptions","Email","Login","Note","OtpSecret","OtpUrl","Password","Port","SID","SecondaryLogin","Server","Title","Url","UserSelectedUrl"].concat(i),{TrustedUrlGroup:u,Attachments:d,LinkedServices:p,domainIcon:S,...g}=(0,o.fixPropertiesTypes)(["AutoLogin","AutoProtected","Checked","SharedObject","SubdomainOnly","UseFixedUrl","limitedPermissions"],t,["Attachments","LinkedServices"],r,e),E=Array.isArray(d)?{Attachments:d.map(l)}:{},y="object"==typeof S&&null!==S?{domainIcon:s(S)}:{};return{...g,...E,...p?{LinkedServices:c(p)}:{},...y,TrustedUrlGroup:u&&u.length>0?u.map(a):[]}},t.fixTrustedUrlTypes=a,t.fixDomainIconTypes=s,t.fixLinkedServicesTypes=c,t.fixAllStringObject=d,t.fixNoteTypesFromTransaction=function(e){const t=["CreationDate","UpdateDate"].concat(n),r=["Title","Content","Category"].concat(i),{Attachments:a,Type:s,...c}=(0,o.fixPropertiesTypes)(["Secured"],t,["Attachments"],r,e);return{...c,...Array.isArray(a)?{Attachments:a.map(l)}:{},Type:s||"GRAY"}},t.fixAttachmentProperties=l,t.fixNoteTypesFromStore=function(e){const t={};return["Attachments"].filter((t=>!!e[t])).forEach((r=>{t[r]=JSON.stringify(e[r])})),Object.assign({},e,t)},t.fixCredentialTypesFromStore=function(e){const t={};return["Attachments","LinkedServices"].filter((t=>!!e[t])).forEach((r=>{t[r]=JSON.stringify(e[r])})),Object.assign({},e,t)},t.fixGeneratedPasswordsTypes=function(e){const t=["GeneratedDate"].concat(n);return(0,o.fixPropertiesTypes)([],t,[],[],e)},t.fixCommonPropertiesTypes=function(e){return(0,o.fixPropertiesTypes)([],n,[],[],e)},t.fixBreachTypesFromTransaction=function(e){const t=[...n,"ContentRevision"],r=[...i,"AnonId","BreachId","Status"],a=(0,o.fixPropertiesTypes)([],t,["Content","LeakedPasswords"],r,e);return Array.isArray(a.LeakedPasswords)||(a.LeakedPasswords=[]),a},t.fixBreachTypesFromStore=function(e){const t={};return["Content","LeakedPasswords"].filter((t=>!!e[t])).forEach((r=>{t[r]=JSON.stringify(e[r])})),Array.isArray(e.LeakedPasswords)||(t.LeakedPasswords=JSON.stringify([])),{...e,...t}},t.fixPasskeyTypesFromTransaction=function(e){const t=[...n,"Counter","KeyAlgorithm"],r=[...i,"CredentialId","RpId","RpName","UserDisplayName","UserHandle"];return(0,o.fixPropertiesTypes)([],t,["PrivateKey"],r,e)}},53628:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fixPersistedPersonalData=t.fixPersonalDataItemFromExternalSource=void 0;const o=r(16516),n=r(53576),i=r(63985),a=r(30641),s=r(86715),c=[{key:"credentials",isData:n.isCredential,fixData:e=>(0,i.fixCredentialTypesFromTransaction)(e),addDefaultValues:e=>(0,a.default)(e)},{key:"notes",isData:n.isNote,fixData:e=>(0,i.fixNoteTypesFromTransaction)(e),addDefaultValues:e=>(0,a.default)(e)},{key:"generatedPasswords",isData:n.isGeneratedPassword,fixData:e=>(0,i.fixGeneratedPasswordsTypes)(e),addDefaultValues:e=>e},{key:"securityBreaches",isData:s.isBreach,fixData:e=>(0,i.fixBreachTypesFromTransaction)(e),addDefaultValues:e=>e},{key:"passkeys",isData:n.isPasskey,fixData:e=>(0,i.fixPasskeyTypesFromTransaction)(e),addDefaultValues:e=>e}];t.fixPersonalDataItemFromExternalSource=function(e,t){const r=function(e,t){return t?{...e,Id:t}:e}(e,t),o=c.find((e=>e.isData(r)));return o?d(o,r):(0,i.fixCommonPropertiesTypes)(r)};const u=["breaches","versionedBreaches"];function d(e,t){return e.addDefaultValues(e.fixData(t))}t.fixPersistedPersonalData=function(e){const t={};c.forEach((r=>{const o=e[r.key];if(!o)return;const n=o.map((e=>d(r,e)));t[r.key]=n}));const r=(t.credentials??[]).filter((e=>!!e.Id));return{...(0,o.omit)(u,e),...t,credentials:r}}},27517:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.editPersonalSettings=t.loadStoredPersonalSettings=t.PersonalSettingsActionType=t.TOGGLE_DASHLANE_ON_SITE=t.TOGGLE_DASHLANE_ON_PAGE=void 0,t.TOGGLE_DASHLANE_ON_PAGE="TOGGLE_DASHLANE_ON_PAGE",t.TOGGLE_DASHLANE_ON_SITE="TOGGLE_DASHLANE_ON_SITE",function(e){e.Edit="EDIT_PERSONAL_SETTINGS",e.EditFromTransaction="EDIT_PERSONAL_SETTINGS_FROM_TRANSACTION",e.LoadFromStorage="LOAD_PERSONAL_SETTINGS_FROM_STORAGE"}(r=t.PersonalSettingsActionType||(t.PersonalSettingsActionType={}));t.loadStoredPersonalSettings=e=>({type:r.LoadFromStorage,data:Object.assign({},e)});t.editPersonalSettings=e=>({type:r.Edit,content:Object.assign({},e)})},51104:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fixPersonalSettingTypes=void 0;const o=r(16516),n=r(6093),i={GeneratorDefaultAvoidAmbiguousChars:"boolean",GeneratorDefaultDigits:"boolean",GeneratorDefaultLetters:"boolean",GeneratorDefaultMixedCase:"boolean",GeneratorDefaultPronounceable:"boolean",GeneratorDefaultSymbols:"boolean",RecoveryOptIn:"boolean",ProtectPasswords:"boolean",ProtectPayments:"boolean",ProtectIDs:"boolean",SecuredDataShowScreenshots:"yes-no",SecuredDataShowPassword:"yes-no",SecuredDataShowIDs:"yes-no",SecuredDataShowCreditcard:"yes-no",SecuredDataAutofillCreditcard:"yes-no",SyncBackup:"yes-no",SyncBackupPurchase:"yes-no",SyncBackupPersonaldata:"yes-no",SyncBackupPasswords:"yes-no",SyncBackupCreditCardsNumber:"yes-no",SyncBackupCreditCardsCCV:"yes-no"},a={GeneratorDefaultSize:"number",accountCreationDatetime:"number"},s={SpaceAnonIds:"json",AutofillSettings:"json"},c=(0,o.curry)(n.fixProperties.fromTransaction)(i,a,s),u=(0,o.curry)(n.fixProperties.fromStore)(i,a,s);t.fixPersonalSettingTypes={fromTransaction:c,fromStore:u}},95648:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getWebsiteInfo=t.getUpdatedPersonalSettings=t.getEmptyPersonalSettings=t.makeBasePersonalSettings=void 0;const o=r(16516),n=r(27517),i=r(51104),a=r(11814),s=r(92210),c=r(51504),u=r(16593);function d(){return{AccountRecoveryKey:null,AccountRecoveryKeyId:null,DisabledDomainsList:[],DisabledUrlsList:[],DisabledDomainsAutologinList:[],DisabledUrlsAutologinList:[],SyncBackupCreditCardsCCV:null,SyncBackupCreditCardsNumber:null,SyncBackupPasswords:null,SyncBackupPersonaldata:null,SyncBackupPurchase:null,SecuredDataAutofillCreditcard:!0,SecuredDataShowCreditcard:!0,SecuredDataShowIDs:!0,SecuredDataShowPassword:!1,SecuredDataShowScreenshots:!0,ProtectPasswords:!1,ProtectPayments:!0,ProtectIDs:!1,CryptoUserPayload:null,...(0,t.makeBasePersonalSettings)()}}t.makeBasePersonalSettings=()=>({RealLogin:null,SecurityEmail:null,accountCreationDatetime:null,Format:null,Language:null,AnonymousUserId:null,UsagelogToken:null,SyncBackup:null,AutofillSettings:{isAutofillDisabled:!1,disabledSourceTypes:[],disabledDomains:[],isFollowUpNotificationEnabled:!0},SecuredDataAutofillCreditcard:!0,SecuredDataShowCreditcard:!0,SecuredDataShowIDs:!0,SecuredDataShowPassword:!1,SecuredDataShowScreenshots:!0,ProtectPasswords:!1,ProtectPayments:!0,ProtectIDs:!1,kwType:"KWSettingsManagerApp",Id:"SETTINGS_userId",LastBackupTime:null}),t.getEmptyPersonalSettings=d,t.default=(e=d(),t)=>{switch(t.type){case n.PersonalSettingsActionType.LoadFromStorage:return(0,o.mergeDeepRight)(e,i.fixPersonalSettingTypes.fromTransaction(t.data));case n.PersonalSettingsActionType.EditFromTransaction:return(0,o.mergeDeepRight)(e,i.fixPersonalSettingTypes.fromTransaction(t.content));case n.PersonalSettingsActionType.Edit:return(0,o.mergeDeepRight)(e,t.content);default:return e}},t.getUpdatedPersonalSettings=function(e,t){const r=d(),o=Object.keys(r);for(const e of o)t[e]||void 0===t[e]||(t[e]=r[e]);return{...e,...t}},t.getWebsiteInfo=function(e,t){const r=e.getState().userSession.personalFeatures.features[c.NEW_URL_PARSER_FF]||e.getState().userSession.personalFeatures.features[c.NEW_URL_PARSER_FF_PROD]?new s.ParsedURL(t).getRootDomain():a.url.getDomainForUrl(t),n=e.getPersonalSettings(),i=(0,u.spaceDisabledDomainsListSelector)(e.getState());return{disabledAutofillOnDomain:(0,o.contains)(r,n.DisabledDomainsList),disabledAutofillOnPage:(0,o.contains)(t,n.DisabledUrlsList),disabledAutologinOnDomain:(0,o.contains)(r,[...n.DisabledDomainsAutologinList,...i]),disabledAutologinOnPage:(0,o.contains)(t,n.DisabledUrlsAutologinList),disabledFromSpaces:!1}}},12995:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadedAnonymousComputerId=t.saveCurrentLocation=t.savePlatformInfo=t.LOAD_ANONYMOUS_APPLICATION_ID=t.SAVE_CURRENT_LOCATION=t.SAVE_PLATFORM_INFO=void 0,t.SAVE_PLATFORM_INFO="SAVE_PLATFORM_INFO",t.SAVE_CURRENT_LOCATION="SAVE_CURRENT_LOCATION",t.LOAD_ANONYMOUS_APPLICATION_ID="LOAD_ANONYMOUS_APPLICATION_ID";t.savePlatformInfo=e=>({type:t.SAVE_PLATFORM_INFO,info:e});t.saveCurrentLocation=e=>({type:t.SAVE_CURRENT_LOCATION,location:e});t.loadedAnonymousComputerId=e=>({type:t.LOAD_ANONYMOUS_APPLICATION_ID,anonymousApplicationId:e})},9149:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyPlatform=t.defaultPlatformInfo=void 0;const o=r(12995);t.default=(e=i(),r)=>{switch(r.type){case o.SAVE_PLATFORM_INFO:return{...e,info:(n=r.info,a=t.defaultPlatformInfo,{anonymousApplicationId:n.anonymousApplicationId||a.anonymousApplicationId,platformName:n.platformName||a.platformName,appVersion:n.appVersion||a.appVersion,browser:n.browser||a.browser,browserVersion:n.browserVersion||a.browserVersion,country:n.country||a.country,os:n.os||a.os,osCountry:n.osCountry||a.osCountry,osVersion:n.osVersion||a.osVersion,lang:n.lang||a.lang})};case o.SAVE_CURRENT_LOCATION:return{...e,location:r.location};case o.LOAD_ANONYMOUS_APPLICATION_ID:return{...e,info:{...e.info,anonymousApplicationId:r.anonymousApplicationId}};default:return e}var n,a};const n={country:null,isEu:!0};function i(){return{info:t.defaultPlatformInfo,location:n}}t.defaultPlatformInfo={anonymousApplicationId:"unknown_anonymous_application_id",platformName:"server_carbon_unknown",appVersion:"unknown_version",browser:"browser_carbon_unknown",browserVersion:"unknown_browser_version",country:"country_carbon_unknown",os:"os_carbon_unknown",osCountry:"os_country_carbon_unknown",osVersion:"unknown_os_version",lang:"lang_carbon_unknown"},t.getEmptyPlatform=i},95363:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetRecoverySessionData=t.saveRecoverySessionData=t.RESET_RECOVERY_SESSION_DATA=t.SAVE_RECOVERY_SESSION_DATA=void 0,t.SAVE_RECOVERY_SESSION_DATA="SAVE_RECOVERY_SESSION_DATA",t.RESET_RECOVERY_SESSION_DATA="RESET_RECOVERY_SESSION_DATA";t.saveRecoverySessionData=e=>({type:t.SAVE_RECOVERY_SESSION_DATA,data:e});t.resetRecoverySessionData=()=>({type:t.RESET_RECOVERY_SESSION_DATA})},13250:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyRecoveryState=void 0;const o=r(95363);t.getEmptyRecoveryState=()=>({recoveryUki:null,publicKey:null,userServerProtectedSymmetricalKey:null,recoveryServerKeyBase64:null,recoveryInProgress:!1,currentPassword:null,verificationMethod:null}),t.default=(e=(0,t.getEmptyRecoveryState)(),r)=>{switch(r.type){case o.SAVE_RECOVERY_SESSION_DATA:return{...e,...r.data};case o.RESET_RECOVERY_SESSION_DATA:return(0,t.getEmptyRecoveryState)();default:return e}}},4572:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userSessionReducer=t.userSessionRootReducer=void 0;const o=r(82422),n=r(16516),i=r(1678),a=r(70325),s=r(86797),c=r(12659),u=r(78663),d=r(11406),l=r(66403),p=r(4980),S=r(48005),g=r(73472),E=r(76089),y=r(1347),_=r(62942),A=r(95648),m=r(44899),T=r(4511),v=r(79619),f=r(58174),h=r(36738),D=r(4551),O=r(87399),P=r(79390),I=r(84827),C=r(63703),R=r(69795),L=r(97632),b=r(13250),N=r(39727),U=r(15868),w=r(19546),M=r(51554),k=r(48313),F=r(45291),K=r(98496),B=r(29737),G=r(38271),j=r(24827),V=r(36784),W=r(13042);t.userSessionRootReducer=(e,t)=>{switch(t.type){case k.CLOSE_SESSION:return;case k.LOCAL_SETTINGS_UPDATED:const r=t.data;return Object.assign({},e,{localSettings:(0,g.default)(e.localSettings,(0,E.loadStoredLocalSettings)(r)),spaceData:(0,v.default)(e.spaceData,(0,h.spacesUpdated)(r.premiumStatus.spaces))});case k.PREMIUM_STATUS_UPDATED:const o=t.premiumStatus;return Object.assign({},e,{localSettings:(0,g.default)(e.localSettings,(0,E.localSettingsPremiumStatusUpdated)(o)),spaceData:(0,v.default)(e.spaceData,(0,h.spacesUpdated)(o.spaces))});default:return e}};const H=(e,t)=>{switch(t.type){case k.SAVE_GENERATED_PASSWORD:return Object.assign({},e,{personalData:(0,y.default)(e.personalData,{...t,type:F.SAVE_GENERATED_PASSWORD},{spaces:e.localSettings.premiumStatus?.spaces??[]})});case k.SAVE_PERSONAL_ITEM:return Object.assign({},e,{personalData:(0,y.default)(e.personalData,{...t,type:F.SAVE_PERSONAL_ITEM},{spaces:e.localSettings.premiumStatus?.spaces??[]})});case k.SAVE_PERSONAL_ITEMS:return Object.assign({},e,{personalData:(0,y.default)(e.personalData,{...t,type:F.SAVE_PERSONAL_ITEMS},{spaces:e.localSettings.premiumStatus?.spaces??[]})});default:return e}};t.userSessionReducer=(e,r)=>{const E=(0,o.combineReducers)({abTests:i.default,account:s.default,accountContactInfo:N.default,accountCreation:c.default,authTicketInfo:u.default,credentialOTPs:d.credentialOTPs,changeMPData:l.default,darkWeb:p.default,directorySync:S.default,health:O.default,iconsCache:f.default,killswitch:P.default,localSettings:g.default,loginDeviceLimitFlow:U.default,notificationsStatus:K.default,paymentsState:a.default,personalData:y.default,personalFeatures:_.default,personalSettings:A.default,sdkAuthentication:B.default,recoveryData:b.default,session:G.default,sharingData:m.default,sharingSync:I.default,spaceData:v.default,ssoSettings:C.default,sync:D.default,teamAdminData:T.default,twoFactorAuthenticationEnableFlow:w.twoFactorAuthenticationEnableFlow,twoFactorAuthenticationDisableFlow:M.twoFactorAuthenticationDisableFlow,userActivity:R.default,vaultReport:L.default,vpnData:j.VPNReducers,importPersonalData:V.ImportDataStateReducer,secureFileStorageState:W.SecureFileStorageReducer}),h=(0,n.partialRight)(E,[r]),k=(0,n.partialRight)(H,[r]);return(0,n.pipe)(t.userSessionRootReducer,k,h)(e,r)}},33007:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadAnonymousPartnerId=t.loadSdkAuthentication=t.saveStyxKeys=t.saveAppKeys=t.saveDashlaneServerDeltaTimestamp=t.LOAD_ANONYMOUS_PARTNER_ID=t.LOAD_CLIENT_AUTHENTICATION_DATA=t.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP=t.SAVE_STYX_KEYS=t.SAVE_APP_KEYS=void 0;const o=r(53);t.SAVE_APP_KEYS="SAVE_APP_KEYS",t.SAVE_STYX_KEYS="SAVE_STYX_KEYS",t.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP="SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP",t.LOAD_CLIENT_AUTHENTICATION_DATA="LOAD_CLIENT_AUTHENTICATION_DATA",t.LOAD_ANONYMOUS_PARTNER_ID="LOAD_ANONYMOUS_PARTNER_ID";t.saveDashlaneServerDeltaTimestamp=e=>({type:t.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP,dashlaneServerDeltaTimestamp:Math.round((0,o.getUnixTimestamp)()-e)});t.saveAppKeys=e=>({type:t.SAVE_APP_KEYS,appKeys:e});t.saveStyxKeys=e=>({type:t.SAVE_STYX_KEYS,styxKeys:e});t.loadSdkAuthentication=e=>({type:t.LOAD_CLIENT_AUTHENTICATION_DATA,data:e});t.loadAnonymousPartnerId=e=>({type:t.LOAD_ANONYMOUS_PARTNER_ID,anonymousPartnerId:e})},29737:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySdkAuthentication=void 0;const o=r(33007);function n(){return{anonymousPartnerId:null,appKeys:null,dashlaneServerDeltaTimestamp:null,styxKeys:null}}t.getEmptySdkAuthentication=n,t.default=(e={anonymousPartnerId:null,appKeys:null,dashlaneServerDeltaTimestamp:null,styxKeys:null},t)=>{switch(t.type){case o.SAVE_APP_KEYS:return{...e,appKeys:t.appKeys};case o.SAVE_STYX_KEYS:return{...e,styxKeys:t.styxKeys};case o.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP:return{...e,dashlaneServerDeltaTimestamp:t.dashlaneServerDeltaTimestamp};case o.LOAD_CLIENT_AUTHENTICATION_DATA:return{...e,...t.data};case o.LOAD_ANONYMOUS_PARTNER_ID:return{...e,...t};default:return e}}},76556:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.secureFileStartCipheringAction=t.secureFileUploadErrorAction=t.secureFileUploadChunkAction=t.secureFileUploadClearAction=t.secureFileUploadDoneAction=t.secureFileStartUploadAction=t.secureFileChunkTransferDoneAction=t.secureFileChunkReadyAction=t.secureFileStartDecipheringAction=t.secureFileDownloadErrorAction=t.secureFileDownloadChunkAction=t.secureFileStartDownloadAction=t.secureFileClearAction=t.secureFileSetStorageInfoAction=t.SECURE_FILE_START_CIPHERING=t.SECURE_FILE_UPLOAD_CHUNK=t.SECURE_FILE_UPLOAD_ERROR=t.SECURE_FILE_UPLOAD_CLEAR=t.SECURE_FILE_UPLOAD_DONE=t.SECURE_FILE_START_UPLOAD=t.SECURE_FILE_START_DECIPHERING=t.SECURE_FILE_DOWNLOAD_CHUNK=t.SECURE_FILE_DOWNLOAD_ERROR=t.SECURE_FILE_CHUNK_TRANSFER_DONE=t.SECURE_FILE_CHUNK_READY=t.SECURE_FILE_START_DOWNLOAD=t.SECURE_FILE_CLEAR=t.SECURE_FILE_SET_STORAGE_INFO=void 0,t.SECURE_FILE_SET_STORAGE_INFO="SECURE_FILE_SET_STORAGE_INFO",t.SECURE_FILE_CLEAR="SECURE_FILE_CLEAR",t.SECURE_FILE_START_DOWNLOAD="SECURE_FILE_START_DOWNLOAD",t.SECURE_FILE_CHUNK_READY="SECURE_FILE_CHUNK_READY",t.SECURE_FILE_CHUNK_TRANSFER_DONE="SECURE_FILE_CHUNK_TRANSFER_DONE",t.SECURE_FILE_DOWNLOAD_ERROR="SECURE_FILE_DOWNLOAD_ERROR",t.SECURE_FILE_DOWNLOAD_CHUNK="SECURE_FILE_DOWNLOAD_CHUNK",t.SECURE_FILE_START_DECIPHERING="SECURE_FILE_START_DECIPHERING",t.SECURE_FILE_START_UPLOAD="SECURE_FILE_START_UPLOAD",t.SECURE_FILE_UPLOAD_DONE="SECURE_FILE_UPLOAD_DONE",t.SECURE_FILE_UPLOAD_CLEAR="SECURE_FILE_UPLOAD_CLEAR",t.SECURE_FILE_UPLOAD_ERROR="SECURE_FILE_UPLOAD_ERROR",t.SECURE_FILE_UPLOAD_CHUNK="SECURE_FILE_UPLOAD_CHUNK",t.SECURE_FILE_START_CIPHERING="SECURE_FILE_START_CIPHERING";t.secureFileSetStorageInfoAction=e=>({type:t.SECURE_FILE_SET_STORAGE_INFO,quota:e});t.secureFileClearAction=e=>({type:t.SECURE_FILE_CLEAR,downloadKey:e});t.secureFileStartDownloadAction=(e,r)=>({type:t.SECURE_FILE_START_DOWNLOAD,downloadKey:e,contentLength:r});t.secureFileDownloadChunkAction=(e,r)=>({type:t.SECURE_FILE_DOWNLOAD_CHUNK,bytesReceived:r,downloadKey:e});t.secureFileDownloadErrorAction=e=>({type:t.SECURE_FILE_DOWNLOAD_ERROR,downloadKey:e});t.secureFileStartDecipheringAction=e=>({type:t.SECURE_FILE_START_DECIPHERING,downloadKey:e});t.secureFileChunkReadyAction=(e,r)=>({type:t.SECURE_FILE_CHUNK_READY,downloadKey:e,chunks:r});t.secureFileChunkTransferDoneAction=e=>({type:t.SECURE_FILE_CHUNK_TRANSFER_DONE,downloadKey:e});t.secureFileStartUploadAction=e=>({type:t.SECURE_FILE_START_UPLOAD,contentLength:e});t.secureFileUploadDoneAction=()=>({type:t.SECURE_FILE_UPLOAD_DONE});t.secureFileUploadClearAction=()=>({type:t.SECURE_FILE_UPLOAD_CLEAR});t.secureFileUploadChunkAction=e=>({type:t.SECURE_FILE_UPLOAD_CHUNK,bytesSent:e});t.secureFileUploadErrorAction=()=>({type:t.SECURE_FILE_UPLOAD_ERROR});t.secureFileStartCipheringAction=()=>({type:t.SECURE_FILE_START_CIPHERING})},20810:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(10691),t),n(r(76556),t)},13042:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySecureFileStorageState=t.SecureFileStorageReducer=void 0;const o=r(86562),n=r(20810),i=r(76556),a=(e,t,r)=>({...e,downloads:{...{[t]:{...r}}}}),s={downloads:{},upload:{status:o.FileUploadStatus.None,bytesSent:0,contentLength:0},quota:{max:0,remaining:0}};t.SecureFileStorageReducer=(e=s,t)=>{switch(t.type){case i.SECURE_FILE_SET_STORAGE_INFO:return{...e,quota:t.quota};case n.SECURE_FILE_CLEAR:{const r=(t.downloadKey?e.downloads[t.downloadKey]:void 0)?{...e.downloads,[t.downloadKey]:void 0}:s.downloads;return{...e,downloads:r,upload:s.upload}}case i.SECURE_FILE_START_DOWNLOAD:return a(e,t.downloadKey,{status:o.FileDownloadStatus.Initial,contentLength:t.contentLength,bytesReceived:0});case i.SECURE_FILE_DOWNLOAD_CHUNK:{const r=e.downloads[t.downloadKey];if(!r)return e;const n=r.status===o.FileDownloadStatus.Downloading?r.bytesReceived:0,i=r.status===o.FileDownloadStatus.Downloading||r.status===o.FileDownloadStatus.Initial?r.contentLength:0;return a(e,t.downloadKey,{status:o.FileDownloadStatus.Downloading,bytesReceived:n+t.bytesReceived,contentLength:i})}case i.SECURE_FILE_START_DECIPHERING:return e.downloads[t.downloadKey]?a(e,t.downloadKey,{status:o.FileDownloadStatus.Deciphering}):e;case i.SECURE_FILE_DOWNLOAD_ERROR:return a(e,t.downloadKey,{status:o.FileDownloadStatus.Error});case n.SECURE_FILE_CHUNK_READY:{const r=e.downloads[t.downloadKey];if(!r)return e;const{chunks:n,currentChunkIndex:i}=r?.status===o.FileDownloadStatus.ChunkReady?{chunks:r.chunks,currentChunkIndex:r.currentChunkIndex+1}:{chunks:t.chunks,currentChunkIndex:0};return a(e,t.downloadKey,i===n.length?{status:o.FileDownloadStatus.TransferComplete}:{status:o.FileDownloadStatus.ChunkReady,currentChunkIndex:i,chunks:n})}case n.SECURE_FILE_CHUNK_TRANSFER_DONE:{const r=e.downloads[t.downloadKey];if(!r)return e;const n=r?.status===o.FileDownloadStatus.ChunkReady?r.chunks:void 0;return a(e,t.downloadKey,{status:o.FileDownloadStatus.ChunkDownloaded,chunks:n})}case i.SECURE_FILE_START_UPLOAD:return{...e,upload:{...e.upload,status:o.FileUploadStatus.Initial,contentLength:t.contentLength,bytesSent:0}};case i.SECURE_FILE_UPLOAD_CHUNK:{const r=e.upload;if(0===r.contentLength)return e;const n=r.bytesSent+t.bytesSent;return{...e,upload:{...e.upload,status:o.FileUploadStatus.Uploading,bytesSent:n<r.contentLength?n:r.bytesSent}}}case i.SECURE_FILE_START_CIPHERING:return{...e,upload:{...e.upload,status:o.FileUploadStatus.Ciphering}};case i.SECURE_FILE_UPLOAD_ERROR:return{...e,upload:{...e.upload,status:o.FileUploadStatus.Error}};case i.SECURE_FILE_UPLOAD_DONE:return 0===e.upload.contentLength?e:{...e,upload:{bytesSent:0,contentLength:0,status:o.FileUploadStatus.Done}};case n.SECURE_FILE_UPLOAD_CLEAR:return{...e,upload:{bytesSent:0,contentLength:0,status:o.FileUploadStatus.None}};default:return e}};t.getEmptySecureFileStorageState=()=>s},10691:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},16356:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateIsFirstSessionAfterAccountCreation=t.updateisUsingBackupCode=t.updateisUsingDashlaneAuthenticator=t.updateSessionDidOpen=t.pairingSucceeded=t.updatePublicUserId=t.updateDeviceAnalyticsId=t.updateUserAnalyticsId=t.updateAnalyticsIds=t.loadAnalyticsIds=t.updateRemoteKey=t.updateIsLocalKeyMigrationRequired=t.updateLocalKey=t.updateSettingsForMPValidation=t.updateCryptoKwc3FixedSalt=t.updateLastMasterPasswordCheck=t.updateMasterPassword=t.updateServerKey=t.loadSessionKeys=t.updateKeyPair=t.shouldRememberMeForSSOUpdated=t.rememberMasterPasswordUpdated=t.UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION=t.UPDATE_IS_USING_BACKUP_CODE=t.UPDATE_IS_USING_AUTHENTICATOR=t.UPDATE_SESSION_DID_OPEN=t.PAIRING_SUCCEEDED=t.LOAD_ANALYTICS_IDS=t.UPDATE_PUBLIC_USER_ID=t.UPDATE_DEVICE_ANALYTICS_ID=t.UPDATE_USER_ANALYTICS_ID=t.UPDATE_ANALYTICS_IDS=t.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED=t.UPDATE_REMOTE_KEY=t.UPDATE_LOCAL_KEY=t.UPDATE_SETTINGS_FOR_MP_VALIDATION=t.USE_NEW_AUTH_API=t.LOAD_SESSION_KEYS=t.UPDATE_CRYPTO_KWC3_FIXED_SALT=t.UPDATE_LAST_MASTER_PASSWORD_CHECK=t.UPDATE_SERVER_KEY=t.UPDATE_MASTER_PASSWORD=t.UPDATE_KEY_PAIR=t.REMEMBER_ME_FOR_SSO_UPDATED=t.REMEMBER_MASTER_PASSWORD_UPDATED=void 0,t.REMEMBER_MASTER_PASSWORD_UPDATED="REMEMBER_MASTER_PASSWORD_UPDATED",t.REMEMBER_ME_FOR_SSO_UPDATED="REMEMBER_ME_FOR_SSO_UPDATED",t.UPDATE_KEY_PAIR="UPDATE_KEY_PAIR",t.UPDATE_MASTER_PASSWORD="UPDATE_MASTER_PASSWORD",t.UPDATE_SERVER_KEY="UPDATE_SERVER_KEY",t.UPDATE_LAST_MASTER_PASSWORD_CHECK="UPDATE_LAST_MASTER_PASSWORD_CHECK",t.UPDATE_CRYPTO_KWC3_FIXED_SALT="UPDATE_CRYPTO_KWC3_FIXED_SALT",t.LOAD_SESSION_KEYS="LOAD_SESSION_KEYS",t.USE_NEW_AUTH_API="USE_NEW_AUTH_API",t.UPDATE_SETTINGS_FOR_MP_VALIDATION="UPDATE_SETTINGS_FOR_MP_VALIDATION",t.UPDATE_LOCAL_KEY="UPDATE_LOCAL_KEY",t.UPDATE_REMOTE_KEY="UPDATE_REMOTE_KEY",t.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED="UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED",t.UPDATE_ANALYTICS_IDS="UPDATE_ANALYTICS_IDS",t.UPDATE_USER_ANALYTICS_ID="UPDATE_USER_ANALYTICS_ID",t.UPDATE_DEVICE_ANALYTICS_ID="UPDATE_DEVICE_ANALYTICS_ID",t.UPDATE_PUBLIC_USER_ID="UPDATE_PUBLIC_USER_ID",t.LOAD_ANALYTICS_IDS="LOAD_ANALYTICS_IDS",t.PAIRING_SUCCEEDED="PAIRING_SUCCEEDED",t.UPDATE_SESSION_DID_OPEN="UPDATE_SESSION_DID_OPEN",t.UPDATE_IS_USING_AUTHENTICATOR="UPDATE_IS_USING_AUTHENTICATOR",t.UPDATE_IS_USING_BACKUP_CODE="UPDATE_IS_USING_BACKUP_CODE",t.UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION="UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION";t.rememberMasterPasswordUpdated=e=>({type:t.REMEMBER_MASTER_PASSWORD_UPDATED,rememberMasterPassword:e});t.shouldRememberMeForSSOUpdated=e=>({type:t.REMEMBER_ME_FOR_SSO_UPDATED,shouldRememberMeForSSO:e});t.updateKeyPair=e=>({type:t.UPDATE_KEY_PAIR,keyPair:e});t.loadSessionKeys=e=>({type:t.LOAD_SESSION_KEYS,sessionKeys:e});t.updateServerKey=e=>({type:t.UPDATE_SERVER_KEY,serverKey:e||""});t.updateMasterPassword=e=>({type:t.UPDATE_MASTER_PASSWORD,masterPassword:e});t.updateLastMasterPasswordCheck=()=>({type:t.UPDATE_LAST_MASTER_PASSWORD_CHECK});t.updateCryptoKwc3FixedSalt=e=>({type:t.UPDATE_CRYPTO_KWC3_FIXED_SALT,cryptoKwc3FixedSalt:e});t.updateSettingsForMPValidation=e=>({type:t.UPDATE_SETTINGS_FOR_MP_VALIDATION,settings:e});t.updateLocalKey=e=>({type:t.UPDATE_LOCAL_KEY,localKey:e});t.updateIsLocalKeyMigrationRequired=e=>({type:t.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED,isLocalKeyMigrationRequired:e});t.updateRemoteKey=e=>({type:t.UPDATE_REMOTE_KEY,remoteKey:e});t.loadAnalyticsIds=e=>({type:t.LOAD_ANALYTICS_IDS,userAnalyticsId:e.userAnalyticsId,deviceAnalyticsId:e.deviceAnalyticsId});t.updateAnalyticsIds=(e,r)=>({type:t.UPDATE_ANALYTICS_IDS,userAnalyticsId:e,deviceAnalyticsId:r});t.updateUserAnalyticsId=e=>({type:t.UPDATE_USER_ANALYTICS_ID,userAnalyticsId:e});t.updateDeviceAnalyticsId=e=>({type:t.UPDATE_DEVICE_ANALYTICS_ID,deviceAnalyticsId:e});t.updatePublicUserId=e=>({type:t.UPDATE_PUBLIC_USER_ID,publicUserId:e});t.pairingSucceeded=e=>({type:t.PAIRING_SUCCEEDED,pairingId:e});t.updateSessionDidOpen=e=>({type:t.UPDATE_SESSION_DID_OPEN,didOpen:e});t.updateisUsingDashlaneAuthenticator=e=>({type:t.UPDATE_IS_USING_AUTHENTICATOR,withAuthenticator:e});t.updateisUsingBackupCode=e=>({type:t.UPDATE_IS_USING_BACKUP_CODE,withBackupCode:e});t.updateIsFirstSessionAfterAccountCreation=()=>({type:t.UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION})},38271:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySession=void 0;const o=r(96997),n=r(48313),i=r(16356),a=r(59489);function s(){return{sessionId:null,rememberMasterPassword:null,shouldRememberMeForSSO:null,masterPassword:null,remoteKey:null,localKey:null,lastMasterPasswordCheck:0,serverKey:"",keyPair:null,cryptoKwc3FixedSalt:null,sessionKeys:null,settingsForMPValidation:null,isLocalKeyMigrationRequired:!1,analyticsIds:{userAnalyticsId:"",deviceAnalyticsId:""},publicUserId:"",pairingId:null,didOpen:!1,isUsingDashlaneAuthenticator:!1,isUsingBackupCode:!1,isFirstSessionAfterAccountCreation:!1}}t.getEmptySession=s,t.default=(e={sessionId:null,rememberMasterPassword:null,shouldRememberMeForSSO:null,masterPassword:null,remoteKey:null,localKey:null,lastMasterPasswordCheck:0,serverKey:"",keyPair:null,cryptoKwc3FixedSalt:null,sessionKeys:null,settingsForMPValidation:null,isLocalKeyMigrationRequired:!1,analyticsIds:{userAnalyticsId:"",deviceAnalyticsId:""},publicUserId:"",pairingId:null,didOpen:!1,isUsingDashlaneAuthenticator:!1,isUsingBackupCode:!1,isFirstSessionAfterAccountCreation:!1},t)=>{switch(t.type){case n.OPEN_SESSION:return{...e,sessionId:(0,o.default)()};case i.UPDATE_KEY_PAIR:return{...e,keyPair:t.keyPair};case i.REMEMBER_MASTER_PASSWORD_UPDATED:return{...e,rememberMasterPassword:t.rememberMasterPassword};case i.REMEMBER_ME_FOR_SSO_UPDATED:return{...e,shouldRememberMeForSSO:t.shouldRememberMeForSSO};case i.UPDATE_MASTER_PASSWORD:return{...e,masterPassword:t.masterPassword};case i.LOAD_SESSION_KEYS:return{...e,sessionKeys:t.sessionKeys};case i.UPDATE_SERVER_KEY:return{...e,serverKey:t.serverKey};case i.UPDATE_LAST_MASTER_PASSWORD_CHECK:return{...e,lastMasterPasswordCheck:Date.now()};case i.UPDATE_CRYPTO_KWC3_FIXED_SALT:return{...e,cryptoKwc3FixedSalt:t.cryptoKwc3FixedSalt};case a.CONFIRM_USER_AUTHENTICATION:return{...e,settingsForMPValidation:null};case i.UPDATE_SETTINGS_FOR_MP_VALIDATION:return{...e,settingsForMPValidation:t.settings};case i.UPDATE_LOCAL_KEY:return e.localKey!==t.localKey?{...e,localKey:t.localKey}:e;case i.UPDATE_REMOTE_KEY:return e.remoteKey!==t.remoteKey?{...e,remoteKey:t.remoteKey}:e;case i.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED:return{...e,isLocalKeyMigrationRequired:t.isLocalKeyMigrationRequired};case i.LOAD_ANALYTICS_IDS:case i.UPDATE_ANALYTICS_IDS:return{...e,analyticsIds:{userAnalyticsId:t.userAnalyticsId,deviceAnalyticsId:t.deviceAnalyticsId}};case i.UPDATE_USER_ANALYTICS_ID:return{...e,analyticsIds:{...e.analyticsIds,userAnalyticsId:t.userAnalyticsId}};case i.UPDATE_DEVICE_ANALYTICS_ID:return{...e,analyticsIds:{...e.analyticsIds,deviceAnalyticsId:t.deviceAnalyticsId}};case i.UPDATE_PUBLIC_USER_ID:return{...e,publicUserId:t.publicUserId};case i.PAIRING_SUCCEEDED:return{...e,pairingId:t.pairingId};case i.UPDATE_SESSION_DID_OPEN:return{...e,didOpen:t.didOpen};case i.UPDATE_IS_USING_AUTHENTICATOR:return{...e,isUsingDashlaneAuthenticator:t.withAuthenticator};case i.UPDATE_IS_USING_BACKUP_CODE:return{...e,isUsingBackupCode:t.withBackupCode};case i.UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION:return{...e,isFirstSessionAfterAccountCreation:!0};default:return e}}},34433:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userGroupsUpdated=t.sharingDataUpdated=t.USER_GROUPS_UPDATED=t.SHARING_DATA_ITEMS_UPDATED=void 0,t.SHARING_DATA_ITEMS_UPDATED="SHARING_DATA_ITEMS_UPDATED",t.USER_GROUPS_UPDATED="USER_GROUPS_UPDATED";t.sharingDataUpdated=e=>({type:t.SHARING_DATA_ITEMS_UPDATED,sharingData:e});t.userGroupsUpdated=e=>({type:t.USER_GROUPS_UPDATED,userGroups:e})},44899:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyState=void 0;const o=r(34433);function n(){return{items:[],itemGroups:[],userGroups:[]}}t.default=(e={items:[],itemGroups:[],userGroups:[]},t)=>{switch(t.type){case o.SHARING_DATA_ITEMS_UPDATED:const{sharingData:r}=t;return{...r};case o.USER_GROUPS_UPDATED:const{userGroups:n}=t;return{...e,userGroups:n};default:return e}},t.getEmptyState=n},84827:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySharingSyncState=t.setElementsAsSeenAction=t.SET_ELEMENTS_AS_SEEN=t.setAllPendingAction=t.SET_ALL_PENDING=t.updateAllPendingAction=t.UPDATE_ALL_PENDING=void 0,t.UPDATE_ALL_PENDING="UPDATE_ALL_PENDING";t.updateAllPendingAction=(e,r)=>({type:t.UPDATE_ALL_PENDING,pendingItemGroups:e,pendingUserGroups:r}),t.SET_ALL_PENDING="SET_ALL_PENDING";t.setAllPendingAction=(e,r)=>({type:t.SET_ALL_PENDING,pendingItemGroups:e,pendingUserGroups:r}),t.SET_ELEMENTS_AS_SEEN="SET_ELEMENTS_AS_SEEN";function r(){return{pendingItemGroups:[],pendingUserGroups:[]}}function o(e,t,r){const o=t.map((e=>e[r])),n=e.map((e=>e[r])),i=e.filter((e=>o.includes(e[r])));return[...t.filter((e=>!(e=>n.includes(e[r]))(e))),...i.map((e=>{const o=t.find((t=>t[r]===e[r]));return o?{...o,seen:e.seen}:e}))]}function n(e,t,r){return e.map((e=>t.includes(e[r])?{...e,seen:!0}:e))}t.setElementsAsSeenAction=(e,r)=>({type:t.SET_ELEMENTS_AS_SEEN,pendingItemGroupIds:e,pendingUserGroupIds:r}),t.default=(e={pendingItemGroups:[],pendingUserGroups:[]},r)=>{switch(r.type){case t.SET_ELEMENTS_AS_SEEN:{const{pendingUserGroupIds:t,pendingItemGroupIds:o}=r;return{pendingUserGroups:n(e.pendingUserGroups,t,"groupId"),pendingItemGroups:n(e.pendingItemGroups,o,"itemGroupId")}}case t.UPDATE_ALL_PENDING:{const{pendingUserGroups:t,pendingItemGroups:n}=r,i=o(e.pendingItemGroups,n,"itemGroupId");return{pendingUserGroups:o(e.pendingUserGroups,t,"groupId"),pendingItemGroups:i}}case t.SET_ALL_PENDING:{const{pendingUserGroups:e,pendingItemGroups:t}=r;return{pendingItemGroups:t,pendingUserGroups:e}}default:return e}},t.getEmptySharingSyncState=r},36738:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.spaceDataUpdated=t.spacesUpdated=t.SPACE_DATA_UPDATED=t.SPACES_UPDATED=void 0,t.SPACES_UPDATED="SPACES_UPDATED",t.SPACE_DATA_UPDATED="SPACE_DATA_UPDATED";t.spacesUpdated=e=>({type:t.SPACES_UPDATED,spaces:e});t.spaceDataUpdated=e=>({type:t.SPACE_DATA_UPDATED,spaceData:e})},79619:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySpaceDataState=void 0;const o=r(36738);function n(){return{spaces:[]}}t.default=(e={spaces:[]},t)=>{switch(t.type){case o.SPACES_UPDATED:const r=t;return{...e,spaces:(r.spaces||[]).map((e=>({teamId:e.teamId,details:e})))};case o.SPACE_DATA_UPDATED:return{...t.spaceData};default:return e}},t.getEmptySpaceDataState=n},7624:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetSSOSettings=t.storeSSOSettings=void 0;const o=r(63703);t.storeSSOSettings=e=>({type:o.SET_SSO_SETTINGS,data:e});t.resetSSOSettings=()=>({type:o.SET_SSO_SETTINGS,data:(0,o.getEmptySSOSettings)()})},63703:(e,t)=>{function r(){return{ssoUser:!1,serviceProviderUrl:"",ssoServiceProviderKey:"",migration:void 0,ssoToken:""}}Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySSOSettings=t.SET_SSO_SETTINGS=void 0,t.SET_SSO_SETTINGS="SET_SSO_SETTINGS",t.default=(e=r(),o)=>o.type===t.SET_SSO_SETTINGS?Object.assign({},e,{...o.data}):e,t.getEmptySSOSettings=r},82262:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.syncFailure=t.syncSuccess=t.syncStarted=t.SYNC_FAILURE=t.SYNC_SUCCESS=t.SYNC_STARTED=void 0,t.SYNC_STARTED="SYNC_STARTED",t.SYNC_SUCCESS="SYNC_SUCCESS",t.SYNC_FAILURE="SYNC_FAILURE";t.syncStarted=()=>({type:t.SYNC_STARTED,isInProgress:!0,startTime:Date.now()});t.syncSuccess=e=>({type:t.SYNC_SUCCESS,isInProgress:!1,isUploadEnabled:e});t.syncFailure=()=>({type:t.SYNC_FAILURE,isInProgress:!1})},4551:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySyncState=void 0;const o=r(82262),n=r(25576);function i(){return{isUploadEnabled:!1,syncIntervalTimeMs:3e5,status:n.SyncStatuses.READY}}t.getEmptySyncState=i,t.default=(e=i(),t)=>{switch(t.type){case o.SYNC_STARTED:return{...e,startTime:t.startTime,status:n.SyncStatuses.IN_PROGRESS};case o.SYNC_FAILURE:return{...e,status:n.SyncStatuses.FAILURE};case o.SYNC_SUCCESS:return{...e,status:n.SyncStatuses.SUCCESS,isUploadEnabled:t.isUploadEnabled};default:return e}}},1370:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.specialItemGroupUpdated=t.userGroupAdminItemCreated=t.teamAdminDataUpdated=t.userGroupsDeleted=t.userGroupsCreated=t.userGroupsUpdated=t.SPECIAL_ITEM_GROUP_UPDATED=t.GROUP_ADMIN_ITEM_CREATED=t.TEAM_ADMIN_DATA_UPDATED=t.TEAM_ADMIN_USER_GROUPS_DELETED=t.TEAM_ADMIN_USER_GROUPS_CREATED=t.TEAM_ADMIN_USER_GROUPS_UPDATED=void 0,t.TEAM_ADMIN_USER_GROUPS_UPDATED="TEAM_ADMIN_USER_GROUPS_UPDATED",t.TEAM_ADMIN_USER_GROUPS_CREATED="TEAM_ADMIN_USER_GROUPS_CREATED",t.TEAM_ADMIN_USER_GROUPS_DELETED="TEAM_ADMIN_USER_GROUPS_DELETED",t.TEAM_ADMIN_DATA_UPDATED="TEAM_ADMIN_DATA_UPDATED",t.GROUP_ADMIN_ITEM_CREATED="GROUP_ADMIN_ITEM_CREATED",t.SPECIAL_ITEM_GROUP_UPDATED="SPECIAL_ITEM_GROUP_UPDATED";t.userGroupsUpdated=(e,r)=>({type:t.TEAM_ADMIN_USER_GROUPS_UPDATED,teamId:e,userGroups:r});t.userGroupsCreated=(e,r)=>({type:t.TEAM_ADMIN_USER_GROUPS_CREATED,teamId:e,userGroups:r});t.userGroupsDeleted=(e,r)=>({type:t.TEAM_ADMIN_USER_GROUPS_DELETED,teamId:e,userGroups:r});t.teamAdminDataUpdated=e=>({type:t.TEAM_ADMIN_DATA_UPDATED,teamAdminData:e});t.userGroupAdminItemCreated=(e,r)=>({type:t.GROUP_ADMIN_ITEM_CREATED,teamId:e,userGroupAdminItem:r});t.specialItemGroupUpdated=(e,r)=>({type:t.SPECIAL_ITEM_GROUP_UPDATED,teamId:e,specialItemGroup:r})},4511:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyState=void 0;const o=r(1370);function n(e,t){const r={};return Object.keys(e).forEach((t=>{r[t]=e[t]})),Object.keys(t).forEach((e=>{r[e]=Object.assign({},r[e],t[e])})),r}function i(){return{teams:{}}}t.default=(e={teams:{}},t)=>{switch(t.type){case o.TEAM_ADMIN_DATA_UPDATED:const{teamAdminData:a}=t;return{teams:n(e.teams,a.teams)};case o.TEAM_ADMIN_USER_GROUPS_UPDATED:const s=t;return{teams:n(e.teams,{[s.teamId]:{teamId:s.teamId,userGroups:s.userGroups}})};case o.TEAM_ADMIN_USER_GROUPS_CREATED:const c=t,u=e.teams[c.teamId]?e.teams[c.teamId].userGroups:[];return{teams:n(e.teams,{[c.teamId]:{teamId:c.teamId,userGroups:u.concat(c.userGroups)}})};case o.TEAM_ADMIN_USER_GROUPS_DELETED:const d=t,l=d.userGroups.map((e=>e.groupId)),p=e.teams[d.teamId]?e.teams[d.teamId].userGroups:[];return{teams:n(e.teams,{[d.teamId]:{teamId:d.teamId,userGroups:p.filter((e=>!l.includes(e.groupId)))}})};case o.GROUP_ADMIN_ITEM_CREATED:const S=t,g=(r=e.teams,i=S.teamId,r[i]&&r[i].userGroupAdminItems||[]);return{teams:n(e.teams,{[S.teamId]:{teamId:S.teamId,userGroupAdminItems:g.concat([S.userGroupAdminItem])}})};case o.SPECIAL_ITEM_GROUP_UPDATED:const E=t;return{teams:n(e.teams,{[E.teamId]:{teamId:E.teamId,specialItemGroup:t.specialItemGroup}})};default:return e}var r,i},t.getEmptyState=i},40051:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userActivityLastSentAtUpdated=void 0;const o=r(39958);t.userActivityLastSentAtUpdated=e=>({type:o.LAST_SENT_AT_UPDATED,lastSentAt:e})},69795:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyUserActivityState=void 0;const o=r(39958);function n(){return{lastSentAt:void 0}}t.default=(e=n(),t)=>t.type===o.LAST_SENT_AT_UPDATED?{...e,lastSentAt:t.lastSentAt}:e,t.getEmptyUserActivityState=n},39958:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LAST_SENT_AT_UPDATED=void 0,t.LAST_SENT_AT_UPDATED="LAST_SENT_AT_UPDATED"},72881:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vaultReportLastSentAtUpdated=void 0;const o=r(94846);t.vaultReportLastSentAtUpdated=e=>({type:o.LAST_SENT_AT_UPDATED,lastSentAt:e})},97632:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyVaultReportState=void 0;const o=r(94846);function n(){return{lastSentAt:void 0}}t.default=(e=n(),t)=>t.type===o.LAST_SENT_AT_UPDATED?{...e,lastSentAt:t.lastSentAt}:e,t.getEmptyVaultReportState=n},94846:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LAST_SENT_AT_UPDATED=void 0,t.LAST_SENT_AT_UPDATED="LAST_SENT_AT_UPDATED"},39610:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(34066);t.bootstrap=e=>{e.register(o.config)}},10447:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forceSyncHandler=void 0;const o=r(10203);t.forceSyncHandler=async function({sessionService:e}){await e.getInstance().user.attemptSync(o.Trigger.Manual)}},18203:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refreshSubscriptionInformationHandler=void 0;const o=r(35507);t.refreshSubscriptionInformationHandler=async e=>(0,o.refreshSubscriptionInformation)(e.storeService,e.storeService.getAccountInfo().login)},17095:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setCredentialSearchOrderHandler=void 0;const o=r(76089);t.setCredentialSearchOrderHandler=(e,t)=>(e.storeService.dispatch((0,o.credentialSearchOrderUpdated)(t.order)),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},94275:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateAccountRecoveryKeyPersonalSettingsHandler=void 0;const o=r(27517);t.updateAccountRecoveryKeyPersonalSettingsHandler=(e,t)=>(e.storeService.dispatch((0,o.editPersonalSettings)(t)),Promise.resolve())},17387:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.setupSubscriptions=void 0,n(r(25576),t);var i=r(87881);Object.defineProperty(t,"setupSubscriptions",{enumerable:!0,get:function(){return i.setupSubscriptions}});var a=r(39610);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return a.bootstrap}})},81228:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getServiceProviderUrl$=t.emitServiceProviderUrl=t.webOnboardingMode$=t.subscriptionInformation$=t.premiumStatus$=t.syncInProgress$=t.syncInfo$=t.didOpen$=void 0;const o=r(18948),n=r(3343),i=r(16593);t.didOpen$=()=>(0,o.pipe)((0,n.map)(i.didOpenSelector),(0,n.distinctUntilChanged)());t.syncInfo$=()=>(0,o.pipe)((0,n.map)(i.syncSelector),(0,n.distinctUntilChanged)());t.syncInProgress$=()=>(0,o.pipe)((0,n.map)(i.syncIsInProgressSelector),(0,n.distinctUntilChanged)());t.premiumStatus$=()=>(0,o.pipe)((0,n.map)(i.premiumStatusSelector),(0,n.distinctUntilChanged)());t.subscriptionInformation$=()=>(0,o.pipe)((0,n.map)(i.subscriptionInformationSelector),(0,n.distinctUntilChanged)());t.webOnboardingMode$=()=>(0,o.pipe)((0,n.map)(i.webOnboardingModeSelector),(0,n.distinctUntilChanged)());const a=new o.Subject;t.emitServiceProviderUrl=e=>a.next(e);t.getServiceProviderUrl$=()=>a},38328:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updatePremiumChurningDismissDateHandler=t.SendTokenStatus=void 0;var o=r(72636);Object.defineProperty(t,"SendTokenStatus",{enumerable:!0,get:function(){return o.SendTokenStatus}});const n=r(76089);t.updatePremiumChurningDismissDateHandler=e=>{const t=new Date;return e.storeService.dispatch((0,n.premiumChurningDismissDateUpdated)(t.getTime())),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve()}},28287:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetProtectedItemAutofillTimerHandler=t.validateMasterPasswordHandler=t.validateMasterPassword=t.validateToken=t.convertTokenToAuthTicket=t.dashlaneAuthenticatorGetAuthTicket=t.handlePerformValidationError=t.SendTokenStatus=void 0;const o=r(46298);var n=r(72636);Object.defineProperty(t,"SendTokenStatus",{enumerable:!0,get:function(){return n.SendTokenStatus}});const i=r(17825),a=r(25576),s=r(42282),c=r(16356),u=r(87248),d=(e,t)=>({success:!1,error:{code:e,message:t}});function l(e,t,r){if(!(0,o.isApiErrorOfType)(o.BusinessError,e))return d(a.AuthenticationCode.REGISTER_DEVICE_FAILED);const n=e.code;switch(n){case o.VerificationFailed:return d(t?a.AuthenticationCode.OTP_NOT_VALID:r?a.AuthenticationCode.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED:a.AuthenticationCode.TOKEN_NOT_VALID);case o.InvalidOTPBlocked:return d(a.AuthenticationCode.OTP_TOO_MANY_ATTEMPTS);case o.InvalidOTPAlreadyUsed:return d(a.AuthenticationCode.OTP_ALREADY_USED);case o.AccountBlockedContactSupport:return d(a.AuthenticationCode.TOKEN_ACCOUNT_LOCKED);case o.VerificationTimeout:return d(a.AuthenticationCode.TOKEN_EXPIRED);case o.VerificationRequiresRequest:return d(a.AuthenticationCode.TOKEN_TOO_MANY_ATTEMPTS);case o.VerificationMethodDisabled:return d(a.AuthenticationCode.REGISTER_DEVICE_FAILED);case o.InvalidSsoToken:case o.B2bSsoUserNotFound:return d(a.AuthenticationCode.SSO_VERIFICATION_FAILED);case o.UserHasNoActiveAuthenticator:return d(a.AuthenticationCode.NO_ACTIVE_AUTHENTICATOR);case o.FailedToContactAuthenticatorDevice:return d(a.AuthenticationCode.FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE);default:return d(a.AuthenticationCode.BUSINESS_ERROR,`Unexpected business_error: ${n}`)}}t.handlePerformValidationError=l;t.dashlaneAuthenticatorGetAuthTicket=async(e,t)=>{const{login:r}=e.getAccountInfo();e.dispatch((0,s.resetAuthTicketInfo)());try{const n=await(0,o.performDashlaneAuthenticatorVerification)(e,{login:r,deviceName:t});if((0,o.isApiError)(n))return l(n,!1,!0);const i=n.authTicket;return e.dispatch((0,s.updateAuthTicketInfo)({login:r,authTicket:i,date:Date.now()})),{success:!0,authTicket:i}}catch(e){if(e.getAdditionalInfo()?.response?.status===u.HttpStatusCode.GATEWAY_TIMEOUT)return l(o.verificationTimeoutError,!1,!0);throw e}};t.convertTokenToAuthTicket=async(e,t)=>{const{login:r}=e.getAccountInfo();let n,c;switch(e.dispatch((0,s.resetAuthTicketInfo)()),t.type){case"emailToken":if(!(0,o.isEmailTokenValid)(t.value))return d(a.AuthenticationCode.TOKEN_NOT_VALID);if(c=await(0,o.performEmailTokenVerification)(e,{login:r,token:t.value}),(0,o.isApiError)(c))return l(c);n=c.authTicket;break;case"extraDeviceToken":return(0,o.isExtraDeviceTokenValid)(t.value)?{success:!0,authTicket:void 0}:d(a.AuthenticationCode.TOKEN_NOT_VALID);case"sso":if(!t.value)return d(a.AuthenticationCode.TOKEN_NOT_VALID);if(c=await(0,o.performSsoVerification)(e,{login:r,ssoToken:t.value}),(0,o.isApiError)(c))return l(c);n=c.authTicket;break;case"otp":if(!t.value)return d(a.AuthenticationCode.TOKEN_NOT_VALID);if(c=await(0,o.performTotpVerification)(e,{login:r,otp:t.value}),(0,o.isApiError)(c))return l(c,!0);n=c.authTicket;break;default:(0,i.assertUnreachable)(t)}return e.dispatch((0,s.updateAuthTicketInfo)({login:r,authTicket:n,date:Date.now()})),{success:!0,authTicket:n}};t.validateToken=async(e,r)=>{const{storeService:o}=e;return(0,t.convertTokenToAuthTicket)(o,r)};t.validateMasterPassword=async(e,t,r)=>{const o=t.getInstance().isKey(e.getUserSession().serverKey,r);return o&&e.dispatch((0,c.updateLastMasterPasswordCheck)()),o};t.validateMasterPasswordHandler=async(e,r)=>{const{storeService:o,masterPasswordEncryptorService:n}=e;return await(0,t.validateMasterPassword)(o,n,r)};t.resetProtectedItemAutofillTimerHandler=e=>(e.storeService.dispatch((0,c.updateLastMasterPasswordCheck)()),Promise.resolve())},29303:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.recoveryIsOtpSelector=t.recoveryInProgressSelector=t.recoveryDataSelector=t.recoveryUkiSelector=void 0;t.recoveryUkiSelector=e=>e.userSession.recoveryData.recoveryUki;t.recoveryDataSelector=e=>e.userSession.recoveryData;t.recoveryInProgressSelector=e=>e.userSession.recoveryData.recoveryInProgress;t.recoveryIsOtpSelector=e=>{const t=e.userSession.recoveryData.verificationMethod[0]?.type??"";return["totp","duo_push","u2f"].includes(t)}},16593:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sessionEncryptorKeysSelector=t.getCredentialSearchOrderSelector=t.analyticsInstallationIdSelector=t.isPaymentFailureChurningDismissedSelector=t.premiumChurningDismissDateSelector=t.lastMasterPasswordCheckSelector=t.didOpenSelector=t.publicUserIdSelector=t.analyticsIdsSelector=t.platformNameSelector=t.appVersionSelector=t.isAuthenticatedSelector=t.protectPasswordsSettingSelector=t.personalSettingsSelector=t.authTicketInfoSelector=t.sharingKeysSelector=t.sharingSyncSelector=t.recoveryKeySelector=t.accountRecoveryOptInSelector=t.userDefaultCryptoSelector=t.anonymousUserIdSelector=t.isLocalKeyMigrationRequiredSelector=t.remoteKeySelector=t.isRemoteKeyActivatedSelector=t.serverKeySelector=t.spaceDisabledDomainsListSelector=t.localKeySelector=t.isLocalKeyActivatedSelector=t.isOnboardingNotificationShowingSelector=t.webOnboardingModeSelector=t.masterPasswordValidationDataSelector=t.spacesSelector=t.userLoginSelector=t.masterPasswordSelector=t.masterPasswordAndServerKeySelector=t.userIdSelector=t.activeSpacesSelector=t.subscriptionInformationSelector=t.nodePremiumStatusSelector=t.premiumStatusSelector=t.syncIsInProgressSelector=t.syncSelector=void 0;const o=r(32034),n=r(16038),i=r(57789),a=r(56915),s=r(2246),c=r(59600),u=r(30913),d=r(41265),l=r(25576);t.syncSelector=e=>e.userSession.sync;t.syncIsInProgressSelector=e=>e.userSession.sync.status===l.SyncStatuses.IN_PROGRESS;t.premiumStatusSelector=e=>e.userSession.localSettings.premiumStatus;t.nodePremiumStatusSelector=e=>e.userSession.localSettings.nodePremiumStatus;t.subscriptionInformationSelector=e=>e.userSession.localSettings.subscriptionInformation;t.activeSpacesSelector=e=>{const r=(0,t.premiumStatusSelector)(e);return(r&&r.spaces||[]).filter((e=>"accepted"===e.status))};t.userIdSelector=e=>e.userSession.account.login;t.masterPasswordAndServerKeySelector=e=>{const{userSession:t}=e,{masterPassword:r,serverKey:o}=t.session;return{password:(0,n.utf8ToBase64)(r),serverKey:(0,n.utf8ToBase64)(o)}};t.masterPasswordSelector=e=>e.userSession.session.masterPassword;t.userLoginSelector=e=>e.userSession.account.login;t.spacesSelector=e=>e.userSession.spaceData.spaces;t.masterPasswordValidationDataSelector=e=>e.userSession.session.settingsForMPValidation;t.webOnboardingModeSelector=e=>e.userSession.localSettings.webOnboardingMode;t.isOnboardingNotificationShowingSelector=e=>{const r=(0,t.webOnboardingModeSelector)(e);return(0,i.isOnboardingNotificationShowing)(r)};t.isLocalKeyActivatedSelector=e=>Boolean(e.userSession.session.localKey);t.localKeySelector=e=>e.userSession.session.localKey;t.spaceDisabledDomainsListSelector=(0,o.createSelector)(t.spacesSelector,(e=>e.reduce(((e,t)=>{let r=[];return t&&t.details&&t.details.info&&t.details.info.autologinDomainDisabledArray&&(r=t.details.info.autologinDomainDisabledArray),[...e,...r]}),[])));t.serverKeySelector=e=>e.userSession.session.serverKey;t.isRemoteKeyActivatedSelector=e=>Boolean(e.userSession.session.remoteKey);t.remoteKeySelector=e=>e.userSession.session.remoteKey;t.isLocalKeyMigrationRequiredSelector=e=>e.userSession.session.isLocalKeyMigrationRequired;t.anonymousUserIdSelector=e=>e.userSession.personalSettings.AnonymousUserId;t.userDefaultCryptoSelector=e=>e.userSession.personalSettings.CryptoUserPayload;t.accountRecoveryOptInSelector=e=>e.userSession.personalSettings.RecoveryOptIn||!1;t.recoveryKeySelector=e=>e.userSession.personalSettings.RecoveryKey;t.sharingSyncSelector=e=>e.userSession.sharingSync;t.sharingKeysSelector=e=>e.userSession.session.keyPair;t.authTicketInfoSelector=e=>e.userSession.authTicketInfo;t.personalSettingsSelector=e=>e.userSession.personalSettings;t.protectPasswordsSettingSelector=e=>{const{ProtectPasswords:t}=e.userSession.personalSettings;return t};t.isAuthenticatedSelector=e=>e.userSession.account.isAuthenticated;t.appVersionSelector=e=>(0,a.platformInfoSelector)(e).appVersion;t.platformNameSelector=e=>(0,a.platformInfoSelector)(e).platformName;t.analyticsIdsSelector=e=>e.userSession.session.analyticsIds;t.publicUserIdSelector=e=>e.userSession.session.publicUserId;t.didOpenSelector=e=>e.userSession.session.didOpen;t.lastMasterPasswordCheckSelector=e=>e.userSession.session.lastMasterPasswordCheck;t.premiumChurningDismissDateSelector=e=>e.userSession.localSettings.premiumChurningDismissDate;t.isPaymentFailureChurningDismissedSelector=e=>{return t=e.userSession.localSettings.premiumChurningDismissDate,Date.now()-t>864e5;var t};t.analyticsInstallationIdSelector=(0,o.createSelector)(t.userLoginSelector,t.isAuthenticatedSelector,u.applicationBuildTypeSelector,((e,t,r)=>{const o=e&&(0,d.isInternalTestUser)(e)&&t;return r===c.ApplicationBuildType.DEV||r===c.ApplicationBuildType.QA||o?(0,s.getCommonAppSetting)("installationId"):null}));t.getCredentialSearchOrderSelector=e=>e.userSession.localSettings.credentialSearchOrder??l.CredentialSearchOrder.NAME;t.sessionEncryptorKeysSelector=e=>({masterPassword:(0,t.masterPasswordSelector)(e),serverKey:(0,t.serverKeySelector)(e),localKey:(0,t.localKeySelector)(e),remoteKey:(0,t.remoteKeySelector)(e)})},27754:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sessionStartTimeSelector=t.sessionIdSelector=void 0;t.sessionIdSelector=e=>e.userSession.session.sessionId;t.sessionStartTimeSelector=e=>e.userSession.account.sessionStartTime},38981:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSSOUserSelector=t.ssoProviderInfoSelector=t.ssoMigrationInfoSelector=t.serviceProviderUrlSelector=t.ssoSettingsSelector=void 0;const o=r(35105),n=r(32034),i=r(16593);t.ssoSettingsSelector=e=>e.userSession.ssoSettings;t.serviceProviderUrlSelector=e=>(0,t.ssoSettingsSelector)(e).serviceProviderUrl,t.ssoMigrationInfoSelector=(0,n.createSelector)(t.ssoSettingsSelector,(({migration:e,serviceProviderUrl:t,ssoToken:r})=>({migration:r?o.SSOMigrationType.MP_TO_SSO_WITH_INFO:e,serviceProviderUrl:t}))),t.ssoProviderInfoSelector=(0,n.createSelector)(t.ssoSettingsSelector,(({serviceProviderUrl:e,isNitroProvider:t})=>({serviceProviderUrl:e,isNitroProvider:t})));t.isSSOUserSelector=e=>{const t=(0,i.activeSpacesSelector)(e);return t.length>0&&t[0].isSSOUser||!1}},87881:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(28096),n=r(35507),i=r(16593),a=r(56915),s=r(75004),c=r(54642),u=r(65210),d=r(59213),l=r(35924),p=r(18216);t.setupSubscriptions=function(e,t){const{storeService:r,wsService:S,sessionService:g}=t;e.coreServicesReady.on((async e=>{if(e.initMode===p.InitMode.Resume&&(t.sessionService.tryRestoreInstance(),g.isSessionStarted())){const{user:e}=t.sessionService.getInstance();await e.loadNonResumableSessionData()}})),e.sessionOpened.on((()=>{r.dispatch((0,l.resetLoginStepInfo)());const e=r.getState(),t=(0,i.premiumStatusSelector)(e);1!==(0,c.getUserMessagesByTypeSelector)(e,d.UserMessageTypes.TRIAL_EXPIRED).length||(0,s.isTrialExpired)({premiumStatus:t})||(r.dispatch((0,u.userMessagesDismissed)((0,s.createTrialExpiredUserMessage)())),g.getInstance().user.persistLocalSettings())})),e.sessionClosed.on((e=>{(0,o.triggerLoginStatusChanged)({loggedIn:!1,login:e.login})})),e.familyMemberLeft.on((async()=>{const e=(0,i.userLoginSelector)(r.getState()),t=(0,a.ukiSelector)(r.getState());await(0,n.refreshPremiumStatus)(r,S,e,t)}))}},25576:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpaceTier=t.SpaceStatus=t.B2CPlanFeature=t.PlanType=t.PremiumStatusCode=t.B2CStatusCode=t.CancelDashlaneAuthenticatorRegistration=t.CredentialSearchOrder=t.PersistData=t.SyncStatuses=t.SessionResumingCode=t.AuthenticationCode=t.extractExtraDeviceToken=t.makeExtraDeviceToken=t.extractOTP=t.makeSsoToken=t.makeOTP=t.extractEmailToken=t.makeEmailToken=void 0;t.makeEmailToken=e=>({type:"emailToken",value:e});t.extractEmailToken=e=>e.value;t.makeOTP=e=>({type:"otp",value:e});t.makeSsoToken=e=>({type:"sso",value:e});t.extractOTP=e=>e.value;t.makeExtraDeviceToken=e=>({type:"extraDeviceToken",value:e});var r;t.extractExtraDeviceToken=e=>e.value,function(e){e[e.INVALID_LOGIN=0]="INVALID_LOGIN",e[e.EMPTY_LOGIN=1]="EMPTY_LOGIN",e[e.EMPTY_MASTER_PASSWORD=2]="EMPTY_MASTER_PASSWORD",e[e.EMPTY_ENCRYPTED_KEY=3]="EMPTY_ENCRYPTED_KEY",e[e.INVALID_ENCRYPTED_KEY=4]="INVALID_ENCRYPTED_KEY",e[e.EMPTY_TOKEN=5]="EMPTY_TOKEN",e[e.EMPTY_OTP=6]="EMPTY_OTP",e[e.SEND_TOKEN_FAILED=7]="SEND_TOKEN_FAILED",e[e.UKI_REGISTRATION_FAILED=8]="UKI_REGISTRATION_FAILED",e[e.REGISTER_DEVICE_FAILED=9]="REGISTER_DEVICE_FAILED",e[e.BUSINESS_ERROR=10]="BUSINESS_ERROR",e[e.USER_DOESNT_EXIST=11]="USER_DOESNT_EXIST",e[e.USER_DOESNT_EXIST_UNLIKELY_MX=12]="USER_DOESNT_EXIST_UNLIKELY_MX",e[e.USER_DOESNT_EXIST_INVALID_MX=13]="USER_DOESNT_EXIST_INVALID_MX",e[e.USER_UNAUTHORIZED=14]="USER_UNAUTHORIZED",e[e.WRONG_PASSWORD=15]="WRONG_PASSWORD",e[e.DATA_TAMPERED_ERROR=16]="DATA_TAMPERED_ERROR",e[e.LOGGEDIN=17]="LOGGEDIN",e[e.ASK_TOKEN=18]="ASK_TOKEN",e[e.ASK_OTP=19]="ASK_OTP",e[e.ASK_MASTER_PASSWORD=20]="ASK_MASTER_PASSWORD",e[e.USE_LOCAL_UKI=21]="USE_LOCAL_UKI",e[e.ASK_DASHLANE_AUTHENTICATOR=22]="ASK_DASHLANE_AUTHENTICATOR",e[e.OTP_NOT_VALID=23]="OTP_NOT_VALID",e[e.OTP_TOO_MANY_ATTEMPTS=24]="OTP_TOO_MANY_ATTEMPTS",e[e.OTP_ALREADY_USED=25]="OTP_ALREADY_USED",e[e.BACKUP_CODE_NOT_VALID=26]="BACKUP_CODE_NOT_VALID",e[e.TOKEN_NOT_VALID=27]="TOKEN_NOT_VALID",e[e.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED=28]="DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED",e[e.SERVER_KEY_MISSING=29]="SERVER_KEY_MISSING",e[e.TOKEN_LOCKED=30]="TOKEN_LOCKED",e[e.TOKEN_TOO_MANY_ATTEMPTS=31]="TOKEN_TOO_MANY_ATTEMPTS",e[e.TOKEN_ACCOUNT_LOCKED=32]="TOKEN_ACCOUNT_LOCKED",e[e.TOKEN_EXPIRED=33]="TOKEN_EXPIRED",e[e.NO_ACTIVE_AUTHENTICATOR=34]="NO_ACTIVE_AUTHENTICATOR",e[e.FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE=35]="FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE",e[e.DASHLANE_AUTHENTICATOR_ASKED_FOR_LOCAL_SESSION=36]="DASHLANE_AUTHENTICATOR_ASKED_FOR_LOCAL_SESSION",e[e.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED=37]="DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED",e[e.TOKEN_PROVIDED_FOR_LOCAL_SESSION=38]="TOKEN_PROVIDED_FOR_LOCAL_SESSION",e[e.DEVICE_ALREADY_REGISTERED=39]="DEVICE_ALREADY_REGISTERED",e[e.OTP_PROVIDED_FOR_LOCAL_NON_OTP_SESSION=40]="OTP_PROVIDED_FOR_LOCAL_NON_OTP_SESSION",e[e.DIFFERENT_LOGIN_PROVIDED_WITH_TOKEN_OR_OTP=41]="DIFFERENT_LOGIN_PROVIDED_WITH_TOKEN_OR_OTP",e[e.UNKNOWN_SYNC_ERROR=42]="UNKNOWN_SYNC_ERROR",e[e.INVALID_UKI=43]="INVALID_UKI",e[e.UNKNOWN_UKI=44]="UNKNOWN_UKI",e[e.UNKNOWN_ERROR=45]="UNKNOWN_ERROR",e[e.UNEXPECTED_OTP_TYPE=46]="UNEXPECTED_OTP_TYPE",e[e.UNAUTHORIZED=47]="UNAUTHORIZED",e[e.UNAUTHORIZED_NOT_VALID_CONTENT=48]="UNAUTHORIZED_NOT_VALID_CONTENT",e[e.NETWORK_ERROR=49]="NETWORK_ERROR",e[e.THROTTLED=50]="THROTTLED",e[e.SESSION_ALREADY_OPENED=51]="SESSION_ALREADY_OPENED",e[e.INVALID_SESSION=52]="INVALID_SESSION",e[e.DEVICE_NOT_REGISTERED=53]="DEVICE_NOT_REGISTERED",e[e.MISSING_APP_KEYS=54]="MISSING_APP_KEYS",e[e.PROVIDE_EXTRA_DEVICE_TOKEN=55]="PROVIDE_EXTRA_DEVICE_TOKEN",e[e.PROVIDE_MASTER_PASSWORD_FOR_EXTRA_DEVICE=56]="PROVIDE_MASTER_PASSWORD_FOR_EXTRA_DEVICE",e[e.PROVIDE_MASTER_PASSWORD_AND_SERVER_KEY_FOR_EXTRA_DEVICE=57]="PROVIDE_MASTER_PASSWORD_AND_SERVER_KEY_FOR_EXTRA_DEVICE",e[e.ASK_OTP_FOR_NEW_DEVICE=58]="ASK_OTP_FOR_NEW_DEVICE",e[e.SSO_LOGIN_BYPASS=59]="SSO_LOGIN_BYPASS",e[e.SSO_VERIFICATION_FAILED=60]="SSO_VERIFICATION_FAILED",e[e.SSO_BLOCKED=61]="SSO_BLOCKED",e[e.CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION=62]="CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION",e[e.USER_DOESNT_EXIST_SSO=63]="USER_DOESNT_EXIST_SSO"}(t.AuthenticationCode||(t.AuthenticationCode={})),function(e){e.INVALID_LOGIN_IN_STORE="invalid_login_in_store"}(t.SessionResumingCode||(t.SessionResumingCode={})),function(e){e.READY="ready",e.IN_PROGRESS="in_progress",e.SUCCESS="success",e.FAILURE="failure"}(t.SyncStatuses||(t.SyncStatuses={})),function(e){e[e.PERSIST_DATA_YES=0]="PERSIST_DATA_YES",e[e.PERSIST_DATA_NO=1]="PERSIST_DATA_NO"}(t.PersistData||(t.PersistData={})),function(e){e.NAME="name",e.DATE="date"}(t.CredentialSearchOrder||(t.CredentialSearchOrder={})),function(e){e.CANCELLED="cancelled",e.COMPLETED="completed"}(t.CancelDashlaneAuthenticatorRegistration||(t.CancelDashlaneAuthenticatorRegistration={})),function(e){e.Free="free",e.Subscribed="subscribed",e.Legacy="legacy"}(t.B2CStatusCode||(t.B2CStatusCode={})),function(e){e[e.NO_PREMIUM=0]="NO_PREMIUM",e[e.PREMIUM=1]="PREMIUM",e[e.PREMIUM_CANCELLED=2]="PREMIUM_CANCELLED",e[e.OLD_ACCOUNT=3]="OLD_ACCOUNT",e[e.NEW_USER=4]="NEW_USER",e[e.GRACE_PERIOD=5]="GRACE_PERIOD"}(t.PremiumStatusCode||(t.PremiumStatusCode={})),function(e){e.Amazon="amazon",e.FreeTrial="free_trial",e.Invoice="invoice",e.IOS="ios",e.IOSRenewable="ios_renewable",e.Mac="mac",e.MacRenewable="mac_renewable",e.Offer="offer",e.Partner="partner",e.Paypal="paypal",e.PaypalRenewable="paypal_renewable",e.Playstore="playstore",e.PlaystoreRenewable="playstore_renewable",e.Stripe="stripe"}(t.PlanType||(t.PlanType={})),function(e){e.Premium="premium",e.Essentials="essentials",e.Premiumplus="premiumplus",e.BackupForAll="backup"}(t.B2CPlanFeature||(t.B2CPlanFeature={})),function(e){e.Accepted="accepted",e.Pending="pending",e.Proposed="proposed",e.Refused="refused",e.Removed="removed",e.Revoked="revoked",e.Unproposed="unproposed"}(t.SpaceStatus||(t.SpaceStatus={})),function(e){e.Team="team",e.Business="business",e.Legacy="legacy",e.Entreprise="entreprise",e.Free="free",e.Starter="starter"}(t.SpaceTier||(t.SpaceTier={})),function(e){e.not_in_team="not_in_team",e.proposed="proposed",e.in_team="in_team"}(r||(r={}))},34376:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentUserInfo=void 0;const o=r(56915);t.getCurrentUserInfo=function(e){const t=e.getUserSession().keyPair;return{login:e.getUserLogin(),uki:(0,o.ukiSelector)(e.getState()),privateKey:t&&t.privateKey}}}}]);