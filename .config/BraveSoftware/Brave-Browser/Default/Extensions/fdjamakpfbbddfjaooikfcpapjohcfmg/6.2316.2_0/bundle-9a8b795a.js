"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[274],{651046:(e,t,r)=>{r.d(t,{x:()=>a});var n=r(215904),o=r(549259),s=r(661222),i=r(92204);async function a(){const e=await async function(){const e=await(0,s.I)({}),t=(0,i.A)("");return e.filter((e=>"string"==typeof e.url&&e.url.startsWith(t))).filter((e=>""!==e.url))}();if(!e.length)return;const t=(0,n.a)(),r=e.map((e=>e.id)).filter((e=>"number"==typeof e&&e!==t));await(0,o.O)(r)}},666561:(e,t,r)=>{let n;r.d(t,{rq:()=>n}),function(e){e.Success="success",e.Loading="loading",e.Error="error"}(n||(n={})),n.Loading},403524:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enclaveSdkApi=void 0;const n=r(468224),o=r(270737),s=r(585421);t.enclaveSdkApi=(0,n.defineModuleApi)({name:"enclaveSdkApi",commands:{CheckDNSValidationCommand:o.CheckDNSValidationCommand,ClearSettingsCommand:o.ClearSettingsCommand,CreateTeamCommand:o.CreateTeamCommand,DeleteDomainCommand:o.DeleteDomainCommand,EnableSsoCommand:o.EnableSsoCommand,InitSsoProvisioningCommand:o.InitSsoProvisioningCommand,LoginUserWithEnclaveSSOCommand:o.LoginUserWithEnclaveSSOCommand,ProvisionDomainCommand:o.ProvisionDomainCommand,TestLoginUserWithEnclaveSSOCommand:o.TestLoginUserWithEnclaveSSOCommand,UpdateMetadataCommand:o.UpdateMetadataCommand,ValidateMetadataCommand:o.ValidateMetadataCommand},events:{},queries:{SsoProvisioningQuery:s.SsoProvisioningQuery}})},272346:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CheckDNSValidationCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.CheckDNSValidationCommand=o},20530:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClearSettingsCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.ClearSettingsCommand=o},764631:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateTeamCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.CreateTeamCommand=o},187756:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteDomainCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DeleteDomainCommand=o},390209:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EnableSsoCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.EnableSsoCommand=o},270737:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(272346),t),o(r(764631),t),o(r(896330),t),o(r(258761),t),o(r(806089),t),o(r(187756),t),o(r(279393),t),o(r(377274),t),o(r(433126),t),o(r(390209),t),o(r(20530),t)},279393:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InitSsoProvisioningCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.InitSsoProvisioningCommand=o},896330:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoginUserWithEnclaveSSOCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.LoginUserWithEnclaveSSOCommand=o},258761:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProvisionDomainCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.ProvisionDomainCommand=o},806089:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TestLoginUserWithEnclaveSSOCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.TestLoginUserWithEnclaveSSOCommand=o},377274:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateMetadataCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.UpdateMetadataCommand=o},433126:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ValidateMetadataCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.ValidateMetadataCommand=o},429465:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(403524),t),o(r(270737),t),o(r(585421),t),o(r(78521),t)},585421:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(410271),t)},410271:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SsoProvisioningQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.SsoProvisioningQuery=o},78521:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SsoProvisioning=t.InferredSsoState=t.Domain=t.DomainPendingReason=t.DomainVerificationStatus=void 0;const n=r(910295);t.DomainVerificationStatus=n.z.enum(["valid","pending","expired","invalid"]),t.DomainPendingReason=n.z.enum(["tokenNotFound","invalidToken"]),t.Domain=n.z.object({domainName:n.z.string(),status:t.DomainVerificationStatus.nullable(),verificationToken:n.z.string(),lastCheckDateUnix:n.z.number(),pendingReason:t.DomainPendingReason.nullable()}),t.InferredSsoState=n.z.enum(["NitroComplete","NitroIncomplete","SelfHostedComplete","SelfHostedIncomplete","SsoConnectorIncomplete","SsoConnectorComplete","None","Unknown"]),t.SsoProvisioning=n.z.object({global:n.z.object({adminProvisioningKey:n.z.string().nullable(),isTeamProvisionedInNitro:n.z.boolean().nullable(),inferredSsoState:t.InferredSsoState,teamUuid:n.z.string().nullable(),ssoCapable:n.z.boolean().nullable()}),idpApplication:n.z.object({entityId:n.z.string().nullable(),acsUrl:n.z.string().nullable(),signOnUrl:n.z.string().nullable()}),idpMetadata:n.z.object({metadataValue:n.z.string().nullable()}),domainSetup:n.z.array(n.z.object({domainName:n.z.string().url(),verificationStatus:t.DomainVerificationStatus})),domainVerificationInfo:n.z.record(n.z.string().url(),n.z.object({subdomainValue:n.z.string().nullable(),txtValue:n.z.string().nullable(),verificationStatus:t.DomainVerificationStatus.nullable(),tokenFound:n.z.string().nullable(),pendingReason:t.DomainPendingReason.nullable()})),enableSSO:n.z.object({ssoEnabled:n.z.boolean().nullable()})})},370027:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(429465),t)},71511:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.antiphishingApi=void 0;const n=r(468224),o=r(205548),s=r(445337);t.antiphishingApi=(0,n.defineModuleApi)({name:"antiphishing",commands:{addAutoRedirectedDomain:s.AddAutoRedirectedDomainCommand},events:{},queries:{isAutoRedirectedDomain:o.IsAutoRedirectedDomainQuery}})},392556:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddAutoRedirectedDomainCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.AddAutoRedirectedDomainCommand=o},445337:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(392556),t)},63248:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(71511),t),o(r(205548),t),o(r(445337),t)},205548:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(36385),t)},36385:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IsAutoRedirectedDomainQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)()){}t.IsAutoRedirectedDomainQuery=o},899863:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.breachesApi=void 0;const n=r(468224),o=r(246368),s=r(757371);t.breachesApi=(0,n.defineModuleApi)({name:"breaches",commands:{dismissBreach:o.DismissBreachCommand,markBreachAsSeen:o.MarkBreachAsSeenCommand},events:{},queries:{breach:s.BreachQuery}})},227232:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BreachLeakedDataType=t.BreachState=void 0,function(e){e.PENDING="PENDING",e.VIEWED="VIEWED",e.ACKNOWLEDGED="ACKNOWLEDGED"}(t.BreachState||(t.BreachState={})),function(e){e.Username="username",e.Password="password",e.Email="email",e.CreditCard="creditcard",e.Phone="phone",e.Address="address",e.SSN="ssn",e.IP="ip",e.Location="geolocation",e.PersonalInfo="personalinfo",e.SocialNetwork="social"}(t.BreachLeakedDataType||(t.BreachLeakedDataType={}))},57991:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DismissBreachCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DismissBreachCommand=o},246368:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(57991),t),o(r(541010),t)},541010:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MarkBreachAsSeenCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.MarkBreachAsSeenCommand=o},291132:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(899863),t),o(r(246368),t),o(r(757371),t),o(r(227232),t)},377587:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BreachQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.BreachQuery=o},757371:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(377587),t)},36573:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.emailMonitoringApi=void 0;const n=r(468224),o=r(291931),s=r(364036);t.emailMonitoringApi=(0,n.defineModuleApi)({name:"emailMonitoring",commands:{dismissOnboardingNotification:o.DismissOnboardingNotificationCommand,optinEmail:o.OptinEmailCommand,optoutEmail:o.OptoutEmailCommand},events:{},queries:{emailList:s.EmailsListQuery,onboardingNotificationState:s.OnboardingNotificationStateQuery,domainIcon:s.DomainIconQuery}})},443710:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DismissOnboardingNotificationCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DismissOnboardingNotificationCommand=o},291931:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(443710),t),o(r(906503),t),o(r(243123),t)},906503:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptinEmailCommand=t.OptinGenericError=t.OptinTooManySubscriptionsError=t.OptinAlreadySubscribedError=t.OptinInvalidEmailError=t.OptinDataLeaksResultErrorCode=t.OptinDataLeaksResultOkCode=void 0;const n=r(468224),o=r(758807);var s;t.OptinDataLeaksResultOkCode="OK",function(e){e.INVALID_EMAIL="EMAIL_IS_INVALID",e.ALREADY_SUBSCRIBED="USER_HAS_ALREADY_AN_ACTIVE_SUBSCRIPTION",e.TOO_MANY_SUBSCRIPTIONS="USER_HAS_TOO_MANY_SUBSCRIPTIONS",e.GENERIC_ERROR="GENERIC_ERROR"}(s=t.OptinDataLeaksResultErrorCode||(t.OptinDataLeaksResultErrorCode={}));class i extends((0,o.FunctionalError)(s.INVALID_EMAIL,"")){}t.OptinInvalidEmailError=i;class a extends((0,o.FunctionalError)(s.ALREADY_SUBSCRIBED,"")){}t.OptinAlreadySubscribedError=a;class c extends((0,o.FunctionalError)(s.TOO_MANY_SUBSCRIPTIONS,"")){}t.OptinTooManySubscriptionsError=c;class u extends((0,o.FunctionalError)(s.GENERIC_ERROR,"")){}t.OptinGenericError=u;class d extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.OptinEmailCommand=d},243123:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptoutEmailCommand=t.OptoutGenericError=t.OptoutNoSubscriptionError=t.OptoutInvalidEmailError=t.OptoutDataLeaksResultErrorCode=t.OptoutDataLeaksResultOkCode=void 0;const n=r(468224),o=r(758807);var s;t.OptoutDataLeaksResultOkCode="OK",function(e){e.INVALID_EMAIL="EMAIL_IS_INVALID",e.NO_SUBSCRIPTION="USER_HAS_NO_SUBSCRIPTION",e.GENERIC_ERROR="GENERIC_ERROR"}(s=t.OptoutDataLeaksResultErrorCode||(t.OptoutDataLeaksResultErrorCode={}));class i extends((0,o.FunctionalError)(s.INVALID_EMAIL,"")){}t.OptoutInvalidEmailError=i;class a extends((0,o.FunctionalError)(s.NO_SUBSCRIPTION,"")){}t.OptoutNoSubscriptionError=a;class c extends((0,o.FunctionalError)(s.GENERIC_ERROR,"")){}t.OptoutGenericError=c;class u extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.OptoutEmailCommand=u},747725:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconMapSchema=t.IconSchema=void 0;const n=r(910295),o=["crawled","xs","sm","sm@2x","md","md.tiff","xmd","xmd@2x","l","l@2x","xl","xl@2x","46x30","46x30@2x","50x33","50x33@2x","56x56","56x56@2x","118x98","118x98@2x","160x106","160x106@2x"],s=(n.z.enum(o),o.reduce(((e,t)=>e.setKey(t,n.z.string().optional().nullable())),n.z.object({})));t.IconSchema=n.z.object({backgroundColor:n.z.string(),mainColor:n.z.string(),urls:s}),t.IconMapSchema=n.z.map(n.z.string(),t.IconSchema)},139469:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isDarkWebOnboardingState=t.DarkWebOnboardingState=void 0,function(e){e.UNKNOWN="UNKNOWN",e.SEEN="SEEN",e.NOT_SEEN="NOT_SEEN"}(t.DarkWebOnboardingState||(t.DarkWebOnboardingState={})),t.isDarkWebOnboardingState=function(e){return"UNKNOWN"===e||"SEEN"===e||"NOT_SEEN"===e}},580649:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(36573),t),o(r(291931),t),o(r(364036),t),o(r(139469),t),o(r(747725),t)},90793:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DomainIconQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.DomainIconQuery=o},866339:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EmailsListQuery=t.isDataLeaksEmailStatus=t.DataLeaksEmailStatus=void 0;const n=r(468224);!function(e){e.PENDING="pending",e.ACTIVE="active",e.DISABLED="disabled"}(t.DataLeaksEmailStatus||(t.DataLeaksEmailStatus={})),t.isDataLeaksEmailStatus=function(e){return"pending"===e||"active"===e||"disabled"===e};class o extends((0,n.defineQuery)()){}t.EmailsListQuery=o},364036:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(866339),t),o(r(628478),t),o(r(90793),t)},628478:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OnboardingNotificationStateQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.OnboardingNotificationStateQuery=o},651465:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(580649),t),o(r(291132),t),o(r(995789),t),o(r(64197),t),o(r(63248),t),o(r(615632),t),o(r(511216),t)},126328:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.masterPasswordSecurityApi=void 0;const n=r(468224),o=r(531883),s=r(340495);t.masterPasswordSecurityApi=(0,n.defineModuleApi)({name:"masterPasswordSecurity",commands:{dismissMasterPasswordLeakedNotification:o.DismissMasterPasswordLeakedNotificationCommand,temporaryCheckMasterPassword:o.TemporaryCheckMasterPasswordCommand,temporaryResetMasterPasswordLeaked:o.TemporaryResetMasterPasswordLeakedCommand},events:{},queries:{isMasterPasswordLeaked:s.IsMasterPasswordLeakedQuery,isMasterPasswordLeakedNotificationDismissed:s.IsMasterPasswordLeakedNotificationDismissedQuery,lastCheckTimestamp:s.LastCheckTimestampQuery}})},121651:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DismissMasterPasswordLeakedNotificationCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DismissMasterPasswordLeakedNotificationCommand=o},531883:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(121651),t),o(r(433750),t),o(r(493122),t)},433750:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TemporaryCheckMasterPasswordCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.TemporaryCheckMasterPasswordCommand=o},493122:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TemporaryResetMasterPasswordLeakedCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.TemporaryResetMasterPasswordLeakedCommand=o},511216:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(126328),t),o(r(340495),t),o(r(531883),t)},340495:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(521621),t),o(r(156507),t),o(r(370905),t)},156507:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IsMasterPasswordLeakedNotificationDismissedQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)()){}t.IsMasterPasswordLeakedNotificationDismissedQuery=o},521621:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IsMasterPasswordLeakedQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)()){}t.IsMasterPasswordLeakedQuery=o},370905:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LastCheckTimestampQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)()){}t.LastCheckTimestampQuery=o},638054:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.otpApi=void 0;const n=r(468224),o=r(71940);t.otpApi=(0,n.defineModuleApi)({name:"otp",commands:{},events:{},queries:{otpCode:o.OtpCodeQuery}})},615632:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(638054),t),o(r(71940),t)},71940:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(273542),t)},273542:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OtpCodeQuery=t.OtpCodeGenerationError=void 0;const n=r(468224),o=r(758807);class s extends((0,o.FunctionalError)("Cannot generate OTP code due to no OtpSecret or OtpUrl found","")){}t.OtpCodeGenerationError=s;class i extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.OtpCodeQuery=i},435592:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.passwordHealthApi=void 0;const n=r(468224),o=r(233898),s=r(624581),i=r(492776);t.passwordHealthApi=(0,n.defineModuleApi)({name:"passwordHealth",commands:{updateIsCredentialExcluded:o.UpdateIsCredentialExcludedCommand,recalculatePasswordHealth:o.RecalculatePasswordHealthCommand},events:{passwordHealthComputationFinished:s.PasswordHealthComputationFinishedEvent},queries:{credentialHealthData:i.CredentialHealthDataQuery,filterCredentials:i.FilterCredentialsQuery,score:i.ScoreQuery,compromisedCredentials:i.CompromisedCredentialsQuery,passwordHealthReport:i.PasswordHealthReportQuery}})},535297:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateIsCredentialExcludedCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.UpdateIsCredentialExcludedCommand=o},233898:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(535297),t),o(r(500929),t)},500929:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RecalculatePasswordHealthCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.RecalculatePasswordHealthCommand=o},624581:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(241016),t)},241016:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordHealthComputationFinishedEvent=void 0;const n=r(468224);class o extends((0,n.defineEvent)({scope:n.UseCaseScope.User})){}t.PasswordHealthComputationFinishedEvent=o},995789:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(435592),t),o(r(492776),t),o(r(233898),t),o(r(624581),t),o(r(724316),t)},724316:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CorruptionDataSeverity=t.CorruptionDataStrength=t.HealthFilter=t.RiskType=void 0,function(e){e.Weak="weak",e.Reused="reused",e.Compromised="compromised",e.Excluded="excluded"}(t.RiskType||(t.RiskType={})),function(e){e.All="all",e.Weak="weak",e.Reused="reused",e.Compromised="compromised",e.Excluded="excluded"}(t.HealthFilter||(t.HealthFilter={})),function(e){e.WEAK="weak",e.EXTREMELY_WEAK="extremely_weak"}(t.CorruptionDataStrength||(t.CorruptionDataStrength={})),function(e){e.COMMON="common",e.STRONG="strong"}(t.CorruptionDataSeverity||(t.CorruptionDataSeverity={}))},422234:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CompromisedCredentialsQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.CompromisedCredentialsQuery=o},125737:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CredentialHealthDataQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.CredentialHealthDataQuery=o},240938:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FilterCredentialsQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.FilterCredentialsQuery=o},492776:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(125737),t),o(r(350270),t),o(r(240938),t),o(r(422234),t),o(r(974848),t)},974848:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordHealthReportQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.PasswordHealthReportQuery=o},350270:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScoreQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.ScoreQuery=o},474355:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vaultReportApi=void 0;const n=r(468224);t.vaultReportApi=(0,n.defineModuleApi)({name:"vaultReport",commands:{},events:{},queries:{}})},64197:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(474355),t)},635818:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(691478),t)},541342:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.permissionsApi=void 0;const n=r(468224),o=r(137392),s=r(635174);t.permissionsApi=(0,n.defineModuleApi)({name:"permissions",commands:{addGroupManager:o.AddGroupManager,removeGroupManager:o.RemoveGroupManager},events:{},queries:{userPermissions:s.UserPermissionsQuery}})},714054:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddGroupManager=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.AddGroupManager=o},137392:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(714054),t),o(r(942763),t)},942763:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveGroupManager=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.RemoveGroupManager=o},691478:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(541342),t),o(r(137392),t),o(r(635174),t),o(r(445073),t)},635174:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(71367),t)},71367:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserPermissionsQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.Device})){}t.UserPermissionsQuery=o},445073:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionSchema=void 0;const n=r(910295);t.PermissionSchema=n.z.enum(["GROUP_CREATE","GROUP_DELETE","GROUP_EDIT","GROUP_READ"])},70430:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountRecoveryKeyApi=void 0;const n=r(468224),o=r(83550),s=r(188522);t.accountRecoveryKeyApi=(0,n.defineModuleApi)({name:"accountRecoveryKey",commands:{goToNextStep:o.GoToNextStepCommand,goToPrevStep:o.GoToPrevStepCommand,requestActivation:o.RequestActivationCommand,cancelActivation:o.CancelActivationCommand,confirmActivation:o.ConfirmActivationCommand},queries:{activationFlowStatus:s.ActivationFlowStatusQuery,accountRecoveryKeyStatus:s.AccountRecoveryKeyStatusQuery},events:{}})},78589:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CancelActivationCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.CancelActivationCommand=o},958661:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmActivationCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.ConfirmActivationCommand=o},844387:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GoToNextStepCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.GoToNextStepCommand=o},526546:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GoToPrevStepCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.GoToPrevStepCommand=o},83550:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(844387),t),o(r(526546),t),o(r(131614),t),o(r(958661),t),o(r(78589),t)},131614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RequestActivationCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.RequestActivationCommand=o},408532:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(70430),t),o(r(83550),t),o(r(188522),t),o(r(516143),t)},730530:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AccountRecoveryKeyStatusQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.AccountRecoveryKeyStatusQuery=o},376870:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActivationFlowStatusQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.ActivationFlowStatusQuery=o},188522:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(730530),t),o(r(376870),t)},516143:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActivationFlowViewStep=void 0,function(e){e[e.InitActivation=0]="InitActivation",e[e.DisplayKey=1]="DisplayKey",e[e.ConfirmKey=2]="ConfirmKey",e[e.ActivationDone=3]="ActivationDone",e[e.ShowError=4]="ShowError"}(t.ActivationFlowViewStep||(t.ActivationFlowViewStep={}))},331628:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(408532),t)},827331:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(146942),t)},38835:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.overridesApi=void 0;const n=r(468224),o=r(698329);t.overridesApi=(0,n.defineModuleApi)({name:"overrides",commands:{},events:{},queries:{OverridesQuery:o.OverridesQuery}})},146942:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(38835),t),o(r(698329),t),o(r(858321),t)},657848:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OverridesQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.Device})){}t.OverridesQuery=o},698329:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(657848),t)},858321:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isOverridesFileFormat=void 0,t.isOverridesFileFormat=e=>null!=e&&"object"==typeof e&&Object.values(e).every((e=>Array.isArray(e)&&e.every((e=>(e=>{if(!e||"object"!=typeof e)return!1;const t="type"in e&&void 0!==e.type&&("startsWith"===e.type||"regexp"===e.type),r="value"in e&&void 0!==e.value&&(Array.isArray(e.value)&&e.value.every((e=>"string"==typeof e))||"string"==typeof e.value),n="conditions"in e&&void 0!==e.conditions&&Array.isArray(e.conditions)&&e.conditions.every((e=>(e=>{const t="type"in e&&void 0!==e.type&&("css"===e.type||"xpath"===e.type),r="selector"in e&&void 0!==e.selector&&"string"==typeof e.selector;return t&&r})(e))),o="actions"in e&&void 0!==e.actions&&Array.isArray(e.actions)&&e.actions.every((e=>(e=>{const t="type"in e&&void 0!==e.type&&("set"===e.type||"ignore"===e.type),r="cssSelector"in e&&void 0!==e.cssSelector&&"string"==typeof e.cssSelector;return t&&r})(e)));return t&&r&&n&&o})(e)))))},421138:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.authenticationFlowApi=void 0;const n=r(468224),o=r(237773),s=r(331477);t.authenticationFlowApi=(0,n.defineModuleApi)({name:"authenticationFlow",commands:{changeLogin:s.ChangeAccountEmailCommand,changeTwoFactorAuthenticationOtpType:s.ChangeTwoFactorAuthenticationOtpTypeCommand,clearError:s.ClearErrorCommand,resendEmailToken:s.ResendEmailTokenCommand,resendPushNotification:s.ResendPushNotificationCommand,sendAccountEmail:s.SendAccountEmailCommand,sendMasterPassword:s.SendMasterPasswordCommand,submitBackupCode:s.SubmitBackupCodeCommand,submitEmailToken:s.SubmitEmailTokenCommand,submitTotp:s.SubmitTotpCommand,switchToDashlaneAuthenticator:s.SwitchToDashlaneAuthenticatorCommand,switchToEmailToken:s.SwitchToEmailTokenCommand,retryWebAuthnAuthentication:s.RetryWebAuthnAuthenticationCommand,useMasterPassword:s.UseMasterPasswordCommand,webAuthnAuthenticationFail:s.WebAuthnAuthenticationFailCommand,logout:s.LogoutCommand,lockSession:s.LockCommand,loginViaSSO:s.LoginViaSSOCommand,initiateLoginWithSSO:s.InitiateLoginWithSSOCommand,initiateAutologinWithSSOCommand:s.InitiateAutologinWithSSOCommand},queries:{authenticationFlowStatus:o.AuthenticationFlowStatusQuery,getSsoInfoQuery:o.GetSsoInfoQuery},events:{}})},331477:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InitiateAutologinWithSSOCommand=t.InitiateLoginWithSSOCommand=t.LoginViaSSOCommand=t.LockCommand=t.LogoutCommand=t.WebAuthnAuthenticationFailCommand=t.UseMasterPasswordCommand=t.RetryWebAuthnAuthenticationCommand=t.ClearErrorCommand=t.SwitchToEmailTokenCommand=t.ResendPushNotificationCommand=t.SendMasterPasswordCommand=t.ResendEmailTokenCommand=t.ChangeTwoFactorAuthenticationOtpTypeCommand=t.SubmitBackupCodeCommand=t.SubmitTotpCommand=t.SubmitEmailTokenCommand=t.SwitchToDashlaneAuthenticatorCommand=t.ChangeAccountEmailCommand=t.SendAccountEmailCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.SendAccountEmailCommand=o;class s extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.ChangeAccountEmailCommand=s;class i extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.SwitchToDashlaneAuthenticatorCommand=i;class a extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.SubmitEmailTokenCommand=a;class c extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.SubmitTotpCommand=c;class u extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.SubmitBackupCodeCommand=u;class d extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.ChangeTwoFactorAuthenticationOtpTypeCommand=d;class l extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.ResendEmailTokenCommand=l;class p extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.SendMasterPasswordCommand=p;class f extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.ResendPushNotificationCommand=f;class m extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.SwitchToEmailTokenCommand=m;class h extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.ClearErrorCommand=h;class y extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.RetryWebAuthnAuthenticationCommand=y;class v extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.UseMasterPasswordCommand=v;class b extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.WebAuthnAuthenticationFailCommand=b;class g extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.LogoutCommand=g;class _ extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.LockCommand=_;class O extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.LoginViaSSOCommand=O;class C extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.InitiateLoginWithSSOCommand=C;class S extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.InitiateAutologinWithSSOCommand=S},237773:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetSsoInfoQuery=t.AuthenticationFlowStatusQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.Device})){}t.AuthenticationFlowStatusQuery=o;class s extends((0,n.defineQuery)({scope:n.UseCaseScope.Device})){}t.GetSsoInfoQuery=s},927549:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SSOMigrationType=t.SsoMigrationServerMethod=void 0,function(e){e.SSO="sso",e.MP="master_password"}(t.SsoMigrationServerMethod||(t.SsoMigrationServerMethod={})),function(e){e[e.MP_TO_SSO=0]="MP_TO_SSO",e[e.MP_TO_SSO_WITH_INFO=1]="MP_TO_SSO_WITH_INFO",e[e.SSO_TO_MP=2]="SSO_TO_MP"}(t.SSOMigrationType||(t.SSOMigrationType={}))},435105:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(421138),t),o(r(331477),t),o(r(237773),t),o(r(927549),t)},80552:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.autofillDataApi=void 0;const n=r(468224);t.autofillDataApi=(0,n.defineModuleApi)({name:"autofillData",commands:{},events:{},queries:{}})},634947:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(80552),t)},562301:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isArrayOfAutofillableDataModel=t.isAutofillableDataModel=t.CREDENTIAL_DATA_MODELS=t.FORM_DATA_MODELS=void 0,t.FORM_DATA_MODELS=["KWAddress","KWBankStatement","KWCompany","KWDriverLicence","KWEmail","KWFiscalStatement","KWIDCard","KWIdentity","KWMerchand","KWPassport","KWPaymentMean_creditCard","KWPaymentMean_paypal","KWPersonalWebsite","KWPhone","KWSecureNote","KWSecureNoteCategory","KWSocialSecurityStatement"],t.CREDENTIAL_DATA_MODELS=["KWAuthentifiant","KWGeneratedPassword","KWPasskey"];const r=[...t.FORM_DATA_MODELS,...t.CREDENTIAL_DATA_MODELS];t.isAutofillableDataModel=e=>!!e&&"string"==typeof e&&r.includes(e),t.isArrayOfAutofillableDataModel=e=>!!e&&"object"==typeof e&&Array.isArray(e)&&e.every(t.isAutofillableDataModel)},153354:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(200391),t),o(r(253644),t),o(r(719215),t),o(r(562301),t),o(r(286302),t)},286302:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isDashlaneDisabledPermanently=t.isArrayOfUserAutofillCorrections=void 0,t.isArrayOfUserAutofillCorrections=e=>e instanceof Array&&!e.find((e=>{return!("object"==typeof(t=e)&&null!==t&&"id"in t&&"fieldIdentifier"in t&&"domain"in t);var t})),t.isDashlaneDisabledPermanently=e=>"none"===e.correctedDataSource},200391:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},253644:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isVaultSourceType=t.isOtherSourceType=t.OtherSourceType=void 0;const n=r(719215);var o;!function(e){e.NewPassword="newPassword",e.SubmitButton="submitButton",e.WebauthnConditionalUI="WebauthnConditionalUI"}(o=t.OtherSourceType||(t.OtherSourceType={})),t.isOtherSourceType=e=>Object.values(o).includes(e),t.isVaultSourceType=e=>e in n.VaultSourceType},719215:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VaultSourceType=void 0,function(e){e.Address="Address",e.BankAccount="BankAccount",e.Company="Company",e.Credential="Credential",e.CredentialCategory="CredentialCategory",e.DriverLicense="DriverLicense",e.Email="Email",e.FiscalId="FiscalId",e.GeneratedPassword="GeneratedPassword",e.IdCard="IdCard",e.Identity="Identity",e.NoteCategory="NoteCategory",e.Note="Note",e.Passport="Passport",e.Passkey="Passkey",e.PaymentCard="PaymentCard",e.PersonalWebsite="PersonalWebsite",e.Phone="Phone",e.SocialSecurityId="SocialSecurityId"}(t.VaultSourceType||(t.VaultSourceType={}))},124979:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(88709),t),o(r(153354),t),o(r(634947),t)},37513:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.autofillSettingsApi=void 0;const n=r(468224),o=r(61375),s=r(654345),i=r(311639),a=r(400034),c=r(450030);t.autofillSettingsApi=(0,n.defineModuleApi)({name:"autofillSettings",commands:{toggleDashlane:i.ToggleDashlaneCommand,enableAnalysis:c.EnableAnalysisCommand,enableAutofillOnForms:c.EnableAutofillOnFormsCommand,enableAutofillOnLogins:c.EnableAutofillOnLoginsCommand,enableFollowUpNotification:c.EnableFollowUpNotificationCommand,disableAnalysis:c.DisableAnalysisCommand,disableAutofillOnForms:c.DisableAutofillOnFormsCommand,disableAutofillOnLogins:c.DisableAutofillOnLoginsCommand,disableFollowUpNotification:c.DisableFollowUpNotificationCommand,addDisabledSourceTypes:s.AddDisabledSourceTypesCommand,removeDisabledSourceTypes:o.RemoveDisabledSourceTypesCommand,setUserAutofillCorrections:c.SetUserAutofillCorrectionsCommand},events:{},queries:{getAnalysisStatusOnUrl:a.GetAnalysisStatusOnUrlQuery,getAutofillSettings:a.GetAutofillSettingsQuery,getUserAutofillCorrections:a.GetUserAutofillCorrectionsQuery}})},654345:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddDisabledSourceTypesCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.AddDisabledSourceTypesCommand=o},455943:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DisableAnalysisCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DisableAnalysisCommand=o},622351:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DisableAutofillOnFormsCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DisableAutofillOnFormsCommand=o},971113:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DisableAutofillOnLoginsCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DisableAutofillOnLoginsCommand=o},316037:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DisableFollowUpNotificationCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DisableFollowUpNotificationCommand=o},788735:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EnableAnalysisCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.EnableAnalysisCommand=o},835332:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EnableAutofillOnFormsCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.EnableAutofillOnFormsCommand=o},832956:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EnableAutofillOnLoginsCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.EnableAutofillOnLoginsCommand=o},368762:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EnableFollowUpNotificationCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.EnableFollowUpNotificationCommand=o},450030:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(654345),t),o(r(455943),t),o(r(622351),t),o(r(971113),t),o(r(316037),t),o(r(788735),t),o(r(835332),t),o(r(832956),t),o(r(368762),t),o(r(61375),t),o(r(311639),t),o(r(564231),t)},61375:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveDisabledSourceTypesCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.RemoveDisabledSourceTypesCommand=o},564231:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SetUserAutofillCorrectionsCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.SetUserAutofillCorrectionsCommand=o},311639:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleDashlaneCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.ToggleDashlaneCommand=o},88709:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(37513),t),o(r(400034),t),o(r(450030),t)},967258:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetAnalysisStatusOnUrlQuery=t.AnalysisStatus=void 0;const n=r(468224);!function(e){e.ANALYSIS_ENABLED="ANALYSIS_ENABLED",e.ANALYSIS_DISABLED_BY_USER="ANALYSIS_DISABLED_BY_USER",e.ANALYSIS_DISABLED_BY_B2B_ADMIN="ANALYSIS_DISABLED_BY_B2B_ADMIN",e.ANALYSIS_DISABLED_BY_KILLSWITCH="ANALYSIS_DISABLED_BY_KILLSWITCH",e.ANALYSIS_DISABLED_BY_2FA_ENFORCEMENT="ANALYSIS_DISABLED_BY_2FA_ENFORCEMENT"}(t.AnalysisStatus||(t.AnalysisStatus={}));class o extends((0,n.defineQuery)({scope:n.UseCaseScope.Device})){}t.GetAnalysisStatusOnUrlQuery=o},331270:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetAutofillSettingsQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.GetAutofillSettingsQuery=o},631027:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetUserAutofillCorrectionsQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.GetUserAutofillCorrectionsQuery=o},400034:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(967258),t),o(r(331270),t),o(r(631027),t)},714258:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.auditLogsApi=void 0;const n=r(468224),o=r(112524);t.auditLogsApi=(0,n.defineModuleApi)({name:"auditLogs",commands:{storeAuditLogs:o.StoreAuditLogsCommand},events:{},queries:{}})},717033:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(112524),t)},112524:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StoreAuditLogsCommand=t.StoreAuditLogsInvalidLogsError=void 0;const n=r(468224);!function(e){e.AUDIT_LOG_MISSING_JSON_SCHEMA="AUDIT_LOG_MISSING_JSON_SCHEMA",e.AUDIT_LOG_INVALID_JSON_FOR_JSON_SCHEMA="AUDIT_LOG_INVALID_JSON_FOR_JSON_SCHEMA",e.AUDIT_LOG_INVALID_LOG_SCHEMA_TYPE_OR_VERSION="AUDIT_LOG_INVALID_LOG_SCHEMA_TYPE_OR_VERSION",e.AUDIT_LOG_ERROR_READING_JSON_SCHEMA="AUDIT_LOG_ERROR_READING_JSON_SCHEMA",e.STORING_SENSITIVE_AUDIT_LOGS_NOT_ALLOWED="STORING_SENSITIVE_AUDIT_LOGS_NOT_ALLOWED"}(t.StoreAuditLogsInvalidLogsError||(t.StoreAuditLogsInvalidLogsError={}));class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.StoreAuditLogsCommand=o},761899:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(714258),t),o(r(717033),t),o(r(975711),t)},20676:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},728279:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AuditLogCategory=t.AuditLogType=void 0,function(e){e.UserInvited="user_invited",e.UserReinvited="user_reinvited",e.UserRemoved="user_removed",e.TeamCaptainAdded="team_captain_added",e.TeamCaptainRemoved="team_captain_removed",e.GroupManagerAdded="group_manager_added",e.GroupManagerRemoved="group_manager_removed",e.MasterPasswordResetAccepted="master_password_reset_accepted",e.MasterPasswordResetRefused="master_password_reset_refused",e.BillingAdminAdded="billing_admin_added",e.BillingAdminRemoved="billing_admin_removed",e.UserGroupCreated="user_group_created",e.UserGroupRenamed="user_group_renamed",e.UserGroupDeleted="user_group_deleted",e.UserJoinedUserGroup="user_joined_user_group",e.UserLeftUserGroup="user_left_user_group",e.UserInvitedToUserGroup="user_invited_to_user_group",e.UserDeclinedInviteToUserGroup="user_declined_invite_to_user_group",e.UserRemovedFromUserGroup="user_removed_from_user_group",e.DomainRequested="domain_requested",e.DomainValidated="domain_validated",e.SensitiveLogsEnabled="collect_sensitive_data_audit_logs_enabled",e.SensitiveLogsDisabled="collect_sensitive_data_audit_logs_disabled",e.SsoIdpMetadataSet="sso_idp_metadata_set",e.SsoServiceProviderUrlSet="sso_service_provider_url_set",e.SsoEnabled="sso_enabled",e.SsoDisabled="sso_disabled",e.TeamNameChanged="team_name_changed",e.NewBillingPeriodCreated="new_billing_period_created",e.SeatsAdded="seats_added",e.ContactEmailChanged="contact_email_changed",e.MasterPasswordMobileResetEnabled="master_password_mobile_reset_enabled",e.MasterPasswordMobileResetDisabled="master_password_mobile_reset_disabled",e.MasterPasswordMobileReset="master_password_mobile_reset",e.MasterPasswordChanged="master_password_changed",e.MpToViewPasswordsEnabled="mp_to_view_passwords_enabled",e.MpToViewPasswordsDisabled="mp_to_view_passwords_disabled",e.TwoFactorAuthenticationLoginMethodAdded="two_factor_authentication_login_method_added",e.TwoFactorAuthenticationLoginMethodRemoved="two_factor_authentication_login_method_removed",e.BiometricSignInDisabled="biometric_sign_in_disabled",e.DWMEmailAdded="dwm_email_added",e.DWMEmailRemoved="dwm_email_removed",e.DWMAlertReceived="dwm_alert_received",e.UserDeviceAdded="user_device_added",e.UserDeviceRemoved="user_device_removed",e.UserDeviceLogin="user_device_login",e.MasterPasswordReset="master_password_reset",e.RequestedAccountRecovery="requested_account_recovery",e.CompletedAccountRecovery="completed_account_recovery",e.UserSharedCredentialWithGroup="user_shared_credential_with_group",e.UserSharedCredentialWithEmail="user_shared_credential_with_email",e.UserSharedCredentialWithExternal="user_shared_credential_with_external",e.UserSharedSecureNoteWithGroup="user_shared_secure_note_with_group",e.UserSharedSecureNoteWithEmail="user_shared_secure_note_with_email",e.UserSharedSecureNoteWithExternal="user_shared_secure_note_with_external",e.UserRevokedSharedCredentialGroup="user_revoked_shared_credential_group",e.UserRevokedSharedCredentialEmail="user_revoked_shared_credential_email",e.UserRevokedSharedCredentialExternal="user_revoked_shared_credential_external",e.UserRevokedSharedSecureNoteGroup="user_revoked_shared_secure_note_group",e.UserRevokedSharedSecureNoteEmail="user_revoked_shared_secure_note_email",e.UserRevokedSharedSecureNoteExternal="user_revoked_shared_secure_note_external",e.UserAcceptedSharingInviteSecureNote="user_accepted_sharing_invite_secure_note",e.UserRejectedSharingInviteSecureNote="user_rejected_sharing_invite_secure_note",e.UserAcceptedSharingInviteCredential="user_accepted_sharing_invite_credential",e.UserRejectedSharingInviteCredential="user_rejected_sharing_invite_credential",e.UserCreatedCredential="user_created_credential",e.UserModifiedCredential="user_modified_credential",e.UserDeletedCredential="user_deleted_credential",e.UserImportedCredentials="user_imported_credentials",e.UserCreatedSecureNote="user_created_secure_note",e.UserModifiedSecureNote="user_modified_secure_note",e.UserDeletedSecureNote="user_deleted_secure_note"}(t.AuditLogType||(t.AuditLogType={})),function(e){e.Account="account",e.Authentication="authentication",e.DarkWebMonitoring="dark_web_monitoring",e.Groups="groups",e.ImportExport="import_export",e.TeamSettings="team_settings",e.TeamSettingsActiveDirectory="team_settings_activedirectory",e.TeamSettingsPolicies="team_settings_policies",e.TeamSettingsSAMLProvisioning="team_settings_samlprovisioning",e.TeamSettingsSCIM="team_settings_scim",e.TeamSettingsSSO="team_settings_sso",e.Sharing="sharing",e.UserSettings="user_settings",e.UserSettingsAccountRecovery="user_settings_accountrecovery",e.Users="users",e.VaultIDs="vault_ids",e.VaultPasswords="vault_passwords",e.VaultPayments="vault_payments",e.VaultPersonalInfo="vault_personalinfo",e.VaultSecureNotes="vault_securenotes"}(t.AuditLogCategory||(t.AuditLogCategory={}))},8132:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},535484:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},295312:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},169767:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},975711:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(728279),t),o(r(20676),t),o(r(8132),t),o(r(295312),t),o(r(169767),t),o(r(317098),t),o(r(45665),t),o(r(145491),t),o(r(37564),t),o(r(266767),t),o(r(535484),t)},317098:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},45665:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},145491:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},37564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},266767:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},750990:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(761899),t)},26938:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(799314),t)},362884:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sessionApi=void 0;const n=r(468224),o=r(925885),s=r(854148),i=r(278049);t.sessionApi=(0,n.defineModuleApi)({name:"session",commands:{SampleCommand:o.SampleCommand},events:{SampleEvent:s.SampleEvent},queries:{SampleQuery:i.SampleQuery}})},925885:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(312114),t)},312114:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SampleCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.SampleCommand=o},854148:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(608323),t)},608323:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SampleEvent=void 0;const n=r(468224);class o extends((0,n.defineEvent)({scope:n.UseCaseScope.User})){}t.SampleEvent=o},799314:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(362884),t),o(r(925885),t),o(r(854148),t),o(r(278049),t)},278049:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(283062),t)},283062:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SampleQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.SampleQuery=o},643838:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(775696),t),o(r(920985),t),o(r(981831),t)},675676:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingCollectionsApi=void 0;const n=r(468224),o=r(540177);t.sharingCollectionsApi=(0,n.defineModuleApi)({name:"sharingCollections",commands:{},events:{},queries:{getSharedCollections:o.GetSharedCollectionsQuery}})},981831:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(675676),t),o(r(540177),t)},60915:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetSharedCollectionsQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.GetSharedCollectionsQuery=o},540177:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(60915),t)},230438:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingInvitesApi=void 0;const n=r(468224),o=r(55498),s=r(278044);t.sharingInvitesApi=(0,n.defineModuleApi)({name:"sharingInvites",commands:{RefuseItemGroupInviteCommand:o.RefuseItemGroupInviteCommand,RefuseUserGroupInviteCommand:o.RefuseUserGroupInviteCommand},events:{},queries:{GetInvitesQuery:s.GetInvitesQuery}})},55498:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(389494),t),o(r(842166),t)},389494:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RefuseItemGroupInviteCommand=t.getRefuseItemGroupInviteFunctionalError=t.RefuseItemGroupInviteUserIsNotInPendingStatusError=t.RefuseItemGroupInviteNotEnoughAdminsError=t.RefuseItemGroupInviteInvalidItemGroupRevisionError=t.RefuseItemGroupInviteUserGroupIsNotInItemGroupError=t.RefuseItemGroupInviteUserIsNotInItemGroupError=t.RefuseItemGroupInviteGroupHasInvalidStatusError=t.RefuseItemGroupInviteAuthorHasInvalidStatusError=t.RefuseItemGroupInviteNotFoundError=t.RefuseItemGroupInviteResultErrorCode=void 0;const n=r(468224),o=r(758807);var s;!function(e){e.ItemGroupNotFound="ItemGroupNotFound",e.AuthorHasInvalidStatus="AuthorHasInvalidStatus",e.GroupHasInvalidStatus="GroupHasInvalidStatus",e.UserIsNotInItemGroup="UserIsNotInItemGroup",e.UserGroupIsNotInItemGroup="UserGroupIsNotInItemGroup",e.InvalidItemGroupRevision="InvalidItemGroupRevision",e.NotEnoughAdmins="NotEnoughAdmins",e.UserIsNotInPendingStatus="UserIsNotInPendingStatus"}(s=t.RefuseItemGroupInviteResultErrorCode||(t.RefuseItemGroupInviteResultErrorCode={}));class i extends((0,o.FunctionalError)(s.ItemGroupNotFound,"Item Group not found")){}t.RefuseItemGroupInviteNotFoundError=i;class a extends((0,o.FunctionalError)(s.AuthorHasInvalidStatus,"User is not in accepted/pending status (already refused or revoked)")){}t.RefuseItemGroupInviteAuthorHasInvalidStatusError=a;class c extends((0,o.FunctionalError)(s.GroupHasInvalidStatus,"UserGroup is not in accepted/pending status (already refused or revoked)")){}t.RefuseItemGroupInviteGroupHasInvalidStatusError=c;class u extends((0,o.FunctionalError)(s.UserIsNotInItemGroup,"User is not part of item group")){}t.RefuseItemGroupInviteUserIsNotInItemGroupError=u;class d extends((0,o.FunctionalError)(s.UserGroupIsNotInItemGroup,"User group is not part of item group")){}t.RefuseItemGroupInviteUserGroupIsNotInItemGroupError=d;class l extends((0,o.FunctionalError)(s.InvalidItemGroupRevision,"Item group revision is not valid")){}t.RefuseItemGroupInviteInvalidItemGroupRevisionError=l;class p extends((0,o.FunctionalError)(s.NotEnoughAdmins,"The operation would let the item group with no admin")){}t.RefuseItemGroupInviteNotEnoughAdminsError=p;class f extends((0,o.FunctionalError)(s.UserIsNotInPendingStatus,'User is not in "pending" status or not part of a group')){}t.RefuseItemGroupInviteUserIsNotInPendingStatusError=f,t.getRefuseItemGroupInviteFunctionalError=function(e){switch(e){case"AUTHOR_HAS_INVALID_STATUS":return new a;case"GROUP_HAS_INVALID_STATUS":return new c;case"USER_IS_NOT_IN_ITEM_GROUP":return new u;case"USER_GROUP_IS_NOT_IN_ITEM_GROUP":return new d;case"INVALID_ITEM_GROUP_REVISION":return new l;case"NOT_ENOUGH_ADMINS":return new p;case"USER_IS_NOT_IN_PENDING_STATUS":return new f;default:throw new Error("Unknown server error")}};class m extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.RefuseItemGroupInviteCommand=m},842166:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RefuseUserGroupInviteCommand=t.getRefuseUserGroupInviteFunctionalError=t.RefuseUserGroupInviteAuthorHasInvalidStatusError=t.RefuseUserGroupInviteGroupHasInvalidStatusError=t.RefuseUserGroupInviteUserIsNotInPendingStatusError=t.RefuseUserGroupInviteUserIsNotInUserGroupError=t.RefuseUserGroupInviteInsufficientPrivilegesError=t.RefuseUserGroupInviteUserGroupUpdateConflictError=t.RefuseUserGroupInviteInvalidItemGroupRevisionError=t.RefuseUserGroupInviteUserGroupIsNotFoundError=t.RefuseUserGroupInviteInvalidTeamIdError=t.RefuseUserGroupInviteNotFoundError=t.RefuseUserGroupInviteResultErrorCode=void 0;const n=r(468224),o=r(758807);var s;!function(e){e.UserGroupNotFound="UserGroupNotFound",e.InvalidTeamId="InvalidTeamId",e.UserGroupIsNotFound="UserGroupIsNotFound",e.InvalidItemGroupRevision="InvalidItemGroupRevision",e.UserGroupUpdateConflict="UserGroupUpdateConflict",e.InsufficientPrivileges="InsufficientPrivileges",e.UserIsNotInUserGroup="UserIsNotInUserGroup",e.UserIsNotInPendingStatus="UserIsNotInPendingStatus",e.GroupHasInvalidStatus="GroupHasInvalidStatus",e.AuthorHasInvalidStatus="AuthorHasInvalidStatus"}(s=t.RefuseUserGroupInviteResultErrorCode||(t.RefuseUserGroupInviteResultErrorCode={}));class i extends((0,o.FunctionalError)(s.UserGroupNotFound,"User Group not found")){}t.RefuseUserGroupInviteNotFoundError=i;class a extends((0,o.FunctionalError)(s.InvalidTeamId,"Provided Team ID is not a number")){}t.RefuseUserGroupInviteInvalidTeamIdError=a;class c extends((0,o.FunctionalError)(s.UserGroupIsNotFound,"User group for provided ID does not exist")){}t.RefuseUserGroupInviteUserGroupIsNotFoundError=c;class u extends((0,o.FunctionalError)(s.InvalidItemGroupRevision,"User group revision is not valid")){}t.RefuseUserGroupInviteInvalidItemGroupRevisionError=u;class d extends((0,o.FunctionalError)(s.UserGroupUpdateConflict,"Conflict between users attempting to update the same user group")){}t.RefuseUserGroupInviteUserGroupUpdateConflictError=d;class l extends((0,o.FunctionalError)(s.InsufficientPrivileges,"The user does not have User Group permission to refuse the invitation")){}t.RefuseUserGroupInviteInsufficientPrivilegesError=l;class p extends((0,o.FunctionalError)(s.UserIsNotInUserGroup,"User is not part of a group")){}t.RefuseUserGroupInviteUserIsNotInUserGroupError=p;class f extends((0,o.FunctionalError)(s.UserIsNotInPendingStatus,'User is not in "pending" status or not part of a group')){}t.RefuseUserGroupInviteUserIsNotInPendingStatusError=f;class m extends((0,o.FunctionalError)(s.GroupHasInvalidStatus,'UserGroup is not in "accepted" or "pending" status (already refused or revoked)')){}t.RefuseUserGroupInviteGroupHasInvalidStatusError=m;class h extends((0,o.FunctionalError)(s.AuthorHasInvalidStatus,"User is not in accepted/pending status (already refused or revoked)")){}t.RefuseUserGroupInviteAuthorHasInvalidStatusError=h,t.getRefuseUserGroupInviteFunctionalError=function(e){switch(e){case"INVALID_TEAM_ID":return new a;case"USER_GROUP_IS_NOT_FOUND":return new c;case"INVALID_USER_GROUP_REVISION":return new u;case"USER_GROUP_UPDATE_CONFLICT":return new d;case"INSUFFICIENT_PRIVILEGES":return new l;case"USER_IS_NOT_IN_USER_GROUP":return new p;case"USER_IS_NOT_IN_PENDING_STATUS":return new f;case"GROUP_HAS_INVALID_STATUS":return new m;case"AUTHOR_HAS_INVALID_STATUS":return new h;default:throw new Error("Unknown server error")}};class y extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.RefuseUserGroupInviteCommand=y},920985:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(230438),t),o(r(55498),t),o(r(278044),t)},634173:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetInvitesQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.GetInvitesQuery=o},278044:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(634173),t)},476293:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingItemsApi=void 0;const n=r(468224),o=r(861735);t.sharingItemsApi=(0,n.defineModuleApi)({name:"sharingItems",commands:{},events:{},queries:{sharingEnabled:o.SharingEnabledQuery}})},775696:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(476293),t),o(r(861735),t)},861735:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(296732),t)},296732:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SharingEnabledQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.SharingEnabledQuery=o},971664:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(341228),t),o(r(155775),t),o(r(285155),t),o(r(976045),t)},341228:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.syncApi=void 0;const n=r(468224),o=r(155775),s=r(285155);t.syncApi=(0,n.defineModuleApi)({name:"sync",commands:{SyncCommand:o.SyncCommand},queries:{SyncProgressQuery:s.SyncProgressQuery},events:{}})},155775:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}t.SyncCommand=o},285155:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncProgressQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.Device})){}t.SyncProgressQuery=o},976045:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncStatuses=void 0,function(e){e.READY="ready",e.IN_PROGRESS="in_progress",e.SUCCESS="success",e.FAILURE="failure"}(t.SyncStatuses||(t.SyncStatuses={}))},702639:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(953784),t)},818232:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.teamMembersApi=void 0;const n=r(468224),o=r(828539);t.teamMembersApi=(0,n.defineModuleApi)({name:"teamMembers",commands:{ProposeMembersCommand:o.ProposeMembersCommand},events:{},queries:{}})},828539:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(746316),t)},746316:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProposeMembersCommand=t.getProposeMembersFunctionalError=t.ProposeMembersCannotAddSeatDuringGracePeriod=t.ProposeMembersNotBillingAdmin=t.ProposeMembersPaymentFailed=t.ProposeMembersUserTeamInviteTokenNotFound=t.ProposeMembersNoFreeSloFreePlan=t.ProposeMembersNoFreeSlot=t.ProposeMembersInvalidOriginError=t.ProposeMembersErrorType=void 0;const n=r(468224),o=r(758807);var s;!function(e){e.InvalidOrigin="InvalidOrigin",e.NoFreeSlot="NoFreeSlot",e.NoFreeSlotFreePlan="NoFreeSlotFreePlan",e.UserTeamInviteTokenNotFound="UserTeamInviteTokenNotFound",e.PaymentFailed="PaymentFailed",e.NotBillingAdmin="NotBillingAdmin",e.CannotAddSeatDuringGracePeriod="CannotAddSeatDuringGracePeriod"}(s=t.ProposeMembersErrorType||(t.ProposeMembersErrorType={}));class i extends((0,o.FunctionalError)(s.InvalidOrigin,"Invalid origin")){}t.ProposeMembersInvalidOriginError=i;class a extends((0,o.FunctionalError)(s.NoFreeSlot,"No free slot")){}t.ProposeMembersNoFreeSlot=a;class c extends((0,o.FunctionalError)(s.NoFreeSlotFreePlan,"No free slot in free plan")){}t.ProposeMembersNoFreeSloFreePlan=c;class u extends((0,o.FunctionalError)(s.UserTeamInviteTokenNotFound,"No invite token to a team available for user")){}t.ProposeMembersUserTeamInviteTokenNotFound=u;class d extends((0,o.FunctionalError)(s.PaymentFailed,"Payment failed")){}t.ProposeMembersPaymentFailed=d;class l extends((0,o.FunctionalError)(s.NotBillingAdmin,"User is not the billing admin")){}t.ProposeMembersNotBillingAdmin=l;class p extends((0,o.FunctionalError)(s.CannotAddSeatDuringGracePeriod,"Seats cannot be added during grace period")){}t.ProposeMembersCannotAddSeatDuringGracePeriod=p,t.getProposeMembersFunctionalError=function(e){switch(e){case"invalid_origin":return new i;case"no_free_slot":return new a;case"no_free_slot_free_plan":return new c;case"USER_TEAM_INVITE_TOKEN_NOT_FOUND":return new u;case"payment_failed":return new d;case"not_billing_admin":return new l;case"cannot_add_seat_during_grace_period":return new p;default:throw new Error("Unknown server error")}};class f extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.ProposeMembersCommand=f},914054:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(24699),t)},24699:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SampleEvent=void 0;const n=r(468224);class o extends((0,n.defineEvent)({scope:n.UseCaseScope.User})){}t.SampleEvent=o},953784:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(818232),t),o(r(828539),t),o(r(914054),t),o(r(162535),t)},162535:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(947438),t)},947438:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SampleQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.SampleQuery=o},216530:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(477704),t),o(r(621028),t)},143541:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vaultItemsCrudApi=void 0;const n=r(468224),o=r(651836),s=r(850154),i=r(724094);t.vaultItemsCrudApi=(0,n.defineModuleApi)({name:"vaultItemsCrud",commands:{createVaultItem:o.CreateVaultItemCommand,deleteVaultItems:o.DeleteVaultItemsCommand,updateVaultItem:o.UpdateVaultItemCommand,emitTemporaryVaultItemEvent:o.EmitTemporaryVaultItemEventCommand},events:{createdEvent:s.CreatedEvent,deletedEvent:s.DeletedEvent,updatedEvent:s.UpdatedEvent},queries:{query:i.VaultItemsQuery}})},808892:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateVaultItemCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.CreateVaultItemCommand=o},201704:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteVaultItemsCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DeleteVaultItemsCommand=o},529160:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EmitTemporaryVaultItemEventCommand=t.EventType=void 0;const n=r(468224);!function(e){e.Deleted="deleted",e.Updated="updated",e.Created="created"}(t.EventType||(t.EventType={}));class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.EmitTemporaryVaultItemEventCommand=o},651836:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(808892),t),o(r(201704),t),o(r(617863),t),o(r(529160),t)},617863:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateVaultItemCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.UpdateVaultItemCommand=o},277911:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseEvent=void 0;const n=r(468224);class o extends((0,n.defineEvent)({scope:n.UseCaseScope.User})){}t.BaseEvent=o},9656:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreatedEvent=void 0;const n=r(277911);class o extends n.BaseEvent{}t.CreatedEvent=o},876962:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeletedEvent=void 0;const n=r(277911);class o extends n.BaseEvent{}t.DeletedEvent=o},850154:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(9656),t),o(r(876962),t),o(r(335713),t)},335713:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdatedEvent=void 0;const n=r(277911);class o extends n.BaseEvent{}t.UpdatedEvent=o},477704:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(143541),t),o(r(651836),t),o(r(850154),t),o(r(724094),t),o(r(233475),t)},724094:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(495859),t)},495859:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VaultItemsQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.VaultItemsQuery=o},976666:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Country=void 0,function(e){e.AD="AD",e.AE="AE",e.AF="AF",e.AG="AG",e.AI="AI",e.AL="AL",e.AM="AM",e.AO="AO",e.AQ="AQ",e.AR="AR",e.AS="AS",e.AT="AT",e.AU="AU",e.AW="AW",e.AX="AX",e.AZ="AZ",e.BA="BA",e.BB="BB",e.BD="BD",e.BE="BE",e.BF="BF",e.BG="BG",e.BH="BH",e.BI="BI",e.BJ="BJ",e.BL="BL",e.BM="BM",e.BN="BN",e.BO="BO",e.BR="BR",e.BS="BS",e.BT="BT",e.BV="BV",e.BW="BW",e.BY="BY",e.BZ="BZ",e.CA="CA",e.CC="CC",e.CD="CD",e.CF="CF",e.CG="CG",e.CH="CH",e.CI="CI",e.CK="CK",e.CL="CL",e.CM="CM",e.CN="CN",e.CO="CO",e.CR="CR",e.CU="CU",e.CV="CV",e.CX="CX",e.CY="CY",e.CZ="CZ",e.DE="DE",e.DJ="DJ",e.DK="DK",e.DM="DM",e.DO="DO",e.DZ="DZ",e.EC="EC",e.EE="EE",e.EG="EG",e.EH="EH",e.ER="ER",e.ES="ES",e.ET="ET",e.FI="FI",e.FJ="FJ",e.FK="FK",e.FM="FM",e.FO="FO",e.FR="FR",e.GA="GA",e.GB="GB",e.GD="GD",e.GE="GE",e.GF="GF",e.GG="GG",e.GH="GH",e.GI="GI",e.GL="GL",e.GM="GM",e.GN="GN",e.GP="GP",e.GQ="GQ",e.GR="GR",e.GS="GS",e.GT="GT",e.GU="GU",e.GW="GW",e.GY="GY",e.HK="HK",e.HM="HM",e.HN="HN",e.HR="HR",e.HT="HT",e.HU="HU",e.ID="ID",e.IE="IE",e.IL="IL",e.IM="IM",e.IN="IN",e.IO="IO",e.IQ="IQ",e.IR="IR",e.IS="IS",e.IT="IT",e.JE="JE",e.JM="JM",e.JO="JO",e.JP="JP",e.KE="KE",e.KG="KG",e.KH="KH",e.KI="KI",e.KM="KM",e.KN="KN",e.KP="KP",e.KR="KR",e.KW="KW",e.KY="KY",e.KZ="KZ",e.LA="LA",e.LB="LB",e.LC="LC",e.LI="LI",e.LK="LK",e.LR="LR",e.LS="LS",e.LT="LT",e.LU="LU",e.LV="LV",e.LY="LY",e.MA="MA",e.MC="MC",e.MD="MD",e.ME="ME",e.MF="MF",e.MG="MG",e.MH="MH",e.MK="MK",e.ML="ML",e.MM="MM",e.MN="MN",e.MO="MO",e.MP="MP",e.MQ="MQ",e.MR="MR",e.MS="MS",e.MT="MT",e.MU="MU",e.MV="MV",e.MW="MW",e.MX="MX",e.MY="MY",e.MZ="MZ",e.NA="NA",e.NC="NC",e.NE="NE",e.NF="NF",e.NG="NG",e.NI="NI",e.NL="NL",e.NO="NO",e.NO_TYPE="NO_TYPE",e.NP="NP",e.NR="NR",e.NU="NU",e.NZ="NZ",e.OM="OM",e.PA="PA",e.PE="PE",e.PF="PF",e.PG="PG",e.PH="PH",e.PK="PK",e.PL="PL",e.PM="PM",e.PN="PN",e.PR="PR",e.PS="PS",e.PT="PT",e.PW="PW",e.PY="PY",e.QA="QA",e.RE="RE",e.RO="RO",e.RS="RS",e.RU="RU",e.RW="RW",e.SA="SA",e.SB="SB",e.SC="SC",e.SD="SD",e.SE="SE",e.SG="SG",e.SH="SH",e.SI="SI",e.SJ="SJ",e.SK="SK",e.SL="SL",e.SM="SM",e.SN="SN",e.SO="SO",e.SR="SR",e.ST="ST",e.SV="SV",e.SY="SY",e.SZ="SZ",e.TC="TC",e.TD="TD",e.TF="TF",e.TG="TG",e.TH="TH",e.TJ="TJ",e.TK="TK",e.TL="TL",e.TM="TM",e.TN="TN",e.TO="TO",e.TR="TR",e.TT="TT",e.TV="TV",e.TW="TW",e.TZ="TZ",e.UA="UA",e.UG="UG",e.UM="UM",e.UNIVERSAL="UNIVERSAL",e.US="US",e.UY="UY",e.UZ="UZ",e.VA="VA",e.VC="VC",e.VE="VE",e.VG="VG",e.VI="VI",e.VN="VN",e.VU="VU",e.WF="WF",e.WS="WS",e.XK="XK",e.YE="YE",e.YT="YT",e.ZA="ZA",e.ZM="ZM",e.ZW="ZW"}(t.Country||(t.Country={}))},132545:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Country=void 0;var n=r(976666);Object.defineProperty(t,"Country",{enumerable:!0,get:function(){return n.Country}})},717484:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},372713:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},998548:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},24603:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},343484:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(372713),t),o(r(998548),t),o(r(24603),t),o(r(138509),t),o(r(289205),t)},138509:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},289205:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},233475:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.Country=void 0;var s=r(132545);Object.defineProperty(t,"Country",{enumerable:!0,get:function(){return s.Country}}),o(r(717484),t),o(r(343484),t),o(r(396394),t),o(r(216988),t),o(r(441126),t),o(r(4720),t)},435018:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},396394:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(435018),t),o(r(904453),t)},904453:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentCardType=t.PaymentCardColorType=void 0,function(e){e.BLACK="BLACK",e.BLUE_1="BLUE_1",e.BLUE_2="BLUE_2",e.GOLD="GOLD",e.GREEN_1="GREEN_1",e.GREEN_2="GREEN_2",e.ORANGE="ORANGE",e.RED="RED",e.SILVER="SILVER",e.WHITE="WHITE"}(t.PaymentCardColorType||(t.PaymentCardColorType={})),function(e){e.PAYMENT_TYPE_AMEX="PAYMENT_TYPE_AMEX",e.PAYMENT_TYPE_DINERSCLUB="PAYMENT_TYPE_DINERSCLUB",e.PAYMENT_TYPE_DISCOVER="PAYMENT_TYPE_DISCOVER",e.PAYMENT_TYPE_JCB="PAYMENT_TYPE_JCB",e.PAYMENT_TYPE_MASTERCARD="PAYMENT_TYPE_MASTERCARD",e.PAYMENT_TYPE_VISA="PAYMENT_TYPE_VISA"}(t.PaymentCardType||(t.PaymentCardType={}))},774590:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},267871:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},95278:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},262647:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},216988:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(774590),t),o(r(267871),t),o(r(95278),t),o(r(262647),t),o(r(120056),t),o(r(764826),t)},120056:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PhoneType=void 0,function(e){e.PHONE_TYPE_ANY="PHONE_TYPE_ANY",e.PHONE_TYPE_FAX="PHONE_TYPE_FAX",e.PHONE_TYPE_LANDLINE="PHONE_TYPE_LANDLINE",e.PHONE_TYPE_MOBILE="PHONE_TYPE_MOBILE",e.PHONE_TYPE_WORK_FAX="PHONE_TYPE_WORK_FAX",e.PHONE_TYPE_WORK_LANDLINE="PHONE_TYPE_WORK_LANDLINE",e.PHONE_TYPE_WORK_MOBILE="PHONE_TYPE_WORK_MOBILE"}(t.PhoneType||(t.PhoneType={}))},764826:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},441126:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoteColors=void 0,function(e){e.BLUE="BLUE",e.BROWN="BROWN",e.GRAY="GRAY",e.GREEN="GREEN",e.ORANGE="ORANGE",e.PINK="PINK",e.PURPLE="PURPLE",e.RED="RED",e.YELLOW="YELLOW"}(t.NoteColors||(t.NoteColors={}))},4720:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VaultItemType=void 0,function(e){e.Address="KWAddress",e.BankAccount="KWBankStatement",e.Company="KWCompany",e.Credential="KWAuthentifiant",e.DriversLicense="KWDriverLicence",e.Email="KWEmail",e.FiscalId="KWFiscalStatement",e.IdCard="KWIDCard",e.Identity="KWIdentity",e.Passport="KWPassport",e.PaymentCard="KWPaymentMean_creditCard",e.Phone="KWPhone",e.SecureNote="KWSecureNote",e.SocialSecurityId="KWSocialSecurityStatement",e.Website="KWPersonalWebsite"}(t.VaultItemType||(t.VaultItemType={}))},624494:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vaultOrganizationApi=void 0;const n=r(468224),o=r(877834),s=r(182824);t.vaultOrganizationApi=(0,n.defineModuleApi)({name:"vaultOrganization",commands:{deleteCollection:o.DeleteCollectionCommand,createCollection:o.CreateCollectionCommand,migrateCategories:o.MigrateCategoriesCommand,updateCollection:o.UpdateCollectionCommand},events:{},queries:{queryCollections:s.CollectionsQuery}})},226424:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateCollectionCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.CreateCollectionCommand=o},695795:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteCollectionCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.DeleteCollectionCommand=o},877834:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(695795),t),o(r(226424),t),o(r(857547),t),o(r(684608),t)},684608:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MigrateCategoriesCommand=void 0;const n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.MigrateCategoriesCommand=o},857547:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateCollectionCommand=t.OperationType=void 0;const n=r(468224);!function(e){e.SUBSTRACT="subtract",e.APPEND="append",e.OVERRIDE="override"}(t.OperationType||(t.OperationType={}));class o extends((0,n.defineCommand)({scope:n.UseCaseScope.User})){}t.UpdateCollectionCommand=o},621028:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(624494),t),o(r(877834),t),o(r(182824),t),o(r(251515),t)},836217:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionsQuery=void 0;const n=r(468224);class o extends((0,n.defineQuery)({scope:n.UseCaseScope.User})){}t.CollectionsQuery=o},182824:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(836217),t)},251515:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},27606:(e,t,r)=>{var n;function o(e){return{type:n.VALUE_PROVIDER,useValue:e}}function s(e){return{type:n.CLASS_PROVIDER,useClass:e}}r.r(t),r.d(t,{AcknowledgedChannel:()=>_e,AllowedToFail:()=>yt,AppLifeCycle:()=>O,AppLogger:()=>C,AppTimers:()=>qe,BadStatus:()=>u.RV,BaseEventEmitter:()=>De,ChannelMessageBroker:()=>ee,ChannelState:()=>K,CommandHandler:()=>sr,CommandRefresherFactory:()=>We,ContextLessCqrsClient:()=>pe,ContextlessBaseEventEmitter:()=>Ne,CqrsBroker:()=>re,CqrsClient:()=>le,CqrsCommandRefresher:()=>Qe,CronLowLevelSource:()=>At,DefaultEncryptionCodecForDeviceData:()=>M,DefaultEncryptionCodecForUserData:()=>I,EventHandler:()=>hr,FeatureFlipsServiceAbstract:()=>$t,FrameworkInit:()=>se,Global:()=>ne,HttpClient:()=>nr,HttpHeaders:()=>u.WM,HttpModule:()=>or,HttpParams:()=>u.LE,HttpRequest:()=>u.aW,HttpResponse:()=>u.Zn,HttpStatusCode:()=>u.WE,Injectable:()=>oe,JsonApplicationResourceFetcher:()=>pt,JsonApplicationResourceLoader:()=>ht,KeyValueStorageFactory:()=>D,KeyValueStorageInfrastructure:()=>f,LoadingState:()=>Xe,ManualTriggeredTimers:()=>$e,MemoryChannel:()=>X,MemoryKeyValueStorageInfrastructure:()=>Ze,MemoryStoreInfrastructureFactory:()=>j,MockFeatureFlipsService:()=>Wt,MockJsonApplicationResourceFetcher:()=>ft,MockedFeatureFlipsEnum:()=>Kt,Module:()=>Xt,NetworkError:()=>u.F7,NoDynamicChannels:()=>me,NodeConfiguration:()=>ie,NodeEventBroker:()=>Pe,NodeToModuleEventBroker:()=>Ae,ParameterProviderType:()=>n,QueryHandler:()=>mr,RequestContext:()=>d,RequestContextModule:()=>Ar,SingleNodeAppBuilder:()=>qt,StoreCapacity:()=>lt,StoreInfrastructureFactory:()=>P,TaskTrackingModule:()=>fr,TimedOut:()=>u.PL,TimerBasedCronSource:()=>Mt,createApplicationClient:()=>xe,createClientFactory:()=>Te,createCqrsClient:()=>ae,createCqrsClients:()=>ce,defineApplication:()=>Ht,defineBatchExecutor:()=>Dr,defineStore:()=>dt,deviceScopedSingletonProvider:()=>tr,getQueryValue:()=>ke,getStoresProviders:()=>Jt,isLazyState:()=>et,isSendMessageRequest:()=>Ce,isVersionedData:()=>p,mockStore:()=>nt,provideClass:()=>s,provideValue:()=>o,refresherCreationToken:()=>Ke,scopedSingleton:()=>rr,sendMessageRequest:()=>Oe,startApplicationNode:()=>Bt,startSingleApplicationNode:()=>Vt,useEventsOfModule:()=>Zt,userScopedSingletonProvider:()=>er}),function(e){e.VALUE_PROVIDER="value_provider",e.CLASS_PROVIDER="class_provider"}(n||(n={})),r(760171);const i="dl-module";var a=r(632875);const c="frameworkModuleName";var u=r(245059);class d{constructor(e){this.useCaseId=e.useCaseId,this.userName=e.userName,this.featureFlips=e.featureFlips,this.requiredFeatureFlips=e.requiredFeatureFlips}}var l=r(828489);function p(e,t){return null!==e&&"object"==typeof e&&(0,l.l$)(e,"version")&&(0,l.l$)(e,"content")&&t(e.content)}class f{}const m=new u.bL,h=new u.z;let y=class{constructor(e,t,r){this.kv=e,this.prefix=`batch-storage.${r}.${t.userName}`}async getBatchState(e){const t=await this.kv.get(`${this.prefix}.${e}`);return t?this.stringToState(t):{queue:[]}}async setBatchState(e,t){const r=this.stateToString(t);return await this.kv.set(`${this.prefix}.${e}`,r)}stateToString(e){const t=m.encode(e);return h.encode(t)}stringToState(e){const t=h.decode(e);return m.decode(t)}};y=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([function(e,t){return function(r,n){t(r,n,e)}}(2,(0,a.Inject)(c)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[f,d,String])],y);class v{getProviders(e){return e.length?[...e.map((e=>({provide:e,inject:[y,e.Definition.chunkProcessor],useFactory:(t,r)=>new e(t,r)}))),...e.map((({Definition:{chunkProcessor:e}})=>e)),y]:[]}}var b=r(468224),g=r(52273),_=r(243978);class O{constructor(){this.shutdownHooks=[],this.externalComponentReadyConditions=[],this.appReadyHooks=[]}addExternalComponentReadyCondition(e){this.externalComponentReadyConditions.push(e)}addAppReadyHook(e){this.appReadyHooks.push(e)}addShutdownHook(e){this.shutdownHooks.push(e)}startup(){const e=this.waitAndTriggerAppReady();if(!this.externalComponentReadyConditions.length)return e;this.addShutdownHook((async()=>await e))}async shutDown(){for(;this.shutdownHooks.length>0;){const e=this.shutdownHooks.pop();e&&await e()}}async waitAndTriggerAppReady(){await Promise.all(this.externalComponentReadyConditions.map((e=>e()))),await this.executeStartupHooks(this.appReadyHooks)}async executeStartupHooks(e){for(;e.length>0;){const t=e.shift();if(t){const e=await t();e&&this.addShutdownHook(e)}}}}class C{}var S=r(724966);class w{constructor(e){this.state$=new S.X(e)}get(){return Promise.resolve(this.state$.getValue())}set(e){return this.state$.next(e),Promise.resolve()}init(e){return this.state$.next(e),Promise.resolve()}stop(){this.state$.complete()}}class P{}class j extends P{createUserScopedInfrastructure(){return new w({timestamp:void 0})}createDeviceScopedInfrastructure(){return new w({timestamp:void 0})}}var E=r(769183),R=r(670695),A=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};let M=class{};M=A([(0,a.Injectable)()],M);let I=class{};I=A([(0,a.Injectable)()],I);class U{constructor(e,t,r){this.storage=e,this.baseKey=t,this.initialValueFactory=r}async read(){const e=await this.storage.get(this.baseKey);return!e&&this.initialValueFactory?await this.initialValueFactory():e}async write(e){await this.storage.set(this.baseKey,e)}}class D{constructor(e){this.storage=e}createBackend(e,t,r,n){const o=r?`${e}.${t}.${r}`:`${e}.${t}`;return new U(this.storage,o,n)}}var N=r(530523),T=r(160399),x=r(536414),F=r(773201),k=r(386924),L=r(87065),G=r(317350),B=r(295087);const V=e=>"response"===e.type;var H=r(102049),q=r(464659);const $=e=>!(!e||"object"!=typeof e)&&"unSubscription"===e.type;var K,Q=r(227257),W=r(385390),z=r(915023),Y=r(6136),J=r(442946),Z=r(198187);!function(e){e.Connected="Connected",e.Disconnected="Disconnected"}(K||(K={}));class X{constructor(){this.autoConnects=!1,this.sentMessages$=new Z.x,this.receivedMessagesSubject$=new Z.x,this.channelStateSubject$=new S.X(K.Disconnected)}send(e){if(this.channelStateSubject$.value!==K.Connected)throw new Error("Channel is not connected");return this.sentMessages$.next(e),Promise.resolve()}get receivedMessages$(){return this.receivedMessagesSubject$}get channelState$(){return this.channelStateSubject$}stop(){this.receivedMessages$.complete()}connect(e){if(this.channelStateSubject$.value===K.Connected)return{disconnect:()=>{}};const t=this.sentMessages$.subscribe((t=>{e.receivedMessages$.next(t)}));return this.channelState$.next(K.Connected),{disconnect:()=>{this.channelState$.next(K.Disconnected),t.unsubscribe()}}}}class ee{constructor(e){this.stopped$=new S.X(!1);const t={routes:(0,l.Ay)({})};this.routes=(()=>{const{routes:r}=Object.keys(e).reduce(((t,r)=>{const n=e[r];if("local"===n.type&&(t.routes[r]={send:n.onMessage,trySend:async(...e)=>(await(0,H.n)(n.onMessage(...e)),!0)}),"remote"===n.type){const e=((e,t)=>{const r=(r,n,o)=>{const s={content:n,destination:String(r),id:(0,E.Z)()};return new Q.y((r=>{let n={type:"start",definition:s,metadata:o};const i=(0,W.a)({message:e.receivedMessages$,stopped:t}).pipe((0,z.o)((({stopped:e})=>!e)),(0,L.U)((({message:e})=>e))).subscribe((e=>{var t;(t=e)&&"object"==typeof t&&"initial-acknowledgement"===t.type&&e.id===s.id?n={...n,metadata:{...n.metadata,isReminder:!0}}:(e=>!(!e||"object"!=typeof e)&&"data"===e.type)(e)&&e.id===s.id?r.next(e.data):(e=>!(!e||"object"!=typeof e)&&"end"===e.type)(e)&&e.id===s.id&&r.complete()})),a=(0,W.a)({sendTimes:e.channelState$.pipe((0,Y.x)(),(0,N.h)((t=>t===K.Connected||e.autoConnects))),stopped:t}).pipe((0,z.o)((({stopped:e})=>!e)),(0,J.z)((()=>(0,k.D)(e.send(n))))).subscribe();return()=>{e.send({type:"unSubscription",id:s.id}),a.unsubscribe(),i.unsubscribe()}}))};return{send:r,trySend:async(t,n,o)=>!(!e.autoConnects&&await(0,T.z)(e.channelState$)!==K.Connected||(await(0,H.n)(r(t,n,o)),0))}})(n.channel,this.stopped$);t.routes[r]=e}return t}),t);return r})()}connect(e,t){let r=!1;return{start:()=>{if(r)throw new Error("Already started");r=!0;const n=e=>((e,t,r)=>{const n=new Set(r),o=new Map,s=t.receivedMessages$.pipe((0,N.h)($)).subscribe((e=>{const t=o.get(e.id);t?.unsubscribe(),o.delete(e.id)})),i=t.receivedMessages$.pipe((0,N.h)((e=>{return!(!(t=e)||"object"!=typeof t)&&"start"===t.type&&n.has(e.definition.destination)&&!o.has(e.definition.id);var t})),(0,x.z)((e=>(0,k.D)((async e=>(o.set(e.definition.id,{unsubscribe:()=>{}}),await t.send({type:"initial-acknowledgement",id:e.definition.id}),e))(e))))).subscribe((r=>{const n=r.definition.destination,s=e(n,r.definition.content,r.metadata),i={type:"end",id:r.definition.id},a=s.pipe((0,L.U)((e=>({id:r.definition.id,data:e,type:"data"}))),(0,q.l)(i),(0,x.z)((e=>(0,k.D)(t.send(e))))).subscribe();o.set(r.definition.id,{unsubscribe:()=>{a.unsubscribe()}})}));return{unsubscribe:()=>{i.unsubscribe(),s.unsubscribe();for(const e of o.values())e.unsubscribe()}}})(((e,t,r)=>this.routes[e].send(e,t,r)),e,Object.keys(this.routes)),o=e.map(n),s=new Map,i=t.connectedChannels$.subscribe((e=>{const t=[...s.entries()].filter((([t])=>!(t in e))),r=Object.keys(e).filter((e=>!s.has(e)));t.forEach((([e,t])=>{s.delete(e),t.unsubscribe()})),r.forEach((t=>{const r=e[t],o=n(r);s.set(t,o)}))}));return Promise.resolve({stop:()=>([...o,i,...s.values()].forEach((e=>e.unsubscribe())),this.stopped$.next(!0),Promise.resolve())})}}}sendMessage(e,t){return this.routes[e].send(e,t,{isReminder:!1})}trySendMessage(e,t){return this.routes[e].trySend(e,t,{isReminder:!1})}}const te=()=>(0,k.D)([]);class re{constructor(e){this.config=e}async sendCommand(e,t,r,n){if(!this.broker)throw new Error("call connect() first");return await(0,T.z)(this.broker.sendMessage(`command-${e}`,{type:"command",module:e,commandName:String(t),command:r,context:n}).pipe((0,N.h)(V),(0,L.U)((e=>e.response))))}sendQuery(e,t,r,n){if(!this.broker)throw new Error("call connect() first");return this.broker.sendMessage(`query-${e}`,{type:"query",module:e,queryName:String(t),query:r,context:n}).pipe((0,N.h)(V),(0,L.U)((e=>e.response)))}connect(e){const t=e?(t,r,n)=>{switch(r.type){case"response":return G.E;case"command":return(0,k.D)(e.onCommand(r.module,r.commandName,r.command,r.context,{isReminder:n.isReminder})).pipe((0,L.U)((e=>({type:"response",response:e}))));case"query":return(0,k.D)(e.onQuery(r.module,r.queryName,r.query,r.context)).pipe((0,L.U)((e=>({type:"response",response:e}))))}(0,B.U)(r)}:te,r=((e,t,r,n)=>Object.keys(e).reduce(((o,s)=>{const{commandMailbox:i,queryMailbox:a}=(o=>{const{main:s,queryOnly:i}=e[o],a={type:"local",onMessage:n};if(s===t)return{commandMailbox:a,queryMailbox:a};const c={type:"remote",channel:r[s]};return{commandMailbox:c,queryMailbox:t&&i.includes(t)?a:c}})(s);return o[`command-${s}`]=i,o[`query-${s}`]=a,o}),(0,l.Ay)({})))(this.config.appDefinition,this.config.currentNode,this.config.channels,t);return this.broker=new ee(r),this.broker.connect(Object.values(this.config.channels),this.config.channelsListener)}}function ne(){return(0,a.Global)()}function oe(e){return(0,a.Injectable)({scope:e?.neverReuseInstance?a.Scope.TRANSIENT:a.Scope.DEFAULT})}const se=()=>oe();class ie{constructor(e){this.appDefinition=e.appDefinition,this.currentNode=e.currentNode,this.channels=e.channels,this.subscriptions=e.subscriptions,this.channelsListener=e.channelsListener}getNodeList(){return this.currentNode?[...this.getRemoteNodeList(),this.currentNode]:this.getRemoteNodeList()}getRemoteNodeList(){return Object.keys(this.channels)}getModuleNames(){return Object.keys(this.appDefinition)}}const ae=(e,t,r,n)=>({commands:Object.keys(e[r].api.commands).reduce(((e,o)=>(e[o]=e=>{const s=n??new d({useCaseId:(0,E.Z)()});return t.sendCommand(r,o,e,s)},e)),(0,l.Ay)({})),queries:Object.keys(e[r].api.queries).reduce(((e,o)=>(e[o]=e=>{const s=n??new d({useCaseId:(0,E.Z)()});return t.sendQuery(r,o,e,s)},e)),(0,l.Ay)({}))}),ce=(e,t,r)=>{const n=n=>Object.keys(e[n].api.commands).reduce(((e,o)=>(e[o]=e=>{const s=r??new d({useCaseId:(0,E.Z)()});return t.sendCommand(n,o,e,s)},e)),(0,l.Ay)({})),o=n=>Object.keys(e[n].api.queries).reduce(((e,o)=>(e[o]=e=>{const s=r??new d({useCaseId:(0,E.Z)()});return t.sendQuery(n,o,e,s)},e)),(0,l.Ay)({}));return Object.keys(e).map((e=>e)).reduce(((e,t)=>(e[t]={commands:n(t),queries:o(t)},e)),{})};var ue=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},de=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let le=class{constructor(e,t,r){this.broker=e,this.configuration=t,this.context=r}getClient(e){return ae(this.configuration.appDefinition,this.broker,e.name,this.context)}};le=ue([oe(),de("design:paramtypes",[re,ie,d])],le);let pe=class{constructor(e,t){this.configuration=e,this.broker=t}getClient(e){return ae(this.configuration.appDefinition,this.broker,e.name)}};pe=ue([oe(),de("design:paramtypes",[ie,re])],pe);var fe=r(69885);const me={connectedChannels$:new S.X({})};var he=r(116433),ye=r(489618),ve=r(537182),be=r(897280),ge=r(507074);class _e{constructor(e,t=3e4){this.autoConnects=e.autoConnects;const r=e.status$.pipe((0,Y.x)());let n=!1;const o=new Z.x,s=o.pipe((0,x.z)((async o=>{const s=(0,E.Z)();let i=!1;const a=e.messages$.pipe((0,z.o)((()=>!n)),(0,N.h)((e=>"acknowledgement"===e.type&&e.id===s)),(0,he.q)(1),(0,ye.V)(t),(0,ve.K)((()=>G.E)),(0,be.d)(1)),c=a.subscribe((()=>{i=!0,c.unsubscribe()})),u=r.pipe((0,z.o)((()=>!i&&!n)),(0,J.z)((()=>(0,k.D)(e.sendMessage({type:"send",id:s,message:o.message}))))).subscribe();try{await(0,H.n)(a),u.unsubscribe(),o.resolve()}catch(e){u.unsubscribe(),o.reject(e)}}))).subscribe();this.stop=()=>(n=!0,s.unsubscribe(),e.stop()),this.send=e=>new Promise(((t,r)=>{const n={message:e,resolve:t,reject:r};o.next(n)})),this.channelState$=e.status$,this.receivedMessages$=e.messages$.pipe((0,N.h)((e=>"send"===e.type)),(0,x.z)((async t=>{if("send"===t.type)return await e.sendMessage({type:"acknowledgement",id:t.id}),t.message})),(0,ge.B)())}}const Oe=({channelName:e,message:t})=>({channelName:e,message:t,type:"graphene-message"}),Ce=e=>!(!e||"object"!=typeof e)&&"graphene-message"===e.type,Se={type:"ask"},we={type:"eventResponse"};let Pe=class{constructor(e){this.regenerateReverseSubscriptionMap=()=>{const{configuration:e,subscriberToEvent:t}=this,r=e.getModuleNames().reduce(((e,t)=>({...e,[t]:new Map})),{});return e.getNodeList().reduce(((e,r)=>{const n=t[r];return Object.entries(n).forEach((([t,n])=>{const o=e[t];n.forEach((e=>{const t=[...o.get(e)??[],r];o.set(e,t)}))})),e}),r)},this.configuration=e;const t=Object.entries(e.appDefinition).reduce(((e,[t,r])=>(e[t]=Object.keys(r.api.events),e)),{});this.subscriberToEvent=this.configuration.getNodeList().reduce(((e,r)=>(e[r]={...t},e)),{}),this.eventToSubscriber=this.regenerateReverseSubscriptionMap()}async publishEvent(e,t,r,n){const{broker:o,eventToSubscriber:s}=this;if(!o)throw new Error("Not started");const i=(s[e].get(t)??[]).map((o=>({type:"event",context:n,event:r,eventName:t,moduleSource:e,nodeDestination:o})));await Promise.all(i.map((async e=>{await o.trySendMessage(`event-${e.nodeDestination}`,e)})))}connect(e){const{configuration:t}=this,r=Object.keys(t.subscriptions).reduce(((e,r)=>({...e,...t.subscriptions[r]})),(0,l.Ay)({})),n={type:"subscriptions",nodeName:t.currentNode,subscribesTo:r},o=((e,t)=>e.getNodeList().reduce(((r,n)=>(n===e.currentNode?r[`event-${n}`]={type:"local",onMessage:t}:r[`event-${n}`]={type:"remote",channel:e.channels[n]},r)),(0,l.Ay)({})))(this.configuration,((t,r,o)=>{switch(r.type){case"event":return(0,k.D)(e.onLocalEvent(r.moduleSource,r.nodeDestination,r.eventName,r.event,r.context,o)).pipe((0,L.U)((()=>we)));case"eventResponse":return G.E;case"subscriptions":return this.subscriberToEvent[r.nodeName]=r.subscribesTo,this.eventToSubscriber=this.regenerateReverseSubscriptionMap(),(0,fe.of)(we);case"ask":return(0,fe.of)(n)}})),s=new ee(o);return t.getNodeList().map((async e=>{await s.trySendMessage(`event-${e}`,n),await s.trySendMessage(`event-${e}`,Se)})),this.broker=s,s.connect(Object.values(t.channels),t.channelsListener)}};var je;Pe=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([oe(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[ie])],Pe),function(e){e.Command="command",e.Query="query",e.Event="event",e.Init="init",e.Cron="cron"}(je||(je={}));const Ee=e=>{if(!e||"object"!=typeof e)return!1;const t=e;return!!t.error&&!!t.isError};var Re=r(287279);class Ae{constructor(e){this.publishEvent=(e,t,r,n)=>this.broker.publishEvent(e,t,r,n),this.broker=new Pe(e);const t=e.getModuleNames().reduce(((t,r)=>({...t,[r]:Object.keys(e.appDefinition[r].api.events).reduce(((e,t)=>(e[t]=[],e)),(0,l.Ay)({}))})),(0,l.Ay)({}));this.localSubscribersMap=Object.keys(e.subscriptions).map((e=>e)).reduce(((t,r)=>{const n=e.subscriptions[r];return Object.keys(n).map((e=>e)).forEach((e=>{const o=n[e]??[],s=t[e];o.forEach((e=>{s[e].push(r)}))})),t}),t)}connect(e){const{localSubscribersMap:t,broker:r}=this;return r.connect({onLocalEvent:async(r,n,o,s,i,a)=>{const c=t[r][o];await Promise.all(c.map((async t=>{await e.onEvent(r,t,o,s,i,a)})))}})}}var Me=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},Ie=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ue=function(e,t){return function(r,n){t(r,n,e)}};let De=class{constructor(e,t,r){this.apiName=e,this.broker=t,this.context=r}sendEvent(e,t){return this.broker.publishEvent(this.apiName,e,t,this.context)}};De=Me([oe(),Ue(0,(0,a.Inject)(c)),Ie("design:paramtypes",[Object,Pe,d])],De);let Ne=class{constructor(e,t){this.apiName=e,this.broker=t}sendEvent(e,t,r){return this.broker.publishEvent(this.apiName,e,t,r??new d({useCaseId:(0,E.Z)()}))}};Ne=Me([oe(),Ue(0,(0,a.Inject)(c)),Ie("design:paramtypes",[Object,Pe])],Ne);const Te=()=>{const e=(t,r)=>{const n=new ie({appDefinition:t,channels:{},channelsListener:me,currentNode:"",subscriptions:{}}),o=new re(n);let s;const i=()=>{if(s)return s;const e=o.connect({onCommand:(e,t,n)=>{if(!(e in r))throw new Error(`${e} is not mocked`);return r[e].commands[t](n)},onQuery:(e,t,n)=>{if(!(e in r))throw new Error(`${e} is not mocked`);return r[e].queries[t](n)}});return s=e.start(),s};return{buildClient:async e=>{const t=new le(o,n,e??new d({useCaseId:(0,E.Z)()}));return await i(),t},buildContextlessClient:async()=>{const e=new pe(n,o);return await i(),e},withMock:(n,o)=>{const s={...t,...(0,l.Ay)({[n.name]:{api:n,main:"",queryOnly:[]}})};return e(s,{...r,[n.name]:o})}}};return e({},{})};function xe({appDefinition:e,channels:t,channelsListener:r}){const n=new ie({appDefinition:e,channels:t,channelsListener:r,currentNode:null,subscriptions:{}}),o=new re(n),s=()=>{throw new Error("Unexpected request received by detached application client")};return o.connect({onCommand:s,onQuery:s}).start(),ce(e,o)}var Fe=r(27149);async function ke(e,t=1e4){if(!(0,Fe.b)(e))throw new Error("Error in getQueryValue: the argument is not an observable");try{return await(0,T.z)(e.pipe((0,ye.V)({first:t})))}catch(e){throw new Error("Error in getQueryValue: "+e)}}async function Le(e){const t=await(0,T.z)(e.getClient(b.requestContextApi).queries.activeUser());if((0,Re.d6)(t)&&t.data.userName)return t.data.userName}var Ge=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},Be=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class Ve{constructor(e){this.supportedEventHandlers=e}}let He=class{constructor(e,t,r,n){this.conf=e,this.config=t,this.moduleRef=r,this.clients=n}async execute(e){const t=R.ContextIdFactory.getByRequest(e),{type:r}=e;try{const n=async()=>e.context.userName??await Le(this.clients),{appDefinition:o}=this.config;if(!(e.module in o))throw new Error("unknown module "+e.module);const s=o[e.module].api;switch(r){case je.Query:{const{queries:r}=s;if(e.name in r){const o=r[e.name],s=new o(e.body),i=Reflect.getMetadata("dl-handler",o);if(o.metadata.scope===b.UseCaseScope.User){const t=await n();if(!t&&o.metadata.noUserError)return(0,fe.of)((0,Re.Rn)(o.metadata.noUserError));e.context.userName=t}const a=(await this.moduleRef.resolve(i,t,{strict:!1})).execute(s);return(0,fe.of)(a)}throw new Error("unknown query "+e.name)}case je.Command:{const{commands:r}=s;if(e.name in r){const o=r[e.name],s=new o(e.body),i=Reflect.getMetadata("dl-handler",o);if(o.metadata.scope===b.UseCaseScope.User){const t=await n();if(!t&&o.metadata.noUserError)return(0,fe.of)((0,Re.Rn)(o.metadata.noUserError));e.context.userName=t}const a=await this.moduleRef.resolve(i,t,{strict:!1}),c=await a.execute(s);return(0,fe.of)(c)}throw new Error("unknown command "+e.name)}case je.Event:{const{events:r}=s;if(e.name in r){const n=r[e.name],o=new n(e.body),s=Reflect.getMetadata("dl-handlers",n);if(!s)return;const i=await Promise.all(s.filter((e=>this.conf.supportedEventHandlers.has(e))).map((async e=>await this.moduleRef.resolve(e,t,{strict:!1}))));return void await Promise.all(i.map((e=>e.handle(o))))}throw new Error("unknown event "+e.name)}}(0,B.U)(r)}catch(e){return(e=>({error:e,isError:!0}))(e)}}};Ge([(0,a.All)(),function(e,t){return function(r,n){t(r,n,e)}}(0,(0,a.Req)()),Be("design:type",Function),Be("design:paramtypes",[Object]),Be("design:returntype",Promise)],He.prototype,"execute",null),He=Ge([(0,a.Controller)({scope:a.Scope.REQUEST,durable:!1}),Be("design:paramtypes",[Ve,ie,R.ModuleRef,pe])],He);class qe{async waitTimeout(e){await(0,T.z)(this.createObservableTimer(e,e))}}class $e extends qe{constructor(){super(...arguments),this.subscribers$=new S.X(new Set),this.time=0,this.pendingTimerCount$=this.subscribers$.pipe((0,L.U)((e=>e.size)))}fireTimer(e=1){this.time+=e,[...this.subscribers$.value].forEach((e=>{e.next(this.time)}))}async allSubscribersDisconnected(){await(0,T.z)(this.pendingTimerCount$.pipe((0,N.h)((e=>!e))))}createObservableTimer(){return new Q.y((e=>(this.subscribers$.next(new Set([...this.subscribers$.value,e])),()=>{this.subscribers$.next(new Set([...this.subscribers$.value].filter((t=>t!==e))))})))}}function Ke(e){return e}class Qe{constructor(e,t,{args:r,commandName:n}){const o=t.commands[n];this.refreshObservable$=e.pipe((0,x.z)((async()=>{await o(r)})),(0,ge.B)({}))}withRefresh(){return e=>new Q.y((t=>{const r=this.refreshObservable$.subscribe();return r.add(e.subscribe(t)),r}))}}let We=class{constructor(e,t){this.timers=e,this.cqrsClient=t,this.map=new WeakMap}getRefresher(e){const t=this.map.get(e);return t||new Qe(this.timers.createObservableTimer(e.period,e.period),this.cqrsClient.getClient(e.api),e)}};async function ze(e,t){const r=await(0,T.z)(e.getClient(b.requestContextApi).queries.userFeatureFlips({requiredFeatureFlips:t}));if(!(0,Re.d6)(r))throw new Error("Couldn't fetch userFeatureFlips from requestContextApi");return(0,Re.db)(r)}We=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([oe(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[qe,pe])],We);const Ye="cron",Je=(e,t)=>({provide:d,scope:a.Scope.REQUEST,inject:[pe,R.REQUEST],useFactory:async(r,n)=>{if(n.type===je.Init)return new d({useCaseId:"init",requiredFeatureFlips:t});if(n.type===je.Cron){if(n.scope===b.UseCaseScope.Device)return new d({useCaseId:Ye,requiredFeatureFlips:t});const e=await Le(r);return new d(e?{useCaseId:Ye,userName:e,featureFlips:await ze(r,t),requiredFeatureFlips:t}:{useCaseId:Ye,requiredFeatureFlips:t})}const o=n.context.useCaseId||String(R.ContextIdFactory.getByRequest(n).id),s=function(e,t){const{type:r}=e;switch(r){case je.Query:{const r=t[e.module].api,{queries:n}=r;if(e.name in n)return n[e.name].metadata.scope;throw new Error("unknown query "+e.name)}case je.Command:{const r=t[e.module].api,{commands:n}=r;if(e.name in n)return n[e.name].metadata.scope;throw new Error("unknown command "+e.name)}case je.Event:{const r=t[e.module].api,{events:n}=r;if(e.name in n)return n[e.name].metadata.scope;throw new Error("unknown event "+e.name)}case je.Init:return b.UseCaseScope.Device;case je.Cron:return e.scope;default:(0,B.U)(r)}}(n,e);if(s===b.UseCaseScope.Device)return new d({useCaseId:o,requiredFeatureFlips:t});const i=n.context.userName??await Le(r);if(!i)throw new Error(`${n.type} ${n.module}.${n.name} is user-scoped, but no user is logged in.`);const a=await(async()=>n.context.featureFlips??await ze(r,t))();return new d({useCaseId:o,requiredFeatureFlips:t,userName:i,featureFlips:a})}});class Ze{constructor(){this.memory=new Map}set(e,t){return this.memory.set(e,t),Promise.resolve()}getAllKeys(){return Promise.resolve([...this.memory.keys()])}remove(e){return this.memory.get(e)?(this.memory.delete(e),Promise.resolve()):Promise.resolve()}get(e){return Promise.resolve(this.memory.get(e))}}var Xe;!function(e){e.NotLoaded="not_loaded",e.Requested="requested",e.Loaded="loaded"}(Xe||(Xe={}));const et=e=>!(!e||"object"!=typeof e)&&"boolean"==typeof e.loaded,tt=e=>e.loaded,rt=new j;async function nt(e,t){const r=new e("mockedModuleName",e.Definition,rt,"user");return t&&await r.set(t),r}class ot{constructor(e){this.subscribersCount$=new S.X(0),this.stopped$=new S.X(!1),this.store=e,this.state$=new Q.y((t=>{this.subscribersCount$.next(this.subscribersCount$.value+1);const r=e.state$.pipe((e=>e.pipe((0,N.h)(tt),(0,L.U)((e=>e.value))))).subscribe(t);return r.add((()=>this.subscribersCount$.next(this.subscribersCount$.value-1))),r.add(this.stopped$.pipe((0,N.h)((e=>!!e))).subscribe((()=>{t.complete()}))),r})),this.loadingState$=(0,W.a)({stopped:this.stopped$,hasSubscribers:this.subscribersCount$.pipe((0,L.U)((e=>e>0))),isLoaded:this.store.state$.pipe((0,L.U)((e=>e.loaded)))}).pipe((0,z.o)((({stopped:e})=>!e)),(0,L.U)((({hasSubscribers:e,isLoaded:t})=>t?Xe.Loaded:e?Xe.Requested:Xe.NotLoaded)))}set(e){return this.store.set({loaded:!0,value:e})}init(e){return this.store.init({loaded:!0,value:e})}clear(){return this.store.set({loaded:!1})}stop(){this.store.stop(),this.stopped$.next(!0)}getState(){return(0,T.z)(this.state$)}}class st{constructor(e){const{infrastructure:t,defaultValue:r}=e;this.infrastructure=t,this.timeGetter=e.timeGetter??(()=>Date.now()),this.localState$=new S.X({timestamp:void 0}),this.mergedState$=(0,W.a)({infra:t.state$,current:this.localState$}).pipe((0,L.U)((({current:e,infra:t})=>t.timestamp&&(!e.timestamp||t.timestamp>e.timestamp)?t:e))),this.state$=this.mergedState$.pipe((0,L.U)((e=>e.data??r)))}async set(e){const t={data:e,timestamp:this.timeGetter()};this.localState$.next(t),await this.infrastructure.set(t)}init(e){const t={data:e,timestamp:0};return this.localState$.next(t),Promise.resolve()}get(){return(0,T.z)(this.state$)}stop(){this.localState$.complete()}}const it=e=>{var t;return t=class{constructor(e,t,r,n){this.encryptionCodec=e,this.serializationCodec=t,this.transportStorageCodec=r,this.backend=n}async read(){const t=await this.backend.read();if(!t)return;const r=await this.transportStorageCodec.decode(t),n=await this.encryptionCodec.decode(r),o=await this.serializationCodec.decode(n);if(!p(o,e.typeGuard)){if(!e.typeGuard(o))throw new Error("deserializedObject is not type of TStorage");return await this.write(o),o}if(o.version<e.schemaVersion){if(!e.migrateStorageSchema)throw new Error("migrateStorage is undefined");const t=e.migrateStorageSchema(o);return await this.write(t),t}const s=o.content;if(!e.typeGuard(s))throw new Error("Type guard failed");return s}async write(t){const r={version:e.schemaVersion,content:t},n=await this.serializationCodec.encode(r),o=await this.encryptionCodec.encode(n),s=await this.transportStorageCodec.encode(o);await this.backend.write(s)}},t.Definition=e,t},at={loaded:!1};class ct extends ot{constructor(e,t,r,n){super(function(e,t,r,n){const o=(()=>{switch(t.scope){case b.UseCaseScope.Device:return r.createDeviceScopedInfrastructure(e,t.storeName,t.storeTypeGuard);case b.UseCaseScope.User:if(!n)throw new Error;return r.createUserScopedInfrastructure(e,t.storeName,n,t.storeTypeGuard)}(0,B.U)(t.scope)})();return new st({infrastructure:o,defaultValue:at})}(e,t,r,n)),t.persist||this.init(t.initialValue)}async update(e){const t=await this.getState();await this.set(e(t))}}const ut=e=>e.persist?{persist:!0,codec:e.codec,scope:e.scope,storeName:e.storeName,storeTypeGuard:e.storeTypeGuard,isCache:e.isCache,persistPeriod:e.persistPeriod,storage:it(e.storage)}:{persist:!1,initialValue:e.initialValue,scope:e.scope,storeName:e.storeName};function dt(e){var t;const r=ut(e),n=((t=class extends ct{constructor(e,t,r,n){super(e,t,r,n)}}).Definition=r,t);return oe()(n),n}var lt;!function(e){e._001KB="1KB",e._010KB="10KB",e._100KB="100KB",e.Unlimited="Unlimited"}(lt||(lt={}));class pt{}class ft extends pt{constructor(e){super(),this.files=e}fetch(e){return e in this.files?Promise.resolve(this.files[e]):Promise.reject(new Error("404 not found :"+e))}}var mt=r(625859);let ht=class{constructor(e,t){this.url=e,this.fetcher=t,this.value$=(0,k.D)((0,mt.P)((()=>this.get())))}async load(){await this.get()}async get(){const{value:e}=this;if(e)return e;const t=await this.fetcher.fetch(this.url),r=await this.loadResource(t);return this.value=r,r}};ht=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([oe(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[String,pt])],ht);class yt{constructor(e){this.logger=e}async do(...e){return(await Promise.all(e.map((e=>this.doOne(e))))).every((e=>!!e))}async doOne(e){try{const t=await e();if((0,Re.AZ)(t)&&(0,Re.hx)(t))throw new Error("Allowed to fail method has failed");return!0}catch(e){return this.logger.warn(e),!1}}}class vt{static create({brokers:{cqrs:e,event:t},configProviders:r,keyValueStorageInfrastructure:n,lifeCycle:o,logger:s,modules:i,nodeConfiguration:a,requiredFeatureFlips:c,storeInfrastructureFactory:l,timers:p,jsonFetcher:m,eventHandlers:h,defaultDeviceStorageEncryptionCodecProvider:y,defaultUserStorageEncryptionCodecProvider:v}){return{module:vt,providers:[F.ExplorerService,{provide:f,useValue:n},{provide:O,useValue:o},{provide:ie,useValue:a},{provide:re,useValue:e},{provide:Pe,useValue:t},{provide:pt,useValue:m},le,pe,...r,{provide:C,useValue:s},Je(a.appDefinition,c),{provide:P,useValue:l},{provide:qe,useValue:p},We,{provide:D,useValue:new D(n)},u.z,y,v,u.bL,u.Eu,{provide:Ve,useValue:new Ve(new Set(h))},yt],imports:[...i],exports:[O,ie,re,Pe,le,pe,...r.map((({provide:e})=>e)),C,d,P,qe,We,u.z,M,I,u.bL,u.Eu,D,f,pt,yt],controllers:[He],global:!0}}}var bt=r(674081);const gt=()=>{},_t=()=>{throw new Error("Not supported")};class Ot{constructor(e,t){this.cqrsBroker=e,this.eventsBroker=t,this.isListening$=new S.X(!1),this.use=_t,this.get=_t,this.post=_t,this.head=_t,this.delete=_t,this.put=_t,this.options=_t,this.patch=_t,this.end=_t,this.applyVersionFilter=_t,this.disconnect=gt,this.close=gt,this.status=_t,this.render=_t,this.redirect=_t,this.setHeader=_t,this.enableCors=_t,this.initHttpServer=_t,this.registerParserMiddleware=_t,this.createMiddlewareFactory=_t}isHeadersSent(){return!1}bindHandler(e){if(this.cqrsCallbacks||this.eventCallbacks)throw new Error("Handler already registered");this.cqrsCallbacks={onCommand:(t,r,n,o)=>new Promise(((s,i)=>{e({type:je.Command,module:t,name:r,body:n,context:o},{type:je.Command,value:(0,Re.Vp)(void 0),reply:e=>{if(Ee(e))return i(e.error);s(e)}})})),onQuery:(t,r,n,o)=>{const s=new Promise(((s,i)=>{e({type:je.Query,module:t,name:r,body:n,context:o},{type:je.Query,value:G.E,reply:e=>{if(Ee(e))return i(e.error);s(e)}})}));return(0,k.D)(s).pipe((0,bt.J)())}},this.eventCallbacks={onLocalEvent:(t,r,n,o,s)=>new Promise(((r,i)=>{e({type:je.Event,body:o,context:s,name:n,module:t},{type:je.Event,reply:e=>{if(Ee(e))return i(e.error);r(e)}})}))}}all(e,t){if(!t)throw new Error("Provide a handler");return this.bindHandler(t)}async listen(){if(!this.cqrsCallbacks||!this.eventCallbacks)throw new Error("Please call `all(path, handler)` first");const e=await this.cqrsBroker.connect(this.cqrsCallbacks).start(),t=await this.eventsBroker.connect(this.eventCallbacks).start(),{isListening$:r}=this;this.disconnect=()=>{e.stop(),t.stop(),r.complete()},this.close=this.disconnect,this.isListening$.next(!0)}reply(e,t){e.reply(t)}getInstance(){return this}getHttpServer(){return{once:gt,address:()=>"",removeListener:gt}}getType(){return"AppCoreNode"}}const Ct=()=>{};class St extends R.AbstractHttpAdapter{constructor(e,t){super(new Ot(e,t)),this.createMiddlewareFactory=this.instance.createMiddlewareFactory,this.close=this.instance.close,this.reply=this.instance.reply,this.useStaticAssets=Ct,this.setViewEngine=Ct,this.getRequestHostname=Ct,this.status=Ct,this.render=Ct,this.redirect=Ct,this.setNotFoundHandler=Ct,this.setHeader=Ct,this.registerParserMiddleware=Ct,this.enableCors=Ct,this.setErrorHandler=Ct,this.end=Ct,this.isListening$=this.instance.isListening$}initHttpServer(){this.setHttpServer({once:Ct,address:()=>"",removeListener:Ct})}getRequestMethod(){return a.RequestMethod.ALL}getRequestUrl(){return"/"}getType(){return"CoreApp"}isHeadersSent(){return!1}applyVersionFilter(){throw new Error("Versioning not supported")}}var wt=r(890171);class Pt extends C{log(){}warn(e,...t){return console.warn(e,t)}error(e,...t){return console.error(e,t)}trace(e,...t){return console.trace(e,t)}}class jt extends qe{get time(){return Date.now()}createObservableTimer(e,t){return(0,wt.H)(e,t)}}class Et extends pt{fetch(){return Promise.reject(new Error("Please add a jsonFetcher to the application. Probably you are seing that in unit tests.\nIf this is the case, please mock whatever service is requiring to fetch the data"))}}const Rt=(e,t)=>t.reduce(((t,r)=>{const n=Reflect.getMetadata(i,r.module);if(!(o=n)||"object"!=typeof o||o.api&&!(o.api.commands&&o.api.events&&o.api.name&&o.api.queries&&o.handlers)||o.exports&&!Array.isArray(o.exports)||o.handlers&&!o.api||o.imports&&!Array.isArray(o.imports)||o.providers&&!Array.isArray(o.providers))return t;var o;n.onFrameworkInit&&t.onFrameworkInits.push(n.onFrameworkInit);const s=n.api?.name??n.sharedModuleName??"unnamed";t.configProviders.push(...function(e,t,r,n){if(!r.configurations)return[];const{configurations:o}=r,s=[];return Object.keys(o).forEach((e=>{const r=o[e].token,i=n.configurations?.[e];if(!i)throw new Error(`Missing '${e}' configuration for '${t}' module`);s.push({...i,provide:r})})),Object.keys(n.configurations??{}).forEach((n=>{r.configurations?.[n]||e.error(`Unknown '${n}' configuration for '${t}' module will be unused`)})),s}(e,s,n,r)),n.api?.name&&t.modulesMetadata.set(n.api.name,n),t.modules.push(r.module);const a=n.requiredFeatureFlips;return t.requiredFeatureFlips.push(...a?a.filter((e=>!t.requiredFeatureFlips.includes(e))):[]),n.crons&&t.crons.push(...n.crons.map((e=>({...e,moduleName:s})))),n.handlers?.events&&t.eventHandlers.push(...Object.values(n.handlers.events).flatMap((e=>Object.values(e.events)))),t}),{configProviders:new Array,modules:new Array,modulesMetadata:new Map,requiredFeatureFlips:(0,l.Ay)([]),onFrameworkInits:new Array,crons:new Array,eventHandlers:new Array});class At{}class Mt extends At{constructor(e){super(),this.alarm$=e.createObservableTimer(6e4,6e4)}}var It=r(164987);class Ut{constructor(e,t){this.storage=e,this.storageKey=`crons.${t}`}async setState(e){await this.storage.set(this.storageKey,JSON.stringify(e))}async getState(){const e=await this.storage.get(this.storageKey);if(!e)return{entries:[]};const t=JSON.parse(e);return function(e){return!!e&&"object"==typeof e&&(0,l.l$)(e,"entries")&&Array.isArray(e.entries)&&e.entries.every((e=>function(e){return!!e&&"object"==typeof e&&(0,l.l$)(e,"dueTimestamp")&&(0,l.l$)(e,"moduleName")&&(0,l.l$)(e,"name")&&"string"==typeof e.name&&"string"==typeof e.moduleName&&"number"==typeof e.dueTimestamp}(e)))}(t)?t:{entries:[]}}}const Dt=6e4;function Nt(e){return Math.ceil(e/Dt)*Dt}function Tt(e){return Math.floor(e/Dt)*Dt}class xt{constructor(e,t){this.infra=e,this.identifiers=t}async init(){const e=Nt(this.infra.timers.time),t=await this.infra.repository.getState(),r=this.identifiers.filter((e=>!t.entries.find((t=>t.name===e.name&&t.moduleName===e.moduleName)))).map((e=>this.infra.getCron(e))),n={entries:[...t.entries.filter((e=>this.identifiers.find((t=>t.name===e.name&&t.moduleName===e.moduleName)))),...r.map((t=>({...t.identifier,dueTimestamp:e+t.periodInMs})))]};await this.infra.repository.setState(n)}async runAllCrons(){const e=await this.infra.repository.getState(),t=Nt(this.infra.timers.time),r=Tt(this.infra.timers.time),n=e.entries.filter((e=>e.dueTimestamp<=t));await Promise.all(n.map((t=>this.runCron(r,e,t))))}async runCron(e,t,r){const n=this.infra.getCron(r);await n.mutex.runExclusive((async()=>{await n.isRunnable()&&(await n.run(),r.dueTimestamp=Tt(e+n.periodInMs),await this.infra.repository.setState(t))}))}}const Ft={run:()=>{throw new Error("Should not run")},isRunnable:()=>!1};async function kt(e,t,r,n,o){const s=new xt({timers:t,repository:new Ut(n,o),getCron:t=>{const n=(({moduleName:t,name:r})=>{const n=e.find((e=>e.name===r&&e.moduleName===t));if(!n)throw new Error(`No such cron ${r} in ${t}`);return n})(t);let o;const s=async()=>{if(o)return o;const e=await async function(e,t){const r=Object.freeze({id:Math.random()}),n={type:je.Cron,scope:e.scope};t.registerRequestByContextId(n,r);return e.scope===b.UseCaseScope.Device||(await t.resolve(d,r,{strict:!1})).userName?(async()=>await t.resolve(e.handler,r,{strict:!1}))():Ft}(n,r);return o=e,e};return{identifier:t,isRunnable:async()=>{const e=await s();return!e.isRunnable||await e.isRunnable()},mutex:n.mutex??new It.WU,periodInMs:60*n.periodInMinutes*1e3,run:async()=>(await s()).run()}}},e);return await s.init(),s}function Lt(e){const{parameterProvider:t,token:r}=e;switch(t.type){case n.CLASS_PROVIDER:return{provide:r,useClass:t.useClass};case n.VALUE_PROVIDER:return{provide:r,useValue:t.useValue};default:(0,B.U)(t)}}var Gt=r(173656);const Bt=async({appDefinition:e,channels:t,currentNode:r,implementations:o,otherModules:s=[],logger:i=new Pt,storeInfrastructureFactory:a=new j,channelsListener:c=me,timers:p=new jt,keyValueStorageInfrastructure:f=new Ze,jsonFetcher:m=new Et,cronSource:h=new Mt(p),defaultDeviceStorageEncryptionCodec:y={type:n.CLASS_PROVIDER,useClass:u.Eu},defaultUserStorageEncryptionCodec:v={type:n.CLASS_PROVIDER,useClass:u.Eu}})=>{const b=()=>{throw new Error("Aborted")};Gt.abort=b,Gt.exit=b;const g=[...s,...Object.keys(o).map((e=>e)).map((e=>o[e]))],{configProviders:_,modules:C,modulesMetadata:S,requiredFeatureFlips:w,onFrameworkInits:P,crons:A,eventHandlers:U}=Rt(i,g);((e,t,r)=>{const n=new Set([...r.keys()]),o=new Set(Object.values(e).filter((e=>e.main===t||e.queryOnly.includes(t))).map((e=>e.api.name))),s=[...o].filter((e=>!n.has(e))),i=[...n].filter((e=>!o.has(e)));if(s.length>0)throw new Error("These APIs are not implemented "+JSON.stringify(s));if(i.length>0)throw new Error("Some implementations do not have APIS "+JSON.stringify(i))})(e,r,S);const D=(e=>[...e.entries()].reduce(((e,[t,r])=>{const n=r.handlers?.events??{};return e[t]=Object.values(n).reduce(((e,t)=>t.name?(e[t.name]=Object.keys(t.events),e):e),(0,l.Ay)({})),e}),(0,l.Ay)({})))(S),F=new ie({appDefinition:e,channels:t,channelsListener:c,currentNode:r,subscriptions:D}),k=new re(F),L=new Pe(F),G=new St(k,L),B=Lt({token:M,parameterProvider:y}),V=Lt({token:I,parameterProvider:v}),H=new O,q=vt.create({nodeConfiguration:F,brokers:{cqrs:k,event:L},modules:C,configProviders:_,logger:i,lifeCycle:H,storeInfrastructureFactory:a,timers:p,requiredFeatureFlips:w,keyValueStorageInfrastructure:f,jsonFetcher:m,eventHandlers:U,defaultDeviceStorageEncryptionCodecProvider:B,defaultUserStorageEncryptionCodecProvider:V}),$=await R.NestFactory.create(q,G,{logger:i}),K=await $.init();await async function(e,t){const r=Object.freeze({id:-1}),n=e.map((async e=>{const n={type:je.Init};t.registerRequestByContextId(n,r);const o=await t.resolve(e,r,{strict:!1});await o.onFrameworkInit()}));await Promise.all(n)}(P,K),$.listen("");const Q=G.isListening$.pipe((0,N.h)((e=>!!e)));return await(0,T.z)(Q),H.addAppReadyHook((async()=>{const e=await kt(A,p,K,f,r),t=h.alarm$.pipe((0,x.z)((async()=>{await e.runAllCrons()}))).subscribe();return()=>{t.unsubscribe()}})),H.addShutdownHook((()=>$.close())),await H.startup(),{stop:()=>H.shutDown(),createClient:()=>ce(e,k),sendEvent:(e,t,r,n)=>L.publishEvent(e,t,r,n??new d({useCaseId:(0,E.Z)()}))}},Vt=e=>Bt({...e,appDefinition:e.appDefinition,channels:{},currentNode:"node"}),Ht=(e,t)=>(()=>{const e=t=>({define:()=>t,with:r=>{const n={api:r.module,main:r.on,queryOnly:r.queryOnly??[]},o={[r.module.name]:n};return e({...t,...o})}});return e({})})().with({module:b.requestContextApi,on:e}).with({module:b.taskTrackingApi,on:e}),qt=Ht("node",[]);class $t{}var Kt;!function(e){e.DummyFeatureFlip0="dummyFeatureFlip0",e.DummyFeatureFlip1="dummyFeatureFlip1",e.DummyFeatureFlip2="dummyFeatureFlip2",e.DummyFeatureFlip3="dummyFeatureFlip3",e.DummyFeatureFlip4="dummyFeatureFlip4",e.DummyFeatureFlip5="dummyFeatureFlip5"}(Kt||(Kt={}));const Qt={[Kt.DummyFeatureFlip0]:!1,[Kt.DummyFeatureFlip1]:!0,[Kt.DummyFeatureFlip2]:!0,[Kt.DummyFeatureFlip3]:!0,[Kt.DummyFeatureFlip4]:!1,[Kt.DummyFeatureFlip5]:!0};class Wt extends $t{async getFeatureFlipsForActiveUser(e){const t=e.reduce(((e,t)=>t in Qt?{...e,[t]:Qt[t]}:{...e}),{});return await Promise.resolve(t)}}const zt={[b.UseCaseScope.Device]:M,[b.UseCaseScope.User]:I},Yt=1e3;function Jt(...e){return e.flatMap((e=>function(e){const t=e.Definition.persist?function(e,t,r){const{EncryptionCodec:n=zt[t],SerializationCodec:o=u.bL,TransportStorageCodec:s=u.z,initialValue:i,schemaVersion:a}=r.Definition;class l{constructor(e,t,r,n){this.encryptionCodec=e,this.serializationCodec=t,this.transportStorageCodec=r,this.backend=n}}class p extends r{constructor(e){super(e.encryptionCodec,e.serializationCodec,e.transportStorageCodec,e.backend)}}const f={token:(0,E.Z)(),inject:[l],asyncFactory:e=>Promise.resolve(new p(e))},m={token:l,inject:[c,n,o,s,D,...t===b.UseCaseScope.User?[d]:[]],asyncFactory:async(r,n,o,s,c,u)=>{const d=await c.createBackend(r,e,(t===b.UseCaseScope.User?u?.userName:"")??"",(async()=>{const e={version:a,content:i},t=await o.encode(e),r=await n.encode(t);return await s.encode(r)}));return new l(n,o,s,d)}};return[m,...rr(t,r,f)]}(e.Definition.storeName,e.Definition.scope,e.Definition.storage):[],r={token:(0,E.Z)(),inject:[c,O,C,P,e.Definition.scope===b.UseCaseScope.User?d:R.REQUEST,...e.Definition.persist?[e.Definition.storage,e.Definition.codec]:[]],asyncFactory:async(t,r,n,o,s,i,a)=>await(()=>{const c=new e(t,e.Definition,o,(e.Definition.scope===b.UseCaseScope.User?s.userName:"")??"");r.addShutdownHook((()=>c.stop()));const{Definition:u}=e;return u.persist&&async function(e){const t=e.isCache?await async function(e){try{return await a.decode(await i.read())}catch(t){const r=["Data corrupted on disk. Using initial value for the store",t];return n.warn(...r),await a.decode(e.storage.Definition.initialValue)}}(e):await a.decode(await i.read());await c.set(t);const o=e.persistPeriod??Yt,s=(0===e.persistPeriod?c.state$:c.state$.pipe((0,g.b)(o))).pipe((0,_.w)((async e=>{await i.write(await a.encode(e))}))).subscribe();r.addShutdownHook((()=>s.unsubscribe()))}(u),c})()};return[...t,...rr(e.Definition.scope,e,r)]}(e)))}const Zt=(e,t)=>({[e.name]:{name:e.name,events:t}});function Xt(e){const{exports:t=[],imports:r=[],handlers:n={commands:{},events:{},queries:{}},providers:o=[],onFrameworkInit:s,stores:u,batchExecutors:d,crons:l}=e,p=e.api?.name??e.sharedModuleName,f=p?Jt(...u??[]):[],m=p?(new v).getProviders(d??[]):[],h=[...o,...(l??[]).map((e=>e.handler)),...f,...m,...Object.values(n.commands),...Object.values(n.queries),...Object.values(n.events).map((e=>Object.values(e.events))).reduce(((e,t)=>[...e,...t]),new Array),...s?[s]:[],{provide:c,useValue:p}],{asyncProviders:y,basicClassProviders:b}=h.reduce(((e,t)=>{return"object"==typeof(r=t)&&"token"in r&&"asyncFactory"in r&&"function"==typeof r.asyncFactory?{asyncProviders:[...e.asyncProviders,t],basicClassProviders:e.basicClassProviders}:{asyncProviders:e.asyncProviders,basicClassProviders:[...e.basicClassProviders,t]};var r}),{asyncProviders:new Array,basicClassProviders:new Array}),g=[...b,...y.map((e=>({provide:e.token,useFactory:e.asyncFactory,inject:e.inject})))],_=(0,a.Module)({exports:t,imports:r,providers:g});return t=>(Reflect.defineMetadata(i,e,t),_(t))}const er=(e,t)=>{const r=t.token??(0,E.Z)();class n{constructor(){this.instances=new Map}}const o=n,s={token:e,inject:[n,d,R.ModuleRef,R.REQUEST],asyncFactory:async(t,{userName:n},o,s)=>{const i=R.ContextIdFactory.getByRequest(s);if(!n)throw new Error(`Provider ${e} is a user-scoped singleton but there is no user`);const a=t.instances.get(n);if(a)return Promise.resolve(a);const c=await o.resolve(r,i);return t.instances.set(n,c),c}};return[{token:r,asyncFactory:t.asyncFactory,inject:[...t.inject??[],d]},o,s]},tr=(e,t)=>{const r=t.token??(0,E.Z)();class n{}oe()(n);const o=n,s={token:e,inject:[n,R.ModuleRef,R.REQUEST],asyncFactory:async(e,t,n)=>{const o=R.ContextIdFactory.getByRequest(n),s=e.instance;if(s)return Promise.resolve(s);const i=await t.resolve(r,o);return e.instance=i,i}};return[{...t,token:r},o,s]},rr=(e,t,r)=>{switch(e){case b.UseCaseScope.Device:return tr(t,r);case b.UseCaseScope.User:return er(t,r);default:(0,B.U)(e)}};let nr=class extends u.eN{constructor(e){super(e)}};nr=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([oe(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[u.jN])],nr);let or=class{};function sr(e){const t=oe();return r=>{Reflect.defineMetadata("dl-handler",r,e),t(r)}}or=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([Xt({providers:[nr],configurations:{infrastructure:{token:u.jN}},exports:[nr],sharedModuleName:"http"})],or);const ir=e=>"object"==typeof e&&null!==e&&(0,l.l$)(e,"swStartTime")&&(0,l.l$)(e,"taskTrackingList")&&"string"==typeof e.swStartTime&&"object"==typeof e.taskTrackingList;class ar extends(dt({persist:!1,initialValue:{swStartTime:"",taskTrackingList:{}},scope:b.UseCaseScope.Device,storeName:"task-tracking",storeTypeGuard:ir,capacity:lt._001KB})){}let cr=class{constructor(e){this.store=e}async execute({body:e}){const t=(new Date).toISOString(),{taskName:r,feature:n,businessDomain:o}=e,s={taskName:r,feature:n,businessDomain:o,startTime:t,serviceWorkerInterruptionCount:0},i=await this.store.getState();return await this.store.set({...i,taskTrackingList:{...i.taskTrackingList,[t]:s}}),Promise.resolve((0,Re.Vp)({id:t}))}};cr=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([sr(b.StartTaskTrackingCommand),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[ar])],cr);var ur=r(453576),dr=r(110203);let lr=class{constructor(e,t,r){this.store=e,this.cqrsClient=t,this.appLifecycle=r}onFrameworkInit(){this.appLifecycle.addAppReadyHook((async()=>{const e=await this.store.getState(),t={...e.taskTrackingList},r=Object.keys(e.taskTrackingList).map((async r=>{const{taskName:n,feature:o,businessDomain:s,startTime:i}=e.taskTrackingList[r],a=new dr.UserMv3ExtensionTaskInterruptionEvent({businessDomain:s,feature:o,taskName:n,taskStartDateTime:i,serviceWorkerStartDateTime:e.swStartTime}),c=this.cqrsClient.getClient(ur.carbonLegacyApi);await c.commands.carbon({name:"logEvent",args:[{event:a}]}),delete t[r]}));await Promise.all(r),await this.store.set({swStartTime:(new Date).toISOString(),taskTrackingList:t})}))}};lr=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([se(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[ar,le,O])],lr);let pr=class{constructor(e,t,r){this.store=e,this.cqrsClient=t,this.logger=r}async execute({body:e}){const{taskTrackingId:t}=e,r=await this.store.getState(),n=r.taskTrackingList[t];if(!n)return this.logger.trace("Trying to track a task that does not exist"),(0,Re.Vp)(void 0);const{taskName:o,feature:s,businessDomain:i,startTime:a,serviceWorkerInterruptionCount:c}=n,u=new dr.UserMv3ExtensionTaskReportEvent({businessDomain:i,feature:s,serviceWorkerInterruptionCount:c,serviceWorkerStartDateTime:r.swStartTime,taskName:o,taskStartDateTime:a,taskEndDateTime:(new Date).toISOString()}),d=this.cqrsClient.getClient(ur.carbonLegacyApi);await d.commands.carbon({name:"logEvent",args:[{event:u}]});const l={...r.taskTrackingList};return delete l[t],await this.store.set({swStartTime:r.swStartTime,taskTrackingList:l}),(0,Re.Vp)(void 0)}};pr=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([sr(b.TerminateTaskTrackingCommand),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[ar,le,C])],pr);let fr=class{};function mr(e){const t=oe();return r=>{Reflect.defineMetadata("dl-handler",r,e),t(r)}}function hr(e){const t=oe();return r=>{if(Reflect.hasMetadata("dl-handlers",e)){const t=Reflect.getMetadata("dl-handlers",e);Reflect.defineMetadata("dl-handlers",[...t,r],e)}else Reflect.defineMetadata("dl-handlers",[r],e);t(r)}}fr=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([Xt({api:b.taskTrackingApi,handlers:{commands:{startTaskTracking:cr,terminateTaskTracking:pr},events:{},queries:{}},stores:[ar],onFrameworkInit:lr,providers:[]})],fr);const yr=e=>!(!e||"object"!=typeof e)&&"userName"in e,vr=e=>!(!e||"object"!=typeof e)&&"featureFlips"in e;class br extends(dt({initialValue:{userName:void 0},persist:!1,scope:b.UseCaseScope.Device,storeName:"active-user-store",storeTypeGuard:yr,capacity:lt._001KB})){}class gr extends(dt({persist:!0,scope:b.UseCaseScope.Device,storeName:"feature-flip-store",capacity:lt._001KB,codec:u.Eu,storage:{initialValue:{featureFlips:{}},schemaVersion:1,typeGuard:vr}})){}let _r=class extends De{};_r=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([oe()],_r);var Or=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},Cr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};async function Sr(e,t){await t.set({featureFlips:{...e}})}let wr=class{constructor(e){this.activeUserStore=e}execute(){return this.activeUserStore.state$.pipe((0,L.U)((e=>e.userName)),(0,Y.x)(),(0,L.U)((e=>(0,Re.Vp)({userName:e}))))}};wr=Or([mr(b.ActiveUserQuery),Cr("design:paramtypes",[br])],wr);let Pr=class{constructor(e,t){this.featureFlipsStore=e,this.config=t,this.retrieveFeatureFlips=async e=>{if(0===e.length)return Promise.resolve({});const t=await(async e=>{const t=await this.featureFlipsStore.getState();return e.reduce(((e,r)=>{if(r in t.featureFlips){const n={};return n[r]=t.featureFlips[r],{...e,...n}}return e}),{})})(e),r=e.filter((e=>!(e in t)));if(0===r.length)return t;const n=await(async e=>await this.config.getFeatureFlipsForActiveUser(e))(r);return{...t,...n}}}execute(e){return(0,k.D)(this.retrieveFeatureFlips(e.body.requiredFeatureFlips)).pipe((0,_.w)((async e=>Object.keys(e).length>0?{retrievedFf:e,cachedFf:(await this.featureFlipsStore.getState()).featureFlips}:{retrievedFf:e})),(0,L.U)((({retrievedFf:e,cachedFf:t})=>(t&&Sr({...t,...e},this.featureFlipsStore),(0,Re.Vp)(e)))))}};Pr=Or([mr(b.UserFeatureFlipsQuery),Cr("design:paramtypes",[gr,$t])],Pr);let jr=class{constructor(e){this.featureFlipsStore=e}execute(){return(0,k.D)(this.featureFlipsStore.state$.pipe((0,L.U)((e=>(0,Re.Vp)({cachedFeatureFlips:Object.keys(e.featureFlips)})))))}};jr=Or([mr(b.GetCachedFeatureFlipsListQuery),Cr("design:paramtypes",[gr])],jr);let Er=class{constructor(e){this.featureFlipsStore=e}async execute({body:{featureFlips:e}}){return await Sr(e,this.featureFlipsStore),(0,Re.Vp)(void 0)}};Er=Or([sr(b.SetFeatureFlipsInStoreCommand),Cr("design:paramtypes",[gr])],Er);let Rr=class{constructor(e,t){this.activeUserStore=e,this.eventEmitter=t}async execute({body:{userName:e}}){return await this.activeUserStore.set({userName:e}),this.eventEmitter.sendEvent("activeUserChanged",null),(0,Re.Vp)(void 0)}};Rr=Or([sr(b.SetActiveUserCommand),Cr("design:paramtypes",[br,_r])],Rr);let Ar=class{};Ar=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([Xt({api:b.requestContextApi,handlers:{commands:{setActiveUser:Rr,setFeatureFlipsInStore:Er},events:{},queries:{activeUser:wr,userFeatureFlips:Pr,getCachedFeatureFlipsList:jr}},stores:[br,gr],configurations:{featureFlipsConf:{token:$t}},providers:[_r]})],Ar);const Mr=16,Ir=.5,Ur=1.3;function Dr(e){var t;const{chunkControl:{decrement:r=Ir,increment:n=Ur,initialSize:o=Mr}={decrement:Ir,increment:Ur,initialSize:Mr}}=e,s=new It.WU;return(t=class{constructor(e,t){this.repository=e,this.processor=t}async dispatchBatch(e){await s.runExclusive((async()=>{const t=await this.pushItemsInQueue(e);for(;t.queue.length>0;)await this.processOneChunkFromQueue(t)}))}async pushItemsInQueue(t){const r=await this.repository.getBatchState(e.name),n=t.filter((e=>!r.queue.find((t=>t===e))));return n.length&&(r.queue.push(...n),await this.repository.setBatchState(e.name,r)),r}async processOneChunkFromQueue(t){const s=function(e){const{lastStartedChunkFirstId:t,lastStartedChunkSize:s=o}=e;if(!t)return o;const i=!e.queue.find((e=>e===t));return Math.max(1,i?Math.ceil(s*n):Math.floor(s*r))}(t),i=Math.min(s,t.queue.length);if(!i)throw new Error("Should have something to process");await this.repository.setBatchState(e.name,{...t,lastStartedChunkSize:i,lastStartedChunkFirstId:t.queue[0]});const a=t.queue.splice(0,i);await this.processor.processChunk(a),await this.repository.setBatchState(e.name,t)}}).Definition=e,t}},468224:(e,t,r)=>{r.r(t),r.d(t,{ActiveUserChangedEvent:()=>C,ActiveUserQuery:()=>v,CommandMessage:()=>i,EMPTY_QUERY_RESULT:()=>u,EventMessage:()=>h,FilterOperationName:()=>s,GetCachedFeatureFlipsListQuery:()=>g,PAGINATION_START_PAGE_INDEX:()=>c,QueryMessage:()=>a,SetActiveUserCommand:()=>_,SetFeatureFlipsInStoreCommand:()=>O,StartTaskTrackingCommand:()=>P,TerminateTaskTrackingCommand:()=>j,UseCaseScope:()=>o,UserFeatureFlipsQuery:()=>b,appClientMockBuilder:()=>R,defineCarbonCommand:()=>p,defineCommand:()=>l,defineEvent:()=>y,defineModuleApi:()=>m,defineQuery:()=>d,featureFlipsApi:()=>w,requestContextApi:()=>S,taskTrackingApi:()=>E});class n{}var o,s;!function(e){e.User="user",e.Device="device"}(o||(o={}));class i extends n{constructor(e){super(),this.body=e}}class a extends n{constructor(e){super(),this.body=e}}!function(e){e.Equals="equals",e.Differs="differs",e.Matches="matches",e.In="in",e.Contains="contains"}(s||(s={}));const c=1,u={items:[],itemCount:0,page:c,pageCount:1},d=(e={scope:o.User})=>{var t;return(t=class extends a{}).metadata=e,t},l=(...[e={scope:o.User}])=>{var t;return(t=class extends i{}).metadata=e,t},p=(e={scope:o.User})=>{var t;return(t=class extends i{}).metadata=e,t},f=(e,t)=>Object.entries(e).reduce(((e,[r,n])=>(e[((e,t)=>e.endsWith(t)?e.charAt(0).toLowerCase()+e.substring(1,e.length-t.length):e)(r,t)]=n,e)),{}),m=e=>({name:e.name,commands:f(e.commands,"Command"),queries:f(e.queries,"Query"),events:f(e.events,"Event"),requiredFeatureFlips:e.requiredFeatureFlips||[]});class h{constructor(e){this.body=e}}const y=(e={scope:o.User})=>{var t;return(t=class extends h{}).metadata=e,t};class v extends(d({scope:o.Device})){}class b extends(d({scope:o.Device})){}class g extends(d({scope:o.Device})){}class _ extends(l({scope:o.Device})){}class O extends(l({scope:o.Device})){}class C extends(y({scope:o.Device})){}const S=m({commands:{SetActiveUserCommand:_,SetFeatureFlipsInStoreCommand:O},events:{activeUserChanged:C},name:"requestContext",queries:{ActiveUserQuery:v,UserFeatureFlipsQuery:b,GetCachedFeatureFlipsListQuery:g}}),w=m({commands:{},events:{},name:"featureFlips",queries:{}});class P extends(l({scope:o.Device})){}class j extends(l({scope:o.Device})){}const E=m({name:"taskTracking",commands:{startTaskTracking:P,terminateTaskTracking:j},events:{},queries:{}}),R=()=>{const e=new Map,t={withModule:(r,n)=>{const o="string"==typeof r?r:r.name;return e.set(o,n),t},build:()=>Array.from(e.keys()).reduce(((t,r)=>({...t,[r]:e.get(r)})),{})};return t}},585887:(e,t,r)=>{r.d(t,{Yu:()=>i});var n=r(468224);class o extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}class s extends((0,n.defineCommand)({scope:n.UseCaseScope.Device})){}const i=(0,n.defineModuleApi)({commands:{LogEventCommand:o,LogPageViewCommand:s},events:{},name:"analytics",queries:{}});var a=r(27606),c=r(287279),u=r(453576);let d=class{constructor(e){this.cqrsClient=e}async logEvent(e){const{carbon:t}=this.cqrsClient.getClient(u.carbonLegacyApi).commands,r=await t({name:"logEvent",args:[{event:e}]});if((0,c.hx)(r))throw new Error("LogEvent from carbon failed")}async logPageView(e,t){const{carbon:r}=this.cqrsClient.getClient(u.carbonLegacyApi).commands,n=await r({name:"logPageView",args:[{pageView:e,browseComponent:t}]});if((0,c.hx)(n))throw new Error("LogPageView from carbon failed")}};d=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[a.CqrsClient])],d);var l=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let f=class{constructor(e){this.analyticsService=e}async execute({body:{event:e}}){return await this.analyticsService.logEvent(e),(0,c.Vp)(void 0)}};f=l([(0,a.CommandHandler)(o),p("design:paramtypes",[d])],f);let m=class{constructor(e){this.analyticsService=e}async execute({body:{pageView:e,browseComponent:t}}){return await this.analyticsService.logPageView(e,t),(0,c.Vp)(void 0)}};m=l([(0,a.CommandHandler)(s),p("design:paramtypes",[d])],m);let h=class{};h=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Module)({api:i,providers:[d],handlers:{commands:{logEvent:f,logPageView:m},events:{},queries:{}}})],h);let y=class{constructor(e){this.crypto=e}};y=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],y);let v=class{constructor(e){this.config=e}async derive(e,t,r){const{deriveKeyArgon2d:n}=this.config.crypto;return await n(e,t,r)}};v=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],v);var b=r(245059);let g=class extends b.SD{};g=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)()],g);let _=class{constructor(e,t){this.config=e,this.derivationCache=t}decrypt(e,t){return(0,b.FO)(e,this.config.crypto,this.derivationCache,t)}};_=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y,g])],_);let O=class{constructor(e,t){this.config=e,this.derivationCache=t}async encrypt(e,t,r,n,o){return await(0,b.gi)(e,this.config.crypto,r,this.derivationCache,n,t,o)}};O=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y,g])],O);let C=class{constructor(e){this.config=e}async sign(e,t,r=b.x4){const{signHmacSha:n}=this.config.crypto;return await n(e,t,r)}};C=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],C);let S=class{constructor(e){this.config=e}async verify(e,t,r,n=b.x4){const{verifyHmacSha:o}=this.config.crypto;return await o(e,t,r,n)}};S=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],S);let w=class{constructor(e){this.config=e}generate(){const{generateKeyAes256:e}=this.config.crypto;return e()}};w=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],w);let P=class{constructor(e){this.config=e}encrypt(e,t){const{getRandomValues:r}=this.config.crypto,n={padding:r(b.BU.padding)};return(0,b.yL)(e,this.config.crypto,b.oo,b.BU,t,n)}};function j(){return new Uint32Array([57920321,977424202,1999259334,3390546403,3917439743,16505144,3027631148,3235565160,2643335823,1420105356,998514539,2704347781,1011257802,823882961,790991339,3929284516]).buffer}P=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],P);let E=class{constructor(e){this.flexibleDecryptor=e}async decrypt(e){const t=j();return await this.flexibleDecryptor.decrypt(t,e)}};E=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[_])],E);var R=r(89685);let A=class{constructor(e){this.flexibleEncryptor=e}async encrypt(e){const t=j();return await this.flexibleEncryptor.encrypt(t,e,b.oo,b.gO)}};A=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[O])],A);let M=class{constructor(e,t){this.obfuscationKeyDecryptor=e,this.obfuscationKeyEncryptor=t}async encode(e){return await this.obfuscationKeyEncryptor.encrypt(e)}async decode(e){return(0,R.v)(e).startsWith("$1$noderivation$aes256$cbchmac64$16$")?await this.obfuscationKeyDecryptor.decrypt(e):e}};M=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[E,A])],M);let I=class{constructor(e){this.config=e}decrypt(e,t,r="SHA-256"){const{decryptRsaOaep:n}=this.config.crypto;return n(e,t,r)}};I=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],I);let U=class{constructor(e){this.config=e}encrypt(e,t,r="SHA-256"){const{encryptRsaOaep:n}=this.config.crypto;return n(e,t,r)}};U=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],U);let D=class{constructor(e){this.config=e}generate(e="SHA-256"){const{generateKeyPairRsaOaep:t}=this.config.crypto;return t(e)}};D=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],D);let N=class{constructor(e){this.config=e}async sign(e,t,r="SHA-256"){const{signRsassaPkcs1:n}=this.config.crypto;return await n(e,t,r)}};N=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],N);let T=class{constructor(e){this.config=e}async compute(e,t){const{computeHash:r}=this.config.crypto;return await r(e,t)}};T=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],T);let x=class{constructor(e){this.config=e}compute(e){const{unsafeComputeMd5Hash:t}=this.config.crypto;return t(e)}};x=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y])],x);let F=class{};F=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Module)({sharedModuleName:"cryptography",configurations:{infrastructure:{token:y}},providers:[v,g,_,O,C,S,w,P,E,M,A,I,U,D,N,T,x],exports:[v,g,_,O,C,S,w,P,E,M,A,I,U,D,N,T,x]})],F);let k=class{constructor(e,t){this.config=e,this.derivationCache=t}decrypt(e,t){return(0,b.Jo)(e,this.config.crypto,this.derivationCache,t)}};k=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[y,g])],k);var L=r(160399),G=r(948844),B=r(828489);let V=class{constructor(e){this.cqrsClient=e}getPlatformInfo(){const{queries:{carbonState:e}}=this.cqrsClient.getClient(u.carbonLegacyApi);return(0,L.z)(e({path:"device.platform.info"}).pipe((0,G.nb)({success:e=>{if(!function(e){return!(!(e&&"object"==typeof e&&(0,B.l$)(e,"platformName")&&(0,B.l$)(e,"appVersion")&&(0,B.l$)(e,"browser")&&(0,B.l$)(e,"browserVersion")&&(0,B.l$)(e,"country")&&(0,B.l$)(e,"osCountry")&&(0,B.l$)(e,"osVersion")&&(0,B.l$)(e,"os")&&(0,B.l$)(e,"lang"))||(0,B.l$)(e,"anonymousApplicationId")&&"string"!=typeof e.anonymousApplicationId||"string"!=typeof e.platformName||"string"!=typeof e.appVersion||"string"!=typeof e.browser||"string"!=typeof e.browserVersion||"string"!=typeof e.country||"string"!=typeof e.osCountry||"string"!=typeof e.osVersion||"string"!=typeof e.os||"string"!=typeof e.lang)}(e))throw new Error("Invalid platform info received from carbon");return e},failure:()=>{throw new Error("Unexpected error")}})))}};V=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[a.CqrsClient])],V);let H=class{};H=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Module)({providers:[V],exports:[V],sharedModuleName:"platformInfo"})],H);var q=r(734987),$=r(661348),K=r(901774);class Q{constructor(e){this.store=e}async getServerToClientClockDrift(){const{drift:e}=await this.store.getState();return e}storeServerToClientClockDrift(e){return this.store.update((()=>({drift:e})))}}class W{constructor(e){this.baseUrl=e.baseUrl,this.appKeys=e.appKeys}}class z{}const Y={drift:null},J=e=>!(!e||"object"!=typeof e||!(0,B.l$)(e,"drift")||e.drift&&"number"!=typeof e.drift);class Z extends((0,a.defineStore)({storeTypeGuard:J,storeName:"ClockSyncStore",scope:n.UseCaseScope.Device,initialValue:Y,isCache:!1,persist:!1,capacity:a.StoreCapacity._001KB})){}const X={v1:{accountrecovery:K.uF,authentication:K.Vy,darkwebmonitoring:K.Dw,features:K.AN,file:K.$B,pwleak:K.JM,sharingUserdevice:K.bo,teams:K.pd,time:K.qp,useractivity:K.Vk}};let ee=class{constructor(e,t,r,n,o,s){this.serverApiConfig=e,this.httpClient=t,this.store=r,this.hmacSigner=n,this.secureHasher=o,this.platformInfoService=s}async init(){const{serverApiConfig:e,secureHasher:t,httpClient:r,hmacSigner:n,store:o}=this,s=new Q(o),i=await this.platformInfoService.getPlatformInfo(),{appKeys:a,baseUrl:c}=e;this.rawSdk=(0,$.Y)({secureHasher:t,httpClient:r,timeSyncStore:s,hmacSigner:n,apis:X,config:{appKeys:a,baseUrl:c,platformInfo:{platformName:i.platformName,version:i.appVersion,osversion:i.osVersion,language:i.lang}}})}get sdk(){if(!this.rawSdk)throw new Error("ConfiguredServerSdk not initialized");return this.rawSdk}};ee=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[W,a.HttpClient,Z,C,T,V])],ee);var te=r(87065);let re=class{constructor(e,t){this.cqrsClient=e,this.infra=t}getActiveUserDeviceCredentials(){const{queries:{activeUser:e}}=this.cqrsClient.getClient(n.requestContextApi);return e().pipe((0,te.U)((e=>{if((0,c.d6)(e))return(0,c.db)(e);throw new Error("Failed to get active user")})),(0,q.b)((({userName:e})=>{if(!e)throw new Error("No active user available");return this.infra.getDeviceCredentialsForUser(e)})))}};re=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[a.CqrsClient,z])],re);let ne=class{constructor(e,t){this.appliedV1Services=this.buildInjectedServices("v1",e.sdk),this.credentialsService=t}get v1(){return this.appliedV1Services}buildInjectedServices(e,t){return Object.keys(t[e]).reduce(((r,n)=>({...r,[n]:this.buildInjectedApiServices(e,t,n)})),{})}buildInjectedApiServices(e,t,r){return Object.getOwnPropertyNames(Object.getPrototypeOf(t.v1[r])).filter((e=>"constructor"!==e)).reduce(((n,o)=>({...n,[o]:this.buildInjectedRouteService(t,e,r,o)})),{})}buildInjectedRouteService(e,t,r,n){const o=K.tA[r][n];if(!o)throw new Error("Unable to find endpoint descriptor");const{authType:s}=o;return(...o)=>{const i=e[t][r],a=i[n].bind(i);if(s===$.d.USER_DEVICE)return this.credentialsService.getActiveUserDeviceCredentials().pipe((0,q.b)((e=>a(e,...o))));if([$.d.NONE,$.d.APP].includes(s))return a(...o);throw new Error("Not supported")}}};ne=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[ee,re])],ne);let oe=class{constructor(e){this.configuredServerSdk=e}get v1(){return this.configuredServerSdk.sdk.v1}};oe=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[ee])],oe);let se=class{};se=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Module)({providers:[oe,ne,re,{token:ee,asyncFactory:async(e,t,r,n,o,s)=>{const i=new ee(e,t,r,n,o,s);return await i.init(),i},inject:[W,a.HttpClient,Z,C,T,V]}],exports:[oe,ne],configurations:{serverApi:{token:W},serverApiInfrastructure:{token:z}},stores:[Z],sharedModuleName:"webServices",imports:[F,a.HttpModule,H]})],se);let ie=class extends a.FeatureFlipsServiceAbstract{constructor(e){super(),this.serverApiClient=e}getFeatureFlipsForActiveUser(e){return(0,L.z)(this.serverApiClient.v1.features.getAndEvaluateForUser({features:e}).pipe((0,G.nb)({success:t=>{const r=new Set(t.data.enabledFeatures);return e.reduce(((e,t)=>({...e,[t]:r.has(t)})),{})},failure:()=>({})})))}cleanOutDeletedFeatureFlips(e){return(0,L.z)(this.serverApiClient.v1.features.listAvailableFeatureFlips({}).pipe((0,G.nb)({success:t=>{const r=Object.fromEntries(t.data.features.map((e=>[e.name,e.archived])));return Array.from(e.reduce(((e,t)=>(t in r&&e.add(t),e)),new Set))},failure:()=>e})))}};ie=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[ne])],ie);let ae=class{constructor(e,t,r){this.getCachedFeatureFlipsList=async()=>{const e=await(0,L.z)(this.requestContextApi.queries.getCachedFeatureFlipsList());return(0,c.d6)(e)?e.data.cachedFeatureFlips:[]},this.featureFlipsService=e,this.requestContextApi=t.getClient(n.requestContextApi),this.requestContext=r}async handle(){const e=this.requestContext.requiredFeatureFlips??[],t=await this.getCachedFeatureFlipsList(),r=await this.featureFlipsService.cleanOutDeletedFeatureFlips([...e,...t]),n={...await this.featureFlipsService.getFeatureFlipsForActiveUser(r)};return await this.requestContextApi.commands.setFeatureFlipsInStore({featureFlips:n}),Promise.resolve()}};ae=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.EventHandler)(n.ActiveUserChangedEvent),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[ie,a.ContextLessCqrsClient,a.RequestContext])],ae);let ce=class{};ce=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Module)({api:n.featureFlipsApi,providers:[ie],imports:[se],exports:[ie],handlers:{commands:{},queries:{},events:{...(0,a.useEventsOfModule)(n.requestContextApi,{activeUserChanged:ae})}}})],ce);var ue=r(907537),de=r(227257);let le=class{constructor(){this.filesToCheck={},this.publishSubscriber=new ue.t,this.updatedFileStream$=new de.y((e=>{this.publishSubscriber.next(e),this.publishSubscriber.complete()}))}publish(e){(0,L.z)(this.publishSubscriber).then((t=>t.next(e)))}fileSubscription(e){return this.filesToCheck={...this.filesToCheck,...e},this.updatedFileStream$}getFilesToCheck(){return this.filesToCheck}};le=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[])],le);var pe=r(110203),fe=r(69885);class me{}class he{}class ye{}const ve="update_available",be=new Set([ve,"not_updated","not_found","error_server"]);const ge=e=>e[1].status===ve;let _e=class extends me{constructor(e,t){super(),this.httpClient=e,this.serverApiClient=t}async downloadRemoteFileUpdate(e){const t=await this._getFileMeta(e);return(0,c.hx)(t)?[(0,fe.of)(t)]:this._retrieveFilesFromServer((0,c.db)(t))}_getFileMeta(e){return(0,L.z)(this.serverApiClient.v1.file.getFileMeta(e).pipe((0,te.U)((e=>{if((0,c.hx)(e))return(0,c.Rn)(pe.RemoteFileUpdateError.ServerError);const t=(0,c.db)(e);return r=t.data,Object.values(r).every((e=>"object"==typeof e&&void 0!==e.status&&be.has(e.status)))?(0,c.Vp)(t.data):(0,c.Rn)(pe.RemoteFileUpdateError.ServerError);var r}))))}_retrieveFilesFromServer(e){return Object.entries(e).filter(ge).map((([e,t])=>this._getBufferFromURL(e,t)))}_getBufferFromURL(e,t){return this.httpClient.get(t.url,{observe:"body",responseType:"arraybuffer"}).pipe((0,te.U)((r=>(0,c.d6)(r)?(0,c.Vp)({fileName:e,buffer:(0,c.db)(r),updatedFile:t}):(0,c.Rn)(pe.RemoteFileUpdateError.DownloadError))))}};_e=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[a.HttpClient,ne])],_e);var Oe=r(991501),Ce=r(536414);let Se=class extends he{constructor(e,t){super(),this.cqrsClient=e,this.appLogger=t}async decipher(e,t){const{carbon:r}=this.cqrsClient.getClient(u.carbonLegacyApi).commands,n=await r({name:"decipherRemoteFile",args:[{cipheredFileContent:e,fileMetaData:t}]});if((0,c.hx)(n))return(0,c.Rn)(pe.RemoteFileUpdateError.DecipherError);const{carbonResult:o}=(0,c.db)(n);return(e=>"object"==typeof e&&null!==e&&Object.entries(e).some((([e,t])=>"decipheredFile"===e&&t instanceof ArrayBuffer)))(o)?(0,c.Vp)(o.decipheredFile):(0,c.Rn)(pe.RemoteFileUpdateError.DecipherError)}};Se=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[a.CqrsClient,a.AppLogger])],Se);let we=class extends ye{constructor(e,t,r){super(),this.appLogger=e,this.rfuDownloaderService=t,this.rfuDecipheringService=r,this._filesToCheck={},this._emitDownloadedFilesUpdate$=new ue.t,this._downloadedFileStream$=new de.y((e=>{this._emitDownloadedFilesUpdate$.next((t=>{e.next(t)})),this._emitDownloadedFilesUpdate$.complete()}))}observeRemoteFileUpdates(e){return this._filesToCheck={...this._filesToCheck,...e},this._downloadedFileStream$}async downloadAndDecipherRemoteFiles(){const e=(await this.rfuDownloaderService.downloadRemoteFileUpdate(this._filesToCheck)).map((e=>this._downloadAndDecipherSingleFile(e)));(0,Oe.D)(e).subscribe((e=>{const t=e.reduce(((e,t)=>{if((0,c.hx)(t))return this._logRemoteFileUpdateError(t),e;const r=(0,c.db)(t);return{...e,[r.fileName]:r}}),{});this._callEmitDownloadedFilesUpdate(t)}))}async _applyDecipheringStep(e){const t=e.updatedFile.key?await this.rfuDecipheringService.decipher(e.buffer,e.updatedFile):(0,c.Vp)(e.buffer);return(0,c.d6)(t)?(0,c.Vp)({...e,buffer:(0,c.db)(t)}):t}_downloadAndDecipherSingleFile(e){return e.pipe((0,Ce.z)((e=>(0,c.d6)(e)?this._applyDecipheringStep((0,c.db)(e)):Promise.resolve(e))),(0,te.U)((e=>{if((0,c.hx)(e))return e;const{fileName:t,updatedFile:r,buffer:n}=(0,c.db)(e);return(0,c.Vp)({fileName:t,revision:r.revision,buffer:n,lastDownloadTimestamp:Date.now()})})))}_callEmitDownloadedFilesUpdate(e){return(0,L.z)(this._emitDownloadedFilesUpdate$).then((t=>{t(e)}))}_logRemoteFileUpdateError(e){this.appLogger.error("[RFU] An error has occured: ",(0,c.Yv)(e))}};we=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[a.AppLogger,_e,Se])],we);let Pe=class{constructor(e,t,r,n){this.appLogger=e,this.featureFlipService=t,this.remoteFileUpdateService=r,this.dispatcherService=n}async run(){if(!(await this.featureFlipService.getFeatureFlipsForActiveUser(["coreAnalysis_web_rfuInGraphene_dev"])).coreAnalysis_web_rfuInGraphene_dev)return;const e=this.dispatcherService.getFilesToCheck();this.remoteFileUpdateService.observeRemoteFileUpdates(e).subscribe((e=>{this.dispatcherService.publish(e)})),this.remoteFileUpdateService.downloadAndDecipherRemoteFiles()}};Pe=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Injectable)(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[a.AppLogger,ie,we,le])],Pe);let je=class{};je=function(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.Module)({sharedModuleName:"RemoteFileUpdateModule",configurations:{remoteFileUpdateInfrastructure:{token:ye},remoteFileUpdateDownloaderInfrastructure:{token:me},decipherInfrastructure:{token:he}},crons:[{handler:Pe,periodInMinutes:1,name:"cron",scope:n.UseCaseScope.User}],providers:[we,Se,_e,le],imports:[ce,a.HttpModule,se],exports:[we,Se,_e,le],requiredFeatureFlips:["coreAnalysis_web_rfuInGraphene_dev"]})],je)},1971:(e,t,r)=>{function n(e){const t=new Uint8Array(e);let r="";for(const e of t)r+=String.fromCharCode(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}r.d(t,{a:()=>n})},89685:(e,t,r)=>{r.d(t,{b:()=>o,v:()=>s});const n=Math.pow(2,14)-1;function o(e){const t=new Uint16Array(e),r=t.length;let o="",s=n;for(let e=0;e<r;e+=s){e+s>r&&(s=r-e);const n=t.subarray(e,e+s);o+=String.fromCharCode(...n)}return o}function s(e){return o(new Uint8Array(e))}},707502:(e,t,r)=>{r.d(t,{R:()=>s});var n=r(46041);const o=new Uint8Array(256);for(let e=0;e<n.U.length;e++)o[n.U.charCodeAt(e)]=e;function s(e){let t=.75*e.length;const r=e.length;let n,s,i,a,c,u=0;e.endsWith("=")&&(t--,"="===e[e.length-2]&&t--);const d=new ArrayBuffer(t),l=new Uint8Array(d);for(n=0;n<r;n+=4)s=o[e.charCodeAt(n)],i=o[e.charCodeAt(n+1)],a=o[e.charCodeAt(n+2)],c=o[e.charCodeAt(n+3)],l[u++]=s<<2|i>>4,l[u++]=(15&i)<<4|a>>2,l[u++]=(3&a)<<6|63&c;return d}},560198:(e,t,r)=>{function n(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),r=(4-t.length%4)%4,n=t.padEnd(t.length+r,"="),o=atob(n),s=new ArrayBuffer(o.length),i=new Uint8Array(s);for(let e=0;e<o.length;e++)i[e]=o.charCodeAt(e);return s}r.d(t,{s:()=>n})},496303:(e,t,r)=>{function n(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}r.d(t,{k:()=>n})},46041:(e,t,r)=>{r.d(t,{U:()=>o,V:()=>n});const n=Math.pow(10,6),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"},407573:(e,t,r)=>{r.d(t,{i:()=>n});const n=e=>{const t=e.match(/[\da-f]{2}/gi);return t?new Uint8Array(t.map((e=>parseInt(e,16)))).buffer:(new Uint8Array).buffer}},354066:(e,t,r)=>{function n(e){const t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let t=0;t<e.length;++t)r[t]=e.charCodeAt(t);return t}r.d(t,{u:()=>n})},743293:(e,t,r)=>{r.d(t,{N:()=>s});var n=r(530543);const o=Math.pow(10,6);function s(e,t=o){const r=e.length;if(0===r)return"";let s="",i=0,a=Math.min(i+t,r);for(;a<=r;){const o=e.charCodeAt(a-1);if(o>=55296&&o<=56319){if(a++,a>r)throw new Error("Invalid string provided to utf8ChunkEncode");continue}const c=e.slice(i,a),u=n.encode(c);if(s=s.concat(u),a===r)break;i=a,a=Math.min(i+t,r)}return s}},530263:(e,t,r)=>{r.r(t),r.d(t,{BrowserCronSource:()=>tt,BrowserPortConnector:()=>gt,BrowserPortListener:()=>ht,BrowserPortListenerChannel:()=>Ct,ExtensionCronSource:()=>at,ExtensionLocalStorageInfrastructure:()=>Ze,HttpFetchBackend:()=>H,IndexDbKeyValueStorage:()=>et,IndexDbStorage:()=>Xe,JsonExtensionResourceFetcher:()=>i,JsonWebAppResourceFetcher:()=>o,PageToWorkerChannel:()=>lt,computeHash:()=>p,cookieRemoveByDomain:()=>ue,decryptAes256:()=>h,decryptAesEcb256:()=>v,decryptRsaOaep:()=>b,deriveKeyArgon2d:()=>O,deriveKeyPbkdf2:()=>C,disableBrowserNativeAutofill:()=>ee,enablePrivacyService:()=>X,encryptAes256:()=>S,encryptRsaOaep:()=>w,generateKeyAes256:()=>P,generateKeyPairRsaOaep:()=>E,getLanguage:()=>W,getRandomValues:()=>R,getShortcutValues:()=>_e,isMv3Environment:()=>ct,makeStoreInfrastructure:()=>ze,signHmacSha:()=>M,signRsassaPkcs1:()=>I,storageLocalItemExists:()=>Se,unsafeComputeMd5Hash:()=>N,updateToolbarIcon:()=>se,verifyHmacSha:()=>T,verifyRsassaPkcs1:()=>x,webappClose:()=>Te,webappOpen:()=>Ue});var n=r(27606);class o extends n.JsonApplicationResourceFetcher{constructor(e){super(),this.publicPath=e}async fetch(e){return(await fetch(new URL(e.replace(/^\/*/,""),this.publicPath).href)).json()}}var s=r(92204);class i extends n.JsonApplicationResourceFetcher{async fetch(e){const t=(0,s.A)(e);return(await fetch(t)).json()}}var a=r(234064),c=r.n(a),u=r(96785);function d(e){const t=new Uint8Array(e),r=[];for(let e=0;e<t.byteLength;e++)r[e>>>2]|=t[e]<<24-e%4*8;return u.lib.WordArray.create(r,t.byteLength)}function l(e){const{sigBytes:t,words:r}=e,n=new Uint8Array(t);let o=0,s=0;for(;o!==t;){const e=r[s++];if(n[o++]=(4278190080&e)>>>24,o===t)break;if(n[o++]=(16711680&e)>>>16,o===t)break;if(n[o++]=(65280&e)>>>8,o===t)break;n[o++]=255&e}return n.buffer}function p(e,t){if(self.crypto.subtle)return self.crypto.subtle.digest({name:t},e);if("SHA-1"===t){const t=d(e),r=l(c()(t));return Promise.resolve(r)}return Promise.reject(new Error("Unsupported hash method"))}var f=r(245059);function m(e){return self.crypto.subtle.importKey("raw",e,f.zW,!1,["encrypt","decrypt"])}async function h(e,t,r){const n=await m(e);return self.crypto.subtle.decrypt({name:f.zW,iv:t},n,r)}var y=r(89685);function v(e,t){const r=(0,y.v)(t),n=d(e);return l(CryptoJS.AES.decrypt(r,n,{mode:CryptoJS.mode.ECB}))}async function b(e,t,r){const n={name:f.$k,hash:{name:r}},o=await self.crypto.subtle.importKey("pkcs8",e,n,!1,["decrypt"]);return self.crypto.subtle.decrypt(n,o,t)}var g=r(635558),_=r.n(g);async function O(e,t,r){const{tCost:n,mCost:o,parallelism:s}=r,{hash:i}=await _().hash({pass:new Uint8Array(e),salt:new Uint8Array(t),time:n,mem:o,hashLen:32,parallelism:s,type:g.ArgonType.Argon2d});return i.buffer}async function C(e,t,r){const n=await self.crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveKey"]),o={name:f.zW,length:256},{iterations:s,hashType:i}=r,a={name:"PBKDF2",salt:t,iterations:s,hash:{name:i}},c=await self.crypto.subtle.deriveKey(a,n,o,!0,["encrypt","decrypt"]);return self.crypto.subtle.exportKey("raw",c)}async function S(e,t,r){const n=await m(e);return self.crypto.subtle.encrypt({name:f.zW,iv:t},n,r)}async function w(e,t,r){const n={name:f.$k,hash:{name:r}},o=await self.crypto.subtle.importKey("spki",e,n,!1,["encrypt"]);return self.crypto.subtle.encrypt(n,o,t)}async function P(){const e=await self.crypto.subtle.generateKey({name:f.zW,length:f.N2},!0,["encrypt","decrypt"]);return self.crypto.subtle.exportKey("raw",e)}const j=new Uint8Array([1,0,1]);async function E(e){const t=await self.crypto.subtle.generateKey({name:f.$k,modulusLength:2048,publicExponent:j,hash:{name:e}},!0,["encrypt","decrypt"]),{privateKey:r,publicKey:n}=t;return{privateKey:await self.crypto.subtle.exportKey("pkcs8",r),publicKey:await self.crypto.subtle.exportKey("spki",n)}}function R(e){const t=new Uint8Array(e);return self.crypto.getRandomValues(t)}function A(e,t){return self.crypto.subtle.importKey("raw",e,{name:"HMAC",hash:{name:t}},!0,["sign","verify"])}async function M(e,t,r=f.x4){const n=await A(e,r);return self.crypto.subtle.sign({name:"HMAC",hash:{name:r}},n,t)}async function I(e,t,r){const n={name:f.xJ,hash:{name:r}},o=await self.crypto.subtle.importKey("pkcs8",e,n,!1,["sign"]);return self.crypto.subtle.sign(n,o,t)}var U=r(181968),D=r.n(U);function N(e){const t=d(e);return l(D()(t))}async function T(e,t,r,n=f.x4){const o=await A(e,n);return self.crypto.subtle.verify({name:"HMAC",hash:{name:n}},o,t,r)}async function x(e,t,r,n){const o={name:f.xJ,hash:{name:n}},s=await self.crypto.subtle.importKey("spki",e,o,!1,["verify"]);return self.crypto.subtle.verify(o,s,t,r)}var F=r(87065),k=r(793192),L=r(890171),G=r(547968),B=r(51992),V=r(287279);class H{constructor(){this.toHttpResult=e=>e.ok?(0,V.Vp)(e):(0,V.Rn)(new f.RV(e)),this.toHttpResponse=e=>new f.Zn({body:e.body,url:e.url,status:e.status,statusText:e.statusText,headers:this.mapToHttpHeaders(e.headers)})}handle(e){const t=this.getTimeout$(e.timeout),r=this.doFetch(e).pipe((0,F.U)(this.toHttpResponse),(0,F.U)(this.toHttpResult));return(0,k.S)(t,r)}getTimeout$(e){return e?(0,L.H)(e).pipe((0,F.U)((()=>(0,V.Rn)(new f.PL)))):G.C}doFetch(e){return(0,B.U)(e.url,{method:e.method,body:e.serializeBody(),headers:this.getHeaders(e),credentials:e.withCredentials?"include":"omit",mode:e.mode})}mapToHttpHeaders(e){const t=new f.WM;return e.forEach(((e,r)=>t.set(r,e))),t}getHeaders(e){return e.headers.keys().reduce(((t,r)=>({...t,[r]:e.headers.get(r)})),{})}}const q=new Set(["en","fr","es","ja","de","pt","it","ko","zh","nl","sv"]),$="en";function K(e){return e.substr(0,2)}function Q(e){const t=K(e);return q.has(t)}function W(){const e=[navigator.language].concat(navigator.languages).find(Q);return e?e.includes("-")?K(e):e:$}var z=r(930754),Y=r(782324),J=r(781805);const Z=" ";async function X(e,t){try{const{levelOfControl:t}=await(0,z.U)(e);if("controllable_by_this_extension"!==t&&"controlled_by_this_extension"!==t){const r=[`Impossible to change browser setting: ${e}.`,`Extension prevented from changing: ${t}`].join(Z);throw new Error(r)}}catch(t){if((0,Y.b)(t))throw new Error(`Browser setting not supported: ${e}`);if((0,Y.I)(t))throw t.runtimeError;throw t}try{await(0,J.t)(e,t)}catch(e){throw(0,Y.I)(e)?e.runtimeError:e}}async function ee(){const e=["autofillAddressEnabled","autofillCreditCardEnabled","passwordSavingEnabled"].map((e=>X(e,!1)));await Promise.all(e)}var te=r(384318),re=r(516241);const ne={nightly:"icon_nightly_auth",mv2:"icon_auth",mv3:"icon_mv3_auth"},oe="icon_not_auth";async function se({isUserAuthenticated:e}){const t=`icons/action/${e?function(){const e=(0,te.W)();return e.name.includes("Nightly")?ne.nightly:e.name.includes("Beta")||3===e.manifest_version?ne.mv3:ne.mv2}():oe}`,r={16:`${t}.png`,32:`${t}@2x.png`};await(0,re.B)(r)}var ie=r(329),ae=r(598641);function ce(e){return`${"http"+(e.secure?"s":"")}://${e.domain.startsWith(".")?e.domain.substring(1):e.domain}${e.path}`}async function ue(e){const t=await(0,ie.g)({domain:e});return Promise.all(t.map((e=>(0,ae.O)({url:ce(e),name:e.name}))))}var de=r(857323),le=r(690123);const pe=/^_execute(_browser){0,1}_action$/,fe="+";var me;function he(e){return pe.test(e.name??"")}function ye(e){const t=e.toUpperCase();switch(t){case"":case"CTRL":return de.os.isMacOS()?me.Command:me.Ctrl;case"SHIFT":case"":return me.Shift;case"COMMAND":case"":return me.Command;case"MACCTRL":return me.MacCtrl;default:return t}}function ve(e){const t=Object.values(me),r=t.indexOf(e);return-1===r?t.length:r}function be(e,t){return ve(e)-ve(t)}function ge(e){switch(e){case me.Ctrl:case me.MacCtrl:return"Ctrl";case me.Shift:return"";case me.Command:return"";default:return e}}async function _e(){const e=await(0,le.g)(),t=e.find(he)?.shortcut;if(!t)return;const r=function(e){return e.split(e.includes(fe)?fe:"")}(t);return r.map(ye).sort(be).map(ge)}!function(e){e.Command="Command",e.Ctrl="Ctrl",e.MacCtrl="MacCtrl",e.Shift="Shift"}(me||(me={}));var Oe=r(939680),Ce=r(641808);async function Se(e){if((0,Oe.G)())return await(0,Oe.y)(e)>0;const t=await(0,Ce.U)(e),r=void 0===t[e],n=null===t[e];return!r&&!n}var we=r(724715),Pe=r(772733),je=r(457306),Ee=r(731460),Re=r(661222);async function Ae(){const e=await(0,Re.I)({}),t=(0,s.A)("");return e.filter((e=>"string"==typeof e.url&&e.url.startsWith(t))).filter((e=>""!==e.url))}const Me="index.html";function Ie(){return`${(0,s.A)("")}${Me}`}async function Ue({id:e,query:t,route:r}){const n=function({identifier:e,queryInfo:t,name:r}){const n=Ie();if(!r)return n;const o=e?`#${r}/${e}`:`#${r}`,s=t?`?${function(e){return Object.keys(e).map((t=>`${t}=${e[t]}`)).join("&")}(t)}`:"";return encodeURI(`${n}${o}${s}`)}({identifier:e,queryInfo:t,name:r}),o=await Ae();o.length?await async function({path:e,tabs:t}){const r=await(0,Pe.T)(),n=function({existingTabs:e,focusedWindow:t}){const r=e.filter((e=>e.active)),n=r.find((e=>e.windowId===t.id)),o=r.pop(),s=e.pop();return n??o??s}({existingTabs:t,focusedWindow:r});if(!n)return;if(n.windowId!==r.id&&(0,je.V)(n.windowId,{focused:!0}),!n.id)return;const o={active:!0,...e===Ie()?{}:{url:e}};await(0,Ee.V)(n.id,o)}({path:n,tabs:o}):await async function(e){const t={url:e};await(0,we.U)(t)}(n)}var De=r(215904),Ne=r(549259);async function Te(){const e=await Ae();if(!e.length)return;const t=(0,De.a)(),r=e.map((e=>e.id)).filter((e=>"number"==typeof e&&e!==t));await(0,Ne.O)(r)}var xe=r(732012),Fe=r(724966),ke=r(227257),Le=r(385390),Ge=r(915023),Be=r(828489),Ve=r(826603),He=r(56847),qe=r(252477),$e=r(15026);function Ke(e){return JSON.parse(JSON.stringify(e))}class Qe{constructor(e,t){this.stopped$=new Fe.X(!1),this.key=e,this.typeGuard=t??(e=>!0);const r=new ke.y((t=>{this.get().then((e=>{t.next(e)}));const r=r=>{if(e in r){const{newValue:n}=r[e];return t.next(this.asDataWithTimestamp(n))}};return Ve.r.addListener(r),()=>Ve.r.removeListener(r)}));this.state$=(0,Le.a)({state:r,isStopped:this.stopped$}).pipe((0,Ge.o)((({isStopped:e})=>!e),!1),(0,F.U)((({state:e})=>e)))}set(e){return(0,He.t)(Ke({[this.key]:e}))}init(e){return(0,He.t)(Ke({[this.key]:e}))}clear(){return(0,qe.O)(this.key)}stop(){this.stopped$.next(!0)}async get(){const e=(await(0,$e.U)(this.key))[this.key];return this.asDataWithTimestamp(e)}asDataWithTimestamp(e){return e&&"object"==typeof e&&(0,Be.l$)(e,"timestamp")&&"number"==typeof e.timestamp&&e.timestamp&&(0,Be.l$)(e,"data")&&(0,n.isLazyState)(e.data)?e.data.loaded?this.typeGuard(e.data.value)?{timestamp:e.timestamp,data:{loaded:!0,value:e.data.value}}:{timestamp:void 0}:{timestamp:e.timestamp,data:{loaded:!1}}:{timestamp:void 0}}}class We extends n.StoreInfrastructureFactory{createUserScopedInfrastructure(e,t,r,n){return new Qe(`graphene.${e}.${t}.${r}`,n)}createDeviceScopedInfrastructure(e,t,r){return new Qe(`graphene.${e}.${t}`,r)}}function ze(){return(0,xe.G)()?new We:new n.MemoryStoreInfrastructureFactory}var Ye=r(9244),Je=r(945441);class Ze{async getAllKeys(){return Object.keys(await(0,Ce.U)(null))}async get(e){const t=(await(0,Ce.U)([e]))[e];if(t){if("string"!=typeof t)throw new Error(`[ChromeLocalStorage] - cannot read content of ${e} properly. Type is\n        ${typeof t} but should be 'string'`);return t}}async set(e,t){await(0,Ye.t)({[e]:t})}async remove(e){await(0,Je.O)([e])}}class Xe{constructor(e,t,r){this.DB_STORE_NAME=e,this.DB_VERSION=t,this.DB_OBJECT_STORE_NAME=r}getIndexedDB(){return new Promise(((e,t)=>{const r=self.indexedDB;if(!r)return t(new Error("indexedDB is not supported in this environment"));const n=r.open(this.DB_STORE_NAME,this.DB_VERSION);n.onerror=function(){t(n.error)},n.onupgradeneeded=()=>{n.result.objectStoreNames.contains(this.DB_OBJECT_STORE_NAME)||n.result.createObjectStore(this.DB_OBJECT_STORE_NAME)},n.onsuccess=function(){n.onsuccess=null,e(n.result)}}))}async getStore(e="readwrite"){return(await this.getIndexedDB()).transaction([this.DB_OBJECT_STORE_NAME],e).objectStore(this.DB_OBJECT_STORE_NAME)}async readItem(e){const t=await this.getStore("readonly");return new Promise((r=>{const n=t.get(e);n.onsuccess=()=>{n.onsuccess=null,r(n.result)}}))}async getAllKeys(){const e=await this.getStore("readonly");return new Promise((t=>{const r=e.getAllKeys();r.onsuccess=()=>{t(r.result.map((e=>String(e))))}}))}async removeItem(e){const t=await this.getStore("readwrite");return new Promise((r=>{const n=t.delete(e);n.onsuccess=()=>{n.onsuccess=null,r()}}))}async writeItem(e,t){const r=await this.getStore("readwrite");return new Promise((n=>{const o=r.put(t,e);o.onsuccess=()=>{o.onsuccess=null,n()}}))}async itemExists(e){return null!=await this.readItem(e)}}class et{constructor(){this.storageLayer=new Xe("dashlane-ng",1,"module-data")}getAllKeys(){return this.storageLayer.getAllKeys()}async set(e,t){return await this.storageLayer.writeItem(e,t)}remove(e){return this.storageLayer.removeItem(e)}async get(e){return await this.storageLayer.readItem(e)??void 0}}class tt extends n.CronLowLevelSource{constructor(){super(...arguments),this.alarm$=new ke.y((e=>{const t=self.setInterval((()=>{e.next()}),6e4);return()=>{self.clearInterval(t)}}))}}var rt=r(897280),nt=r(531034),ot=r(418477),st=r(665496);const it="cron-source";class at extends n.CronLowLevelSource{constructor(){super(...arguments),this.alarm$=((0,st.G)()?new ke.y((e=>{const t=t=>{t.name===it&&e.next()};return(0,nt.U)(it,{delayInMinutes:1,periodInMinutes:1}),ot.i.addListener(t),()=>{ot.i.removeListener(t)}})):new ke.y((e=>{const t=self.setInterval((()=>{e.next()}),6e4);return()=>{self.clearInterval(t)}}))).pipe((0,rt.d)(1)),this.subscription=this.alarm$.subscribe()}stop(){this.subscription.unsubscribe()}}function ct(){return"undefined"!=typeof chrome&&void 0!==chrome.runtime&&void 0!==chrome.runtime.getManifest&&3===(0,te.W)().manifest_version}var ut=r(69885),dt=r(507074);class lt{constructor(e,t){this.worker=e,this.channelName=t,this.autoConnects=!1,this.status$=(0,ut.of)(n.ChannelState.Connected),this.messages$=new ke.y((t=>{const r=e=>{(0,n.isSendMessageRequest)(e.data)&&!e.origin&&t.next(e.data.message)};return e.addEventListener("message",r),()=>{e.removeEventListener("message",r)}})).pipe((0,dt.B)())}async sendMessage(e){this.worker.postMessage((0,n.sendMessageRequest)({channelName:this.channelName,message:e}))}stop(){return Promise.resolve()}}var pt=r(769183),ft=r(20500);class mt{constructor(e,t){this.source=e,this.filter=t;let r=[];const n=new Set;this.listener=(e,t)=>{if(!this.filter(e,t))return!1;n.size?n.forEach((r=>r.next([e,t]))):r.push([e,t])},this.events$=new ke.y((e=>(n.size||(r.forEach((t=>e.next(t))),r=[]),n.add(e),()=>{n.delete(e)}))),this.source.addListener(this.listener)}stop(){this.source.removeListener(this.listener)}}class ht{constructor(e){this.connectedChannels$=new Fe.X({});const t=new ke.y((t=>{const r={},o=o=>{const s=(0,pt.Z)();if(o.name!==e)return;const i=new mt({addListener:e=>o.onMessage.addListener(e),removeListener:e=>o.onMessage.removeListener(e)},(t=>(0,n.isSendMessageRequest)(t)&&t.channelName===e)),a=new Promise((e=>{const t=()=>{o.onDisconnect.removeListener(t),e(null)};o.onDisconnect.addListener(t)})),c=new Fe.X(n.ChannelState.Connected);a.then((()=>{i.stop(),c.next(n.ChannelState.Disconnected),delete r[s],t.next(r)}));const u={autoConnects:!1,messages$:i.events$.pipe((0,F.U)((([e])=>e.message))),sendMessage:t=>(o.postMessage((0,n.sendMessageRequest)({channelName:e,message:t})),Promise.resolve()),stop:()=>(o.disconnect(),Promise.resolve()),status$:c},d=new n.AcknowledgedChannel(u);r[s]=d,t.next(r)};return ft.b.addListener(o),()=>{ft.b.removeListener(o)}}));this.subscription=t.subscribe((e=>this.connectedChannels$.next(e)))}stop(){this.subscription.unsubscribe()}}var yt=r(536414),vt=r(160399),bt=r(505441);class gt{constructor(e){this.autoConnects=!0,this.status$=new Fe.X(n.ChannelState.Connected),this.port$=new ke.y((t=>{let r;function n(){r?.onDisconnect.removeListener(n);const o=(0,bt.$)({name:e});o.onDisconnect.addListener(n),t.next(o),r=o}return n(),()=>{r?.onDisconnect.removeListener(n),r?.disconnect()}})).pipe((0,rt.d)(1)),this.portSubscription=this.port$.subscribe(),this.messages$=this.port$.pipe((0,yt.z)((t=>new ke.y((r=>{const o=t=>{(0,n.isSendMessageRequest)(t)&&t.channelName===e&&r.next(t.message)};return t.onMessage.addListener(o),()=>{t.onMessage.removeListener(o)}})))))}async sendMessage(e){const t=await(0,vt.z)(this.port$);t.postMessage((0,n.sendMessageRequest)({channelName:t.name,message:e}))}stop(){return this.portSubscription.unsubscribe(),this.status$.next(n.ChannelState.Disconnected),Promise.resolve()}}var _t=r(243978),Ot=r(317350);class Ct{constructor(e){this.autoConnects=!1,this.listener=new ht(e),this.channel$=this.listener.connectedChannels$.pipe((0,F.U)((e=>{const t=Object.values(e);if(t.length)return t[0]})),(0,rt.d)(1)),this.receivedMessages$=this.channel$.pipe((0,_t.w)((e=>e?e.receivedMessages$:Ot.E))),this.channelState$=this.channel$.pipe((0,F.U)((e=>e?n.ChannelState.Connected:n.ChannelState.Disconnected)))}async send(e){const t=await(0,vt.z)(this.channel$);if(!t)throw new Error("Channel is not connected");await t.send(e)}stop(){this.listener.stop()}}},24836:(e,t,r)=>{r.d(t,{iz:()=>s,rq:()=>c,u7:()=>a,k$:()=>p});var n=r(696832);const o=(0,n.createContext)({appClient:null}),s=e=>{const t=n.useCallback((t=>e.client[t.name]),[e.client]),r=n.useMemo((()=>({appClient:{getModuleClient:t}})),[t]);return n.createElement(o.Provider,{value:r},e.children)},i=((0,n.createContext)(void 0),()=>(0,n.useContext)(o)),a=e=>{const{appClient:t}=i();return(0,n.useMemo)((()=>{if(!t)throw new Error("No app client available");const r=t.getModuleClient(e);if(!r)throw new Error(`Module ${e.name} is not available in the context`);return r}),[t,e]).commands};var c,u=r(287279);!function(e){e.Success="success",e.Loading="loading",e.Error="error"}(c||(c={}));const d={status:c.Loading,data:void 0,error:void 0},l=null;function p(...e){const{appClient:t}=i();if(!t)throw new Error("No app client available");const[r,o,s,a]=e,p=(0,n.useMemo)((()=>{const e=t.getModuleClient(r);if(!e)throw new Error(`Module ${r.name} is not available in the context`);return e.queries[o]}),[t,r,o]),[f,m]=(0,n.useState)(d),h=a??[JSON.stringify(s)];return(0,n.useEffect)((()=>{const e=p(s??l).subscribe((e=>{if((0,u.d6)(e)){const t={status:c.Success,data:e.data,error:void 0};m(t)}else{const t={status:c.Error,data:void 0,error:e.error};m(t)}}));return()=>e.unsubscribe()}),[p,...h]),f}r(468224),c.Loading,r(530263)},245059:(e,t,r)=>{r.d(t,{zW:()=>ge,N2:()=>_e,RV:()=>Be,z:()=>p,gO:()=>f,x4:()=>Oe,oo:()=>_,SD:()=>te,jN:()=>we,eN:()=>De,WM:()=>Ae,LE:()=>Ie,aW:()=>Ue,Zn:()=>Le,WE:()=>Te,bL:()=>s,BU:()=>m,F7:()=>Ve,Eu:()=>a,xJ:()=>Se,$k:()=>Ce,PL:()=>He,FO:()=>fe,Jo:()=>ye,gi:()=>ve,yL:()=>be});var n=r(89685),o=r(354066);class s{decode(e){return JSON.parse((0,n.v)(e))}encode(e){return(0,o.u)(JSON.stringify(e))}}const i=e=>e;class a{constructor(){this.encode=i,this.decode=i}}var c=r(707502),u=r(46041);function d(e){const t=e.length,r=[];for(let n=0;n<t;n+=3)r.push(u.U[e[n]>>2]),r.push(u.U[(3&e[n])<<4|e[n+1]>>4]),r.push(u.U[(15&e[n+1])<<2|e[n+2]>>6]),r.push(u.U[63&e[n+2]]);return r.join("")}function l(e,t=u.V){const r=new Uint8Array(e),n=r.length,o=t%3,s=0===o?t:t+(3-o),i=Math.ceil(n/s);let a="",c=-1;for(;c++<i;){const e=c*s,t=c===i-1?n:(c+1)*s,o=d(r.slice(e,t));a=a.concat(o)}return n%3==2?a.substring(0,a.length-1)+"=":n%3==1?a.substring(0,a.length-2)+"==":a}class p{decode(e){return(0,c.R)(e)}encode(e){return l(e)}}const f={algorithm:"aes256",mode:"cbchmac64",ivLength:16},m={algorithm:"aes256",mode:"cbchmac",ivLength:16,padding:16,bytesToKey:0,reuseSalt:!1},h={algorithm:"aes256",mode:"cbc",ivLength:16,saltLength:32,padding:0,bytesToKey:{algorithm:"sha1",iterations:3,keyLength:32}};var y=r(807165);const v=y.z.object({algorithm:y.z.literal("aes256"),mode:y.z.literal("cbchmac"),ivLength:y.z.literal(16)}),b=y.z.object({algorithm:y.z.literal("aes256"),mode:y.z.literal("cbchmac64"),ivLength:y.z.literal(16)}),g=y.z.union([v,b]),_={algorithm:"noderivation"},O={algorithm:"pbkdf2",saltLength:32,iterations:10204,hashAlgorithm:"sha1"},C=y.z.object({algorithm:y.z.literal("argon2d"),saltLength:y.z.literal(16),tCost:y.z.number(),mCost:y.z.number(),parallelism:y.z.number()}),S=y.z.object({algorithm:y.z.literal("pbkdf2"),saltLength:y.z.union([y.z.literal(16),y.z.literal(32)]),iterations:y.z.number(),hashAlgorithm:y.z.enum(["sha1","sha256"])}),w=y.z.object({algorithm:y.z.literal("noderivation")});var P=r(295087);function j({transportableData:e,marker:t,metadata:r}){const n=t.length+r.length;return e.substring(n)}function E({encipheredContents:e,marker:t,metadata:r}){const{derivation:n,cipher:s,type:i,version:a}=t,{iv:c,salt:u,signature:d}=r;return{type:i,version:a,derivationConfig:n,cipherConfig:s,salt:(0,o.u)(u),signature:(0,o.u)(d),iv:(0,o.u)(c),encipheredContents:(0,o.u)(e)}}function R({str:e,substr:t,occurrence:r}){if(r<1)return-1;let n=0,o=-1;for(;n<r;){if(o=e.indexOf(t,o+1),o<0)return o;n++}return o}const A="$",M=1;function I({transportableData:e,makeMarker:t,schema:r}){const n=r.count+1,o=R({str:e,substr:A,occurrence:n}),s=e.substring(1,o).split(A);if(s.length!==r.count)throw new Error("Marker and schema length mismatch");return t({bytes:o+1,markerSchema:r,values:s})}const U=y.z.literal("flexible"),D=y.z.object({version:y.z.literal(1),type:U,length:y.z.number(),derivation:C,cipher:v});function N({bytes:e,markerSchema:t,values:r}){const{version:n,derivation:o,saltLength:s,tCost:i,mCost:a,parallelism:c,cipher:u,mode:d,ivLength:l}=t.index,p=D.safeParse({version:Number(r[n]),type:"flexible",length:e,derivation:{algorithm:r[o],saltLength:Number(r[s]),tCost:Number(r[i]),mCost:Number(r[a]),parallelism:Number(r[c])},cipher:{algorithm:r[u],mode:r[d],ivLength:Number(r[l])}});if(!p.success)throw new Error(p.error.message);return p.data}const T={count:9,index:{version:0,derivation:1,saltLength:2,tCost:3,mCost:4,parallelism:5,cipher:6,mode:7,ivLength:8}},x={count:8,index:{version:0,derivation:1,saltLength:2,iterations:3,hashAlgorithm:4,cipher:5,mode:6,ivLength:7}},F={count:5,index:{version:0,derivation:1,cipher:2,mode:3,ivLength:4}},k=32;function L({transportableData:e,marker:t}){const{length:r,derivation:n,cipher:o}=t,s=n.saltLength,{ivLength:i}=o,a=r+0,c=a+s,u=c+i;return{iv:e.substring(c,c+i),length:s+i+k,salt:e.substring(a,a+s),signature:e.substring(u,u+k)}}const G=y.z.object({version:y.z.literal(1),type:U,length:y.z.number(),derivation:w,cipher:g});function B({bytes:e,markerSchema:t,values:r}){const{version:n,cipher:o,mode:s,ivLength:i}=t.index,a=G.safeParse({version:Number(r[n]),type:"flexible",length:e,derivation:{algorithm:"noderivation"},cipher:{algorithm:r[o],mode:r[s],ivLength:Number(r[i])}});if(!a.success)throw new Error(a.error.message);return a.data}const V=y.z.object({version:y.z.literal(1),type:U,length:y.z.number(),derivation:S,cipher:v});function H({bytes:e,markerSchema:t,values:r}){const{version:n,derivation:o,saltLength:s,iterations:i,hashAlgorithm:a,cipher:c,mode:u,ivLength:d}=t.index,l=V.safeParse({version:Number(r[n]),type:"flexible",length:e,derivation:{algorithm:r[o],saltLength:Number(r[s]),iterations:Number(r[i]),hashAlgorithm:r[a]},cipher:{algorithm:r[c],mode:r[u],ivLength:Number(r[d])}});if(!l.success)throw new Error(l.error.message);return l.data}function q({transportableData:e,index:t}){const r=t+1,n=R({str:e,substr:A,occurrence:r}),o=R({str:e,substr:A,occurrence:r+1});if(-1===n||-1===o)throw new Error("Marker info indices not found");return e.substring(n+1,o)}const $=0,K=1;function Q(e){switch(e){case"argon2d":return e=>{const t=I({transportableData:e,makeMarker:N,schema:T}),r=L({transportableData:e,marker:t});return E({encipheredContents:j({transportableData:e,marker:t,metadata:r}),marker:t,metadata:r})};case"pbkdf2":return e=>{const t=I({transportableData:e,makeMarker:H,schema:x}),r=L({transportableData:e,marker:t});return E({encipheredContents:j({transportableData:e,marker:t,metadata:r}),marker:t,metadata:r})};case"noderivation":return e=>{const t=I({transportableData:e,makeMarker:B,schema:F}),r=function({transportableData:e,marker:t}){const{length:r,cipher:n}=t,{ivLength:o}=n,s=r+0,i=s+o;return{iv:e.substring(s,s+o),length:o+k,signature:e.substring(i,i+k)}}({transportableData:e,marker:t});return function({encipheredContents:e,marker:t,metadata:r}){const{derivation:n,cipher:s,type:i,version:a}=t,{iv:c,signature:u}=r;return{type:i,version:a,derivationConfig:n,cipherConfig:s,signature:(0,o.u)(u),iv:(0,o.u)(c),encipheredContents:(0,o.u)(e)}}({encipheredContents:j({transportableData:e,marker:t,metadata:r}),marker:t,metadata:r})};default:(0,P.U)(e)}}function W(...e){const t=e.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(t);return e.reduce(((e,t)=>(r.set(new Uint8Array(t),e),e+t.byteLength)),0),r.buffer}function z(e){const t=A+e.join(A)+A;return(0,o.u)(t)}const Y="KWC5",J=16,Z=32,X=0,ee={type:"KWC5",derivation:_,cipher:m};class te{constructor(){this.derivateKeyCache=new Map}getCacheKey(...e){return l(e.reduce(((e,t)=>W(e,t)),new ArrayBuffer(0)))}getCachedDerivation(e){return this.derivateKeyCache.get(e)}setCachedDerivation({cacheKey:e,data:t}){this.getCachedDerivation(e)||this.derivateKeyCache.set(e,t)}}const re="flexible",ne="KWC3",oe=0,se=32,ie=4;function ae(e){const t=function(e){const t=e.slice(se,se+ie),r=(0,n.v)(t);if([ne,Y].includes(r))return r}(e);return t||(function(e){const t=new Uint8Array(e).slice(0,1);return(0,n.v)(t.buffer)===A}(e)?re:void 0)}const ce="SHA-512";async function ue(e,t){const r=await t(e,ce),n=new Uint8Array(r),o=r.byteLength/2,s=n.slice(0,o),i=n.slice(o,r.byteLength);return{encryptionKey:s.buffer,signatureKey:i.buffer}}function de(e){const t=new Uint8Array(e),r=e.byteLength/2,n=t.slice(0,r),o=t.slice(r);return Promise.resolve({encryptionKey:n.buffer,signatureKey:o.buffer})}async function le(e,t,r,n,s){const i=(0,o.u)(Object.values(r).join("")),a=t.getCacheKey(n,s,i),c=t.getCachedDerivation(a);if(c)return c;const u=function(e){switch(e){case"sha1":return"SHA-1";case"sha256":return"SHA-256";case"sha384":return"SHA-384";case"sha512":return"SHA-512";default:(0,P.U)(e)}}(r.hashAlgorithm),d=await e(n,s,{iterations:r.iterations,hashType:u});return t.setCachedDerivation({cacheKey:a,data:d}),d}function pe(e,t,r,n,s,i){return"pbkdf2"===s.algorithm?le(r,i,s,e,t):async function(e,t,r,n,s){const{tCost:i,mCost:a,parallelism:c}=r,u=(0,o.u)(Object.values(r).join("")),d=t.getCacheKey(n,s,u),l=t.getCachedDerivation(d);if(l)return l;const p={tCost:i,mCost:a,parallelism:c},f=await e(n,s,p);return t.setCachedDerivation({cacheKey:d,data:f}),f}(n,i,s,e,t)}async function fe(e,t,r,o){const s=function(e){const t=(0,n.v)(e),r=q({transportableData:t,index:$});if(Number(r)!==M)throw new Error("Marker version not supported");const o=q({transportableData:t,index:K});if(s=o,!["argon2d","pbkdf2","noderivation"].some((e=>e===s)))throw new Error("Derivation algorithm not supported");var s;return Q(o)(t)}(o),{deriveKeyArgon2d:i,deriveKeyPbkdf2:a}=t,{derivationConfig:c,salt:u}=s,{algorithm:d}=c,l="pbkdf2"===d||"argon2d"===d;if(l&&!u)throw new Error("Need salt for derivation");const p=l&&u?await pe(e,u,a,i,c,r):e,{mode:f}=s.cipherConfig,{computeHash:m}=t,{encryptionKey:h,signatureKey:y}="cbchmac64"===f?await de(p):await ue(p,m),{iv:v,encipheredContents:b}=s,g=W(v,b),{verifyHmacSha:_}=t,{signature:O}=s;if(!await _(y,O,g))throw new Error("Signature cannot be verified");const{decryptAes256:C}=t;return C(h,v,b)}const me={type:ne,derivation:O,cipher:h};function he(e){const t=function({transportableData:e,marker:t}){const{derivation:r,type:n}=t,{saltLength:o}=r,s=oe+o+n.length;return{salt:e.slice(oe,oe+o),encipheredContents:e.slice(s)}}({transportableData:e,marker:me});return{salt:t.salt,type:ne,encipheredContents:t.encipheredContents,derivationConfig:O,cipherConfig:h}}async function ye(e,t,r,n){const o=ae(n);if(!o)throw new Error("Cannot find marker type");switch(o){case ne:return await async function(e,t,r,n){const o=he(n),{deriveKeyPbkdf2:s}=t,{derivationConfig:i,salt:a}=o,c=await le(s,r,i,e,a),{computeHash:u}=t,{cipherConfig:{ivLength:d,bytesToKey:{iterations:l,keyLength:p}}}=o,f=await async function(e,t,r,n,o,s){const i=W(t,s.slice(0,8));let a=i,c=new ArrayBuffer(0);for(let t=0;t<r;t++){const t=await e(a,"SHA-1");c=W(c,t),a=W(t,i)}const u=o+n;return Promise.resolve(c.slice(o,u))}(u,c,l,d,p,a),{decryptAes256:m}=t,{encipheredContents:h}=o;return m(c,f,h)}(e,t,r,n);case Y:return await async function(e,t,r){const n=function(e){const t=function({transportableData:e,marker:t}){const{cipher:r,type:n}=t,{ivLength:o}=r,s=X+o+J+n.length,i=s+Z;return{iv:e.slice(X,X+o),signature:e.slice(s,s+Z),encipheredContents:e.slice(i)}}({transportableData:e,marker:ee});return{iv:t.iv,type:Y,signature:t.signature,encipheredContents:t.encipheredContents,derivationConfig:_,cipherConfig:m}}(r),{computeHash:o}=t,{encryptionKey:s,signatureKey:i}=await ue(e,o),{iv:a,encipheredContents:c}=n,u=W(a,c),{verifyHmacSha:d}=t,{signature:l}=n;if(!await d(i,l,u))throw new Error("Signature cannot be verified");const{decryptAes256:p}=t;return p(s,a,c)}(e,t,n);case re:return fe(e,t,r,n);default:(0,P.U)(o)}}async function ve(e,t,r,n,o,s,i){const{algorithm:a}=r,c="pbkdf2"===a||"argon2d"===a;if(c&&!i?.salt)throw new Error("Need salt for derivation");const{deriveKeyArgon2d:u,deriveKeyPbkdf2:d}=t,l=c&&i?.salt?await pe(e,i.salt,d,u,r,n):e,{mode:p}=o,{computeHash:f}=t,{encryptionKey:m,signatureKey:h}="cbchmac64"===p?await de(l):await ue(l,f),{getRandomValues:y}=t,v=y(o.ivLength),{encryptAes256:b}=t,g=await b(m,v,s),{signHmacSha:_}=t,O=W(v,g),C=await _(h,O);return function(e){const{encipheredContents:t,cipherConfig:r,derivationConfig:n,salt:o,signature:s,iv:i}=e,a=function({cipher:e,derivation:t}){const{algorithm:r}=t;switch(r){case"argon2d":return function({cipher:e,derivation:t}){const{count:r,index:n}=T,o=new Array(r);return o[n.version]=M,o[n.derivation]=t.algorithm,o[n.saltLength]=t.saltLength,o[n.tCost]=t.tCost,o[n.mCost]=t.mCost,o[n.parallelism]=t.parallelism,o[n.cipher]=e.algorithm,o[n.mode]=e.mode,o[n.ivLength]=e.ivLength,z(o)}({cipher:e,derivation:t});case"pbkdf2":return function({cipher:e,derivation:t}){const{count:r,index:n}=x,o=new Array(r);return o[n.version]=M,o[n.derivation]=t.algorithm,o[n.saltLength]=t.saltLength,o[n.iterations]=t.iterations,o[n.hashAlgorithm]=t.hashAlgorithm,o[n.cipher]=e.algorithm,o[n.mode]=e.mode,o[n.ivLength]=e.ivLength,z(o)}({cipher:e,derivation:t});case"noderivation":return function({cipher:e,derivation:t}){const{count:r,index:n}=F,o=new Array(r);return o[n.version]=M,o[n.derivation]=t.algorithm,o[n.cipher]=e.algorithm,o[n.mode]=e.mode,o[n.ivLength]=e.ivLength,z(o)}({cipher:e,derivation:t});default:(0,P.U)(r)}}({cipher:r,derivation:n});return o&&"noderivation"!==n.algorithm?W(a,o,i,s,t):W(a,i,s,t)}({type:"flexible",version:1,derivationConfig:r,cipherConfig:o,salt:i?.salt,iv:v,signature:C,encipheredContents:g})}async function be(e,t,r,n,s,i){const{computeHash:a}=t,{encryptionKey:c,signatureKey:u}=await ue(e,a),{getRandomValues:d}=t,{ivLength:l}=n,p=d(l),{encryptAes256:f}=t,m=await f(c,p,s),{signHmacSha:h}=t,y=W(p,m),v={type:"KWC5",derivationConfig:r,cipherConfig:n,iv:p,signature:await h(u,y),encipheredContents:m},{padding:b}=i;return function({secureData:e,randomValues:t}){if(t.byteLength!==J)throw new Error("Encoding kwc5 requires 16 random bytes");const{encipheredContents:r,iv:n,type:s,signature:i}=e;return W(n,t,(0,o.u)(s),i,r)}({secureData:v,randomValues:b})}const ge="AES-CBC",_e=256,Oe="SHA-256",Ce="RSA-OAEP",Se="RSASSA-PKCS1-v1_5";class we{}var Pe=r(69885),je=r(734987),Ee=r(948844);class Re{constructor(e){this.chain=null,this.backend=e}handle(e){return this.backend.handle(e)}}class Ae{constructor(e){this.headers=new Map,this.normalizedNames=new Map,"string"==typeof e?this.initFromString(e):e&&this.initFromObject(e)}has(e){return this.headers.has(e.toLowerCase())}get(e){const t=this.headers.get(e.toLowerCase());return t?.[0]??null}keys(){return Array.from(this.normalizedNames.values())}getAll(e){return this.headers.get(e.toLowerCase())??null}append(e,t){return this.clone({name:e,value:t,op:0})}set(e,t){return this.clone({name:e,value:t,op:1})}delete(e,t){return this.clone({name:e,value:t,op:2})}deleteMultiple(e){return this.clone({names:e,op:3})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}clone(e){const t=new Ae;return t.initFromOther(this),t.applyUpdate(e),t}applyUpdate(e){switch(e.op){case 0:case 1:{const t=e.name.toLowerCase();let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const n=(0===e.op?this.headers.get(t):void 0)??[];n.push(...r),this.headers.set(t,n)}break;case 2:{const t=e.name.toLowerCase(),r=e.value;if(r){let e=this.headers.get(t);if(!e)return;const n=Array.isArray(r)?r:[r];e=e.filter((e=>!n.includes(e))),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}break;case 3:e.names.forEach((e=>{const t=e.toLowerCase();this.headers.delete(t),this.normalizedNames.delete(t)}))}}initFromOther(e){Array.from(e.headers.keys()).forEach((t=>{this.headers.set(t,[...e.headers.get(t)]),this.normalizedNames.set(t,e.normalizedNames.get(t))}))}initFromObject(e){Object.keys(e).forEach((t=>{let r=e[t];const n=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(n,r),this.maybeSetNormalizedName(t,n))}))}initFromString(e){e.split("\n").forEach((e=>{const t=e.indexOf(":");if(t>0){const r=e.slice(0,t),n=r.toLowerCase(),o=e.slice(t+1).trim();this.maybeSetNormalizedName(r,n),this.headers.has(n)?this.headers.get(n).push(o):this.headers.set(n,[o])}}))}}class Me{encodeKey(e){return this.standardEncoding(e)}encodeValue(e){return this.standardEncoding(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}standardEncoding(e){return encodeURIComponent(e).replace(Me.STANDARD_ENCODING_REGEX,((e,t)=>Me.STANDARD_ENCODING_REPLACEMENTS[t]??e))}}Me.STANDARD_ENCODING_REGEX=/%(\d[a-f0-9])/gi,Me.STANDARD_ENCODING_REPLACEMENTS={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};class Ie{constructor(e={},t={}){this.map=new Map,this.encoder=t.encoder??new Me,"string"==typeof e?this.initFromString(e):this.initFromObject(e)}has(e){return this.map.has(e)}get(e){const t=this.map.get(e);return t?.[0]??null}getAll(e){return this.map.get(e)??null}keys(){return Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:0})}appendAll(e){const t=[];return Object.keys(e).forEach((r=>{const n=e[r];Array.isArray(n)?n.forEach((e=>{t.push({param:r,value:e,op:0})})):t.push({param:r,value:n,op:0})})),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:1})}delete(e,t){return this.clone({param:e,value:t,op:2})}toString(){return this.keys().map((e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map((e=>t+"="+this.encoder.encodeValue(e))).join("&")})).filter((e=>""!==e)).join("&")}clone(e){const t=new Ie({},{encoder:this.encoder});return t.initFromOther(this),t.applyUpdates(Array.isArray(e)?e:[e]),t}initFromOther(e){e.keys().forEach((t=>this.map.set(t,[...e.map.get(t)])))}initFromObject(e){Object.keys(e).forEach((t=>{const r=e[t],n=Ie.isValueArray(r)?r.map(Ie.valueToString):[Ie.valueToString(r)];this.map.set(t,n)}))}initFromString(e){const{encoder:t}=this;e.length>0&&e.replace(/^\?/,"").split("&").forEach((e=>{const r=e.indexOf("="),[n,o]=-1===r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],s=this.map.get(n)??[];s.push(o),this.map.set(n,s)}))}applyUpdates(e){e.forEach((e=>{switch(e.op){case 0:case 1:{const t=(0===e.op?this.map.get(e.param):void 0)??[];t.push(Ie.valueToString(e.value)),this.map.set(e.param,t);break}case 2:if(void 0===e.value){this.map.delete(e.param);break}{const t=this.map.get(e.param)??[],r=t.indexOf(Ie.valueToString(e.value));-1!==r&&t.splice(r,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}))}static valueToString(e){return`${e}`}static isValueArray(e){return Array.isArray(e)}}class Ue{constructor(e,t,r,n){this.body=null,this.headers=new Ae,this.withCredentials=!1,this.timeout=void 0,this.responseType="json",this.params=new Ie({}),this.url=t,this.method=e,Ue.mightHaveBody(this.method)&&(this.body=r??null),n&&(this.withCredentials=Boolean(n.withCredentials),n.responseType&&(this.responseType=n.responseType),n.headers&&(this.headers=this.getHeadersFromOptions(n.headers)),n.params&&(this.params=this.getParamsFromOptions(n.params)),n.timeout&&n.timeout>0&&(this.timeout=n.timeout),n.mode&&(this.mode=n.mode)),this.urlWithParams=this.initUrlWithParams()}serializeBody(){return null===this.body?null:Ue.isArrayBuffer(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ie?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ue.isArrayBuffer(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ie?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method??this.method,r=e.url??this.url,n=e.responseType??this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,i=void 0!==e.timeout?e.timeout:this.timeout,a=e.mode??this.mode;let c=e.headers?this.getHeadersFromOptions(e.headers):this.headers,u=e.params?this.getParamsFromOptions(e.params):this.params;const d=e.setHeaders;d&&(c=Object.keys(d).reduce(((e,t)=>e.set(t,d[t])),c));const l=e.setParams;return l&&(u=Object.keys(l).reduce(((e,t)=>e.set(t,l[t])),u)),new Ue(t,r,o,{params:u,headers:c,responseType:n,withCredentials:s,timeout:i,mode:a})}getHeadersFromOptions(e){return e instanceof Ae?e:new Ae(e)}getParamsFromOptions(e){return e instanceof Ie?e:new Ie(e)}initUrlWithParams(){const e=this.params.toString();if(0===e.length)return this.url;const t=this.url.indexOf("?"),r=-1===t?"?":t<this.url.length-1?"&":"";return this.url+r+e}static mightHaveBody(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":return!1;default:return!0}}static isArrayBuffer(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}}class De{constructor(e){this.handler=new Re(e)}request(...e){return this.makeRequest(...e)}delete(e,t){return this.makeRequest("DELETE",e,t)}get(e,t){return this.makeRequest("GET",e,t)}head(e,t){return this.makeRequest("HEAD",e,t)}options(e,t){return this.makeRequest("OPTIONS",e,t)}patch(e,t,r){return this.makeRequest("PATCH",e,{body:t,...r})}post(e,t,r){return this.makeRequest("POST",e,{body:t,...r})}put(e,t,r){return this.makeRequest("PUT",e,{body:t,...r})}makeRequest(...e){let t,r,n;if(1===e.length)t=e[0],r="response";else{const[o,s,i]=e;t=new Ue(o,s,void 0!==i.body?i.body:null,{headers:i.headers,params:i.params,responseType:i.responseType??"json",withCredentials:i.withCredentials}),r=i.observe??"body","json"===i.responseType&&"body"===i.observe&&(n=i.responseBodyDecoder)}const o=(0,Pe.of)(this.addContentTypeRequestHeader(t)).pipe((0,je.b)((e=>this.handler.handle(e))));switch(r){case"body":switch(t.responseType){case"arraybuffer":return o.pipe((0,Ee.Gx)((e=>e.arrayBuffer())));case"text":return o.pipe((0,Ee.Gx)((e=>e.text())));case"json":return o.pipe((0,Ee.Gx)((e=>e.json(n))));default:(0,P.U)(t.responseType)}break;case"response":return o;default:(0,P.U)(r)}}addContentTypeRequestHeader(e){if(!e.headers.has("content-type")){const t=e.detectContentTypeHeader();if(t)return e.clone({headers:e.headers.set("content-type",t)})}return e}}class Ne{constructor(e){this.values=e}matches(e){return!(this.values?.method&&this.values.method!==e.method||void 0!==this.values?.url&&this.values.url!==e.url||void 0!==this.values?.body&&JSON.stringify(this.values.body)!==JSON.stringify(e.body)||void 0!==this.values?.headers&&!Object.keys(this.values.headers).reduce(((t,r)=>{const n=this.values.headers[r],o=Array.isArray(n)?n:[n],s=e.headers.getAll(r).every((e=>o.includes(e)));return t&&s}),!0)||void 0!==this.values?.params||void 0!==this.values?.responseType&&this.values.responseType!==e.responseType||void 0!==this.values?.withCredentials&&this.values.withCredentials!==e.withCredentials||void 0!==this.values?.timeout&&this.values.timeout!==e.timeout||void 0!==this.values?.mode&&this.values.mode!==e.mode)}}"undefined"!=typeof expect&&expect.extend({toMatchHttpRequest(e,t){const r=new Ne(t).matches(e);return{message:()=>r?"Passed":"Failed",pass:r}}});var Te,xe=r(100225);async function Fe(e){const t=e.getReader();let r=new Uint8Array(0),n=await t.read();for(;!n.done;){const e=new Uint8Array(r.byteLength+n.value.byteLength);e.set(r,0),e.set(n.value,r.byteLength),r=e,n=await t.read()}return r}!function(e){e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired"}(Te||(Te={}));class ke{constructor(e){this.bytesRead=0,this.data=e}pull(e){const{bytesRead:t,data:r}=this;if(t>=r.byteLength)return void e.close();const n=Math.min(r.byteLength-t,e.desiredSize??1/0);if(n>0){const o=new Uint8Array(r,t,n);e.enqueue(o),this.bytesRead+=n}t>=r.byteLength&&e.close()}}class Le{constructor(e={},t=Te.Ok,r="OK"){this.headers=e.headers??new Ae,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText??r,this.url=e.url??null,this.ok=this.status>=200&&this.status<300,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Le({body:void 0!==e.body?e.body:null===this.body?null:this.body instanceof xe.Pz?this.body.tee()[0]:this.body,headers:e.headers??this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText??this.statusText,url:e.url??this.url??void 0})}async arrayBuffer(){if(null===this.body)throw new Error("Empty response body");if("object"==typeof this.body&&"ReadableStream"===this.body.constructor.name)return(await Fe(this.body)).buffer;if(!(this.body instanceof ArrayBuffer))throw new Error("Unexpected body type, not an ArrayBuffer");return this.body}async text(){if(null===this.body)throw new Error("Empty response body");if("object"==typeof this.body&&"ReadableStream"===this.body.constructor.name){const e=await Fe(this.body);return(0,n.b)(e)}if("string"!=typeof this.body)throw new Error("Unexpected body type, not a string");return this.body}async json(e){if(null===this.body)throw new Error("Empty response body");if("object"==typeof this.body&&"ReadableStream"===this.body.constructor.name){const t=await Fe(this.body),r=(0,n.b)(t);try{const t=JSON.parse(r);return e.decode(t)}catch(e){throw new Error("Failed to parse response body JSON")}}if(this.body instanceof ArrayBuffer||"string"==typeof this.body)throw new Error("Unexpected body type");return e.decode(this.body)}bodyStream(){if(null===this.body)throw new Error("Empty response body");if("object"==typeof this.body&&"ReadableStream"===this.body.constructor.name)return this.body;if("string"==typeof this.body)return new xe.Pz(new ke((0,o.u)(this.body)));if(this.body instanceof ArrayBuffer)return new xe.Pz(new ke(this.body));const e=JSON.stringify(this.body);return new xe.Pz(new ke((0,o.u)(e)))}}var Ge=r(996168);class Be extends((0,Ge.Hu)("BadStatus","The HTTP response has a non-successful status code (not 2XX)")){constructor(e){super(),this.response=e}}class Ve extends((0,Ge.Hu)("NetworkError","The HTTP request request failed due to a network error")){}class He extends((0,Ge.Hu)("TimedOut","The HTTP request timed out")){}},996168:(e,t,r)=>{r.d(t,{As:()=>o,BU:()=>s,Hu:()=>n});const n=(e,t)=>class extends Error{constructor(){super(t),this.tag=e}};function o(e,t){return t.includes(e.tag)}const s=e=>e.tag},758807:(e,t,r)=>{r.r(t),r.d(t,{FunctionalError:()=>n.Hu,assertUnreachable:()=>s.U,concatMapFailure:()=>c.Tc,concatMapSuccess:()=>c.Gx,concatMatchResult:()=>c.RW,createMatchable:()=>i.H6,failure:()=>a.Rn,getBrander:()=>u.zq,getFailure:()=>a.Yv,getSuccess:()=>a.db,hasProperty:()=>u.l$,isFailure:()=>a.hx,isFunctionalErrorOfType:()=>n.As,isMatchable:()=>i.cw,isResult:()=>a.AZ,isSuccess:()=>a.d6,mapFailure:()=>a.SN,mapFailureObservable:()=>c.DZ,mapResultObservable:()=>c.vg,mapSuccess:()=>a.ty,mapSuccessObservable:()=>c.Qn,mapSuccessResultObservable:()=>c.lk,match:()=>i.EQ,matchResultObservable:()=>c.nb,panic:()=>o,safeCast:()=>u.Ay,success:()=>a.Vp,switchMapFailure:()=>c.pr,switchMapSuccess:()=>c.CP,switchMatchResult:()=>c.bM,toFunctionalErrorCode:()=>n.BU});var n=r(996168);function o(e){if(e instanceof Error)throw e;if("string"==typeof e)throw new Error(e);throw new Error(e.tag)}var s=r(295087),i=r(18533),a=r(287279),c=r(948844),u=r(828489)},295087:(e,t,r)=>{function n(e,t){throw new Error(t??`Unreachable code detected (${e})`)}r.d(t,{U:()=>n})},18533:(e,t,r)=>{r.d(t,{EQ:()=>s,H6:()=>o,cw:()=>i});var n=r(828489);const o=(e,t)=>({tag:e,...t}),s=(e,t)=>{const r=e.tag,n=r in t?t[r]:null;if(!n)throw new Error("Unmatchable case");return n(e)},i=(e,...t)=>!("object"!=typeof e||!e)&&((0,n.l$)(e,"tag")&&t.includes(e.tag))},948844:(e,t,r)=>{r.d(t,{CP:()=>y,DZ:()=>d,Gx:()=>f,Qn:()=>u,RW:()=>h,Tc:()=>m,bM:()=>b,lk:()=>p,nb:()=>c,pr:()=>v,vg:()=>l});var n=r(87065),o=r(734987),s=r(243978),i=r(287279),a=r(18533);function c(e){return t=>t.pipe((0,n.U)((t=>(0,a.EQ)(t,{success:({data:t})=>e.success(t),failure:({error:t})=>e.failure(t)}))))}function u(e){return t=>t.pipe((0,n.U)((t=>(0,i.hx)(t)?t:(0,i.Vp)(e(t.data)))))}function d(e){return t=>t.pipe((0,n.U)((t=>(0,i.d6)(t)?t:(0,i.Rn)(e(t.error)))))}function l(e,t){return r=>r.pipe((0,n.U)((r=>(0,i.hx)(r)?t?t(r.error):r:e(r.data))))}function p(e){return t=>t.pipe((0,n.U)((t=>(0,i.hx)(t)?t:e(t.data))))}function f(e){return t=>t.pipe((0,o.b)((async t=>(0,i.hx)(t)?t:(0,i.Vp)(await e(t.data)))))}function m(e){return t=>t.pipe((0,o.b)((async t=>(0,i.d6)(t)?t:(0,i.Rn)(await e(t.error)))))}function h(e){return t=>t.pipe((0,o.b)((t=>(0,i.f2)(t,e))))}function y(e){return t=>t.pipe((0,s.w)((async t=>(0,i.hx)(t)?t:(0,i.Vp)(await e(t.data)))))}function v(e){return t=>t.pipe((0,s.w)((async t=>(0,i.d6)(t)?t:(0,i.Rn)(await e(t.error)))))}function b(e){return t=>t.pipe((0,s.w)((t=>(0,i.f2)(t,e))))}},287279:(e,t,r)=>{r.d(t,{Rn:()=>a,Yv:()=>f,db:()=>p,hx:()=>d,AZ:()=>l,d6:()=>u,SN:()=>h,ty:()=>m,f2:()=>c,Vp:()=>i});var n=r(18533);const o="success",s="failure",i=e=>(0,n.H6)("success",{data:e}),a=e=>(0,n.H6)("failure",{error:e}),c=(e,t)=>(0,n.EQ)(e,{success:({data:e})=>t.success(e),failure:({error:e})=>t.failure(e)}),u=e=>e.tag===o,d=e=>e.tag===s,l=e=>(0,n.cw)(e,o,s),p=e=>e.data,f=e=>e.error,m=(e,t)=>d(e)?e:i(t(e.data)),h=(e,t)=>u(e)?e:a(t(e.error))},828489:(e,t,r)=>{r.d(t,{Ay:()=>o,l$:()=>s,zq:()=>n});const n=e=>t=>Object.assign(t,{brand:e}),o=e=>e;function s(e,t){return t in e}}}]);