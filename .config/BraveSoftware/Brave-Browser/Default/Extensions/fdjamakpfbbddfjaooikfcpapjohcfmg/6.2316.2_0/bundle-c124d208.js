"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[233],{841248:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},680687:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.authorizationMiddleware=void 0,t.authorizationMiddleware=e=>async t=>{const r=await t,{config:{allowedPlatforms:n},services:{storeService:o}}=r,{platformName:a}=o.getPlatformInfo();if(n&&!n.includes(a))throw new Error("You are not allowed to connect to this slot");return await e(t)}},718324:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.debugMiddleware=void 0,r(504939),new Map,t.debugMiddleware=e=>async t=>e(t)},977686:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.debugMiddleware=t.authorizationMiddleware=void 0;var n=r(680687);Object.defineProperty(t,"authorizationMiddleware",{enumerable:!0,get:function(){return n.authorizationMiddleware}});var o=r(718324);Object.defineProperty(t,"debugMiddleware",{enumerable:!0,get:function(){return o.debugMiddleware}})},857307:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommandQueryBus=void 0;const n=r(518948),o=r(903343),a=r(235992),i=r(17338),s=r(725566),c=r(977686);class d{constructor(e){this.services=(0,i.getCoreServices)(e)}register(e){const{commands:t,queries:r,liveQueries:n}=e;Object.keys(t).forEach((e=>{this._registerCommand(e,t[e])})),Object.keys(r).forEach((e=>{this._registerQuery(e,r[e])})),Object.keys(n).forEach((e=>{this._registerLiveQuery(e,n[e])}))}_registerCommand(e,t){const r=r=>Promise.resolve({messageType:"command",messageName:e,requestId:(0,a.v4)(),services:this.services,arg:r,config:t,logTags:[d.API_LOG_TAG,d.COMMAND_LOG_TAG]}),n=[c.authorizationMiddleware,c.debugMiddleware,()=>e=>e.then((async e=>{const{arg:t,config:r,services:n}=e,{handler:o}=r,a=await o(n,t);return{...e,result:a}}))];this.registerCommand(e,(async e=>(0,s.buildMiddlewarePipeline)(...n)(r(e)).then((e=>e.result))))}_registerQuery(e,t){const r=r=>Promise.resolve({messageType:"query",messageName:e,requestId:(0,a.v4)(),services:this.services,arg:r,config:t,logTags:[d.API_LOG_TAG,d.QUERY_LOG_TAG]}),n=[c.authorizationMiddleware,c.debugMiddleware,()=>e=>e.then((async e=>{const{arg:r,services:n}=e,{selector:o,staticDataHandler:a,selectorFactory:i}=t;if(o){const{storeService:t}=n,a=o(t.getState(),r);return{...e,result:a}}if(i){const{storeService:t}=n,o=t.getState(),a=(await i(o,this.services))(t.getState(),r);return{...e,result:a}}{const t=a(r);return{...e,result:t}}}))];this.registerQuery(e,(async e=>(0,s.buildMiddlewarePipeline)(...n)(r(e)).then((e=>e.result))))}_registerLiveQuery(e,t){this.registerLiveQuery(e,(e=>{const{operator:r,subject:a,operatorFactory:i}=t;if(r){const{storeService:t}=this.services;return t.getState$().pipe(r(e),(0,o.skip)(1))}if(i){const{storeService:t}=this.services,r=t.getState$();return(0,n.from)(i(t.getState(),this.services)).pipe((0,n.switchMap)((t=>r.pipe(t(e),(0,o.skip)(1)))))}return a(e)}))}}t.CommandQueryBus=d,d.API_LOG_TAG="API",d.COMMAND_LOG_TAG="Command",d.QUERY_LOG_TAG="Query"},888626:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(991069),t),o(r(857307),t)},991069:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},233968:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventStore=void 0;const n=r(518948),o=r(235992),a=r(903343),i=r(17825),s=r(247746);t.EventStore=class{constructor(){this._operation$=new n.Subject,this.subs=new Set,this.add=async(e,t)=>{const r=(0,o.v4)(),n=new Promise(((e,t)=>{const n=this._operationResults$.subscribe((o=>{o.id===r&&(!0===o.success?e(r):t(o.error),n.unsubscribe(),this.subs.delete(n))}));this.subs.add(n)}));return this.triggerAdd(e,r,t),n},this.remove=async(e,t)=>{const r=new Promise(((e,r)=>{const n=this._operationResults$.subscribe((o=>{o.id===t&&(!0===o.success?e():r(o.error),n.unsubscribe(),this.subs.delete(n))}));this.subs.add(n)}));return this.triggerRemove(e,t),r},this.removeAll=async e=>{const t=(0,o.v4)(),r=new Promise(((e,r)=>{const n=this._operationResults$.subscribe((o=>{o.id===t&&(!0===o.success?e():r(o.error),n.unsubscribe(),this.subs.delete(n))}));this.subs.add(n)}));return this.triggerRemoveAll(e,t),r},this.onAdd=async e=>{const{id:t,event:r,topic:n,type:o}=e,a={id:t,topic:n,type:o};try{const e=await this.retrieve(),o={id:t,event:r},i={...e,[n]:[...e[n]||[],o]};return await this.store(i),{...a,success:!0,event:r}}catch(e){return{...a,success:!1,error:e}}},this.onRemove=async e=>{const{id:t,topic:r,type:n}=e,o={id:t,topic:r,type:n};try{const e=await this.retrieve(),n={...e,[r]:(e[r]||[]).filter((e=>e.id!==t))};return await this.store(n),{...o,success:!0}}catch(e){return{...o,success:!1,error:e}}},this.onRemoveAll=async e=>{const{id:t,topic:r,type:n}=e,o={id:t,topic:r,type:n};try{const e={...await this.retrieve(),[r]:[]};return await this.store(e),{...o,success:!0}}catch(e){return{...o,success:!1,error:e}}},this.onOperation=async e=>{switch(e.type){case s.OperationType.Add:return this.onAdd(e);case s.OperationType.Remove:return this.onRemove(e);case s.OperationType.RemoveAll:return this.onRemoveAll(e);default:return(0,i.assertUnreachable)(e)}},this.setupOperationsHandling=()=>{const e=this._operation$.pipe((0,a.concatMap)(this.onOperation),(0,a.share)()),t=e.subscribe();this.subs.add(t),this._operationResults$=e},this.setupOperationsHandling()}newItems$(e){return this._operationResults$.pipe((0,a.filter)((e=>e.type===s.OperationType.Add&&e.success)),(0,a.filter)((t=>t.topic===e)))}async getItems(e){return(await this.retrieve())[e]}teardown(){this.subs.forEach((e=>e.unsubscribe()))}async triggerAdd(e,t,r){const n={event:r,id:t,topic:e,type:s.OperationType.Add};this._operation$.next(n)}async triggerRemove(e,t){const r={id:t,topic:e,type:s.OperationType.Remove};this._operation$.next(r)}async triggerRemoveAll(e,t){const r={id:t,topic:e,type:s.OperationType.RemoveAll};this._operation$.next(r)}}},247746:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OperationType=void 0,function(e){e.Add="add",e.Remove="remove",e.RemoveAll="removeAll"}(t.OperationType||(t.OperationType={}))},30137:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(888626),t)},725566:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildMiddlewarePipeline=void 0;var n=r(703201);Object.defineProperty(t,"buildMiddlewarePipeline",{enumerable:!0,get:function(){return n.buildMiddlewarePipeline}})},703201:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildMiddlewarePipeline=void 0,t.buildMiddlewarePipeline=(...e)=>t=>e.reduceRight(((e,t)=>t(e)),(e=>e))(t)},236768:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(684511),o=r(980993),a=r(190021),i=r(155721),s=r(978987),c=r(423944),d=r(122652),u=r(595326);t.config={commands:{shareItem:{handler:u.shareItem}},queries:{getAllSharedItemIds:{selector:o.sortedSharedItemIdsSelector},getGroupRecipients:{selector:n.groupRecipientsSelector},getHasNotifications:{selector:n.hasNotificationsSelector},getIsShared:{selector:n.isSharedSelector},getItemItemGroup:{selector:n.itemItemGroupSelector},getMyAcceptedUserGroups:{selector:n.myAcceptedUserGroupsSelector},getMyAcceptedItemGroupUserMembers:{selector:n.myAcceptedItemGroupUserMembersSelector},getPendingItemGroups:{selector:n.pendingItemGroupsSelector},getPendingUserGroups:{selector:n.pendingUserGroupsSelector},getRecipientsCount:{selector:n.recipientsCountSelector},getUserRecipients:{selector:n.userRecipientsSelector},getSharingCapacity:{selector:a.sharingCapacitySelector},isAllowedToShare:{selector:i.isAllowedToShareSelector},...c.config.queries,...d.config.queries},liveQueries:{liveAllSharedItemIds:{operator:s.allSharedItemIds$},liveGroupRecipients:{operator:s.groupRecipients$},liveHasNotifications:{operator:s.hasNotifications$},liveIsShared:{operator:s.isShared$},liveMyAcceptedItemGroupUserMembers:{operator:s.myAcceptedItemGroupUserMembers$},liveMyAcceptedUserGroups:{operator:s.myAcceptedUserGroups$},livePendingItemGroups:{operator:s.pendingItemGroups$},livePendingUserGroups:{operator:s.pendingUserGroups$},liveRecipientsCount:{operator:s.recipientsCount$},liveUserRecipients:{operator:s.userRecipients$},liveSharingCapacity:{operator:s.sharingCapacity$},...c.config.liveQueries,...d.config.liveQueries}}},371661:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},736884:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemGroupService=t.UPDATE_ITEM_GROUP_MEMBERS=t.SHARING_VERSION=t.REVOKE_ITEM_GROUP_MEMBERS=t.REFUSE_ITEM_GROUP=t.INVITE_ITEM_GROUP_MEMBERS=t.DELETE_ITEM_GROUP=t.CREATE_SPECIAL_ITEM_GROUP=t.CREATE_ITEM_GROUP=t.ACCEPT_ITEM_GROUP=void 0;const n=r(278320),o=r(836467),a=r(882366),i=r(736513),s=r(658107),c=r(493513);function d(e,t,r){const n=r&&r.users&&r.users.find((e=>e.userId===t.login)),o=n&&n.groupKey;return e.asymmetricEncryption.decrypt(t.privateKey,o)}function u(e,r,n,o,a,i){return{...i?{userGroupId:i}:{},...o&&o.length?{itemsForEmailing:o}:{},acceptSignature:e,groupId:r,revision:n,sharingVersion:t.SHARING_VERSION,type:t.ACCEPT_ITEM_GROUP,auditLogDetails:a}}function l(e,r,n,o,a){const i=a?{userGroupId:a}:{};return{...n&&n.length?{itemsForEmailing:n}:{},...i,groupId:e,revision:r,sharingVersion:t.SHARING_VERSION,type:t.REFUSE_ITEM_GROUP,auditLogDetails:o}}function m(e,r,n,o,a,i){return{...n&&n.length?{groups:n}:{},...a&&a.length?{itemsForEmailing:a}:{},groupId:e,items:o,sharingVersion:t.SHARING_VERSION,type:t.CREATE_ITEM_GROUP,users:r,auditLogDetails:i}}function p(e,r,n,o,a,i){return{...o&&o.length?{groups:o}:{},...n&&n.length?{users:n}:{},...a&&a.length?{itemsForEmailing:a}:{},revision:r,groupId:e,sharingVersion:t.SHARING_VERSION,type:t.INVITE_ITEM_GROUP_MEMBERS,auditLogDetails:i}}function S(e,r,n,o,a,i="manual"){return{...o&&o.length?{groups:o}:{},...n&&n.length?{users:n}:{},groupId:e,revision:r,sharingVersion:t.SHARING_VERSION,type:t.REVOKE_ITEM_GROUP_MEMBERS,auditLogDetails:a,origin:i}}function g(e,r,n,o){return{...o&&o.length?{groups:o}:{},...n&&n.length?{users:n}:{},groupId:e,revision:r,sharingVersion:t.SHARING_VERSION,type:t.UPDATE_ITEM_GROUP_MEMBERS}}async function A(e,t,r){const n=r?await async function(e,t,r){const n=await(0,i.makeCryptoService)(),o=c.encode(e),s=await n.symmetricEncryption.signHmacSHA256(t,o);return await(0,a.validateProposeSignature)("[ItemGroupService] - makeUserUpdatePublicKey",n,t,s,o),{groupKey:await n.asymmetricEncryption.encrypt(r,t),proposeSignature:s}}(e,r.rawItemGroupKey,r.userPublicKey):{};return{...n,permission:t,userId:e}}function I(e,t){return{permission:t,groupId:e}}async function y(e,t,r,n,o){const s=await(0,i.makeCryptoService)(),d=t&&t.login&&t.publicKey,u=d?t.login:e,l=d?{}:{proposeSignatureUsingAlias:!0},m=d?{groupKey:await s.asymmetricEncryption.encrypt(t.publicKey,o)}:{},p=c.encode(u),S=await s.symmetricEncryption.signHmacSHA256(o,p);return await(0,a.validateProposeSignature)("[ItemGroupService] - makeUserUpload",s,o,S,p),{...t.privateKey?{acceptSignature:await f(r,o,t.privateKey)}:{},...l,...m,alias:e,permission:n,proposeSignature:S,userId:u}}async function E(e,t,r,n,o,d){const{groupId:u}=e,l=await(0,i.makeCryptoService)();if(!(e.users||[]).find((e=>e.userId===o)))throw new Error("[ItemGroupService] - makeUserGroupInvite: Trying to share an item to a userGroup that I'm not part of.");const m=await(0,s.getUserGroupPrivateKey)(e,n,o),p=await l.asymmetricEncryption.encrypt(e.publicKey,r),S=c.encode(u),g=await l.symmetricEncryption.signHmacSHA256(r,S);return await(0,a.validateProposeSignature)("[ItemGroupService] - makeUserGroupInvite",l,r,g,S),{groupId:u,permission:t,groupKey:p,proposeSignature:g,acceptSignature:await f(d,r,m)}}async function f(e,t,r){const n=await(0,i.makeCryptoService)(),o=c.encode(`${e}-accepted-${t}`);return await n.asymmetricEncryption.sign(r,o)}t.ACCEPT_ITEM_GROUP="acceptItemGroup",t.CREATE_ITEM_GROUP="createItemGroup",t.CREATE_SPECIAL_ITEM_GROUP="createUserGroupsItemGroup",t.DELETE_ITEM_GROUP="deleteItemGroup",t.INVITE_ITEM_GROUP_MEMBERS="inviteItemGroupMembers",t.REFUSE_ITEM_GROUP="refuseItemGroup",t.REVOKE_ITEM_GROUP_MEMBERS="revokeItemGroupMembers",t.SHARING_VERSION=4,t.UPDATE_ITEM_GROUP_MEMBERS="updateItemGroupMembers",t.makeItemGroupService=function(e,r){return{makeCreateSpecialItemGroupEvent:(e,i,s)=>async function(e,r,i,s){const c=(0,n.generateItemUuid)(),[u,l]=await Promise.all([e.symmetricEncryption.generateNewAESKey(),d(e,r,i)]),m=await e.symmetricEncryption.decryptAES256(l,i.privateKey),[p,S,g]=await Promise.all([e.asymmetricEncryption.encrypt(i.publicKey,u),(0,a.generateProposeSignature)(e,u,i.groupId),(0,a.generateAcceptSignature)(e,m,c,u)]),A={type:t.CREATE_SPECIAL_ITEM_GROUP,sharingVersion:t.SHARING_VERSION,groupId:c,teamId:i.teamId,alias:r.login,groups:[{groupId:i.groupId,permission:"admin",groupKey:p,proposeSignature:S,acceptSignature:g}]};return s.length&&(A.items=await(0,o.createItemsForUserGroups)(e,u,s)),A}(r,e,i,s),makeCreateItemGroupEvent:m,makeInviteItemGroupMembers:p,makeUpdateItemGroupMembers:g,makeUserUpdate:A,makeUserGroupUpdate:I,makeUserUpload:y,makeUserGroupInvite:E,createSpecialItemGroup:({login:t,uki:r},n)=>e.itemGroup.createSpecialItemGroup(t,r,n),makeDeleteItemGroupEvent:(e,r)=>async function(e,r){return{type:t.DELETE_ITEM_GROUP,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r}}(e,r),deleteItemGroup:({login:t,uki:r},n)=>function(e,t,r,n){return e.itemGroup.deleteGroup(t,r,n).then((({itemGroups:e})=>e)).catch((o=>{if("Conflict"===o.message)return function(e,t,r,n){const o={type:"getSharing",sharingVersion:4,userGroupIds:n};return e.sharing.get(t,r,o).then((({itemGroupErrors:e,itemGroups:t})=>{if(e&&e.length)throw new Error(e[0].message);return t}))}(e,t,r,[n.groupId]).then((o=>{const[{revision:a,teamId:i}]=o;return i?e.itemGroup.deleteGroup(t,r,{...n,revision:a}).then((({itemGroups:e})=>e)):o}));throw o}))}(e,t,r,n),makeAcceptItemGroupEvent:u,makeRefuseItemGroupEvent:l,makeRevokeItemGroupMembers:S}}},310294:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemService=t.SHARING_VERSION=t.UPDATE_ITEM=t.ADD_ITEMS=t.REMOVE_ITEMS=void 0;const n=r(453576),o=r(736513);async function a(e,t,r){return{itemId:e,itemKey:t,content:r}}function i(e){const t=(0,n.isCredential)(e)?"password":"note";return{type:t,name:e.Title||`Untitled ${t}`}}async function s(e,r,n){return{type:t.ADD_ITEMS,sharingVersion:t.SHARING_VERSION,revision:r,groupId:e,items:n}}async function c(e,r,n){if(!n)throw new Error("Missing payload. See method documentation.");const{item:a,itemId:i,itemContent:s}=n;if(!(a||i&&s))throw new Error("insufficient arguments: item or (itemId and content) must be provided.");if(a&&(i||s))throw new Error("item and (itemId | content) cannot both be provided");const c=(0,o.makeSymmetricEncryption)(),d=s??await c.encryptSharingItem(r,a);return{type:t.UPDATE_ITEM,sharingVersion:t.SHARING_VERSION,itemId:i??a?.Id,content:d,timestamp:e}}t.REMOVE_ITEMS="removeItems",t.ADD_ITEMS="addItems",t.UPDATE_ITEM="updateItem",t.SHARING_VERSION=4;const d=(e,t,r,n)=>e.itemGroup.updateItem(t,r,n);function u(e,t,r,n){return e.itemGroup.addItems(t,r,n)}const l=(e,r,n)=>Promise.resolve({type:t.REMOVE_ITEMS,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r,items:[...n]}),m=(e,t,r,n)=>e.itemGroup.removeItems(t,r,n);t.makeItemService=function(){return{makeItemUpload:a,makeAddItemsEvent:s,makeItemForEmailing:i,addItems:u,makeUpdateItemEvent:c,updateItem:d,makeRemoveItemsEvent:l,removeItems:m}}},658107:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingUsersFromItemGroups=t.doesItemGroupExistInSpace=t.findUserGroupItemGroups=t.findUserGroup=t.findMyAcceptedUserGroups=t.findMyAcceptedItemGroupUserMembers=t.getRecipientsCount=t.getUserRecipients=t.getGroupRecipients=t.doesUserReceiveItemGroupViaGroup=t.isUserLastAdmin=t.getDecipheredItemKey=t.isItemWithoutItemGroup=t.isItemGroupAccepted=t.getItemGroupPendingUserMember=t.decryptItemKey=t.getSharingUserPermission=t.getUserGroupPermission=t.getMyItemGroups=t.findItem=t.isUserGroupUserProposeSignatureValid=t.areUserGroupUsersProposeSignaturesValid=t.getDecryptedUserGroupKey=t.isUserGroupPersonalSignatureValid=t.isGroupSignatureValid=t.decryptUserGroupPrivateKey=t.getUserGroupPrivateKey=t.decryptGroupKey=t.getDecryptedItemGroupKeyFromUserGroupMember=t.getDecryptedItemGroupKeyFromUser=t.getItemGroupKey=t.findMyItemGroupUserGroupMember=t.findMyItemGroupUser=t.getItemGroupActiveUserGroupMembers=t.isLastActiveUserInItemGroupAndAdmin=t.userMemberIsAdmin=void 0;const n=r(401067),o=r(882366),a=r(736513),i=r(749551),s=r(719736),c=r(381438),d=r(471646),u=r(670252),l=r(416593),m=r(395458),p=r(493513),S=e=>["accepted","pending"].includes(e.status);function g(e,t){const{users:r}=e;return(r||[]).find((e=>e.userId===t))}function A(e,t,r){const n=(t||[]).filter((e=>(e.users||[]).map((e=>e.userId)).includes(r))).map((e=>e.groupId));return(e.groups||[]).filter((e=>"accepted"===e.status)).find((e=>n.includes(e.groupId)))}async function I(e,t){try{return await E(e.groupKey,t)}catch{return null}}async function y(e,t,r,n){const o=(t||[]).find((t=>t.groupId===e.groupId));if(!o)return null;try{const t=await f(o,r,n);return await E(e.groupKey,t)}catch{return null}}async function E(e,t){return(0,a.makeCryptoService)().asymmetricEncryption.decrypt(t,e)}async function f(e,t,r){const n=e.users.find((e=>e.userId===r)).groupKey,o=await E(n,t);return C(e.privateKey,o)}async function C(e,t){return(0,a.makeCryptoService)().symmetricEncryption.decryptAES256(t,e)}async function v(e,t,r,n){const i=p.encode(`${e}-accepted-${r}`);return(0,o.isAcceptSignatureValid)((0,a.makeCryptoService)(),t,n,i)}async function h(e,t){try{return await(0,a.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,p.encode(e.userId))}catch{return!1}}async function N(e,t){return(0,a.makeCryptoService)().symmetricEncryption.decryptAES256(t,e)}function T(e,t){const{itemGroups:r}=e,n=r.find((e=>(e.items||[]).some((e=>e.itemId===t))));return n?(n.groups||[]).filter((e=>!["revoked","refused"].includes(e.status))):[]}function G(e,t){const{itemGroups:r}=e,n=r.find((e=>(e.items||[]).some((e=>e.itemId===t))));return n?(n.users||[]).filter((e=>!["revoked","refused"].includes(e.status))):[]}function B(e,t,r){const n=t.items?.some((n=>{const o=(0,s.credentialSelector)(e,n.itemId)??(0,c.noteSelector)(e,n.itemId);return void 0===o?(function(e,t,r,n){try{const o=["[doesItemGroupExistInSpace] Undefined item found",`ItemGroup has ${e.items.length} items`];if(e.items.length>1){const a=e.items.filter((e=>e.itemId!==t.itemId)),i=a.reduce(((e,t)=>{const o=(0,s.credentialSelector)(r,t.itemId)??(0,c.noteSelector)(r,t.itemId);return o&&o.SpaceId===n?e+1:e}),0),d=a.length-i;o.push(`${i} other items in itemGroup are in the active space`),o.push(`${d} other items in itemGroup are not in the active space`)}(0,l.activeSpacesSelector)(r).some((e=>e&&e.teamId===n&&(0,m.isPremiumStatusSpaceQuarantined)(e)))&&o.push("Active space is quarantined"),null===t.itemKey&&o.push("Item Key is null"),void 0===t.itemKey&&o.push("Item Key is undefined"),""===t.itemKey&&o.push("Item Key is an empty string"),null===t.itemId&&o.push("Item ID is null"),void 0===t.itemId&&o.push("Item ID is undefined"),""===t.itemId&&o.push("Item ID is an empty string"),(0,u.sendExceptionLog)({error:new Error(o.join("\n"))})}catch(e){(0,u.sendExceptionLog)({error:e})}}(t,n,e,r),!0):o.SpaceId!==r}));return!n}t.userMemberIsAdmin=e=>"admin"===e.permission,t.isLastActiveUserInItemGroupAndAdmin=function(e,r){const{users:n,groups:o}=e,a=!o||0===o.filter(S).length,i=n&&1===n.filter(S).length&&n[0].userId===r&&(0,t.userMemberIsAdmin)(n[0]);return a&&i},t.getItemGroupActiveUserGroupMembers=function(e){return(e.groups||[]).filter(S)},t.findMyItemGroupUser=g,t.findMyItemGroupUserGroupMember=A,t.getItemGroupKey=async function(e,t,r,n){const o=g(e,n),a=A(e,t,n);return o||a?o?await I(o,r):await y(a,t,r,n):null},t.getDecryptedItemGroupKeyFromUser=I,t.getDecryptedItemGroupKeyFromUserGroupMember=y,t.decryptGroupKey=E,t.getUserGroupPrivateKey=f,t.decryptUserGroupPrivateKey=C,t.isGroupSignatureValid=v,t.isUserGroupPersonalSignatureValid=async function(e,t,r,n){try{return await v(e,t,r,n)}catch{return!1}},t.getDecryptedUserGroupKey=async function(e,t){try{return await E(e,t)}catch{return null}},t.areUserGroupUsersProposeSignaturesValid=async function(e,t){const r=(e||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>h(e,t)));return(await Promise.all(r)).every(Boolean)},t.isUserGroupUserProposeSignatureValid=h,t.findItem=function(e,t){const{credentials:r,notes:n}=e.getPersonalData(),o=[...r,...n];return(0,i.findDataModelObject)(t,o)},t.getMyItemGroups=function(e,t){const r=e.userGroups.filter((e=>e.users.some((e=>e.userId===t&&"accepted"===e.status)))),n=new Set(r.map((e=>e.groupId)));return e.itemGroups.filter((e=>{const r=e.users&&e.users.some((e=>e.userId===t)),o=e.groups&&e.groups.some((e=>n.has(e.groupId)));return r||o}))},t.getUserGroupPermission=function(e,t){return(e.groups||[]).find((e=>e.groupId===t))?.permission},t.getSharingUserPermission=function(e,t){return(e.users||[]).find((e=>e.userId===t))?.permission},t.decryptItemKey=N,t.getItemGroupPendingUserMember=function(e,t){return(e.users||[]).find((e=>e.userId===t&&"pending"===e.status))},t.isItemGroupAccepted=function(e,t,r){return!!function(e,t){return(e.users||[]).some((e=>e.userId===t&&"accepted"===e.status&&Boolean(e.acceptSignature)))}(e,r)||function(e,t,r){const n=(e.groups||[]).filter((e=>"accepted"===e.status&&e.acceptSignature)).map((e=>e.groupId)),o=t.filter((e=>n.includes(e.groupId)));return o.some((e=>(e.users||[]).some((e=>e.userId===r&&"accepted"===e.status&&Boolean(e.acceptSignature)))))}(e,t,r)},t.isItemWithoutItemGroup=function(e,t){return!(0,d.findItemItemGroup)(e,t)},t.getDecipheredItemKey=async function(e,t,r){const n=await E(e,r);try{return await N(t,n)}catch(e){return}},t.isUserLastAdmin=function(e,t){const r=function(e){return(e.users||[]).filter((({permission:e,rsaStatus:t,status:r})=>"admin"===e&&"sharingKeys"===t&&"accepted"===r))}(e),n=function(e){return(e.groups||[]).filter((({permission:e,status:t})=>"admin"===e&&"accepted"===t))}(e),o=r.some((e=>e.userId===t)),a=r.filter((({userId:e})=>t!==e)),i=n.length+a.length>0;return o&&!i},t.doesUserReceiveItemGroupViaGroup=function(e,t,r){const n=t.filter((({users:e})=>(e||[]).some((e=>e.userId===r&&"accepted"===e.status)))).map((({groupId:e})=>e));return(e.groups||[]).some((({groupId:e,status:t})=>n.includes(e)&&"accepted"===t))},t.getGroupRecipients=T,t.getUserRecipients=G,t.getRecipientsCount=function(e,t){return G(e,t).length+T(e,t).length},t.findMyAcceptedItemGroupUserMembers=function(e,t){const r=e.map((e=>e.users||[])),o=(0,n.unnest)(r);return(0,n.uniqBy)((e=>e.userId),o).filter((e=>e.alias!==t))},t.findMyAcceptedUserGroups=function(e,t){return e.filter((e=>"users"===e.type&&(e.users||[]).some((e=>e.userId===t&&"accepted"===e.status))))},t.findUserGroup=function(e,t){return e.find((e=>e.groupId===t))},t.findUserGroupItemGroups=function(e,t){return t.filter((t=>(t.groups||[]).some((t=>t.groupId===e&&"accepted"===t.status))))},t.doesItemGroupExistInSpace=B,t.getSharingUsersFromItemGroups=(e,t,r,n)=>{const o=r.reduce(((r,o)=>null===n||B(e,o,n)?((0,d.getItemGroupActiveUsers)(o).forEach((e=>{if(e.userId!==t)if(r.has(e.userId)){const t=r.get(e.userId);r.set(e.userId,{...e,itemCount:t.itemCount+o.items.length})}else r.set(e.userId,{...e,itemCount:o.items.length})})),r):r),new Map);return Array.from(o.values())}},478096:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.prepareOperations=t.revokeRemoteControlledSharedItems=void 0;const n=r(401067),o=r(110203),a=r(17825),i=r(670252),s=r(290622),c=r(416593),d=r(311700),u=r(657989),l=r(368979),m=r(57779),p=r(684511),S=r(352102),g=r(658107),A=r(471646),I=r(795623),y=(0,I.withTag)(["Sharing","RemoteControl"]),E=y(I.logError),f=y(I.logInfo),C=y(I.logVerbose),v=e=>t=>t._tag===e,h=e=>{const t=e.filter(v("revoke_all_itemgroup_members")).length,r=e.filter(v("refuse_pending_itemgroup")).length,n=e.filter(v("revoke_my_itemgroup_membership")).length;return{operationsCount:{all:e.length,revokeAllItemGroupMembers:t,refusePendingItemGroup:r,revokeMyItemGroupMembership:n}}};function N(e,t,r,n,o,a){const i=function(e,t,r){return r.reduce(((r,n)=>{const o=(0,g.findMyItemGroupUser)(n,t);if(!o)return r;const a=function(e,t,r){return(0,g.isUserLastAdmin)(r,t.userId)?function(e,t,r){const{groupId:n,revision:o}=r,a=(0,A.getItemGroupActiveUsers)(r).filter((e=>e.userId!==t.userId)).map((e=>e.userId)),i=(0,g.getItemGroupActiveUserGroupMembers)(r).map((e=>e.groupId)),s=e.makeRevokeItemGroupMembers(n,o,a,i,null),c=[...a.map((e=>({type:"user",alias:e}))),...i.map((e=>({type:"userGroup",groupId:e})))];return{_tag:"revoke_all_itemgroup_members",action:s,recipients:c}}(e,t,r):function(e,t,r){const{groupId:n,revision:o}=r,a=e.makeRefuseItemGroupEvent(n,o,null,null),i={type:"user",alias:t.alias},s=(0,g.userMemberIsAdmin)(t)?r.items.map((e=>e.itemId)):[];return{_tag:"revoke_my_itemgroup_membership",action:a,recipient:i,itemsToDuplicate:s}}(e,t,r)}(e,o,n);return r.concat(a)}),[])}(e,n,o.map((e=>(0,A.findItemItemGroup)(e,r))).filter(Boolean)),s=function(e,t){return t.filter((t=>t.items.some((t=>{if(!(0,d.isItemForceCategorizable)(t))return!1;const r=e.map((e=>e.details)),n=(0,d.pickBestTeamSpaceForForcedCategorization)(r,t,[]);return Boolean(n)&&n.domainsMatchResult===l.TeamDomainsMatchResult.SomeFieldsMatch}))))}(t,a),c=function(e,t,r,n){return n.reduce(((n,{itemGroupId:o})=>{const a=t.find((e=>e.groupId===o));if(!a)return n;const i=(0,g.findMyItemGroupUser)(a,r);if(!i)return n;const s=function(e,t,r){const{groupId:n,revision:o}=r;return{_tag:"refuse_pending_itemgroup",action:e.makeRefuseItemGroupEvent(n,o,null,null),recipient:{type:"user",alias:t.alias}}}(e,i,a);return n.concat(s)}),[])}(e,r,n,s);return[...i,...c]}async function T(e,t,r,n){const{action:o,recipient:a}=n,{itemGroups:i}=await e.itemGroup.refuseItemGroup(t,r,o);return i&&1===i.length&&i[0]?[{actionType:"refuseItemGroup",itemGroup:i[0],recipient:a}]:[]}t.revokeRemoteControlledSharedItems=async function(e,t,r,d,l){f({message:"Starting remote control process"});try{const{hiddenItemIds:g}=l,A=t.getState(),I=(0,c.userLoginSelector)(A),y=(0,u.spacesWithForcedCategorizationEnabledSelector)(A),{itemGroups:E}=(0,S.sharingDataSelector)(A),v=N(d,y,E,I,g,(0,p.pendingItemGroupsSelector)(A));C({message:"Remote control operations computed",details:h(v)}),await async function(e,t,r,o){const c=e.getState(),d=(0,s.ukiSelector)(c),u=o.map((n=>async function(e,t,r,n,o){try{switch(o._tag){case"refuse_pending_itemgroup":return await T(t,r,n,o);case"revoke_my_itemgroup_membership":{await T(t,r,n,o);const{itemsToDuplicate:a}=o;for(const t of a)await(0,m.duplicateNoteOrCredential)(e,t);break}case"revoke_all_itemgroup_members":return await async function(e,t,r,n){const{action:o,recipients:a}=n,{itemGroups:i}=await e.itemGroup.revokeItemGroupMembers(t,r,o);return(i&&1===i.length?i[0]:null)?a.map((e=>({actionType:"revokeItemGroupMembers",itemGroup:i[0],recipient:e}))):[]}(t,r,n,o);default:(0,a.assertUnreachable)(o)}}catch(e){const t=new Error(`[SharingRemoteControl] - sendRequestForOperation: ${e}`);(0,i.sendExceptionLog)({error:t})}}(e,t,r,d,n)));(0,n.unnest)(await Promise.all(u))}(t,r,I,v),async function(e,{deletedItemIds:t,updatedItemIds:r},n){const a=t.length>0||r.length>0,i=n.length>0;(a||i)&&e.getInstance().user.requestNewSync(o.Trigger.ChangeTeam)}(e,l,v),f({message:"Remote control process done"})}catch(e){const t=new Error(`[SharingRemoteControl] - revokeRemoteControlledSharedItems: ${e}`);(0,i.sendExceptionLog)({error:t}),E({message:"Remote control process failed",details:{error:`${e}`}})}},t.prepareOperations=N},184163:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSingleUserItemGroup=t.resendPublicKeyInvite=t.updateSharingData=t.getPendingItemGroup=t.createOrUpdateItemEffect=t.deleteItemEffect=void 0;const n=r(401067),o=r(453576),a=r(736513),i=r(448313),s=r(795623),c=r(176496),d=r(645291),u=r(228096),l=r(334433),m=r(736884),p=r(663698),S=r(889016),g=r(670252),A=r(488542),I=r(772079),y=r(57779),E=r(176496),f=r(250141),C=r(658107),v=r(749551),h=r(239373),N=r(656915),T=r(412362),G=r(986691),B=r(673566),O=r(656915),P=r(885225),R=r(882366);function U(e,t,r){const o=(0,n.pick)(e,r);return(0,n.mergeRight)(t,o)}t.deleteItemEffect=async function(e,t){let r=null;const n=(0,T.getInstance)(),o=(0,G.getInstance)();try{const{itemToDelete:a}=(0,c.findPersonalDataItemToDelete)(e,t);if(!a)return!0;r=o.lockTopic("healthUpdates");const i={credentialIds:[a.Id],type:"credentialUpdates"};await n.add("healthUpdates",i);const s=(0,d.removePersonalItem)(a.kwType,a.Id,null);return e.dispatch(s),o.releaseTopic("healthUpdates",r),!0}catch(e){return s.default.log(`[SharingSync]: deleteItemEffect: ${e}`),r&&o.releaseTopic("healthUpdates",r),!1}},t.createOrUpdateItemEffect=async function(e,t,r){let n=null,c=null;const d=(0,T.getInstance)(),u=(0,G.getInstance)();try{const s=await(0,a.makeCryptoService)().symmetricEncryption.decryptSharingItem(r,t.content),{Id:l}=s,m=e.getPersonalData(),p=(0,O.platformInfoSelector)(e.getState());if((0,o.isCredential)(s)){n=u.lockTopic("healthUpdates"),c=u.lockTopic("iconsUpdates");const t=l?(0,v.findDataModelObject)(l,m.credentials||[]):null,r=t?U(A.sharedFields,t,s):s,a={credentialIds:[r.Id],type:"credentialUpdates"};await d.add("healthUpdates",a);const S={credentialIds:[r.Id],type:"credentialUpdates"};await d.add("iconsUpdates",S);const g=(0,B.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:m,change:(0,P.makeUpdateChange)(r),userLogin:e.getUserLogin(),platformInfo:p}),I=(0,i.savePersonalDataItem)(r,o.DataModelType.KWAuthentifiant,g);e.dispatch(I),u.releaseTopic("iconsUpdates",c),u.releaseTopic("healthUpdates",n)}else if((0,o.isNote)(s)){const t=l?(0,v.findDataModelObject)(l,m.notes||[]):null,r=t?U(I.sharedFields,t,s):s,n=(0,i.savePersonalDataItem)(r,o.DataModelType.KWSecureNote);e.dispatch(n)}return!0}catch(e){return s.default.log(`[SharingSync] - createOrUpdateItemEffect: ${e}`),n&&u.releaseTopic("healthUpdates",n),c&&u.releaseTopic("iconsUpdates",c),!1}},t.getPendingItemGroup=async function(e,t,r,n,i,s){let c;if(e.content){const r=(0,a.makeCryptoService)().symmetricEncryption;c=await r.decryptSharingItem(t,e.content)}else c=s[e.itemId];const d=(0,o.isCredential)(c),u=(0,o.isNote)(c);if(!d&&!u)throw new Error("item is neither credential nor note");let l=c;return d&&(l=(0,h.fixCredentialWithMissingTitle)(c)),{itemGroupId:r,items:[l],permission:i,referrer:n,seen:!1}},t.updateSharingData=function(e,t){const r=(0,l.sharingDataUpdated)(t);e.dispatch(r),(0,u.reportDataUpdate)(e)},t.resendPublicKeyInvite=async function(e,t,r){const n="[SharingEffectsService] - resendPublicKeyInvite";try{const o=e.getUserLogin(),i=(0,N.ukiSelector)(e.getState()),{groupId:s,revision:c}=r,{privateKey:d}=e.getUserSession().keyPair,u=(0,a.makeCryptoService)(),l=(0,S.makeWSService)(),{findUsersByAliases:A}=(0,f.makeWSUserAlias)(),{makeUserUpdate:I,makeUpdateItemGroupMembers:y}=(0,m.makeItemGroupService)(l,u),{updateItemGroupMembers:E}=(0,p.makeItemGroupWS)(),C=JSON.stringify([t.userId]),v=(await A({login:o,uki:i,aliases:C}))[t.userId];if(!v){const e=`${n}: couldn't find the user by alias, aborting.`;return void(0,g.sendExceptionLog)({message:e})}const h=(r.users||[]).find((e=>e.userId===o));if(!h){const e=`${n}: couldn't find myself in "itemGroup.users", aborting.`;return void(0,g.sendExceptionLog)({message:e})}const T=await u.asymmetricEncryption.decrypt(d,h.groupKey),{publicKey:G}=v,{permission:B,userId:O}=t,P=await I(O,B,{rawItemGroupKey:T,userPublicKey:G}),U=y(s,c,[P],null),_=await E(o,i,U);if(_&&_.itemGroups&&1===_.itemGroups.length){const{userGroups:t}=e.getSharingData();await(0,R.validateItemGroupResponse)("[SharingSyncJobsService] - resendPublicKeyInvite",u,_,G,d,T,o,[P],t,!0)}}catch(e){const t=new Error(`${n}: ${e}`);(0,g.sendExceptionLog)({error:t})}},t.deleteSingleUserItemGroup=async function({storeService:e,wsService:t,eventLoggerService:r},n){const{login:o}=e.getAccountInfo(),i=(0,N.ukiSelector)(e.getState()),{keyPair:{privateKey:s}}=e.getUserSession(),{groupId:c,revision:d}=n,u="[SharingEffectsService] - deleteSingleUserItemGroup",l=(0,a.makeCryptoService)(),{deleteItemGroup:p,makeDeleteItemGroupEvent:S}=(0,m.makeItemGroupService)(t,l);if(!(0,C.isLastActiveUserInItemGroupAndAdmin)(n,o))throw new Error(`${u}: I'm not alone in the group, aborting.`);if(!n.items||0===n.items.length)return!0;const A=(n.items||[]).map((({itemId:e})=>e)),I={};for(const t of A){const r=await(0,y.duplicateNoteOrCredential)(e,t);I[t]=r}try{const n={login:o,uki:i,privateKey:s},a=await S(c,d);return await p(n,a),Object.keys(I).filter((e=>I[e])).forEach((n=>{(0,E.deletePersonalDataItem)({storeService:e,wsService:t,eventLoggerService:r},n,{ignoreSharing:!0})})),!0}catch(n){const o=new Error(`${u}: ${n}`);return(0,g.sendExceptionLog)({error:o}),Object.keys(I).map((e=>I[e])).filter(Boolean).forEach((n=>(0,E.deletePersonalDataItem)({storeService:e,wsService:t,eventLoggerService:r},n))),!1}}},378118:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySharing2Summary=t.getEmptySharingData=t.getEmptyGetSharingParams=t.getEmptyOperations=t.initSharingSyncFromStorage=t.putSharingSyncBackInStorage=t.updateSharingDataFromSync=t.applyOperationsToSharingData=t.runOperationsEffects=t.setMissingItemKeys=t.revokeUsersFromInvalidItemGroups=t.shouldRunAutoRevoke=t.asyncFilterItemGroups=t.filterOutInvalidOperations=t.getSharing=t.setGetSharingParams=t.tagConfirmableOperations=t.setOperations=t.sanitizeData=t.OperationType=t.syncSharing=void 0;const n=r(401067),o=r(453576),a=r(110203),i=r(684827),s=r(947683),c=r(658107),d=r(471646),u=r(184163),l=r(795623),m=r(670252),p=r(17825),S=r(658107),g=r(656915),A=r(732663),I=r(503735),y=r(288205),E=r(990503),f=!1;function C(e,t){return f?(...r)=>(console.time(e),t(...r).then((t=>(l.default.warn(`Step "${e}" returned:`,t),console.timeEnd(e),t)))):t}var v;async function h(e){const{sharingData:{items:t,itemGroups:r,userGroups:n},sharing2Summary:{items:o,itemGroups:a,userGroups:i}}=e;return{...e,sharingData:{items:N(t,"sharingData.items"),itemGroups:N(r,"sharingData.itemGroups"),userGroups:N(n,"sharingData.userGroups")},sharing2Summary:{items:N(o,"sharing2Summary.items"),itemGroups:N(a,"sharing2Summary.itemGroups"),userGroups:N(i,"sharing2Summary.userGroups")}}}function N(e,t,r){const n=function(e,t){return r=>{if(e(r))return!0;const n=`[SharingSync] - sanitizeList: found invalid element "${r}" in "${t}", filtering it out.`;return(0,m.sendExceptionLog)({message:n}),!1}}(r||Boolean,t);return(e||[]).filter(n)}async function T(e){const{sharingData:t,personalDataItemIds:r}=e,n=G(t.items,e.sharing2Summary.items,"itemId","timestamp").map((e=>e.type===v.Create&&r.includes(e.id)?{...e,skipPersonalDataItemCreation:!0}:e)),o=G(t.itemGroups,e.sharing2Summary.itemGroups,"groupId","revision"),a=G(t.userGroups,e.sharing2Summary.userGroups,"groupId","revision");return{...e,operations:{items:n,itemGroups:o,userGroups:a}}}function G(e,t,r,n){const{elementsToCreate:o}=function(e,t,r){const n=e.map((e=>e[r])),o=t.map((e=>e.id)),a=o.filter((e=>!n.includes(e)));return{elementsToCreate:a}}(e,t,r),{elementsToUpdate:a,elementsToDelete:i}=function(e,t,r,n){const o=t.map((e=>e.id));return e.reduce(((e,a)=>{const i=o.indexOf(a[r]);return i<0?{...e,elementsToDelete:[...e.elementsToDelete,a[r]]}:t[i][n]>a[n]?{...e,elementsToUpdate:[...e.elementsToUpdate,a[r]]}:e}),{elementsToUpdate:[],elementsToDelete:[]})}(e,t,r,n);return[].concat(o.map((e=>({id:e,type:v.Create})))).concat(a.map((e=>({id:e,type:v.Update})))).concat(i.map((e=>({id:e,type:v.Delete}))))}async function B(e,t){const{operations:{items:r},loadedElements:{itemGroups:o,userGroups:a},sharingData:{itemGroups:i,userGroups:s}}=e,d=(0,n.uniqBy)((e=>e.groupId),o.concat(i)),u=(0,n.uniqBy)((e=>e.groupId),a.concat(s)),l=r.map((e=>function(e,t,r,n){if(e.type!==v.Create)return e;const o=(r||[]).find((t=>(t.items||[]).map((e=>e.itemId)).includes(e.id)));if(!o)return e;const a=(0,c.isItemGroupAccepted)(o,n,t),i={...O(o,n,t),itemGroupId:o.groupId};return a?e:{...e,userConfirmationRequired:!0,confirmationItemGroup:i}}(e,t,d,u)));return{...e,operations:{...e.operations,items:l}}}function O(e,t,r){const n=(0,c.findMyItemGroupUser)(e,r),o=(0,c.findMyItemGroupUserGroupMember)(e,t,r);if(!n&&!o)return{referrer:null,permission:null};const{referrer:a,permission:i}=n||o;return{referrer:a,permission:i}}async function P(e){const t=t=>e.operations[t].filter((e=>[v.Create,v.Update].includes(e.type))).map((e=>e.id));return{...e,getSharingParams:{itemIds:t("items"),itemGroupIds:t("itemGroups"),userGroupIds:t("userGroups")}}}async function R(e,t,r,n){const o=Object.assign({},e.getSharingParams,{type:"getSharing",sharingVersion:4});if(!(o.itemIds.length||o.itemGroupIds.length||o.userGroupIds.length))return e;const{itemErrors:a,items:i,itemGroupErrors:s,itemGroups:c,userGroupErrors:d,userGroups:u}=await t.sharing.get(r,n,o);if(a&&a.length)throw new Error(`[SharingSync] - getSharing itemErrors: ${a[0].message}`);if(s&&s.length)throw new Error(`[SharingSync] - getSharing itemGroupErrors: ${s[0].message}`);if(d&&d.length)throw new Error(`[SharingSync] - getSharing userGroupErrors: ${d[0].message}`);return{...e,loadedElements:{items:N(i,"getSharing loaded items"),itemGroups:N(c,"getSharing loaded itemGroups"),userGroups:N(u,"getSharing loaded userGroups")}}}async function U(e,t,r,n,o){const{sharingData:{userGroups:a},loadedElements:{itemGroups:i,userGroups:c},operations:{itemGroups:d,userGroups:u}}=e,l=await(0,A.asyncFilter)(c,(e=>(0,s.isUserGroupValid)(e,t,r,n))),m=l.map((e=>e.groupId)),p=u.filter((e=>e.type===v.Delete||m.includes(e.id))),S=l.concat(a),{validItemGroups:g,itemKeys:I,invalidItemGroups:y}=await _(i,(e=>(0,s.validateItemGroup)(e,D(e,S),t,r,n))),E=g.map((e=>e.groupId)),f=d.filter((e=>e.type===v.Delete||E.includes(e.id)));return y&&y.length>0&&y.forEach((e=>{o?.(e.itemGroupId,e.error)})),{...e,itemKeys:I,operations:{...e.operations,userGroups:p,itemGroups:f},invalidItemGroups:y}}async function _(e,t){const r=await Promise.all(e.map(t));return{validItemGroups:e.filter(((e,t)=>r[t].isValid)),itemKeys:r.filter((e=>e.isValid)).reduce(((e,t)=>({...e,...t.itemKeys})),{}),invalidItemGroups:r.flatMap(((t,r)=>!1===t.isValid?[{itemGroupId:e[r].groupId,error:t.error}]:[]))}}function D(e,t){const r=(e.groups||[]).map((e=>e.groupId));return t.filter((e=>r.includes(e.groupId)))}function b(e,t){const r=e.getState(),n=(0,y.hasFeatureSelector)(r,"sharing_web_invalidSignatureAutoRevoke_prod"),o=t===a.Trigger.InitialLogin||t===a.Trigger.Login;return n&&o}async function M(e,t,r,n,o,i,c){if(!b(e,c))return r;const{sharingData:{userGroups:d},loadedElements:{itemGroups:u,userGroups:l},invalidItemGroups:m}=r,p=m.filter((e=>e.error===a.ErrorName.ItemGroupInvalidUserProposeSignature));if(0===p.length)return r;const S=(await(0,A.asyncFilter)(l,(e=>(0,s.isUserGroupValid)(e,n,o,i)))).concat(d),g=p.map((e=>u.find((({groupId:t})=>t===e.itemGroupId)))).filter((e=>void 0!==e&&(0,I.isUserItemGroupAdmin)(e,d,i)));if(0===g.length)return r;const y=g.flatMap((e=>e.users.filter((e=>"pending"===e.status&&e.userId!==i)).map((t=>({itemGroup:e,user:t}))))),E=(await Promise.all(y.map((async e=>{const t=await(0,s.getDecryptedItemGroupKey)(e.itemGroup,D(e.itemGroup,S),n,i);return await(0,s.isItemGroupUserProposeSignatureValid)(e.user,t)?void 0:e})))).filter((e=>void 0!==e)),f=await Promise.all(E.map((async({user:r,itemGroup:n})=>(await(0,I.revokeItemGroupMember)(e,t,n,{type:"user",alias:r.alias}),{user:r,itemGroup:n}))));return{...r,autoRevokedUsers:f}}async function L(e,t,r){const{loadedElements:n,sharingData:{itemGroups:o,userGroups:a},itemKeys:i}=e,s=n.items.filter((e=>(0,c.isItemWithoutItemGroup)(e.itemId,n.itemGroups))).reduce(((e,t)=>{const r=(0,d.findItemItemGroup)(t.itemId,o);return r?{...e,[t.itemId]:{itemGroup:r}}:e}),{}),u=Object.keys(s),l=u.map((e=>{const{itemGroup:n}=s[e];return(0,c.getItemGroupKey)(n,a,t,r).catch((()=>null))})),m=await Promise.all(l),p=u.reduce(((e,t,r)=>({...e,[t]:{...s[t],itemGroupKey:m[r]}})),{}),S=u.map((e=>{const{itemGroupKey:t,itemGroup:r}=p[e];if(!r)return Promise.resolve(null);const n=(r.items||[]).find((t=>t.itemId===e));return n?(0,c.decryptItemKey)(n.itemKey,t).catch((()=>null)):Promise.resolve(null)})),g=await Promise.all(S),A=u.reduce(((e,t,r)=>g[r]?{...e,[t]:g[r]}:e),{});return{...e,itemKeys:{...i,...A}}}async function w(e,{storeService:t,wsService:r,eventLoggerService:o,applicationModulesAccess:a}){const i=await async function(e,t,r){const{itemKeys:n,loadedElements:o,operations:{items:a}}=t,i=a.map((t=>async function(e,t,r,n){switch(r.type){case v.Delete:return await(0,u.deleteItemEffect)(e,r.id)?r:null;case v.Create:case v.Update:{if(r.skipPersonalDataItemCreation)return r;if(r.userConfirmationRequired)return null;const o=t.items.find((e=>e.itemId===r.id));if(!o)return null;const a=n[o.itemId];return a&&await(0,u.createOrUpdateItemEffect)(e,o,a)?r:null}}return(0,p.assertUnreachable)(r.type)}(e,o,t,n))),s=(await Promise.all(i)).filter((e=>!!e));try{if(r&&s.length>0&&e.getPersonalFeatures().features.ims_web_ph_mv3_dev){const{commands:e}=r.createClients().passwordHealth;e.recalculatePasswordHealth()}}catch(e){const t=new Error(`Password Health update - sharing: ${e}`);(0,m.sendExceptionLog)({error:t,code:E.ExceptionCriticality.WARNING})}return s}(t,e,a),s=await async function({storeService:e,wsService:t,eventLoggerService:r,applicationModulesAccess:o},a){const{operations:{itemGroups:i},loadedElements:{itemGroups:s,userGroups:d},sharingData:{userGroups:l}}=a,g=(0,n.uniqBy)((e=>e.groupId),d.concat(l)),A=i.map((n=>async function({storeService:e,wsService:t,eventLoggerService:r},n,o,a){const{type:i,id:s}=a,{login:d}=e.getAccountInfo();switch(i){case v.Delete:return a;case v.Create:case v.Update:{const i=n.find((e=>e.groupId===s));if(!i)return null;if((i.users||[]).filter((e=>"publicKey"===e.rsaStatus)).forEach((t=>(0,u.resendPublicKeyInvite)(e,t,i))),(0,S.isLastActiveUserInItemGroupAndAdmin)(i,d))return await(0,u.deleteSingleUserItemGroup)({storeService:e,wsService:t,eventLoggerService:r},i)?{...a,type:v.Delete}:null;if(!(0,c.isItemGroupAccepted)(i,o,d)){const t=(i.items||[]).map((async({itemId:t})=>{try{return await(0,u.deleteItemEffect)(e,t)}catch(e){return null}}));return await Promise.all(t),{...a,deleteSharingDataItems:!0}}return a}}return(0,p.assertUnreachable)(i)}({storeService:e,wsService:t,eventLoggerService:r},s,g,n))),I=(await Promise.all(A)).filter((e=>!!e));try{if(o&&I.length>0&&e.getPersonalFeatures().features.ims_web_ph_mv3_dev){const{commands:e}=o.createClients().passwordHealth;e.recalculatePasswordHealth()}}catch(e){const t=new Error(`Password Health update - sharing: ${e}`);(0,m.sendExceptionLog)({error:t,code:E.ExceptionCriticality.WARNING})}return I}({storeService:t,wsService:r,eventLoggerService:o,applicationModulesAccess:a},e);return{...e,operations:{...e.operations,items:i,itemGroups:s}}}async function k(e){const{sharingData:{items:t,itemGroups:r,userGroups:n},loadedElements:{items:o,itemGroups:a,userGroups:i},operations:{items:s,itemGroups:c,userGroups:d}}=e,u=K(o,t,s),l=K(a,r,c),m=K(i,n,d),p=c.filter((({deleteSharingDataItems:e})=>e)).reduce(((e,{id:t})=>{const r=a.find((e=>e.groupId===t));if(!r)return e;const n=(r.items||[]).map((({itemId:e})=>e));return[...e,...n]}),[]),S=u.filter((e=>!p.includes(e.itemId)));return{...e,sharingData:{items:S,itemGroups:l,userGroups:m}}}function K(e,t,r){return r.reduce(((t,r)=>function(e,t,r){switch(r.type){case v.Delete:return function(e,{id:t}){return e.filter((e=>z(e)!==t))}(t,r);case v.Create:return function(e,t,{id:r}){const n=e.find((e=>z(e)===r));return n?t.concat(n):t}(e,t,r);case v.Update:return function(e,t,{id:r}){const n=e.find((e=>z(e)===r));return n?t.map((e=>z(e)===r?n:e)):t}(e,t,r)}return(0,p.assertUnreachable)(r.type)}(e,t,r)),t)}function z(e){return"itemId"in e?e.itemId:function(e){return"groupId"in e}(e)?e.groupId:void 0}async function F(e,t){const{sharingData:r}=e;return(0,u.updateSharingData)(t,r),e}async function V(e,t,r){const{sharingSync:n}=t.getState().userSession;return r.getInstance().storeSharingSync(n),e}async function H(e,t,r){const n=r.getInstance(),o=await n.doesSharingSyncExist();let a=null;const s=()=>{a={pendingUserGroups:[],pendingItemGroups:[]},n.storeSharingSync(a)};o||s();try{a=await n.getSharingSync()}catch(e){s()}const{pendingItemGroups:c,pendingUserGroups:d}=a,u=(0,i.setAllPendingAction)(c,d);return t.dispatch(u),e}t.syncSharing=async function({storeService:e,wsService:t,localStorageService:r,eventLoggerService:a,applicationModulesAccess:s},d,p,S){try{const l=(0,g.ukiSelector)(e.getState()),m=e.getUserLogin(),{privateKey:A,publicKey:I}=e.getUserSession().keyPair,{credentials:y,notes:E}=e.getPersonalData(),f=e.getSharingData(),v=N(y,"PersonalData.credentials",o.isCredential),G=N(E,"PersonalData.notes",o.isNote),O=[...v,...G],_=O.map((e=>e.Id)),D=O.reduce(((e,t)=>(e[t.Id]=t,e)),{}),b={itemKeys:{},loadedElements:{items:[],itemGroups:[],userGroups:[]},sharing2Summary:d,sharingData:f,operations:{items:[],itemGroups:[],userGroups:[]},personalDataItemIds:_,pendingUserGroups:[],pendingItemGroups:[],invalidItemGroups:[],autoRevokedUsers:[]},K=await Promise.resolve(b).then(C("sanitizeData",h)).then(C("setOperations",T)).then(C("setGetSharingParams",P)).then(C("getSharing",(e=>R(e,t,m,l)))).then(C("filterOutInvalidOperations",(e=>U(e,A,I,m,p)))).then(C("revokeUsersFromInvalidItemGroups",(r=>M(e,t,r,A,I,m,S)))).then(C("setMissingItemKeys",(e=>L(e,A,m)))).then(C("tagConfirmableItemOperation",(e=>B(e,m)))).then(C("setPendingItemGroupsList",(e=>async function(e,t,r,o){const{loadedElements:{itemGroups:a,items:i},sharingData:{itemGroups:s,items:d},itemKeys:l}=e,m=(0,n.uniqBy)((e=>e.groupId),a.concat(s)),p=(0,n.uniqBy)((e=>e.itemId),i.concat(d)),S=m.reduce(((e,n)=>{const a=(0,c.getItemGroupPendingUserMember)(n,t);if(!a)return e;const i=async function(e,t,r,n,o,a){const{permission:i,referrer:s,groupKey:d}=t,l=(e.items||[]).map((async t=>{try{const{itemId:l}=t,m=o[l]||await(0,c.getDecipheredItemKey)(d,t.itemKey,r);if(!m)return null;const p=n.find((e=>e.itemId===l));return p?await(0,u.getPendingItemGroup)(p,m,e.groupId,s,i,a):null}catch(e){return null}}));return(await Promise.all(l)).filter(Boolean)}(n,a,r,p,l,o);return[i,...e]}),[]),g=(0,n.flatten)(await Promise.all(S));return{...e,pendingItemGroups:g}}(e,m,A,D)))).then(C("runOperationsEffects",(r=>w(r,{storeService:e,wsService:t,eventLoggerService:a,applicationModulesAccess:s})))).then(C("applyOperationsToSharingData",k)).then(C("setPendingUserGroupsList",(t=>async function(e,t,r){const{sharingData:{userGroups:n}}=e,o=t.getSpaceData().spaces.find((e=>"accepted"===e.details.status));if(!o)return{...e,pendingUserGroups:[]};const a=String(o.teamId),i=n.reduce(((e,t)=>{if(String(t.teamId)!==a)return e;const n=(t.users||[]).find((e=>e.userId===r&&"pending"===e.status));if(!n)return e;const{groupId:o,name:i}=t,{referrer:s,permission:c}=n;return[{groupId:o,name:i,referrer:s,permission:c,seen:!1},...e]}),[]);return{...e,pendingUserGroups:i}}(t,e,m)))).then(C("initSharingSyncFromStorage",(t=>H(t,e,r)))).then(C("updateStoreSharingSync",(t=>async function(e,t){const{pendingItemGroups:r,pendingUserGroups:n}=e,o=(0,i.updateAllPendingAction)(r,n);return t.dispatch(o),e}(t,e)))).then(C("putSharingSyncBackInStorage",(t=>V(t,e,r)))).then(C("updateSharingDataFromSync",(t=>F(t,e))));return K.sharingData}catch(t){const r=new Error(`[SharingSync] - syncSharing failed: ${t}`);return f&&l.default.error(r),(0,m.sendExceptionLog)({error:r}),e.getSharingData()}},function(e){e[e.Create=0]="Create",e[e.Update=1]="Update",e[e.Delete=2]="Delete"}(v=t.OperationType||(t.OperationType={})),t.sanitizeData=h,t.setOperations=T,t.tagConfirmableOperations=B,t.setGetSharingParams=P,t.getSharing=R,t.filterOutInvalidOperations=U,t.asyncFilterItemGroups=_,t.shouldRunAutoRevoke=b,t.revokeUsersFromInvalidItemGroups=M,t.setMissingItemKeys=L,t.runOperationsEffects=w,t.applyOperationsToSharingData=k,t.updateSharingDataFromSync=F,t.putSharingSyncBackInStorage=V,t.initSharingSyncFromStorage=H,t.getEmptyOperations=function(){return{items:[],itemGroups:[],userGroups:[]}},t.getEmptyGetSharingParams=function(){return{itemIds:[],itemGroupIds:[],userGroupIds:[]}},t.getEmptySharingData=function(){return{items:[],itemGroups:[],userGroups:[]}},t.getEmptySharing2Summary=function(){return{items:[],itemGroups:[],userGroups:[]}}},503735:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handlePendingItemGroupsResponse=t.handlePendingUserGroupsResponse=t.sendPendingExceptionLog=t.updateSharingPermission=t.revokeItemGroupMember=t.isUserItemGroupAdmin=t.shareUnsharedItem=t.shareAlreadySharedItem=void 0;const n=r(401067),o=r(453576),a=r(736884),i=r(970206),s=r(310294),c=r(663698),d=r(152931),u=r(250141),l=r(278320),m=r(736513),p=r(736513),S=r(670252),g=r(889016),A=r(658107),I=r(882366),y=r(17825),E=r(656915),f=r(576330),C=r(684511),{Accept:v,Refuse:h}=o.SharingResponseStatus,N=/[<>]/g,T=e=>e.trim().toLowerCase().replace(N,"");function G(e,t,r){const n=`${e.toLowerCase()}Pending${t}`,o=new Error(`[Sharing] - ${n}: ${r}`);(0,S.sendExceptionLog)({error:o})}t.shareAlreadySharedItem=async function(e,t,r,n,i){try{const d=e.getUserLogin(),l=e.getState(),p=(0,E.ukiSelector)(l),{privateKey:S}=e.getUserSession().keyPair,{userGroups:g}=e.getSharingData(),y=g.filter(Boolean),{groupId:f,revision:C}=r,{credentials:v,notes:h}=e.getPersonalData(),N=[...v,...h],G=await(0,m.makeCryptoService)(),{makeInviteItemGroupMembers:B,makeUserGroupInvite:O,makeUserUpload:P}=(0,a.makeItemGroupService)(t,G),{findUsersByAliases:R}=(0,u.makeWSUserAlias)(),{makeItemForEmailing:U}=(0,s.makeItemService)(),{inviteItemGroupMembers:_}=(0,c.makeItemGroupWS)(),D=await(0,A.getItemGroupKey)(r,y,S,d);if(!D)throw new Error("Couldn't get itemGroupKey, aborting.");const b=i.filter(o.isUserRecipient).map((({alias:e})=>T(e))),M=JSON.stringify(b),L=await R({login:d,uki:p,aliases:M}),w=b.map((e=>P(e,L[e],f,n,D))),k=await Promise.all(w),K=(r.items||[]).map((({itemId:e})=>e)),z=N.filter((e=>K.includes(e.Id))),F=z.map(U),V=i.filter(o.isGroupRecipient).map((e=>e.groupId)),H=y.filter((({groupId:e})=>V.includes(e))).map((e=>O(e,n,D,S,d,f))),j=await Promise.all(H),W=(0,I.createAuditLogDetails)(l,z[0]),x=B(f,C,k,j,F,W),$=await _(d,p,x,W);if($&&$.itemGroups&&1===$.itemGroups.length){const{publicKey:t}=e.getUserSession().keyPair;await(0,I.validateItemGroupResponse)("[SharingUserActionsService] - shareAlreadySharedItem",G,$,t,S,D,d,k,y)}}catch(e){throw e.message=`[SharingUserActionsService] - shareAlreadySharedItem: ${e.message}`,e}},t.shareUnsharedItem=async function(e,t,r,n,i){try{const d=e.getUserLogin(),S=e.getState(),g=(0,E.ukiSelector)(S),{privateKey:A,publicKey:y}=e.getUserSession().keyPair,{userGroups:f}=e.getSharingData(),C=await(0,m.makeCryptoService)(),{makeCreateItemGroupEvent:v,makeUserGroupInvite:h,makeUserUpload:N}=(0,a.makeItemGroupService)(t,C),{makeItemUpload:G,makeItemForEmailing:B}=(0,s.makeItemService)(),{createItemGroup:O}=(0,c.makeItemGroupWS)(),{findUsersByAliases:P}=(0,u.makeWSUserAlias)(),R=(0,l.generateItemUuid)(),U=await C.symmetricEncryption.generateNewAESKey(),_=i.filter(o.isUserRecipient).map((({alias:e})=>T(e))),D=JSON.stringify(_),b=await P({login:d,uki:g,aliases:D}),M=N(d,{login:d,publicKey:y,privateKey:A},R,"admin",U),L=_.map((e=>N(e,b[e],R,n,U))).concat(M),w=await Promise.all(L),k=i.filter(o.isGroupRecipient).map((e=>e.groupId)),K=f.filter((({groupId:e})=>k.includes(e))).map((e=>h(e,n,U,A,d,R))),z=await Promise.all(K),{Id:F}=r,V=(0,p.makeSymmetricEncryption)(),H=await C.symmetricEncryption.generateNewAESKey(),j=await C.symmetricEncryption.encryptAES256(U,H),W=await V.encryptSharingItem(H,r),x=await G(F,j,W),$=B(r),Y=(0,I.createAuditLogDetails)(S,r),q=v(R,w,z,[x],[$],Y),Q=await O(d,g,q);Q&&Q.itemGroups&&1===Q.itemGroups.length&&await(0,I.validateItemGroupResponse)("[SharingUserActionsService] - shareUnsharedItem",C,Q,y,A,U,d,w,f)}catch(e){throw e.message=`[SharingUserActionsService] - shareUnsharedItem: ${e.message}`,e}},t.isUserItemGroupAdmin=function(e,t,r){const n=(e.users||[]).some((({userId:e,permission:t})=>e===r&&"admin"===t)),o=(t||[]).filter((e=>(e.users||[]).map((({userId:e})=>e)).includes(r))).map((({groupId:e})=>e)),a=(e.groups||[]).filter((({groupId:e})=>o.includes(e))).some((({permission:e})=>"admin"===e));return n||a},t.revokeItemGroupMember=async function(e,t,r,n,o="manual"){const i=await(0,m.makeCryptoService)(),{groupId:s,revision:c}=r,d=e.getState(),u=(0,E.ukiSelector)(d),l=e.getUserLogin(),{makeRevokeItemGroupMembers:p}=(0,a.makeItemGroupService)(t,i),S="user"===n.type?[n.alias]:[],g="userGroup"===n.type?[n.groupId]:[],{credentials:A,notes:y}=(0,f.personalDataSelector)(d),C=[...A,...y],v=(r.items||[]).map((({itemId:e})=>e)),h=C.filter((e=>v.includes(e.Id))),N=p(s,c,S,g,(0,I.createAuditLogDetails)(d,h[0]),o);await t.itemGroup.revokeItemGroupMembers(l,u,N)},t.updateSharingPermission=async function(e,t,r,n,o){const i=e.getUserLogin(),s=(0,E.ukiSelector)(e.getState()),c=await(0,m.makeCryptoService)(),{makeUserGroupUpdate:d,makeUserUpdate:u,makeUpdateItemGroupMembers:l}=(0,a.makeItemGroupService)(t,c),{groupId:p,revision:S}=r,g=l(p,S,"user"===n.type?[await u(n.alias,o)]:[],"userGroup"===n.type?[await d(n.groupId,o)]:[]);await t.itemGroup.updateItemGroupMembers(i,s,g)},t.sendPendingExceptionLog=G,t.handlePendingUserGroupsResponse=async function(e,t,r){const a=(0,m.makeCryptoService)(),s=(0,g.makeWSService)(),{makeAcceptUserGroupEvent:c,makeRefuseUserGroupEvent:u}=(0,i.makeUserGroupService)(s,a),{accept:l,refuse:p}=(0,d.makeUserGroupWS)(),S=(0,E.ukiSelector)(e.getState()),A=e.getUserLogin(),{keyPair:{privateKey:I}}=e.getUserSession(),{userGroups:f}=e.getSharingData(),C=t.map((async function(e){try{const t=f.find((t=>t.groupId===e));if(!t)throw new Error(`could not find userGroup to ${o.SharingResponseStatus[r]} in sharingData`);switch(r){case v:await async function(e){const t=await c({login:A,uki:S,privateKey:I},e);return await l(A,S,t)}(t);break;case h:await async function(e){const{revision:t}=e,r=await u(e.groupId,t);return await p(A,S,r)}(t);break;default:(0,y.assertUnreachable)(r)}return{userGroupId:e,success:!0}}catch(t){return{userGroupId:e,success:!1,error:t}}})),N=await Promise.all(C),[T,B]=(0,n.partition)((({success:e})=>Boolean(e)),N);return B.forEach((({error:e})=>G(o.SharingResponseStatus[r],"UserGroup",e))),{successes:T.map((e=>e.userGroupId)),failures:B.map((e=>e.userGroupId))}},t.handlePendingItemGroupsResponse=async function(e,t,r){const i=(0,m.makeCryptoService)(),s=(0,g.makeWSService)(),{makeAcceptItemGroupEvent:d,makeRefuseItemGroupEvent:u}=(0,a.makeItemGroupService)(s,i),{acceptItemGroup:l,refuseItemGroup:p}=(0,c.makeItemGroupWS)(),S=e.getState(),f=(0,E.ukiSelector)(S),N=(0,C.pendingItemGroupsSharedItemContentsSelector)(S),T=e.getUserLogin(),{keyPair:{privateKey:B}}=e.getUserSession(),{itemGroups:O,userGroups:P}=e.getSharingData(),R=t.map((({itemGroupId:e,itemsForEmailing:t})=>async function(e,t){try{const n=O.find((t=>t.groupId===e));if(!n)throw new Error(`could not find itemGroup to ${o.SharingResponseStatus[r]} in sharingData`);const a=N.find((e=>e.Id===n.items[0].itemId)),s=(0,I.createAuditLogDetails)(S,a);switch(r){case v:await async function(e,t,r){const{groupId:n,revision:o}=e,a=await(0,A.getItemGroupKey)(e,P,B,T),s=await(0,I.generateAcceptSignature)(i,B,n,a),c=d(s,n,o,t,r);return await l(T,f,c)}(n,t,s);break;case h:await async function(e,t,r){const{groupId:n,revision:o}=e,a=u(n,o,t,r);return await p(T,f,a)}(n,t,s);break;default:(0,y.assertUnreachable)(r)}return{itemGroupId:e,success:!0}}catch(t){return{itemGroupId:e,success:!1,error:t}}}(e,t))),U=await Promise.all(R),[_,D]=(0,n.partition)((({success:e})=>Boolean(e)),U);return D.forEach((({error:e})=>G(o.SharingResponseStatus[r],"ItemGroup",e))),{successes:_.map((e=>e.itemGroupId)),failures:D.map((e=>e.itemGroupId))}}},947683:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isUserGroupValid=t.areItemGroupItemKeysValid=t.isItemGroupGroupMemberProposeSignatureValid=t.areItemGroupGroupMembersProposeSignaturesValid=t.isItemGroupUserProposeSignatureValid=t.areItemGroupUsersProposeSignaturesValid=t.isItemGroupUserGroupMemberValid=t.isItemGroupUserValid=t.getDecryptedItemGroupKey=t.validateItemGroup=void 0;const n=r(110203),o=r(736513),a=r(795623),i=r(658107),s=r(493513),c=!1;async function d(e,t,r,n){try{const{status:a,acceptSignature:s,groupKey:c}=t;if("accepted"!==a)return!0;const d=await(0,o.makeCryptoService)().asymmetricEncryption.decrypt(r,c);return await(0,i.isGroupSignatureValid)(e,s,d,n)}catch(e){return c&&a.default.log(`isGroupSignatureValid error: ${e}`),!1}}async function u(e,t,r,n,s){try{const{status:a,acceptSignature:c,groupKey:d,groupId:u}=t;if("accepted"!==a)return!0;const l=(r||[]).find((e=>e.groupId===u));if(!l)return!1;const{publicKey:m}=l,p=await(0,i.getUserGroupPrivateKey)(l,n,s);if(!p)return!1;const S=await(0,o.makeCryptoService)().asymmetricEncryption.decrypt(p,d);return await(0,i.isGroupSignatureValid)(e,c,S,m)}catch(e){return c&&a.default.log(`isItemGroupUserGroupMemberValid error: ${e}`),!1}}async function l(e,t){const r=(e||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>m(e,t)));return(await Promise.all(r)).every(Boolean)}async function m(e,t){try{return await(0,o.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,s.encode(e.userId))}catch(e){return c&&a.default.warn(`[SharingValidationService] - isItemGroupUserProposeSignatureValid: ${e}`),!1}}async function p(e,t){const r=(e||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>S(e,t)));return(await Promise.all(r)).every(Boolean)}async function S(e,t){try{return await(0,o.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,s.encode(e.groupId))}catch{return!1}}async function g(e,t){const r=(e||[]).map((e=>async function(e,t){try{const{itemKey:r}=e;return await(0,i.decryptItemKey)(r,t)}catch{return!1}}(e,t))),n=await Promise.all(r);return!!n.every(Boolean)&&n.reduce(((t,r,n)=>({...t,[e[n].itemId]:r})),{})}t.validateItemGroup=async function(e,t,r,o,s){const m=e.groupId,S=(0,i.findMyItemGroupUser)(e,s),A=(0,i.findMyItemGroupUserGroupMember)(e,t,s);if(!S&&!A)return{isValid:!1,error:n.ErrorName.ItemGroupNoAccess};const I=S?await(0,i.getDecryptedItemGroupKeyFromUser)(S,r):await(0,i.getDecryptedItemGroupKeyFromUserGroupMember)(A,t,r,s);if(c&&a.default.log("ITEM_GROUP_KEY",!!I),!I)return{isValid:!1,error:n.ErrorName.ItemGroupInvalidKey};const y=!S||await d(m,S,r,o);if(c&&a.default.log("ITEM_GROUP_USER_VALID",y),!y)return{isValid:!1,error:n.ErrorName.ItemGroupInvalidUserAcceptSignature};const E=!A||await u(m,A,t,r,s);if(c&&a.default.log("ITEM_GROUP_USER_GROUP_VALID",E),!E)return{isValid:!1,error:n.ErrorName.ItemGroupInvalidGroupAcceptSignature};const f=await l(e.users,I);if(c&&a.default.log("USERS_PROPOSE_SIGNATURES_VALID",f),!f)return{isValid:!1,error:n.ErrorName.ItemGroupInvalidUserProposeSignature};const C=await p(e.groups,I);if(c&&a.default.log("GROUP_MEMBERS_PROPOSE_SIGNATURES_VALID",C),!C)return{isValid:!1,error:n.ErrorName.ItemGroupInvalidGroupProposeSignature};const v=await g(e.items||[],I);return c&&a.default.log("ITEM_GROUP_ITEM_KEYS",!!v),v?{isValid:!0,itemKeys:v}:{isValid:!1,error:n.ErrorName.ItemGroupInvalidKey}},t.getDecryptedItemGroupKey=async function(e,t,r,n){const o=(0,i.findMyItemGroupUser)(e,n),a=(0,i.findMyItemGroupUserGroupMember)(e,t,n);if(!o&&!a)return null;return(o?await(0,i.getDecryptedItemGroupKeyFromUser)(o,r):await(0,i.getDecryptedItemGroupKeyFromUserGroupMember)(a,t,r,n))||null},t.isItemGroupUserValid=d,t.isItemGroupUserGroupMemberValid=u,t.areItemGroupUsersProposeSignaturesValid=l,t.isItemGroupUserProposeSignatureValid=m,t.areItemGroupGroupMembersProposeSignaturesValid=p,t.isItemGroupGroupMemberProposeSignatureValid=S,t.areItemGroupItemKeysValid=g,t.isUserGroupValid=async function(e,t,r,n){const{groupId:o}=e,a=(e.users||[]).find((e=>e.userId===n));if(!a)return null;const s=await(0,i.getDecryptedUserGroupKey)(a.groupKey,t);return!(!s||a.acceptSignature&&!await(0,i.isGroupSignatureValid)(o,a.acceptSignature,s,r)||!await(0,i.areUserGroupUsersProposeSignaturesValid)(e.users,s))}},970206:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserGroupService=t.checkUsersPublicKey=t.ConvertUserGroupMemberToUserUpdate=t.ConvertUserGroupMemberToUserUpdateWithInvite=t.ConvertUserGroupMemberToUserUpload=t.createUserUploadEvent=t.makeUserGroupAdminItem=t.makeGroupKeyItem=t.decryptGroupKey=t.UPDATE_USER_GROUP_USERS=t.REVOKE_USER_GROUP_USERS=t.INVITE_USER_GROUP_USERS=t.REFUSE_USER_GROUP=t.ACCEPT_USER_GROUP=t.RENAME_USER_GROUP=t.DELETE_USER_GROUP=t.CREATE_TEAM_ADMINS_USER_GROUP=t.CREATE_USER_GROUP=t.SHARING_VERSION=void 0;const n=r(493513),o=r(278320),a=r(316038),i=r(144197),s=r(543927),c=r(882366),d=r(670252);function u(e,t,r,o){return e.asymmetricEncryption.sign(t,n.encode(r+"-accepted-"+o))}function l(e,t,r){if(!(0,a.isBase64Encoded)(r))throw new Error("INVALID_GROUP_KEY");return e.asymmetricEncryption.decrypt(t.privateKey,r)}async function m(e,t,r,o,a){const s=(0,i.getAdminDataFromTeamAdminData)(r,o),c=(0,i.getSpecialItemGroupFromAdminData)(s).revision,d=JSON.stringify(a),[u,l]=await Promise.all([e.symmetricEncryption.generateNewAESKey(),(0,i.getSpecialItemGroupKey)(e,t,s)]),[m,p]=await Promise.all([e.symmetricEncryption.encryptAES256(u,n.encode(d)),e.symmetricEncryption.encryptAES256(l,n.encode(u))]);return{itemId:a.itemId,itemKey:p,content:m,itemGroupRevision:c}}async function p(e,r,a,i,s){const[c,d]=await Promise.all([r.asymmetricEncryption.generateRsaKeyPair(),r.symmetricEncryption.generateNewAESKey()]),u=(0,o.generateItemUuid)(),l=await r.symmetricEncryption.encryptAES256(d,n.encode(c.privateKey));return{groupId:u,name:i.name,publicKey:c.publicKey,privateKey:l,sharingVersion:t.SHARING_VERSION,teamId:i.teamId,type:e,users:await Promise.all(s.map((e=>g(r,e,a,d,u))))}}async function S(e){return{itemId:(0,o.generateItemUuid)(),groupId:(0,o.generateItemUuid)(),groupKey:await e.symmetricEncryption.generateNewAESKey()}}async function g(e,t,r,n,o){const a=await I(e,t,n);return t.Login===r.login&&(a.acceptSignature=await u(e,r.privateKey,o,n)),a}async function A(e,r,n,o,a,i){const s=a.map((async t=>{try{return{success:!0,user:await g(e,t,r,i,n)}}catch(e){const t=new Error(`[UserGroupService] - makeBaseInviteMembersEvent: ${e}`);return(0,d.sendExceptionLog)({error:t}),{success:!1}}})),c=(await Promise.all(s)).filter((e=>e.success)).map((e=>e.user));return{groupId:n,revision:o,sharingVersion:t.SHARING_VERSION,type:t.INVITE_USER_GROUP_USERS,users:c}}async function I(e,t,r){const o=await E(t);if(!t.Login){const a=await(0,c.generateProposeSignature)(e,r,t.Alias);return await(0,c.validateProposeSignature)("[ItemGroupService] - ConvertUserGroupMemberToUserUpload (no login)",e,r,a,n.encode(t.Alias)),{...o,userId:t.Alias,alias:t.Alias,proposeSignatureUsingAlias:!0,proposeSignature:a}}const[a,i]=await Promise.all([e.asymmetricEncryption.encrypt(t.PublicKey,r),(0,c.generateProposeSignature)(e,r,t.Login)]);return await(0,c.validateProposeSignature)("[ItemGroupService] - ConvertUserGroupMemberToUserUpload",e,r,i,n.encode(t.Login)),{...o,alias:t.Alias,groupKey:a,proposeSignatureUsingAlias:!1,proposeSignature:i}}async function y(e,t,r){const o=await E(t),[a,i]=await Promise.all([e.asymmetricEncryption.encrypt(t.PublicKey,r),(0,c.generateProposeSignature)(e,r,t.Login)]);return await(0,c.validateProposeSignature)("[ItemGroupService] - ConvertUserGroupMemberToUserUpdateWithInvite",e,r,i,n.encode(t.Login)),{...o,groupKey:a,proposeSignature:i}}async function E(e){return{permission:e.Permission,userId:e.Login}}function f(e,t,r,n){return e(t,r,{type:"getSharing",sharingVersion:4,userGroupIds:n}).then((({userGroupErrors:e,userGroups:t})=>{if(e&&e.length)throw new Error(e[0].message);return t}))}function C({teamId:e}){if(!e)throw new Error("USER_GROUP_DELETED")}t.SHARING_VERSION=4,t.CREATE_USER_GROUP="createUserGroup",t.CREATE_TEAM_ADMINS_USER_GROUP="createTeamAdminsUserGroup",t.DELETE_USER_GROUP="deleteUserGroup",t.RENAME_USER_GROUP="renameUserGroup",t.ACCEPT_USER_GROUP="acceptUserGroup",t.REFUSE_USER_GROUP="refuseUserGroup",t.INVITE_USER_GROUP_USERS="inviteUserGroupUsers",t.REVOKE_USER_GROUP_USERS="revokeUserGroupUsers",t.UPDATE_USER_GROUP_USERS="updateUserGroupUsers",t.decryptGroupKey=l,t.makeGroupKeyItem=m,t.makeUserGroupAdminItem=S,t.createUserUploadEvent=g,t.ConvertUserGroupMemberToUserUpload=I,t.ConvertUserGroupMemberToUserUpdateWithInvite=y,t.ConvertUserGroupMemberToUserUpdate=E,t.checkUsersPublicKey=e=>{const t=Object.keys(e).filter((t=>!e[t].publicKey));return t.length>0?Promise.reject(new Error(JSON.stringify({message:"Users missing public Key: "+t,code:"MISSING_PUBLIC_KEY"}))):Promise.resolve(e)};const v=e=>{const t="ITEM_GROUP_UPDATE_CONFLICT";return"getAdditionalInfo"in e&&e.getAdditionalInfo().webServiceSubMessage===t||e.message.includes(t)},h=e=>{const t="Conflict";return!(!("getAdditionalInfo"in e)||!e.getAdditionalInfo().message.startsWith(t))||e.message.startsWith(t)};function N(e,t,r,n,o){return e(r,n,o).catch((a=>{if(v(a))return f(t,r,n,[o.groupId]).then((([t])=>{C(t);const{revision:a}=t;return e(r,n,{...o,revision:a})}));throw a}))}t.makeUserGroupService=function(e,r){return{makeUserGroupAdminItem:()=>S(r),makeCreateUserGroupEvent:(e,o,a,i)=>async function(e,r,o,a,i){const s=await e.asymmetricEncryption.generateRsaKeyPair(),{teamId:c,externalId:d,name:u}=a;return{groupId:i.groupId,name:u,publicKey:s.publicKey,privateKey:await e.symmetricEncryption.encryptAES256(i.groupKey,n.encode(s.privateKey)),sharingVersion:t.SHARING_VERSION,teamId:c,type:"createUserGroup",users:[],groupKeyItem:await m(e,r,o,c.toString(),i),externalId:d}}(r,e,o,a,i),makeCreateUserGroupEventWithMembers:(e,t,n)=>async function(e,t,r,n){return p("createUserGroup",e,t,r,n)}(r,e,t,n),makeCreateSpecialUserGroupEvent:(e,t,n)=>async function(e,t,r,n){return p("createTeamAdminsUserGroup",e,t,r,n)}(r,e,t,n),createUserGroup:({login:t,uki:r},n,o)=>function(e,t,r,n,o){return e.userGroup.create(t,r,o).catch((a=>{if(v(a))return(0,s.loadSpecialItemGroup)(e,t,r,n).then((n=>e.userGroup.create(t,r,{...o,groupKeyItem:{...o.groupKeyItem,itemGroupRevision:n.revision}})));throw a}))}(e,t,r,n,o),makeDeleteUserGroupEvent:(e,r,n,o)=>async function(e,r,n,o){const a={type:t.DELETE_USER_GROUP,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r};return n&&o&&(a.groupKeyItem={itemId:n,itemGroupRevision:o}),a}(e,r,n,o),deleteUserGroup:({login:t,uki:r},n,o)=>function(e,t,r,n,o){return e.userGroup.delete(t,r,o).catch((a=>{if(v(a))return(0,s.loadSpecialItemGroup)(e,t,r,n).then((n=>e.userGroup.delete(t,r,{...o,groupKeyItem:{...o.groupKeyItem,itemGroupRevision:n.revision}})));if(h(a))return f(e.sharing.get,t,r,[o.groupId]).then((n=>{const[{revision:a,teamId:i}]=n;return i?e.userGroup.delete(t,r,{...o,revision:a}):{userGroups:n}}));throw a}))}(e,t,r,n,o),makeRenameUserGroupEvent:(e,r,n)=>async function(e,r,n){return{type:t.RENAME_USER_GROUP,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r,name:n}}(e,r,n),renameUserGroup:({login:t,uki:r},n)=>function(e,t,r,n){const o=e.userGroup.rename;return o(t,r,n).catch((a=>{if(h(a))return f(e.sharing.get,t,r,[n.groupId]).then((e=>{C(e[0]);const[{name:a,revision:i}]=e;return a===n.name?{userGroups:e}:o(t,r,{...n,revision:i})}));throw a}))}(e,t,r,n),makeAcceptUserGroupEvent:(e,n)=>async function(e,r,n){const o=n.users.find((e=>e.userId===r.login)).groupKey,a=await l(e,r,o),i=await u(e,r.privateKey,n.groupId,a);return{type:t.ACCEPT_USER_GROUP,sharingVersion:4,revision:n.revision,groupId:n.groupId,acceptSignature:i}}(r,e,n),acceptUserGroup:({login:t,uki:r},n)=>N(e.userGroup.accept,e.sharing.get,t,r,n),makeRefuseUserGroupEvent:(e,r)=>async function(e,r){return{type:t.REFUSE_USER_GROUP,sharingVersion:4,revision:r,groupId:e}}(e,r),refuseUserGroup:({login:t,uki:r},n)=>N(e.userGroup.refuse,e.sharing.get,t,r,n),makeInviteMembersEventAsAdmin:(e,t,n,o)=>function(e,t,r,n,o){return A(e,n,t.groupId,r,o,t.groupKey)}(r,e,t,n,o),makeInviteMembersEvent:(e,t,n,o,a)=>async function(e,t,r,n,o,a){const i=a.users.find((e=>e.userId===n.login)).groupKey,s=await l(e,n,i);return A(e,n,t,r,o,s)}(r,e,t,n,o,a),inviteUserGroupMembers:({login:t,uki:r},n)=>function(e,t,r,n){return e.userGroup.invite(t,r,n).catch((o=>{if(h(o))return f(e.sharing.get,t,r,[n.groupId]).then((o=>{C(o[0]);const[{revision:a,users:i}]=o,s=n.users.filter((e=>!i.find((t=>t.userId===e.userId&&"accepted"===t.status))));return s.length?e.userGroup.invite(t,r,{...n,revision:a,users:s}):{userGroups:o}}));throw o}))}(e,t,r,n),makeRevokeMembersEvent:(e,r,n)=>async function(e,r,n){return{type:t.REVOKE_USER_GROUP_USERS,sharingVersion:t.SHARING_VERSION,revision:r,groupId:e,users:n}}(e,r,n),revokeUserGroupMembers:({login:t,uki:r},n)=>function(e,t,r,n){return e.userGroup.revoke(t,r,n).catch((o=>{if(h(o))return f(e.sharing.get,t,r,[n.groupId]).then((o=>{C(o[0]);const[{revision:a,users:i}]=o,s=n.users.filter((e=>i.find((t=>t.userId===e&&"accepted"===t.status))));return s.length?e.userGroup.revoke(t,r,{...n,revision:a,users:s}):{userGroups:o}}));throw o}))}(e,t,r,n),makeUpdateMembersEvent:(e,r,n)=>async function(e,r,n){return{type:t.UPDATE_USER_GROUP_USERS,sharingVersion:t.SHARING_VERSION,revision:r,groupId:e,users:await Promise.all(n.map((e=>E(e))))}}(e,r,n),makeUpdateMembersWithInviteEvent:(e,n,o,a)=>async function(e,r,n,o,a){return{type:t.UPDATE_USER_GROUP_USERS,sharingVersion:t.SHARING_VERSION,revision:o,groupId:r,users:await Promise.all(a.map((t=>y(e,t,n))))}}(r,e,n,o,a),updateUserGroupMembers:({login:t,uki:r},n)=>N(e.userGroup.update,e.sharing.get,t,r,n),findExistingUsersByAliases:r=>e.userAlias.findUsersByAliases(r).then(t.checkUsersPublicKey),findUsersByAliases:t=>e.userAlias.findUsersByAliases(t),isCurrentUserProposeSignatureValid:(e,t)=>async function(e,t,r){const n=r.users.find((e=>e.userId===t.login)),o=await l(e,t,n.groupKey);return(0,c.isProposeSignatureValid)(e,n.proposeSignature,n.userId,o)}(r,e,t)}}},97124:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeSharingService=void 0;const n=r(736513),o=r(970206),a=r(736884),i=r(310294);t.makeSharingService=function(e,t){const r=(0,n.makeCryptoService)();return{ws:t,store:e,crypto:r,userGroup:(0,o.makeUserGroupService)(t,r),itemGroup:(0,a.makeItemGroupService)(t,r),item:(0,i.makeItemService)()}}},281197:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isShared=void 0;const n=r(401067),o=r(859890);t.isShared=(0,n.curry)(((e,t)=>(0,o.binaryContains)(e,t.Id)))},471646:(e,t)=>{function r(e,t,r){const n=(t||[]).filter((e=>(e.users||[]).map((e=>e.userId)).includes(r))).map((e=>e.groupId));return(e.groups||[]).filter((e=>n.includes(e.groupId)&&"accepted"===e.status))}function n(e,t){return t.find((t=>(t.items||[]).map((e=>e.itemId)).includes(e)))}function o(e){return(e.users||[]).filter(a)}Object.defineProperty(t,"__esModule",{value:!0}),t.getItemGroupActiveUsers=t.findItemItemGroup=t.getItemUserIds=t.getItemUserGroupIds=t.findMyAcceptedItemGroups=t.findMyAcceptedItemGroupUserGroupMembers=void 0,t.findMyAcceptedItemGroupUserGroupMembers=r,t.findMyAcceptedItemGroups=function(e,t,n){return e.filter((e=>{const o="items"===e.type,a=(e.users||[]).some((e=>e.userId===n&&"accepted"===e.status)),i=r(e,t,n).length>0;return o&&(a||i)}))},t.getItemUserGroupIds=function(e,t){const r=n(t,e);return(r?.groups??[]).filter((e=>"accepted"===e.status)).map((e=>e.groupId))},t.getItemUserIds=function(e,t){const r=n(t,e);return r?o(r).map((e=>e.userId)):[]},t.findItemItemGroup=n,t.getItemGroupActiveUsers=o;const a=e=>["accepted","pending"].includes(e.status)},589489:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLimitedSharedItemIds=void 0,t.getLimitedSharedItemIds=(e,t)=>{const r=e.userGroups.filter((e=>e.users.some((e=>e.userId===t&&"accepted"===e.status)))),n=new Set(r.map((e=>e.groupId)));return e.itemGroups.filter((e=>{const r=e.users?.some((e=>e.userId===t&&"admin"===e.permission&&"accepted"===e.status)),o=e.groups?.some((e=>n.has(e.groupId)&&"admin"===e.permission&&"accepted"===e.status));return!(r||o)})).map((e=>(e.items||[]).map((e=>e.itemId)))).reduce(((e,t)=>e.concat(t)),[]).reduce(((e,t)=>({...e,[t]:!0})),{})}},978987:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingCapacity$=t.myAcceptedItemGroupUserMembers$=t.myAcceptedUserGroups$=t.hasNotifications$=t.pendingUserGroups$=t.pendingItemGroups$=t.allSharedItemIds$=t.userRecipients$=t.groupRecipients$=t.recipientsCount$=t.isShared$=void 0;const n=r(518948),o=r(903343),a=r(684511),i=r(980993),s=r(190021);t.isShared$=e=>{const t=(0,a.getIsSharedSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.recipientsCount$=e=>{const t=(0,a.getRecipientsCountSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.groupRecipients$=e=>{const t=(0,a.getGroupRecipientsSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.userRecipients$=e=>{const t=(0,a.getUserRecipientsSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.allSharedItemIds$=()=>{const e=i.sortedSharedItemIdsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.pendingItemGroups$=()=>{const e=a.pendingItemGroupsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.pendingUserGroups$=()=>{const e=a.pendingUserGroupsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.hasNotifications$=()=>{const e=a.hasNotificationsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.myAcceptedUserGroups$=()=>{const e=a.myAcceptedUserGroupsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.myAcceptedItemGroupUserMembers$=()=>{const e=a.myAcceptedItemGroupUserMembersSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.sharingCapacity$=()=>{const e=s.sharingCapacitySelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())}},684511:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserRecipientsSelector=t.getGroupRecipientsSelector=t.getRecipientsCountSelector=t.getIsSharedSelector=t.hasNotificationsSelector=t.myAcceptedItemGroupUserMembersSelector=t.myAcceptedUserGroupsSelector=t.pendingUserGroupsSelector=t.pendingItemGroupsSharedItemContentsSelector=t.pendingItemGroupsSelector=t.itemItemGroupSelector=t.userRecipientsSelector=t.groupRecipientsSelector=t.recipientsCountSelector=t.isSharedSelector=void 0;const n=r(432034),o=r(658107),a=r(471646),i=r(6e3),s=r(352102);t.isSharedSelector=(e,t)=>{const{items:r}=(0,s.sharingDataSelector)(e);return r.some((e=>e.itemId===t))},t.recipientsCountSelector=(e,t)=>{const r=(0,s.sharingDataSelector)(e);return(0,o.getRecipientsCount)(r,t)},t.groupRecipientsSelector=(e,t)=>{const r=(0,s.sharingDataSelector)(e);return(0,o.getGroupRecipients)(r,t)},t.userRecipientsSelector=(e,t)=>{const r=(0,s.sharingDataSelector)(e);return(0,o.getUserRecipients)(r,t)},t.itemItemGroupSelector=(e,t)=>{const{itemGroups:r}=(0,s.sharingDataSelector)(e);return(0,a.findItemItemGroup)(t,r)},t.pendingItemGroupsSelector=e=>e.userSession.sharingSync.pendingItemGroups||[],t.pendingItemGroupsSharedItemContentsSelector=e=>e.userSession.sharingSync.pendingItemGroups?e.userSession.sharingSync.pendingItemGroups.reduce(((e,t)=>e.concat(t.items)),[]):[],t.pendingUserGroupsSelector=e=>e.userSession.sharingSync.pendingUserGroups||[],t.myAcceptedUserGroupsSelector=(0,n.createSelector)(i.loginStatusSelector,s.sharingDataSelector,(({login:e},{userGroups:t})=>(0,o.findMyAcceptedUserGroups)(t,e))),t.myAcceptedItemGroupUserMembersSelector=(0,n.createSelector)(i.loginStatusSelector,s.sharingDataSelector,(({login:e},{itemGroups:t})=>(0,o.findMyAcceptedItemGroupUserMembers)(t,e))),t.hasNotificationsSelector=(0,n.createSelector)(t.pendingItemGroupsSelector,t.pendingUserGroupsSelector,((e,t)=>[...e,...t].some((e=>!e.seen)))),t.getIsSharedSelector=e=>(0,n.createSelector)(s.sharingDataSelector,(({items:t})=>t.some((t=>t.itemId===e)))),t.getRecipientsCountSelector=e=>(0,n.createSelector)(s.sharingDataSelector,(t=>(0,o.getRecipientsCount)(t,e))),t.getGroupRecipientsSelector=e=>(0,n.createSelector)(s.sharingDataSelector,(t=>(0,o.getGroupRecipients)(t,e))),t.getUserRecipientsSelector=e=>(0,n.createSelector)(s.sharingDataSelector,(t=>(0,o.getUserRecipients)(t,e)))},589698:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.acceptedItemGroupsSelector=void 0;const n=r(432034),o=r(416593),a=r(471646),i=r(352102);t.acceptedItemGroupsSelector=(0,n.createSelector)(i.sharingDataSelector,o.userIdSelector,(({itemGroups:e,userGroups:t},r)=>(0,a.findMyAcceptedItemGroups)(e,t,r)))},155721:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isAllowedToShareSelector=void 0;const n=r(432034),o=r(190021);t.isAllowedToShareSelector=(0,n.createSelector)(o.sharingCapacitySelector,(e=>"unlimited"===e.type||e.remains>0))},691210:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.limitedSharingItemsSelector=void 0;const n=r(432034),o=r(589489),a=r(416593),i=r(352102);t.limitedSharingItemsSelector=(0,n.createSelector)(i.sharingDataSelector,a.userIdSelector,o.getLimitedSharedItemIds)},667231:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharedCredentialsCountSelector=void 0;const n=r(432034),o=r(980993),a=r(751319),i=r(281197);t.sharedCredentialsCountSelector=(0,n.createSelector)(o.sortedSharedItemIdsSelector,a.credentialsSelector,((e,t)=>{const r=(0,i.isShared)(e);return t.filter(r).length}))},630150:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharedItemsCountSelector=void 0;const n=r(432034),o=r(667231),a=r(541384);t.sharedItemsCountSelector=(0,n.createSelector)(o.sharedCredentialsCountSelector,a.sharedNotesCountSelector,((e,t)=>e+t))},541384:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharedNotesCountSelector=void 0;const n=r(432034),o=r(980993),a=r(675705),i=r(281197);t.sharedNotesCountSelector=(0,n.createSelector)(o.sortedSharedItemIdsSelector,a.notesSelector,((e,t)=>{const r=(0,i.isShared)(e);return t.filter(r).length}))},190021:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingCapacitySelector=void 0;const n=r(432034),o=r(416593),a=r(546617),i=r(630150);t.sharingCapacitySelector=(0,n.createSelector)(i.sharedItemsCountSelector,o.premiumStatusSelector,a.getSharingCapacity)},352102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingDataSelector=void 0,t.sharingDataSelector=e=>e.userSession.sharingData},980993:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sortedSharedItemIdsSelector=void 0;const n=r(432034),o=r(352102);t.sortedSharedItemIdsSelector=(0,n.createSelector)(o.sharingDataSelector,(({items:e})=>e.map((e=>e.itemId)).sort()))},546617:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingCapacity=void 0,t.getSharingCapacity=(e,t)=>{const r=t?.capabilities?.sharingLimit?.info?.limit??1/0;return r===1/0?{type:"unlimited"}:{type:"limited",remains:Math.max(0,r-e)}}},882366:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createAuditLogDetails=t.validateItemGroupResponse=t.validateProposeSignature=t.isProposeSignatureValid=t.generateProposeSignature=t.isAcceptSignatureValid=t.generateAcceptSignature=void 0;const n=r(493513),o=r(453576),a=r(617509),i=r(670252),s=r(335587),c=r(732663),d=r(947683),u=r(658107),l=r(292210),m=r(416593),p=r(551504),S=r(288205);function g(e,t,r){return new Promise(((o,a)=>{e.symmetricEncryption.signHmacSHA256(t,n.encode(r)).then(o,a)}))}function A(e,t,r,n){return g(e,n,r).then((e=>t===e))}function I(e){return"validProposeSignature"in e}function y(e){const t=I(e)?e.validProposeSignature:"not-found",r=I(e)&&void 0!==e.matchProposeSignature?e.matchProposeSignature:"not-found";return`  Status:${e.status} Permission:${e.permission} ValidProposeSignature:${t} MatchesProposeSignature:${r}`}async function E(e,t,r,n){return await(0,s.asyncMap)(e,(async e=>{const o=t.find((t=>t.userId===e.userId));return{...e,validProposeSignature:await A(r,e.proposeSignature,e.userId,n),matchProposeSignature:o&&e?o.proposeSignature===e.proposeSignature:void 0}}))}t.generateAcceptSignature=function(e,t,r,o){return new Promise(((a,i)=>{e.asymmetricEncryption.sign(t,n.encode(r+"-accepted-"+o)).then(a,i)}))},t.isAcceptSignatureValid=function(e,t,r,n){return new Promise(((o,a)=>{e.asymmetricEncryption.verify(r,t,n).then(o,a)}))},t.generateProposeSignature=g,t.isProposeSignatureValid=A,t.validateProposeSignature=async function(e,t,r,n,o){if(!await t.symmetricEncryption.verifyHmacSHA256(r,n,o)){const t=new Error(`${e}: INVALID_PROPOSE_CREATION Failed to validate newly created propose signature`);throw(0,i.sendExceptionLog)({error:t}),t}},t.validateItemGroupResponse=async function(e,t,r,n,o,a,l,m,p,S=!1){try{const g=await(0,c.asyncFilter)(m,(async e=>!await A(t,e.proposeSignature,e.userId,a))),I=await(0,c.asyncFilter)(r.itemGroups,(async e=>!(await(0,d.validateItemGroup)(e,p,o,n,l)).isValid));if(S?g.length>0:I.length>0||g.length>0){const r=function(e,t,r){return[`${e}: INVALID_PROPOSE_IN_RESPONSE Invalid item group on share`,t.map((e=>`Invalid Uploaded User UsingAlias:${"alias"in e?!!e.proposeSignatureUsingAlias:"updating"} Permission:${e.permission}`)).join("\n"),r.map((e=>[`Invalid ItemGroup ID:${e.groupId} Revision:${e.revision} TeamID:${e.teamId} MatchItemGroupKey:${e.matchItemGroupKey}`,"Invalid ItemGroup Users:",e.users.map(y).join("\n")].join("\n"))).join("\n")].join("\n")}(e,g,await(0,s.asyncMap)(I,(async e=>({...e,users:await E(e.users,m,t,a),matchItemGroupKey:a===await(0,u.getItemGroupKey)(e,p,o,l)}))));await(0,i.sendExceptionLog)({error:new Error(r)})}}catch(e){e.message=`[validateItemGroupResponse]: ERROR_VALIDATING_PROPOSE_IN_RESPONSE Error validating item group response ${e.message}`,await(0,i.sendExceptionLog)({error:e})}},t.createAuditLogDetails=function(e,t){const r=(0,m.activeSpacesSelector)(e)[0],n=(0,S.hasFeatureSelector)(e,"audit_logs_sharing"),i=(0,S.hasFeatureSelector)(e,"send_activity_log"),s=(!!t?.SpaceId&&r?.info?.collectSensitiveDataAuditLogsEnabled)??!1;if(!i||!n||!s)return;const c=e.userSession.personalFeatures.features[p.NEW_URL_PARSER_FF]||e.userSession.personalFeatures.features[p.NEW_URL_PARSER_FF_PROD],d=((0,o.isCredential)(t)&&t?.Url?c?new l.ParsedURL(t?.Url).getHostname():(0,a.extractRootDomain)(t?.Url):"")||"";return{captureLog:s,domain:(0,o.isCredential)(t)?d:void 0,type:(0,o.isCredential)(t)?"AUTHENTIFIANT":"SECURENOTE"}}},183687:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingStatusDetail=t.getSharingStatusItem=t.getNotShared=void 0;const n=r(401067),o=r(859890),a=r(658107),i=r(471646);t.getNotShared=()=>({isShared:!1});const s=(e,t)=>e[t]?"limited":"admin";t.getSharingStatusItem=(0,n.curry)(((e,r,n)=>(0,o.binaryContains)(e,n)?{isShared:!0,permission:s(r,n)}:(0,t.getNotShared)())),t.getSharingStatusDetail=(0,n.curry)(((e,r,n,o)=>{const{itemGroups:c,userGroups:d}=r,u=(0,i.findItemItemGroup)(o,c);if(!u)return(0,t.getNotShared)();const l=(0,a.getRecipientsCount)(r,o);return{groupSharing:(0,a.doesUserReceiveItemGroupViaGroup)(u,d,n),isShared:!0,lastAdmin:(0,a.isUserLastAdmin)(u,n),permission:s(e,o),recipientsCount:l}}))},263623:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.doesUserReceiveItemViaGroup=t.isUserLastAdminOnItem=t.setPendingElementsAsSeen=t.handleSharingResponse=t.handleUpdateSharingPermission=t.handleRevokeSharing=t.handleShareItemRequest=t.emptySessionResponse=t.getFreshUserGroups=t.updateUserGroupMembers=t.getSharedData=t.computeUserGroupMember=t.extractAliasesFromMembers=t.revokeUserGroupMembers=t.inviteUserGroupMembers=t.renameUserGroup=t.deleteUserGroup=t.deleteItemGroup=t.createSpecialItemGroup=t.createSpecialUserGroup=t.createUserGroup=t.buildSharingData=t.mergeSharingData=t.getCleanSharingData=t.getOutdatedSharingParams=void 0;const n=r(401067),o=r(453576),a=r(110203),i=r(684827),s=r(670252),c=r(795623),d=r(144197),u=r(503735),l=r(749551),m=r(319697),p=r(658107),S=r(471646),g=r(155721),A=r(727885);function I(e,{groupId:t,revision:r}){if(!e.privateKey)throw new Error("PRIVATE_KEY_MISSING");if(!t)throw new Error("GROUP_ID_MISSING");if(!r)throw new Error("GROUP_REVISION_MISSING")}function y(e,t){return{itemIds:e.items.filter((({id:e,timestamp:r})=>!t.items.find((t=>t.itemId===e&&t.timestamp>=r)))).map((e=>e.id)),itemGroupIds:e.itemGroups.filter((({id:e,revision:r})=>!t.itemGroups.find((t=>t.groupId===e&&t.revision===r)))).map((e=>e.id)),userGroupIds:e.userGroups.filter((({id:e,revision:r})=>!t.userGroups.find((t=>t.groupId===e&&t.revision===r)))).map((e=>e.id))}}function E(e,t){const{items:r,itemGroups:n,userGroups:o}=e;return{items:t.items.filter((e=>r.find((t=>t.id===e.itemId)))),itemGroups:t.itemGroups.filter((e=>n.find((t=>t.id===e.groupId)))),userGroups:t.userGroups.filter((e=>o.find((t=>t.id===e.groupId))))}}function f(e,t){const r=(e,t,r)=>{const n=t.filter((t=>!e.find((e=>r(e)===r(t)))));return e.map((e=>t.find((t=>r(t)===r(e)))||e)).concat(n)};return{items:r(e.items,t.items,n.prop("itemId")),itemGroups:r(e.itemGroups,t.itemGroups,n.prop("groupId")),userGroups:r(e.userGroups,t.userGroups,n.prop("groupId"))}}t.getOutdatedSharingParams=y,t.getCleanSharingData=E,t.mergeSharingData=f,t.buildSharingData=async function(e,t,r,o,a){const i=E(o,a),s=y(o,i),c=n.unnest(n.values(s));return n.compose(n.equals(0),n.length)(c)?i:f(i,await T(e,t,r,s))};const C=(e,t,r)=>{const n=(0,A.getNodePremiumStatusSpaceData)(r),o=n.spaces.find((t=>Number(t.teamId)===e));if(!o)throw new Error("TEAM_NOT_FOUND");if(!(0,A.hasSpecialUserGroupAccessInSpace)(o.teamId,n))throw new Error("USER_DOES_NOT_HAVE_SPECIAL_USER_GROUP_ACCESS_FOR_TEAM");if(!t.privateKey)throw new Error("PRIVATE_KEY_MISSING")};function v(e,t,r){return(0,s.sendExceptionLog)({error:t}),c.Debugger.log(e,t),Promise.resolve({userGroups:[],error:{message:t.message,action:r}})}function h(e){return JSON.stringify(e.map((e=>e.Alias)))}function N(e,t){return e.map((e=>{if(!t[e.Alias])throw new Error(`User details not found for alias: ${e.Alias}`);return{Alias:e.Alias,Login:t[e.Alias].login,PublicKey:t[e.Alias].publicKey,Permission:e.Permission}}))}async function T(e,t,r,n){if(!(n.itemIds||n.itemGroupIds||n.userGroupIds))throw new Error("MISSING_PARAMETERS");const o={...n,type:"getSharing",sharingVersion:4},{itemErrors:a,items:i,itemGroupErrors:s,itemGroups:c,userGroupErrors:d,userGroups:u}=await e.sharing.get(t,r,o);if(a&&a.length)throw new Error(a[0].message);if(s&&s.length)throw new Error(s[0].message);if(d&&d.length)throw new Error(d[0].message);return{items:i,itemGroups:c,userGroups:u}}t.createUserGroup=function(e,t,r,n){return Promise.resolve().then((()=>(C(n.teamId,t,e.store),e.userGroup.makeUserGroupAdminItem().then((o=>Promise.all([e.userGroup.makeCreateUserGroupEvent(t,r,n,o),Promise.resolve(o)])))))).then((([o,a])=>e.userGroup.createUserGroup(t,r.teams[n.teamId],o).then((({userGroups:e,itemGroups:t})=>({userGroups:e,userGroupAdminItem:a,itemGroups:t}))))).catch((e=>v("Error while creating userGroup ",e,n)))},t.createSpecialUserGroup=function(e,t,r,n){const a={teamId:n,name:"_team_admin_user_group"};return Promise.resolve().then((()=>{C(n,t,e.store);const a=r.spaces.find((e=>Number(e.teamId)===n)).details.teamAdmins.map((e=>({Alias:e.login,Login:e.login,Permission:"admin",Status:e.login===t.login?o.SpaceStatus.Accepted:o.SpaceStatus.Pending}))),i=h(a);return e.userGroup.findExistingUsersByAliases({login:t.login,uki:t.uki,aliases:i}).then((e=>({findUserServiceResponse:e,members:a})))})).then((({findUserServiceResponse:r,members:n})=>{const o=N(n,r);return e.userGroup.makeCreateSpecialUserGroupEvent(t,a,o)})).then((r=>e.userGroup.createUserGroup(t,{teamId:String(n)},r))).then((({userGroups:e})=>e&&e.length&&e[0]))},t.createSpecialItemGroup=function(e,t,r,n){return Promise.resolve().then((()=>(C(r.teamId,t,e.store),e.itemGroup.makeCreateSpecialItemGroupEvent(t,r,n)))).then((r=>e.itemGroup.createSpecialItemGroup(t,r)))},t.deleteItemGroup=function(e,t,{groupId:r,revision:n}){return Promise.resolve().then((()=>(I(t,{groupId:r,revision:n}),e.itemGroup.makeDeleteItemGroupEvent(r,n).then((r=>e.itemGroup.deleteItemGroup(t,r)))))).catch((e=>(v("Error while deleting itemGroup ",e,{groupId:r,revision:n}),[])))},t.deleteUserGroup=function(e,t,r,n){const o=(0,d.findTeamForGroup)(r,n.groupId);return Promise.resolve().then((()=>{I(t,n);const{groupId:r,revision:a}=n,i=(o&&o.userGroupAdminItems||[]).find((e=>e.groupId===n.groupId)),s=o.specialItemGroup&&o.specialItemGroup.revision;return e.userGroup.makeDeleteUserGroupEvent(r,a,i.itemId,s)})).then((r=>e.userGroup.deleteUserGroup(t,o,r))).catch((e=>v("Error while deleting userGroup ",e,n)))},t.renameUserGroup=function(e,t,r){return Promise.resolve().then((()=>{I(t,r);const{groupId:n,revision:o,name:a}=r;return e.userGroup.makeRenameUserGroupEvent(n,o,a).then((r=>e.userGroup.renameUserGroup(t,r)))})).catch((e=>v("Error while renaming userGroup ",e,r)))},t.inviteUserGroupMembers=function(e,t,r,n,o){return Promise.resolve().then((()=>{if(I(t,n),0===n.users.length)throw new Error("USERS_NOT_SUPPLIED");const{login:a,uki:i}=t,s=JSON.stringify(n.users.map((e=>e.alias)));return e.userGroup.findUsersByAliases({login:a,uki:i,aliases:s}).then((a=>{const i=n.users.map((e=>{const t={Alias:e.alias,Permission:e.permission},r=a[e.alias];if(!r)return t;const{login:n,publicKey:o}=r;return n&&o?{...t,Login:n,PublicKey:o}:t})),{revision:s}=n,c=(0,d.getUserGroupAdminItem)(r,o.teamId.toString(),o.groupId);if(!c)throw new Error("USER_GROUP_ADMIN_ITEM_NOT_AVAILABLE");return e.userGroup.makeInviteMembersEventAsAdmin(c,s,t,i)})).then((r=>e.userGroup.inviteUserGroupMembers(t,r)))})).catch((e=>v("Error while inviteUserGroupMembers",new Error(`[SharingController] - inviteUserGroupMembers: ${e}`),n))).then((e=>Object.assign({refusedMembers:{}},e)))},t.revokeUserGroupMembers=async function(e,t,r){try{if(I(t,r),0===r.users.length)throw new Error("USERS_NOT_SUPPLIED");const{groupId:n,revision:o,users:a}=r,i=await e.userGroup.makeRevokeMembersEvent(n,o,a),{userGroups:s}=await e.userGroup.revokeUserGroupMembers(t,i);return{userGroups:s}}catch(e){return v("Error while revokeUserGroupMembers",e,r)}},t.extractAliasesFromMembers=h,t.computeUserGroupMember=N,t.getSharedData=T,t.updateUserGroupMembers=async function(e,t,r){if(I(t,r),0===r.users.length)throw new Error("USERS_NOT_SUPPLIED");const{login:n,uki:o}=t,{groupId:a,revision:i,users:s}=r,c=JSON.stringify(s.map((e=>e.alias))),d=await e.userGroup.findExistingUsersByAliases({login:n,uki:o,aliases:c}),u=s.map((e=>({Alias:e.alias,Login:d[e.alias].login,PublicKey:d[e.alias].publicKey,Permission:e.permission}))),l=await e.userGroup.makeUpdateMembersEvent(a,i,u),{userGroups:m}=await e.userGroup.updateUserGroupMembers(t,l);return{userGroups:m}},t.getFreshUserGroups=function(e,t,r){const{login:n,uki:o}=t;return T(e,n,o,{itemIds:[],itemGroupIds:[],userGroupIds:r.map((e=>e.groupId))}).then((e=>e.userGroups))},t.emptySessionResponse=function(e){return Promise.reject({error:{message:"SESSION_EMPTY",action:e}})},t.handleShareItemRequest=async function e(t,r,n,i,d,m,p=!0){const{ITEM_DOESNT_EXIST:S,LIMIT_EXCEEDED:A,ITEM_HAS_ATTACHMENTS:I,SHARING_FAILED:y}=o.ShareItemFailureReason;await r.getInstance().user.requestNewSync(a.Trigger.Sharing);const E=t.getPersonalData(),f=(0,l.findDataModelObject)(i,E.credentials),C=E.notes.find((e=>e.Id===i)),v=f||C;if(!v)return{success:!1,reason:S};const h=t.getSharingData().itemGroups.find((e=>e&&e.items&&!!e.items.find((e=>e.itemId===i)))),N=t.getState();if(!(0,g.isAllowedToShareSelector)(N))return{success:!1,reason:A};if(v.Attachments&&v.Attachments.length>0)return{success:!1,reason:I};try{h?await(0,u.shareAlreadySharedItem)(t,n,h,d,m):await(0,u.shareUnsharedItem)(t,n,v,d,m)}catch(o){if(!p||!G(o)){const e=new Error(`[SharingController] - handleShareItemRequest: ${o}`);return c.Debugger.log("ERROR",e),(0,s.sendExceptionLog)({error:e}),{success:!1,reason:y,message:`${e}`}}try{return await r.getInstance().user.requestNewSync(a.Trigger.Sharing),e(t,r,n,i,d,m,!1)}catch(e){const t=new Error(`[SharingController] - handleShareItemRequest (syncAndRetryOnConflict): ${e}`);return c.Debugger.log("ERROR",t),(0,s.sendExceptionLog)({error:t}),{success:!1,reason:y,message:`${t}`}}}return r.getInstance().user.requestNewSync(a.Trigger.Sharing),{success:!0}};const G=e=>{const t="INVALID_ITEM_GROUP_REVISION";return"getAdditionalInfo"in e&&e.getAdditionalInfo().webServiceSubMessage===t||e.message.includes(t)};t.handleRevokeSharing=async function e(t,r,n,i,c,d=!0){const{NOT_FOUND:l,FORBIDDEN:m,REVOKE_FAILED:p}=o.RevokeSharingFailureReason,S="[SharingController] - handleRevokeSharing",{itemGroups:g,userGroups:A}=t.getSharingData(),I=g.find((e=>e&&e.groupId===i));if(!I)return{success:!1,reason:l,message:"This itemGroup couldn't be found."};const y=t.getUserLogin();if(!(0,u.isUserItemGroupAdmin)(I,A,y))return{success:!1,reason:m,message:"Only an admin can perform this operation."};try{await(0,u.revokeItemGroupMember)(t,n,I,c)}catch(o){if(d&&G(o))try{return await r.getInstance().user.requestNewSync(a.Trigger.Sharing),e(t,r,n,i,c,!1)}catch(e){const t=new Error(`${S} (syncAndRetryOnConflict): ${e}`);return(0,s.sendExceptionLog)({error:t}),{success:!1,reason:p,message:`${t}`}}const u=new Error(`${S}: ${o}`);return(0,s.sendExceptionLog)({error:u}),{success:!1,reason:p,message:`${u}`}}return r.getInstance().user.requestNewSync(a.Trigger.Sharing),{success:!0}},t.handleUpdateSharingPermission=async function e(t,r,n,i,c,d,l=!0){const{NOT_FOUND:m,FORBIDDEN:p,UPDATE_FAILED:S}=o.UpdateSharingPermissionFailureReason,g="[SharingController] - handleUpdateSharingPermission",{itemGroups:A,userGroups:I}=t.getSharingData(),y=A.find((e=>e&&e.groupId===i));if(!y)return{success:!1,reason:m,message:"This itemGroup couldn't be found."};const E=t.getUserLogin();if(!(0,u.isUserItemGroupAdmin)(y,I,E))return{success:!1,reason:p,message:"Only an admin can perform this operation."};try{await(0,u.updateSharingPermission)(t,n,y,c,d)}catch(o){if(l&&G(o))try{return await r.getInstance().user.requestNewSync(a.Trigger.Sharing),e(t,r,n,i,c,d,!1)}catch(e){const t=new Error(`${g} (syncAndRetryOnConflict): ${e}`);return(0,s.sendExceptionLog)({error:t}),{success:!1,reason:S,message:`${t}`}}const u=new Error(`${g}: ${o}`);return(0,s.sendExceptionLog)({error:u}),{success:!1,reason:S,message:`${u}`}}return r.getInstance().user.requestNewSync(a.Trigger.Sharing),{success:!0}},t.handleSharingResponse=async function(e,t,r){const{itemGroups:n,status:o,userGroups:i}=r,s={successes:[],failures:[]},c=i.length>0?await(0,u.handlePendingUserGroupsResponse)(e,i,o):s,d=n.length>0?await(0,u.handlePendingItemGroupsResponse)(e,n,o):s;(0,m.default)().sendSharingResponseResult({status:o,itemGroups:d,userGroups:c}),t.getInstance().user.requestNewSync(a.Trigger.Sharing)},t.setPendingElementsAsSeen=function(e,t,r){const n=(0,i.setElementsAsSeenAction)(r.pendingItemGroupIds,r.pendingUserGroupIds);e.dispatch(n);const{sharingSync:o}=e.getState().userSession;t.getInstance().storeSharingSync(o)},t.isUserLastAdminOnItem=function(e,t){const r=e.getUserLogin(),{itemGroups:n}=e.getSharingData(),o=(0,S.findItemItemGroup)(t,n);return!!o&&(0,p.isUserLastAdmin)(o,r)},t.doesUserReceiveItemViaGroup=function(e,t){const r=e.getUserLogin(),{itemGroups:n,userGroups:o}=e.getSharingData(),a=(0,S.findItemItemGroup)(t,n);return!!a&&(0,p.doesUserReceiveItemGroupViaGroup)(a,o,r)}},122652:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(848584),o=r(228183);t.config={commands:{},queries:{getSharingUsers:{selector:n.viewedSharingUsersSelector},getSharingUserPermissionLevel:{selector:n.sharingUserPermissionLevelSelector}},liveQueries:{liveSharingUsers:{operator:o.sharingUsers$},liveSharingUserPermissionLevel:{operator:o.sharingUserPermissionLevel$}}}},672658:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(226710),t)},228183:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingUserPermissionLevel$=t.sharingUsers$=void 0;const n=r(518948),o=r(903343),a=r(848584),i=r(735893),s=r(433627);t.sharingUsers$=e=>{const t=(0,i.parseToken)(e),r=(0,a.createLiveSharingUsersSelector)(t.spaceId)(t.dataQuery);return(0,n.pipe)((0,o.map)(r),(0,o.distinctUntilChanged)(((e,t)=>(0,s.sameBatch)(e.items,t.items)&&e.matchingCount===t.matchingCount)))},t.sharingUserPermissionLevel$=e=>{const t=(0,a.getSharingUserPermissionLevelSelector)((0,i.parseToken)(e));return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},807261:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingUserMappers=void 0,t.getSharingUserMappers=()=>({id:e=>e.userId,itemCount:e=>e.itemCount})},570963:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingUserMatch=t.searchGetters=void 0;const n=r(382234),o=r(64455);t.searchGetters=[(0,n.stringProp)("userId")],t.sharingUserMatch=(0,o.match)(t.searchGetters)},848584:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingUserPermissionLevelSelector=t.sharingUserPermissionLevelSelector=t.createLiveSharingUsersSelector=t.viewedSharingUsersSelector=t.sharingUserMappersSelector=void 0;const n=r(401067),o=r(432034),a=r(563566),i=r(324589),s=r(497006),c=r(416593),d=r(807261),u=r(963925),l=r(570963),m=r(658107),p=r(589698),S=r(684511),g=e=>(0,o.createSelector)(p.acceptedItemGroupsSelector,c.userIdSelector,(e=>e),((t,r,n)=>(0,m.getSharingUsersFromItemGroups)(n,r,t,e)));t.sharingUserMappersSelector=()=>(0,d.getSharingUserMappers)();const A=()=>l.sharingUserMatch;t.viewedSharingUsersSelector=(e,r)=>{const o=(e=>{const r=g(e);return(0,i.getQuerySelector)(r,A,t.sharingUserMappersSelector)})(r.spaceId);return(0,n.compose)((0,a.viewListResults)(u.listView),o)(e,r.dataQuery)},t.createLiveSharingUsersSelector=e=>{const r=g(e);return(0,s.makeLiveSelectorGetter)(r,(()=>u.listView),A,t.sharingUserMappersSelector)},t.sharingUserPermissionLevelSelector=(e,{itemId:t,userId:r})=>{const n=(0,S.itemItemGroupSelector)(e,t);if(n)return(0,m.getSharingUserPermission)(n,r)},t.getSharingUserPermissionLevelSelector=({itemId:e,userId:r})=>n=>(0,t.sharingUserPermissionLevelSelector)(n,{itemId:e,userId:r})},226710:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},963925:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const n=(0,r(401067).defaultTo)("");t.detailView=e=>({id:n(e.userId),itemCount:e.itemCount}),t.listView=e=>e.map(t.detailView)},423944:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(496247),o=r(279570),a=r(701190);t.config={commands:{},queries:{getUserGroups:{selector:n.viewedUserGroupsSelector},getUserGroup:{selector:n.viewedUserGroupSelector},getUserGroupPermissionLevel:{selector:n.userGroupPermissionLevelSelector},getUserGroupMembers:{selector:a.viewedUserGroupMembersSelector}},liveQueries:{liveUserGroups:{operator:o.userGroups$},liveUserGroupPermissionLevel:{operator:o.userGroupPermissionLevel$}}}},845923:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(769550),t)},400779:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserDownloadMappers=void 0,t.getUserDownloadMappers=()=>({id:e=>e.userId})},979850:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userDownloadMatch=t.searchGetters=void 0;const n=r(382234),o=r(64455);t.searchGetters=[(0,n.stringProp)("userId")],t.userDownloadMatch=(0,o.match)(t.searchGetters)},701190:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.viewedUserGroupMembersSelector=t.userDownloadMappersSelector=t.getUserGroupSelector=t.activeUserGroupsSelector=void 0;const n=r(432034),o=r(401067),a=r(324589),i=r(400779),s=r(979850),c=r(563566),d=r(399729),u=r(352102),l=r(416593),m=r(658107);t.activeUserGroupsSelector=(0,n.createSelector)(u.sharingDataSelector,l.userIdSelector,((e,t)=>{const{userGroups:r}=e;return(0,m.findMyAcceptedUserGroups)(r,t)})),t.getUserGroupSelector=e=>(0,n.createSelector)(t.activeUserGroupsSelector,(t=>(0,m.findUserGroup)(t,e))),t.userDownloadMappersSelector=()=>(0,i.getUserDownloadMappers)();const p=()=>s.userDownloadMatch,S=e=>{const r=(e=>{const r=(0,t.getUserGroupSelector)(e);return(0,n.createSelector)(r,(e=>e?.users||[]))})(e);return(0,a.getQuerySelector)(r,p,t.userDownloadMappersSelector)};t.viewedUserGroupMembersSelector=(e,t)=>{const r=S(t.groupId);return(0,o.compose)((0,c.viewListResults)(d.listView),r)(e,t.dataQuery)}},399729:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const n=(0,r(401067).defaultTo)("");t.detailView=e=>({id:n(e.userId),permission:e.permission}),t.listView=e=>e.map(t.detailView)},279570:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userGroupPermissionLevel$=t.userGroups$=void 0;const n=r(518948),o=r(903343),a=r(735893),i=r(496247),s=r(433627);t.userGroups$=e=>{const t=(0,a.parseToken)(e),r=(0,i.createLiveUserGroupsSelector)(t.spaceId)(t.dataQuery);return(0,n.pipe)((0,o.map)(r),(0,o.distinctUntilChanged)(((e,t)=>(0,s.sameBatch)(e.items,t.items)&&e.matchingCount===t.matchingCount)))},t.userGroupPermissionLevel$=e=>{const t=(0,i.getUserGroupPermissionLevelSelector)((0,a.parseToken)(e));return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},395414:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupMappers=void 0,t.getUserGroupMappers=()=>({name:e=>e.name,id:e=>e.groupId,itemCount:e=>e.itemCount})},510547:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userGroupMatch=t.searchGetters=void 0;const n=r(382234),o=r(64455);t.searchGetters=[(0,n.stringProp)("name")],t.userGroupMatch=(0,o.match)(t.searchGetters)},496247:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupPermissionLevelSelector=t.userGroupPermissionLevelSelector=t.viewedUserGroupSelector=t.createLiveUserGroupsSelector=t.viewedUserGroupsSelector=t.userGroupMappersSelector=t.createActiveUserGroupsSelector=void 0;const n=r(401067),o=r(432034),a=r(563566),i=r(324589),s=r(497006),c=r(416593),d=r(510547),u=r(395414),l=r(354719),m=r(352102),p=r(658107),S=r(684511);t.createActiveUserGroupsSelector=e=>(0,o.createSelector)(m.sharingDataSelector,c.userIdSelector,(e=>e),((t,r,n)=>{const{userGroups:o,itemGroups:a}=t;return(0,p.findMyAcceptedUserGroups)(o,r).map((t=>{const r=(0,p.findUserGroupItemGroups)(t.groupId,a).reduce(((t,r)=>null===e||(0,p.doesItemGroupExistInSpace)(n,r,e)?t+r.items.length:t),0);return{...t,itemCount:r}}))})),t.userGroupMappersSelector=()=>(0,u.getUserGroupMappers)();const g=()=>d.userGroupMatch;t.viewedUserGroupsSelector=(e,r)=>{const o=(e=>{const r=(0,t.createActiveUserGroupsSelector)(e);return(0,i.getQuerySelector)(r,g,t.userGroupMappersSelector)})(r.spaceId);return(0,n.compose)((0,a.viewListResults)(l.listView),o)(e,r.dataQuery)},t.createLiveUserGroupsSelector=e=>{const r=(0,t.createActiveUserGroupsSelector)(e);return(0,s.makeLiveSelectorGetter)(r,(()=>l.listView),g,t.userGroupMappersSelector)},t.viewedUserGroupSelector=(e,r)=>{const{itemGroups:n}=(0,m.sharingDataSelector)(e),o=(0,t.createActiveUserGroupsSelector)(null)(e),a=(0,p.findUserGroup)(o,r),i=(0,p.findUserGroupItemGroups)(a.groupId,n).length;if(a)return(0,l.detailView)({...a,itemCount:i})},t.userGroupPermissionLevelSelector=(e,{itemId:t,groupId:r})=>{const n=(0,S.itemItemGroupSelector)(e,t);return(0,p.getUserGroupPermission)(n,r)},t.getUserGroupPermissionLevelSelector=({itemId:e,groupId:r})=>n=>(0,t.userGroupPermissionLevelSelector)(n,{itemId:e,groupId:r})},769550:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},354719:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const n=r(401067),o=r(399729),a=(0,n.defaultTo)("");t.detailView=e=>({name:a(e.name),id:a(e.groupId),users:(0,o.listView)(e.users||[]),itemCount:e.itemCount}),t.listView=e=>e.map(t.detailView)},386833:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(236768);t.bootstrap=e=>{e.register(n.config)}},595326:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shareItem=t.ShareItemErrorCode=void 0;const n=r(670252),o=r(263623);var a;!function(e){e.NOT_AUTHENTICATED="NOT_AUTHENTICATED"}(a=t.ShareItemErrorCode||(t.ShareItemErrorCode={})),t.shareItem=async function(e,t){const{sessionService:r,storeService:i,wsService:s}=e;if(!i.isAuthenticated())return{success:!1,error:{code:a.NOT_AUTHENTICATED}};try{const{itemId:e,permission:n,recipients:a}=t;return await(0,o.handleShareItemRequest)(i,r,s,e,n,a)}catch(e){const t=`[SessionController] - shareItem: ${e}`,r=new Error(t);return(0,n.sendExceptionLog)({error:r}),{success:!1,error:{code:t}}}}},133719:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.setupSubscriptions=void 0;const n=r(253858);Object.defineProperty(t,"setupSubscriptions",{enumerable:!0,get:function(){return n.setupSubscriptions}});var o=r(386833);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},253858:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(736513),o=r(736884),a=r(478096);t.setupSubscriptions=async function(e,t){const{sessionService:r,storeService:i,wsService:s}=t,c=(0,n.makeCryptoService)(),d=(0,o.makeItemGroupService)(s,c);e.teamSpaceContentControlDone.on((e=>{(0,a.revokeRemoteControlledSharedItems)(r,i,s,d,e)}))}},383400:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(985406),o=r(139003),a=r(498337);t.config={commands:{},queries:{getBanks:{staticDataHandler:n.getBanks},getAllBanks:{staticDataHandler:n.getAllBanks},getAllCallingCodes:{staticDataHandler:o.getAllCallingCodes},getSecureDocumentsExtensionsList:{staticDataHandler:a.getSecureDocumentsAllowedExtensions}},liveQueries:{}}},235240:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},782912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.banks=void 0;const n=r(453576);t.banks={[n.Country.AR]:[{localizedString:"Banco Credicoop",code:"BANCOCREDICOOP"},{localizedString:"Banco de la Nacin Argentina",code:"BANCODELANACIONARGEN"},{localizedString:"Banco Hipotecario",code:"BANCOHIPOTECARIO"},{localizedString:"Banco Ita Argentina",code:"BANCOITAUARGENTINA"},{localizedString:"Banco Macro",code:"BANCOMACRO"},{localizedString:"Banco Patagonia",code:"BANCOPATAGONIA"},{localizedString:"Banco Santander Ro",code:"BANCOSANTANDERRIO"},{localizedString:"Bank of the City of Buenos Aires",code:"BANKOFTHECITYOFBUENO"},{localizedString:"Bank of the Province of Buenos Aires",code:"BANKOFTHEPROVINCEOFB"},{localizedString:"BBVA Banco Francs",code:"BBVABANCOFRANCES"},{localizedString:"Central Bank of Argentina",code:"CENTRALBANKOFARGENTI"},{localizedString:"Citibank Argentina",code:"CITIBANKARGENTINA"},{localizedString:"Grupo Financiero Galicia",code:"GRUPOFINANCIEROGALIC"},{localizedString:"HSBC Bank Argentina",code:"HSBCBANKARGENTINA"},{localizedString:"Municipal Bank of Rosario",code:"MUNICIPALBANKOFROSAR"},{localizedString:"New Bank of Santa Fe",code:"NEWBANKOFSANTAFE"},{localizedString:"Other",code:"NO_TYPE"}],[n.Country.AT]:[{localizedString:"Adria Bank",code:"ADRIABANK"},{localizedString:"Allianz Investmentbank",code:"ALLIANZINVESTMENTBAN"},{localizedString:"Alpenbank",code:"ALPENBANK"},{localizedString:"American Express Bank Ltd",code:"AMERICANEXPRESSBANKL"},{localizedString:"Anglo Irish Bank",code:"ANGLOIRISHBANK"},{localizedString:"Austria Wirtschaftsservice Gesellschaft",code:"AUSTRIAWIRTSCHAFTSSE"},{localizedString:"Banco do Brasil",code:"BANCODOBRASIL"},{localizedString:"Bank Austria Creditanstalt",code:"BANKAUSTRIACREDITANS"},{localizedString:"Bank fr rzte und Freie Berufe",code:"BANKFURARZTEUNDFREIE"},{localizedString:"Bank fr Tirol und Vorarlberg",code:"BANKFURTIROLUNDVORAR"},{localizedString:"Bank Gutmann",code:"BANKGUTMANN"},{localizedString:"Bankhaus Carl Spngler & Co",code:"BANKHAUSCARLSPANGLER"},{localizedString:"Bankhaus Krentschker & Co",code:"BANKHAUSKRENTSCHKERC"},{localizedString:"Bankhaus Schelhammer & Schattera",code:"BANKHAUSSCHELHAMMERS"},{localizedString:"Bank Sal.Oppenheim jr. & Cie",code:"BANKSALOPPENHEIMJRCI"},{localizedString:"Bank Vontobel sterreich",code:"BANKVONTOBELOSTERREI"},{localizedString:"Bank Winter & Co",code:"BANKWINTERCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Raiffeisen Bank",code:"RAIFFEISENBANK"}],[n.Country.AU]:[{localizedString:"AMP Bank Limited",code:"AMPBANKLIMITED"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Auswide Bank",code:"AUSWIDEBANK"},{localizedString:"Bank Australia",code:"BANKAUSTRALIA"},{localizedString:"Bank of Melbourne",code:"BANKOFMELBOURNE"},{localizedString:"Bank of Queensland Limited",code:"BANKOFQUEENSLANDLIMI"},{localizedString:"Bank of Sydney",code:"BANKOFSYDNEY"},{localizedString:"Bank of Western Australia",code:"BANKOFWESTERNAUSTRAL"},{localizedString:"Bank SA",code:"BANKSA"},{localizedString:"BankVic",code:"BANKVIC"},{localizedString:"Bendigo and Adelaide Bank Limited",code:"BENDIGOANDADELAIDEBA"},{localizedString:"Beyond Bank Australia",code:"BEYONDBANKAUSTRALIA"},{localizedString:"Commonwealth Bank of Australia",code:"COMMONWEALTHBANKOFAU"},{localizedString:"Corporation (Australia) Limited",code:"CORPORATIONAUSTRALIA"},{localizedString:"Defence Bank",code:"DEFENCEBANK"},{localizedString:"Delphi Bank",code:"DELPHIBANK"},{localizedString:"G&C Mutual Bank",code:"GCMUTUALBANK"},{localizedString:"Heritage Bank",code:"HERITAGEBANK"},{localizedString:"Hume Bank",code:"HUMEBANK"},{localizedString:"IMB Bank",code:"IMBBANK"},{localizedString:"Macquarie Bank Limited",code:"MACQUARIEBANKLIMITED"},{localizedString:"Members Equity Bank Pty Limited",code:"MEMBERSEQUITYBANKPTY"},{localizedString:"MyState Bank",code:"MYSTATEBANK"},{localizedString:"National Australia Bank Limited",code:"NATIONALAUSTRALIABAN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"P&N Bank",code:"PNBANK"},{localizedString:"Police Bank",code:"POLICEBANK"},{localizedString:"Queensland Teachers Mutual Bank (QTMB)",code:"QUEENSLANDTEACHERSMU"},{localizedString:"Rural Bank Limited",code:"RURALBANKLIMITED"},{localizedString:"St. George Bank Limited,",code:"STGEORGEBANKLIMITED"},{localizedString:"Suncorp-Metway Limited",code:"SUNCORPMETWAYLIMITED"},{localizedString:"Teachers Mutual Bank Limited",code:"TEACHERSMUTUALBANKLI"},{localizedString:"UBank, a division of National Australia Bank",code:"UBANKADIVISIONOFNATI"},{localizedString:"Victoria Teachers Mutual Bank",code:"VICTORIATEACHERSMUTU"},{localizedString:"Westpac Banking Corporation",code:"WESTPACBANKINGCORPOR"}],[n.Country.BE]:[{localizedString:"Argenta",code:"ARGENTA"},{localizedString:"Attijariwafa Bank Europe Belgium",code:"ATTIJARIWAFABANKEURO"},{localizedString:"AXA Bank",code:"AXABANK"},{localizedString:"Banca Monte Paschi Belgio",code:"BANCAMONTEPASCHIBELG"},{localizedString:"BBVA Blgica",code:"BBVABELGICA"},{localizedString:"Belfius Banque",code:"BELFIUSBANQUE"},{localizedString:"Beobank",code:"BEOBANK"},{localizedString:"BKCP Banque",code:"BKCPBANQUE"},{localizedString:"BNP Paribas Fortis",code:"BNPPARIBASFORTIS"},{localizedString:"bpost bank",code:"BPOSTBANK"},{localizedString:"Crelan",code:"CRELAN"},{localizedString:"Europabank",code:"EUROPABANK"},{localizedString:"Hello Bank!",code:"HELLOBANK"},{localizedString:"ING Belgium",code:"INGBELGIUM"},{localizedString:"KBC Bank",code:"KBCBANK"},{localizedString:"Keytrade Bank",code:"KEYTRADEBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank.be",code:"RABOBANKBE"},{localizedString:"Record Bank",code:"RECORDBANK"},{localizedString:"Santander Consumer Finance",code:"SANTANDERCONSUMERFIN"},{localizedString:"Triodos Bank Banque Triodos",code:"TRIODOSBANKBANQUETRI"},{localizedString:"VDK Spaarbank NV",code:"VDKSPAARBANKNV"}],[n.Country.BR]:[{localizedString:"Banco Bradesco Financiamentos",code:"BANCOBRADESCOFINANCI"},{localizedString:"Banco do Brasil",code:"BANCODOBRASIL"},{localizedString:"Banco do Estado do Rio Grande do Sul S/A",code:"BANCODOESTADODORIOGR"},{localizedString:"Banco Ita",code:"BANCOITAU"},{localizedString:"Banco J Safra S/A",code:"BANCOJSAFRASA"},{localizedString:"Banco PanAmericano S/A",code:"BANCOPANAMERICANOSA"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"Caixa Econmica Federal",code:"CAIXAECONOMICAFEDERA"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Other",code:"NO_TYPE"}],[n.Country.CA]:[{localizedString:"B2B Bank",code:"B2BBANK"},{localizedString:"Bank of Montreal",code:"BANKOFMONTREAL"},{localizedString:"Bank of Nova Scotia",code:"BANKOFNOVASCOTIA"},{localizedString:"Bridgewater Bank",code:"BRIDGEWATERBANK"},{localizedString:"Canadian Imperial Bank of Commerce",code:"CANADIANIMPERIALBANK"},{localizedString:"Canadian Tire Bank",code:"CANADIANTIREBANK"},{localizedString:"Canadian Western Bank",code:"CANADIANWESTERNBANK"},{localizedString:"CFF Bank",code:"CFFBANK"},{localizedString:"Citizens Bank of Canada",code:"CITIZENSBANKOFCANADA"},{localizedString:"Continental Bank of Canada",code:"CONTINENTALBANKOFCAN"},{localizedString:"CS Alterna Bank",code:"CSALTERNABANK"},{localizedString:"DirectCash Bank",code:"DIRECTCASHBANK"},{localizedString:"Equitable Bank",code:"EQUITABLEBANK"},{localizedString:"First Nations Bank of Canada",code:"FIRSTNATIONSBANKOFCA"},{localizedString:"General Bank of Canada",code:"GENERALBANKOFCANADA"},{localizedString:"Hollis Canadian Bank",code:"HOLLISCANADIANBANK"},{localizedString:"HomEquity Bank",code:"HOMEQUITYBANK"},{localizedString:"Laurentian Bank of Canada",code:"LAURENTIANBANKOFCANA"},{localizedString:"Manulife Bank of Canada",code:"MANULIFEBANKOFCANADA"},{localizedString:"National Bank of Canada",code:"NATIONALBANKOFCANADA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pacific & Western Bank of Canada",code:"PACIFICWESTERNBANKOF"},{localizedString:"President's Choice Bank",code:"PRESIDENTSCHOICEBANK"},{localizedString:"RedBrick Bank",code:"REDBRICKBANK"},{localizedString:"Rogers Bank",code:"ROGERSBANK"},{localizedString:"Royal Bank of Canada",code:"ROYALBANKOFCANADA"},{localizedString:"Tangerine Bank",code:"TANGERINEBANK"},{localizedString:"Toronto-Dominion Bank",code:"TORONTODOMINIONBANK"},{localizedString:"Wealth One Bank of Canada",code:"WEALTHONEBANKOFCANAD"},{localizedString:"Zag Bank",code:"ZAGBANK"}],[n.Country.CH]:[{localizedString:"AIG Private Bank",code:"AIGPRIVATEBANK"},{localizedString:"Amtsersparniskasse Thun",code:"AMTSERSPARNISKASSETH"},{localizedString:"Anker Bank",code:"ANKERBANK"},{localizedString:"Arab Bank Switzerland",code:"ARABBANKSWITZERLAND"},{localizedString:"Banca dello Stato del Cantone Ticino",code:"BANCADELLOSTATODELCA"},{localizedString:"Bank Ehinger",code:"BANKEHINGER"},{localizedString:"Bank for International Settlements (BIS)",code:"BANKFORINTERNATIONAL"},{localizedString:"Bank Leu",code:"BANKLEU"},{localizedString:"Bankredit - Banca di Credito e Commercio",code:"BANKREDITBANCADICRED"},{localizedString:"Bank von Ernst",code:"BANKVONERNST"},{localizedString:"Banque Cantonale Vaudoise (BCV)",code:"BANQUECANTONALEVAUDO"},{localizedString:"Banque Diamantaire Anversoise",code:"BANQUEDIAMANTAIREANV"},{localizedString:"Banque Edouard Constant",code:"BANQUEEDOUARDCONSTAN"},{localizedString:"Banque Nationale Suisse - Banca Nazionale Svizzera",code:"BANQUENATIONALESUISS"},{localizedString:"Banque Piguet & Cie S.A.",code:"BANQUEPIGUETCIESA"},{localizedString:"Banque SCS Alliance",code:"BANQUESCSALLIANCE"},{localizedString:"BEKBnet/BCBE",code:"BEKBNETBCBE"},{localizedString:"BHE - Bank fr Handel & Effekten",code:"BHEBANKFURHANDELEFFE"},{localizedString:"BNP - Banque Nationale de Paris",code:"BNPBANQUENATIONALEDE"},{localizedString:"BSI - Banca della Svizzera Italiana",code:"BSIBANCADELLASVIZZER"},{localizedString:"Clariden Bank",code:"CLARIDENBANK"},{localizedString:"Crdit Lyonnais Suisse",code:"CREDITLYONNAISSUISSE"},{localizedString:"Credit Suisse",code:"CREDITSUISSE"},{localizedString:"Discount Bank Group (DBTC/DBSA)",code:"DISCOUNTBANKGROUPDBT"},{localizedString:"Habib Bank AG Zrich",code:"HABIBBANKAGZURICH"},{localizedString:"Hottinger & Cie",code:"HOTTINGERCIE"},{localizedString:"Maerki, Baumann & Co. AG, Privatbank",code:"MAERKIBAUMANNCOAGPRI"},{localizedString:"Migrosbank",code:"MIGROSBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pictet & Cie",code:"PICTETCIE"},{localizedString:"Raiffeisen Internet",code:"RAIFFEISENINTERNET"},{localizedString:"Royal Bank of Canada",code:"ROYALBANKOFCANADA"},{localizedString:"SBC Warburg Dillon Read (WDR)",code:"SBCWARBURGDILLONREAD"},{localizedString:"Schwyzer Kantonalbank",code:"SCHWYZERKANTONALBANK"},{localizedString:"Skandia Bank",code:"SKANDIABANK"},{localizedString:"Solothurner Bank SoBa",code:"SOLOTHURNERBANKSOBA"},{localizedString:"Sparkassa Berneck",code:"SPARKASSABERNECK"},{localizedString:"St. Gallische Kantonalbank",code:"STGALLISCHEKANTONALB"},{localizedString:"Swiss Bank Corporation",code:"SWISSBANKCORPORATION"},{localizedString:"Thurgauer Kantonalbank",code:"THURGAUERKANTONALBAN"},{localizedString:"Union Bank of Switzerland",code:"UNIONBANKOFSWITZERLA"},{localizedString:"Wegelin & Co. Privatbankiers",code:"WEGELINCOPRIVATBANKI"},{localizedString:"Zuger Kantonalbank",code:"ZUGERKANTONALBANK"},{localizedString:"Zrcher Kantonalbank",code:"ZURCHERKANTONALBANK"}],[n.Country.CL]:[{localizedString:"Banco BICE",code:"BANCOBICE"},{localizedString:"Banco Bilbao Vizcaya Argentaria (BBVA)",code:"BANCOBILBAOVIZCAYAAR"},{localizedString:"Banco Consorcio",code:"BANCOCONSORCIO"},{localizedString:"Banco de Chile",code:"BANCODECHILE"},{localizedString:"Banco de Crdito e Inversiones",code:"BANCODECREDITOEINVER"},{localizedString:"Banco del Desarrollo",code:"BANCODELDESARROLLO"},{localizedString:"Banco del Estado de Chile",code:"BANCODELESTADODECHIL"},{localizedString:"Banco Edwards-Citi",code:"BANCOEDWARDSCITI"},{localizedString:"Banco Falabella",code:"BANCOFALABELLA"},{localizedString:"Banco Internacional",code:"BANCOINTERNACIONAL"},{localizedString:"Banco Ita-Chile",code:"BANCOITAUCHILE"},{localizedString:"Banco Paris",code:"BANCOPARIS"},{localizedString:"Banco Penta",code:"BANCOPENTA"},{localizedString:"Banco Ripley",code:"BANCORIPLEY"},{localizedString:"Banco Santander Chile",code:"BANCOSANTANDERCHILE"},{localizedString:"Banco Security",code:"BANCOSECURITY"},{localizedString:"Central Bank of Chile",code:"CENTRALBANKOFCHILE"},{localizedString:"Corpbanca",code:"CORPBANCA"},{localizedString:"Deutsche Bank Chile",code:"DEUTSCHEBANKCHILE"},{localizedString:"HSBC Bank Chile",code:"HSBCBANKCHILE"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank",code:"RABOBANK"},{localizedString:"Scotiabank Sud Americano",code:"SCOTIABANKSUDAMERICA"}],[n.Country.CO]:[{localizedString:"AVVillas",code:"AVVILLAS"},{localizedString:"Banagrario",code:"BANAGRARIO"},{localizedString:"Bancama",code:"BANCAMIA"},{localizedString:"Banco de Bogot",code:"BANCODEBOGOTA"},{localizedString:"Banco de la Repblica",code:"BANCODELAREPUBLICA"},{localizedString:"Banco de Occidente",code:"BANCODEOCCIDENTE"},{localizedString:"Bancolombia",code:"BANCOLOMBIA"},{localizedString:"Banco Popular",code:"BANCOPOPULAR"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"BBVA Colombia",code:"BBVACOLOMBIA"},{localizedString:"Caja Social",code:"CAJASOCIAL"},{localizedString:"Citibank Colombia",code:"CITIBANKCOLOMBIA"},{localizedString:"Colmena",code:"COLMENA"},{localizedString:"Colpatria",code:"COLPATRIA"},{localizedString:"Davivienda",code:"DAVIVIENDA"},{localizedString:"GBN Sudameris",code:"GBNSUDAMERIS"},{localizedString:"Helm",code:"HELM"},{localizedString:"HSBC Colombia",code:"HSBCCOLOMBIA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Procredit",code:"PROCREDIT"},{localizedString:"RBS Colombia",code:"RBSCOLOMBIA"}],[n.Country.DE]:[{localizedString:"BayernLB",code:"BAYERNLB"},{localizedString:"Commerzbank",code:"COMMERZBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"DZ Bank",code:"DZBANK"},{localizedString:"Eurohypo AG",code:"EUROHYPOAG"},{localizedString:"HSH Nordbank",code:"HSHNORDBANK"},{localizedString:"HVB Group (HypoVereinsbank)",code:"HVBGROUPHYPOVEREINSB"},{localizedString:"Hypo Real Estate Group (HRE Group)",code:"HYPOREALESTATEGROUPH"},{localizedString:"Kfw Bankgruppe",code:"KFWBANKGRUPPE"},{localizedString:"Landesbank Baden-Wrttemberg",code:"LANDESBANKBADENWURTT"},{localizedString:"Landesbank Berlin (LBB)",code:"LANDESBANKBERLINLBB"},{localizedString:"Landesbank Hessen-Thringen (Helaba)",code:"LANDESBANKHESSENTHUR"},{localizedString:"Nord/LB (Norddeutsche Landesbank)",code:"NORDLBNORDDEUTSCHELA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"N26",code:"NUMBERTWENTYSIX"},{localizedString:"Postbank AG",code:"POSTBANKAG"},{localizedString:"Sparkasse",code:"SPARKASSE"},{localizedString:"WGZ Bank (Westdeutsche Genossenschafts-Zentralbank)",code:"WGZBANKWESTDEUTSCHEG"}],[n.Country.DK]:[{localizedString:"Alm Brand Bank",code:"ALMBRANDBANK"},{localizedString:"Arbejdernes Landsbank",code:"ARBEJERNESLANDSBANK"},{localizedString:"Danske Bank",code:"DANSKEBANK"},{localizedString:"FIH Erhversbank",code:"FIHERHVERSBANK"},{localizedString:"Jyske Bank",code:"JYSKEBANK"},{localizedString:"Nordea",code:"NORDEA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Nykredit Bank",code:"NYKREDITBANK"},{localizedString:"Spar Nord Bank",code:"SPARNORDBANK"},{localizedString:"Syd Bank",code:"SYDBANK"},{localizedString:"Vestjysk Bank",code:"VESTJYSKBANK"}],[n.Country.EC]:[{localizedString:"Banco Amazonas",code:"BANCOAMAZONAS"},{localizedString:"Banco Bolivariano",code:"BANCOBOLIVARIANO"},{localizedString:"Banco Capital",code:"BANCOCAPITAL"},{localizedString:"Banco Cofiec",code:"BANCOCOFIEC"},{localizedString:"Banco Comercial de Manab",code:"BANCOCOMERCIALDEMANA"},{localizedString:"Banco Coopnacional",code:"BANCOCOOPNACIONAL"},{localizedString:"Banco de Guayaquil",code:"BANCODEGUAYAQUIL"},{localizedString:"Banco del Austro",code:"BANCODELAUSTRO"},{localizedString:"Banco Delbank",code:"BANCODELBANK"},{localizedString:"Banco del Litoral",code:"BANCODELLITORAL"},{localizedString:"Banco de Loja",code:"BANCODELOJA"},{localizedString:"Banco del Pacfico",code:"BANCODELPACIFICO"},{localizedString:"Banco de Machala",code:"BANCODEMACHALA"},{localizedString:"Banco D-Miro",code:"BANCODMIRO"},{localizedString:"Banco Finca",code:"BANCOFINCA"},{localizedString:"Banco General Rumiahui",code:"BANCOGENERALRUMINAHU"},{localizedString:"Banco Internacional",code:"BANCOINTERNACIONAL"},{localizedString:"Banco Pichincha",code:"BANCOPICHINCHA"},{localizedString:"Banco Promrica",code:"BANCOPROMERICA"},{localizedString:"Banco Solidario",code:"BANCOSOLIDARIO"},{localizedString:"Banco Sudamericano",code:"BANCOSUDAMERICANO"},{localizedString:"Citibank Ecuador",code:"CITIBANKECUADOR"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"ProCredit Bank",code:"PROCREDITBANK"},{localizedString:"Produbanco",code:"PRODUBANCO"}],[n.Country.ES]:[{localizedString:"Banca March",code:"BANCAMARCH"},{localizedString:"Banco Esfinge",code:"BANCOESFINGE"},{localizedString:"Banco Espritu Santo",code:"BANCOESPIRITUSANTO"},{localizedString:"Banco Fimestic",code:"BANCOFIMESTIC"},{localizedString:"Banco Inversin",code:"BANCOINVERSION"},{localizedString:"Banco Popular Espaol",code:"BANCOPOPULARESPANOL"},{localizedString:"Banco Sabadell",code:"BANCOSABADELL"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"Bankia",code:"BANKIA"},{localizedString:"Bankinter",code:"BANKINTER"},{localizedString:"Bankpyme",code:"BANKPYME"},{localizedString:"Barclays Bank",code:"BARCLAYSBANK"},{localizedString:"BBVA",code:"BBVA"},{localizedString:"BCH Broker",code:"BCHBROKER"},{localizedString:"CaixaBank",code:"CAIXABANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"E-Cortal",code:"ECORTAL"},{localizedString:"Fiare Banca tica pgina web de Fiare",code:"FIAREBANCAETICAPAGIN"},{localizedString:"Fibanc",code:"FIBANC"},{localizedString:"Fibane",code:"FIBANE"},{localizedString:"Ibercaja",code:"IBERCAJA"},{localizedString:"ING Direct",code:"INGDIRECT"},{localizedString:"InterCaja Social .ES",code:"INTERCAJASOCIALES"},{localizedString:"Merrill Lynch",code:"MERRILLLYNCH"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Openbank",code:"OPENBANK"},{localizedString:"Salomon Smith Barney",code:"SALOMONSMITHBARNEY"},{localizedString:"Schroders",code:"SCHRODERS"},{localizedString:"Triodos Bank",code:"TRIODOSBANK"},{localizedString:"UNO-e",code:"UNOE"}],[n.Country.FI]:[{localizedString:"Aktia Savings Bank",code:"AKTIASAVINGSBANK"},{localizedString:"Bank of land",code:"BANKOFALAND"},{localizedString:"eQ Bank",code:"EQBANK"},{localizedString:"Evli Bank",code:"EVLIBANK"},{localizedString:"Helsinki OP Bank",code:"HELSINKIOPBANK"},{localizedString:"Kaupthing Bank",code:"KAUPTHINGBANK"},{localizedString:"Nordea Bank Finland",code:"NORDEABANKFINLAND"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OP-Kotipankki",code:"OPKOTIPANKKI"},{localizedString:"Pohjola Bank",code:"POHJOLABANK"},{localizedString:"Sampo Bank",code:"SAMPOBANK"},{localizedString:"S-Bank",code:"SBANK"},{localizedString:"SEB Gyllenberg Private Bank",code:"SEBGYLLENBERGPRIVATE"},{localizedString:"Suomen AsuntoHypoPankki",code:"SUOMENASUNTOHYPOPANK"},{localizedString:"Tapiola Bank",code:"TAPIOLABANK"}],[n.Country.FR]:[{localizedString:"Axa Banque",code:"AXA"},{localizedString:"Banque Populaire",code:"BANQPOPUL"},{localizedString:"La Banque Postale",code:"BANQPOSTA"},{localizedString:"Banque Casino",code:"BANQUECASINO"},{localizedString:"Banque de France",code:"BANQUEDEFRANCE"},{localizedString:"Barclays",code:"BARCLAYS"},{localizedString:"BforBank",code:"BFORBANK"},{localizedString:"BNP Paribas",code:"BNP"},{localizedString:"Boursorama Banque",code:"BOURSORAMA"},{localizedString:"BRED",code:"BRED"},{localizedString:"Caisse d'pargne",code:"CAISSEEPAR"},{localizedString:"Carrefour-Banque",code:"CARREFOURBANQUE"},{localizedString:"CIC",code:"CIC"},{localizedString:"Crdit Mutuel de Bretagne",code:"CMB"},{localizedString:"Crdit Mutuel Nord Europe",code:"CMNE"},{localizedString:"Crdit Agricole",code:"CREDAGRIC"},{localizedString:"Crdit Coopratif",code:"CREDCOOPE"},{localizedString:"Crdit Foncier",code:"CREDFONCI"},{localizedString:"Crdit Mutuel",code:"CREDMUTUEL"},{localizedString:"Crdit du Nord",code:"CREDNORD"},{localizedString:"Fortuneo Banque",code:"FORTUNEOBANQUE"},{localizedString:"Groupama Banque",code:"GROUPAMA"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"ING Direct",code:"INGDIRECT"},{localizedString:"LCL",code:"LCL"},{localizedString:"Autre",code:"NO_TYPE"},{localizedString:"Socit Gnrale",code:"SOGE"}],[n.Country.GB]:[{localizedString:"Barclays Bank",code:"BARCLAYS"},{localizedString:"Coutts",code:"COUTTS"},{localizedString:"HBOS",code:"HBOS"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Lloyds Banking Group",code:"LLOYDS"},{localizedString:"NatWest",code:"NATWEST"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Royal Bank of Scotland (RBS)",code:"RBS"},{localizedString:"Santander",code:"SANTANDER"},{localizedString:"Standard Chartered",code:"STANDCHAR"},{localizedString:"Virgin Money",code:"VIRGINMONEY"},{localizedString:"Yorkshire Bank",code:"YORKSHIRE"},{localizedString:"Yorkshire Building Society",code:"YORKSHIREBS"}],[n.Country.GT]:[{localizedString:"Agromercantil",code:"AGROMERCANTIL"},{localizedString:"Azteca Bank",code:"AZTECABANK"},{localizedString:"BAC Bank",code:"BACBANK"},{localizedString:"Bank of Antigua",code:"BANKOFANTIGUA"},{localizedString:"Bantrab Bank",code:"BANTRABBANK"},{localizedString:"Citi Bank",code:"CITIBANK"},{localizedString:"Credito Hipotecario Bank",code:"CREDITOHIPOTECARIOBA"},{localizedString:"De Credito Bank",code:"DECREDITOBANK"},{localizedString:"Ficohsa Bank",code:"FICOHSABANK"},{localizedString:"G&T Continental Bank",code:"GTCONTINENTALBANK"},{localizedString:"Industrial bank",code:"INDUSTRIALBANK"},{localizedString:"Inmobiliario Bank",code:"INMOBILIARIOBANK"},{localizedString:"Internacional Bank",code:"INTERNACIONALBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Reformador Bank",code:"REFORMADORBANK"},{localizedString:"Vivibanco Bank",code:"VIVIBANCOBANK"}],[n.Country.HK]:[{localizedString:"Bank of China",code:"BANKOFCHINA"},{localizedString:"Bank of East Asia, The",code:"BANKOFEASTASIATHE"},{localizedString:"China CITIC Bank International",code:"CHINACITICBANKINTERN"},{localizedString:"China Construction Bank",code:"CHINACONSTRUCTIONBAN"},{localizedString:"Chiyu Banking Corporation",code:"CHIYUBANKINGCORPORAT"},{localizedString:"Chong Hing Bank",code:"CHONGHINGBANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Dah Sing Bank",code:"DAHSINGBANK"},{localizedString:"DBS Bank",code:"DBSBANK"},{localizedString:"Fubon Bank",code:"FUBONBANK"},{localizedString:"Hang Seng Bank",code:"HANGSENGBANK"},{localizedString:"Hongkong and Shanghai Banking Corporation, The",code:"HONGKONGANDSHANGHAIB"},{localizedString:"Industrial and Commercial Bank of China",code:"INDUSTRIALANDCOMMERC"},{localizedString:"Nanyang Commercial Bank",code:"NANYANGCOMMERCIALBAN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OCBC Wing Hang Bank",code:"OCBCWINGHANGBANK"},{localizedString:"Public Bank",code:"PUBLICBANK"},{localizedString:"Shanghai Commercial Bank",code:"SHANGHAICOMMERCIALBA"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"Tai Sang Bank",code:"TAISANGBANK"},{localizedString:"Tai Yau Bank",code:"TAIYAUBANK"},{localizedString:"Wing Lung Bank",code:"WINGLUNGBANK"}],[n.Country.IE]:[{localizedString:"ACC Bank",code:"ACCBANK"},{localizedString:"Allied Irish Banks",code:"ALLIEDIRISHBANKS"},{localizedString:"Anglo Irish Bank",code:"ANGLOIRISHBANK"},{localizedString:"Bank of Ireland",code:"BANKOFIRELAND"},{localizedString:"Barclays Bank Ireland",code:"BARCLAYSBANKIRELAND"},{localizedString:"Bear Stearns Bank",code:"BEARSTEARNSBANK"},{localizedString:"Capmark Bank Europe",code:"CAPMARKBANKEUROPE"},{localizedString:"Citibank Europe",code:"CITIBANKEUROPE"},{localizedString:"Fortis Prime Fund Solutions Bank",code:"FORTISPRIMEFUNDSOLUT"},{localizedString:"Goldman Sachs Bank",code:"GOLDMANSACHSBANK"},{localizedString:"Goldman Sachs Private Bank",code:"GOLDMANSACHSPRIVATEB"},{localizedString:"Helaba Dublin Landesbank Hessen-Thringen International",code:"HELABADUBLINLANDESBA"},{localizedString:"Hewlett-Packard International Bank",code:"HEWLETTPACKARDINTERN"},{localizedString:"Hypo Public Finance Bank",code:"HYPOPUBLICFINANCEBAN"},{localizedString:"Intesa Sanpaolo Bank Ireland",code:"INTESASANPAOLOBANKIR"},{localizedString:"Irish Life & Permanent",code:"IRISHLIFEPERMANENT"},{localizedString:"JP Morgan Bank",code:"JPMORGANBANK"},{localizedString:"KBC Bank Ireland",code:"KBCBANKIRELAND"},{localizedString:"LGT Bank",code:"LGTBANK"},{localizedString:"Merrill Lynch International Bank",code:"MERRILLLYNCHINTERNAT"},{localizedString:"Naspa Dublin",code:"NASPADUBLIN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pfizer International Bank Europe",code:"PFIZERINTERNATIONALB"},{localizedString:"PFPC Bank",code:"PFPCBANK"}],[n.Country.IN]:[{localizedString:"ABN AMRO India",code:"ABNAMROINDIA"},{localizedString:"Abu Dhabi Commercial Bank India",code:"ABUDHABICOMMERCIALBA"},{localizedString:"Allahabad Bank",code:"ALLAHABADBANK"},{localizedString:"Andhra Bank",code:"ANDHRABANK"},{localizedString:"Axis Bank Limited",code:"AXISBANKLIMITED"},{localizedString:"Canara Bank",code:"CANARABANK"},{localizedString:"Central Bank of India",code:"CENTRALBANKOFINDIA"},{localizedString:"Centurion Bank of Punjab",code:"CENTURIONBANKOFPUNJA"},{localizedString:"Citibank India",code:"CITIBANKINDIA"},{localizedString:"Corporation Bank",code:"CORPORATIONBANK"},{localizedString:"DCB (Development Credit Bank Ltd)",code:"DCBDEVELOPMENTCREDIT"},{localizedString:"Dena Bank",code:"DENABANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"Guardian Souharda Sahakari Bank Niyamita",code:"GUARDIANSOUHARDASAHA"},{localizedString:"HDFC Bank",code:"HDFCBANK"},{localizedString:"IDBI Bank",code:"IDBIBANK"},{localizedString:"Indian Bank",code:"INDIANBANK"},{localizedString:"Indian Overseas Bank",code:"INDIANOVERSEASBANK"},{localizedString:"IndusInd Bank Ltd",code:"INDUSINDBANKLTD"},{localizedString:"ING Vysya Bank",code:"INGVYSYABANK"},{localizedString:"Maharshtra Bank",code:"MAHARSHTRABANK"},{localizedString:"Mandvi Bank",code:"MANDVIBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Oriental Bank of Commerce",code:"ORIENTALBANKOFCOMMER"},{localizedString:"Saraswat Bank",code:"SARASWATBANK"},{localizedString:"South Indian Bank",code:"SOUTHINDIANBANK"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"State Bank of Hyderabad",code:"STATEBANKOFHYDERABAD"},{localizedString:"State Bank of Saurashtra",code:"STATEBANKOFSAURASHTR"},{localizedString:"Syndicate Bank",code:"SYNDICATEBANK"},{localizedString:"The Federal Bank Ltd",code:"THEFEDERALBANKLTD"},{localizedString:"UCO Bank",code:"UCOBANK"},{localizedString:"Union Bank of India",code:"UNIONBANKOFINDIA"}],[n.Country.IT]:[{localizedString:"Banca Carige",code:"BANCACARIGE"},{localizedString:"Banca Pop. Milano",code:"BANCAPOPMILANO"},{localizedString:"Banco Popolare",code:"BANCOPOPOLARE"},{localizedString:"B Monte Paschi Siena",code:"BMONTEPASCHISIENA"},{localizedString:"Credito Emiliano",code:"CREDITOEMILIANO"},{localizedString:"Intesa Sanpaolo",code:"INTESASANPAOLO"},{localizedString:"Mediobanca",code:"MEDIOBANCA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Ubi Banca",code:"UBIBANCA"},{localizedString:"Unicredit - Capitalia",code:"UNICREDITCAPITALIA"}],[n.Country.JP]:[{localizedString:"Chiba Kgy Bank",code:"CHIBAKOGYOBANK"},{localizedString:"Mitsubishi UFJ Financial Group",code:"MITSUBISHIUFJFINANCI"},{localizedString:"Mitsubishi UFJ Trust and Banking Corporation",code:"MITSUBISHIUFJTRUSTAN"},{localizedString:"Mizuho Bank",code:"MIZUHOBANK"},{localizedString:"Mizuho Corporate Bank",code:"MIZUHOCORPORATEBANK"},{localizedString:"Mizuho Financial Group",code:"MIZUHOFINANCIALGROUP"},{localizedString:"Mizuho Trust & Banking Co.",code:"MIZUHOTRUSTBANKINGCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Sumitomo Mitsui Banking Corporation",code:"SUMITOMOMITSUIBANKIN"},{localizedString:"Sumitomo Mitsui Financial Group",code:"SUMITOMOMITSUIFINANC"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Master Trust Bank of Japan",code:"THEMASTERTRUSTBANKOF"},{localizedString:"The Sensh Bank",code:"THESENSHUBANK"},{localizedString:"Trust & Custody Services Bank",code:"TRUSTCUSTODYSERVICES"}],[n.Country.LU]:[{localizedString:"Banque et Caisse d'Epargne de l'Etat, Luxembourg (BCEE)",code:"BANQUEETCAISSEDEPARG"},{localizedString:"Banque Gnrale du Luxembourg",code:"BANQUEGENERALEDULUXE"},{localizedString:"Banque IPPA et Associes Luxembourg",code:"BANQUEIPPAETASSOCIES"},{localizedString:"Banque UCL",code:"BANQUEUCL"},{localizedString:"Die Sparkasse Bremen",code:"DIESPARKASSEBREMEN"},{localizedString:"KBL",code:"KBL"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Robeco Bank",code:"ROBECOBANK"},{localizedString:"SGZ-Bank International",code:"SGZBANKINTERNATIONAL"},{localizedString:"WestLB International",code:"WESTLBINTERNATIONAL"}],[n.Country.MX]:[{localizedString:"Banamex",code:"BANAMEX"},{localizedString:"Banca Afirme",code:"BANCAAFIRME"},{localizedString:"Banco Azteca",code:"BANCOAZTECA"},{localizedString:"Banco del Bajio",code:"BANCODELBAJIO"},{localizedString:"Banco J.P. Morgan",code:"BANCOJPMORGAN"},{localizedString:"Bank of America Mexico",code:"BANKOFAMERICAMEXICO"},{localizedString:"Banorte",code:"BANORTE"},{localizedString:"BanRegio",code:"BANREGIO"},{localizedString:"BBVA Bancomer",code:"BBVABANCOMER"},{localizedString:"Deutsche Bank Mexico",code:"DEUTSCHEBANKMEXICO"},{localizedString:"HSBC Mexico",code:"HSBCMEXICO"},{localizedString:"Inbursa",code:"INBURSA"},{localizedString:"ING Bank Mexico",code:"INGBANKMEXICO"},{localizedString:"Interacciones",code:"INTERACCIONES"},{localizedString:"Invex Controladora",code:"INVEXCONTROLADORA"},{localizedString:"Ixe Banco",code:"IXEBANCO"},{localizedString:"Mifel",code:"MIFEL"},{localizedString:"Monex",code:"MONEX"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Santander Mexico",code:"SANTANDERMEXICO"},{localizedString:"Scotiabank Inverlat",code:"SCOTIABANKINVERLAT"}],[n.Country.NL]:[{localizedString:"ABN Amro",code:"ABNAMRO"},{localizedString:"Amsterdam Trade Bank",code:"AMSTERDAMTRADEBANK"},{localizedString:"ASN Bank",code:"ASNBANK"},{localizedString:"Bank Mendes Gans",code:"BANKMENDESGANS"},{localizedString:"Bank Nederlandse Gemeenten",code:"BANKNEDERLANDSEGEMEE"},{localizedString:"BinckBank",code:"BINCKBANK"},{localizedString:"Credit Europe Bank",code:"CREDITEUROPEBANK"},{localizedString:"Demir Halk Bank",code:"DEMIRHALKBANK"},{localizedString:"Friesland Bank",code:"FRIESLANDBANK"},{localizedString:"GE Artesia Bank",code:"GEARTESIABANK"},{localizedString:"ING Group",code:"INGGROUP"},{localizedString:"Kempen & Co",code:"KEMPENCO"},{localizedString:"Nederlandse Waterschapsbank",code:"NEDERLANDSEWATERSCHA"},{localizedString:"Netherlands Development Finance Company",code:"NETHERLANDSDEVELOPME"},{localizedString:"NIBC Bank",code:"NIBCBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank",code:"RABOBANK"},{localizedString:"SNS Bank",code:"SNSBANK"},{localizedString:"Triodos Bank",code:"TRIODOSBANK"},{localizedString:"Van Lanschot",code:"VANLANSCHOT"}],[n.Country.NO]:[{localizedString:"Bolig- og Nringsbanken",code:"BOLIGOGNAERINGSBANKE"},{localizedString:"Cresco",code:"CRESCO"},{localizedString:"DnB NOR Bank",code:"DNBNORBANK"},{localizedString:"Fokus Bank",code:"FOKUSBANK"},{localizedString:"Landkreditt Bank",code:"LANDKREDITTBANK"},{localizedString:"Netfonds Bank",code:"NETFONDSBANK"},{localizedString:"Nordea Bank Norge",code:"NORDEABANKNORGE"},{localizedString:"Nordlandsbanken",code:"NORDLANDSBANKEN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pareto Bank",code:"PARETOBANK"},{localizedString:"Santander Consumer Bank",code:"SANTANDERCONSUMERBAN"},{localizedString:"SEB Privatbanken",code:"SEBPRIVATBANKEN"},{localizedString:"Storebrand Bank",code:"STOREBRANDBANK"},{localizedString:"Verdibanken",code:"VERDIBANKEN"},{localizedString:"Voss Veksel- og Landmandsbank",code:"VOSSVEKSELOGLANDMAND"},{localizedString:"yA Bank",code:"YABANK"}],[n.Country.NZ]:[{localizedString:"ANZ Bank of New Zealand Limited",code:"ANZBANKOFNEWZEALANDL"},{localizedString:"ASB Bank Limited",code:"ASBBANKLIMITED"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Bank of Baroda (New Zealand) Limited",code:"BANKOFBARODANEWZEALA"},{localizedString:"Bank of China (New Zealand) Limited",code:"BANKOFCHINANEWZEALAN"},{localizedString:"Bank of India (New Zealand) Limited",code:"BANKOFINDIANEWZEALAN"},{localizedString:"Bank of New Zealand",code:"BANKOFNEWZEALAND"},{localizedString:"China Construction Bank",code:"CHINACONSTRUCTIONBAN"},{localizedString:"Citibank N.A.",code:"CITIBANKNA"},{localizedString:"Commonwealth Bank of Australia",code:"COMMONWEALTHBANKOFAU"},{localizedString:"Deutsche Bank AG",code:"DEUTSCHEBANKAG"},{localizedString:"Heartland Bank Limited",code:"HEARTLANDBANKLIMITED"},{localizedString:"ICBC",code:"ICBC"},{localizedString:"JPMorgan Chase Bank N.A.",code:"JPMORGANCHASEBANKNA"},{localizedString:"Kiwibank Limited",code:"KIWIBANKLIMITED"},{localizedString:"Kookmin Bank",code:"KOOKMINBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank Nederland",code:"RABOBANKNEDERLAND"},{localizedString:"Rabobank New Zealand Limited",code:"RABOBANKNEWZEALANDLI"},{localizedString:"Southland Building Society",code:"SOUTHLANDBUILDINGSOC"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Co-operative Bank Limited",code:"THECOOPERATIVEBANKLI"},{localizedString:"The Hongkong and Shanghai Banking Corp",code:"THEHONGKONGANDSHANGH"},{localizedString:"TSB Bank Limited",code:"TSBBANKLIMITED"},{localizedString:"Westpac Banking Corporation",code:"WESTPACBANKINGCORPOR"},{localizedString:"Westpac New Zealand Limited",code:"WESTPACNEWZEALANDLIM"}],[n.Country.PE]:[{localizedString:"Agrobanco",code:"AGROBANCO"},{localizedString:"Banco Azteca",code:"BANCOAZTECA"},{localizedString:"Banco Central de Reserva del Per",code:"BANCOCENTRALDERESERV"},{localizedString:"Banco de Comercio",code:"BANCODECOMERCIO"},{localizedString:"Banco del Trabajo",code:"BANCODELTRABAJO"},{localizedString:"Banco de Materiales",code:"BANCODEMATERIALES"},{localizedString:"Banco Falabella",code:"BANCOFALABELLA"},{localizedString:"Banco Financiero",code:"BANCOFINANCIERO"},{localizedString:"Banco Interamericano de Finanzas",code:"BANCOINTERAMERICANOD"},{localizedString:"Banco Ripley",code:"BANCORIPLEY"},{localizedString:"BBVA",code:"BBVA"},{localizedString:"BCP",code:"BCP"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Interbank",code:"INTERBANK"},{localizedString:"Mibanco",code:"MIBANCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Santander",code:"SANTANDER"},{localizedString:"Scotiabank",code:"SCOTIABANK"},{localizedString:"Standard Chartered",code:"STANDARDCHARTERED"}],[n.Country.PH]:[{localizedString:"Al-Amanah Islamic Investment Bank of the Philippines",code:"ALAMANAHISLAMICINVES"},{localizedString:"Asia United Bank",code:"ASIAUNITEDBANK"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Bangkok Bank",code:"BANGKOKBANK"},{localizedString:"Bank of America, N.A.",code:"BANKOFAMERICANA"},{localizedString:"Bank of China",code:"BANKOFCHINA"},{localizedString:"Bank of Commerce",code:"BANKOFCOMMERCE"},{localizedString:"Bank of the Philippine Islands",code:"BANKOFTHEPHILIPPINEI"},{localizedString:"BDO Private Bank",code:"BDOPRIVATEBANK"},{localizedString:"BDO Unibank",code:"BDOUNIBANK"},{localizedString:"Chinabank",code:"CHINABANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"CTBC Bank",code:"CTBCBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"Development Bank of the Philippines",code:"DEVELOPMENTBANKOFTHE"},{localizedString:"EastWest Bank",code:"EASTWESTBANK"},{localizedString:"ING Group",code:"INGGROUP"},{localizedString:"JPMorgan Chase",code:"JPMORGANCHASE"},{localizedString:"Land Bank of the Philippines",code:"LANDBANKOFTHEPHILIPP"},{localizedString:"Maybank Philippines, Inc.",code:"MAYBANKPHILIPPINESIN"},{localizedString:"Mega International Commercial Bank",code:"MEGAINTERNATIONALCOM"},{localizedString:"Metropolitan Bank and Trust Company",code:"METROPOLITANBANKANDT"},{localizedString:"Mizuho Bank, Ltd.",code:"MIZUHOBANKLTD"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Philippine Bank of Communications",code:"PHILIPPINEBANKOFCOMM"},{localizedString:"Philippine National Bank",code:"PHILIPPINENATIONALBA"},{localizedString:"Philippine Veterans Bank",code:"PHILIPPINEVETERANSBA"},{localizedString:"Philtrust Bank",code:"PHILTRUSTBANK"},{localizedString:"Rizal Commercial Banking Corporation",code:"RIZALCOMMERCIALBANKI"},{localizedString:"Robinsons Bank",code:"ROBINSONSBANK"},{localizedString:"Security Bank",code:"SECURITYBANK"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ, Ltd.",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Hongkong and Shanghai Banking Corporation",code:"THEHONGKONGANDSHANGH"},{localizedString:"Union Bank of the Philippines",code:"UNIONBANKOFTHEPHILIP"},{localizedString:"United Coconut Planters Bank",code:"UNITEDCOCONUTPLANTER"}],[n.Country.PT]:[{localizedString:"Atlantico - Banco Portugus do Atlntico",code:"ATLANTICOBANCOPORTUG"},{localizedString:"Banco 7",code:"BANCO7"},{localizedString:"Banco BPI",code:"BANCOBPI"},{localizedString:"Banco Comercial Portugus",code:"BANCOCOMERCIALPORTUG"},{localizedString:"Banco de Portugal",code:"BANCODEPORTUGAL"},{localizedString:"Banco Espirito Santo",code:"BANCOESPIRITOSANTO"},{localizedString:"Banco Internacional de Crdito, S.A.",code:"BANCOINTERNACIONALDE"},{localizedString:"Banco Mello",code:"BANCOMELLO"},{localizedString:"Banif - Banco Internacional do Funchal",code:"BANIFBANCOINTERNACIO"},{localizedString:"Barclays Netbanking Portugal",code:"BARCLAYSNETBANKINGPO"},{localizedString:"Caixa Geral de Depsitos",code:"CAIXAGERALDEDEPOSITO"},{localizedString:"Cisf - Banco de Investimento, S.A.",code:"CISFBANCODEINVESTIME"},{localizedString:"Other",code:"NO_TYPE"}],[n.Country.SE]:[{localizedString:"ABN AMRO Bank Sweden",code:"ABNAMROBANKSWEDEN"},{localizedString:"First Baltic Savings",code:"FIRSTBALTICSAVINGS"},{localizedString:"FreningsSparbanken (Swedbank)",code:"FORENINGSSPARBANKENS"},{localizedString:"JP Bank",code:"JPBANK"},{localizedString:"Nordbanken",code:"NORDBANKEN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"stgta Enskilda Bank",code:"OSTGOTAENSKILDABANK"},{localizedString:"Skandia Banken",code:"SKANDIABANKEN"},{localizedString:"Skandinaviska Enskilda Banken",code:"SKANDINAVISKAENSKILD"},{localizedString:"Sparbanken Sverige - Swedbank",code:"SPARBANKENSVERIGESWE"},{localizedString:"Stadshypotek",code:"STADSHYPOTEK"},{localizedString:"Svenska Handelsbanken-SHB",code:"SVENSKAHANDELSBANKEN"},{localizedString:"Sveriges Riksbank",code:"SVERIGESRIKSBANK"},{localizedString:"Trygg Hansa",code:"TRYGGHANSA"},{localizedString:"Westra Wermlands Sparbank",code:"WESTRAWERMLANDSSPARB"}],[n.Country.SG]:[{localizedString:"Bank of America",code:"BANKOFAMERICA"},{localizedString:"Barclays bank",code:"BARCLAYSBANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Developmental Bank of Singapore",code:"DEVELOPMENTALBANKOFS"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OCBC Bank",code:"OCBCBANK"},{localizedString:"Post Office Savings Bank",code:"POSTOFFICESAVINGSBAN"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"State Bank of India",code:"STATEBANKOFINDIA"},{localizedString:"United Overseas Bank",code:"UNITEDOVERSEASBANK"}],[n.Country.US]:[{localizedString:"Ally Bank",code:"ALLY"},{localizedString:"American Express",code:"AMERICANEXPRESS"},{localizedString:"Associated Bank",code:"ASSOCIATED"},{localizedString:"Bank of the West",code:"BANKWEST"},{localizedString:"Barclays Bank",code:"BARCLAYS"},{localizedString:"BMO Harris Bank",code:"BMO"},{localizedString:"Bank of America",code:"BOA"},{localizedString:"Branch Banking and Trust Company",code:"BRANCH"},{localizedString:"Capital One",code:"CAPITALONE"},{localizedString:"Charles Schwab Bank",code:"CHARSCHWA"},{localizedString:"Chase Bank USA",code:"CHASE"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Citizens Bank of Pennsylvania",code:"CITIZENS"},{localizedString:"City National Bank",code:"CITYNATIONAL"},{localizedString:"Compass Bank",code:"COMPASS"},{localizedString:"CU Hawaii",code:"CUHAWAII"},{localizedString:"Discover Bank",code:"DISCOVER"},{localizedString:"E-Trade Bank",code:"ETRADE"},{localizedString:"Fifth Third Bank",code:"FIFTHTHIRD"},{localizedString:"First-Citizens Bank and Trust Company",code:"FIRSTCITIZENS"},{localizedString:"Fortune Bank",code:"FORTUNEBANK"},{localizedString:"Harris National Association",code:"HARRIS"},{localizedString:"HSBC Bank USA",code:"HSBC"},{localizedString:"Hudson City Savings Bank",code:"HUDSONCITY"},{localizedString:"The Huntington National Bank",code:"HUNTINGTON"},{localizedString:"ING Bank, fsb",code:"INGBANK"},{localizedString:"JPMorgan Chase Bank",code:"JPMORGAN"},{localizedString:"Keybank",code:"KEYBANK"},{localizedString:"Manufacturers and Traders Trust Company",code:"MANUFACTUR"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"New York Community Bank",code:"NYCOMMUNITY"},{localizedString:"The Bank of New York Mellon",code:"NYMELLON"},{localizedString:"PNC Bank",code:"PNC"},{localizedString:"Banco Popular de Puerto Rico",code:"PUERTORICO"},{localizedString:"RBC Bank",code:"RBC"},{localizedString:"RBS Citizens",code:"RBS"},{localizedString:"Regions Bank",code:"REGIONS"},{localizedString:"Sovereign Bank",code:"SOVEREIGN"},{localizedString:"State Street Bank and Trust Co.",code:"STATESTREET"},{localizedString:"SunTrust Bank",code:"SUNTRUST"},{localizedString:"Silicon Valley Bank",code:"SVB"},{localizedString:"Synovus Bank",code:"SYNOVUS"},{localizedString:"TD Bank",code:"TDBANK"},{localizedString:"UBS Bank",code:"UBS"},{localizedString:"Union Bank",code:"UNION"},{localizedString:"USAA Federal Savings Bank",code:"USAAFEDERAL"},{localizedString:"U.S. Bank",code:"USBANK"},{localizedString:"Wells Fargo",code:"WELLSFARGO"}],[n.Country.VE]:[{localizedString:"100% Banco",code:"100BANCO"},{localizedString:"Bancaribe",code:"BANCARIBE"},{localizedString:"Banco Bicentenario",code:"BANCOBICENTENARIO"},{localizedString:"Banco de Venezuela",code:"BANCODEVENEZUELA"},{localizedString:"Banco Industrial de Venezuela",code:"BANCOINDUSTRIALDEVEN"},{localizedString:"Banco Mercantil",code:"BANCOMERCANTIL"},{localizedString:"Banco Nacional de Crdito",code:"BANCONACIONALDECREDI"},{localizedString:"Banco Occidental de Descuento",code:"BANCOOCCIDENTALDEDES"},{localizedString:"Banco Venezolano de Crdito",code:"BANCOVENEZOLANODECRE"},{localizedString:"Bandes",code:"BANDES"},{localizedString:"Banesco",code:"BANESCO"},{localizedString:"BBVA Provincial",code:"BBVAPROVINCIAL"},{localizedString:"Central Bank of Venezuela",code:"CENTRALBANKOFVENEZUE"},{localizedString:"Fondo Comn",code:"FONDOCOMUN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Sofitasa",code:"SOFITASA"},{localizedString:"Women's Development Bank",code:"WOMENSDEVELOPMENTBAN"}],[n.Country.ZA]:[{localizedString:"Absa",code:"ABSA"},{localizedString:"Capitec Banking Group",code:"CAPITECBANKINGGROUP"},{localizedString:"FNB",code:"FNB"},{localizedString:"Investec Bank",code:"INVESTECBANK"},{localizedString:"Nedbank",code:"NEDBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Standard Bank",code:"STANDARDBANK"}]}},985406:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAllBanks=t.getBanks=void 0;const n=r(782912);t.getBanks=function(e){return{banks:n.banks[e.country]}},t.getAllBanks=function(){return n.banks}},443651:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(453576);t.default={[n.Country.AD]:376,[n.Country.AE]:971,[n.Country.AF]:93,[n.Country.AG]:1268,[n.Country.AI]:1264,[n.Country.AL]:355,[n.Country.AM]:374,[n.Country.AO]:244,[n.Country.AQ]:672,[n.Country.AR]:54,[n.Country.AS]:1684,[n.Country.AT]:43,[n.Country.AU]:61,[n.Country.AW]:297,[n.Country.AX]:358,[n.Country.AZ]:994,[n.Country.BA]:387,[n.Country.BB]:1246,[n.Country.BD]:880,[n.Country.BE]:32,[n.Country.BF]:226,[n.Country.BG]:359,[n.Country.BH]:973,[n.Country.BI]:257,[n.Country.BJ]:229,[n.Country.BL]:590,[n.Country.BM]:1441,[n.Country.BN]:673,[n.Country.BO]:591,[n.Country.BR]:55,[n.Country.BS]:1242,[n.Country.BT]:975,[n.Country.BW]:267,[n.Country.BY]:375,[n.Country.BZ]:501,[n.Country.CA]:1,[n.Country.CC]:61,[n.Country.CD]:243,[n.Country.CF]:236,[n.Country.CG]:242,[n.Country.CH]:41,[n.Country.CI]:225,[n.Country.CK]:682,[n.Country.CL]:56,[n.Country.CM]:237,[n.Country.CN]:86,[n.Country.CO]:57,[n.Country.CR]:506,[n.Country.CU]:53,[n.Country.CV]:238,[n.Country.CX]:61,[n.Country.CY]:357,[n.Country.CZ]:420,[n.Country.DE]:49,[n.Country.DJ]:253,[n.Country.DK]:45,[n.Country.DM]:1767,[n.Country.DO]:1849,[n.Country.DZ]:213,[n.Country.EC]:593,[n.Country.EE]:372,[n.Country.EG]:20,[n.Country.ER]:291,[n.Country.ES]:34,[n.Country.ET]:251,[n.Country.FI]:358,[n.Country.FJ]:679,[n.Country.FK]:500,[n.Country.FM]:691,[n.Country.FO]:298,[n.Country.FR]:33,[n.Country.GA]:241,[n.Country.GB]:44,[n.Country.GD]:1473,[n.Country.GE]:995,[n.Country.GF]:594,[n.Country.GG]:44,[n.Country.GH]:233,[n.Country.GI]:350,[n.Country.GL]:299,[n.Country.GM]:220,[n.Country.GN]:224,[n.Country.GP]:590,[n.Country.GQ]:240,[n.Country.GR]:30,[n.Country.GS]:500,[n.Country.GT]:502,[n.Country.GU]:1671,[n.Country.GW]:245,[n.Country.GY]:595,[n.Country.HK]:852,[n.Country.HN]:504,[n.Country.HR]:385,[n.Country.HT]:509,[n.Country.HU]:36,[n.Country.ID]:62,[n.Country.IE]:353,[n.Country.IL]:972,[n.Country.IM]:44,[n.Country.IN]:91,[n.Country.IO]:246,[n.Country.IQ]:964,[n.Country.IR]:98,[n.Country.IS]:354,[n.Country.IT]:39,[n.Country.JE]:44,[n.Country.JM]:1876,[n.Country.JO]:962,[n.Country.JP]:81,[n.Country.KE]:254,[n.Country.KG]:996,[n.Country.KH]:855,[n.Country.KI]:686,[n.Country.KM]:269,[n.Country.KN]:1869,[n.Country.KP]:850,[n.Country.KR]:82,[n.Country.KW]:965,[n.Country.KY]:345,[n.Country.KZ]:77,[n.Country.LA]:856,[n.Country.LB]:961,[n.Country.LC]:1758,[n.Country.LI]:423,[n.Country.LK]:94,[n.Country.LR]:231,[n.Country.LS]:266,[n.Country.LT]:370,[n.Country.LU]:352,[n.Country.LV]:371,[n.Country.LY]:218,[n.Country.MA]:212,[n.Country.MC]:377,[n.Country.MD]:373,[n.Country.ME]:382,[n.Country.MF]:590,[n.Country.MG]:261,[n.Country.MH]:692,[n.Country.MK]:389,[n.Country.ML]:223,[n.Country.MM]:95,[n.Country.MN]:976,[n.Country.MO]:853,[n.Country.MP]:1670,[n.Country.MQ]:596,[n.Country.MR]:222,[n.Country.MS]:1664,[n.Country.MT]:356,[n.Country.MU]:230,[n.Country.MV]:960,[n.Country.MW]:265,[n.Country.MX]:52,[n.Country.MY]:60,[n.Country.MZ]:258,[n.Country.NA]:264,[n.Country.NC]:687,[n.Country.NE]:227,[n.Country.NF]:672,[n.Country.NG]:234,[n.Country.NI]:505,[n.Country.NL]:31,[n.Country.NO]:47,[n.Country.NP]:977,[n.Country.NR]:674,[n.Country.NU]:683,[n.Country.NZ]:64,[n.Country.OM]:968,[n.Country.PA]:507,[n.Country.PE]:51,[n.Country.PF]:689,[n.Country.PG]:675,[n.Country.PH]:63,[n.Country.PK]:92,[n.Country.PL]:48,[n.Country.PM]:508,[n.Country.PN]:872,[n.Country.PR]:1939,[n.Country.PS]:970,[n.Country.PT]:351,[n.Country.PW]:680,[n.Country.PY]:595,[n.Country.QA]:974,[n.Country.RE]:262,[n.Country.RO]:40,[n.Country.RS]:381,[n.Country.RU]:7,[n.Country.RW]:250,[n.Country.SA]:966,[n.Country.SB]:677,[n.Country.SC]:248,[n.Country.SD]:249,[n.Country.SE]:46,[n.Country.SG]:65,[n.Country.SH]:290,[n.Country.SI]:386,[n.Country.SJ]:47,[n.Country.SK]:421,[n.Country.SL]:232,[n.Country.SM]:378,[n.Country.SN]:221,[n.Country.SO]:252,[n.Country.SR]:597,[n.Country.ST]:239,[n.Country.SV]:503,[n.Country.SY]:963,[n.Country.SZ]:268,[n.Country.TC]:1649,[n.Country.TD]:235,[n.Country.TG]:228,[n.Country.TH]:66,[n.Country.TJ]:992,[n.Country.TK]:690,[n.Country.TL]:670,[n.Country.TM]:993,[n.Country.TN]:216,[n.Country.TO]:676,[n.Country.TR]:90,[n.Country.TT]:1868,[n.Country.TV]:688,[n.Country.TW]:886,[n.Country.TZ]:255,[n.Country.UA]:380,[n.Country.UG]:256,[n.Country.US]:1,[n.Country.UY]:598,[n.Country.UZ]:998,[n.Country.VA]:379,[n.Country.VC]:1784,[n.Country.VE]:58,[n.Country.VG]:1284,[n.Country.VI]:1340,[n.Country.VN]:84,[n.Country.VU]:678,[n.Country.WF]:681,[n.Country.WS]:685,[n.Country.XK]:383,[n.Country.YE]:967,[n.Country.YT]:262,[n.Country.ZA]:27,[n.Country.ZM]:260,[n.Country.ZW]:263}},139003:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAllCallingCodes=t.processQuery=void 0;const n=r(453576),o=r(443651);t.processQuery=function(){return{type:n.StaticDataQueryType.CALLING_CODES,collection:o.default}},t.getAllCallingCodes=function(){return o.default}},180814:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeographicStatesLevel1=t.GeographicStatesLevel0=void 0;const n=r(453576);t.GeographicStatesLevel0={[n.Country.FR]:{"FR-0-42":{code:"42",name:"Alsace"},"FR-0-72":{code:"72",name:"Aquitaine"},"FR-0-83":{code:"83",name:"Auvergne"},"FR-0-25":{code:"25",name:"Basse-Normandie"},"FR-0-26":{code:"26",name:"Bourgogne"},"FR-0-53":{code:"53",name:"Bretagne"},"FR-0-24":{code:"24",name:"Centre"},"FR-0-21":{code:"21",name:"Champagne-Ardenne"},"FR-0-94":{code:"94",name:"Corse"},"FR-0-43":{code:"43",name:"Franche-Comte"},"FR-0-01":{code:"01",name:"Guadeloupe"},"FR-0-03":{code:"03",name:"Guyane"},"FR-0-23":{code:"23",name:"Haute-Normandie"},"FR-0-11":{code:"11",name:"Ile-de-France"},"FR-0-04":{code:"04",name:"La Reunion"},"FR-0-91":{code:"91",name:"Languedoc-Roussillon"},"FR-0-74":{code:"74",name:"Limousin"},"FR-0-41":{code:"41",name:"Lorraine"},"FR-0-02":{code:"02",name:"Martinique"},"FR-0-73":{code:"73",name:"Midi-Pyrenees"},"FR-0-31":{code:"31",name:"Nord-Pas-de-Calais"},"FR-0-52":{code:"52",name:"Pays de la Loire"},"FR-0-22":{code:"22",name:"Picardie"},"FR-0-54":{code:"54",name:"Poitou-Charentes"},"FR-0-93":{code:"93",name:"Provence-Alpes-Cote d'Azur"},"FR-0-82":{code:"82",name:"Rhone-Alpes"}},[n.Country.GB]:{"GB-0-67":{code:"67",name:"Aberdeenshire"},"GB-0-68":{code:"68",name:"Angus"},"GB-0-69":{code:"69",name:"Antrim"},"GB-0-70":{code:"70",name:"Ards"},"GB-0-71":{code:"71",name:"Argyll"},"GB-0-72":{code:"72",name:"Armagh"},"GB-0-01":{code:"01",name:"Avon"},"GB-0-73":{code:"73",name:"Ayrshire"},"GB-0-74":{code:"74",name:"Ballymena"},"GB-0-75":{code:"75",name:"Ballymoney"},"GB-0-76":{code:"76",name:"Banbridge"},"GB-0-77":{code:"77",name:"Banffshire"},"GB-0-78":{code:"78",name:"Bath & NthEstSomerset"},"GB-0-02":{code:"02",name:"Bedfordshire"},"GB-0-79":{code:"79",name:"Belfast"},"GB-0-03":{code:"03",name:"Berkshire"},"GB-0-80":{code:"80",name:"Berwickshire"},"GB-0-81":{code:"81",name:"Blackburn"},"GB-0-82":{code:"82",name:"Blackpool"},"GB-0-04":{code:"04",name:"Borders"},"GB-0-83":{code:"83",name:"Bournemouth"},"GB-0-84":{code:"84",name:"Bracknell Forest"},"GB-0-85":{code:"85",name:"Brighton & Hove"},"GB-0-86":{code:"86",name:"Bristol"},"GB-0-05":{code:"05",name:"Buckinghamshire"},"GB-0-87":{code:"87",name:"Caithness"},"GB-0-06":{code:"06",name:"Cambridgeshire"},"GB-0-88":{code:"88",name:"Carrickfergus"},"GB-0-89":{code:"89",name:"Castlereagh"},"GB-0-07":{code:"07",name:"Central"},"GB-0-08":{code:"08",name:"Cheshire"},"GB-0-91":{code:"91",name:"Clackmannanshire"},"GB-0-12":{code:"12",name:"Cleveland"},"GB-0-09":{code:"09",name:"Clwyd"},"GB-0-92":{code:"92",name:"Coleraine"},"GB-0-93":{code:"93",name:"Cookstown"},"GB-0-10":{code:"10",name:"Cornwall"},"GB-0-94":{code:"94",name:"Craigavon"},"GB-0-11":{code:"11",name:"Cumbria"},"GB-0-95":{code:"95",name:"Darlington"},"GB-0-13":{code:"13",name:"Derbyshire"},"GB-0-16":{code:"16",name:"Devon"},"GB-0-14":{code:"14",name:"Dorset"},"GB-0-96":{code:"96",name:"Down"},"GB-0-97":{code:"97",name:"Dumfries a. Galloway"},"GB-0-98":{code:"98",name:"Dumfriesshire"},"GB-0-99":{code:"99",name:"Dunbartonshire"},"GB-0-100":{code:"100",name:"Dungannon"},"GB-0-15":{code:"15",name:"Durham"},"GB-0-17":{code:"17",name:"Dyfed"},"GB-0-101":{code:"101",name:"East Lothian"},"GB-0-102":{code:"102",name:"East Riding"},"GB-0-103":{code:"103",name:"East Sussex"},"GB-0-18":{code:"18",name:"Essex"},"GB-0-104":{code:"104",name:"Fermanagh"},"GB-0-19":{code:"19",name:"Fife"},"GB-0-20":{code:"20",name:"Gloucestershire"},"GB-0-22":{code:"22",name:"Grampian"},"GB-0-36":{code:"36",name:"Greater London"},"GB-0-21":{code:"21",name:"Greater Manchester"},"GB-0-23":{code:"23",name:"Gwent"},"GB-0-24":{code:"24",name:"Gwynedd"},"GB-0-105":{code:"105",name:"Halton"},"GB-0-25":{code:"25",name:"Hampshire"},"GB-0-106":{code:"106",name:"Hartlepool"},"GB-0-29":{code:"29",name:"Hereford and Worcs."},"GB-0-107":{code:"107",name:"Herefordshire"},"GB-0-27":{code:"27",name:"Hertfordshire"},"GB-0-108":{code:"108",name:"Highland"},"GB-0-28":{code:"28",name:"Humberside"},"GB-0-109":{code:"109",name:"Inverness-Shire"},"GB-0-110":{code:"110",name:"Isle Of Arran"},"GB-0-111":{code:"111",name:"Isle Of Barra"},"GB-0-112":{code:"112",name:"Isle Of Benbecula"},"GB-0-113":{code:"113",name:"Isle Of Bute"},"GB-0-114":{code:"114",name:"Isle Of Canna"},"GB-0-115":{code:"115",name:"Isle Of Coll"},"GB-0-116":{code:"116",name:"Isle Of Colonsay"},"GB-0-117":{code:"117",name:"Isle Of Cumbrae"},"GB-0-118":{code:"118",name:"Isle Of Eigg"},"GB-0-119":{code:"119",name:"Isle Of Gigha"},"GB-0-120":{code:"120",name:"Isle Of Harris"},"GB-0-121":{code:"121",name:"Isle Of Iona"},"GB-0-122":{code:"122",name:"Isle Of Islay"},"GB-0-123":{code:"123",name:"Isle Of Jura"},"GB-0-124":{code:"124",name:"Isle Of Lewis"},"GB-0-126":{code:"126",name:"Isle Of Mull"},"GB-0-127":{code:"127",name:"Isle Of North Uist"},"GB-0-128":{code:"128",name:"Isle Of Rum"},"GB-0-129":{code:"129",name:"Isle Of Scalpay"},"GB-0-131":{code:"131",name:"Isle Of Skye"},"GB-0-132":{code:"132",name:"Isle Of South Uist"},"GB-0-133":{code:"133",name:"Isle Of Tiree"},"GB-0-31":{code:"31",name:"Isle of Wight"},"GB-0-130":{code:"130",name:"Isles Of Scilly"},"GB-0-32":{code:"32",name:"Kent"},"GB-0-134":{code:"134",name:"Kincardineshire"},"GB-0-135":{code:"135",name:"Kingston-Upon-Hull"},"GB-0-136":{code:"136",name:"Kirkcudbrightshire"},"GB-0-137":{code:"137",name:"Lanarkshire"},"GB-0-33":{code:"33",name:"Lancashire"},"GB-0-138":{code:"138",name:"Larne"},"GB-0-139":{code:"139",name:"Leicester City"},"GB-0-34":{code:"34",name:"Leicestershire"},"GB-0-140":{code:"140",name:"Limavady"},"GB-0-35":{code:"35",name:"Lincolnshire"},"GB-0-141":{code:"141",name:"Lisburn"},"GB-0-142":{code:"142",name:"London"},"GB-0-143":{code:"143",name:"Londonderry"},"GB-0-37":{code:"37",name:"Lothian"},"GB-0-144":{code:"144",name:"Luton"},"GB-0-145":{code:"145",name:"Magherafelt"},"GB-0-39":{code:"39",name:"Merseyside"},"GB-0-38":{code:"38",name:"Mid Glamorgan"},"GB-0-146":{code:"146",name:"Middlesbrough"},"GB-0-65":{code:"65",name:"Middlesex"},"GB-0-147":{code:"147",name:"Midlothian"},"GB-0-148":{code:"148",name:"Milton Keynes"},"GB-0-149":{code:"149",name:"Morayshire"},"GB-0-150":{code:"150",name:"Moyle"},"GB-0-151":{code:"151",name:"Nairn"},"GB-0-152":{code:"152",name:"Newbury"},"GB-0-153":{code:"153",name:"Newry and Mourne"},"GB-0-154":{code:"154",name:"Newtownabbey"},"GB-0-41":{code:"41",name:"Norfolk"},"GB-0-155":{code:"155",name:"North Down"},"GB-0-156":{code:"156",name:"North Humberside"},"GB-0-157":{code:"157",name:"North Lincolnshire"},"GB-0-158":{code:"158",name:"North Somerset"},"GB-0-62":{code:"62",name:"North Yorkshire"},"GB-0-40":{code:"40",name:"Northamptonshire"},"GB-0-43":{code:"43",name:"Northumberland"},"GB-0-159":{code:"159",name:"Nottingham City"},"GB-0-42":{code:"42",name:"Nottinghamshire"},"GB-0-160":{code:"160",name:"NthEast Lincolnshire"},"GB-0-161":{code:"161",name:"Omagh"},"GB-0-162":{code:"162",name:"Orkney"},"GB-0-44":{code:"44",name:"Oxfordshire"},"GB-0-163":{code:"163",name:"Peeblesshire"},"GB-0-164":{code:"164",name:"Perthshire"},"GB-0-165":{code:"165",name:"Peterborough"},"GB-0-166":{code:"166",name:"Plymouth"},"GB-0-167":{code:"167",name:"Poole"},"GB-0-168":{code:"168",name:"Portsmouth"},"GB-0-45":{code:"45",name:"Powys"},"GB-0-169":{code:"169",name:"Reading"},"GB-0-170":{code:"170",name:"Redcar and Cleveland"},"GB-0-171":{code:"171",name:"Renfrewshire"},"GB-0-172":{code:"172",name:"Rochester Up. Medway"},"GB-0-173":{code:"173",name:"Ross-Shire"},"GB-0-175":{code:"175",name:"Roxburghshire"},"GB-0-176":{code:"176",name:"Rutland"},"GB-0-26":{code:"26",name:"Scotland"},"GB-0-177":{code:"177",name:"Shetland"},"GB-0-48":{code:"48",name:"Shropshire"},"GB-0-178":{code:"178",name:"Slough"},"GB-0-50":{code:"50",name:"Somerset"},"GB-0-47":{code:"47",name:"South Glamorgan"},"GB-0-179":{code:"179",name:"South Humberside"},"GB-0-63":{code:"63",name:"South Yorkshire"},"GB-0-180":{code:"180",name:"Southampton"},"GB-0-181":{code:"181",name:"Southend"},"GB-0-51":{code:"51",name:"Staffordshire"},"GB-0-182":{code:"182",name:"Sth. Gloucestershire"},"GB-0-183":{code:"183",name:"Stirlingshire"},"GB-0-184":{code:"184",name:"Stockton-on-Tees"},"GB-0-185":{code:"185",name:"Strabane"},"GB-0-46":{code:"46",name:"Strathclyde"},"GB-0-49":{code:"49",name:"Suffolk"},"GB-0-53":{code:"53",name:"Surrey"},"GB-0-52":{code:"52",name:"Sussex"},"GB-0-186":{code:"186",name:"Sutherland"},"GB-0-54":{code:"54",name:"Tayside"},"GB-0-187":{code:"187",name:"Thamesdown"},"GB-0-188":{code:"188",name:"Thurrock"},"GB-0-189":{code:"189",name:"Torbay"},"GB-0-55":{code:"55",name:"Tyne and Wear"},"GB-0-190":{code:"190",name:"Tyrone"},"GB-0-191":{code:"191",name:"Warrington"},"GB-0-56":{code:"56",name:"Warwickshire"},"GB-0-57":{code:"57",name:"West Glamorgan"},"GB-0-192":{code:"192",name:"West Lothian"},"GB-0-59":{code:"59",name:"West Midlands"},"GB-0-193":{code:"193",name:"West Sussex"},"GB-0-64":{code:"64",name:"West Yorkshire"},"GB-0-194":{code:"194",name:"Western Isles"},"GB-0-195":{code:"195",name:"Wigtownshire"},"GB-0-58":{code:"58",name:"Wiltshire"},"GB-0-196":{code:"196",name:"Windsor & Maidenhead"},"GB-0-197":{code:"197",name:"Wokingham"},"GB-0-60":{code:"60",name:"Worcestershire"},"GB-0-198":{code:"198",name:"Wrekin"},"GB-0-199":{code:"199",name:"York"},"GB-0-61":{code:"61",name:"Yorkshire"},"GB-0-1001":{code:"1001",name:"Blaenau Gwent"},"GB-0-1002":{code:"1002",name:"Bridgend"},"GB-0-1003":{code:"1003",name:"Caerphilly"},"GB-0-1004":{code:"1004",name:"Cardiff"},"GB-0-1005":{code:"1005",name:"Carmarthenshire"},"GB-0-1006":{code:"1006",name:"Ceredigion"},"GB-0-1007":{code:"1007",name:"Channel Islands"},"GB-0-1008":{code:"1008",name:"Conwy"},"GB-0-1009":{code:"1009",name:"Denbighshire"},"GB-0-1010":{code:"1010",name:"East Ayrshire"},"GB-0-1011":{code:"1011",name:"East Dunbartonshire"},"GB-0-1012":{code:"1012",name:"East Renfrewshire"},"GB-0-1013":{code:"1013",name:"Edinburgh City"},"GB-0-1014":{code:"1014",name:"Falkirk"},"GB-0-1015":{code:"1015",name:"Flintshire"},"GB-0-1016":{code:"1016",name:"Glasgow"},"GB-0-1017":{code:"1017",name:"Inverclyde"},"GB-0-1018":{code:"1018",name:"Isle of Anglesey"},"GB-0-1019":{code:"1019",name:"Isle of Man"},"GB-0-1020":{code:"1020",name:"Merthyr Tydfil"},"GB-0-1021":{code:"1021",name:"Monmouthshire"},"GB-0-1022":{code:"1022",name:"Moray"},"GB-0-1023":{code:"1023",name:"Neath Port Talbot"},"GB-0-1024":{code:"1024",name:"Newport"},"GB-0-1025":{code:"1025",name:"North Ayrshire"},"GB-0-1026":{code:"1026",name:"North Lanarkshire"},"GB-0-1027":{code:"1027",name:"Pembrokeshire"},"GB-0-1028":{code:"1028",name:"Rhondda Cynon Taff"},"GB-0-1029":{code:"1029",name:"South Ayrshire"},"GB-0-1030":{code:"1030",name:"South Lanarkshire"},"GB-0-1031":{code:"1031",name:"Stirling"},"GB-0-1032":{code:"1032",name:"Swansea"},"GB-0-1033":{code:"1033",name:"The Vale of Glamorgan"},"GB-0-1034":{code:"1034",name:"Torfaen"},"GB-0-1035":{code:"1035",name:"West Dunbartonshire"},"GB-0-1036":{code:"1036",name:"Wrexham"}},[n.Country.US]:{"US-0-AL":{code:"AL",name:"Alabama"},"US-0-AK":{code:"AK",name:"Alaska"},"US-0-AS":{code:"AS",name:"American Samoa"},"US-0-AZ":{code:"AZ",name:"Arizona"},"US-0-AR":{code:"AR",name:"Arkansas"},"US-0-AA":{code:"AA",name:"Armed Forces America"},"US-0-AE":{code:"AE",name:"Armed Forces Europe"},"US-0-AP":{code:"AP",name:"Armed Forces Pacific"},"US-0-CA":{code:"CA",name:"California"},"US-0-CEI":{code:"CEI",name:"Canton & Enderbury Islands"},"US-0-CO":{code:"CO",name:"Colorado"},"US-0-CT":{code:"CT",name:"Connecticut"},"US-0-DC":{code:"DC",name:"District of Columbia"},"US-0-DE":{code:"DE",name:"Delaware"},"US-0-FL":{code:"FL",name:"Florida"},"US-0-GA":{code:"GA",name:"Georgia"},"US-0-GU":{code:"GU",name:"Guam"},"US-0-HI":{code:"HI",name:"Hawaii"},"US-0-IA":{code:"IA",name:"Iowa"},"US-0-ID":{code:"ID",name:"Idaho"},"US-0-IL":{code:"IL",name:"Illinois"},"US-0-IN":{code:"IN",name:"Indiana"},"US-0-KS":{code:"KS",name:"Kansas"},"US-0-KY":{code:"KY",name:"Kentucky"},"US-0-LA":{code:"LA",name:"Louisiana"},"US-0-MA":{code:"MA",name:"Massachusetts"},"US-0-MD":{code:"MD",name:"Maryland"},"US-0-ME":{code:"ME",name:"Maine"},"US-0-MP":{code:"MP",name:"Mariana Islands"},"US-0-MI":{code:"MI",name:"Michigan"},"US-0-MN":{code:"MN",name:"Minnesota"},"US-0-MS":{code:"MS",name:"Mississippi"},"US-0-MO":{code:"MO",name:"Missouri"},"US-0-MT":{code:"MT",name:"Montana"},"US-0-NE":{code:"NE",name:"Nebraska"},"US-0-NV":{code:"NV",name:"Nevada"},"US-0-NH":{code:"NH",name:"New Hampshire"},"US-0-NJ":{code:"NJ",name:"New Jersey"},"US-0-NM":{code:"NM",name:"New Mexico"},"US-0-NY":{code:"NY",name:"New York"},"US-0-NC":{code:"NC",name:"North Carolina"},"US-0-ND":{code:"ND",name:"North Dakota"},"US-0-NMI":{code:"NMI",name:"North Mariana Islands"},"US-0-OH":{code:"OH",name:"Ohio"},"US-0-OK":{code:"OK",name:"Oklahoma"},"US-0-OR":{code:"OR",name:"Oregon"},"US-0-PW":{code:"PW",name:"Palau"},"US-0-PA":{code:"PA",name:"Pennsylvania"},"US-0-PR":{code:"PR",name:"Puerto Rico"},"US-0-RI":{code:"RI",name:"Rhode Island"},"US-0-SC":{code:"SC",name:"South Carolina"},"US-0-SD":{code:"SD",name:"South Dakota"},"US-0-TN":{code:"TN",name:"Tennessee"},"US-0-TX":{code:"TX",name:"Texas"},"US-0-UT":{code:"UT",name:"Utah"},"US-0-VT":{code:"VT",name:"Vermont"},"US-0-VI":{code:"VI",name:"Virgin Islands, US"},"US-0-VA":{code:"VA",name:"Virginia"},"US-0-WA":{code:"WA",name:"Washington"},"US-0-WV":{code:"WV",name:"West Virginia"},"US-0-WI":{code:"WI",name:"Wisconsin"},"US-0-WY":{code:"WY",name:"Wyoming"}},[n.Country.CA]:{"CA-0-AB":{code:"AB",name:"Alberta"},"CA-0-BC":{code:"BC",name:"British Columbia"},"CA-0-MB":{code:"MB",name:"Manitoba"},"CA-0-NB":{code:"NB",name:"New Brunswick"},"CA-0-NL":{code:"NL",name:"Newfoundland and Labrador"},"CA-0-NS":{code:"NS",name:"Nova Scotia"},"CA-0-NT":{code:"NT",name:"Northwest Territories"},"CA-0-NU":{code:"NU",name:"Nunavut"},"CA-0-ON":{code:"ON",name:"Ontario"},"CA-0-PE":{code:"PE",name:"Prince Edward Island"},"CA-0-QC":{code:"QC",name:"Qubec"},"CA-0-SK":{code:"SK",name:"Saskatchewan"},"CA-0-YT":{code:"YT",name:"Yukon"}},[n.Country.AU]:{"AU-0-SA":{code:"SA",name:"South Australia"},"AU-0-WA":{code:"WA",name:"Western Australia"},"AU-0-NSW":{code:"NSW",name:"New South Wales"},"AU-0-QLD":{code:"QLD",name:"Queensland"},"AU-0-TAS":{code:"TAS",name:"Tasmania"},"AU-0-VIC":{code:"VIC",name:"Victoria"},"AU-0-ACT":{code:"ACT",name:"Australian Capital Territory"},"AU-0-JBT":{code:"JBT",name:"Jervis Bay Territory"},"AU-0-NT":{code:"NT",name:"Northern Territory"}},[n.Country.IE]:{"IE-0-05":{code:"05",name:"Carlow"},"IE-0-04":{code:"04",name:"Clare"},"IE-0-03":{code:"03",name:"Cork"},"IE-0-07":{code:"07",name:"Donegal"},"IE-0-06":{code:"06",name:"Dublin"},"IE-0-10":{code:"10",name:"Galway"},"IE-0-13":{code:"13",name:"Cavan"},"IE-0-14":{code:"14",name:"Kerry"},"IE-0-11":{code:"11",name:"Kildare"},"IE-0-12":{code:"12",name:"Kilkenny"},"IE-0-19":{code:"19",name:"Laois"},"IE-0-18":{code:"18",name:"Leitrim"},"IE-0-17":{code:"17",name:"Limerick"},"IE-0-16":{code:"16",name:"Longford"},"IE-0-20":{code:"20",name:"Louth"},"IE-0-23":{code:"23",name:"Mayo"},"IE-0-22":{code:"22",name:"Meath"},"IE-0-21":{code:"21",name:"Monaghan"},"IE-0-24":{code:"24",name:"Offaly"},"IE-0-25":{code:"25",name:"Roscommon"},"IE-0-26":{code:"26",name:"Sligo"},"IE-0-27":{code:"27",name:"Tipperary"},"IE-0-29":{code:"29",name:"Waterford"},"IE-0-31":{code:"31",name:"Westmeath"},"IE-0-32":{code:"32",name:"Wexford"},"IE-0-30":{code:"30",name:"Wicklow"}},[n.Country.ES]:{"ES-0-AN":{code:"AN",name:"Andalucia"},"ES-0-AR":{code:"AR",name:"Aragn"},"ES-0-AS":{code:"AS",name:"Asturias, Principado de"},"ES-0-CN":{code:"CN",name:"Canarias"},"ES-0-CB":{code:"CB",name:"Cantabria"},"ES-0-CM":{code:"CM",name:"Castilla-La Mancha"},"ES-0-CL":{code:"CL",name:"Castilla y Len"},"ES-0-CT":{code:"CT",name:"Catalua"},"ES-0-EX":{code:"EX",name:"Extremadura"},"ES-0-GA":{code:"GA",name:"Galicia"},"ES-0-IB":{code:"IB",name:"Illes Balears"},"ES-0-RI":{code:"RI",name:"La Rioja"},"ES-0-MD":{code:"MD",name:"Madrid, Comunidad de"},"ES-0-MC":{code:"MC",name:"Murcia, Regin de"},"ES-0-NC":{code:"NC",name:"Navarra, Comunidad Foral de"},"ES-0-PV":{code:"PV",name:"Pas Vasco"},"ES-0-VC":{code:"VC",name:"Valenciana, Comunitat"},"ES-0-CE":{code:"CE",name:"Ceuta"},"ES-0-ML":{code:"ML",name:"Melilla"}},[n.Country.MX]:{"MX-0-DIF":{code:"DIF",name:"Distrito Federal"},"MX-0-AGU":{code:"AGU",name:"Aguascalientes"},"MX-0-BCN":{code:"BCN",name:"Baja California"},"MX-0-BCS":{code:"BCS",name:"Baja California Sur"},"MX-0-CAM":{code:"CAM",name:"Campeche"},"MX-0-COA":{code:"COA",name:"Coahuila"},"MX-0-COL":{code:"COL",name:"Colima"},"MX-0-CHP":{code:"CHP",name:"Chiapas"},"MX-0-CHH":{code:"CHH",name:"Chihuahua"},"MX-0-DUR":{code:"DUR",name:"Durango"},"MX-0-GUA":{code:"GUA",name:"Guanajuato"},"MX-0-GRO":{code:"GRO",name:"Guerrero"},"MX-0-HID":{code:"HID",name:"Hidalgo"},"MX-0-JAL":{code:"JAL",name:"Jalisco"},"MX-0-MEX":{code:"MEX",name:"Mxico"},"MX-0-MIC":{code:"MIC",name:"Michoacn"},"MX-0-MOR":{code:"MOR",name:"Morelos"},"MX-0-NAY":{code:"NAY",name:"Nayarit"},"MX-0-NLE":{code:"NLE",name:"Nuevo Len"},"MX-0-OAX":{code:"OAX",name:"Oaxaca"},"MX-0-PUE":{code:"PUE",name:"Puebla"},"MX-0-QUE":{code:"QUE",name:"Quertaro"},"MX-0-ROO":{code:"ROO",name:"Quintana Roo"},"MX-0-SLP":{code:"SLP",name:"San Luis Potos"},"MX-0-SIN":{code:"SIN",name:"Sinaloa"},"MX-0-SON":{code:"SON",name:"Sonora"},"MX-0-TAB":{code:"TAB",name:"Tabasco"},"MX-0-TAM":{code:"TAM",name:"Tamaulipas"},"MX-0-TLA":{code:"TLA",name:"Tlaxcala"},"MX-0-VER":{code:"VER",name:"Veracruz"},"MX-0-YUC":{code:"YUC",name:"Yucatn"},"MX-0-ZAC":{code:"ZAC",name:"Zacatecas"}},[n.Country.CO]:{"CO-0-DC":{code:"DC",name:"Distrito Capital de Bogot"},"CO-0-AMA":{code:"AMA",name:"Amazonas"},"CO-0-ANT":{code:"ANT",name:"Antioquia"},"CO-0-ARA":{code:"ARA",name:"Arauca"},"CO-0-ATL":{code:"ATL",name:"Atlntico"},"CO-0-BOL":{code:"BOL",name:"Bolvar"},"CO-0-BOY":{code:"BOY",name:"Boyac"},"CO-0-CAL":{code:"CAL",name:"Caldas"},"CO-0-CAQ":{code:"CAQ",name:"Caquet"},"CO-0-CAS":{code:"CAS",name:"Casanare"},"CO-0-CAU":{code:"CAU",name:"Cauca"},"CO-0-CES":{code:"CES",name:"Cesar"},"CO-0-COR":{code:"COR",name:"Crdoba"},"CO-0-CUN":{code:"CUN",name:"Cundinamarca"},"CO-0-CHO":{code:"CHO",name:"Choc"},"CO-0-GUA":{code:"GUA",name:"Guaina"},"CO-0-GUV":{code:"GUV",name:"Guaviare"},"CO-0-HUI":{code:"HUI",name:"Huila"},"CO-0-LAG":{code:"LAG",name:"La Guajira"},"CO-0-MAG":{code:"MAG",name:"Magdalena"},"CO-0-MET":{code:"MET",name:"Meta"},"CO-0-NAR":{code:"NAR",name:"Nario"},"CO-0-NSA":{code:"NSA",name:"Norte de Santander"},"CO-0-PUT":{code:"PUT",name:"Putumayo"},"CO-0-QUI":{code:"QUI",name:"Quindo"},"CO-0-RIS":{code:"RIS",name:"Risaralda"},"CO-0-SAP":{code:"SAP",name:"San Andrs, Providencia y Santa Catalina"},"CO-0-SAN":{code:"SAN",name:"Santander"},"CO-0-SUC":{code:"SUC",name:"Sucre"},"CO-0-TOL":{code:"TOL",name:"Tolima"},"CO-0-VAC":{code:"VAC",name:"Valle del Cauca"},"CO-0-VAU":{code:"VAU",name:"Vaups"},"CO-0-VID":{code:"VID",name:"Vichada"}},[n.Country.PE]:{"PE-0-CAL":{code:"CAL",name:"El Callao"},"PE-0-LMA":{code:"LMA",name:"Municipalidad Metropolitana de Lima"},"PE-0-AMA":{code:"AMA",name:"Amazonas"},"PE-0-ANC":{code:"ANC",name:"Ancash"},"PE-0-APU":{code:"APU",name:"Apurmac"},"PE-0-ARE":{code:"ARE",name:"Arequipa"},"PE-0-AYA":{code:"AYA",name:"Ayacucho"},"PE-0-CAJ":{code:"CAJ",name:"Cajamarca"},"PE-0-CUS":{code:"CUS",name:"Cusco"},"PE-0-HUV":{code:"HUV",name:"Huancavelica"},"PE-0-HUC":{code:"HUC",name:"Hunuco"},"PE-0-ICA":{code:"ICA",name:"Ica"},"PE-0-JUN":{code:"JUN",name:"Junn"},"PE-0-LAL":{code:"LAL",name:"La Libertad"},"PE-0-LAM":{code:"LAM",name:"Lambayeque"},"PE-0-LIM":{code:"LIM",name:"Lima"},"PE-0-LOR":{code:"LOR",name:"Loreto"},"PE-0-MDD":{code:"MDD",name:"Madre de Dios"},"PE-0-MOQ":{code:"MOQ",name:"Moquegua"},"PE-0-PAS":{code:"PAS",name:"Pasco"},"PE-0-PIU":{code:"PIU",name:"Piura"},"PE-0-PUN":{code:"PUN",name:"Puno"},"PE-0-SAM":{code:"SAM",name:"San Martn"},"PE-0-TAC":{code:"TAC",name:"Tacna"},"PE-0-TUM":{code:"TUM",name:"Tumbes"},"PE-0-UCA":{code:"UCA",name:"Ucayali"}},[n.Country.CL]:{"CL-0-AI":{code:"AI",name:"Aisn del General Carlos Ibaez del Campo"},"CL-0-AN":{code:"AN",name:"Antofagasta"},"CL-0-AR":{code:"AR",name:"Araucana"},"CL-0-AP":{code:"AP",name:"Arica y Parinacota"},"CL-0-AT":{code:"AT",name:"Atacama"},"CL-0-BI":{code:"BI",name:"Biobo"},"CL-0-CO":{code:"CO",name:"Coquimbo"},"CL-0-LI":{code:"LI",name:"Libertador General Bernardo O'Higgins"},"CL-0-LL":{code:"LL",name:"Los Lagos"},"CL-0-LR":{code:"LR",name:"Los Ros"},"CL-0-MA":{code:"MA",name:"Magallanes y la Antrtica Chilena"},"CL-0-ML":{code:"ML",name:"Maule"},"CL-0-RM":{code:"RM",name:"Metropolitana de Santiago"},"CL-0-TA":{code:"TA",name:"Tarapac"},"CL-0-VS":{code:"VS",name:"Valparaso"}},[n.Country.DE]:{"DE-0-BW":{code:"BW",name:"Baden-Wrttemberg"},"DE-0-BY":{code:"BY",name:"Bayern"},"DE-0-BE":{code:"BE",name:"Berlin"},"DE-0-BB":{code:"BB",name:"Brandenburg"},"DE-0-HB":{code:"HB",name:"Bremen"},"DE-0-HH":{code:"HH",name:"Hamburg"},"DE-0-HE":{code:"HE",name:"Hessen"},"DE-0-MV":{code:"MV",name:"Mecklenburg-Vorpommern"},"DE-0-NI":{code:"NI",name:"Niedersachsen"},"DE-0-NW":{code:"NW",name:"Nordrhein-Westfalen"},"DE-0-RP":{code:"RP",name:"Rheinland-Pfalz"},"DE-0-SL":{code:"SL",name:"Saarland"},"DE-0-SN":{code:"SN",name:"Sachsen"},"DE-0-ST":{code:"ST",name:"Sachsen-Anhalt"},"DE-0-SH":{code:"SH",name:"Schleswig-Holstein"},"DE-0-TH":{code:"TH",name:"Thringen"}},[n.Country.IT]:{"IT-0-65":{code:"65",name:"Abruzzo"},"IT-0-77":{code:"77",name:"Basilicata"},"IT-0-78":{code:"78",name:"Calabria"},"IT-0-72":{code:"72",name:"Campania"},"IT-0-45":{code:"45",name:"Emilia-Romagna"},"IT-0-36":{code:"36",name:"Friuli-Venezia Giulia"},"IT-0-62":{code:"62",name:"Lazio"},"IT-0-42":{code:"42",name:"Liguria"},"IT-0-25":{code:"25",name:"Lombardia"},"IT-0-57":{code:"57",name:"Marche"},"IT-0-67":{code:"67",name:"Molise"},"IT-0-21":{code:"21",name:"Piemonte"},"IT-0-75":{code:"75",name:"Puglia"},"IT-0-88":{code:"88",name:"Sardegna"},"IT-0-82":{code:"82",name:"Sicilia"},"IT-0-52":{code:"52",name:"Toscana"},"IT-0-32":{code:"32",name:"Trentino Alto Adige"},"IT-0-55":{code:"55",name:"Umbria"},"IT-0-23":{code:"23",name:"Valle d'Aosta"},"IT-0-34":{code:"34",name:"Veneto"}},[n.Country.CH]:{"CH-0-AG":{code:"AG",name:"Aargau"},"CH-0-AR":{code:"AR",name:"Appenzell Ausserrhoden"},"CH-0-AI":{code:"AI",name:"Appenzell Innerrhoden"},"CH-0-BL":{code:"BL",name:"Basel-Landschaft"},"CH-0-BS":{code:"BS",name:"Basel-Stadt"},"CH-0-BE":{code:"BE",name:"Berne"},"CH-0-FR":{code:"FR",name:"Fribourg"},"CH-0-GE":{code:"GE",name:"Genve"},"CH-0-GL":{code:"GL",name:"Glarus"},"CH-0-GR":{code:"GR",name:"Graubnden"},"CH-0-JU":{code:"JU",name:"Jura"},"CH-0-LU":{code:"LU",name:"Luzern"},"CH-0-NE":{code:"NE",name:"Neuchtel"},"CH-0-NW":{code:"NW",name:"Nidwalden"},"CH-0-OW":{code:"OW",name:"Obwalden"},"CH-0-SG":{code:"SG",name:"Sankt Gallen"},"CH-0-SH":{code:"SH",name:"Schaffhausen"},"CH-0-SZ":{code:"SZ",name:"Schwyz"},"CH-0-SO":{code:"SO",name:"Solothurn"},"CH-0-TG":{code:"TG",name:"Thurgau"},"CH-0-TI":{code:"TI",name:"Ticino"},"CH-0-UR":{code:"UR",name:"Uri"},"CH-0-VS":{code:"VS",name:"Valais"},"CH-0-VD":{code:"VD",name:"Vaud"},"CH-0-ZG":{code:"ZG",name:"Zug"},"CH-0-ZH":{code:"ZH",name:"Zrich"}},[n.Country.BE]:{"BE-0-BRU":{code:"BRU",name:"Bruxelles-Capitale, Rgion de"},"BE-0-VLG":{code:"VLG",name:"Vlaamse Gewest"},"BE-0-WAL":{code:"WAL",name:"Rgion wallonne"}},[n.Country.SE]:{"SE-0-K":{code:"K",name:"Blekinge ln"},"SE-0-W":{code:"W",name:"Dalarnas ln"},"SE-0-I":{code:"I",name:"Gotlands ln"},"SE-0-X":{code:"X",name:"Gvleborgs ln"},"SE-0-N":{code:"N",name:"Hallands ln"},"SE-0-Z":{code:"Z",name:"Jmtlands ln"},"SE-0-F":{code:"F",name:"Jnkpings ln"},"SE-0-H":{code:"H",name:"Kalmar ln"},"SE-0-G":{code:"G",name:"Kronobergs ln"},"SE-0-BD":{code:"BD",name:"Norrbottens ln"},"SE-0-M":{code:"M",name:"Skne ln"},"SE-0-AB":{code:"AB",name:"Stockholms ln"},"SE-0-D":{code:"D",name:"Sdermanlands ln"},"SE-0-C":{code:"C",name:"Uppsala ln"},"SE-0-S":{code:"S",name:"Vrmlands ln"},"SE-0-AC":{code:"AC",name:"Vsterbottens ln"},"SE-0-Y":{code:"Y",name:"Vsternorrlands ln"},"SE-0-U":{code:"U",name:"Vstmanlands ln"},"SE-0-O":{code:"O",name:"Vstra Gtalands ln"},"SE-0-T":{code:"T",name:"rebro ln"},"SE-0-E":{code:"E",name:"stergtlands ln"}},[n.Country.NO]:{"NO-0-2":{code:"2",name:"Akershus"},"NO-0-9":{code:"9",name:"Aust-Agder"},"NO-0-6":{code:"6",name:"Buskerud"},"NO-0-20":{code:"20",name:"Finnmark"},"NO-0-4":{code:"4",name:"Hedmark"},"NO-0-12":{code:"12",name:"Hordaland"},"NO-0-15":{code:"15",name:"Mre og Romsdal"},"NO-0-18":{code:"18",name:"Nordland"},"NO-0-17":{code:"17",name:"Nord-Trndelag"},"NO-0-5":{code:"5",name:"Oppland"},"NO-0-3":{code:"3",name:"Oslo"},"NO-0-11":{code:"11",name:"Rogaland"},"NO-0-14":{code:"14",name:"Sogn og Fjordane"},"NO-0-16":{code:"16",name:"Sr-Trndelag"},"NO-0-8":{code:"8",name:"Telemark"},"NO-0-19":{code:"19",name:"Troms"},"NO-0-10":{code:"10",name:"Vest-Agder"},"NO-0-7":{code:"7",name:"Vestfold"},"NO-0-1":{code:"1",name:"stfold"},"NO-0-22":{code:"22",name:"Jan Mayen"},"NO-0-21":{code:"21",name:"Svalbard"}},[n.Country.NL]:{"NL-0-DR":{code:"DR",name:"Drenthe"},"NL-0-FL":{code:"FL",name:"Flevoland"},"NL-0-FR":{code:"FR",name:"Frysln"},"NL-0-GE":{code:"GE",name:"Gelderland"},"NL-0-GR":{code:"GR",name:"Groningen"},"NL-0-LI":{code:"LI",name:"Limburg"},"NL-0-NB":{code:"NB",name:"Noord-Brabant"},"NL-0-NH":{code:"NH",name:"Noord-Holland"},"NL-0-OV":{code:"OV",name:"Overijssel"},"NL-0-UT":{code:"UT",name:"Utrecht"},"NL-0-ZE":{code:"ZE",name:"Zeeland"},"NL-0-ZH":{code:"ZH",name:"Zuid-Holland"}},[n.Country.PT]:{"PT-0-1":{code:"1",name:"Aveiro"},"PT-0-2":{code:"2",name:"Beja"},"PT-0-3":{code:"3",name:"Braga"},"PT-0-4":{code:"4",name:"Bragana"},"PT-0-5":{code:"5",name:"Castelo Branco"},"PT-0-6":{code:"6",name:"Coimbra"},"PT-0-7":{code:"7",name:"vora"},"PT-0-8":{code:"8",name:"Faro"},"PT-0-9":{code:"9",name:"Guarda"},"PT-0-10":{code:"10",name:"Leiria"},"PT-0-11":{code:"11",name:"Lisboa"},"PT-0-12":{code:"12",name:"Portalegre"},"PT-0-13":{code:"13",name:"Porto"},"PT-0-14":{code:"14",name:"Santarm"},"PT-0-15":{code:"15",name:"Setbal"},"PT-0-16":{code:"16",name:"Viana do Castelo"},"PT-0-17":{code:"17",name:"Vila Real"},"PT-0-18":{code:"18",name:"Viseu"},"PT-0-20":{code:"20",name:"Regio Autnoma dos Aores"},"PT-0-30":{code:"30",name:"Regio Autnoma da Madeira"}}},t.GeographicStatesLevel1={[n.Country.AR]:{"AR-1-C":{code:"C",name:"Ciudad Autnoma de Buenos Aires"},"AR-1-B":{code:"B",name:"Buenos Aires"},"AR-1-K":{code:"K",name:"Catamarca"},"AR-1-H":{code:"H",name:"Chaco"},"AR-1-U":{code:"U",name:"Chubut"},"AR-1-X":{code:"X",name:"Crdoba"},"AR-1-W":{code:"W",name:"Corrientes"},"AR-1-E":{code:"E",name:"Entre Ros"},"AR-1-P":{code:"P",name:"Formosa"},"AR-1-Y":{code:"Y",name:"Jujuy"},"AR-1-L":{code:"L",name:"La Pampa"},"AR-1-F":{code:"F",name:"La Rioja"},"AR-1-M":{code:"M",name:"Mendoza"},"AR-1-N":{code:"N",name:"Misiones"},"AR-1-Q":{code:"Q",name:"Neuqun"},"AR-1-R":{code:"R",name:"Ro Negro"},"AR-1-A":{code:"A",name:"Salta"},"AR-1-J":{code:"J",name:"San Juan"},"AR-1-D":{code:"D",name:"San Luis"},"AR-1-Z":{code:"Z",name:"Santa Cruz"},"AR-1-S":{code:"S",name:"Santa Fe"},"AR-1-G":{code:"G",name:"Santiago del Estero"},"AR-1-V":{code:"V",name:"Tierra del Fuego"},"AR-1-T":{code:"T",name:"Tucumn"}},[n.Country.FR]:{"FR-1-01":{code:"01",name:"Ain"},"FR-1-02":{code:"02",name:"Aisne"},"FR-1-03":{code:"03",name:"Allier"},"FR-1-04":{code:"04",name:"Alpes (Hte-Provence)"},"FR-1-05":{code:"05",name:"Hautes Alpes"},"FR-1-06":{code:"06",name:"Alpes-Maritimes"},"FR-1-07":{code:"07",name:"Ardeche"},"FR-1-08":{code:"08",name:"Ardennes"},"FR-1-09":{code:"09",name:"Ariege"},"FR-1-10":{code:"10",name:"Aube"},"FR-1-11":{code:"11",name:"Aude"},"FR-1-12":{code:"12",name:"Aveyron"},"FR-1-67":{code:"67",name:"Bas-Rhin"},"FR-1-13":{code:"13",name:"Bouches-du-Rhone"},"FR-1-14":{code:"14",name:"Calvados"},"FR-1-15":{code:"15",name:"Cantal"},"FR-1-16":{code:"16",name:"Charente"},"FR-1-17":{code:"17",name:"Charente-Maritime"},"FR-1-18":{code:"18",name:"Cher"},"FR-1-19":{code:"19",name:"Correze"},"FR-1-97":{code:"97",name:"Corse-du-Nord"},"FR-1-20":{code:"20",name:"Corse-du-Sud"},"FR-1-21":{code:"21",name:"Cote-d'Or"},"FR-1-22":{code:"22",name:"Cotes-d'Armor"},"FR-1-23":{code:"23",name:"Creuse"},"FR-1-96":{code:"96",name:"D.O.M. T.O.M"},"FR-1-24":{code:"24",name:"Dordogne"},"FR-1-25":{code:"25",name:"Doubs"},"FR-1-26":{code:"26",name:"Drome"},"FR-1-91":{code:"91",name:"Essonne"},"FR-1-27":{code:"27",name:"Eure"},"FR-1-28":{code:"28",name:"Eure-et-Loir"},"FR-1-29":{code:"29",name:"Finistre"},"FR-1-30":{code:"30",name:"Gard"},"FR-1-31":{code:"31",name:"Haute Garonne"},"FR-1-32":{code:"32",name:"Gers"},"FR-1-33":{code:"33",name:"Gironde"},"FR-1-99":{code:"99",name:"Guyane"},"FR-1-100":{code:"100",name:"Haute-Corse"},"FR-1-68":{code:"68",name:"Haut-Rhin"},"FR-1-92":{code:"92",name:"Hauts-de-Seine"},"FR-1-34":{code:"34",name:"Herault"},"FR-1-35":{code:"35",name:"Ille-et-Vilaine"},"FR-1-36":{code:"36",name:"Indre"},"FR-1-37":{code:"37",name:"Indre-et-Loire"},"FR-1-38":{code:"38",name:"Isere"},"FR-1-39":{code:"39",name:"Jura"},"FR-1-40":{code:"40",name:"Landes"},"FR-1-41":{code:"41",name:"Loir-et-Cher"},"FR-1-42":{code:"42",name:"Loire"},"FR-1-43":{code:"43",name:"Haute Loire"},"FR-1-44":{code:"44",name:"Loire-Atlantique"},"FR-1-45":{code:"45",name:"Loiret"},"FR-1-46":{code:"46",name:"Lot"},"FR-1-47":{code:"47",name:"Lot-et-Garonne"},"FR-1-48":{code:"48",name:"Lozere"},"FR-1-49":{code:"49",name:"Maine-et-Loire"},"FR-1-50":{code:"50",name:"Manche"},"FR-1-51":{code:"51",name:"Marne"},"FR-1-52":{code:"52",name:"Haute Marne"},"FR-1-53":{code:"53",name:"Mayenne"},"FR-1-54":{code:"54",name:"Meurthe-et-Moselle"},"FR-1-55":{code:"55",name:"Meuse"},"FR-1-56":{code:"56",name:"Morbihan"},"FR-1-57":{code:"57",name:"Moselle"},"FR-1-58":{code:"58",name:"Nievre"},"FR-1-59":{code:"59",name:"Nord"},"FR-1-60":{code:"60",name:"Oise"},"FR-1-61":{code:"61",name:"Orne"},"FR-1-75":{code:"75",name:"Paris"},"FR-1-62":{code:"62",name:"Pas-de-Calais"},"FR-1-63":{code:"63",name:"Puy-de-Dme"},"FR-1-65":{code:"65",name:"Hautes Pyrenees"},"FR-1-64":{code:"64",name:"Pyrenees-Atlantiques"},"FR-1-66":{code:"66",name:"Pyrenees-Orientales"},"FR-1-69":{code:"69",name:"Rhone"},"FR-1-103":{code:"103",name:"Runion"},"FR-1-70":{code:"70",name:"Haute Saone"},"FR-1-71":{code:"71",name:"Saone-et-Loire"},"FR-1-72":{code:"72",name:"Sarthe"},"FR-1-73":{code:"73",name:"Savoie"},"FR-1-74":{code:"74",name:"Haute Savoie"},"FR-1-76":{code:"76",name:"Seine-Maritime"},"FR-1-93":{code:"93",name:"Seine-Saint-Denis"},"FR-1-77":{code:"77",name:"Seine-et-Marne"},"FR-1-79":{code:"79",name:"Deux Sevres"},"FR-1-80":{code:"80",name:"Somme"},"FR-1-81":{code:"81",name:"Tarn"},"FR-1-82":{code:"82",name:"Tarn-et-Garonne"},"FR-1-90":{code:"90",name:"Territoire-de-Belfort"},"FR-1-95":{code:"95",name:"Val-d'Oise"},"FR-1-94":{code:"94",name:"Val-de-Marne"},"FR-1-83":{code:"83",name:"Var"},"FR-1-84":{code:"84",name:"Vaucluse"},"FR-1-85":{code:"85",name:"Vendee"},"FR-1-86":{code:"86",name:"Vienne"},"FR-1-87":{code:"87",name:"Haute Vienne"},"FR-1-88":{code:"88",name:"Vosges"},"FR-1-89":{code:"89",name:"Yonne"},"FR-1-78":{code:"78",name:"Yvelines"}},[n.Country.ES]:{"ES-1-C":{code:"C",name:"A Corua"},"ES-1-VI":{code:"VI",name:"lava"},"ES-1-AB":{code:"AB",name:"Albacete"},"ES-1-A":{code:"A",name:"Alicante"},"ES-1-AL":{code:"AL",name:"Almera"},"ES-1-O":{code:"O",name:"Asturias"},"ES-1-AV":{code:"AV",name:"vila"},"ES-1-BA":{code:"BA",name:"Badajoz"},"ES-1-PM":{code:"PM",name:"Illes Balears"},"ES-1-B":{code:"B",name:"Barcelona"},"ES-1-BU":{code:"BU",name:"Burgos"},"ES-1-CC":{code:"CC",name:"Cceres"},"ES-1-CA":{code:"CA",name:"Cdiz"},"ES-1-S":{code:"S",name:"Cantabria"},"ES-1-CS":{code:"CS",name:"Castelln"},"ES-1-CR":{code:"CR",name:"Ciudad Real"},"ES-1-CO":{code:"CO",name:"Crdoba"},"ES-1-CU":{code:"CU",name:"Cuenca"},"ES-1-GI":{code:"GI",name:"Girona"},"ES-1-GR":{code:"GR",name:"Granada"},"ES-1-GU":{code:"GU",name:"Guadalajara"},"ES-1-SS":{code:"SS",name:"Gipuzkoa"},"ES-1-H":{code:"H",name:"Huelva"},"ES-1-HU":{code:"HU",name:"Huesca"},"ES-1-J":{code:"J",name:"Jan"},"ES-1-LO":{code:"LO",name:"La Rioja"},"ES-1-GC":{code:"GC",name:"Las Palmas"},"ES-1-LE":{code:"LE",name:"Len"},"ES-1-L":{code:"L",name:"Lleida"},"ES-1-LU":{code:"LU",name:"Lugo"},"ES-1-M":{code:"M",name:"Madrid"},"ES-1-MA":{code:"MA",name:"Mlaga"},"ES-1-MU":{code:"MU",name:"Murcia"},"ES-1-NA":{code:"NA",name:"Navarra"},"ES-1-OR":{code:"OR",name:"Ourense"},"ES-1-P":{code:"P",name:"Palencia"},"ES-1-PO":{code:"PO",name:"Pontevedra"},"ES-1-SA":{code:"SA",name:"Salamanca"},"ES-1-TF":{code:"TF",name:"Santa Cruz de Tenerife"},"ES-1-SG":{code:"SG",name:"Segovia"},"ES-1-SE":{code:"SE",name:"Sevilla"},"ES-1-SO":{code:"SO",name:"Soria"},"ES-1-T":{code:"T",name:"Tarragona"},"ES-1-TE":{code:"TE",name:"Teruel"},"ES-1-TO":{code:"TO",name:"Toledo"},"ES-1-V":{code:"V",name:"Valencia"},"ES-1-VA":{code:"VA",name:"Valladolid"},"ES-1-BI":{code:"BI",name:"Bizkaia"},"ES-1-ZA":{code:"ZA",name:"Zamora"},"ES-1-Z":{code:"Z",name:"Zaragoza"}},[n.Country.IT]:{"IT-1-AG":{code:"AG",name:"Agrigento"},"IT-1-AL":{code:"AL",name:"Alessandria"},"IT-1-AN":{code:"AN",name:"Ancona"},"IT-1-AO":{code:"AO",name:"Aosta"},"IT-1-AR":{code:"AR",name:"Arezzo"},"IT-1-AP":{code:"AP",name:"Ascoli Piceno"},"IT-1-AT":{code:"AT",name:"Asti"},"IT-1-AV":{code:"AV",name:"Avellino"},"IT-1-BA":{code:"BA",name:"Bari"},"IT-1-BT":{code:"BT",name:"Barletta-Andria-Trani"},"IT-1-BL":{code:"BL",name:"Belluno"},"IT-1-BN":{code:"BN",name:"Benevento"},"IT-1-BG":{code:"BG",name:"Bergamo"},"IT-1-BI":{code:"BI",name:"Biella"},"IT-1-BO":{code:"BO",name:"Bologna"},"IT-1-BZ":{code:"BZ",name:"Bolzano"},"IT-1-BS":{code:"BS",name:"Brescia"},"IT-1-BR":{code:"BR",name:"Brindisi"},"IT-1-CA":{code:"CA",name:"Cagliari"},"IT-1-CL":{code:"CL",name:"Caltanissetta"},"IT-1-CB":{code:"CB",name:"Campobasso"},"IT-1-CI":{code:"CI",name:"Carbonia-Iglesias"},"IT-1-CE":{code:"CE",name:"Caserta"},"IT-1-CT":{code:"CT",name:"Catania"},"IT-1-CZ":{code:"CZ",name:"Catanzaro"},"IT-1-CH":{code:"CH",name:"Chieti"},"IT-1-CO":{code:"CO",name:"Como"},"IT-1-CS":{code:"CS",name:"Cosenza"},"IT-1-CR":{code:"CR",name:"Cremona"},"IT-1-KR":{code:"KR",name:"Crotone"},"IT-1-CN":{code:"CN",name:"Cuneo"},"IT-1-EN":{code:"EN",name:"Enna"},"IT-1-FM":{code:"FM",name:"Fermo"},"IT-1-FE":{code:"FE",name:"Ferrara"},"IT-1-FI":{code:"FI",name:"Firenze"},"IT-1-FG":{code:"FG",name:"Foggia"},"IT-1-FC":{code:"FC",name:"Forl-Cesena"},"IT-1-FR":{code:"FR",name:"Frosinone"},"IT-1-GE":{code:"GE",name:"Genova"},"IT-1-GO":{code:"GO",name:"Gorizia"},"IT-1-GR":{code:"GR",name:"Grosseto"},"IT-1-IM":{code:"IM",name:"Imperia"},"IT-1-IS":{code:"IS",name:"Isernia"},"IT-1-SP":{code:"SP",name:"La Spezia"},"IT-1-AQ":{code:"AQ",name:"L'Aquila"},"IT-1-LT":{code:"LT",name:"Latina"},"IT-1-LE":{code:"LE",name:"Lecce"},"IT-1-LC":{code:"LC",name:"Lecco"},"IT-1-LI":{code:"LI",name:"Livorno"},"IT-1-LO":{code:"LO",name:"Lodi"},"IT-1-LU":{code:"LU",name:"Lucca"},"IT-1-MC":{code:"MC",name:"Macerata"},"IT-1-MN":{code:"MN",name:"Mantova"},"IT-1-MS":{code:"MS",name:"Massa-Carrara"},"IT-1-MT":{code:"MT",name:"Matera"},"IT-1-VS":{code:"VS",name:"Medio Campidano"},"IT-1-ME":{code:"ME",name:"Messina"},"IT-1-MI":{code:"MI",name:"Milano"},"IT-1-MO":{code:"MO",name:"Modena"},"IT-1-MB":{code:"MB",name:"Monza e Brianza"},"IT-1-NA":{code:"NA",name:"Napoli"},"IT-1-NO":{code:"NO",name:"Novara"},"IT-1-NU":{code:"NU",name:"Nuoro"},"IT-1-OG":{code:"OG",name:"Ogliastra"},"IT-1-OT":{code:"OT",name:"Olbia-Tempio"},"IT-1-OR":{code:"OR",name:"Oristano"},"IT-1-PD":{code:"PD",name:"Padova"},"IT-1-PA":{code:"PA",name:"Palermo"},"IT-1-PR":{code:"PR",name:"Parma"},"IT-1-PV":{code:"PV",name:"Pavia"},"IT-1-PG":{code:"PG",name:"Perugia"},"IT-1-PU":{code:"PU",name:"Pesaro e Urbino"},"IT-1-PE":{code:"PE",name:"Pescara"},"IT-1-PC":{code:"PC",name:"Piacenza"},"IT-1-PI":{code:"PI",name:"Pisa"},"IT-1-PT":{code:"PT",name:"Pistoia"},"IT-1-PN":{code:"PN",name:"Pordenone"},"IT-1-PZ":{code:"PZ",name:"Potenza"},"IT-1-PO":{code:"PO",name:"Prato"},"IT-1-RG":{code:"RG",name:"Ragusa"},"IT-1-RA":{code:"RA",name:"Ravenna"},"IT-1-RC":{code:"RC",name:"Reggio Calabria"},"IT-1-RE":{code:"RE",name:"Reggio Emilia"},"IT-1-RI":{code:"RI",name:"Rieti"},"IT-1-RN":{code:"RN",name:"Rimini"},"IT-1-RM":{code:"RM",name:"Roma"},"IT-1-RO":{code:"RO",name:"Rovigo"},"IT-1-SA":{code:"SA",name:"Salerno"},"IT-1-SS":{code:"SS",name:"Sassari"},"IT-1-SV":{code:"SV",name:"Savona"},"IT-1-SI":{code:"SI",name:"Siena"},"IT-1-SR":{code:"SR",name:"Siracusa"},"IT-1-SO":{code:"SO",name:"Sondrio"},"IT-1-TA":{code:"TA",name:"Taranto"},"IT-1-TE":{code:"TE",name:"Teramo"},"IT-1-TR":{code:"TR",name:"Terni"},"IT-1-TO":{code:"TO",name:"Torino"},"IT-1-TP":{code:"TP",name:"Trapani"},"IT-1-TN":{code:"TN",name:"Trento"},"IT-1-TV":{code:"TV",name:"Treviso"},"IT-1-TS":{code:"TS",name:"Trieste"},"IT-1-UD":{code:"UD",name:"Udine"},"IT-1-VA":{code:"VA",name:"Varese"},"IT-1-VE":{code:"VE",name:"Venezia"},"IT-1-VB":{code:"VB",name:"Verbano-Cusio-Ossola"},"IT-1-VC":{code:"VC",name:"Vercelli"},"IT-1-VR":{code:"VR",name:"Verona"},"IT-1-VV":{code:"VV",name:"Vibo Valentia"},"IT-1-VI":{code:"VI",name:"Vicenza"},"IT-1-VT":{code:"VT",name:"Viterbo"}},[n.Country.BE]:{"BE-1-VAN":{code:"VAN",name:"Antwerpen"},"BE-1-WBR":{code:"WBR",name:"Brabant wallon"},"BE-1-WHT":{code:"WHT",name:"Hainaut"},"BE-1-WLG":{code:"WLG",name:"Lige"},"BE-1-VLI":{code:"VLI",name:"Limburg"},"BE-1-WLX":{code:"WLX",name:"Luxembourg"},"BE-1-WNA":{code:"WNA",name:"Namur"},"BE-1-VOV":{code:"VOV",name:"Oost-Vlaanderen"},"BE-1-VBR":{code:"VBR",name:"Vlaams-Brabant"},"BE-1-VWV":{code:"VWV",name:"West-Vlaanderen"}}}},889690:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.processQuery=void 0;const n=r(453576),o=r(338495);t.processQuery=function(e){return{type:n.StaticDataQueryType.GEOGRAPHIC_STATES,collection:(0,o.getStatesForLocaleFormats)(e.level,e.localeFormats)}}},338495:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.findStateCode=t.findStateLevel2Name=t.findStateName=t.getStatesForLocaleFormats=t.isStateValid=void 0;const n=r(453576),o=r(180814);t.isStateValid=function(e,t){return t in function(e){return{...o.GeographicStatesLevel0[e]||{},...o.GeographicStatesLevel1[e]||{}}}(e)},t.getStatesForLocaleFormats=function(e,t){const r=e===n.GeographicStateLevel.LEVEL_0?o.GeographicStatesLevel0:o.GeographicStatesLevel1;return t?t.filter((e=>!!r[e])).reduce(((e,t)=>Object.assign({},e,{[t]:r[t]})),{}):r};const a=(e,t)=>{let r="";if(!e)return r;const n=Object.keys(t);for(let o=0;o<n.length&&!r;o++)r=t[n[o]]?.[e]?.name??"";return r||e};t.findStateName=e=>a(e,o.GeographicStatesLevel0),t.findStateLevel2Name=e=>a(e,o.GeographicStatesLevel1),t.findStateCode=(e,t)=>o.GeographicStatesLevel0[e]?.[t]?.code??""},774504:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.allowedExtensions=void 0,t.allowedExtensions=[".docx",".doc",".xlsx",".xls",".ppt",".pptx",".pdf",".txt",".zip",".key",".png",".jpg",".jpeg",".gif",".tiff",".bmp",".heif",".heic",".odt",".avi",".ogg",".m4a",".mov",".mp3",".mp4",".mpg",".wav",".ods",".rar",".7z",".mkv",".raw",".db",".aac",".3gp",".webm",".flac",".csv",".wmv",".tar",".odp",".odg",".gzip"]},498337:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSecureDocumentsAllowedMimeTypes=t.getSecureDocumentsAllowedExtensions=void 0;const n=r(774504),o=r(956196);t.getSecureDocumentsAllowedExtensions=function(){return n.allowedExtensions},t.getSecureDocumentsAllowedMimeTypes=function(){return o.allowedMimeTypes}},956196:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.allowedMimeTypes=void 0,t.allowedMimeTypes=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/pdf","text/plain","application/zip","application/x-zip-compressed","multipart/x-zip","application/pkcs8","application/x-iwork-keynote-sffkey","image/png","image/jpeg","image/gif","image/tiff","image/bmp","image/heic","image/heif","image/heic-sequence","image/heif-sequence","application/vnd.oasis.opendocument.text","video/avi","video/msvideo","video/x-msvideo","audio/ogg","video/ogg","video/quicktime","audio/mpeg","audio/mp4","video/mp4","video/mpeg","audio/wav","audio/x-wav","video/x-ms-wmv","application/vnd.oasis.opendocument.spreadsheet","application/x-rar-compressed","application/x-rar","application/vnd.rar","application/x-7z-compressed","video/x-matroska","video/raw","application/x-sqlite3","application/x-ole-storage","audio/aac","audio/x-aac","video/3gpp","audio/webm","video/webm","audio/flac","application/gzip","application/tar","application/x-tar","application/tar+gzip","application/x-compressed-tar","application/x-gzip","application/octet-stream","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.graphics"]},633332:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeStaticDataController=void 0;const n=r(453576),o=r(139003),a=r(889690);t.makeStaticDataController=()=>({query:s});class i extends Error{constructor(e){super(`Unexpected StaticDataQuery type (${e})`)}}function s(e){try{return{results:(t=e.queries,t.map((e=>{switch(e.type){case n.StaticDataQueryType.CALLING_CODES:return(0,o.processQuery)();case n.StaticDataQueryType.GEOGRAPHIC_STATES:return(0,a.processQuery)(e);default:throw new i(e)}}))),error:null}}catch(e){return{results:[],error:e}}var t}},764765:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(383400);t.bootstrap=e=>{e.register(n.config)}},49183:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(764765);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},492215:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertDeviceKeysToUki=t.convertUkiToDeviceKeys=void 0,t.convertUkiToDeviceKeys=e=>{if(e){const t=e.split("-");if(t.length>0){const[r]=t;return{accessKey:r,secretKey:e}}}return null},t.convertDeviceKeysToUki=e=>`${e.accessKey}-${e.secretKey}`},727885:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hasSpecialUserGroupAccessInSpace=t.hasTACAccessInCurrentSpace=t.getNodePremiumStatusSpaceData=t.isGroupManagerInCurrentSpace=t.isTeamAdminInCurrentSpace=t.isBillingAdminInCurrentSpace=t.getCurrentTeamId=t.getCurrentSpaceId=t.getCurrentSpace=void 0;const n=r(766833),o=r(895343);t.getCurrentSpace=e=>e.spaces.find((e=>"accepted"===e.details.status)),t.getCurrentSpaceId=e=>{const r=(0,t.getCurrentSpace)(e);return r?Number(r.teamId):void 0},t.getCurrentTeamId=t.getCurrentSpaceId,t.isBillingAdminInCurrentSpace=e=>{const r=(0,t.getCurrentSpace)(e);return!!r&&r.details.isBillingAdmin},t.isTeamAdminInCurrentSpace=e=>{const r=(0,t.getCurrentSpace)(e);return!!r&&r.details.isTeamAdmin},t.isGroupManagerInCurrentSpace=e=>{const r=(0,t.getCurrentSpace)(e);return!!r&&r.details.isGroupManager},t.getNodePremiumStatusSpaceData=e=>{const t=e.getLocalSettings().nodePremiumStatus.spaces,r=(0,n.getFreshSpaceData)(t);return(0,o.makeSpaceData)(r)},t.hasTACAccessInCurrentSpace=e=>{const r=(0,t.getNodePremiumStatusSpaceData)(e),n=(0,t.getCurrentSpace)(r);return!!n&&(n.details.isTeamAdmin||n.details.isBillingAdmin||n.details.isGroupManager)},t.hasSpecialUserGroupAccessInSpace=(e,t)=>{const r=t.spaces.find((t=>t.teamId===e&&"accepted"===t.details.status));return r?.details.isTeamAdmin||r?.details.isGroupManager}},380722:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeStoreService=void 0;const n=r(897082),o=r(518948),a=r(684762);t.makeStoreService=e=>{const t=e?.sessionStorage,r=e?.store||(0,a.createStore)(t),i=((e,t)=>{if(t){let t=()=>{};const r=new Promise((e=>{t=e})),o=(0,n.persistStore)(e,null,t);return{completeRehydration:()=>r,flush:()=>o.flush()}}return{completeRehydration:()=>Promise.resolve(),flush:()=>Promise.resolve()}})(r,t),s=()=>r.getState(),c=new o.BehaviorSubject(s());return r.subscribe((()=>c.next(s()))),{...i,dispatch:e=>r.dispatch(e),getABTesting:()=>s().device.abtesting,getAccountInfo:()=>s().userSession.account,getAccountCreation:()=>s().userSession.accountCreation,getLocation:()=>s().device.platform.location,getSdkAuthentication:()=>s().userSession.sdkAuthentication,getLocalSettings:()=>s().userSession.localSettings,getPersonalData:()=>s().userSession.personalData,getPersonalSettings:()=>s().userSession.personalSettings,getPersonalFeatures:()=>s().userSession.personalFeatures,getNotificationStatus:()=>s().userSession.notificationsStatus,getPlatform:()=>s().device.platform,getPlatformInfo:()=>s().device.platform.info,getIconsCache:()=>s().userSession.iconsCache,getSharingData:()=>s().userSession.sharingData,getSpaceData:()=>s().userSession.spaceData,getState$:()=>c,getState:()=>s(),getStore:()=>r,getSubscriptionCode:()=>s().userSession.account.subscriptionCode,getSyncStatus:()=>s().userSession.sync,getTeamAdminData:()=>s().userSession.teamAdminData,getUserLogin:()=>s().userSession.account.login,getUserSession:()=>s().userSession.session,isAuthenticated:()=>Boolean(s().userSession.session.sessionId&&s().userSession.account.isAuthenticated),isFeatureActivated:e=>{const{features:t}=r.getState().userSession.personalFeatures;return!!t&&Boolean(t[e])},hasSessionId:()=>Boolean(s().userSession.session.sessionId)}}},568525:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobalPersistenceReducer=void 0;const n=r(897082),o=r(884801),a=e=>(t,r)=>({...t,...Object.keys(e).reduce(((n,o)=>(n[o]=t[o],e[o].forEach((e=>{n[o][e]=r[o][e]})),n)),{})}),i=e=>Object.keys(e).map((t=>(0,o.createBlacklistFilter)(t,e[t])));t.getGlobalPersistenceReducer=(e,t,r)=>{if(r){const o={key:"root",stateReconciler:a(t),storage:r,version:1,serialize:!1,deserialize:!1,transforms:i(t)};return(0,n.persistReducer)(o,e)}return e}},684762:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createStore=t.globalReducer=void 0;const n=r(182422),o=r(696186),a=r(509149),i=r(634007),s=r(510319),c=r(552653),d=r(904572),u=r(528417),l=r(353439),m=r(375417),p=r(45316),S=r(869018),g=r(568525),A=r(719764),I=(0,n.combineReducers)({platform:a.default,abtesting:i.default,application:s.applicationReducer,remoteFile:m.remoteFileReducer,globalExtensionSettings:p.globalExtensionSettingsReducer,antiPhishing:S.AntiPhishingReducer,eventLogger:A.eventLoggerReducer});t.globalReducer=(e,t)=>{const r=e?e.device:void 0,n=e?e.authentication:void 0,a=e?e.userSession:void 0,i=e?e.inMemoryInterSessionUnsynced:void 0;return{device:I(r,t),authentication:(0,c.authenticationReducer)(n,t),userSession:(0,d.userSessionReducer)(a,t),inMemoryInterSessionUnsynced:(0,o.inMemoryInterSessionUnsyncedSliceReducer)(i,t)}},t.createStore=function(e,r){const o=(0,g.getGlobalPersistenceReducer)(t.globalReducer,{device:l.blacklistedDeviceKeys,userSession:u.blacklistedUserSessionKeys},e);return(0,n.createStore)(o,r)}},120031:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(926634),o=r(201334),a=r(402548),i=r(339993),s=r(433733),c=r(479889),d=r(726847),u=r(968455);t.config={commands:{getTeamInfo:{handler:o.getTeamInfo},getTeamOffers:{handler:a.getTeamOffers},getMidCycleTierUpgradePrice:{handler:i.getMidCycleTierUpgradePrice},getExpectedTaxInformation:{handler:s.getExpectedTaxInformation},changeTierMidCycle:{handler:c.changeTierMidCycle},computePlanPricing:{handler:d.computePlanPricing},addSeats:{handler:u.addSeats}},queries:{getIsRecoveryEnabled:{selector:n.isRecoveryEnabledSelector}},liveQueries:{}}},740941:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddSeatsErrorType=t.ComputePlanPricingErrorType=t.ChangeTierMidCycleErrorType=t.GetTeamOffersErrorType=void 0;var n=r(186852);Object.defineProperty(t,"GetTeamOffersErrorType",{enumerable:!0,get:function(){return n.GetTeamOffersErrorType}}),Object.defineProperty(t,"ChangeTierMidCycleErrorType",{enumerable:!0,get:function(){return n.ChangeTierMidCycleErrorType}}),Object.defineProperty(t,"ComputePlanPricingErrorType",{enumerable:!0,get:function(){return n.ComputePlanPricingErrorType}}),Object.defineProperty(t,"AddSeatsErrorType",{enumerable:!0,get:function(){return n.AddSeatsErrorType}})},968455:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addSeats=void 0;const n=r(46298),o=r(411848),a=r(186852),i=r(416593),s=r(217387);t.addSeats=async function(e,t){const{storeService:r}=e,c=(0,i.userLoginSelector)(r.getState());if(!c)throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const d=await(0,o.addSeatsRequest)(r,c,t.seats);return(0,n.isApiError)(d)?{success:!1,error:{code:a.AddSeatsErrorType.AddSeatsFailed,message:`Add Seats failed: ${d.message}`}}:{success:!0}}},479889:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.changeTierMidCycle=void 0;const n=r(46298),o=r(186852),a=r(338115),i=r(416593),s=r(217387);t.changeTierMidCycle=async function(e,t){const{storeService:r}=e,c=(0,i.userLoginSelector)(r.getState()),d=await(0,n.teamStatus)(r,c);if(!c||(0,n.isApiError)(d))throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const u=await(0,a.changeTierMidCycleRequest)(r,c,t.amountToPay,t.taxes,t.planId,t.couponCode,t.seatsToAdd,t.billingContactEmail);return(0,n.isApiError)(u)?{success:!1,error:{code:o.ChangeTierMidCycleErrorType.ChangeTierMidCycleFailed,message:`Change Tier Mid Cycle failed: ${u.message}`}}:{success:!0}}},726847:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.computePlanPricing=void 0;const n=r(186852),o=r(46298),a=r(921712),i=r(416593),s=r(217387);t.computePlanPricing=async function(e,t){const{storeService:r}=e,c=(0,i.userLoginSelector)(r.getState());if(!c)throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const d=await(0,a.computePlanPricingRequest)(r,c,t.seats);return(0,o.isApiError)(d)?{success:!1,error:{code:n.ComputePlanPricingErrorType.ComputePlanPricingFailed,message:`Compute Plan Pricing failed: ${d.message}`}}:{success:!0,data:d}}},433733:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getExpectedTaxInformation=void 0;const n=r(186852),o=r(46298),a=r(530782),i=r(416593),s=r(217387);t.getExpectedTaxInformation=async function(e,t){const{storeService:r}=e,c=(0,i.userLoginSelector)(r.getState());if(!c)throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const d=await(0,a.getExpectedTaxInformationRequest)(r,c,t.priceInCents);return(0,o.isApiError)(d)?{success:!1,error:{code:n.GetExpectedTaxInformationErrorType.GetExpectedTaxInformationFailed,message:`get Expected Price Information failed: ${d.message}`}}:{success:!0,data:d}}},339993:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMidCycleTierUpgradePrice=void 0;const n=r(186852),o=r(46298),a=r(178607),i=r(416593),s=r(217387);t.getMidCycleTierUpgradePrice=async function(e,t){const{storeService:r}=e,c=(0,i.userLoginSelector)(r.getState());if(!c)throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const d=await(0,a.getMidCycleTierUpgradePriceRequest)(r,c,t.newPlan,t.numberOfSeats);return(0,o.isApiError)(d)?{success:!1,error:{code:n.GetMidCycleTierUpgradePriceErrorType.GetMidCycleTierUpgradePriceFailed,message:`get Mid Cycle Tier Upgrade Price failed: ${d.message}`}}:{success:!0,data:d}}},402548:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamOffers=void 0;const n=r(186852),o=r(46298),a=r(247115),i=r(217387),s=r(416593);t.getTeamOffers=async function(e,t){const{storeService:r}=e,c=(0,s.userLoginSelector)(r.getState());if(!c)throw new Error(i.AuthenticationCode[i.AuthenticationCode.USER_UNAUTHORIZED]);const d=await(0,a.getTeamOffersRequest)(r,c,t.couponCode);return(0,o.isApiError)(d)?{success:!1,error:{code:n.GetTeamOffersErrorType.GetTeamOffersFailed,message:`get Team Offers failed: ${d.message}`}}:{success:!0,data:d}}},201334:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamInfo=void 0;const n=r(46298),o=r(416593),a=r(25576);t.getTeamInfo=async function(e){const{storeService:t}=e,r=(0,o.userLoginSelector)(t.getState()),a=await(0,n.teamStatus)(t,r);if((0,n.isApiError)(a))return i(a);const{billing:s,seats:c,info:d,planTier:u,capabilities:l}=a;return{success:!0,data:{billing:s,teamInfo:d,planTier:u,capabilities:l,seats:c}}};const i=e=>e.code===n.NotAdmin?s(a.AuthenticationCode.UNAUTHORIZED,e.message):s(a.AuthenticationCode.UNKNOWN_ERROR,e.message),s=(e,t)=>({success:!1,reason:e,message:t})},589675:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setTeamSettings=t.makeSettingsController=void 0;const n=r(401067),o=r(134376),a=r(766833);t.makeSettingsController=(e,t)=>({setTeamSettings:r=>c(e,t,(0,o.getCurrentUserInfo)(e),r)});const i=e=>e.replace(/([A-Z])/g,((e,t)=>`_${t.toLowerCase()}`)),s=(e,t)=>null!==t?{type:`set_${i(e)}`,value:t}:{type:`unset_${i(e)}`};function c(e,t,{login:r,uki:o},{teamId:i,settings:c}){const d=(0,n.zipWith)(s,(0,n.keys)(c),(0,n.values)(c));return t.settings.setTeamSettings({login:r,uki:o,teamId:i,operations:d}).then((()=>((0,a.updateCurrentSpaceWith)(e,(e=>Object.assign({},e,{details:Object.assign({},e.details,{info:Object.assign({},e.details.info,c)})}))),{}))).catch((e=>({error:e})))}t.setTeamSettings=c},689763:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(120031);t.bootstrap=e=>{e.register(n.config)}},114581:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(689763);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},926634:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isRecoveryEnabledSelector=void 0;const n=r(416593);t.isRecoveryEnabledSelector=e=>{const t=(0,n.activeSpacesSelector)(e)[0];return t?.info?.recoveryEnabled??!1}},186852:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddSeatsErrorType=t.ComputePlanPricingErrorType=t.ChangeTierMidCycleErrorType=t.GetExpectedTaxInformationErrorType=t.GetMidCycleTierUpgradePriceErrorType=t.B2BPlanTiers=t.GetTeamOffersErrorType=void 0,function(e){e.GetTeamOffersFailed="GET_TEAM_OFFERS_FAILED",e.GetTeamOffersSummaryFailed="GET_TEAM_OFFERS_SUMMARY_FAILED"}(t.GetTeamOffersErrorType||(t.GetTeamOffersErrorType={})),t.B2BPlanTiers=["legacy","team","business","entreprise"],function(e){e.GetMidCycleTierUpgradePriceFailed="GET_MID_CYCLE_TIER_UPGRADE_PRICE_FAILED"}(t.GetMidCycleTierUpgradePriceErrorType||(t.GetMidCycleTierUpgradePriceErrorType={})),function(e){e.GetExpectedTaxInformationFailed="GET_EXPECTED_TAX_INFORMATION_FAILED"}(t.GetExpectedTaxInformationErrorType||(t.GetExpectedTaxInformationErrorType={})),function(e){e.ChangeTierMidCycleFailed="CHANGE_TIER_MID_CYCLE_FAILED",e.PaymentMeanIsNotCreditcard="PAYMENT_MEAN_IS_NOT_CREDITCARD",e.CurrentPlanStartDateInFuture="CURRENT_PLAN_START_DATE_IN_FUTURE",e.ChangeTierMidCycleError="CHANGE_TIER_MID_CYCLE_ERROR",e.PaymentMeanIsNotInvoice="PAYMENT_MEAN_IS_NOT_INVOICE",e.ChangeTierAmountTooExpensive="CHANGE_TIER_AMOUNT_TOO_EXPENSIVE",e.ErrorCalculatingTierChangeDiscount="ERROR_CALCULATING_TIER_CHANGE_DISCOUNT",e.InsufficientAmount="INSUFFICIENT_AMOUNT",e.AssignedPlanSameTierAsCurrentPlan="ASSIGNED_PLAN_SAME_TIER_AS_CURRENT_PLAN",e.SalesTaxMismatch="SALES_TAX_MISMATCH",e.NotBillingAdmin="NOT_BILLING_ADMIN"}(t.ChangeTierMidCycleErrorType||(t.ChangeTierMidCycleErrorType={})),function(e){e.ComputePlanPricingFailed="COMPUTE_PLAN_PRICING_FAILED",e.NotBillingAdmin="NOT_BILLING_ADMIN"}(t.ComputePlanPricingErrorType||(t.ComputePlanPricingErrorType={})),function(e){e.AddSeatsFailed="ADD_SEATS_FAILED",e.CannotAddSeatDuringFreeTrial="CANNOT_ADD_SEAT_DURING_FREE_TRIAL",e.CannotAddSeatDuringGracePeriod="CANNOT_ADD_SEAT_DURING_GRACE_PERIOD",e.UnsupportedPaymentMean="UNSUPPORTED_PAYMENT_MEAN",e.NotBillingAdmin="NOT_BILLING_ADMIN",e.PaymentFailed="PAYMENT_FAILED"}(t.AddSeatsErrorType||(t.AddSeatsErrorType={}))},968541:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(692310),o=r(32159),a=r(231632),i=r(181529),s=r(276934),c=r(838396),d=r(306053),u=r(715028),l=r(69310),m=r(808995),p=r(976713),S=r(905829),g=r(589895),A=r(676404),I=r(988063),y=r(494453),E=r(344974),f=r(227218),C=r(670363),v=r(50766),h=r(510002),N=r(868538),T=r(933150),G=r(194228),B=r(260419),O=r(676154),P=r(970178),R=r(364690),U=r(507134),_=r(516382),D=r(604658),b=r(54419),M=r(311673),L=r(838045),w=r(562218);t.config={commands:{completeTeamDomainRegistration:{handler:a.completeTeamDomainRegistration},deactivateTeamDomain:{handler:i.deactivateTeamDomain},getTeamDomains:{handler:c.getTeamDomains},getTeamDevice:{handler:d.getTeamDevice},listTeamDevices:{handler:u.listTeamDevices},deactivateTeamDevice:{handler:l.deactivateTeamDevice},registerTeamDomain:{handler:s.registerTeamDomain},registerTeamDevice:{handler:m.registerTeamDevice},registerTeamDeviceAccount:{handler:f.registerTeamDeviceAccount},getEncryptionServiceConfig:{handler:A.getEncryptionServiceConfig},generateAndSaveEncryptionServiceConfig:{handler:I.generateAndSaveEncryptionServiceConfig},clearSelfHostedESSettings:{handler:y.clearSelfHostedESSettings},getTeamDeviceEncryptedConfig:{handler:E.getTeamDeviceEncryptedConfig},updateTeamDeviceEncryptedConfig:{handler:C.updateTeamDeviceEncryptedConfig},updateTeamSettings:{handler:P.updateTeamSettings},parseMetadataFields:{handler:N.parseMetadataFieldsHandler},persistAdminProvisioningKey:{handler:T.persistAdminProvisioningKey},removeAdminProvisioningKey:{handler:B.removeAdminProvisioningKey},createSSOConnectorConfig:{handler:p.createSSOConnectorConfig},generateSSOConnectorKey:{handler:S.generateSSOConnectorKey},getReport:{handler:g.getReport},startAuditLogsQuery:{handler:v.startAuditLogsQuery},getAuditLogQueryResults:{handler:h.getAuditLogQueryResults},getRecoveryCodesAsTeamCaptain:{handler:O.getRecoveryCodesAsTeamCaptain},getInviteLink:{handler:R.getInviteLink},requestInviteLinkToken:{handler:w.requestInviteLinkToken},getInviteLinkForAdmin:{handler:U.getInviteLinkForAdmin},changeInviteLinkTeamKey:{handler:_.changeInviteLinkTeamKey},createInviteLink:{handler:D.createInviteLink},toggleInviteLink:{handler:b.toggleInviteLink},getLastADSyncDate:{handler:M.getLastADSyncDate},getSpecialUserGroupInviteValuesForMemberInTeam:{handler:L.getSpecialUserGroupInviteValuesForMemberInTeam},getSpecialUserGroupRevision:{handler:L.getSpecialUserGroupRevision}},queries:{getAdministrableUserGroup:{selector:n.administrableUserGroupSelector},getAdministrableUserGroups:{selector:n.administrableUserGroupsSelector},isGroupNameAvailable:{selector:n.isGroupNameAvailableSelector},getAdminProvisioningKey:{selector:G.adminProvisioningKeySelector}},liveQueries:{liveAdministrableUserGroup:{operator:o.administrableUserGroup$},liveAdministrableUserGroups:{operator:o.administrableUserGroups$},liveAdminProvisioningKey:{operator:o.adminProvisioningKey$}}}},679562:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(336100),t),o(r(535074),t),o(r(345832),t),o(r(673168),t),o(r(88791),t),o(r(982848),t),o(r(166535),t),o(r(368323),t),o(r(293020),t),o(r(208286),t)},358415:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeDirectorySyncController=void 0;const n=r(107344),o=r(134376);t.makeDirectorySyncController=e=>{const{storeService:t,localStorageService:r,wsService:a,sessionService:i,sharingService:s}=e;return{directorySyncForAllTeams:()=>n.directorySyncForAllTeams(t,a,i),keyValidatedByTacAdmin:(e,c)=>function(e,t,r,a,i,s,c){const d=t.getTeamAdminData().teams[s],u=(0,o.getCurrentUserInfo)(t);return n.saveDirectorySyncKey(e,t,r,u,d,s,c).then((()=>n.directorySyncForTeam(t,a,i,s))).catch((()=>{}))}(s,t,r,a,i,e,c),keyRejectedByTacAdmin:(e,r)=>n.keyRejectedByTacAdmin(t,a,e,r)}}},510002:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAuditLogQueryResults=void 0;const n=r(293020),o=r(416593),a=r(46298);t.getAuditLogQueryResults=async function(e,t){const{storeService:r}=e,i=(0,o.userLoginSelector)(r.getState()),s=await(0,a.getAuditLogsQueryResults)(r,i,t);return(0,a.isApiError)(s)?{success:!1,error:{code:n.ApiAuditLogsErrorType.GetAuditLogQueryResultsFailed,message:`Get Audit Log Query Results failed: ${s.message}`}}:{success:!0,data:{auditLogs:s.results?.length?s.results.map((e=>JSON.parse(e))):[],nextToken:s.nextToken,state:s.state}}}},50766:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.startAuditLogsQuery=void 0;const n=r(293020),o=r(416593),a=r(46298);t.startAuditLogsQuery=async function(e,t){const{storeService:r}=e,i=(0,o.userLoginSelector)(r.getState()),s=await(0,a.startAuditLogsQuery)(r,i,t);return(0,a.isApiError)(s)?{success:!1,error:{code:n.ApiAuditLogsErrorType.StartAuditLogsQueryFailed,message:`Start Audit Logs Query failed: ${s.message}`}}:{success:!0,data:s}}},293020:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetAuditLogQueryResultsState=t.ApiAuditLogsErrorType=void 0,function(e){e.StartAuditLogsQueryFailed="START_AUDIT_LOGS_QUERY_FAILED",e.GetAuditLogQueryResultsFailed="GET_AUDIT_LOG_QUERY_RESULTS_FAILED"}(t.ApiAuditLogsErrorType||(t.ApiAuditLogsErrorType={})),function(e){e.Queued="QUEUED",e.Running="RUNNING",e.Succeeded="SUCCEEDED",e.Failed="FAILED",e.Cancelled="CANCELLED"}(t.GetAuditLogQueryResultsState||(t.GetAuditLogQueryResultsState={}))},644293:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTeamDeviceAccount=void 0;const n=r(46298),o=r(416593);t.createTeamDeviceAccount=async(e,t)=>{const{storeService:r}=e,a=r.getState(),i=(0,o.userLoginSelector)(a);if(!i)throw new Error("\n            [createTeamDeviceAccount] - Session not opened!\n        ");const s=await(0,n.createTeamDeviceAccount)(r,i,t);return(0,n.isApiError)(s)?{success:!1,error:{code:(0,n.getCode)(s.code,n.createTeamDeviceAccountErrors)}}:{success:!0,data:{login:s.login}}}},69310:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTeamDevice=void 0;const n=r(46298),o=r(416593);t.deactivateTeamDevice=async function(e,{teamDeviceAccessKey:t}){const{storeService:r}=e,a=r.getState(),i=(0,o.userLoginSelector)(a);if(!i)throw new Error("\n            [registerTeamDeviceRequest] - Session not opened!\n        ");const s=await(0,n.deactivateTeamDevice)(r,i,{teamDeviceAccessKey:t});return(0,n.isApiError)(s)?{success:!1,error:{code:(0,n.getCode)(s.code,n.deactivateTeamDeviceErrors)}}:{success:!0,data:{}}}},306053:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDevice=void 0;const n=r(46298),o=r(416593);t.getTeamDevice=async function(e,t){const{storeService:r}=e,{teamDeviceAccessKey:a}=t,i=r.getState(),s=(0,o.userLoginSelector)(i);if(!s)throw new Error("[getTeamDevice] - Session not opened!");const c=await(0,n.getTeamDevice)(r,s,{teamDeviceAccessKey:a});return(0,n.isApiError)(c)?{success:!1,error:{code:(0,n.getCode)(c.code,n.getTeamDeviceErrors)}}:{success:!0,data:{teamDevice:c.teamDevice}}}},715028:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listTeamDevices=void 0;const n=r(46298),o=r(416593);t.listTeamDevices=async function(e){const{storeService:t}=e,r=t.getState(),a=(0,o.userLoginSelector)(r);if(!a)throw new Error("[listTeamDevices] - Session not opened!");const i=await(0,n.listTeamDevices)(t,a);return(0,n.isApiError)(i)?{success:!1,error:{code:(0,n.getCode)(i.code,n.listTeamDevicesErrors)}}:{success:!0,data:{teamDevices:i.teamDevices}}}},808995:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.registerTeamDevice=void 0;const n=r(46298),o=r(416593);t.registerTeamDevice=async function(e,t){const{storeService:r}=e,{deviceName:a,platform:i}=t,s=r.getState(),c=(0,o.userLoginSelector)(s);if(!c)throw new Error("\n            [registerTeamDeviceRequest] - Session not opened!\n        ");const d=await(0,n.registerTeamDevice)(r,c,{platform:i,deviceName:a});return(0,n.isApiError)(d)?{success:!1,error:{code:(0,n.getCode)(d.code,n.registerTeamDeviceErrors)}}:{success:!0,data:{teamUuid:d.teamUuid,deviceAccessKey:d.deviceAccessKey,deviceSecretKey:d.deviceSecretKey}}}},535074:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TeamDevicePlatform=void 0;const n=r(481926);Object.defineProperty(t,"TeamDevicePlatform",{enumerable:!0,get:function(){return n.TeamDevicePlatform}})},311673:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLastADSyncDate=void 0;const n=r(46298),o=r(416593),a=r(843154);t.getLastADSyncDate=async function(e){const{storeService:t}=e,r=(0,o.userLoginSelector)(t.getState()),i={success:!1,error:{code:n.NotAdmin}};if(!r)return i;try{(0,a.requireAdmin)(t)}catch{return i}const s=await(0,n.lastADSyncDate)(t,r);return(0,n.isApiError)(s)?{success:!1,error:{code:(0,n.getCode)(s.code,n.lastADSyncDateErrors)}}:{success:!0,data:{...s}}}},345832:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},107344:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isDirectorySyncActivated=t.keyRejectedByTacAdmin=t.isSignatureValid=t.buildVerifiedSyncResponseData=t.keyToXMLB64=t.chainOperations=t.batchOperations=t.directorySyncForTeam=t.directorySyncForAllTeams=t.saveDirectorySyncKey=void 0;const n=r(801370),o=r(219478),a=r(148005),i=r(803674),s=r(736513),c=r(795623),d=r(670252),u=r(144197),l=r(278320),m=r(319697),p=r(543927),S=r(656915),g=r(674042),A=r(493513);t.saveDirectorySyncKey=async function(e,t,r,o,a,i,s){return c().catch((function(t){if("Bad Request (ITEM_GROUP_UPDATE_CONFLICT)"===t.message)return function(){const{login:t,uki:r}=o;return(0,p.loadSpecialItemGroup)(e.ws,t,r,a).then(m).then(c).then((()=>{}))}();throw t}));function c(){return async function(){const t=await async function(){const{specialItemGroup:t}=a,{crypto:r}=e,n=await r.symmetricEncryption.generateNewAESKey(),i=await(0,u.getSpecialItemGroupKey)(r,o,a),c={publicKey:s},d=A.encode(JSON.stringify(c)),m=await r.symmetricEncryption.encryptAES256(n,d),p=await r.symmetricEncryption.encryptAES256(i,A.encode(n)),S=(0,l.generateItemUuid)(),g=await e.item.makeItemUpload(S,p,m);return await e.item.makeAddItemsEvent(t.groupId,t.revision,[g])}();return e.item.addItems(e.ws,o.login,o.uki,t)}().then(d)}async function d(n){return(0,g.updateAdminDataAfterItemAddedOrUpdated)(t,r,e.ws,o,i,n).then((()=>{}))}function m(e){const r=(0,n.specialItemGroupUpdated)(i,e);return t.dispatch(r),Promise.resolve()}},t.directorySyncForAllTeams=function(e,t,r){const n=e.getTeamAdminData();return Object.keys(n.teams).map((n=>f(e,t,r,n)))};class I extends Error{constructor(e=""){super(e),this.name="NoRequestError"}}class y extends Error{constructor(e=""){super(e),this.name="NewPublicKeyError"}}class E extends Error{constructor(e="",t){super(e),this.name="InvalidSignatureError",this.syncResponse=t}}function f(e,t,r,n){const s=(0,i.makeTeamAdminController)(e,t);return function(){const t=e.getState().userSession.directorySync;return(0,a.isTeamDirectorySyncInProgress)(t,n)}()?(c.default.log(`[Directory Sync] Skipping: sync already in progress for team ${n}`),Promise.resolve()):(e.dispatch((0,o.teamDirectorySyncInProgress)(n)),async function(){const r=e.getUserLogin(),o=(0,S.ukiSelector)(e.getState()),a={teamId:Number(n),login:r,uki:o};return await t.teamPlans.getDirectorySyncRequest(a)}().then((async function(e){if(!e.content)throw new I;return e})).then((async function(t){const{publicKey:r,id:o}=t.content,a=e.getTeamAdminData().teams[n].directorySyncKey,i=a&&a.publicKey,s=h(r);if(s!==i){const e={teamId:n,publicKey:s,requestId:o};(0,m.default)().checkDirectorySyncKeyRequest(e);const r=`[Directory Sync] in sync request ${t.content.id} for team ${n}: new public key detected for syncRequest.`;throw c.default.log(r),new y}return t})).then((async function(e){if(!await T(e,n)){const t=`[Directory Sync] in sync request ${e.content.id} for team ${n}: invalid signature.`;throw c.default.log(t),new E(t,e)}return e})).then((async function(t){const o=e.getTeamAdminData().teams[n].userGroups||[],a=t.content.userGroups||[],i=function(e,t){const r=t.map((e=>e.groupId));return e.filter((e=>!!e.externalId)).filter((e=>!r.includes(e.externalId)))}(o,a),c=function(e,t){const r=e.filter((e=>!!e.externalId)).map((e=>e.externalId));return t.filter((e=>!r.includes(e.groupId)))}(o,a),u=function(e,t){const r=e.filter((e=>!!e.externalId)).map((e=>e.externalId));return t.filter((e=>r.includes(e.groupId)))}(o,a),l=i.map((e=>function(e){const t=function(e){const{groupId:t,revision:r}=e;return{groupId:t,revision:r}}(e);return()=>s.deleteUserGroupAction(t)}(e))),m=c.map((e=>function(e){const t=function(e){const t=e.groupName,r=e.groupId;return{teamId:Number(n),externalId:r,name:t}}(e);return()=>s.createUserGroupAction(r,t).then((t=>function(e,t){return e.userGroups.length>0?g(e.userGroups[0],t):Promise.resolve()}(t,e)))}(e))),p=u.map((e=>function(e,t){const r=t.find((t=>t.externalId===e.groupId));if(!r)return[];const n=[];if(e.groupName!==r.name){const t=()=>function(e,t){const r=function(e,t){return{groupId:e.groupId,name:t.groupName,revision:e.revision}}(e,t);return s.renameUserGroupAction(r)}(r,e);n.push(t)}if(function(e,t){const r=e.users.map((e=>e.alias));return t.memberLogins.some((e=>!r.includes(e)))}(r,e)){const t=()=>g(r,e);n.push(t)}if(function(e,t){return e.users.map((e=>e.alias)).some((e=>!t.memberLogins.includes(e)))}(r,e)){const t=()=>function(e,t){const r=e.users.map((e=>e.alias)).filter((e=>!t.memberLogins.includes(e))),n={groupId:e.groupId,revision:e.revision,users:r};return s.revokeUserGroupMembersAction(n)}(r,e);n.push(t)}return n}(e,o))).reduce(((e,t)=>e.concat(t)),[]),S=[...l,...m],A=p;return[...await v(S),...await C(A)].filter((e=>e.error)).map((e=>e.error)).forEach((e=>{const r=`[Directory Sync] in sync request ${t.content.id} for team ${n}: an operation on groups failed: ${e}`,o=new Error(r);(0,d.sendExceptionLog)({error:o})})),t})).then((async function(e){return u(),l(e).then((()=>{}))})).catch((async function(e){switch(u(),e.name){case"NoRequestError":case"NewPublicKeyError":break;case"InvalidSignatureError":{const t=e,{syncResponse:r}=t;l(r,"invalid_signature").then((()=>{}));break}default:{const t=new Error(`[Directory Sync] unexpected error for team ${n}: ${e}`);(0,d.sendExceptionLog)({error:t})}}})));function u(){e.dispatch((0,o.teamDirectorySyncNotInProgress)(n))}function l(r,o){const{content:{id:a}}=r,i=e.getUserLogin(),s=(0,S.ukiSelector)(e.getState()),c={teamId:Number(n),login:i,uki:s,requestId:a},d=Object.assign({},c,o?{syncError:o}:{});return t.teamPlans.updateDirectorySyncRequestStatus(d)}function p(e){return{alias:e,permission:"limited"}}function g(e,t){const r=e.users.map((e=>e.alias)),o=t.memberLogins.filter((e=>!r.includes(e))),a={groupId:e.groupId,revision:e.revision,users:o.map(p),teamId:Number(n)};return s.inviteUserGroupMembersAction(a)}}function C(e){const t=e.map((e=>e().then((e=>({success:!0,result:e}))).catch((e=>({success:!1,error:e})))));return Promise.all(t)}async function v(e,t=[]){const[r,...n]=e;if(!r)return t;let o;try{o={success:!0,result:await r()}}catch(e){o={success:!1,error:e}}return v(n,[...t,o])}function h({modulus:e,exponent:t}){const r=`<RSAKeyValue><Modulus>${e}</Modulus><Exponent>${t}</Exponent></RSAKeyValue>`;return A.encode(r)}function N(e,t,r){return e+t.sort((function(e,t){return e.groupId<t.groupId?-1:e.groupId>t.groupId?1:0})).map(r?function(e){const t=e.memberLogins.sort(n);return e.groupId+e.groupName+t.join("")}:function(e){const t=e.memberLogins.sort();return e.groupId+e.groupName+t.join("")}).join("");function n(e,t){const r=o(e),n=o(t);return r<n?-1:r>n?1:function(e,t){if(e.length<t.length)return-1;if(e.length>t.length)return 1;const r=e.split("-").length-1,n=t.split("-").length-1;return r<n?-1:r>n?1:0}(e,t)}function o(e){let t=e.replace(/[-']/g,"");return t=t.replace(/\./g,"$"),t=t.replace(/@/g,"%"),t=t.replace(/_/g,"'"),t}}async function T(e,t){const{content:{signature:r,userGroups:n,publicKey:o}}=e,a=async e=>{const a=N(t,n,e),i=A.encode(a),c=(0,s.makeAsymmetricEncryption)();return await c.verifyJwk(o,r,i)};return await a(!1)||a(!0)}t.directorySyncForTeam=f,t.batchOperations=C,t.chainOperations=v,t.keyToXMLB64=h,t.buildVerifiedSyncResponseData=N,t.isSignatureValid=T,t.keyRejectedByTacAdmin=function(e,t,r,n){const o=e.getUserLogin(),a=(0,S.ukiSelector)(e.getState()),i={teamId:Number(r),login:o,uki:a,requestId:n,syncError:"key_rejected"};return t.teamPlans.updateDirectorySyncRequestStatus(i).then((()=>{}))},t.isDirectorySyncActivated=function(e){const t=e.spaces.find((e=>e.details&&e.details.info&&"accepted"===e.details.status));if(!t)return!1;const r=t.details.info.activeDirectorySyncType;return["full","provision-only"].includes(r)}},231632:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeTeamDomainRegistration=void 0;const n=r(46298),o=r(416593);t.completeTeamDomainRegistration=async function(e){const{storeService:t}=e,r=(0,o.userLoginSelector)(t.getState()),a=await(0,n.completeDomainRegistration)(t,r);return(0,n.isApiError)(a)?{success:!1,error:{code:(0,n.getCode)(a.code,n.completeDomainRegistrationErrors)}}:{success:!0,domains:a.domain.map((e=>({id:e.id,name:e.domain,status:e.status,previousStatus:e.previousStatus,dnsToken:e.dnsToken,lastVerificationAttemptDateUnix:e.lastVerificationAttemptDateUnix})))}}},181529:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTeamDomain=void 0;const n=r(46298),o=r(416593);t.deactivateTeamDomain=async function(e,t){const{storeService:r}=e,a=(0,o.userLoginSelector)(r.getState()),i=await(0,n.deactivateDomain)(r,a,t);return(0,n.isApiError)(i)?{success:!1,error:{code:(0,n.getCode)(i.code,n.deactivateDomainErrors)}}:{success:!0}}},838396:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDomains=void 0;const n=r(46298),o=r(416593);t.getTeamDomains=async function(e){const{storeService:t}=e,r=(0,o.userLoginSelector)(t.getState()),a=await(0,n.listDomains)(t,r);return(0,n.isApiError)(a)?{success:!1,error:{code:(0,n.getCode)(a.code,n.listDomainErrors)}}:{success:!0,domains:a.domains.map((e=>({id:e.id,name:e.domain,status:e.status,previousStatus:e.previousStatus,dnsToken:e.dnsToken,lastVerificationAttemptDateUnix:e.lastVerificationAttemptDateUnix})))}}},276934:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.registerTeamDomain=void 0;const n=r(46298),o=r(416593);t.registerTeamDomain=async function(e,t){const{storeService:r}=e,a=(0,o.userLoginSelector)(r.getState()),i=await(0,n.requestDomainRegistration)(r,a,t);return(0,n.isApiError)(i)?{success:!1,error:{code:(0,n.getCode)(i.code,n.requestDomainRegistrationErrors)}}:{success:!0,data:{computedToken:i.computedToken,challengeDomain:i.challengeDomain}}}},336100:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DomainStatus=void 0;const n=r(298802);t.DomainStatus=n.DomainStatusResponse},112927:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearEncryptionServiceConfig=void 0;const n=r(894150);t.clearEncryptionServiceConfig=async e=>(await(0,n.removeTeamAdminItem)(e,"encryptionServiceData"),!0)},933657:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createAzureEncryptionServiceConfig=t.createAwsLinuxEncryptionServiceConfig=void 0,t.createAwsLinuxEncryptionServiceConfig=({configEncryptionKey:e,deviceSecretKey:t,deviceAccessKey:r,teamUuid:n})=>`DASHLANE_SSO_TEAM_DEVICE_ACCESS_KEY=${r}\nDASHLANE_SSO_TEAM_DEVICE_SECRET_KEY=${t}\nDASHLANE_SSO_TEAM_UUID=${n}\nDASHLANE_CONFIG_ENCRYPTION_KEY=${e}\n`,t.createAzureEncryptionServiceConfig=({configEncryptionKey:e,deviceSecretKey:t,deviceAccessKey:r,teamUuid:n,encryptionServiceEndpoint:o})=>{const{host:a}=new URL(o);return`{\n      "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",\n      "contentVersion": "1.0.0.0",\n      "parameters": {\n        "siteName": {\n          "value": "${a.split(".").slice(0,-2).join(".")}"\n        },\n        "servicePlanSku": {\n          "value": "B1"\n        },\n        "servicePlanCapacity": {\n          "value": 1\n        },\n        "location": {\n          "value": "[resourceGroup().location]"\n        },\n        "DASHLANE_CONFIG_ENCRYPTION_KEY": {\n          "value": "${e}"\n        },\n        "DASHLANE_SSO_TEAM_DEVICE_ACCESS_KEY": {\n          "value": "${r}"\n        },\n        "DASHLANE_SSO_TEAM_DEVICE_SECRET_KEY": {\n          "value": "${t}"\n        },\n        "DASHLANE_SSO_TEAM_UUID": {\n          "value": "${n}"\n        }\n      }\n    }\n    `}},988063:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateAndSaveEncryptionServiceConfig=void 0;const n=r(316038),o=r(869530),a=r(46298),i=r(843154),s=r(933657),c=r(676404),d=r(5760),u=r(227218),l=r(235992),m=r(670363),p=r(400251),S=async(e,t,r,a={},i)=>{const{deviceSecretKey:c,deviceAccessKey:S,teamUuid:g}=await(0,u.reregisterTeamDevice)(e,i),{devicePrivateKey:A,devicePublicKey:I}=await(0,u.generateDeviceKeyPair)(e),y=await(0,u.registerTeamDeviceAccount)(e,{deviceAccessKey:S,devicePublicKey:I,devicePrivateKey:A});if(!1===y.success)return{success:!1,error:y.error};const{encryptionKeyUuid:E,key:f}=await(async()=>{const e=await(0,o.generate64BytesKey)(),t=(0,n.bufferToBase64)(e);return{encryptionKeyUuid:(0,l.v4)().toLowerCase(),key:t}})(),C={config:("Microsoft Azure"===t?s.createAzureEncryptionServiceConfig:s.createAwsLinuxEncryptionServiceConfig)({deviceSecretKey:c,deviceAccessKey:S,teamUuid:g,configEncryptionKey:`${E}|${f}`,encryptionServiceEndpoint:r}),configEncryptionKey:f,teamUuid:g,deviceAccessKey:S,deviceSecretKey:c,encryptionKeyUuid:E,deploymentLocation:t,devicePublicKey:I,devicePrivateKey:A,lastGeneratedTimeStamp:(0,p.getUnixTime)(Date.now())},v=await(0,m.updateTeamDeviceEncryptedConfig)(e,{teamDeviceUrl:r,...a},C);if(!1===v.success)return{success:!1,error:v.error};const h=await(0,d.persistEncryptionServiceConfig)(e,C);return!1===h.success?{success:!1,error:h.error}:{success:!0,data:{basicConfig:{...C},encryptionServiceReloadingStatus:v.data.encryptionServiceReloadingStatus}}},g=["AWS","Microsoft Azure"];t.generateAndSaveEncryptionServiceConfig=async function(e,{deploymentLocation:t,encryptionServiceEndpoint:r,updateTeamDeviceConfigParams:n={}}){const{storeService:o}=e;if((0,i.requireAdmin)(o),!g.includes(t))return{success:!1,error:{code:a.InvalidRequestError}};const s=await(0,c.getEncryptionServiceConfig)(e);let d;return d=s.success?await S(e,t,r,n,s.data):await S(e,t,r,n),d}},676404:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEncryptionServiceConfig=void 0;const n=r(46298),o=r(692310),a=r(843154);t.getEncryptionServiceConfig=({storeService:e})=>{(0,a.requireAdmin)(e);try{const t=(0,o.currentTeamIdSelector)(e.getState()),r=(0,o.adminDataForTeamSelector)(e.getState(),t);return r?.encryptionServiceData?.basicConfigs?.[0]?Promise.resolve({success:!0,data:r.encryptionServiceData.basicConfigs[0]}):Promise.resolve({success:!1,error:{code:n.BasicConfigNotFound}})}catch{return Promise.resolve({success:!1,error:{code:n.UnknownError}})}}},5760:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.persistEncryptionServiceConfig=t.saveOrUpdateEncryptionServiceConfig=void 0;const n=r(46298),o=r(134376),a=r(97124),i=r(353050),s=r(144197),c=r(692310),d=r(674042),u=r(514432),l=r(843154),m=/[\dA-F]{8}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{12}/i;t.saveOrUpdateEncryptionServiceConfig=async(e,t)=>{if((({teamUuid:e,encryptionKeyUuid:t,deviceAccessKey:r,deviceSecretKey:n})=>{const o={teamUuid:Boolean(e&&!e.match(m)),encryptionKeyUuid:Boolean(t&&!t.match(m)),deviceAccessKey:Boolean(r&&16!==r.length),deviceSecretKey:Boolean(n&&64!==n.length)},a=Object.entries(o).reduce(((e,[t,r])=>r?{[t]:!0,...e}:e),{});return Object.keys(a).length>0?a:null})(t))return null;const{storeService:r,wsService:n}=e,l=(0,a.makeSharingService)(r,n),p=(0,o.getCurrentUserInfo)(r),S=(0,c.currentTeamIdSelector)(r.getState()),g=(0,c.adminDataForTeamSelector)(r.getState(),S);if(!g)throw new Error("Cannot find adminData");const A=g?.encryptionServiceData?.basicConfigs?.[0];return A?await(async(e,t,r,n,o,a)=>{const{storeService:i,localStorageService:l}=e,{crypto:m,item:p,ws:S}=t,{specialItemGroup:g}=n;if(!g)throw new Error("Cannot find specialItemGroup in adminData");const{specialItemGroup:{items:A},encryptionServiceData:I}=n,{itemId:y}=I,E=i.getSharingData(),{timestamp:f}=(E.items??[]).find((({itemId:e})=>e===y));if(!f)throw new Error("trying to update config before it was created.");const C={...a,...o},v={basicConfigs:[C]},h=await(0,s.getSpecialItemGroupKey)(m,r,n),{itemKey:N}=A.find((({itemId:e})=>e===y)),T=await m.symmetricEncryption.decryptAES256(h,N),G=await m.symmetricEncryption.encryptAES256(T,btoa(JSON.stringify(v))),B=await p.makeUpdateItemEvent(f,N,{itemId:y,itemContent:G}),O=await p.updateItem(S,r.login,r.uki,B);if(!O.items.length)throw new Error("unable to update encryption service special item");const P=(0,c.currentTeamIdSelector)(i.getState());return await(0,d.updateAdminDataAfterItemAddedOrUpdated)(i,l,t.ws,r,`${P}`,{items:O.items,itemGroups:E.itemGroups}),await(0,u.updateSharingDataAfterItemAddedOrUpdated)(i,l,O.items[0]),C})(e,l,p,g,t,A):await(async(e,t,r)=>{const n={basicConfigs:[r]};return(await(0,i.createOrUpdateSpecialItem)(e,t,n)).basicConfigs[0]})(e,l,t)},t.persistEncryptionServiceConfig=async(e,r)=>{(0,l.requireAdmin)(e.storeService);const o=await(0,t.saveOrUpdateEncryptionServiceConfig)(e,r);return o?{success:!0,data:o}:{success:!1,error:{code:n.UnknownError}}}},227218:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.registerTeamDeviceAccount=t.reregisterTeamDevice=t.generateDeviceKeyPair=void 0;const n=r(481926),o=r(46298),a=r(97124),i=r(882366),s=r(134376),c=r(144197),d=r(692310),u=r(808995),l=r(69310),m=r(644293),p=r(543927),S=r(592028);t.generateDeviceKeyPair=async e=>{const{storeService:t,wsService:r}=e,{crypto:n}=(0,a.makeSharingService)(t,r),o=await n.asymmetricEncryption.generateRsaKeyPair();return{devicePrivateKey:o.privateKey.replace(S.PRIVATE_KEY_HEADER,"").replace(S.PRIVATE_KEY_FOOTER,"").replace(/[\r\n ]/gm,""),devicePublicKey:o.publicKey.replace(S.PUBLIC_KEY_HEADER,"").replace(S.PUBLIC_KEY_FOOTER,"").replace(/[\r\n ]/gm,"")}},t.reregisterTeamDevice=async(e,t,r=n.TeamDevicePlatform.ENCRYPTION_SERVICE)=>{t?.deviceAccessKey&&await(0,l.deactivateTeamDevice)(e,{teamDeviceAccessKey:t.deviceAccessKey});const a=await(0,u.registerTeamDevice)(e,{platform:r,deviceName:S.ENCRYPTION_SERVICE_HUMAN_DEVICE_NAME});if(a.success)return a.data;throw new Error(o.DeviceNotFound)},t.registerTeamDeviceAccount=async(e,r)=>{let u,l;r.shouldGenerateDeviceKeyPair?({devicePublicKey:u,devicePrivateKey:l}=await(0,t.generateDeviceKeyPair)(e)):(u=r.devicePublicKey,l=r.devicePrivateKey);const{storeService:g,wsService:A}=e,{crypto:I}=(0,a.makeSharingService)(g,A),y=(0,s.getCurrentUserInfo)(g),E=(0,d.currentTeamIdSelector)(g.getState()),f=(0,d.adminDataForTeamSelector)(g.getState(),E),{revision:C}=await(0,p.loadSpecialUserGroup)(A,y.login,y.uki,f),v=await(0,c.getSpecialUserGroupKey)(I,y,f),h=`${S.PUBLIC_KEY_HEADER}\n${u}\n${S.PUBLIC_KEY_FOOTER}`,N=await I.asymmetricEncryption.encrypt(h,v),T=`special-admin-${E}-${Math.floor(4294967296*Math.random()).toString(16)}@teamdevice.dashlane.com`,G=await(0,i.generateProposeSignature)(I,v,T),B=await(0,m.createTeamDeviceAccount)(e,{teamDeviceAccessKey:r.deviceAccessKey,publicKey:u,proposeSignature:G,userGroupRevision:C,groupKey:N,teamDeviceLogin:T});return!1===B.success?{success:!1,error:{code:(0,o.getCode)(B.error.code,n.createTeamDeviceAccountErrors)}}:{success:!0,data:{login:B.data.login,devicePrivateKey:l,devicePublicKey:u}}}},693921:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mapTeamDeviceEncryptedConfig=t.generateTeamDeviceEncryptedConfig=void 0;const r={scimSignatureKey:{defaultValue:"",configMapping:"DASHLANE_SCIM_SIGNATURE_KEY"},scimAuthToken:{defaultValue:"",configMapping:"DASHLANE_SCIM_AUTHENTICATION_TOKEN"},scimEnabled:{defaultValue:!1,configMapping:"DASHLANE_SCIM_ENABLED"},teamDevicePublicKey:{defaultValue:"",configMapping:"DASHLANE_SCIM_TEAMDEVICE_PUBLIC_KEY"},teamDevicePrivateKey:{defaultValue:"",configMapping:"DASHLANE_SCIM_TEAMDEVICE_PRIVATE_KEY"},connectorEndpoint:{defaultValue:"",configMapping:"DASHLANE_SSO_CONNECTOR_ENDPOINT"},connectorKey:{defaultValue:"",configMapping:"DASHLANE_SSO_CONNECTOR_KEY"},samlIdpCertificate:{defaultValue:"",configMapping:"DASHLANE_SSO_SAML_IDP_CERTIFICATE"},samlIdpEntryPoint:{defaultValue:"",configMapping:"DASHLANE_SSO_SAML_IDP_ENTRYPOINT"}};t.generateTeamDeviceEncryptedConfig=e=>Object.entries(r).map((([t,r])=>{return`${r.configMapping}=${n=r.defaultValue,o=e[t],"boolean"==typeof o||"boolean"==typeof n?o??n?"true":"false":`${o??n}`}`;var n,o})).join("\n"),t.mapTeamDeviceEncryptedConfig=e=>{const t=e.split("\n").reduce(((e,t)=>{const r=t.indexOf("="),[n,o]=[t.slice(0,r),t.slice(r+1)];return{...e,[n]:o}}),{}),n=Object.entries(r).reduce(((e,[r,{configMapping:n,defaultValue:o}])=>{return{...e,[r]:(a=o,i=t[n],i?i.length>0&&"boolean"==typeof a?"true"===i:"boolean"==typeof a?a:i??a:a)};var a,i}),{});if((e=>Object.keys(r).every((t=>t in e)))(n))return n;throw new Error("incomplete data when creating object from config string")}},344974:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDeviceEncryptedConfig=t.getParsedTeamDeviceEncryptedConfig=void 0;const n=r(956668),o=r(46298),a=r(164910),i=r(416593),s=r(25576),c=r(843154),d=r(676404),u=r(693921);t.getParsedTeamDeviceEncryptedConfig=async(e,{configEncryptionKey:t,encryptedConfig:r})=>{if(!r||!t)throw new Error("missing config or encryption key");const{teamDeviceEncryptedConfigEncryptorService:o}=e,i=(0,a.getNoDerivationCryptoConfig)();o.setInstance({raw:atob(t)},"",i);const s=await o.getInstance().decrypt(r),c=(0,n.deflatedUtf8ToUtf16)(s,{skipInflate:!0});return(0,u.mapTeamDeviceEncryptedConfig)(c)},t.getTeamDeviceEncryptedConfig=async function(e,{deviceAccessKey:r,draft:n}){const{storeService:a}=e;(0,c.requireAdmin)(a);const u=(0,i.userLoginSelector)(a.getState());if(!u)throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const l=await(0,d.getEncryptionServiceConfig)(e);if(!1===l.success)return{success:!1,error:{code:l.error.code===o.BasicConfigNotFound?o.TeamDeviceEncryptedConfigNotFound:o.UnknownError}};const{data:{deviceAccessKey:m,configEncryptionKey:p}}=l,S={configurationVersion:0,deviceAccessKey:r||m,draft:n};try{const n=await(0,o.getTeamDeviceEncryptedConfig)(a,u,S);if((0,o.isApiError)(n))return{success:!1,error:{code:(0,o.getCode)(n.code,o.getTeamDeviceEncryptedConfigErrors)}};const i=await(0,t.getParsedTeamDeviceEncryptedConfig)(e,{encryptedConfig:n.encryptedConfiguration,configEncryptionKey:p});return{success:!0,data:{config:n.encryptedConfiguration,configurationVersion:n.configurationVersion,deviceAccessKey:r,encryptionKeyUuid:n.encryptionKeyUuid,configProperties:i}}}catch(e){return{success:!1,error:{code:o.TeamDeviceEncryptedConfigNotFound}}}}},670363:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamDeviceEncryptedConfig=void 0;const n=r(46298),o=r(956668),a=r(164910),i=r(97124),s=r(134376),c=r(416593),d=r(589675),u=r(692310),l=r(676404),m=r(868538),p=r(905829),S=r(539482),g=r(770979),A=r(894150),I=r(843154),y=r(344974),E=r(693921),f=r(834054),C=r(201334);t.updateTeamDeviceEncryptedConfig=async(e,t={},r)=>{const{storeService:v,teamDeviceEncryptedConfigEncryptorService:h,wsService:N}=e;(0,I.requireAdmin)(v);const T=(0,c.userLoginSelector)(v.getState());if(!T)throw new Error("missing login");const G={ssoEnabled:!1,ssoIdpMetaData:"",ssoEndpoint:""},B=await(0,C.getTeamInfo)(e);B.success&&(G.ssoEnabled=B.data.teamInfo.ssoEnabled,G.ssoIdpMetaData=B.data.teamInfo.ssoIdpMetadata,G.ssoEndpoint=B.data.teamInfo.ssoServiceProviderUrl);const O=parseInt((0,u.currentTeamIdSelector)(v.getState()),10);let P=null,R=null;if(G.ssoIdpMetaData&&({samlIdpCertificate:P,samlIdpEntryPoint:R}=await(0,m.parseMetadataFields)(G.ssoIdpMetaData)),"string"==typeof t.ssoIdpMetadata){const{ssoIdpMetadata:r}=t;if(r)try{({samlIdpCertificate:P,samlIdpEntryPoint:R}=await(0,m.parseMetadataFields)(r))}catch(e){return{success:!1,error:{code:n.UnknownError}}}if((await(0,d.setTeamSettings)(v,N,(0,s.getCurrentUserInfo)(v),{teamId:O,settings:{ssoIdpMetadata:r||null,ssoIdpEntrypoint:R}})).error)return{success:!1,error:{code:n.UnknownError}}}const U=await(0,l.getEncryptionServiceConfig)(e),_=r||(U.success&&U.data.deviceAccessKey&&U.data.configEncryptionKey&&U.data.encryptionKeyUuid&&U.data.devicePrivateKey&&U.data.devicePublicKey?U.data:null);if(!_)return{success:!1,error:{code:n.DeviceKeyNotFound}};const{deviceAccessKey:D,encryptionKeyUuid:b,configEncryptionKey:M,devicePrivateKey:L,devicePublicKey:w}=_,k=b.toLowerCase(),K=await(0,y.getTeamDeviceEncryptedConfig)(e,{draft:!1,deviceAccessKey:D});let z={},F=0;if(!1===K.success&&K.error.code!==n.TeamDeviceEncryptedConfigNotFound)return{success:!1,error:{code:n.UnknownError}};if(!0===K.success){const{data:t}=K;z=await(0,y.getParsedTeamDeviceEncryptedConfig)(e,{encryptedConfig:t.config,configEncryptionKey:M}),F=t.configurationVersion}const V=(0,i.makeSharingService)(v,N),H=(0,u.currentTeamIdSelector)(v.getState()),j=(0,u.adminDataForTeamSelector)(v.getState(),H);let W=j?.ssoConnectorKey?.ssoConnectorKey;if(!W||t.ssoConnectorKey)try{W&&t.ssoConnectorKey&&await(0,A.removeTeamAdminItem)(e,"ssoConnectorKey");const r=t.ssoConnectorKey??await(0,p.generateSSOConnectorKey)();W=await(0,S.persistSSOConnectorKey)(e,V,r)}catch(e){return{success:!1,error:{code:n.UnknownError}}}let x=j?.scimSignatureKey?.scimSignatureKey;if(!x){const t=await(0,f.generateSCIMSignatureKey)();x=await(0,g.persistSCIMSignatureKey)(e,V,t)}const $={scimAuthToken:t?.scimAuthToken??z?.scimAuthToken??"",scimEnabled:t?.scimEnabled??z?.scimEnabled??!1,connectorEndpoint:t?.connectorEndpoint??z?.connectorEndpoint??G.ssoEndpoint??"",samlIdpEntryPoint:R??z?.samlIdpEntryPoint??"",samlIdpCertificate:P??z?.samlIdpCertificate??""},Y=Boolean(t.ssoEnabled||z.connectorKey||G.ssoEnabled),q={...$,teamDevicePrivateKey:L,teamDevicePublicKey:w,connectorKey:Y?W:"",scimSignatureKey:$.scimEnabled?x:""},Q=(0,E.generateTeamDeviceEncryptedConfig)(q),Z=(0,o.utf16ToDeflatedUtf8)(Q,{skipUtf8Encoding:!0,skipDeflate:!0}),X=(0,a.getNoDerivationCryptoConfig)();h.setInstance({raw:atob(M)},"",X);const J=h.getInstance(),ee=await J.encrypt(Z),te={configurationVersion:F,deviceAccessKey:D,ssoServiceEnabled:Y,scimServiceEnabled:q.scimEnabled,encryptionKeyUuid:k,draft:!1,encryptedConfiguration:ee,teamDeviceUrl:t.teamDeviceUrl},re=await(0,n.updateTeamDeviceEncryptedConfig)(v,T,te);return(0,n.isApiError)(re)?{success:!1,error:{code:(0,n.getCode)(re.code,n.updateTeamDeviceEncryptedConfigErrors)}}:{success:!0,data:{configurationVersion:re.configurationVersion,encryptionServiceReloadingStatus:re.encryptionServiceReloadingStatus}}}},194228:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.adminProvisioningKeySelector=void 0;const n=r(692310);t.adminProvisioningKeySelector=e=>{const t=(0,n.currentTeamIdSelector)(e),r=(0,n.adminDataForTeamSelector)(e,t);return{adminProvisioningKey:r.adminProvisioningKey?.adminProvisioningKey??null}}},933150:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.persistAdminProvisioningKey=void 0;const n=r(46298),o=r(97124),a=r(353050);t.persistAdminProvisioningKey=async(e,t)=>{const{adminProvisioningKey:r}=t,i=(0,o.makeSharingService)(e.storeService,e.wsService);try{return await(0,a.createOrUpdateSpecialItem)(e,i,{adminProvisioningKey:r})?{success:!0}:{success:!1,error:"failed to persist adminProvisioningKey"}}catch(e){return{success:!1,error:`${e?.message??n.UnknownError}`}}}},260419:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeAdminProvisioningKey=void 0;const n=r(894150);t.removeAdminProvisioningKey=async e=>(await(0,n.removeTeamAdminItem)(e,"adminProvisioningKey"),{success:!0})},494453:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearSelfHostedESSettings=void 0;const n=r(46298),o=r(217387),a=r(134376),i=r(589675),s=r(843154),c=r(69310),d=r(692310),u=r(112927),l=r(676404);t.clearSelfHostedESSettings=async e=>{const{storeService:t,wsService:r}=e;try{(0,s.requireAdmin)(t)}catch(e){if(e.message===o.AuthenticationCode[o.AuthenticationCode.USER_UNAUTHORIZED])return{success:!1,error:{code:n.NotAdmin}}}const m=await(0,l.getEncryptionServiceConfig)(e),p=[];if(m.success){if(m.data.config&&await(0,u.clearEncryptionServiceConfig)(e),m.data.deviceAccessKey&&!(await(0,c.deactivateTeamDevice)(e,{teamDeviceAccessKey:m.data.deviceAccessKey})).success)return{success:!1,error:{code:n.DeactivatedTeamDevice}}}else p.push(n.BasicConfigNotFound);const S=parseInt((0,d.currentTeamIdSelector)(t.getState()),10);return(await(0,i.setTeamSettings)(t,r,(0,a.getCurrentUserInfo)(t),{teamId:S,settings:{ssoServiceProviderUrl:null,ssoIdpMetadata:null,ssoIdpEntrypoint:null}})).error?{success:!1,error:{code:n.UnknownError}}:{success:!0,...p?{warnings:p}:{}}}},592028:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PUBLIC_KEY_FOOTER=t.PUBLIC_KEY_HEADER=t.PRIVATE_KEY_FOOTER=t.PRIVATE_KEY_HEADER=t.ENCRYPTION_SERVICE_HUMAN_DEVICE_NAME=void 0,t.ENCRYPTION_SERVICE_HUMAN_DEVICE_NAME="Encryption Service",t.PRIVATE_KEY_HEADER="-----BEGIN RSA PRIVATE KEY-----",t.PRIVATE_KEY_FOOTER="-----END RSA PRIVATE KEY-----",t.PUBLIC_KEY_HEADER="-----BEGIN RSA PUBLIC KEY-----",t.PUBLIC_KEY_FOOTER="-----END RSA PUBLIC KEY-----"},843154:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requireAdmin=void 0;const n=r(25576),o=r(727885);t.requireAdmin=e=>{if(!(0,o.hasTACAccessInCurrentSpace)(e))throw new Error(n.AuthenticationCode[n.AuthenticationCode.USER_UNAUTHORIZED])}},834054:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateSCIMSignatureKey=void 0;const n=r(316038),o=r(655623);t.generateSCIMSignatureKey=async()=>{const e=await(0,o.getRandomValues)(32);return(0,n.bufferToBase64)(e)}},770979:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.persistSCIMSignatureKey=void 0;const n=r(353050);t.persistSCIMSignatureKey=async(e,t,r)=>(await(0,n.createOrUpdateSpecialItem)(e,t,{scimSignatureKey:r})).scimSignatureKey},539482:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.persistSSOConnectorKey=void 0;const n=r(353050);t.persistSSOConnectorKey=async(e,t,r)=>(await(0,n.createOrUpdateSpecialItem)(e,t,{ssoConnectorKey:r})).ssoConnectorKey},88791:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptionServiceRestartStatusCodes=void 0,function(e){e.OK="OK",e.ES_UNREACHABLE="ES_UNREACHABLE",e.ES_CONFIG_RELOAD_FAILURE="ES_CONFIG_RELOAD_FAILURE",e.ES_INTERNAL_NETWORK_ERROR="ES_INTERNAL_NETWORK_ERROR"}(t.EncryptionServiceRestartStatusCodes||(t.EncryptionServiceRestartStatusCodes={}))},516382:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.changeInviteLinkTeamKey=void 0;const n=r(46298),o=r(208286),a=r(843154),i=r(416593);t.changeInviteLinkTeamKey=async function(e,t){const{storeService:r}=e;try{const e=(0,i.userLoginSelector)(r.getState()),s={success:!1,error:{code:o.InviteLinkResponseErrorCode.NotAdmin}};try{(0,a.requireAdmin)(r)}catch{return s}if(!e)return s;const c=await(0,n.changeInviteLinkTeamKey)(r,e,t);return(0,n.isApiError)(c)?{success:!1,error:{code:(0,n.getCode)(c.code,n.getInviteLinkErrors)}}:{success:!0,data:c}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.InviteLinkNotFound}}}}},604658:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createInviteLink=void 0;const n=r(46298),o=r(208286),a=r(843154),i=r(416593);t.createInviteLink=async function(e,t){const{storeService:r}=e;try{const e=(0,i.userLoginSelector)(r.getState()),s={success:!1,error:{code:o.InviteLinkResponseErrorCode.NotAdmin}};try{(0,a.requireAdmin)(r)}catch{return s}if(!e)return s;const c=await(0,n.createInviteLink)(r,e,t);return(0,n.isApiError)(c)?{success:!1,error:{code:(0,n.getCode)(c.code,n.getInviteLinkErrors)}}:{success:!0,data:c}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.InviteLinkNotFound}}}}},507134:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLinkForAdmin=void 0;const n=r(46298),o=r(208286),a=r(843154),i=r(416593);t.getInviteLinkForAdmin=async function(e,t){const{storeService:r}=e;try{const e=(0,i.userLoginSelector)(r.getState()),s={success:!1,error:{code:o.InviteLinkResponseErrorCode.NotAdmin}};try{(0,a.requireAdmin)(r)}catch{return s}if(!e)return s;const c=await(0,n.getInviteLinkForAdmin)(r,e,t);return(0,n.isApiError)(c)?{success:!1,error:{code:(0,n.getCode)(c.code,n.getInviteLinkErrors)}}:{success:!0,data:c}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.InviteLinkNotFound}}}}},364690:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLink=void 0;const n=r(46298),o=r(208286);t.getInviteLink=async function(e,t){const{storeService:r}=e;try{const e=await(0,n.getInviteLink)(r,t);return(0,n.isApiError)(e)?{success:!1,error:{code:(0,n.getCode)(e.code,n.getInviteLinkErrors)}}:{success:!0,data:e}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.InviteLinkNotFound}}}}},562218:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestInviteLinkToken=void 0;const n=r(46298),o=r(208286);t.requestInviteLinkToken=async function(e,t){const{storeService:r}=e;try{const e=await(0,n.requestInviteLinkToken)(r,t);return(0,n.isApiError)(e)?{success:!1,error:{code:(0,n.getCode)(e.code,n.getInviteLinkErrors)}}:{success:!0,data:e}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.UserInviteLinkNotFound}}}}},54419:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toggleInviteLink=void 0;const n=r(46298),o=r(208286),a=r(843154),i=r(416593);t.toggleInviteLink=async function(e,t){const{storeService:r}=e;try{const e=(0,i.userLoginSelector)(r.getState()),s={success:!1,error:{code:o.InviteLinkResponseErrorCode.NotAdmin}};try{(0,a.requireAdmin)(r)}catch{return s}if(!e)return s;const c=await(0,n.toggleInviteLink)(r,e,t);return(0,n.isApiError)(c)?{success:!1,error:{code:(0,n.getCode)(c.code,n.getInviteLinkErrors)}}:{success:!0,data:c}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.InviteLinkNotFound}}}}},208286:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InviteLinkResponseErrorCode=void 0,function(e){e.NotAdmin="not_admin",e.TeamKeyNotFound="TEAM_KEY_NOT_FOUND",e.InviteLinkNotFound="TEAM_INVITE_LINK_NOT_FOUND",e.UserInviteLinkNotFound="USER_TEAM_INVITE_TOKEN_NOT_FOUND"}(t.InviteLinkResponseErrorCode||(t.InviteLinkResponseErrorCode={}))},589895:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getReport=void 0;const n=r(795623),o=r(46298),a=r(359821),i=r(416593);t.getReport=async function(e,t){const{storeService:r}=e,s=(0,i.userLoginSelector)(r.getState()),c=await(0,o.report)(r,s,t);return(0,o.isApiError)(c)?(n.Debugger.error(`[TeamAdmin] getReport - Failed: ${c.code}`),{success:!1,error:{code:a.UnexpectedError}}):{success:!0,response:c}}},123904:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createConfigString=void 0,t.createConfigString=(e,t,r,n,o,a,i)=>`\nDASHLANE_SSO_CONNECTOR_ENDPOINT=${t}\nDASHLANE_SSO_SAML_IDP_CERTIFICATE=${a}\nDASHLANE_SSO_SAML_IDP_ENTRYPOINT=${i}\nDASHLANE_SSO_CONNECTOR_KEY=${e}\nDASHLANE_SSO_TEAM_DEVICE_ACCESS_KEY=${n}\nDASHLANE_SSO_TEAM_DEVICE_SECRET_KEY=${r}\nDASHLANE_SSO_TEAM_UUID=${o}\n`},976713:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSSOConnectorConfig=void 0;const n=r(481926),o=r(808995),a=r(123904),i=r(868538),s=r(589675),c=r(134376),d=r(692310);t.createSSOConnectorConfig=async function(e,t){const{connectorUrl:r,connectorKey:u,idpMetadata:l}=t;if(!r||!l)throw new Error(`[createConfig] : Missing request information -\n                Received connectorUrl : ${!!r} or\n                Received idpMetadata: ${!!l}\n            `);const m=await(0,o.registerTeamDevice)(e,{platform:n.TeamDevicePlatform.SSO_CONNECTOR,deviceName:"SSO Connector"});if(!1===m.success)return{success:!1,error:{code:m.error.code}};const p=m.data.deviceSecretKey,S=m.data.deviceAccessKey,g=m.data.teamUuid;let A,I,y;try{const t=l.replace(/(\r\n|\n|\r)/gm,"");A=await(0,i.parseMetaData)(t),I=(0,i.getIDPCertificate)(A),y=(0,i.getIDPEntrypoint)(A);const{storeService:r,wsService:n}=e,o=(0,d.currentTeamIdSelector)(r.getState()),a=parseInt(o,10);if(isNaN(a))throw new Error("[createSSOConnectorConfig] : Unable to retrieve teamId from [parseInt(currentTeamIdString, 10)]");await(0,s.setTeamSettings)(r,n,(0,c.getCurrentUserInfo)(r),{teamId:a,settings:{ssoIdpEntrypoint:y}})}catch(e){return{success:!1,error:{code:e.message}}}return{success:!0,config:(0,a.createConfigString)(u||"",r.toLowerCase(),p,S,g,I,y)}}},905829:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateSSOConnectorKey=void 0;const n=r(316038),o=r(869530),a=r(235992);t.generateSSOConnectorKey=async function(){const e=await(0,o.generate64BytesKey)(),t=(0,n.bufferToBase64)(e);return`${(0,a.v4)()}|${t}`}},673168:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},868538:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseMetadataFieldsHandler=t.parseMetadataFields=t.getIDPEntrypoint=t.getIDPCertificate=t.getIDPSSODescriptor=t.parseMetaData=t.SamlTags=void 0;const n=r(244015),o=r(761797),a=r(982848);var i;function s(e){return new Promise(((t,r)=>{(0,n.parseXml)(((e,o)=>{e?r(new Error(a.IDPXmlParseErrors.XML_PARSE_FAILED)):(0,n.isKWXMLElement)(o)?t(o):r(new Error(a.IDPXmlParseErrors.XML_PARSE_FAILED))}),e)}))}function c(e){const t=(0,o.findAllKWXMLElementsOfType)(e,i.IDP_SSO_DESCRIPTOR,[]);if(1!==t.length)throw new Error(a.IDPMetadataParseErrors.INVALID_IDP_SSO_DESCRIPTOR);return t[0]}function d(e){const t=(0,o.findAllKWXMLElementsOfType)(c(e),i.KEY_DESCRIPTOR,[]).filter((e=>!e.__attributes__?.use||"signing"===e.__attributes__?.use));if(!t.length)throw new Error(a.IDPMetadataParseErrors.KEY_DESCRIPTOR_NOT_FOUND);const r=[];if(t.forEach((e=>(0,o.findAllKWXMLElementsOfType)(e,i.CERTIFICATE,r))),!r.length)throw new Error(a.IDPMetadataParseErrors.MISSING_CERTIFICATE);if(r.length>1)throw new Error(a.IDPMetadataParseErrors.MULTIPLE_CERTIFICATES);return r[0].__value__}function u(e){const t=c(e).__children__.filter((e=>{if((0,n.isKWXMLElement)(e))return(0,o.removeNamespace)(e.__type__)===i.SINGLE_SIGN_ON_SERVICE})).find((e=>{if((0,n.isKWXMLElement)(e)){const t=e.__attributes__.Binding;if("string"==typeof t)return t.includes("HTTP-POST")}}));if(!t)throw new Error(a.IDPMetadataParseErrors.IDP_ENTRYPOINT_NOT_FOUND);if((0,n.isKWXMLElement)(t)){const e=t.__attributes__.Location;if("string"==typeof e)return e;throw new Error(a.IDPMetadataParseErrors.INVALID_ENTRYPOINT)}throw new Error(a.IDPMetadataParseErrors.INVALID_ENTRYPOINT)}!function(e){e.IDP_SSO_DESCRIPTOR="IDPSSODescriptor",e.KEY_DESCRIPTOR="KeyDescriptor",e.SINGLE_SIGN_ON_SERVICE="SingleSignOnService",e.CERTIFICATE="X509Certificate"}(i=t.SamlTags||(t.SamlTags={})),t.parseMetaData=s,t.getIDPSSODescriptor=c,t.getIDPCertificate=d,t.getIDPEntrypoint=u,t.parseMetadataFields=async e=>{const t=e.trim().replace(/[\r\n\t]/gm,""),r=await s(t);return{samlIdpCertificate:d(r),samlIdpEntryPoint:u(r)}},t.parseMetadataFieldsHandler=async(e,{ssoIdpMetadata:r})=>{try{const{samlIdpCertificate:e,samlIdpEntryPoint:n}=await(0,t.parseMetadataFields)(r);return{success:!0,data:{samlIdpCertificate:e,samlIdpEntryPoint:n}}}catch(e){const t=Object.values(a.IDPXmlParseErrors),r=Object.values(a.IDPMetadataParseErrors);return{success:!1,error:t.concat(r).includes(e.message)?e.message:a.IDPXmlParseErrors.XML_PARSE_FAILED}}}},982848:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDPMetadataParseErrors=t.IDPXmlParseErrors=void 0,function(e){e.XML_PARSE_FAILED="xml_parse_failed"}(t.IDPXmlParseErrors||(t.IDPXmlParseErrors={})),function(e){e.KEY_DESCRIPTOR_NOT_FOUND="key_descriptor_not_found",e.IDP_ENTRYPOINT_NOT_FOUND="idp_entrypoint_not_found",e.INVALID_IDP_SSO_DESCRIPTOR="invalid_idp_sso_descriptor",e.MISSING_CERTIFICATE="missing_certificate",e.MULTIPLE_CERTIFICATES="multiple_certificates",e.INVALID_ENTRYPOINT="invalid_entrypoint"}(t.IDPMetadataParseErrors||(t.IDPMetadataParseErrors={}))},368323:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},970178:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamSettings=void 0;const n=r(134376),o=r(727885),a=r(589675);t.updateTeamSettings=async(e,t)=>{const r=(0,o.getCurrentSpaceId)(e.storeService.getSpaceData()),i=await(0,a.setTeamSettings)(e.storeService,e.wsService,(0,n.getCurrentUserInfo)(e.storeService),{teamId:r,settings:t});return i.error?{success:!1,error:i.error.message}:{success:!0}}},838045:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpecialUserGroupRevision=t.getSpecialUserGroupInviteValuesForMemberInTeam=t.removeTeamAdmin=t.addTeamAdmin=t.proposeMembers=t.getMembers=void 0,r(401067);const n=r(134376),o=r(736513),a=r(144197),i=r(543927),s=r(97124),c=r(295375),d=r(46298),u=e=>{const t=e.nbrPasswords&&"removed"!==e.status;return e.securityIndex=t&&e.securityIndex,e.nbrPasswords=t&&e.nbrPasswords,"pending"===e.status&&e.lastUpdateDateUnix&&delete e.lastUpdateDateUnix,e};t.getMembers=async function(e,t,{teamId:r}){const n=await(0,c.getTeamMembers)(e,t,{teamId:r,orderBy:"login",limit:0});return(0,d.isApiError)(n)?{success:!1,error:new Error(n.message)}:{success:!0,members:n.members.map(u)}},t.proposeMembers=async function(e,{login:t,uki:r},{proposedMemberLogins:n,teamId:o,origin:a,notificationOptions:i={skipAccountCreationRequiredAlerts:!1}}){const{content:s}=await e.teamPlans.proposeMembers({login:t,uki:r,teamId:o,proposedMemberLogins:n,force:!0,origin:a,notificationOptions:i});return s},t.addTeamAdmin=async function(e,{teamId:t,memberLogin:r}){const{ws:s,store:c}=e,d=(0,n.getCurrentUserInfo)(c),u=c.getTeamAdminData(),l=(0,a.getAdminDataFromTeamAdminData)(u,String(t)),{revision:m}=await(0,i.loadSpecialUserGroup)(s,d.login,d.uki,l),{groupKey:p,proposeSignature:S}=await(0,a.makeInviteToSpecialUserGroup)(e,(0,o.makeCryptoService)(),d,u,{teamId:t,memberLogin:r});return await e.ws.teamPlans.addTeamAdmin({login:d.login,uki:d.uki,teamId:t,memberLogin:r,memberAlias:r,groupKey:p,proposeSignature:S,userGroupRevision:m}),{}},t.removeTeamAdmin=async function(e,{teamId:t,memberLogin:r}){const{ws:o,store:s}=e,c=(0,n.getCurrentUserInfo)(s),d=s.getTeamAdminData(),u=(0,a.getAdminDataFromTeamAdminData)(d,String(t)),{revision:l}=await(0,i.loadSpecialUserGroup)(o,c.login,c.uki,u);return await o.teamPlans.removeTeamAdmin({login:c.login,uki:c.uki,teamId:t,memberLogin:r,userGroupRevision:l}),{}},t.getSpecialUserGroupInviteValuesForMemberInTeam=async function(e,{teamId:t,memberLogin:r}){const{wsService:i,storeService:c}=e,d=(0,s.makeSharingService)(c,i),u=(0,n.getCurrentUserInfo)(c),l=c.getTeamAdminData(),{groupKey:m,proposeSignature:p}=await(0,a.makeInviteToSpecialUserGroup)(d,(0,o.makeCryptoService)(),u,l,{teamId:t,memberLogin:r});return{groupKey:m,proposeSignature:p}},t.getSpecialUserGroupRevision=async function(e,{teamId:t}){const{wsService:r,storeService:o}=e,s=(0,n.getCurrentUserInfo)(o),c=o.getTeamAdminData(),d=(0,a.getAdminDataFromTeamAdminData)(c,String(t)),{revision:u}=await(0,i.loadSpecialUserGroup)(r,s.login,s.uki,d);return{specialUserGroupRevision:u}}},319408:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupKey=t.syncUserGroupManagementForAllTeams=void 0;const n=r(413610),o=r(543927),a=r(485784),i=r(481567),s=r(617137);t.syncUserGroupManagementForAllTeams=function(e,t,r,c,d,u,l){const m=(0,o.syncAdministrableTeamList)(d,l);return Promise.all(Object.keys(m.teams).map((d=>{const l=m.teams[d];return function(e,t,r,c,d,u){return Promise.resolve(d).then((e=>(0,o.syncAdminData)(t,r,e,u))).then((t=>(0,n.setupUserGroupManagement)(e,r,c,t))).then((t=>t.status===a.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA?t:(0,i.filterOutInvalidUserGroupUsers)(e.crypto,t.adminData).then((t=>(0,s.sendUserGroupInvitesToNewUsers)(e,r,t))).then((e=>({status:a.SyncUserGroupManagementStatus.COMPLETE,adminData:e})))))}(e,t,r,c,l,u)}))).then((e=>{const t={};return e.map((e=>e.adminData)).forEach((e=>{t[e.teamId]=e})),{status:e.some((e=>e.status===a.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA))?a.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA:a.SyncUserGroupManagementStatus.COMPLETE,teamAdminData:{teams:t}}}))},t.getUserGroupKey=function(e,t){if(!e)return null;const r=e.find((e=>e.groupId===t));return r?r.groupKey:null}},836467:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupAdminItemsFromMigration=t.createItemsForUserGroups=void 0;const n=r(278320),o=r(493513);async function a(e,t,r){const n=r.users.find((e=>e.userId===t.login));if(!n)throw new Error("Couldnt find self in user group");return await e.asymmetricEncryption.decrypt(t.privateKey,n.groupKey)}t.createItemsForUserGroups=async function(e,t,r){return await Promise.all(r.map((r=>async function(e,t,r){const n=await e.symmetricEncryption.generateNewAESKey(),[a,i]=await Promise.all([e.symmetricEncryption.encryptAES256(n,o.encode(JSON.stringify(r))),e.symmetricEncryption.encryptAES256(t,o.encode(n))]);return{itemId:r.itemId,itemKey:i,content:a}}(e,t,r))))},t.getUserGroupAdminItemsFromMigration=async function(e,t,r){return await Promise.all((r.userGroups||[]).map((r=>async function(e,t,r){return{itemId:(0,n.generateItemUuid)(),groupId:r.groupId,groupKey:await a(e,t,r)}}(e,t,r))))}},617137:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendUserGroupInvitesToNewUsers=void 0;const n=r(670252),o=r(795623),a=r(319408);function i(e){return e.users.filter((e=>"publicKey"===e.rsaStatus))}t.sendUserGroupInvitesToNewUsers=function(e,t,r){return Promise.resolve().then((()=>function(e){return e.userGroups?e.userGroups.reduce(((e,t)=>e.concat(i(t))),[]):[]}(r))).then((s=>s.length?function(e,t,r){const{login:n,uki:o}=t,a=JSON.stringify(r.map((e=>e.alias)));return e.userGroup.findUsersByAliases({login:n,uki:o,aliases:a})}(e,t,s).then((s=>{const c=r.userGroups.map((c=>{const d=i(c);if(!d.length)return Promise.resolve(c);const u=function(e,t){return t.map((t=>({Alias:t.alias,Login:e[t.alias].login,PublicKey:e[t.alias].publicKey,Permission:t.permission})))}(s,d),l=(0,a.getUserGroupKey)(r.userGroupAdminItems,c.groupId);return e.userGroup.makeUpdateMembersWithInviteEvent(c.groupId,l,c.revision,u).then((r=>e.userGroup.updateUserGroupMembers(t,r))).then((e=>e[0])).catch((e=>{const t=`[sendUserGroupInvitesToNewUsers] - Cannot send update event for one user group - groupId: ${c.groupId} - error: ${e}`,r=new Error(t);return o.default.error(r),(0,n.sendExceptionLog)({error:r}),c}))}));return Promise.all(c).then((e=>({...r,userGroups:e})))})):r))}},413610:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSpecialGroups=t.setupUserGroupManagement=void 0;const n=r(795623),o=r(263623),a=r(144197),i=r(836467),s=r(485784);function c(e,t,r,a){return n.Debugger.log("setting up group sharing for team: "+a.teamId),Promise.resolve(a).then((n=>n.specialUserGroup?n:(0,o.createSpecialUserGroup)(e,t,r,Number(n.teamId)).then((e=>Object.assign({},n,{specialUserGroup:e}))))).then((r=>r.specialItemGroup?r:(0,i.getUserGroupAdminItemsFromMigration)(e.crypto,t,a).then((n=>(0,o.createSpecialItemGroup)(e,t,r.specialUserGroup,n).then((e=>Object.assign({},r,{specialItemGroup:e,userGroupAdminItems:n})))))))}t.setupUserGroupManagement=function(e,t,r,n){const o=n.specialUserGroup,i=n.specialItemGroup;if(!o)return i?Promise.reject(new Error("UserGroupManagementSetupService - no special user group, but a special item group is present")):c(e,t,r,n).then((e=>({status:s.SyncUserGroupManagementStatus.COMPLETE,adminData:e})));const d=(0,a.getUserInUserGroup)(t.login,o);return d?"pending"===d.status?i?Promise.reject(new Error("UserGroupManagementSetupService - special user group is not accepted, but a special item group is present")):Promise.resolve().then((()=>e.userGroup.isCurrentUserProposeSignatureValid(t,o))).then((e=>{if(!e)throw new Error("UserGroupManagementSetupService - INVALID_PROPOSE_SIGNATURE")})).then((()=>e.userGroup.makeAcceptUserGroupEvent(t,o))).then((r=>e.userGroup.acceptUserGroup(t,r))).then((({userGroups:e})=>{if(1!==e.length)throw new Error(`UserGroupManagementSetupService - Invalid response from UserGroupService.acceptUserGroup - ${e}`);return e[0]})).then((e=>Object.assign({},n,{specialUserGroup:e}))).then((e=>({status:s.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA,adminData:e}))):"accepted"===d.status?i?Promise.resolve({status:s.SyncUserGroupManagementStatus.COMPLETE,adminData:n}):c(e,t,r,n).then((e=>({status:s.SyncUserGroupManagementStatus.COMPLETE,adminData:e}))):Promise.reject(new Error("UserGroupManagementSetupService - current user status in special user group is neither accepted or pending")):Promise.reject(new Error("UserGroupManagementSetupService - Current user us missing from special user group"))},t.createSpecialGroups=c},543927:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadSpecialUserGroup=t.loadSpecialItemGroup=t.syncAdminDataFromSharingData=t.createUserGroupAdminItemInState=t.deleteAdministrableUserGroups=t.updateAdministrableUserGroupList=t.updateTeamAdminData=t.filterTeamAdminData=t.syncAdminData=t.syncAdministrableTeamList=t.getUserGroupDescriptionsForTeam=void 0;const n=r(263623),o=r(801370),a=r(228096),i=r(144197),s=r(736513),c=r(727885);function d(e,t,r,n){return e.teamPlans.findUserGroups({login:t,uki:r,teamId:n}).then((e=>e.content.userGroups))}function u(e){const t={};return Object.keys(e.teams).forEach((r=>{const n=e.teams[r];t[r]=n?{teamId:r,userGroups:n.userGroups||[],notifications:n.notifications||{accountRecoveryRequests:[]}}:{teamId:r}})),{teams:t}}t.getUserGroupDescriptionsForTeam=d,t.syncAdministrableTeamList=function(e,t){const r={},n=(0,c.getNodePremiumStatusSpaceData)(t),o=n.spaces.filter((e=>(0,c.hasSpecialUserGroupAccessInSpace)(e.teamId,n))).map((e=>e.teamId));return Object.keys(e.teams).filter((e=>Boolean(e))).filter((e=>o.includes(e))).forEach((t=>{r[t]=e.teams[t]})),o.forEach((e=>{r[e]||(r[e]={teamId:e})})),{teams:r}},t.syncAdminData=async function(e,t,r,o){const a=await m(t,r,o);return a.specialUserGroup&&!(0,i.hasUserAcceptedUserGroup)(t.login,a.specialUserGroup)?a:async function(e,t,r,o){const a={items:[],itemGroups:[],userGroups:(await d(e,t,r,Number(o.teamId))).map((e=>({id:e.groupId,revision:e.revision})))},i={items:[],itemGroups:[],userGroups:(o.userGroups||[]).filter((e=>Boolean(e)))},s=await(0,n.buildSharingData)(e,t,r,a,i);return{...o,userGroups:s.userGroups}}(e,t.login,t.uki,a)},t.filterTeamAdminData=u,t.updateTeamAdminData=function(e,t){e.dispatch((0,o.teamAdminDataUpdated)(t)),(0,a.sendTeamAdminDataUpdate)(u(t))},t.updateAdministrableUserGroupList=function(e,t,r){e.dispatch((0,o.userGroupsUpdated)(t,r)),(0,a.sendTeamAdminDataUpdate)(u(e.getTeamAdminData()))},t.deleteAdministrableUserGroups=function(e,t,r){e.dispatch((0,o.userGroupsDeleted)(t,r)),(0,a.sendTeamAdminDataUpdate)(u(e.getTeamAdminData()))},t.createUserGroupAdminItemInState=function(e,t,r){e.dispatch((0,o.userGroupAdminItemCreated)(t,r))};const l=e=>e.reduce(((e,t)=>((0,i.isUserGroupAdminItem)(t)?e.userGroupAdminItems.push(t):(0,i.isDirectorySyncKey)(t)?e.directorySyncKey=t:(0,i.isEsBasicConfigsData)(t)?e.encryptionServiceData=t:(0,i.isSSOConnectorKey)(t)?e.ssoConnectorKey=t:(0,i.isSCIMSignatureKey)(t)?e.scimSignatureKey=t:(0,i.isAdminProvisioningKey)(t)&&(e.adminProvisioningKey=t),e)),{userGroupAdminItems:[],directorySyncKey:null,encryptionServiceData:null,ssoConnectorKey:null,scimSignatureKey:null,adminProvisioningKey:null});async function m(e,t,r){const n=function(e,t){const r=t.itemGroups.find((t=>"userGroupKeys"===t.type&&t.teamId===Number(e.teamId))),n=t.userGroups.find((t=>"teamAdmins"===t.type&&t.teamId===Number(e.teamId)));return{...e,specialItemGroup:r,specialUserGroup:n}}(t,r);return async function(e,t,r){const n=(0,s.makeCryptoService)(),o=t.specialItemGroup&&t.specialItemGroup.items||[],a=e=>({itemId:t})=>t===e,c=await Promise.all(r.items.filter((e=>o.find(a(e.itemId)))).map((r=>{const s=o.find(a(r.itemId))?.itemKey;if(!s)throw new Error("Unexpected error: missing itemKey");return(0,i.decryptAdminItem)(n,e,t,r,s)}))),{userGroupAdminItems:d,directorySyncKey:u,encryptionServiceData:m,ssoConnectorKey:p,scimSignatureKey:S,adminProvisioningKey:g}=l(c);return{...t,userGroupAdminItems:d,directorySyncKey:u,encryptionServiceData:m,ssoConnectorKey:p,scimSignatureKey:S,adminProvisioningKey:g}}(e,n,r)}t.syncAdminDataFromSharingData=m,t.loadSpecialItemGroup=async function(e,t,r,o){if(!o.specialItemGroup||!o.specialItemGroup.groupId)throw new Error("specialItemGroup is missing from adminData");const{itemGroups:a}=await(0,n.getSharedData)(e,t,r,{itemIds:[],itemGroupIds:[o.specialItemGroup.groupId],userGroupIds:[]});if(a&&1===a.length)return a[0];throw new Error("could not fetch specialItemGroup")},t.loadSpecialUserGroup=async function(e,t,r,o){const{userGroups:a}=await(0,n.getSharedData)(e,t,r,{itemIds:[],itemGroupIds:[],userGroupIds:o.specialUserGroup?.groupId?[o.specialUserGroup.groupId]:[]});if(a&&1===a.length)return a[0];throw new Error("Could not fetch specialUserGroup")}},485784:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncUserGroupManagementStatus=void 0,function(e){e[e.NEEDS_FRESH_SHARING_DATA=0]="NEEDS_FRESH_SHARING_DATA",e[e.COMPLETE=1]="COMPLETE"}(t.SyncUserGroupManagementStatus||(t.SyncUserGroupManagementStatus={}))},481567:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.filterOutInvalidUserGroupUsers=void 0;const n=r(882366),o=r(319408);t.filterOutInvalidUserGroupUsers=function(e,t){if(!t.userGroups)return Promise.resolve(t);const r=t.userGroups.map((r=>{const a=(0,o.getUserGroupKey)(t.userGroupAdminItems,r.groupId);return function(e,t,r){const o=r.map((r=>{if("refused"===r.status||"revoked"===r.status)return Promise.resolve(!0);if(!r.proposeSignature)return Promise.resolve(!1);const o=r.proposeSignatureUsingAlias?r.alias:r.userId;return(0,n.isProposeSignatureValid)(e,r.proposeSignature,o,t)}));return Promise.all(o).then((e=>r.filter(((t,r)=>e[r]))))}(e,a,r.users).then((e=>({...r,users:e})))}));return Promise.all(r).then((e=>({...t,userGroups:e})))}},144197:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.findTeamForGroup=t.syncUserGroupManagement=t.isAdminProvisioningKey=t.isSCIMSignatureKey=t.isSSOConnectorKey=t.isEsBasicConfigsData=t.isDirectorySyncKey=t.isUserGroupAdminItem=t.decryptAdminItem=t.getUserGroup=t.getUserGroupAdminItem=t.getSpecialItemGroupKey=t.getSpecialItemGroupFromAdminData=t.getAdminDataFromTeamAdminData=t.makeInviteToSpecialUserGroup=t.getPublicKeyForUser=t.encryptGroupKeyForUser=t.getSpecialUserGroupPrivateKey=t.getSpecialUserGroupKey=t.hasUserAcceptedUserGroup=t.getUserInUserGroup=t.getSpecialUserGroup=void 0;const n=r(263623),o=r(134376),a=r(882366),i=r(970206),s=r(319408),c=r(543927),d=r(97124);function u(e){return e.specialUserGroup}function l(e,t,r){const n=u(r);if(!n)throw new Error("specialUserGroup is not available in adminData");const o=n.users.find((e=>e.userId===t.login));if(!o)throw new Error("couldnt find self in specialUserGroup users");return(0,i.decryptGroupKey)(e,t,o.groupKey)}async function m(e,t,r){const n=await l(e,t,r),o=u(r);return await e.symmetricEncryption.decryptAES256(n,o.privateKey)}function p(e,t,r){return e.asymmetricEncryption.encrypt(t,r)}function S(e,t,r){return e.userGroup.findExistingUsersByAliases({login:t.login,uki:t.uki,aliases:(0,n.extractAliasesFromMembers)([{Alias:r}])}).then((e=>e[r].publicKey))}function g(e,t){return e.teams[t]}function A(e){return e.specialItemGroup}async function I(e,t,r){const n=A(r);if(!n)throw new Error("specialItemGroup is not available in adminData");const o=await m(e,t,r),a=u(r).groupId,i=n.groups.find((e=>e.groupId===a));if(!i)throw new Error("couldnt find specialUserGroup in specialItemGroup groups");return e.asymmetricEncryption.decrypt(o,i.groupKey)}t.getSpecialUserGroup=u,t.getUserInUserGroup=function(e,t){return t.users.find((t=>t.userId===e))},t.hasUserAcceptedUserGroup=function(e,t){return t.users.some((t=>t.userId===e&&"accepted"===t.status))},t.getSpecialUserGroupKey=l,t.getSpecialUserGroupPrivateKey=m,t.encryptGroupKeyForUser=p,t.getPublicKeyForUser=S,t.makeInviteToSpecialUserGroup=function(e,t,r,n,{teamId:o,memberLogin:i,publicKey:s}){const c=g(n,String(o)),d=s?Promise.resolve(s):S(e,r,i);return Promise.all([l(t,r,c),d]).then((([e,r])=>Promise.all([p(t,r,e),(0,a.generateProposeSignature)(t,e,i)]))).then((([e,t])=>({groupKey:e,proposeSignature:t,userGroupRevision:u(c).revision})))},t.getAdminDataFromTeamAdminData=g,t.getSpecialItemGroupFromAdminData=A,t.getSpecialItemGroupKey=I,t.getUserGroupAdminItem=function(e,t,r){return(g(e,t).userGroupAdminItems||[]).find((e=>e.groupId===r))},t.getUserGroup=function(e,t){return Object.keys(e.teams).map((t=>e.teams[t]&&e.teams[t].userGroups)).reduce(((e,t)=>t.concat(e)),[]).find((e=>e.groupId===t))},t.decryptAdminItem=async function(e,t,r,n,o){const a=await I(e,t,r),i=await e.symmetricEncryption.decryptAES256(a,o),s=await e.symmetricEncryption.decryptAES256(i,n.content);return{...JSON.parse(s),itemId:n.itemId}},t.isUserGroupAdminItem=function(e){return"groupId"in e},t.isDirectorySyncKey=function(e){return"publicKey"in e},t.isEsBasicConfigsData=e=>"basicConfigs"in e,t.isSSOConnectorKey=e=>"ssoConnectorKey"in e,t.isSCIMSignatureKey=e=>"scimSignatureKey"in e,t.isAdminProvisioningKey=e=>"adminProvisioningKey"in e,t.syncUserGroupManagement=function(e,t,r){const n=e.getSpaceData(),a=e.getTeamAdminData(),i=(0,o.getCurrentUserInfo)(e),u=(0,d.makeSharingService)(e,t);return i.privateKey?(0,s.syncUserGroupManagementForAllTeams)(u,t,(0,o.getCurrentUserInfo)(e),n,a,r,e).then((t=>((0,c.updateTeamAdminData)(e,t.teamAdminData),t.status))):Promise.reject(new Error("PRIVATE_KEY_MISSING"))},t.findTeamForGroup=function(e,t){const r=Object.keys(e.teams).find((r=>e.teams[r].userGroups.some((e=>e.groupId===t))));return r&&e&&e.teams&&e.teams[r]}},32159:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.adminProvisioningKey$=t.administrableUserGroup$=t.administrableUserGroups$=void 0;const n=r(518948),o=r(903343),a=r(692310),i=r(194228);t.administrableUserGroups$=function(){const e=a.administrableUserGroupsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.administrableUserGroup$=function(e){const t=(0,a.getAdministrableUserGroupSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.adminProvisioningKey$=()=>(0,n.pipe)((0,o.map)(i.adminProvisioningKeySelector),(0,o.distinctUntilChanged)())},676154:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRecoveryCodesAsTeamCaptain=void 0;const n=r(46298),o=r(474528),a=r(416593),i=r(166535),s=e=>{switch(e.code){case o.GetRecoveryCodesAsTeamCaptainNotAdminErrorCode:return i.GetRecoveryCodesAsTeamCaptainErrorCode.NotAdmin;case o.GetRecoveryCodesAsTeamCaptainInternalErrorCode:return i.GetRecoveryCodesAsTeamCaptainErrorCode.InternalError;default:return i.GetRecoveryCodesAsTeamCaptainErrorCode.UnknownError}};t.getRecoveryCodesAsTeamCaptain=async function(e,t){const{storeService:r}=e,i=(0,a.userLoginSelector)(r.getState()),c=await(0,o.getRecoveryCodesAsTeamCaptain)(r,i,t);return(0,n.isApiError)(c)?{success:!1,error:{code:s(c)}}:{success:!0,data:{recoveryCodes:c.recoveryCodes}}}},166535:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetRecoveryCodesAsTeamCaptainErrorCode=void 0,function(e){e.NotAdmin="not_billing_admin",e.InternalError="internal_error",e.UnknownError="UNKNOWN_ERROR"}(t.GetRecoveryCodesAsTeamCaptainErrorCode||(t.GetRecoveryCodesAsTeamCaptainErrorCode={}))},692310:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAdministrableUserGroupSelector=t.isGroupNameAvailableSelector=t.administrableUserGroupSelector=t.administrableUserGroupsSelector=t.currentSpaceInfoSelector=t.currentTeamIdSelector=t.adminDataForTeamSelector=void 0;const n=r(432034);t.adminDataForTeamSelector=(e,t)=>{const r=(e=>e.userSession.teamAdminData)(e);return r.teams?r.teams[t]:void 0},t.currentTeamIdSelector=e=>{const t=e.userSession.spaceData.spaces.find((e=>"accepted"===e.details.status));if(t)return t.teamId},t.currentSpaceInfoSelector=e=>{const t=e.userSession.spaceData.spaces.find((e=>"accepted"===e.details.status));if(t)return t.info},t.administrableUserGroupsSelector=e=>{const r=(0,t.currentTeamIdSelector)(e);if(!r)return[];const n=(0,t.adminDataForTeamSelector)(e,r);return n&&n.userGroups||[]},t.administrableUserGroupSelector=(e,r)=>(0,t.administrableUserGroupsSelector)(e).find((e=>e.groupId===r)),t.isGroupNameAvailableSelector=(e,r)=>!(0,t.administrableUserGroupsSelector)(e).some((e=>e.name===r)),t.getAdministrableUserGroupSelector=e=>(0,n.createSelector)(t.administrableUserGroupsSelector,(t=>t.find((t=>t.groupId===e))))},803674:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeTeamAdminController=void 0;const n=r(97124),o=r(134376),a=r(838045),i=r(543927),s=r(263623),c=r(144197),d=r(766833),u=r(801370);function l(e,t,r){return a.proposeMembers(t,(0,o.getCurrentUserInfo)(e),r)}function m(e,t){return(0,c.getUserGroup)(e.getTeamAdminData(),t)}t.makeTeamAdminController=(e,t)=>({getMembers:t=>function(e,t){return a.getMembers(e,(0,o.getCurrentUserInfo)(e).login,t)}(e,t),proposeMembers:r=>l(e,t,r),addTeamAdmin:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const o=(0,n.makeSharingService)(e,t);return a.addTeamAdmin(o,r).catch((e=>({error:e})))}(e,t,r),removeTeamAdmin:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const o=(0,n.makeSharingService)(e,t);return a.removeTeamAdmin(o,r).catch((e=>({error:e})))}(e,t,r),createUserGroupAction:(r,a)=>function(e,t,r,a){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(a);const c=(0,n.makeSharingService)(e,r),d=(0,o.getCurrentUserInfo)(e),l=e.getTeamAdminData();return(0,s.createUserGroup)(c,d,l,a).then((r=>{if(Array.isArray(r.itemGroups)&&r.itemGroups.length>0){const t=r.itemGroups[0],n=String(t.teamId),o=(0,u.specialItemGroupUpdated)(n,t);e.dispatch(o)}const n=a.teamId,o=e.getTeamAdminData().teams[n]&&e.getTeamAdminData().teams[n].userGroups||[];return(0,i.updateAdministrableUserGroupList)(e,n.toString(),o.concat(r.userGroups)),r.userGroupAdminItem&&((0,i.createUserGroupAdminItemInState)(e,n.toString(),r.userGroupAdminItem),t.getInstance().user.persistTeamAdminData().then((()=>r))),r})).then((e=>({userGroups:e.userGroups,error:e.error})))}(e,r,t,a),deleteUserGroupAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const a=(0,n.makeSharingService)(e,t),c=(0,o.getCurrentUserInfo)(e),d=m(e,r.groupId);return(0,s.deleteUserGroup)(a,c,e.getTeamAdminData(),r).then((({userGroups:t,itemGroups:r})=>{const n=r[0],o=String(n.teamId),a=(0,u.specialItemGroupUpdated)(o,n);return e.dispatch(a),(0,i.deleteAdministrableUserGroups)(e,String(d.teamId),t),{userGroups:t}}))}(e,t,r),renameUserGroupAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const a=(0,n.makeSharingService)(e,t),c=(0,o.getCurrentUserInfo)(e);return(0,s.renameUserGroup)(a,c,r).then((({userGroups:t})=>{if(t&&1===t.length){const n=String(t[0].teamId),o=(e.getTeamAdminData().teams[n]&&e.getTeamAdminData().teams[n].userGroups||[]).map((e=>e.groupId===r.groupId&&t[0]||e));(0,i.updateAdministrableUserGroupList)(e,n,o)}return{userGroups:t}}))}(e,t,r),inviteUserGroupMembersAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const a=(0,n.makeSharingService)(e,t),c=(0,o.getCurrentUserInfo)(e),d=e.getTeamAdminData(),u=m(e,r.groupId),p={};r.users.forEach((e=>p[e.alias]=e));const S={proposedMemberLogins:Object.keys(p),teamId:r.teamId,origin:"teamInviteUserGroupUsers",notificationOptions:{skipAccountCreationRequiredAlerts:!0}};return l(e,t,S).then((t=>{const n=Object.keys(t.proposedMembers).map((e=>p[e]));t.accountCreationRequiredMembers.forEach((e=>n.push(p[e])));const o={};if(Object.keys(t.refusedMembers).forEach((e=>{const r=t.refusedMembers[e];"already_member"!==r?o[e]=r:n.push(p[e])})),0===n.length)return{userGroups:[u],refusedMembers:o};const l={...r,users:n};return(0,s.inviteUserGroupMembers)(a,c,d,l,u).then((t=>{if(t.error)return t;const n=String(t.userGroups[0].teamId),a=(e.getTeamAdminData().teams[n]&&e.getTeamAdminData().teams[n].userGroups||[]).map((e=>e.groupId===r.groupId&&t.userGroups&&t.userGroups[0]||e));return(0,i.updateAdministrableUserGroupList)(e,String(u.teamId),a),{...t,refusedMembers:o}}))}))}(e,t,r),revokeUserGroupMembersAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const a=(0,n.makeSharingService)(e,t),c=(0,o.getCurrentUserInfo)(e);return(0,s.revokeUserGroupMembers)(a,c,r).then((t=>{if(t&&t.userGroups&&1===t.userGroups.length){const n=t.userGroups[0],o=(e.getTeamAdminData().teams[n.teamId]&&e.getTeamAdminData().teams[n.teamId].userGroups||[]).map((e=>e.groupId===r.groupId&&t.userGroups&&t.userGroups[0]||e));(0,i.updateAdministrableUserGroupList)(e,String(n.teamId),o)}return t}))}(e,t,r),updateUserGroupMembersAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const a=(0,n.makeSharingService)(e,t),i=(0,o.getCurrentUserInfo)(e);return(0,s.updateUserGroupMembers)(a,i,r)}(e,t,r),teamUpdateHandler:t=>function(e,t){return Promise.resolve().then((()=>{if(!e.isAuthenticated())return[new Error("no session set")];if(["adminPromoted","adminDemoted"].includes(t.action)&&(()=>{const r=e.getSpaceData().spaces.map((e=>{if(e.details.teamId!==t.teamId.toString())return e;const r=function(e,t){const{teamAdmins:r}=e.details;switch(t.action){case"adminPromoted":return r.concat(t.users.map((e=>({login:e}))));case"adminDemoted":return r.filter((e=>!t.users.includes(e.login)));default:return r}}(e,t);return Object.assign({},e,{details:Object.assign({},e.details,{teamAdmins:r})})}));(0,d.updateSpaceData)(e,r)})(),"memberRevoked"===t.action){const r=e.getTeamAdminData().teams[t.teamId],n=(r.userGroups||[]).map((e=>Object.assign({},e,{users:e.users.filter((e=>!t.users.includes(e.alias)))})));(0,i.updateAdministrableUserGroupList)(e,r.teamId,n)}return null}))}(e,t),confirmFreeTrial:e=>function(e,t){return e.teamPlans.confirmFreeTrial({token:t})}(t,e),getPremiumStatus:e=>function(e,t){return e.premium.status(t)}(t,e),getTeamTokens:()=>function(e,t){const r=e.getUserLogin();return t.qa.tokens({login:r})}(e,t),registerFreeTrial:e=>function(e,t){return e.teamPlans.registerFreeTrial(t)}(t,e),acceptTeamInvite:e=>function(e,t){const{token:r}=t;return e.teamPlans.acceptTeam({token:r})}(t,e)})},364688:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(968541);t.bootstrap=e=>{e.register(n.config)}},353050:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createOrUpdateSpecialItem=void 0;const n=r(278320),o=r(134376),a=r(843154),i=r(144197),s=r(692310),c=r(674042),d=r(514432);t.createOrUpdateSpecialItem=async(e,t,r)=>{const{storeService:u,localStorageService:l}=e;(0,a.requireAdmin)(u);const m=(0,s.currentTeamIdSelector)(u.getState()),p=(0,s.adminDataForTeamSelector)(u.getState(),m),S=(0,o.getCurrentUserInfo)(u),{crypto:g,item:A,ws:I}=t,{specialItemGroup:y}=p;if(!y)throw new Error("Cannot find specialItemGroup in adminData");const E=await(0,i.getSpecialItemGroupKey)(g,S,p),f=(0,n.generateItemUuid)(),C=await g.symmetricEncryption.generateNewAESKey(),v=await g.symmetricEncryption.encryptAES256(E,btoa(C)),h=await g.symmetricEncryption.encryptAES256(C,btoa(JSON.stringify(r))),N=await A.makeItemUpload(f,v,h),T=await A.makeAddItemsEvent(y.groupId,y.revision,[N]),G=await A.addItems(I,S.login,S.uki,T),B=G?.items?.find((({itemId:e})=>e===f));if(!B)throw new Error("unable to persist item");return await(0,c.updateAdminDataAfterItemAddedOrUpdated)(u,l,t.ws,S,m,G),await(0,d.updateSharingDataAfterItemAddedOrUpdated)(e.storeService,e.localStorageService,B,G.itemGroups[0]),r}},544095:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.setupSubscriptions=void 0;var n=r(877208);Object.defineProperty(t,"setupSubscriptions",{enumerable:!0,get:function(){return n.setupSubscriptions}});var o=r(364688);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},894150:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeTeamAdminItem=void 0;const n=r(97124),o=r(134376),a=r(731676),i=r(692310);t.removeTeamAdminItem=async({storeService:e,localStorageService:t,wsService:r},s)=>{const c=(0,n.makeSharingService)(e,r),d=(0,o.getCurrentUserInfo)(e),u=(0,i.currentTeamIdSelector)(e.getState()),l=(0,i.adminDataForTeamSelector)(e.getState(),u),{specialItemGroup:m}=l,{item:p,ws:S}=c;if(!m)throw new Error("Cannot find specialItemGroup in adminData");const{revision:g,groupId:A}=m,I=l[s];if(!I)return{success:!0};const{itemId:y}=I,E=await p.makeRemoveItemsEvent(A,g,[y]),f=await p.removeItems(S,d.login,d.uki,E);return await(0,a.updateDataAfterSpecialItemRemoved)(e,t,c.ws,d,f,E),{success:!0}}},877208:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(97124),o=r(107344),a=r(358415);t.setupSubscriptions=async function(e,t){const{sessionService:r,storeService:i,localStorageService:s,wsService:c}=t,d=(0,n.makeSharingService)(i,c),u=(0,a.makeDirectorySyncController)({sessionService:r,sharingService:d,storeService:i,localStorageService:s,wsService:c});e.syncSuccess.on((()=>{const e=i.isFeatureActivated("teamAdminConsoleDirectorySync"),t=i.getSpaceData(),r=(0,o.isDirectorySyncActivated)(t);e&&r&&u.directorySyncForAllTeams()}))}},731676:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateDataAfterSpecialItemRemoved=void 0;const n=r(801370),o=r(334433),a=r(543927),i=r(692310);t.updateDataAfterSpecialItemRemoved=async(e,t,r,s,c,d)=>{if(1!==d.items.length)throw new Error("Currently only supporting single item removal.");const u=(0,i.currentTeamIdSelector)(e.getState()),l=e.getTeamAdminData().teams[u],m=t.getInstance(),p=await(async(e,t,r)=>{const{items:n,...o}=await e.getSharingData(),a=n.filter((({itemId:e})=>e!==r.items[0])),i=o.itemGroups.filter((({groupId:e})=>e!==r.groupId)),s=t.itemGroups.find((({groupId:e})=>e===r.groupId)),c=i.concat(s);return{...o,itemGroups:c,items:a}})(m,c,d),S={teams:{[u]:await(0,a.syncAdminData)(r,s,l,p)}},g=(0,n.teamAdminDataUpdated)(S),A=e.dispatch(g),I=t.getInstance();await I.storeTeamAdminData(A.teamAdminData),e.dispatch((0,o.sharingDataUpdated)(p)),await m.storeSharingData(p)}},674042:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateAdminDataAfterItemAddedOrUpdated=void 0;const n=r(801370),o=r(543927),a=(e,t,r)=>t?e.filter((({[r]:e})=>e!==t[r])).concat([t]):e;t.updateAdminDataAfterItemAddedOrUpdated=async(e,t,r,i,s,{itemGroups:c,items:d})=>{const u=e.getSharingData(),{items:l,itemGroups:m,userGroups:p,...S}=u,g=e.getTeamAdminData().teams[s],[A]=c??[],[I]=d??[],{specialUserGroup:y}=g,E={...S,items:a(l,I,"itemId"),itemGroups:a(m,A,"groupId"),userGroups:a(p,y,"groupId")},f=await(0,o.syncAdminData)(r,i,g,E),C={teams:{[s]:f}},v=(0,n.teamAdminDataUpdated)(C),h=e.dispatch(v),N=t.getInstance();return await N.storeTeamAdminData(h.teamAdminData),f}},514432:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateSharingDataAfterItemAddedOrUpdated=void 0;const n=r(334433);t.updateSharingDataAfterItemAddedOrUpdated=async(e,t,r,o)=>{const a=t.getInstance(),{items:i,itemGroups:s,...c}=await a.getSharingData(),d=i.filter((({itemId:e})=>e!==r.itemId)).concat([r]),u={...c,itemGroups:o?s.filter((({groupId:e})=>e!==o.groupId)).concat([o]):s,items:d};e.dispatch((0,n.sharingDataUpdated)(u)),await a.storeSharingData(u)}},577627:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeSessionService=void 0;const n=r(595551),o=r(897321),a=r(634186),i=r(127754),s=r(506623);t.makeSessionService=e=>{let t=null,r=null,c=null;return{isSessionStarted:()=>{const{storeService:t}=e,r=t.getState();return!!(0,i.sessionStartTimeSelector)(r)},setInstance:(i,s)=>{t=(0,n.makeUserSessionService)(e,i,s),r=(0,o.makeUserDeviceService)(e.storeService,e.wsService),c=(0,a.makeUserPaymentService)(e.storeService,e.wsService)},close:()=>(t?t.closeSession():Promise.resolve()).then((()=>{t=null,r=null,c=null})),lock:()=>(t?t.lockSession():Promise.resolve()).then((()=>{t=null,r=null,c=null})),tryRestoreInstance:()=>{const{storeService:d}=e,u=d.getState();(0,i.sessionIdSelector)(u)?(t=(0,n.makeResumedUserSessionService)(e),r=(0,o.makeUserDeviceService)(e.storeService,e.wsService),c=(0,a.makeUserPaymentService)(e.storeService,e.wsService)):(0,s.setupEncryptorServices)(e)},getInstance:()=>{if(!t)throw new Error("makeSessionService: You must call setInstance(login: string, password: string) before getting the instance");return{user:t,device:r,payment:c}}}}},897321:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserDeviceService=void 0;const n=r(976089),o=r(228096),a=r(670252),i=r(290622);t.makeUserDeviceService=(e,t)=>({fetchDevicesList:()=>s(e,t),fetchTemporaryToken:()=>c(e,t),deactivateDevice:r=>d(e,t,r),changeDeviceName:(r,n)=>u(e,t,r,n)});const s=async(e,t)=>{const r=e.getAccountInfo().login,o=(0,i.ukiSelector)(e.getState()),a=(0,i.deviceKeysSelector)(e.getState()),s=(await t.devices.list({login:r,uki:o})).map((e=>({...e,isCurrentDevice:a&&e.deviceId===a.accessKey}))),c=s.find((e=>e.isCurrentDevice));return c&&e.getStore().dispatch((0,n.registerDeviceName)(c.deviceName)),s},c=(e,t)=>{const r=e.getAccountInfo().login,n=(0,i.ukiSelector)(e.getState());return t.authentication.getTemporaryToken({login:r,uki:n})},d=(e,t,r)=>{const n=e.getAccountInfo().login,c=(0,i.ukiSelector)(e.getState());return t.devices.deactivate({login:n,uki:c,deviceId:r}).then((n=>s(e,t).then((e=>{const t={devicesList:e,deviceId:r,success:"success"===n.status,reason:"success"!==n.status?`Deactivate Device Error - ${n.content}`:null};o.deactivateDeviceResult(t),t.success||(0,a.sendExceptionLog)({message:t.reason})}))))},u=(e,t,r,n)=>{const c=e.getAccountInfo().login,d=(0,i.ukiSelector)(e.getState());return t.devices.changeName({login:c,uki:d,deviceId:r,updatedDeviceName:n}).then((i=>s(e,t).then((e=>{const t={devicesList:e,deviceId:r,success:"success"===i.status,updatedName:n,reason:"success"!==i.status?`Change Device Name Error - ${i.content}`:null};o.changeDeviceNameResult(t),t.success||(0,a.sendExceptionLog)({message:t.reason})}))))}},634186:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserPaymentService=void 0;const n=r(290622),o=r(936273),a=r(46298);t.makeUserPaymentService=(e,t)=>({fetchInvoices:()=>i(e),updatePaymentCard:(r,n)=>s(e,t,r,n),cancelPremiumSubscription:()=>c(e,t)});const i=async e=>{const t=e.getAccountInfo().login,r=await(0,o.listInvoices)(e,t);return(0,a.isApiError)(r)?[]:r.invoices},s=(e,t,r,o)=>{const a=e.getAccountInfo().login,i=(0,n.ukiSelector)(e.getState());return t.premium.updateCardToken({login:a,uki:i,tokenId:r,stripeAccount:o}).then((e=>({success:e.success&&!e.error,reason:e.error?e.error.message:null})))},c=(e,t)=>{const r=e.getAccountInfo().login,o=(0,n.ukiSelector)(e.getState());return t.premium.setAutoRenewal({login:r,uki:o,enabled:!1}).then((()=>{}))}},595551:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateRsaKeys=t.treatKeysResult=t.isSyncInProgress=t.storeSync=t.hasTreatProblems=t.makeResumedUserSessionService=t.makeUserSessionService=t.ON_USER_SESSION_CLOSED=void 0;const n=r(110203),o=r(956668),a=r(228096),i=r(25576),s=r(448313),c=r(235924),d=r(795623),u=r(645291),l=r(827517),m=r(420317),p=r(334433),S=r(56269),g=r(737898),A=r(525963),I=r(582262),y=r(976089),E=r(378118),f=r(485784),C=r(736513),v=r(25576),h=r(670252),N=r(990503),T=r(816356),G=r(428445),B=r(801370),O=r(144197),P=r(433007),R=r(58217),U=r(259489),_=r(358582),D=r(441007),b=r(417936),M=r(60946),L=r(275226),w=r(656915),k=r(805689),K=r(706231),z=r(739408),F=r(843416),V=r(862627),H=r(416593),j=r(589438),W=r(316225),x=r(831177),$=r(434287),Y=r(808481),q=r(838474),Q=r(276901),Z=r(412362),X=r(986691),J=r(140051),ee=r(872881),te=r(495303),re=r(153582),ne=r(436081),oe=r(216661),ae=r(514651),ie=r(46298),se=r(361740),ce=r(410824),de=r(835507),ue=r(164910),le=r(238250),me=r(716478),pe=r(471291),Se=r(506623),ge=r(684827),Ae=r(998260),Ie=r(357903),ye=r(392263);t.ON_USER_SESSION_CLOSED="OnUserSessionClosed";const Ee=(e,t,r=!1)=>{e.localStorageService.setInstance(t),r&&e.storeService.dispatch((0,s.openSession)(t));const n=(0,ue.getNoDerivationCryptoConfig)();e.teamDeviceEncryptedConfigEncryptorService.setInstance({raw:e.storeService.getUserSession().masterPassword},e.storeService.getUserSession().serverKey,n),(0,Se.setupEncryptorServices)(e),e.localStorageService.setInstance(t);const o=e.cryptoService||(0,C.makeCryptoService)(),a=new Q.LocalStorageEventStore(e.localStorageService);(0,Z.setInstance)(a),(0,X.setInstance)(a),(0,q.setInstance)(e.localStorageService,e.storeService),(0,ne.setInstance)(e.storeService,e.localStorageService,e.wsService);let i=null;const c=()=>{clearInterval(i)};return(()=>{let t=e.storeService.getUserSession();e.storeService.getStore().subscribe((()=>{const r=e.storeService.getUserSession();r!==t&&(t.masterPassword===r.masterPassword&&t.serverKey===r.serverKey||""===r.masterPassword||(d.Debugger.log("Master Password || Server Key updated"),r.masterPassword||r.serverKey?e.masterPasswordEncryptorService.setInstance({raw:r.masterPassword},r.serverKey):e.masterPasswordEncryptorService.close(),t=r))}))})(),{loadSessionData:()=>Ue(e.localStorageService,e.storeService),loadNonResumableSessionData:()=>_e(e.localStorageService,e.storeService),accountExistsLocally:()=>async function(e){const t=await(0,L.getLocalAccounts)(e.storeService,e.storageService),r=e.storeService.getUserLogin(),n=e.localStorageService.getInstance(),o=t.some((({login:e})=>r===e));if(o){const e=await n.doesPersonalDataExist();return Boolean(r&&o&&e)}const a=await n.doesLocalDataExist();return Boolean(r&&a)}(e),refreshSessionData:()=>async function(e,t){const{localStorageService:r,storeService:n,wsService:o}=e,a=(0,ce.requestPairing)(n,t),i=Ve(r,n,o,t).then((()=>{e.storeService.getPersonalFeatures().features.ims_web_ph_mv3_dev||r.getInstance().getHealth().then((e=>{if(null!==e){const t=(0,j.healthStateUpdated)(e);n.dispatch(t)}})).catch(Re("loadHealthDataPromise"))})),s=(0,Y.refreshUserABTest)(n,r.getInstance(),t),c=(0,w.ukiSelector)(n.getState()),d=(0,de.refreshPremiumStatus)(n,o,t,c);await Promise.all([d,a,i,s])}(e,t),getSyncArgs:()=>Oe(e.storeService,e.masterPasswordEncryptorService,e.wsService),sync:t=>Me(e,o,c,t),attemptSync:t=>he(e,o,c,t),requestNewSync:t=>Be(e,o,c,t),startPeriodic2FAInfoRefresh:()=>(()=>{if(null!==i)return;const{storeService:t,wsService:r}=e;i=setInterval((()=>{(0,pe.refreshTwoFactorAuthenticationInfoService)(t,r)}),me.ENFORCE_2FA_POLICY_REFRESH_TIMER_INTERVAL)})(),stopPeriodic2FAInfoRefresh:()=>c(),fetchContactInfo:()=>He(e.storeService,e.wsService),fetchSubscriptionCode:()=>function(e,t){const r=e.getAccountInfo().login,n=(0,w.ukiSelector)(e.getState()),o=e.getSubscriptionCode();return o?Promise.resolve(o):t.premium.getSubscriptionCode({login:r,uki:n}).then((t=>{const r=t&&t.content&&t.content.subscriptionCode;return e.dispatch((0,U.saveSubscriptionCode)(r)),r}))}(e.storeService,e.wsService),persistLocalSettings:()=>we(e.localStorageService,e.storeService),persistPersonalData:()=>ke(e.localStorageService,e.storeService),persistPersonalSettings:()=>Ke(e.localStorageService,e.storeService),persistAllData:()=>Fe(e.localStorageService,e.storeService),persistTeamAdminData:()=>ze(e.localStorageService,e.storeService),persistLocalKey:t=>e.localStorageService.getInstance().storeLocalKey(t),closeSession:()=>Ce(e,c),lockSession:()=>ve(e),fetchAccountInfo:()=>function(e,t){const r=e.getUserSession(),n=r.analyticsIds,o=r.publicUserId;return n.userAnalyticsId&&n.deviceAnalyticsId&&o?Promise.resolve({userAnalyticsId:n.userAnalyticsId,deviceAnalyticsId:n.deviceAnalyticsId,publicUserId:o}):(0,ae.accountInfo)(e,t).then((t=>{if((0,ie.isApiError)(t)||"success"!==t.code)throw new Error("Unable to fetch updated account info");return e.dispatch((0,T.updateAnalyticsIds)(t.userAnalyticsId,t.deviceAnalyticsId)),e.dispatch((0,T.updatePublicUserId)(t.publicUserId)),{userAnalyticsId:t.userAnalyticsId,deviceAnalyticsId:t.deviceAnalyticsId,publicUserId:t.publicUserId}}))}(e.storeService,e.storeService.getUserLogin())}};t.makeUserSessionService=(e,t,r)=>{if(!t)throw new Error(i.AuthenticationCode[i.AuthenticationCode.EMPTY_LOGIN]);const n=t.toLowerCase();if(!(0,G.isValidLogin)(n))throw new Error(i.AuthenticationCode[i.AuthenticationCode.INVALID_LOGIN]);if(!r&&""===r)throw new Error(i.AuthenticationCode[i.AuthenticationCode.EMPTY_MASTER_PASSWORD]);return e.storeService.dispatch((0,T.updateMasterPassword)(r)),e.storeService.dispatch((0,T.updateServerKey)("")),Ee(e,n,!0)},t.makeResumedUserSessionService=e=>{const t=((0,H.userLoginSelector)(e.storeService.getState())??"").toLowerCase();if(!(0,G.isValidLogin)(t))throw new Error(a.SessionResumingCode[a.SessionResumingCode.INVALID_LOGIN_IN_STORE]);return Ee(e,t)};const fe=async(e,t)=>{const{storageService:r,storeService:n,eventBusService:o}=e;n.isAuthenticated()&&(t&&await(0,se.cleanRememberMeStorageData)(n,r),o.sessionClosed({login:null})),(0,te.clearInstance)(),(0,X.clearInstance)(),(0,Z.clearInstance)(),(0,q.clearInstance)(),(0,ne.clearInstance)();const{anonymousPartnerId:a,dashlaneServerDeltaTimestamp:i,appKeys:d,styxKeys:u}=n.getSdkAuthentication();n.dispatch((0,c.resetLoginStepInfo)()),n.dispatch((0,T.updateSessionDidOpen)(!1)),n.dispatch((0,s.closeSession)()),n.dispatch((0,P.loadSdkAuthentication)({anonymousPartnerId:a,dashlaneServerDeltaTimestamp:i,appKeys:d,styxKeys:u}))},Ce=async(e,t)=>{const{storeService:r}=e;r.isAuthenticated()&&(await(0,Ie.waitUntilSyncComplete)(e.storeService),t()),await fe(e,!0)},ve=async e=>{const{storeService:t}=e;if(!t.isAuthenticated()){const e=ye.CarbonError.fromAnyError(new Error("No user session to lock")).addContextInfo("LOCK USER SESSION","UserSessionService");throw(0,h.sendExceptionLog)({error:e}),e}await fe(e,!1)},he=async(e,t,r,n)=>{try{return await Me(e,t,r,n)}catch(e){const t=new Error(`Sync failed: ${e}`);(0,h.sendExceptionLog)({error:t,code:N.ExceptionCriticality.WARNING})}};let Ne=!1,Te=()=>{},Ge=Promise.resolve();const Be=async(e,t,r,n)=>{if(!Ne)return Ne=!0,await Ge,Ne=!1,he(e,t,r,n)},Oe=(e,t,r,o,a)=>{const i=e.getLocalSettings(),s=e.getAccountInfo().login,c=a===n.Trigger.InitialLogin?0:i.lastSync,d=a===n.Trigger.InitialLogin?g.SyncType.FIRST_SYNC:g.SyncType.LIGHT_SYNC;return{dataEncryptorService:t,storeService:e,login:s,uki:(0,w.ukiSelector)(e.getState()),lastSyncTimestamp:c,syncType:d,personalData:e.getPersonalData(),needsKeys:!e.getUserSession().keyPair,ws:r,announce:o||(e=>{})}},Pe=(e,t,r)=>{const n=Oe(e,t,r);return Object.assign(n,{lastSyncTimestamp:A.MAX_SYNC_TIMESTAMP})},Re=e=>t=>(0,h.sendExceptionLog)({message:`[Crypto] unable to ${e}. ErrorMessage: ${t}`}),Ue=async(e,t)=>{const r=e.getInstance().getPersonalData().then((e=>(d.Debugger.log("Personal data has been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>Re("loadPersonalData")(e)}))),n=e.getInstance().getLocalSettings().then((e=>(d.Debugger.log("Local settings have been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>Re("loadLocalSettings")(e)}))),o=e.getInstance().getPersonalSettings().then((e=>(d.Debugger.log("Personal settings have been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>Re("loadPersonalSettings")(e)}))),c=e.getInstance().getPersonalFeatures().then((e=>(d.Debugger.log("Personal features have been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>Re("loadPersonalFeatures")(e)}))),g=e.getInstance().doesNotificationStatusExist().then((r=>{r&&e.getInstance().getNotificationStatus().then((e=>(d.Debugger.log("Notifications status have been deciphered successfully"),t.dispatch((0,$.loadNotificationsStatus)(e)),e))).catch((e=>({error:!0,logError:()=>Re("loadNotificationsStatus")(e)})))})),A=e.getInstance().getUserABTests().then((e=>(d.Debugger.log("User AB tests have been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>Re("loadUserABTests")(e)}))),I=e.getInstance().doesDarkWebExist().then((async r=>{if(r){const{emails:r,onboardingState:n}=await e.getInstance().getDarkWeb();t.dispatch((0,x.dataLeaksEmailStatusListUpdated)(r)),t.dispatch((0,x.darkWebOnboardingStateUpdated)(n||re.DarkWebOnboardingState.NOT_SEEN))}})).catch(Re("loadDarkWeb")),y=e.getInstance().getAnalyticsIds().then((e=>((0,d.logInfo)({message:"User Analytics IDs have been deciphered successfully"}),e))).catch((e=>({error:!0,logError:()=>Re("loadAnalticsIds")(e)}))),E=(0,K.loadUserAuthenticationData)(e,t),f=[r,n,o,c];if(await e.getInstance().hasAuthenticationData()){const e=E.then((e=>(0,z.isLoadAuthenticationSuccess)(e)||e.message===z.FailedToRehydrateAuthenticationData?{error:!1}:{error:!0,logError:()=>Re("loadAuthenticationData")(e.error)}));f.push(e)}const C=await Promise.all(f),v=C.every((e=>!!e&&e.error)),h=C.some((e=>!!e&&e.error));if(v)throw new Error(i.AuthenticationCode[i.AuthenticationCode.WRONG_PASSWORD]);if(h)throw C.forEach((e=>!!e&&e.logError instanceof Function&&e.logError())),new Error(i.AuthenticationCode[i.AuthenticationCode.DATA_TAMPERED_ERROR]);try{t.dispatch((0,u.loadStoredPersonalData)(await r));const e=await n;if(e){const r=(0,s.localSettingsUpdated)(e);t.dispatch(r),a.sendWebOnboardingModeUpdate(e.webOnboardingMode)}t.dispatch((0,l.loadStoredPersonalSettings)(await o)),t.dispatch((0,m.loadedStoredFeatures)(await c)),t.dispatch((0,F.loadedStoredUserABTests)(await A)),t.dispatch((0,T.loadAnalyticsIds)(await y)),await I,(0,S.sendFeaturesUpdateEvent)(t),await E.then((e=>{if(!(0,z.isLoadAuthenticationSuccess)(e))throw e.error}))}catch(e){const t=`An error occurred when trying to write personalData, localSettings, personalSettings or personalFeatures in Redux store ${e} `;throw d.Debugger.error(t),new Error(t)}const N=e.getInstance().getSharingData().then((e=>{d.Debugger.log(`sharingData loaded for ${t.getAccountInfo().login}`),t.dispatch((0,p.sharingDataUpdated)(e))})).catch(Re("loadSharingDataPromise")),G=e.getInstance().getSharingSync().then((e=>{d.Debugger.log(`sharingSync loaded for ${t.getAccountInfo().login}`),t.dispatch((0,ge.setAllPendingAction)(e.pendingItemGroups,e.pendingUserGroups))})).catch(Re("loadSharingSyncPromise")),O=e.getInstance().getTeamAdminData().then((e=>{d.Debugger.log(`teamAdminData loaded for ${t.getAccountInfo().login}`),t.dispatch((0,B.teamAdminDataUpdated)(e))})).catch(Re("loadTeamAdminDataPromise")),P=e.getInstance().getIcons().then((e=>{if(null!==e){const r=(0,oe.IconsCacheLoaded)(e);t.dispatch(r)}})).catch(Re("loadIconsDataPromise")),R=e.getInstance().doesUserActivityExist().then((async r=>{if(r){const{lastSentAt:r}=await e.getInstance().getUserActivity();t.dispatch((0,J.userActivityLastSentAtUpdated)(r))}})).catch(Re("loadUserActivity")),U=e.getInstance().doesVaultReportExist().then((async r=>{if(r){const{lastSentAt:r}=await e.getInstance().getVaultReport();t.dispatch((0,ee.vaultReportLastSentAtUpdated)(r))}})).catch(Re("loadVaultReport"));return Promise.resolve().then((()=>{Promise.all([N,G,O,g,P,R,U])}))},_e=async(e,t)=>{const r=e=>t=>{const r=`[Session] unable to ${e}. ErrorMessage: ${t}`;return d.Debugger.error(r),(0,h.sendExceptionLog)({message:r})},n=async(e,r)=>{await r;const n=(0,H.userLoginSelector)(t.getState());d.Debugger.log(`${e} loaded for ${n}`)},o=e.getInstance().getPersonalData().then((e=>{t.dispatch((0,u.loadStoredPersonalData)(e))})).catch(r("loadPersonalData")),a=e.getInstance().getSharingData().then((e=>{t.dispatch((0,p.sharingDataUpdated)(e))})).catch(r("loadSharingDataPromise")),i=e.getInstance().getSharingSync().then((e=>{t.dispatch((0,ge.setAllPendingAction)(e.pendingItemGroups,e.pendingUserGroups))})).catch(r("loadSharingSyncPromise")),s=e.getInstance().getTeamAdminData().then((e=>{t.dispatch((0,B.teamAdminDataUpdated)(e))})).catch(r("loadTeamAdminDataPromise")),c=t.getPersonalFeatures().features.ims_web_ph_mv3_dev?Promise.resolve():e.getInstance().getHealth().then((e=>{if(null!==e){const r=(0,j.healthStateUpdated)(e);t.dispatch(r)}})).catch(r("loadHealthDataPromise")),l=e.getInstance().getIcons().then((e=>{if(null!==e){const r=(0,oe.IconsCacheLoaded)(e);t.dispatch(r)}})).catch(r("loadIconsDataPromise"));try{await Promise.all([n("personalData",o),n("sharingData",a),n("sharingData",i),n("teamAdminData",s),n("healthData",c),n("iconsCacheData",l)])}catch(e){const t="Failed to load non resumable user session data",r=new Error(t);(0,d.logError)({message:t,tag:["resume"],details:{error:JSON.stringify(e)}}),(0,h.sendExceptionLog)({error:r})}};t.hasTreatProblems=(e,t,r)=>{if(!e.summary)return{transactionsToDownload:[],transactionsToUpload:[]};const n=t.getPersonalData(),{missingLocally:o,missingRemotely:a}=(0,R.getMissingIdentifiers)(r,n,e.summary);return{transactionsToUpload:[...a],transactionsToDownload:[...o]}};const De=async e=>{const t=(0,Z.getInstance)(),r=(0,X.getInstance)();let n=null,o=null;try{const{storeService:c,applicationModulesAccess:d}=e,l=await(0,A.sync)(e),m=l.clearTransactions||[];if(0!==m.length){n=r.lockTopic("healthUpdates"),o=r.lockTopic("iconsUpdates");const u=m.filter((e=>"AUTHENTIFIANT"===e.type)).map((e=>e.identifier)),l=(e=>e.filter((e=>"SECURITYBREACH"===e.type)).map((e=>e.identifier)))(m),p=0===(i=u).length?null:{type:"credentialUpdates",credentialIds:i};null!==p&&await t.add("healthUpdates",p);const S=0===l.length?null:{type:"breachUpdates"};null!==S&&await t.add("healthUpdates",S);const g=(e=>0===e.length?null:{type:"credentialUpdates",credentialIds:e})(u);null!==g&&await t.add("iconsUpdates",g);const A=(e=>0===e.length?null:{type:"breachUpdates",breachesIds:e})(l);null!==A&&await t.add("iconsUpdates",A),(await Promise.all(m.map(s.applyTransaction))).forEach((e=>{c.dispatch(e)})),a.reportDataUpdate(c);try{if(d&&(u.length>0||l.length>0)&&c.getPersonalFeatures().features.ims_web_ph_mv3_dev){const{commands:e}=d.createClients().passwordHealth;e.recalculatePasswordHealth()}}catch(e){const t=`Password Health update - sync: ${e}`,r=new Error(t);(0,h.sendExceptionLog)({error:r,code:N.ExceptionCriticality.WARNING})}}return l.uploadedTransactions.length>0&&c.dispatch((0,u.updateLastBackupTime)(l.uploadedTransactions,Math.floor(l.lastSyncTimestamp/1e3))),e.lastSyncTimestamp<A.MAX_SYNC_TIMESTAMP&&c.dispatch((0,y.registerLastSync)(l.lastSyncTimestamp)),l}catch(e){throw e}finally{n&&r.releaseTopic("healthUpdates",n),o&&r.releaseTopic("iconsUpdates",o)}var i};t.storeSync=async(e,r)=>{const n=await(async e=>{const{announce:t,personalData:r}=e;try{t(_.announcements.chronologicalSyncStarted(r));const n=await De(e);return t(_.announcements.chronologicalSyncFinished(n.summary,n.fullBackupFileSize)),n}catch(e){throw t(_.announcements.chronologicalSyncFailed(e)),e}})(r);return(async(e,r,n)=>{const{announce:o}=r;o(_.announcements.treatProblemStarted());const{transactionsToDownload:a,transactionsToUpload:i}=(0,t.hasTreatProblems)(n,e,o),s=a.length,c=i.length;if(o(_.announcements.treatProblemDiffComputed(s,c)),s<=0&&c<=0)return o(_.announcements.treatProblemFinished()),n;try{c>0&&e.dispatch((0,u.storeChangesToUpload)(i));const t=await De({...Oe(e,r.dataEncryptorService,r.ws,o),transactionIds:a}),s={...t,clearTransactions:[...t.clearTransactions,...n.clearTransactions]};return o(_.announcements.treatProblemFinished()),s}catch(e){throw o(_.announcements.treatProblemFailed(e)),e}})(e,r,n)};const be=async({storeService:e,dataEncryptorService:r,localStorageService:n,wsService:o,eventLoggerService:a,applicationModulesAccess:i},s,c,d)=>{if(!c.sharing2||!(0,w.ukiSelector)(e.getState()))return c;const u=async t=>{const r=await(async({storeService:e,wsService:t,localStorageService:r,eventLoggerService:n,applicationModulesAccess:o},a,i,s)=>{try{a(_.announcements.sharingSyncStarted());const c=(e,t)=>a(_.announcements.sharingSyncInvalidSyncData(e,t)),d=await(0,E.syncSharing)({storeService:e,wsService:t,localStorageService:r,eventLoggerService:n,applicationModulesAccess:o},i,c,s);return a(_.announcements.sharingSyncFinished()),d}catch(e){throw a(_.announcements.sharingSyncFailed(e)),e}})({storeService:e,wsService:o,localStorageService:n,eventLoggerService:a,applicationModulesAccess:i},s,t,d),c=await(async(e,t,r,n)=>{try{r(_.announcements.teamAdminDataSyncStarted());const o=await(0,O.syncUserGroupManagement)(e,t,n);return r(_.announcements.teamAdminDataSyncFinished()),o}catch(e){throw r(_.announcements.teamAdminDataSyncFailed(e)),e}})(e,o,s,r);return c};if(await u(c.sharing2)===f.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA){const n=Pe(e,r,o),{sharing2:a}=await(0,t.storeSync)(e,{...n,applicationModulesAccess:i,announce:s});await u(a)}return c};t.isSyncInProgress=e=>{const t=e.getState(),r=(0,H.syncIsInProgressSelector)(t),{startTime:n}=(0,H.syncSelector)(t);return!!r&&(Date.now()-(n||0)<6e5?(d.Debugger.log("[Sync] Already in progress, skipping trigger"),!0):(e.dispatch((0,I.syncFailure)()),(0,h.sendExceptionLog)({message:'[Sync] "inProgress" for more than 10 minutes'}),!1))};const Me=async(e,r,n,o)=>{const{applicationModulesAccess:s,eventBusService:c,localStorageService:u,masterPasswordEncryptorService:l,remoteDataEncryptorService:m,storeService:p,wsService:S,eventLoggerService:g}=e,A=p.getState();if(!p.isAuthenticated())throw new Error("Impossible to Sync - user not authenticated");if((0,t.isSyncInProgress)(p))return;Ge=new Promise((e=>Te=e));const y=(0,k.twoFactorAuthenticationInfoSelector)(A);if(y.status===le.TwoFactorAuthenticationInfoRequestStatus.READY){const{shouldEnforceTwoFactorAuthentication:e}=y;if(e)return}const E=new Ae.SyncTaskTracker(s);await E.startTracking();const f=(0,H.isRemoteKeyActivatedSelector)(A)?m:l,C=(0,M.setupProbe)((0,D.makeEventLoggerSyncMonitor)(g).monitor,(0,b.makeDiagnosticReportMonitor)()),v={...Oe(p,f,S,C,o),applicationModulesAccess:s},{syncType:N}=v,T=(0,X.getInstance)(),G=T.lockTopic("healthUpdates");try{C(_.announcements.syncStarted(o,N)),a.triggerSessionSyncStatus({status:"syncing"}),p.dispatch((0,I.syncStarted)());const e=await(0,t.storeSync)(p,v);return await(0,t.treatKeysResult)(f,p,r,S,C,e),await be({storeService:p,dataEncryptorService:f,localStorageService:u,wsService:S,eventLoggerService:g,applicationModulesAccess:s},C,e,o),await f.getInstance().prepareCrypto(),C(_.announcements.saveStarted()),await Fe(u,p),C(_.announcements.saveFinished()),c.syncSuccess({}),p.dispatch((0,I.syncSuccess)(e.isUploadEnabled)),a.triggerSessionSyncStatus({status:"success"}),C(_.announcements.syncFinished()),Te(),T.releaseTopic("healthUpdates",G),e.clearTransactions}catch(t){if(p.dispatch((0,I.syncFailure)()),a.triggerSessionSyncStatus({status:"error"}),C(_.announcements.syncFailed(t)),c.syncFailure({}),G&&T.releaseTopic("healthUpdates",G),Te(),t.message===i.AuthenticationCode[i.AuthenticationCode.INVALID_UKI]){const t="[Sync] Device UKI is invalid, closing the session",r=new Error(t);return(0,d.logError)({message:t,details:{error:r}}),(0,h.sendExceptionLog)({error:r}),void Ce(e,n)}throw t}finally{E.terminateTracking()}};t.treatKeysResult=async(e,r,n,a,i,s)=>{try{const i=async t=>{if(d.Debugger.log("[Sync] Extract Keys from Sync"),!t)return null;d.Debugger.log("[Sync] Decipher  private key BEGIN");const r=await e.getInstance().decrypt(t),n=(0,o.deflatedUtf8ToUtf16)(r,{skipInflate:!0});return d.Debugger.log("[Sync] Decipher  private key SUCCESS"),n};if(s.keys&&s.keys.privateKey)try{const e=await i(s.keys.privateKey);r.dispatch((0,T.updateKeyPair)({privateKey:e,publicKey:s.keys.publicKey}))}catch(e){}if(!r.getUserSession().keyPair){const o=await(0,t.generateRsaKeys)(e,n),i=Pe(r,e,a);i.needsKeys=!0,i.syncType=g.SyncType.FULL_SYNC,i.pushKeysToServer={private:o.encryptedPrivateKey,public:o.keys.publicKey},d.Debugger.log("SYNC RSA Keys - BEGIN"),await De(i),d.Debugger.log("SYNC RSA Keys - END"),r.dispatch((0,T.updateKeyPair)({privateKey:o.keys.privateKey,publicKey:o.keys.publicKey}))}}catch(e){throw i(_.announcements.treatSharingKeysFailed(e)),e}},t.generateRsaKeys=async(e,t,r={})=>{try{const n=await t.asymmetricEncryption.generateRsaKeyPair();d.Debugger.log("Generating RSA Keys");const a=(0,o.utf16ToDeflatedUtf8)(n.privateKey,{skipDeflate:!0}),i=await e.getInstance().encrypt(a,r);return d.Debugger.log("Encrypt RSA Keys"),{keys:{publicKey:n.publicKey,privateKey:n.privateKey},encryptedPrivateKey:i}}catch(e){throw d.Debugger.log("Error while Generating RSA KEY: "+e),e}};const Le=e=>e.persistData===v.PersistData.PERSIST_DATA_NO,we=(e,t)=>{const r=t.getLocalSettings(),n=t.getAccountInfo();return Le(n)||!n.isAuthenticated?Promise.resolve():e.getInstance().storeLocalSettings(r)},ke=async(e,t)=>{const r=t.getPersonalData(),n=t.getAccountInfo();return Le(n)||!n.isAuthenticated?Promise.resolve():e.getInstance().storePersonalData(r)},Ke=async(e,t)=>{const r=t.getPersonalSettings(),n=t.getAccountInfo();return Le(n)||!n.isAuthenticated?Promise.resolve():e.getInstance().storePersonalSettings(r)},ze=(e,t)=>{const r=t.getTeamAdminData(),n=t.getAccountInfo();return Le(n)||!n.isAuthenticated?Promise.resolve():e.getInstance().storeTeamAdminData(r).then((()=>{}))},Fe=async(e,t)=>{const r=(0,V.userABTestsSelector)(t.getState()),n=t.getLocalSettings(),o=t.getPersonalSettings(),a=t.getSharingData(),i=(0,H.sharingSyncSelector)(t.getState()),s=t.getAccountInfo(),c=t.getPersonalFeatures(),d=t.getNotificationStatus(),u=t.getTeamAdminData(),l=t.getState(),m=(0,w.sessionKeysSelector)(l),p=(0,W.darkWebSelector)(l),S=(0,H.analyticsIdsSelector)(l);if(Le(s)||!s.isAuthenticated)return Promise.resolve();isNaN(n.lastSync)&&(0,h.sendExceptionLog)({message:"Persisting localSettings with a NaN lastSyncTimestamp",code:N.ExceptionCriticality.WARNING});const g=u?.teams??{},A=Object.keys(g).reduce(((e,t)=>{const r=u.teams[t],n=r.specialItemGroup?(r.specialItemGroup.items||[]).map((e=>e.itemId)):[];return e.concat(n)}),[]),I={...a,items:a.items.map((e=>!e.content||A.includes(e.itemId)?e:{...e,content:""}))};await Promise.all([ke(e,t),we(e,t),e.getInstance().storePersonalSettings(o),e.getInstance().storeSharingData(I),e.getInstance().storeSharingSync(i),e.getInstance().storePersonalFeatures(c),e.getInstance().storeNotificationsStatus(d),m?e.getInstance().storeAuthenticationKeys(m):Promise.resolve(),e.getInstance().storeTeamAdminData(u),(0,K.persistUserAuthenticationData)(e,t),e.getInstance().storeDarkWeb(p),e.getInstance().storeUserABTests(r),e.getInstance().storeDarkWeb(p),e.getInstance().storeAnalyticsIds(S)])},Ve=async(e,t,r,n)=>{try{const o=t.getState(),a=(0,w.ukiSelector)(o);await(0,S.getFeatures)(t,r,n,a),(0,S.persistFeatures)(e.getInstance(),t.getAccountInfo(),t.getPersonalFeatures()),(0,S.sendFeaturesUpdateEvent)(t)}catch(e){const t=new Error(`[UserSessionService] - refreshFeatures: ${e}`);(0,h.sendExceptionLog)({error:t,code:N.ExceptionCriticality.WARNING})}},He=(e,t)=>{const r=e.getAccountInfo().login,n=(0,w.ukiSelector)(e.getState());return t.contactInfo.getContactInfo({login:r,uki:n}).then((e=>{const{result:t,...r}=e;return r}))}},506623:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupEncryptorServices=void 0;const n=r(416593),o=r(538981),a=(0,r(164910).getNoDerivationCryptoConfig)();t.setupEncryptorServices=function(e){const{storeService:t}=e,r=t.getState(),i=(0,n.sessionEncryptorKeysSelector)(r);!function(e,t,r){const{masterPassword:n,serverKey:o}=t;if(!n)return;const[i,s,c]=r?[n,"",a]:[n,o,void 0];e.masterPasswordEncryptorService.setInstance({raw:i},s,c)}(e,i,(0,o.isSSOUserSelector)(r)),function(e,t){const{masterPassword:r,remoteKey:n,serverKey:o}=t;if(!n&&!r)return;const[i,s,c]=n?[n,"",a]:[r,o,void 0];e.remoteDataEncryptorService.setInstance({raw:i},s,c)}(e,i),function(e,t){const{localKey:r,masterPassword:n,serverKey:o}=t;if(!r&&!n)return;const[i,s,c]=r?[r,"",a]:[n,o,void 0];e.localDataEncryptorService.setInstance({raw:i},s,c)}(e,i)}},283060:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(110203),o=r(718216),a=r(582262),i=r(595551);t.setupSubscriptions=function(e,t){e.appInitialized.on((async e=>{const{sessionService:r,storeService:s}=t;(0,i.isSyncInProgress)(s)&&(s.dispatch((0,a.syncFailure)()),e.initMode===o.InitMode.Resume&&await r.getInstance().user.attemptSync(n.Trigger.Wake))}))}},998260:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncTaskTracker=void 0;const n=r(530263),o=r(758807),a=r(110203);t.SyncTaskTracker=class{constructor(e){this.taskTrackingId=null,this.taskTrackingClient=null,this.applicationModulesAccess=e}async startTracking(){if((0,n.isMv3Environment)()){this.taskTrackingClient=this.applicationModulesAccess.createClients().taskTracking;const e=await this.taskTrackingClient.commands.startTaskTracking({businessDomain:a.BusinessDomain.Sync,feature:"sync",taskName:"sync"});(0,o.isSuccess)(e)&&(this.taskTrackingId=(0,o.getSuccess)(e).id)}}terminateTracking(){const{taskTrackingId:e}=this;(0,n.isMv3Environment)()&&e&&this.taskTrackingClient.commands.terminateTaskTracking({taskTrackingId:e})}}},357903:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.waitUntilSyncComplete=void 0;const n=r(595551);t.waitUntilSyncComplete=async e=>!1===(0,n.isSyncInProgress)(e)||new Promise((t=>{const r=Date.now(),o=setInterval((()=>!1===(0,n.isSyncInProgress)(e)?(clearInterval(o),t(!0)):Date.now()-r>6e4?t(!1):void 0),1e3)}))},301965:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wipeOutLocalAccounts=t.deviceRemoteDeletion=void 0;const n=r(802246),o=r(963739),a=r(656915),i=r(290622),s=r(46298),c=r(670252);async function d(e,t,r){const a=r.map((r=>(0,o.deleteAllLocalUserData)(e,t,r))).concat((0,n.deleteUsersPublicSettings)(r));await Promise.all(a)}t.deviceRemoteDeletion=async function(e,t,r){let n=[];try{const o=await(0,i.getLocalAccounts)(e,t);if(0===o.length)return;const c=o.map((({login:e})=>e));n=await async function(e,t){const r=t.map((t=>({deviceAccessKey:(0,a.getDeviceAccessKeySelector)(e.getState(),t),login:t}))),n=await(0,s.getUnauthorizedProfiles)(e,{profiles:r});return(0,s.isApiError)(n)?[]:n.unauthorizedProfiles.map((e=>e.login))}(e,c),await d(t,r,n)}catch(e){const t=new Error(`[UserManagement]: deviceRemoteDeletion - ${e}`);(0,c.sendExceptionLog)({error:t})}},t.wipeOutLocalAccounts=d},441265:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isInternalTestUser=void 0,t.isInternalTestUser=function(e){const t=e.trim();return t.startsWith("{9a9b9c9d-")||t.startsWith("kw_test_")&&(t.endsWith("@mailinator.com")||t.endsWith("@yopmail.com")||t.endsWith(".kwtest.io"))}},772807:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(954642),o=r(306637),a=r(682258),i=r(112121);t.config={commands:{dismissUserMessages:{handler:a.dismissUserMessagesHandler},addUserMessage:{handler:i.addUserMessageHandler}},queries:{getVisibleUserMessages:{selector:n.getVisibleUserMessagesSelector},getUserMessages:{selector:n.getUserMessagesSelector}},liveQueries:{liveVisibleUserMessages:{operator:o.liveVisibleUserMessages$},liveUserMessages:{operator:o.liveUserMessages$}}}},742331:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserMessageTypes=void 0;var n=r(359213);Object.defineProperty(t,"UserMessageTypes",{enumerable:!0,get:function(){return n.UserMessageTypes}})},765210:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userMessagesDismissed=t.userMessageAdded=t.USER_MESSAGES_DISMISSED=t.USER_MESSAGE_ADDED=void 0,t.USER_MESSAGE_ADDED="USER_MESSAGE_ADDED",t.USER_MESSAGES_DISMISSED="USER_MESSAGES_DISMISSED",t.userMessageAdded=e=>({type:t.USER_MESSAGE_ADDED,userMessage:e}),t.userMessagesDismissed=e=>({type:t.USER_MESSAGES_DISMISSED,predicate:e})},954642:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getVisibleUserMessagesSelector=t.getUserMessagesByTypeSelector=t.getUserMessagesSelector=void 0;const n=r(432034);t.getUserMessagesSelector=e=>e.userSession.localSettings.userMessages,t.getUserMessagesByTypeSelector=(e,t)=>e.userSession.localSettings.userMessages.filter((e=>e.type===t)),t.getVisibleUserMessagesSelector=(0,n.createSelector)(t.getUserMessagesSelector,(e=>e.filter((({dismissedAt:e})=>!e))))},486649:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(772807);t.bootstrap=e=>{e.register(n.config)}},112121:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addUserMessageHandler=void 0;const n=r(765210);t.addUserMessageHandler=(e,t)=>(e.storeService.dispatch((0,n.userMessageAdded)({type:t.type})),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},682258:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dismissUserMessagesHandler=void 0;const n=r(765210);t.dismissUserMessagesHandler=(e,t)=>(e.storeService.dispatch((0,n.userMessagesDismissed)(t)),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},375004:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTrialExpiredUserMessage=t.isTrialExpired=void 0;const n=r(453576),o=r(359213);t.isTrialExpired=function({premiumStatus:e,currentDate:t=Date.now()}){switch(e?.statusCode){case n.PremiumStatusCode.PREMIUM:case n.PremiumStatusCode.OLD_ACCOUNT:case n.PremiumStatusCode.NEW_USER:case n.PremiumStatusCode.GRACE_PERIOD:return!1;case n.PremiumStatusCode.PREMIUM_CANCELLED:{const r=1e3*(e.endDate??0);return!!r&&r-t<0}case n.PremiumStatusCode.NO_PREMIUM:default:return!0}},t.createTrialExpiredUserMessage=function(){return{type:o.UserMessageTypes.TRIAL_EXPIRED}}},953156:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(486649);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},306637:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.liveUserMessages$=t.liveVisibleUserMessages$=void 0;const n=r(518948),o=r(903343),a=r(954642);t.liveVisibleUserMessages$=()=>(0,n.pipe)((0,o.map)(a.getVisibleUserMessagesSelector),(0,o.distinctUntilChanged)()),t.liveUserMessages$=()=>(0,n.pipe)((0,o.map)(a.getUserMessagesSelector),(0,o.distinctUntilChanged)())},359213:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserMessageTypes=void 0,function(e){e.DEFAULT="default",e.TRIAL_EXPIRED="trial_expired",e.WEB_STORE="web_store",e.DASHBOARD_UPRADE="dashboard_upgrade"}(t.UserMessageTypes||(t.UserMessageTypes={}))},235201:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserActivityCreateParams=void 0;const n=r(411662),o=e=>Math.floor(e/1e3);t.getUserActivityCreateParams=({credentials:e,credentialsHealth:t,lastSentAt:r,triggerTime:a,login:i,similarPasswords:s,spaces:c,uki:d})=>{const u=(0,n.getTeamsContent)(c,e,t,s);return{content:"",login:i,relativeEnd:o(a),relativeStart:o(r||a),teamsContent:JSON.stringify(u),uki:d}}},336274:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userActivityLastSentAtSelector=t.userActivitySelector=void 0,t.userActivitySelector=e=>e.userSession.userActivity,t.userActivityLastSentAtSelector=e=>(0,t.userActivitySelector)(e).lastSentAt},765996:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendUserActivityLog=void 0;const n=r(140051),o=r(336274),a=r(285870),i=r(235201),s=r(807944),c=r(751319),d=r(416593),u=r(656915),l=r(670252),m=r(795623),p=r(926766),S=async(e,t,r)=>{const a=(0,n.userActivityLastSentAtUpdated)(r);e.dispatch(a),await(async(e,t)=>{const r=(0,o.userActivitySelector)(e.getState());await t.getInstance().storeUserActivity(r)})(e,t)};t.sendUserActivityLog=async(e,t)=>{const{localStorageService:r,storeService:n}=e,g=n.getState();await S(n,r,t);try{const e=(0,u.ukiSelector)(g);if(!e)throw new Error("[UserActivity] - trigger: uki is empty, cant send log.");const r=(0,s.activeSpacesSelector)(g);if(0===r.length)return;const n=(0,c.credentialsSelector)(g),l=(0,o.userActivityLastSentAtSelector)(g),m=(0,d.userIdSelector)(g),S=(0,p.credentialsHealthSelector)(g),A=(0,p.similarPasswordsSelector)(g),I=(0,i.getUserActivityCreateParams)({credentials:n,credentialsHealth:S,lastSentAt:l,login:m,similarPasswords:A,spaces:r,triggerTime:t,uki:e});(0,a.create)(I)}catch(e){const t=(0,o.userActivityLastSentAtSelector)(g);S(n,r,t);const a=`[UserActivity] - trigger: ${e}`;m.Debugger.error(a);const i=new Error(a);(0,l.sendExceptionLog)({error:i})}}},92184:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(765996),o=r(336274),a=r(698871);t.setupSubscriptions=async function(e,t){e.syncSuccess.on((()=>(0,a.triggerLog)("UserActivity",n.sendUserActivityLog,o.userActivityLastSentAtSelector,t))),e.syncFailure.on((()=>(0,a.triggerLog)("UserActivity",n.sendUserActivityLog,o.userActivityLastSentAtSelector,t)))}},411662:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamsContent=t.getTeamContent=void 0;const n=r(375);t.getTeamContent=(e,t,r,o)=>(0,n.createUserReportContent)(e,t,r,o),t.getTeamsContent=(e,r,n,o)=>e.reduce(((a,i)=>{const{teamId:s}=i,c=r.filter((e=>e.SpaceId===s));return{...a,[s]:(0,t.getTeamContent)(c,n,o,e)}}),{})},755285:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionsReportGenerator=void 0;const n=r(310770),o={collections_count:-1,collections_shared_count:-1,multiple_collections_count:-1,multiple_collections_shared_count:-1,single_collection_count:-1,single_collection_shared_count:-1,shared_count:-1,total_count:-1},a={collections_count:-1,collections_shared_count:-1,multiple_collections_count:-1,multiple_collections_shared_count:-1,single_collection_count:-1,single_collection_shared_count:-1,shared_count:-1,total_count:-1},i={collections_count:-1,collections_shared_count:-1,multiple_collections_count:-1,multiple_collections_shared_count:-1,single_collection_count:-1,single_collection_shared_count:-1,shared_count:-1,total_count:-1},s={collections_count:-1,collections_shared_count:-1,multiple_collections_count:-1,multiple_collections_shared_count:-1,single_collection_count:-1,single_collection_shared_count:-1,shared_count:-1,total_count:-1};t.CollectionsReportGenerator=class{constructor(e){this.getCollectionsPerItemAvg=()=>{if(0===this.collections.length)return 0;const e=this.collections.flatMap((e=>e.VaultItems)),t=new Set(e.map((e=>e.Id))).size;return Math.round(e.length/t)},this.getItemsPerCollectionAvg=()=>{if(0===this.collections.length)return 0;let e=0,t=0;for(const r of this.collections)r.VaultItems.length>0&&(t+=r.VaultItems.length,e++);return Math.round(t/e)},this.countedVaultItemsOccurences=()=>this.collections.map((e=>e.VaultItems)).reduce(((e,t)=>(t.forEach((t=>{const r=t.Id;e[r]?e[r]+=1:e[r]=1})),e)),{}),this.getNumberOfVaultItemWithSingleCollectionAssociated=()=>0===this.collections.length?0:Object.values(this.countedVaultItemsOccurences()).filter((e=>1===e)).length,this.getNumberOfVaultItemWithMultipleCollectionAssociated=()=>0===this.collections.length?0:Object.values(this.countedVaultItemsOccurences()).filter((e=>e>=2)).length,this.passwordsCollectionsReportGenerator=e=>({collections_count:this.collections.length,collections_shared_count:-1,multiple_collections_count:this.getNumberOfVaultItemWithMultipleCollectionAssociated(),multiple_collections_shared_count:-1,single_collection_count:this.getNumberOfVaultItemWithSingleCollectionAssociated(),single_collection_shared_count:-1,shared_count:-1,total_count:e}),this.generateCollectionsReport=e=>({itemsTotalCount:-1,itemsSharedCount:-1,collectionsTotalCount:this.collections.length,collectionsSharedCount:-1,itemsPerCollectionAverageCount:this.getItemsPerCollectionAvg(),collectionsPerItemAverageCount:this.getCollectionsPerItemAvg(),passwords:this.passwordsCollectionsReportGenerator(e),payments:o,secureNotes:a,personalInfo:i,ids:s}),this.coreService=e,this.state=e.storeService.getState(),this.collections=(0,n.collectionsSelector)(this.state)}}},761785:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createVaultReportContent=void 0;const n=r(212641),o=r(375);t.createVaultReportContent=e=>{const{credentials:t,publicBreaches:r,privateBreaches:a,credentialsHealth:i,similarPasswords:s,breachedPasswords:c,requireMasterPassword:d,scope:u}=e,l=(0,o.createUserReportContent)(t,i,s,[]),m=(0,n.getCountOfCredentialsCompromisedByBreaches)(a,c),p=(0,n.getActiveBreachesCount)(a,c),S=(0,n.getActiveBreachesCount)(r,c),g=t.filter((e=>e.OtpSecret||e.OtpUrl)).length,A=d?l.nbrPasswords:t.filter((e=>e.AutoProtected)).length,I=t.filter((e=>!e.AutoLogin)).length;return{...l,activePrivateBreachAlerts:p,privateBreachAlerts:a.length,publicBreachAlerts:r.length,activePublicBreachAlerts:S,passwordsCompromisedThroughPrivateBreaches:m,passwordsWithOtp:g,protectedPasswords:A,domainsWithoutAutofill:I,scope:u}}},477211:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createVaultReport=void 0;const n=r(926766),o=r(751319),a=r(621342),i=r(761785),s=r(807944),c=r(416593),d=r(110203),u=r(510975);t.createVaultReport=async e=>{const t=(0,o.credentialsSelector)(e),r=(0,u.filterCredentialsForScope)(t,d.Scope.Personal),l=(0,u.filterCredentialsForScope)(t,d.Scope.Team),m=(0,n.credentialsHealthSelector)(e),p=(0,n.similarPasswordsSelector)(e),S=(0,n.breachedPasswordsSelector)(e),g=(0,a.publicBreachesSelector)(e),A=(0,a.privateBreachesSelector)(e),I=(0,c.protectPasswordsSettingSelector)(e),y=(0,s.activeSpacesSelector)(e).length>0,E=(0,i.createVaultReportContent)({credentials:t,credentialsHealth:m,similarPasswords:p,breachedPasswords:S,publicBreaches:g,privateBreaches:A,requireMasterPassword:I,scope:d.Scope.Global}),f=(0,i.createVaultReportContent)({credentials:r,credentialsHealth:(0,u.filterRecordsForScope)(r,m,d.Scope.Personal),similarPasswords:(0,u.filterRecordsForScope)(r,p,d.Scope.Personal),breachedPasswords:(0,u.filterRecordsForScope)(r,S,d.Scope.Personal),publicBreaches:g,privateBreaches:A,requireMasterPassword:I,scope:d.Scope.Personal}),C=(0,i.createVaultReportContent)({credentials:l,credentialsHealth:(0,u.filterRecordsForScope)(l,m,d.Scope.Team),similarPasswords:(0,u.filterRecordsForScope)(l,p,d.Scope.Team),breachedPasswords:(0,u.filterRecordsForScope)(l,S,d.Scope.Team),publicBreaches:g,privateBreaches:A,requireMasterPassword:I,scope:d.Scope.Team});return{[d.Scope.Global]:E,[d.Scope.Personal]:f,[d.Scope.Team]:y?C:null}}},510975:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.filterRecordsForScope=t.filterCredentialsForScope=t.includesCredential=void 0;const n=r(110203),o=e=>!!e.SpaceId&&""!==e.SpaceId,a=e=>!e.SpaceId||""===e.SpaceId;t.includesCredential=e=>t=>1===e.filter((e=>t===e.Id)).length,t.filterCredentialsForScope=(e,t)=>t===n.Scope.Global?e:t===n.Scope.Personal?e.filter(a):e.filter(o),t.filterRecordsForScope=(e,t,r)=>r===n.Scope.Global?t:((e,t,r)=>{const n={};return Object.keys(t).filter((o=>{const a=e.filter((e=>e.Id===o));1===a.length&&r(a[0])&&(n[o]=t[o])})),n})(e,t,r===n.Scope.Personal?a:o)},634956:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vaultReportLastSentAtSelector=t.vaultReportSelector=void 0,t.vaultReportSelector=e=>e.userSession.vaultReport,t.vaultReportLastSentAtSelector=e=>(0,t.vaultReportSelector)(e).lastSentAt},296067:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendVaultReportLog=void 0;const n=r(110203),o=r(566102),a=r(755285);t.sendVaultReportLog=async(e,t)=>{const r={...new a.CollectionsReportGenerator(e).generateCollectionsReport(t.nbrPasswords),darkWebAlertsActiveCount:t.activePrivateBreachAlerts,darkWebAlertsCount:t.privateBreachAlerts,domainsWithoutAutofillCount:t.domainsWithoutAutofill,passwordsCompromisedCount:t.compromisedPasswords,passwordsCompromisedThroughDarkWebCount:t.passwordsCompromisedThroughPrivateBreaches,passwordsExcludedCount:t.checkedPasswords,passwordsProtectedWithMasterPasswordCount:t.protectedPasswords,passwordsReusedCount:t.reused,passwordsSafeCount:t.safePasswords,passwordsTotalCount:t.nbrPasswords,passwordsWeakCount:t.weakPasswords,passwordsWithOtpCount:t.passwordsWithOtp,scope:t.scope,securityAlertsActiveCount:t.activePublicBreachAlerts+t.activePrivateBreachAlerts,securityAlertsCount:t.publicBreachAlerts+t.privateBreachAlerts,...null!==t.securityIndex?{securityScore:t.securityIndex}:{}};await(0,o.logEvent)(e,{event:new n.UserVaultReportEvent(r)})}},107500:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendVaultReport=void 0;const n=r(872881),o=r(634956),a=r(670252),i=r(795623),s=r(110203),c=r(477211),d=r(296067),u=async(e,t,r)=>{const a=(0,n.vaultReportLastSentAtUpdated)(r);e.dispatch(a),await(async(e,t)=>{const r=(0,o.vaultReportSelector)(e.getState());await t.getInstance().storeVaultReport(r)})(e,t)};t.sendVaultReport=async(e,t)=>{const{localStorageService:r,storeService:n}=e,l=n.getState(),m=(0,o.vaultReportLastSentAtSelector)(l);try{await u(n,r,t);const o=await(0,c.createVaultReport)(l);(0,d.sendVaultReportLog)(e,o[s.Scope.Global]),(0,d.sendVaultReportLog)(e,o[s.Scope.Personal]),null!==o[s.Scope.Team]&&(0,d.sendVaultReportLog)(e,o[s.Scope.Team])}catch(e){u(n,r,m);const t=`[VaultReport] - trigger: ${e}`;i.Debugger.error(t);const o=new Error(t);(0,a.sendExceptionLog)({error:o})}}},749821:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(698871),o=r(107500),a=r(634956);t.setupSubscriptions=async function(e,t){e.syncSuccess.on((()=>(0,n.triggerLog)("VaultReport",o.sendVaultReport,a.vaultReportLastSentAtSelector,t))),e.syncFailure.on((()=>(0,n.triggerLog)("VaultReport",o.sendVaultReport,a.vaultReportLastSentAtSelector,t)))}},375:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createUserReportContent=void 0;const n=r(254125),o=r(212641),a=r(341494),i=r(756591),s=r(365587),c=r(477201);t.createUserReportContent=(e,t,r,d)=>{const u=e.length,l=(0,n.getCheckedCredentials)(e).length,m=(0,o.getCompromisedCredentials)(e,t,d).length,p=(0,a.getReusedCredentials)(e,r,d).length,S=(0,i.getSafeCredentials)(e,t,r,d).length,g=(0,c.getWeakCredentials)(e,t,d).length;return{checkedPasswords:l,compromisedPasswords:m,nbrPasswords:u,reused:p,safePasswords:S,securityIndex:(0,s.getSecurityScore)(e,t,r,d),weakPasswords:g}}},698871:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerLog=t.shouldTriggerLog=void 0;const n=r(670252),o=r(589438),a=r(412362),i=r(986691),s=r(795623),c=r(757289);t.shouldTriggerLog=(e,t,r)=>{const n=r(t);return!n||e-n>=864e5},t.triggerLog=async(e,r,d,u)=>{const{localStorageService:l,storeService:m}=u,p=Date.now(),S=m.getState();!m.getPersonalFeatures().features.ims_web_ph_mv3_dev&&(0,t.shouldTriggerLog)(p,S,d)&&(await(async(e,t,r)=>{const d=(0,i.getInstance)(),u=r.getInstance();let l=null;try{if(l=d.lockTopic("healthUpdates"),!await u.getHealthWasComputed()){const e=(0,a.getInstance)();await e.removeAll("healthUpdates");const r=t.getState(),n=await(0,c.computeAllHealthState)(r),i=(0,o.healthStateUpdated)(n);t.dispatch(i),await u.storeHealth(n),await u.storeHealthWasComputed(!0)}}catch(t){const r=`[${e}] - trigger: recompute health failed with ${t}`;s.Debugger.error(r);const o=new Error(r);(0,n.sendExceptionLog)({error:o})}finally{l&&d.releaseTopic("healthUpdates",l)}})(e,m,l),await r(u,p))}},321614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createUserSettingsLogContent=void 0;const n=r(656915),o=r(416593);t.createUserSettingsLogContent=e=>{const t=(0,n.webAuthnAuthenticationOptedInSelector)(e),r=(0,n.rememberMeFor14DaysOptedInSelector)(e);return{hasAuthenticationWithWebauthn:t,hasCredentialsProtectWithMasterPassword:(0,o.personalSettingsSelector)(e).SecuredDataShowPassword,hasAuthenticationWithRememberMe:r}}},886903:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendUserSettingsLog=void 0;const n=r(110203),o=r(566102),a=r(321614);t.sendUserSettingsLog=async e=>{const t=(0,a.createUserSettingsLogContent)(e.storeService.getState());await(0,o.logEvent)(e,{event:new n.UserUserSettingsEvent({hasAuthenticationWithWebauthn:t.hasAuthenticationWithWebauthn,hasCredentialsProtectWithMasterPassword:t.hasCredentialsProtectWithMasterPassword,hasAuthenticationWithRememberMe:t.hasAuthenticationWithRememberMe})})}},403149:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupUserSettingsLogSubscriptions=void 0;const n=r(886903);t.setupUserSettingsLogSubscriptions=async function(e,t){e.sessionOpened.on((()=>{(0,n.sendUserSettingsLog)(t)}))}},335587:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.asyncMap=void 0,t.asyncMap=(e,t)=>Promise.all(e.map((e=>t(e))))},630144:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.canonizeText=void 0,t.canonizeText=function(e){if(!e)return"";let t=e.trim();return t.normalize&&(t=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),t=t.toLowerCase().replace(/[\+_\\\/\?\.\-_{}\[\]\(\)\*&!@#\$~`%\^=\|:,;"'<>]/g," "),t.replace(/\s+/g," ")}},278320:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateItemUuid=void 0;const n=r(235992);t.generateItemUuid=function(){return`{${(0,n.v4)().toUpperCase()}}`}},596997:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return Math.ceil(2e9*Math.random())}},500053:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUnixTimestamp=void 0,t.getUnixTimestamp=function(){return Math.round(Date.now()/1e3)}},428445:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checkOrigin=t.removeNonDigitCharacters=t.looksLikeUuid=t.normalizeEmail=t.looksLikeEmail=t.isValidLogin=t.postDataToUrl=t.getClientAgentHeader=void 0;const n=r(366319),o=r(401067),a=r(314656),i=r(786056),s=e=>n.stringify(o.map((e=>Array.isArray(e)?JSON.stringify(e):e),e));function c(e){return`version:${e.appVersion},platform:${e.platformName}}`}t.getClientAgentHeader=c,t.postDataToUrl=async function(e,t,r){const n={headers:{"Client-Agent":c((0,i.getPlatformInfo)()),"Content-Type":"application/x-www-form-urlencoded",...r?.headers??{}},transformRequest:[s],responseType:r?.responseType??"json"};return(0,a.post)(e,t,n)},t.isValidLogin=e=>u(e)||p(e);const d=/^[^\s@]+@([^\s@])+\.([^\s@])+$/i;function u(e){return d.test(e)}t.looksLikeEmail=u;const l=/[<>]/g;t.normalizeEmail=function(e){return e?e.trim().toLowerCase().replace(l,""):""};const m="^{?[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}}?$";function p(e){return new RegExp(m).test(e)}t.looksLikeUuid=p,t.removeNonDigitCharacters=function(e){return"string"==typeof e?e.replace(/\D/g,""):""},t.checkOrigin=e=>{const t=(r=e)?r?.location?.origin:void 0;var r;return!t||!t.endsWith(("LmRhc2hsYW5lLmNvbQ==",atob("LmRhc2hsYW5lLmNvbQ==")))}},954218:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=Function.prototype.toString,n=r.call(Object),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,s="undefined"!=typeof Symbol?Symbol.toStringTag:void 0;t.default=function(e){if(!(e=>"object"==typeof e&&null!==e)(e)||"[object Object]"!==function(e){if(null===e)return void 0===e?"[object Undefined]":"[object Null]";if(!s||!(s in Object(e)))return i.call(e);const t=a.call(e,s),r=e[s];let n=!1;try{e[s]=void 0,n=!0}catch(e){}const o=i.call(e);return n&&(t?e[s]=r:delete e[s]),o}(e))return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;const o=a.call(t,"constructor")&&t.constructor;return"function"==typeof o&&o instanceof o&&r.call(o)===n}},222376:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vpnApiConfig=void 0;const n=r(653041),o=r(697657),a=r(625838),i=r(283419),s=r(608522);t.vpnApiConfig={commands:{activateVpnAccount:{handler:n.activateVpnAccountHandler},clearVpnAccountErrors:{handler:o.clearVpnAccountErrorsHandler},completeVpnAccountActivation:{handler:a.completeVpnAccountActivationHandler}},queries:{getVpnAccount:{selector:s.vpnAccountStatusSelector},getVpnCapabilitySetting:{selector:s.vpnCapabilitySettingSelector}},liveQueries:{liveVpnAccount:{operator:i.vpnAccountStatus$}}}},203790:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VpnDisabledReason=t.VpnAccountActivationErrorType=t.VpnAccountStatusType=void 0,function(e){e.Activated="Activated",e.Activating="Activating",e.Error="Error",e.NotFound="NotFound",e.Ready="Ready"}(t.VpnAccountStatusType||(t.VpnAccountStatusType={})),function(e){e.ServerError="ServerError",e.AccountAlreadyExistError="AccountAlreadyExist"}(t.VpnAccountActivationErrorType||(t.VpnAccountActivationErrorType={})),function(e){e.InTeam="InTeam",e.NotPremium="NotPremium",e.NoPayment="NoPayment",e.Other="Other"}(t.VpnDisabledReason||(t.VpnDisabledReason={}))},194922:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.openDashlaneVpnAPI=void 0;const n=r(46298),o=r(529301);t.openDashlaneVpnAPI=e=>({generateCredential:async(t,r)=>{const a=await(0,n.generateCredential)(e,t,{email:r});return(0,n.isApiError)(a)?{success:!1,error:a.code===n.GetVpnCredentialBusinessErrors.USER_ALREADY_HAS_AN_ACCOUNT_FOR_PROVIDER?o.VpnErrorType.AccountAlreadyExistError:o.VpnErrorType.ServerError}:{success:!0,password:a.password}}})},529301:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VpnErrorType=void 0,function(e){e.AccountAlreadyExistError="AccountAlreadyExist",e.ServerError="ServerError"}(t.VpnErrorType||(t.VpnErrorType={}))},302749:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeVpnLogger=void 0;const n=r(110203),o=r(566102),a=r(529301),i={[a.VpnErrorType.AccountAlreadyExistError]:n.ActivateVpnError.EmailAlreadyInUse,[a.VpnErrorType.ServerError]:n.ActivateVpnError.ServerError};t.makeVpnLogger=e=>({logComplete:async()=>{await(0,o.logEvent)(e,{event:new n.UserActivateVpnEvent({flowStep:n.FlowStep.Complete})})},logError:async t=>{await(0,o.logEvent)(e,{event:new n.UserActivateVpnEvent({flowStep:n.FlowStep.Error,errorName:i[t]})})},logStart:async()=>{await(0,o.logEvent)(e,{event:new n.UserActivateVpnEvent({flowStep:n.FlowStep.Start})})}})},842238:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vpnAccountNotFoundAction=t.vpnAccountActivationCompleteAction=t.vpnAccountGenerationErrorAction=t.vpnAccountGenerationDoneAction=t.vpnAccountActivatingAction=t.VPN_ACCOUNT_NOT_FOUND=t.VPN_ACCOUNT_GENERATION_ERROR=t.VPN_ACCOUNT_ACTIVATION_COMPLETE=t.VPN_ACCOUNT_GENERATION_DONE=t.VPN_ACCOUNT_ACTIVATING=void 0,t.VPN_ACCOUNT_ACTIVATING="VPN_ACCOUNT_ACTIVATING",t.VPN_ACCOUNT_GENERATION_DONE="VPN_ACCOUNT_GENERATION_DONE",t.VPN_ACCOUNT_ACTIVATION_COMPLETE="VPN_ACCOUNT_ACTIVATION_COMPLETE",t.VPN_ACCOUNT_GENERATION_ERROR="VPN_ACCOUNT_GENERATION_ERROR",t.VPN_ACCOUNT_NOT_FOUND="VPN_ACCOUNT_NOT_FOUND",t.vpnAccountActivatingAction=()=>({type:t.VPN_ACCOUNT_ACTIVATING}),t.vpnAccountGenerationDoneAction=()=>({type:t.VPN_ACCOUNT_GENERATION_DONE}),t.vpnAccountGenerationErrorAction=e=>({type:t.VPN_ACCOUNT_GENERATION_ERROR,error:e}),t.vpnAccountActivationCompleteAction=()=>({type:t.VPN_ACCOUNT_ACTIVATION_COMPLETE}),t.vpnAccountNotFoundAction=()=>({type:t.VPN_ACCOUNT_NOT_FOUND})},916667:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vpnApiBootstrap=void 0;const n=r(222376);t.vpnApiBootstrap=e=>{e.register(n.vpnApiConfig)}},290731:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VPN_CREDENTIAL_NAME=t.VPN_CREDENTIAL_URL=t.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN=t.VPN_HOTSPOTSHIELD_DOMAIN=void 0,t.VPN_HOTSPOTSHIELD_DOMAIN="hotspotshield.com",t.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN="dashlane",t.VPN_CREDENTIAL_URL=`https://${t.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN}.${t.VPN_HOTSPOTSHIELD_DOMAIN}`,t.VPN_CREDENTIAL_NAME="VPN Hotspot Shield"},653041:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.activateVpnAccountHandler=void 0;const n=r(302749),o=r(194922),a=r(817842);t.activateVpnAccountHandler=async(e,t)=>{const r=(0,a.CreateVpnService)({generator:(0,o.openDashlaneVpnAPI)(e.storeService),logger:(0,n.makeVpnLogger)(e)},e);await r.generateCredential(t.email)}},697657:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearVpnAccountErrorsHandler=void 0;const n=r(842238);t.clearVpnAccountErrorsHandler=e=>(e.storeService.dispatch((0,n.vpnAccountNotFoundAction)()),Promise.resolve())},625838:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeVpnAccountActivationHandler=void 0;const n=r(842238);t.completeVpnAccountActivationHandler=e=>(e.storeService.dispatch((0,n.vpnAccountActivationCompleteAction)()),Promise.resolve())},507995:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vpnCredentialMatcher=void 0;const n=r(617509),o=r(292210),a=r(290731);t.vpnCredentialMatcher=(e,t)=>{if(t){const t=new o.ParsedURL(e.Url);return e.Password&&e.Email&&t&&t.getRootDomain()===a.VPN_HOTSPOTSHIELD_DOMAIN&&t.getSubdomain()===a.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN}const r=(0,n.getParsedUrl)(e.Url);return e.Password&&e.Email&&r&&r.rootDomain===a.VPN_HOTSPOTSHIELD_DOMAIN&&r.subDomainName===a.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN}},283419:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vpnAccountStatus$=void 0;const n=r(518948),o=r(903343),a=r(608522);t.vpnAccountStatus$=function(){const e=a.vpnAccountStatusSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())}},524827:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VPNReducers=void 0;const n=r(842238),o=r(203790);t.VPNReducers=(e,t)=>{switch(t.type){case n.VPN_ACCOUNT_ACTIVATING:return{accountStatus:{status:o.VpnAccountStatusType.Activating}};case n.VPN_ACCOUNT_GENERATION_DONE:return{accountStatus:{status:o.VpnAccountStatusType.Ready}};case n.VPN_ACCOUNT_GENERATION_ERROR:return{accountStatus:{status:o.VpnAccountStatusType.Error,error:t.error}};case n.VPN_ACCOUNT_ACTIVATION_COMPLETE:return{accountStatus:{status:o.VpnAccountStatusType.Activated}};case n.VPN_ACCOUNT_NOT_FOUND:return{accountStatus:{status:o.VpnAccountStatusType.NotFound}};default:return e??{accountStatus:{status:o.VpnAccountStatusType.NotFound}}}}},608522:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vpnCapabilitySettingSelector=t.getVpnCapabilitySetting=t.vpnAccountStatusSelector=t.vpnCredentialSelector=void 0;const n=r(751319),o=r(432034),a=r(416593),i=r(551504),s=r(203790),c=r(507995),d=(e,t)=>(t.CreationDatetime??0)-(e.CreationDatetime??0);var u;t.vpnCredentialSelector=e=>{const t=(0,n.credentialsSelector)(e),r=e.userSession.personalFeatures.features[i.NEW_URL_PARSER_FF]||e.userSession.personalFeatures.features[i.NEW_URL_PARSER_FF_PROD];return t.filter((e=>(0,c.vpnCredentialMatcher)(e,r))).sort(d)[0]??null},t.vpnAccountStatusSelector=(0,o.createSelector)((e=>{const{vpnData:t}=e.userSession;return t||{accountStatus:{status:s.VpnAccountStatusType.NotFound}}}),t.vpnCredentialSelector,((e,t)=>{switch(e.accountStatus.status){case s.VpnAccountStatusType.Error:return{status:s.VpnAccountStatusType.Error,error:e.accountStatus.error};case s.VpnAccountStatusType.Activating:return{status:s.VpnAccountStatusType.Activating};case s.VpnAccountStatusType.Activated:case s.VpnAccountStatusType.NotFound:return t?{status:s.VpnAccountStatusType.Activated,email:t.Email,password:t.Password,credentialId:t.Id}:{status:s.VpnAccountStatusType.NotFound};case s.VpnAccountStatusType.Ready:return t?{status:s.VpnAccountStatusType.Ready,email:t.Email,password:t.Password,credentialId:t.Id}:{status:s.VpnAccountStatusType.NotFound}}})),function(e){e.IN_TEAM="in_team",e.NOT_PREMIUM="not_premium",e.NO_PAYMENT="no_payment"}(u||(u={}));const l={in_team:s.VpnDisabledReason.InTeam,not_premium:s.VpnDisabledReason.NotPremium,no_payment:s.VpnDisabledReason.NoPayment};t.getVpnCapabilitySetting=e=>{const t=e?.capabilities?.secureWiFi;return t.enabled?{hasVpnEnabled:!0}:{hasVpnEnabled:!1,vpnDisabledReason:l[t.info.reason]||s.VpnDisabledReason.Other}},t.vpnCapabilitySettingSelector=(0,o.createSelector)(a.premiumStatusSelector,t.getVpnCapabilitySetting)},817842:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateVpnService=void 0;const n=r(188544),o=r(238250),a=r(709763),i=r(688779),s=r(392263),c=r(795623),d=r(670252),u=r(416593),l=r(842238),m=r(290731),p=r(529301),S=r(608522),g=({update:{title:e}})=>({Title:e}),A=({title:e})=>({Title:e});t.CreateVpnService=(e,t)=>{const r=async r=>{t.storeService.dispatch((0,l.vpnAccountGenerationErrorAction)(r===p.VpnErrorType.AccountAlreadyExistError?o.VpnAccountActivationErrorType.AccountAlreadyExistError:o.VpnAccountActivationErrorType.ServerError)),await e.logger.logError(r??p.VpnErrorType.ServerError)};return{generateCredential:async o=>{await e.logger.logStart(),t.storeService.dispatch((0,l.vpnAccountActivatingAction)());try{const s=(0,n.contactInfoSelector)(t.storeService.getState()),c=(0,u.userLoginSelector)(t.storeService.getState()),d=o??s.email??c,p=await e.generator.generateCredential(c,d);switch(p.success){case!0:await(async(e,r,n)=>{const o=(0,S.vpnCredentialSelector)(t.storeService.getState()),s={email:e,password:r,url:m.VPN_CREDENTIAL_URL,login:n,title:m.VPN_CREDENTIAL_NAME};if(o){const e={id:o.Id,update:{...s}};await(0,i.updateCredential)({storeService:t.storeService,sessionService:t.sessionService,eventLoggerService:t.eventLoggerService,applicationModulesAccess:t.applicationModulesAccess},e,g)}else await(0,a.createCredential)({storeService:t.storeService,sessionService:t.sessionService,eventLoggerService:t.eventLoggerService,applicationModulesAccess:t.applicationModulesAccess},s,A)})(d,p.password,c),t.storeService.dispatch((0,l.vpnAccountGenerationDoneAction)()),await e.logger.logComplete();break;case!1:r(p.error)}}catch(e){r();const t="VPN",n=s.CarbonError.fromAnyError(e).addContextInfo(t,"saveCredential");(0,c.logError)({tag:[t],message:`${n}`,details:{error:e}}),(0,d.sendExceptionLog)({error:n})}}}}},771012:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.minAcceptablePasswordStrength=void 0,t.minAcceptablePasswordStrength=2},846866:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mockCarbon=void 0;const n=r(453576),o=r(518948),a=r(145619),i=r(846937),s={userSession:{account:{login:"user",personalFeatures:{features:{superFeature:!0,badFeature:!1}}}}},c=()=>{};t.mockCarbon=({mockMethod:e=jest.fn(),stateFn:t=(e=>e),mockEvents:r})=>{const d=new i.CarbonLegacyInfrastructure;return d.ready({apiEvents:{mockMethod:e},leelooEventsCommands:Object.keys(n.CarbonLeelooConnector).reduce(((e,t)=>(e[t]=jest.fn(),e)),{}),leelooEvents:{...a.LEGACY_LEELOO_EVENTS_TO_SUBSCRIBE.reduce(((e,t)=>({...e,[t]:{on:jest.fn((()=>c))}})),{}),...r},state$:new o.BehaviorSubject(t(s))}),d}},761657:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonEventEmitter=void 0;const o=r(27606);let a=class extends o.ContextlessBaseEventEmitter{};a=n([(0,o.Injectable)()],a),t.CarbonEventEmitter=a},518955:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LEGACY_LEELOO_SLOTS_TO_IGNORE=void 0;const n=r(453576),o=r(758807),a=r(145619),i=r(846937);t.LEGACY_LEELOO_SLOTS_TO_IGNORE=(0,o.safeCast)(i.LEGACY_LEELOO_SLOTS_ALL.filter((e=>!a.LEGACY_LEELOO_EVENTS_TO_SUBSCRIBE.includes(e)&&!(0,o.safeCast)(n.LEGACY_CARBON_LEELOO_USED_COMMANDS).includes(e))))},145619:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.relayLeelooLegacyEvents=t.LEGACY_LEELOO_EVENTS_TO_SUBSCRIBE=void 0,t.LEGACY_LEELOO_EVENTS_TO_SUBSCRIBE=["loginStatusChanged","openSessionTokenSent","openSessionAskMasterPassword","openSessionDashlaneAuthenticator","openSessionOTPSent","openSessionOTPForNewDeviceRequired","openSessionFailed","openSessionSsoRedirectionToIdpRequired"],t.relayLeelooLegacyEvents=function(e,r){const n=t.LEGACY_LEELOO_EVENTS_TO_SUBSCRIBE.map((t=>e[t].on((async e=>{await r.sendEvent("carbonLegacy",{eventData:e,eventName:t})}))));return()=>{n.forEach((e=>{e()}))}}},846937:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LEGACY_LEELOO_SLOTS_ALL=t.CarbonLegacyInfrastructure=void 0;const n=r(518948),o=r(453576);t.CarbonLegacyInfrastructure=class{constructor(){this.carbon$=new n.ReplaySubject(1),this.carbonState$=this.carbon$.pipe((0,n.switchMap)((e=>e.state$)))}ready(e){this.carbon$.next(e)}getCarbon(){return(0,n.firstValueFrom)(this.carbon$)}},t.LEGACY_LEELOO_SLOTS_ALL=Object.keys(o.CarbonLeelooConnector)},287026:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonLegacyBootstrap=void 0;const a=r(27606),i=r(468224),s=r(758807),c=r(518948),d=r(761657),u=r(145619),l=r(846937),m=r(996160);let p=class{constructor(e,t,r,n){this.infra=t,this.lifeCycle=r,this.eventEmitter=n;const{setActiveUser:o}=e.getClient(i.requestContextApi).commands;this.setActiveUser=o}onFrameworkInit(){this.lifeCycle.addExternalComponentReadyCondition((async()=>await this.infra.getCarbon())),this.lifeCycle.addAppReadyHook((async()=>{const e=this.infra.carbonState$.pipe((0,c.map)((e=>({account:(0,m.getCarbonLegacyStateSelector)(e,"userSession.account"),personalFeatures:(0,m.getCarbonLegacyStateSelector)(e,"userSession.personalFeatures")}))),(0,c.map)((e=>{var t;if((t=e)&&"object"==typeof t&&(0,s.hasProperty)(t,"account")&&t.account&&"object"==typeof t.account&&(0,s.hasProperty)(t.account,"login")&&t.account.login&&"string"==typeof t.account.login&&(0,s.hasProperty)(t.account,"isAuthenticated")&&t.account.isAuthenticated&&(0,s.hasProperty)(t,"personalFeatures")&&t.personalFeatures&&"object"==typeof t.personalFeatures&&(0,s.hasProperty)(t.personalFeatures,"features"))return e.account.login})),(0,c.distinctUntilChanged)(),(0,c.switchMap)((async e=>{await this.setActiveUser({userName:e})}))).subscribe(),t=await this.infra.getCarbon(),r=(0,u.relayLeelooLegacyEvents)(t.leelooEvents,this.eventEmitter);return()=>{e.unsubscribe(),r()}}))}};p=n([(0,a.FrameworkInit)(),o("design:paramtypes",[a.CqrsClient,l.CarbonLegacyInfrastructure,a.AppLifeCycle,d.CarbonEventEmitter])],p),t.CarbonLegacyBootstrap=p},649112:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonLegacyModule=void 0;const o=r(453576),a=r(27606),i=r(592910),s=r(976559),c=r(761657),d=r(846937),u=r(287026),l=r(785642),m=r(650582),p=r(52948);let S=class{};S=n([(0,a.Module)({api:o.carbonLegacyApi,handlers:{commands:{carbon:i.CarbonCommandHandler,carbonLegacyLeeloo:s.CarbonLegacyLeelooCommandHandler,mitigationDeleteGrapheneUserData:p.DeleteGrapheneUserDataCommandHandler},events:{},queries:{carbonState:l.CarbonGetStateQueryHandler,carbonStateList:m.CarbonStateListQueryHandler}},configurations:{infrastructure:{token:d.CarbonLegacyInfrastructure}},onFrameworkInit:u.CarbonLegacyBootstrap,providers:[c.CarbonEventEmitter],requiredFeatureFlips:["darkwebMonitoringWebRelease","platform_web_new_url_parser_dev","platform_web_new_url_parser","breachesFetchWeb","ims_web_ph_mv3_dev","ptu_web_MPprotect_phase3","web_extension_credentialsDedupView","itadmin_SAEX_CryptoMigration_Phase1","itadmin_SAEX_CryptoMigration_Phase2","web_extension_credentialsDedupView","autofill_web_linkedWebsites_dev","autofill_web_linkedWebsites","vault_web_collection_labelling_dev","masterPasswordLeakCheckLog","SAEXAccountRecoveryv3"]})],S),t.CarbonLegacyModule=S},996160:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCarbonLegacyStateSelector=void 0,t.getCarbonLegacyStateSelector=(e,t)=>t?t.split(".").reduce(((e,t)=>{return"object"==typeof(r=e)&&r&&t in r?e[t]:e;var r}),e):e},592910:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonCommandHandler=void 0;const a=r(453576),i=r(27606),s=r(758807),c=r(846937),d=r(761657);let u=class{constructor(e,t,r){this.infra=e,this.eventsEmitter=t,this.context=r}async execute({body:{args:e,name:t,fireEvent:r}}){const n=(await this.infra.getCarbon()).apiEvents[t],o=await n(...e),a=(e=>(e=>!(!e||"object"!=typeof e)&&(0,s.hasProperty)(e,"success")&&!1===e.success)(e)?(0,s.failure)({tag:"",error:e.error}):(0,s.success)({id:"",carbonResult:e}))(o);return r&&await this.eventsEmitter.sendEvent("carbonCommandResult",{result:o},this.context),a}};u=n([(0,i.CommandHandler)(a.CarbonCommand),o("design:paramtypes",[c.CarbonLegacyInfrastructure,d.CarbonEventEmitter,i.RequestContext])],u),t.CarbonCommandHandler=u},976559:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonLegacyLeelooCommandHandler=void 0;const a=r(453576),i=r(27606),s=r(758807),c=r(846937),d=r(761657);let u=class{constructor(e,t){this.infra=e,this.eventsEmitter=t}async execute({body:{arg:e,name:t,fireEvent:r}}){const n=(await this.infra.getCarbon()).leelooEventsCommands[t],o=await n(...e);return r?(await this.eventsEmitter.sendEvent("carbonCommandResult",{result:o}),(0,s.success)({id:"",carbonResult:o})):(0,s.success)({id:"",carbonResult:o})}};u=n([(0,i.CommandHandler)(a.CarbonLegacyLeelooCommand),o("design:paramtypes",[c.CarbonLegacyInfrastructure,d.CarbonEventEmitter])],u),t.CarbonLegacyLeelooCommandHandler=u},785642:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonGetStateQueryHandler=void 0;const a=r(453576),i=r(27606),s=r(758807),c=r(518948),d=r(846937),u=r(996160);let l=class{constructor(e){this.infrastructure=e}execute({body:{path:e}}){const{carbonState$:t}=this.infrastructure;return t.pipe((0,c.map)((t=>(0,u.getCarbonLegacyStateSelector)(t,e))),(0,c.distinctUntilChanged)(),(0,c.map)((e=>(0,s.success)(e))))}};l=n([(0,i.QueryHandler)(a.CarbonStateQuery),o("design:paramtypes",[d.CarbonLegacyInfrastructure])],l),t.CarbonGetStateQueryHandler=l},650582:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonStateListQueryHandler=void 0;const a=r(453576),i=r(27606),s=r(758807),c=r(518948),d=r(846937),u=r(996160);let l=class{constructor(e){this.infrastructure=e}execute({body:{paths:e}}){const{carbonState$:t}=this.infrastructure;return t.pipe((0,c.map)((t=>(0,s.success)(e.map((e=>(0,u.getCarbonLegacyStateSelector)(t,e)))))))}};l=n([(0,i.QueryHandler)(a.CarbonStateListQuery),o("design:paramtypes",[d.CarbonLegacyInfrastructure])],l),t.CarbonStateListQueryHandler=l},52948:function(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteGrapheneUserDataCommandHandler=void 0;const a=r(453576),i=r(27606),s=r(758807);let c=class{constructor(e){this.infra=e}async execute({body:{login:e}}){const t=await this.infra.getAllKeys(),r=`.${e}`,n=t.filter((e=>e.endsWith(r))).map((async e=>await this.infra.remove(e)));return await Promise.allSettled(n),(0,s.success)(null)}};c=n([(0,i.CommandHandler)(a.MitigationDeleteGrapheneUserDataCommand),o("design:paramtypes",[i.KeyValueStorageInfrastructure])],c),t.DeleteGrapheneUserDataCommandHandler=c},871439:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LEGACY_LEELOO_SLOTS_TO_IGNORE=t.Mocks=t.CarbonLegacyInfrastructure=t.CarbonLegacyModule=void 0;var n=r(649112);Object.defineProperty(t,"CarbonLegacyModule",{enumerable:!0,get:function(){return n.CarbonLegacyModule}});var o=r(846937);Object.defineProperty(t,"CarbonLegacyInfrastructure",{enumerable:!0,get:function(){return o.CarbonLegacyInfrastructure}}),t.Mocks=r(846866);var a=r(518955);Object.defineProperty(t,"LEGACY_LEELOO_SLOTS_TO_IGNORE",{enumerable:!0,get:function(){return a.LEGACY_LEELOO_SLOTS_TO_IGNORE}})},348749:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setConfig=t.config=t.DashlaneAPISchemesNames=void 0;const n=r(604407);var o;!function(e){e.DASHLANE_API_HOST_WITH_SCHEME="DASHLANE_API_HOST_WITH_SCHEME",e.DASHLANE_WS_HOST_WITH_SCHEME="DASHLANE_WS_HOST_WITH_SCHEME"}(o=t.DashlaneAPISchemesNames||(t.DashlaneAPISchemesNames={}));const a={LOG_LEVEL:n.Silent,LOG_TAGS:[],DASHLANE_API_HOST_WITH_SCHEME:"https://api.dashlane.com",DASHLANE_WS_HOST_WITH_SCHEME:"https://ws1.dashlane.com",DASHLANE_STYX_HOST_WITH_SCHEME:"https://styx.data.dashlane.com",CODE_NAME:null,MANIFEST_VERSION:null};t.config=a;const i=e=>(Object.values(o).forEach((t=>{t in e&&!e[t]&&(e[t]=a[t])})),e);t.setConfig=e=>{t.config={...t.config,...i(e)}}},592912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createAccount=t.getCreateAccountRequest=t.defaultCreateAccountRequestParams=t.AUTOMATION_MP_GRACE_PERIOD=t.DEFAULT_E2E_ACCOUNT_PASSWORD=void 0;const n=r(278320),o=r(178955),a=r(556292);function i(e,r,n){return{login:e,anonymousUserId:n,password:r,...t.defaultCreateAccountRequestParams}}t.DEFAULT_E2E_ACCOUNT_PASSWORD="Azerty12",t.AUTOMATION_MP_GRACE_PERIOD=5e3,t.defaultCreateAccountRequestParams={format:"US",language:"en",subscribe:!1,deviceName:"INTEGRATION_TEST"},t.getCreateAccountRequest=i,t.createAccount=async function(e,r,s){const c=r??{},d={...i((0,o.getLogin)(),t.DEFAULT_E2E_ACCOUNT_PASSWORD,(0,n.generateItemUuid)()),...c},u={createAccountResult:await e.createAccountStep1(d),options:{flowIndicator:"webAccount"},isStandAlone:!0,...s??{}},l=await e.createAccountStep2(u);return await(0,a.sync)(e),l}},178955:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLogin=t.defaultTestAccountOptions=void 0;const n=r(235992),o=r(655995);t.defaultTestAccountOptions={abTests:{},automationAccount:!1,featureFlips:[],throttling:o.TestAccountThrottlingBehaviour.Unthrottled,type:o.TestAccountType.FreePremiumTrial},t.getLogin=function(e=t.defaultTestAccountOptions){const{abTests:r=t.defaultTestAccountOptions.abTests,featureFlips:a=t.defaultTestAccountOptions.featureFlips,throttling:i=t.defaultTestAccountOptions.throttling,type:s=t.defaultTestAccountOptions.type,automationAccount:c=t.defaultTestAccountOptions.automationAccount}=e,d=(0,n.v4)(),u=d.substr(0,d.indexOf("-")),l=function(e){switch(e){case o.TestAccountThrottlingBehaviour.Unthrottled:return"ut_";case o.TestAccountThrottlingBehaviour.Normal:default:return""}}(i),m=function(e){switch(e){case o.TestAccountType.Free:return"freefree_";case o.TestAccountType.PremiumPaid:return"premiumpaid_";case o.TestAccountType.Family:return"family_";case o.TestAccountType.FreePremiumTrial:default:return""}}(s),p=!1===(S=r)?"noabtest_":Object.keys(S).reduce(((e,t)=>{const r=`${t}_${S[t]}_`;return e.concat(r)}),"");var S;const g=function(e){return e.reduce(((e,t)=>{const r=`${t}_`;return e.concat(r)}),"")}(a);return("kw_test_"+function(e){return e?"auto_":""}(c)+l+m+"carbon_e2e_"+p+g+u+"@mailinator.com").toLocaleLowerCase()}},655995:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TestAccountThrottlingBehaviour=t.TestAccountType=void 0,function(e){e[e.Free=0]="Free",e[e.FreePremiumTrial=1]="FreePremiumTrial",e[e.Legacy=2]="Legacy",e[e.PremiumPaid=3]="PremiumPaid",e[e.PremiumPlus=4]="PremiumPlus",e[e.Family=5]="Family"}(t.TestAccountType||(t.TestAccountType={})),function(e){e[e.Normal=0]="Normal",e[e.Unthrottled=1]="Unthrottled"}(t.TestAccountThrottlingBehaviour||(t.TestAccountThrottlingBehaviour={}))},370420:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(592912),t),o(r(178955),t),o(r(655995),t)},66916:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSubscriptionTokenForTestUser=void 0;const n=r(46298),o=r(172911);t.getSubscriptionTokenForTestUser=async(e,t)=>{const{storeService:r}=e,a=await(0,o.getSubscriptionTokens)(r);if((0,n.isApiError)(a))throw new Error(`Error: ${a.code}`);const{tokens:i}=a,s=i.find((e=>e.email===t));if(!s)throw new Error("Email token not found for "+t);return s.token}},576506:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e=2e3){return new Promise((t=>setTimeout(t,e)))}},871602:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getServiceProviderToken=void 0;const n=r(643739),o=r(46298),a=r(297343),i=r(25576);t.getServiceProviderToken=async(e,t)=>{const{storeService:r}=e;!function(e,t){e.dispatch((0,n.deviceRegistered)((0,n.makeDeviceRegistrationKeys)(t.deviceAccessKey,t.deviceSecretKey),i.PersistData.PERSIST_DATA_YES,t.login))}(r,t);const{login:s,teamUuid:c}=t,d=`${c}%${t.userServiceProviderKey}`,u=await(0,a.getUserSSOInfo)(r,{login:s,teamUuid:c,userServiceProviderKey:d});if((0,o.isApiError)(u))throw new Error(`Error: ${u.code}`);return u}},732006:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forceBreachRefreshHandler=void 0;const n=r(495303);t.forceBreachRefreshHandler=async({storeService:e,wsService:t})=>{const r=(0,n.getInstance)(e,t);await r.refresh({forceRefresh:!0})}},79734:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createPublicBreachHelper=t.addPrivateBreachHelper=t.createOrUpdateDarkWebBreachHelper=t.saveBankAccount=t.updateCredential=t.removeCredential=t.getNotes=t.getCredentials=t.saveCredential=void 0;const n=r(235992),o=r(453576),a=r(46298),i=r(377074),s=r(631197),c=r(472579),d=r(576506),u=r(370420);async function l(e,t,r={}){const n=function({title:e,email:t,password:r,url:n,...a}){return{kwType:"KWAuthentifiant",origin:o.SaveOrigin.MANUAL,content:{category:"",email:t,login:t,onlyForThisSubdomain:!1,password:r,protectWithMasterPassword:!1,secondaryLogin:"",url:n??"",title:e,autoLogin:!1,note:"",spaceId:"",linkedWebsites:{addedByDashlane:[],addedByUser:[]},...a}}}({title:"title",email:"email@domain.com",password:u.DEFAULT_E2E_ACCOUNT_PASSWORD,...r}),a=t??n;await e.savePersonalDataItem(a),await(0,d.default)(100)}t.saveCredential=l,t.getCredentials=async function(e){return(await e.getDataModel(null)).credentials},t.getNotes=async function(e){return(await e.getDataModel(null)).notes},t.removeCredential=async function(e,t){return await e.removePersonalDataItem({id:t})},t.updateCredential=function(e,{Id:t,Title:r,Email:n,Url:o,Password:a},i){return l(e,void 0,{id:t,title:r,email:n,password:a,url:o,...i})},t.saveBankAccount=async function(e,t,r={}){const n={kwType:"KWBankStatement",origin:o.SaveOrigin.MANUAL,content:{name:"name",owner:"owner",IBAN:"",BIC:"",bank:"",...r,...t}},a=t??n;await e.savePersonalDataItem(a),await(0,d.default)(100)},t.createOrUpdateDarkWebBreachHelper=async({storeService:e},t)=>{t.databreach.uuid||(t.databreach.uuid=(0,n.v4)());const r=await(0,i.createOrUpdateDarkWebBreach)(e,t);if((0,a.isApiError)(r))throw new Error(`Error when creating / updating test data breach: ${r.message}`);return t.databreach.uuid},t.addPrivateBreachHelper=async({storeService:e},t)=>await(0,s.addPrivateBreach)(e,t),t.createPublicBreachHelper=async({storeService:e},t)=>{const r=await(0,c.createPublicBreach)(e,t);if((0,a.isApiError)(r))throw new Error(`Error when creating test breach: ${r.code}, ${r.message}`);return r}},556292:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sync=t.waitForSync=void 0;const n=r(576506),o=3e4;function a(e,t={timeout:o}){let r,n;const a=setTimeout((()=>{n(new Error("Sync timed out"))}),t.timeout),i=new Promise(((e,t)=>{r=e,n=t})),s=e.sessionSyncStatus.on((({status:e})=>{"syncing"!==e&&(clearTimeout(a),s(),"success"===e?r():"error"===e&&n(new Error("Sync failed")))}));return i}t.waitForSync=a,t.sync=async function(e){await e.sessionForceSync({}),await a(e),await(0,n.default)()}},825601:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.DashlaneAPISchemesNames=t.HttpErrorCode=t.init=t.ApplicationBuildType=t.CarbonStorage=t.apiEvents=t.decipherDatabaseRules=t.interfaces=void 0,t.interfaces=r(92231);var a=r(205851);Object.defineProperty(t,"decipherDatabaseRules",{enumerable:!0,get:function(){return a.decipherDatabaseRules}});var i=r(250643);Object.defineProperty(t,"apiEvents",{enumerable:!0,get:function(){return i.apiEvents}}),o(r(804673),t);var s=r(118539);Object.defineProperty(t,"CarbonStorage",{enumerable:!0,get:function(){return s.CarbonLocalStorage}});var c=r(859600);Object.defineProperty(t,"ApplicationBuildType",{enumerable:!0,get:function(){return c.ApplicationBuildType}});var d=r(309265);Object.defineProperty(t,"init",{enumerable:!0,get:function(){return d.init}});var u=r(314656);Object.defineProperty(t,"HttpErrorCode",{enumerable:!0,get:function(){return u.HttpErrorCode}});var l=r(348749);Object.defineProperty(t,"DashlaneAPISchemesNames",{enumerable:!0,get:function(){return l.DashlaneAPISchemesNames}}),o(r(871439),t)},309265:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;const n=r(348749),o=r(795623),a=r(17338),i=r(974318);t.init=async function(e){e.config&&(0,n.setConfig)(e.config);const t=await(0,i.initCarbon)(e),r=(0,a.getCoreServices)(t);return(0,o.logInfo)({message:"init carbon done"}),r}},895343:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_USER_CAPABILITIES=t.makePremiumStatusTrial=t.makePremiumStatusWithPreviousPlan=t.makePremiumStatusWithFamilyMembership=t.makePremiumStatusWithBillingInfo=t.makePremiumStatusWithSpaces=t.makePremiumStatusBillingInfo=t.makeSpace=t.makeSpaceData=t.makePremiumStatusSpace=void 0;const n=r(453576);function o(e){return{associatedEmail:"kw_test_a13e5r4er357er@mailinator.com",billingAdmins:[{login:"kw_test_a13e5r4er357er@mailinator.com"}],color:"#adadad",companyName:"KWTEAM",info:{setting1:!0},invitationDate:987654321,isBillingAdmin:!0,isSSOUser:!1,isTeamAdmin:!0,joinDate:123456789,letter:"K",membersNumber:150,planType:"awesomeType",revokeDate:6872476587,status:n.SpaceStatus.Accepted,teamAdmins:[{login:"kw_test_a13e5r4er357er@mailinator.com"}],teamId:"123456",teamName:"KWTEAM",tier:n.SpaceTier.Legacy,shouldDelete:!1,...e}}function a(e){return{teamId:"123456",details:{associatedEmail:"kw_test_a13e5r4er357er@mailinator.com",billingAdmins:[{login:"kw_test_a13e5r4er357er@mailinator.com"}],color:"#adadad",companyName:"KWTEAM",info:{setting1:!0},invitationDate:987654321,isBillingAdmin:!0,isSSOUser:!1,isTeamAdmin:!0,joinDate:123456789,letter:"K",membersNumber:150,planType:"awesomeType",revokeDate:6872476587,status:n.SpaceStatus.Accepted,teamAdmins:[{login:"kw_test_a13e5r4er357er@mailinator.com"}],teamId:"123456",teamName:"KWTEAM",tier:n.SpaceTier.Legacy,shouldDelete:!1},...e}}t.makePremiumStatusSpace=o,t.makeSpaceData=function(e){return{spaces:e||[a()]}},t.makeSpace=a,t.makePremiumStatusBillingInfo=function(){return{cardExpirationYear:2157,cardExpirationMonth:12,cardLast4Digits:713,cardType:"VISA"}},t.makePremiumStatusWithSpaces=function(e){return{statusCode:n.PremiumStatusCode.NEW_USER,billingInformation:void 0,planName:"stripe",planType:"stripe",endDate:1478536851,autoRenewal:void 0,spaces:e||[o()],capabilities:void 0}},t.makePremiumStatusWithBillingInfo=function(){return{statusCode:n.PremiumStatusCode.NEW_USER,billingInformation:{cardExpirationYear:2157,cardExpirationMonth:12,cardLast4Digits:713,cardType:"VISA"},planName:"stripe",planType:"stripe",endDate:1478536851,autoRenewal:void 0,spaces:void 0,capabilities:void 0}},t.makePremiumStatusWithFamilyMembership=function(){return{statusCode:n.PremiumStatusCode.NEW_USER,billingInformation:void 0,planName:"stripe",planType:"stripe",endDate:1478536851,autoRenewal:void 0,spaces:void 0,capabilities:void 0,familyMembership:{familyId:1,isAdmin:!0,name:"Family"}}},t.makePremiumStatusWithPreviousPlan=function(){return{statusCode:n.PremiumStatusCode.NEW_USER,billingInformation:void 0,planName:"stripe",planType:"stripe",endDate:1478536851,autoRenewal:void 0,spaces:void 0,capabilities:void 0,previousPlan:{planId:"stripeAnnualROWWebsite",endDate:1478536851,startDate:1478536851,statusCode:2,planFeature:"premiumplus"}}},t.makePremiumStatusTrial=function(){return{statusCode:n.PremiumStatusCode.NEW_USER,billingInformation:void 0,planName:"stripe",planType:"stripe",endDate:1478536851,autoRenewal:!1,spaces:void 0,capabilities:void 0}},t.DEFAULT_USER_CAPABILITIES=[{capability:"identityTheftProtection",enabled:!0,info:{}},{capability:"passwordsLimit",enabled:!0,info:{limit:50}},{capability:"secureFiles",enabled:!0,info:{quota:{max:123,remaining:1},maxFileSize:52428800}},{capability:"secureWiFi",enabled:!0,info:{}},{capability:"securityBreach",enabled:!0,info:{}},{capability:"sharingLimit",enabled:!1},{capability:"creditMonitoring",enabled:!1},{capability:"dataLeak",enabled:!1},{capability:"devicesLimit",enabled:!1},{capability:"identityRestoration",enabled:!1},{capability:"multipleAccounts",enabled:!1},{capability:"secureNotes",enabled:!1},{capability:"sync",enabled:!1},{capability:"yubikey",enabled:!1}]}}]);